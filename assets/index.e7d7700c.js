function _mergeNamespaces(e,t){for(var n=0;n<t.length;n++){const r=t[n];if("string"!=typeof r&&!Array.isArray(r))for(const t in r)if("default"!==t&&!(t in e)){const n=Object.getOwnPropertyDescriptor(r,t);n&&Object.defineProperty(e,t,n.get?n:{enumerable:!0,get:()=>r[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Shape$1=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase$3},get Circle(){return Circle$3},get Ellipse(){return Ellipse$3},get Image(){return ImageShape$1},get Line(){return Line$3},get Marker(){return Marker$3},get Path(){return Path$3},get Polygon(){return Polygon$3},get Polyline(){return PolyLine$1},get Rect(){return Rect$3},get Text(){return Text$3}},Symbol.toStringTag,{value:"Module"})),Shape=Object.freeze(Object.defineProperty({__proto__:null,get Base(){return ShapeBase$1},get Circle(){return Circle$1},get Dom(){return Dom$1},get Ellipse(){return Ellipse$1},get Image(){return Image$2},get Line(){return Line$1},get Marker(){return Marker$1},get Path(){return Path$1},get Polygon(){return Polygon$1},get Polyline(){return Polyline$1},get Rect(){return Rect$1},get Text(){return Text$1}},Symbol.toStringTag,{value:"Module"}));function makeMap(e,t){const n=Object.create(null),r=e.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return t?e=>!!n[e.toLowerCase()]:e=>!!n[e]}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const GLOBALS_WHITE_LISTED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",isGloballyWhitelisted=makeMap(GLOBALS_WHITE_LISTED);function normalizeStyle(e){if(isArray$4(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],i=isString$2(r)?parseStringStyle(r):normalizeStyle(r);if(i)for(const e in i)t[e]=i[e]}return t}return isString$2(e)||isObject$2(e)?e:void 0}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach((e=>{if(e){const n=e.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}function normalizeClass(e){let t="";if(isString$2(e))t=e;else if(isArray$4(e))for(let n=0;n<e.length;n++){const r=normalizeClass(e[n]);r&&(t+=r+" ")}else if(isObject$2(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function normalizeProps(e){if(!e)return null;let{class:t,style:n}=e;return t&&!isString$2(t)&&(e.class=normalizeClass(t)),n&&(e.style=normalizeStyle(n)),e}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||""===e}function looseCompareArrays(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=looseEqual(e[r],t[r]);return n}function looseEqual(e,t){if(e===t)return!0;let n=isDate$1(e),r=isDate$1(t);if(n||r)return!(!n||!r)&&e.getTime()===t.getTime();if(n=isSymbol$1(e),r=isSymbol$1(t),n||r)return e===t;if(n=isArray$4(e),r=isArray$4(t),n||r)return!(!n||!r)&&looseCompareArrays(e,t);if(n=isObject$2(e),r=isObject$2(t),n||r){if(!n||!r)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e){const r=e.hasOwnProperty(n),i=t.hasOwnProperty(n);if(r&&!i||!r&&i||!looseEqual(e[n],t[n]))return!1}}return String(e)===String(t)}function looseIndexOf(e,t){return e.findIndex((e=>looseEqual(e,t)))}const toDisplayString=e=>isString$2(e)?e:null==e?"":isArray$4(e)||isObject$2(e)&&(e.toString===objectToString$3||!isFunction$3(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap$2(t)?{[`Map(${t.size})`]:[...t.entries()].reduce(((e,[t,n])=>(e[`${t} =>`]=n,e)),{})}:isSet$2(t)?{[`Set(${t.size})`]:[...t.values()]}:!isObject$2(t)||isArray$4(t)||isPlainObject$3(t)?t:String(t),EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend$2=Object.assign,remove$2=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},hasOwnProperty$p=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$p.call(e,t),isArray$4=Array.isArray,isMap$2=e=>"[object Map]"===toTypeString(e),isSet$2=e=>"[object Set]"===toTypeString(e),isDate$1=e=>"[object Date]"===toTypeString(e),isFunction$3=e=>"function"==typeof e,isString$2=e=>"string"==typeof e,isSymbol$1=e=>"symbol"==typeof e,isObject$2=e=>null!==e&&"object"==typeof e,isPromise=e=>isObject$2(e)&&isFunction$3(e.then)&&isFunction$3(e.catch),objectToString$3=Object.prototype.toString,toTypeString=e=>objectToString$3.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject$3=e=>"[object Object]"===toTypeString(e),isIntegerKey=e=>isString$2(e)&&"NaN"!==e&&"-"!==e[0]&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction$2=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},camelizeRE$1=/-(\w)/g,camelize=cacheStringFunction$2((e=>e.replace(camelizeRE$1,((e,t)=>t?t.toUpperCase():"")))),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction$2((e=>e.replace(hyphenateRE,"-$1").toLowerCase())),capitalize$1=cacheStringFunction$2((e=>e.charAt(0).toUpperCase()+e.slice(1))),toHandlerKey=cacheStringFunction$2((e=>e?`on${capitalize$1(e)}`:"")),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let n=0;n<e.length;n++)e[n](t)},def=(e,t,n)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:n})},toNumber$1=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(e){return new EffectScope(e)}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let n=0;for(let r=0;r<t.length;r++){const i=t[r];wasTracked(i)&&!newTracked(i)?i.delete(e):t[n++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}t.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,t=null,n){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let e=activeEffect,t=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}function effect(e,t){e.effect&&(e=e.effect.fn);const n=new ReactiveEffect(e);t&&(extend$2(n,t),t.scope&&recordEffectScope(n,t.scope)),t&&t.lazy||n.run();const r=n.run.bind(n);return r.effect=n,r}function stop(e){e.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=void 0===e||e}function track(e,t,n){if(shouldTrack&&activeEffect){let t=targetMap.get(e);t||targetMap.set(e,t=new Map);let r=t.get(n);r||t.set(n,r=createDep()),trackEffects(r)}}function trackEffects(e,t){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,n=!wasTracked(e)):n=!e.has(activeEffect),n&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,n,r,i,o){const a=targetMap.get(e);if(!a)return;let s=[];if("clear"===t)s=[...a.values()];else if("length"===n&&isArray$4(e)){const e=toNumber$1(r);a.forEach(((t,n)=>{("length"===n||n>=e)&&s.push(t)}))}else switch(void 0!==n&&s.push(a.get(n)),t){case"add":isArray$4(e)?isIntegerKey(n)&&s.push(a.get("length")):(s.push(a.get(ITERATE_KEY)),isMap$2(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$4(e)||(s.push(a.get(ITERATE_KEY)),isMap$2(e)&&s.push(a.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$2(e)&&s.push(a.get(ITERATE_KEY))}if(1===s.length)s[0]&&triggerEffects(s[0]);else{const e=[];for(const t of s)t&&e.push(...t);triggerEffects(createDep(e))}}function triggerEffects(e,t){const n=isArray$4(e)?e:[...e];for(const r of n)r.computed&&triggerEffect(r);for(const r of n)r.computed||triggerEffect(r)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter((e=>"arguments"!==e&&"caller"!==e)).map((e=>Symbol[e])).filter(isSymbol$1)),get$3=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),shallowReadonlyGet=createGetter(!0,!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach((t=>{e[t]=function(...e){const n=toRaw(this);for(let t=0,i=this.length;t<i;t++)track(n,"get",t+"");const r=n[t](...e);return-1===r||!1===r?n[t](...e.map(toRaw)):r}})),["push","pop","shift","unshift","splice"].forEach((t=>{e[t]=function(...e){pauseTracking();const n=toRaw(this)[t].apply(this,e);return resetTracking(),n}})),e}function createGetter(e=!1,t=!1){return function(n,r,i){if("__v_isReactive"===r)return!e;if("__v_isReadonly"===r)return e;if("__v_isShallow"===r)return t;if("__v_raw"===r&&i===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const o=isArray$4(n);if(!e&&o&&hasOwn(arrayInstrumentations,r))return Reflect.get(arrayInstrumentations,r,i);const a=Reflect.get(n,r,i);return(isSymbol$1(r)?builtInSymbols.has(r):isNonTrackableKeys(r))?a:(e||track(n,"get",r),t?a:isRef(a)?o&&isIntegerKey(r)?a:a.value:isObject$2(a)?e?readonly(a):reactive(a):a)}}const set$b=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(t,n,r,i){let o=t[n];if(isReadonly(o)&&isRef(o)&&!isRef(r))return!1;if(!e&&(isShallow(r)||isReadonly(r)||(o=toRaw(o),r=toRaw(r)),!isArray$4(t)&&isRef(o)&&!isRef(r)))return o.value=r,!0;const a=isArray$4(t)&&isIntegerKey(n)?Number(n)<t.length:hasOwn(t,n),s=Reflect.set(t,n,r,i);return t===toRaw(i)&&(a?hasChanged(r,o)&&trigger(t,"set",n,r):trigger(t,"add",n,r)),s}}function deleteProperty(e,t){const n=hasOwn(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&trigger(e,"delete",t,void 0),r}function has$2(e,t){const n=Reflect.has(e,t);return isSymbol$1(t)&&builtInSymbols.has(t)||track(e,"has",t),n}function ownKeys$4(e){return track(e,"iterate",isArray$4(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$3,set:set$b,deleteProperty:deleteProperty,has:has$2,ownKeys:ownKeys$4},readonlyHandlers={get:readonlyGet,set:(e,t)=>!0,deleteProperty:(e,t)=>!0},shallowReactiveHandlers=extend$2({},mutableHandlers,{get:shallowGet,set:shallowSet}),shallowReadonlyHandlers=extend$2({},readonlyHandlers,{get:shallowReadonlyGet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get$1$1(e,t,n=!1,r=!1){const i=toRaw(e=e.__v_raw),o=toRaw(t);n||(t!==o&&track(i,"get",t),track(i,"get",o));const{has:a}=getProto(i),s=r?toShallow:n?toReadonly:toReactive;return a.call(i,t)?s(e.get(t)):a.call(i,o)?s(e.get(o)):void(e!==i&&e.get(t))}function has$1$1(e,t=!1){const n=this.__v_raw,r=toRaw(n),i=toRaw(e);return t||(e!==i&&track(r,"has",e),track(r,"has",i)),e===i?n.has(e):n.has(e)||n.has(i)}function size$1(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add$a(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set$1$1(e,t){t=toRaw(t);const n=toRaw(this),{has:r,get:i}=getProto(n);let o=r.call(n,e);o||(e=toRaw(e),o=r.call(n,e));const a=i.call(n,e);return n.set(e,t),o?hasChanged(t,a)&&trigger(n,"set",e,t):trigger(n,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:n,get:r}=getProto(t);let i=n.call(t,e);i||(e=toRaw(e),i=n.call(t,e)),r&&r.call(t,e);const o=t.delete(e);return i&&trigger(t,"delete",e,void 0),o}function clear(){const e=toRaw(this),t=0!==e.size,n=e.clear();return t&&trigger(e,"clear",void 0,void 0),n}function createForEach(e,t){return function(n,r){const i=this,o=i.__v_raw,a=toRaw(o),s=t?toShallow:e?toReadonly:toReactive;return!e&&track(a,"iterate",ITERATE_KEY),o.forEach(((e,t)=>n.call(r,s(e),s(t),i)))}}function createIterableMethod(e,t,n){return function(...r){const i=this.__v_raw,o=toRaw(i),a=isMap$2(o),s="entries"===e||e===Symbol.iterator&&a,l="keys"===e&&a,c=i[e](...r),u=n?toShallow:t?toReadonly:toReactive;return!t&&track(o,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:e,done:t}=c.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return"delete"!==e&&this}}function createInstrumentations(){const e={get(e){return get$1$1(this,e)},get size(){return size$1(this)},has:has$1$1,add:add$a,set:set$1$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!1)},t={get(e){return get$1$1(this,e,!1,!0)},get size(){return size$1(this)},has:has$1$1,add:add$a,set:set$1$1,delete:deleteEntry,clear:clear,forEach:createForEach(!1,!0)},n={get(e){return get$1$1(this,e,!0)},get size(){return size$1(this,!0)},has(e){return has$1$1.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},r={get(e){return get$1$1(this,e,!0,!0)},get size(){return size$1(this,!0)},has(e){return has$1$1.call(this,e,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{e[i]=createIterableMethod(i,!1,!1),n[i]=createIterableMethod(i,!0,!1),t[i]=createIterableMethod(i,!1,!0),r[i]=createIterableMethod(i,!0,!0)})),[e,n,t,r]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const n=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(t,r,i)=>"__v_isReactive"===r?!e:"__v_isReadonly"===r?e:"__v_raw"===r?t:Reflect.get(hasOwn(n,r)&&r in t?n:t,r,i)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,n,r,i){if(!isObject$2(e))return e;if(e.__v_raw&&(!t||!e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=getTargetType(e);if(0===a)return e;const s=new Proxy(e,2===a?r:n);return i.set(e,s),s}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!(!e||!e.__v_isReactive)}function isReadonly(e){return!(!e||!e.__v_isReadonly)}function isShallow(e){return!(!e||!e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject$2(e)?reactive(e):e,toReadonly=e=>isObject$2(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&trackEffects((e=toRaw(e)).dep||(e.dep=createDep()))}function triggerRefValue(e,t){(e=toRaw(e)).dep&&triggerEffects(e.dep)}function isRef(e){return!(!e||!0!==e.__v_isRef)}function ref$1(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const t=this.__v_isShallow||isShallow(e)||isReadonly(e);e=t?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:toReactive(e),triggerRefValue(this))}}function triggerRef(e){triggerRefValue(e)}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,n)=>unref(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const i=e[t];return isRef(i)&&!isRef(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.dep=void 0,this.__v_isRef=!0;const{get:t,set:n}=e((()=>trackRefValue(this)),(()=>triggerRefValue(this)));this._get=t,this._set=n}get value(){return this._get()}set value(e){this._set(e)}}function customRef(e){return new CustomRefImpl(e)}function toRefs(e){const t=isArray$4(e)?new Array(e.length):{};for(const n in e)t[n]=toRef(e,n);return t}class ObjectRefImpl{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return void 0===e?this._defaultValue:e}set value(e){this._object[this._key]=e}}function toRef(e,t,n){const r=e[t];return isRef(r)?r:new ObjectRefImpl(e,t,n)}var _a$2;class ComputedRefImpl{constructor(e,t,n,r){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this[_a$2]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,(()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))})),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=toRaw(this);return trackRefValue(e),!e._dirty&&e._cacheable||(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function computed$1(e,t,n=!1){let r,i;const o=isFunction$3(e);o?(r=e,i=NOOP):(r=e.get,i=e.set);return new ComputedRefImpl(r,i,o||!i,n)}function warn(e,...t){}function callWithErrorHandling(e,t,n,r){let i;try{i=r?e(...r):e()}catch(o){handleError(o,t,n)}return i}function callWithAsyncErrorHandling(e,t,n,r){if(isFunction$3(e)){const i=callWithErrorHandling(e,t,n,r);return i&&isPromise(i)&&i.catch((e=>{handleError(e,t,n)})),i}const i=[];for(let o=0;o<e.length;o++)i.push(callWithAsyncErrorHandling(e[o],t,n,r));return i}function handleError(e,t,n,r=!0){const i=t?t.vnode:null;if(t){let r=t.parent;const i=t.proxy,o=n;for(;r;){const t=r.ec;if(t)for(let n=0;n<t.length;n++)if(!1===t[n](e,i,o))return;r=r.parent}const a=t.appContext.config.errorHandler;if(a)return void callWithErrorHandling(a,null,10,[e,i,o])}logError(e,n,i,r)}function logError(e,t,n,r=!0){}_a$2="__v_isReadonly";let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,n=queue$1.length;for(;t<n;){const r=t+n>>>1;getId(queue$1[r])<e?t=r+1:n=r}return t}function queueJob(e){queue$1.length&&queue$1.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex)||(null==e.id?queue$1.push(e):queue$1.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){isFlushing||isFlushPending||(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue$1.indexOf(e);t>flushIndex&&queue$1.splice(t,1)}function queuePostFlushCb(e){isArray$4(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex)||pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=(isFlushing?flushIndex+1:0)){for(;t<queue$1.length;t++){const e=queue$1[t];e&&e.pre&&(queue$1.splice(t,1),t--,e())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs)return void activePostFlushCbs.push(...e);for(activePostFlushCbs=e,activePostFlushCbs.sort(((e,t)=>getId(e)-getId(t))),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>null==e.id?1/0:e.id,comparator=(e,t)=>{const n=getId(e)-getId(t);if(0===n){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return n};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const e=queue$1[flushIndex];e&&!1!==e.active&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools,buffer=[];function setDevtoolsHook(e,t){var n,r;if(devtools=e,devtools)devtools.enabled=!0,buffer.forEach((({event:e,args:t})=>devtools.emit(e,...t))),buffer=[];else if("undefined"!=typeof window&&window.HTMLElement&&!(null===(r=null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||void 0===r?void 0:r.includes("jsdom"))){(t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push((e=>{setDevtoolsHook(e,t)})),setTimeout((()=>{devtools||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer=[])}),3e3)}else buffer=[]}function emit$1(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let i=n;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in r){const e=`${"modelValue"===a?"model":a}Modifiers`,{number:t,trim:o}=r[e]||EMPTY_OBJ;o&&(i=n.map((e=>isString$2(e)?e.trim():e))),t&&(i=n.map(toNumber$1))}let s,l=r[s=toHandlerKey(t)]||r[s=toHandlerKey(camelize(t))];!l&&o&&(l=r[s=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,i);const c=r[s+"Once"];if(c){if(e.emitted){if(e.emitted[s])return}else e.emitted={};e.emitted[s]=!0,callWithAsyncErrorHandling(c,e,6,i)}}function normalizeEmitsOptions(e,t,n=!1){const r=t.emitsCache,i=r.get(e);if(void 0!==i)return i;const o=e.emits;let a={},s=!1;if(!isFunction$3(e)){const r=e=>{const n=normalizeEmitsOptions(e,t,!0);n&&(s=!0,extend$2(a,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return o||s?(isArray$4(o)?o.forEach((e=>a[e]=null)):extend$2(a,o),isObject$2(e)&&r.set(e,a),a):(isObject$2(e)&&r.set(e,null),null)}function isEmitListener(e,t){return!(!e||!isOn(t))&&(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function pushScopeId(e){currentScopeId=e}function popScopeId(){currentScopeId=null}const withScopeId=e=>withCtx;function withCtx(e,t=currentRenderingInstance,n){if(!t)return e;if(e._n)return e;const r=(...n)=>{r._d&&setBlockTracking(-1);const i=setCurrentRenderingInstance(t);let o;try{o=e(...n)}finally{setCurrentRenderingInstance(i),r._d&&setBlockTracking(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:p,inheritAttrs:g}=e;let m,v;const y=setCurrentRenderingInstance(e);try{if(4&n.shapeFlag){const e=i||r;m=normalizeVNode(u.call(e,e,h,o,f,d,p)),v=l}else{const e=t;0,m=normalizeVNode(e.length>1?e(o,{attrs:l,slots:s,emit:c}):e(o,null)),v=t.props?l:getFunctionalFallthrough(l)}}catch(x){blockStack.length=0,handleError(x,e,1),m=createVNode(Comment)}let b=m;if(v&&!1!==g){const e=Object.keys(v),{shapeFlag:t}=b;e.length&&7&t&&(a&&e.some(isModelListener)&&(v=filterModelListeners(v,a)),b=cloneVNode(b,v))}return n.dirs&&(b=cloneVNode(b),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&(b.transition=n.transition),m=b,setCurrentRenderingInstance(y),m}function filterSingleRoot(e){let t;for(let n=0;n<e.length;n++){const r=e[n];if(!isVNode(r))return;if(r.type!==Comment||"v-if"===r.children){if(t)return;t=r}}return t}const getFunctionalFallthrough=e=>{let t;for(const n in e)("class"===n||"style"===n||isOn(n))&&((t||(t={}))[n]=e[n]);return t},filterModelListeners=(e,t)=>{const n={};for(const r in e)isModelListener(r)&&r.slice(9)in t||(n[r]=e[r]);return n};function shouldUpdateComponent(e,t,n){const{props:r,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,c=o.emitsOptions;if(t.dirs||t.transition)return!0;if(!(n&&l>=0))return!(!i&&!s||s&&s.$stable)||r!==a&&(r?!a||hasPropsChanged(r,a,c):!!a);if(1024&l)return!0;if(16&l)return r?hasPropsChanged(r,a,c):!!a;if(8&l){const e=t.dynamicProps;for(let t=0;t<e.length;t++){const n=e[t];if(a[n]!==r[n]&&!isEmitListener(c,n))return!0}}return!1}function hasPropsChanged(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(t[o]!==e[o]&&!isEmitListener(n,o))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},n){for(;t&&t.subTree===e;)(e=t.vnode).el=n,t=t.parent}const isSuspense=e=>e.__isSuspense,SuspenseImpl={name:"Suspense",__isSuspense:!0,process(e,t,n,r,i,o,a,s,l,c){null==e?mountSuspense(t,n,r,i,o,a,s,l,c):patchSuspense(e,t,n,r,i,a,s,l,c)},hydrate:hydrateSuspense,create:createSuspenseBoundary,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(e,t){const n=e.props&&e.props[t];isFunction$3(n)&&n()}function mountSuspense(e,t,n,r,i,o,a,s,l){const{p:c,o:{createElement:u}}=l,h=u("div"),d=e.suspense=createSuspenseBoundary(e,i,r,t,h,n,o,a,s,l);c(null,d.pendingBranch=e.ssContent,h,null,r,d,o,a),d.deps>0?(triggerEvent(e,"onPending"),triggerEvent(e,"onFallback"),c(null,e.ssFallback,t,n,r,null,o,a),setActiveBranch(d,e.ssFallback)):d.resolve()}function patchSuspense(e,t,n,r,i,o,a,s,{p:l,um:c,o:{createElement:u}}){const h=t.suspense=e.suspense;h.vnode=t,t.el=e.el;const d=t.ssContent,f=t.ssFallback,{activeBranch:p,pendingBranch:g,isInFallback:m,isHydrating:v}=h;if(g)h.pendingBranch=d,isSameVNodeType(d,g)?(l(g,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0?h.resolve():m&&(l(p,f,n,r,i,null,o,a,s),setActiveBranch(h,f))):(h.pendingId++,v?(h.isHydrating=!1,h.activeBranch=g):c(g,i,h),h.deps=0,h.effects.length=0,h.hiddenContainer=u("div"),m?(l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0?h.resolve():(l(p,f,n,r,i,null,o,a,s),setActiveBranch(h,f))):p&&isSameVNodeType(d,p)?(l(p,d,n,r,i,h,o,a,s),h.resolve(!0)):(l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0&&h.resolve()));else if(p&&isSameVNodeType(d,p))l(p,d,n,r,i,h,o,a,s),setActiveBranch(h,d);else if(triggerEvent(t,"onPending"),h.pendingBranch=d,h.pendingId++,l(null,d,h.hiddenContainer,null,i,h,o,a,s),h.deps<=0)h.resolve();else{const{timeout:e,pendingId:t}=h;e>0?setTimeout((()=>{h.pendingId===t&&h.fallback(f)}),e):0===e&&h.fallback(f)}}function createSuspenseBoundary(e,t,n,r,i,o,a,s,l,c,u=!1){const{p:h,m:d,um:f,n:p,o:{parentNode:g,remove:m}}=c,v=toNumber$1(e.props&&e.props.timeout),y={vnode:e,parent:t,parentComponent:n,isSVG:a,container:r,hiddenContainer:i,anchor:o,deps:0,pendingId:0,timeout:"number"==typeof v?v:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:u,isUnmounted:!1,effects:[],resolve(e=!1){const{vnode:t,activeBranch:n,pendingBranch:r,pendingId:i,effects:o,parentComponent:a,container:s}=y;if(y.isHydrating)y.isHydrating=!1;else if(!e){const e=n&&r.transition&&"out-in"===r.transition.mode;e&&(n.transition.afterLeave=()=>{i===y.pendingId&&d(r,s,t,0)});let{anchor:t}=y;n&&(t=p(n),f(n,a,y,!0)),e||d(r,s,t,0)}setActiveBranch(y,r),y.pendingBranch=null,y.isInFallback=!1;let l=y.parent,c=!1;for(;l;){if(l.pendingBranch){l.effects.push(...o),c=!0;break}l=l.parent}c||queuePostFlushCb(o),y.effects=[],triggerEvent(t,"onResolve")},fallback(e){if(!y.pendingBranch)return;const{vnode:t,activeBranch:n,parentComponent:r,container:i,isSVG:o}=y;triggerEvent(t,"onFallback");const a=p(n),c=()=>{y.isInFallback&&(h(null,e,i,a,r,null,o,s,l),setActiveBranch(y,e))},u=e.transition&&"out-in"===e.transition.mode;u&&(n.transition.afterLeave=c),y.isInFallback=!0,f(n,r,null,!0),u||c()},move(e,t,n){y.activeBranch&&d(y.activeBranch,e,t,n),y.container=e},next:()=>y.activeBranch&&p(y.activeBranch),registerDep(e,t){const n=!!y.pendingBranch;n&&y.deps++;const r=e.vnode.el;e.asyncDep.catch((t=>{handleError(t,e,0)})).then((i=>{if(e.isUnmounted||y.isUnmounted||y.pendingId!==e.suspenseId)return;e.asyncResolved=!0;const{vnode:o}=e;handleSetupResult(e,i,!1),r&&(o.el=r);const s=!r&&e.subTree.el;t(e,o,g(r||e.subTree.el),r?null:p(e.subTree),y,a,l),s&&m(s),updateHOCHostEl(e,o.el),n&&0==--y.deps&&y.resolve()}))},unmount(e,t){y.isUnmounted=!0,y.activeBranch&&f(y.activeBranch,n,e,t),y.pendingBranch&&f(y.pendingBranch,n,e,t)}};return y}function hydrateSuspense(e,t,n,r,i,o,a,s,l){const c=t.suspense=createSuspenseBoundary(t,r,n,e.parentNode,document.createElement("div"),null,i,o,a,s,!0),u=l(e,c.pendingBranch=t.ssContent,n,c,o,a);return 0===c.deps&&c.resolve(),u}function normalizeSuspenseChildren(e){const{shapeFlag:t,children:n}=e,r=32&t;e.ssContent=normalizeSuspenseSlot(r?n.default:n),e.ssFallback=r?normalizeSuspenseSlot(n.fallback):createVNode(Comment)}function normalizeSuspenseSlot(e){let t;if(isFunction$3(e)){const n=isBlockTreeEnabled&&e._c;n&&(e._d=!1,openBlock()),e=e(),n&&(e._d=!0,t=currentBlock,closeBlock())}if(isArray$4(e)){const t=filterSingleRoot(e);e=t}return e=normalizeVNode(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter((t=>t!==e))),e}function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray$4(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function setActiveBranch(e,t){e.activeBranch=t;const{vnode:n,parentComponent:r}=e,i=n.el=t.el;r&&r.subTree===n&&(r.vnode.el=i,updateHOCHostEl(r,i))}function provide(e,t){if(currentInstance){let n=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===n&&(n=currentInstance.provides=Object.create(r)),n[e]=t}else;}function inject(e,t,n=!1){const r=currentInstance||currentRenderingInstance;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return n&&isFunction$3(t)?t.call(r.proxy):t}}function watchEffect(e,t){return doWatch(e,null,t)}function watchPostEffect(e,t){return doWatch(e,null,{flush:"post"})}function watchSyncEffect(e,t){return doWatch(e,null,{flush:"sync"})}const INITIAL_WATCHER_VALUE={};function watch(e,t,n){return doWatch(e,t,n)}function doWatch(e,t,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:a}=EMPTY_OBJ){const s=currentInstance;let l,c,u=!1,h=!1;if(isRef(e)?(l=()=>e.value,u=isShallow(e)):isReactive(e)?(l=()=>e,r=!0):isArray$4(e)?(h=!0,u=e.some((e=>isReactive(e)||isShallow(e))),l=()=>e.map((e=>isRef(e)?e.value:isReactive(e)?traverse$1(e):isFunction$3(e)?callWithErrorHandling(e,s,2):void 0))):l=isFunction$3(e)?t?()=>callWithErrorHandling(e,s,2):()=>{if(!s||!s.isUnmounted)return c&&c(),callWithAsyncErrorHandling(e,s,3,[f])}:NOOP,t&&r){const e=l;l=()=>traverse$1(e())}let d,f=e=>{c=v.onStop=()=>{callWithErrorHandling(e,s,4)}};if(isInSSRComponentSetup){if(f=NOOP,t?n&&callWithAsyncErrorHandling(t,s,3,[l(),h?[]:void 0,f]):l(),"sync"!==i)return NOOP;{const e=useSSRContext();d=e.__watcherHandles||(e.__watcherHandles=[])}}let p=h?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const g=()=>{if(v.active)if(t){const e=v.run();(r||u||(h?e.some(((e,t)=>hasChanged(e,p[t]))):hasChanged(e,p)))&&(c&&c(),callWithAsyncErrorHandling(t,s,3,[e,p===INITIAL_WATCHER_VALUE?void 0:h&&p[0]===INITIAL_WATCHER_VALUE?[]:p,f]),p=e)}else v.run()};let m;g.allowRecurse=!!t,"sync"===i?m=g:"post"===i?m=()=>queuePostRenderEffect(g,s&&s.suspense):(g.pre=!0,s&&(g.id=s.uid),m=()=>queueJob(g));const v=new ReactiveEffect(l,m);t?n?g():p=v.run():"post"===i?queuePostRenderEffect(v.run.bind(v),s&&s.suspense):v.run();const y=()=>{v.stop(),s&&s.scope&&remove$2(s.scope.effects,v)};return d&&d.push(y),y}function instanceWatch(e,t,n){const r=this.proxy,i=isString$2(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let o;isFunction$3(t)?o=t:(o=t.handler,n=t);const a=currentInstance;setCurrentInstance(this);const s=doWatch(i,o.bind(r),n);return a?setCurrentInstance(a):unsetCurrentInstance(),s}function createPathGetter(e,t){const n=t.split(".");return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}function traverse$1(e,t){if(!isObject$2(e)||e.__v_skip)return e;if((t=t||new Set).has(e))return e;if(t.add(e),isRef(e))traverse$1(e.value,t);else if(isArray$4(e))for(let n=0;n<e.length;n++)traverse$1(e[n],t);else if(isSet$2(e)||isMap$2(e))e.forEach((e=>{traverse$1(e,t)}));else if(isPlainObject$3(e))for(const n in e)traverse$1(e[n],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted((()=>{e.isMounted=!0})),onBeforeUnmount((()=>{e.isUnmounting=!0})),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const n=getCurrentInstance(),r=useTransitionState();let i;return()=>{const o=t.default&&getTransitionRawChildren(t.default(),!0);if(!o||!o.length)return;let a=o[0];if(o.length>1)for(const e of o)if(e.type!==Comment){a=e;break}const s=toRaw(e),{mode:l}=s;if(r.isLeaving)return emptyPlaceholder(a);const c=getKeepAliveChild(a);if(!c)return emptyPlaceholder(a);const u=resolveTransitionHooks(c,s,r,n);setTransitionHooks(c,u);const h=n.subTree,d=h&&getKeepAliveChild(h);let f=!1;const{getTransitionKey:p}=c.type;if(p){const e=p();void 0===i?i=e:e!==i&&(i=e,f=!0)}if(d&&d.type!==Comment&&(!isSameVNodeType(c,d)||f)){const e=resolveTransitionHooks(d,s,r,n);if(setTransitionHooks(d,e),"out-in"===l)return r.isLeaving=!0,e.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&n.update()},emptyPlaceholder(a);"in-out"===l&&c.type!==Comment&&(e.delayLeave=(e,t,n)=>{getLeavingNodesForType(r,d)[String(d.key)]=d,e._leaveCb=()=>{t(),e._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=n})}return a}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:n}=e;let r=n.get(t.type);return r||(r=Object.create(null),n.set(t.type,r)),r}function resolveTransitionHooks(e,t,n,r){const{appear:i,mode:o,persisted:a=!1,onBeforeEnter:s,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:h,onLeave:d,onAfterLeave:f,onLeaveCancelled:p,onBeforeAppear:g,onAppear:m,onAfterAppear:v,onAppearCancelled:y}=t,b=String(e.key),x=getLeavingNodesForType(n,e),w=(e,t)=>{e&&callWithAsyncErrorHandling(e,r,9,t)},_=(e,t)=>{const n=t[1];w(e,t),isArray$4(e)?e.every((e=>e.length<=1))&&n():e.length<=1&&n()},C={mode:o,persisted:a,beforeEnter(t){let r=s;if(!n.isMounted){if(!i)return;r=g||s}t._leaveCb&&t._leaveCb(!0);const o=x[b];o&&isSameVNodeType(e,o)&&o.el._leaveCb&&o.el._leaveCb(),w(r,[t])},enter(e){let t=l,r=c,o=u;if(!n.isMounted){if(!i)return;t=m||l,r=v||c,o=y||u}let a=!1;const s=e._enterCb=t=>{a||(a=!0,w(t?o:r,[e]),C.delayedLeave&&C.delayedLeave(),e._enterCb=void 0)};t?_(t,[e,s]):s()},leave(t,r){const i=String(e.key);if(t._enterCb&&t._enterCb(!0),n.isUnmounting)return r();w(h,[t]);let o=!1;const a=t._leaveCb=n=>{o||(o=!0,r(),w(n?p:f,[t]),t._leaveCb=void 0,x[i]===e&&delete x[i])};x[i]=e,d?_(d,[t,a]):a()},clone:e=>resolveTransitionHooks(e,t,n,r)};return C}function emptyPlaceholder(e){if(isKeepAlive(e))return(e=cloneVNode(e)).children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){6&e.shapeFlag&&e.component?setTransitionHooks(e.component.subTree,t):128&e.shapeFlag?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,n){let r=[],i=0;for(let o=0;o<e.length;o++){let a=e[o];const s=null==n?a.key:String(n)+String(null!=a.key?a.key:o);a.type===Fragment?(128&a.patchFlag&&i++,r=r.concat(getTransitionRawChildren(a.children,t,s))):(t||a.type!==Comment)&&r.push(null!=s?cloneVNode(a,{key:s}):a)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function defineComponent(e){return isFunction$3(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader;function defineAsyncComponent(e){isFunction$3(e)&&(e={loader:e});const{loader:t,loadingComponent:n,errorComponent:r,delay:i=200,timeout:o,suspensible:a=!0,onError:s}=e;let l,c=null,u=0;const h=()=>{let e;return c||(e=c=t().catch((e=>{if(e=e instanceof Error?e:new Error(String(e)),s)return new Promise(((t,n)=>{s(e,(()=>t((u++,c=null,h()))),(()=>n(e)),u+1)}));throw e})).then((t=>e!==c&&c?c:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),l=t,t))))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:h,get __asyncResolved(){return l},setup(){const e=currentInstance;if(l)return()=>createInnerComp(l,e);const t=t=>{c=null,handleError(t,e,13,!r)};if(a&&e.suspense||isInSSRComponentSetup)return h().then((t=>()=>createInnerComp(t,e))).catch((e=>(t(e),()=>r?createVNode(r,{error:e}):null)));const s=ref$1(!1),u=ref$1(),d=ref$1(!!i);return i&&setTimeout((()=>{d.value=!1}),i),null!=o&&setTimeout((()=>{if(!s.value&&!u.value){const e=new Error(`Async component timed out after ${o}ms.`);t(e),u.value=e}}),o),h().then((()=>{s.value=!0,e.parent&&isKeepAlive(e.parent.vnode)&&queueJob(e.parent.update)})).catch((e=>{t(e),u.value=e})),()=>s.value&&l?createInnerComp(l,e):u.value&&r?createVNode(r,{error:u.value}):n&&!d.value?createVNode(n):void 0}})}function createInnerComp(e,t){const{ref:n,props:r,children:i,ce:o}=t.vnode,a=createVNode(e,r,i);return a.ref=n,a.ce=o,delete t.vnode.ce,a}const isKeepAlive=e=>e.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const n=getCurrentInstance(),r=n.ctx;if(!r.renderer)return()=>{const e=t.default&&t.default();return e&&1===e.length?e[0]:e};const i=new Map,o=new Set;let a=null;const s=n.suspense,{renderer:{p:l,m:c,um:u,o:{createElement:h}}}=r,d=h("div");function f(e){resetShapeFlag(e),u(e,n,s,!0)}function p(e){i.forEach(((t,n)=>{const r=getComponentName(t.type);!r||e&&e(r)||g(n)}))}function g(e){const t=i.get(e);a&&t.type===a.type?a&&resetShapeFlag(a):f(t),i.delete(e),o.delete(e)}r.activate=(e,t,n,r,i)=>{const o=e.component;c(e,t,n,0,s),l(o.vnode,e,t,n,o,s,r,e.slotScopeIds,i),queuePostRenderEffect((()=>{o.isDeactivated=!1,o.a&&invokeArrayFns(o.a);const t=e.props&&e.props.onVnodeMounted;t&&invokeVNodeHook(t,o.parent,e)}),s)},r.deactivate=e=>{const t=e.component;c(e,d,null,1,s),queuePostRenderEffect((()=>{t.da&&invokeArrayFns(t.da);const n=e.props&&e.props.onVnodeUnmounted;n&&invokeVNodeHook(n,t.parent,e),t.isDeactivated=!0}),s)},watch((()=>[e.include,e.exclude]),(([e,t])=>{e&&p((t=>matches(e,t))),t&&p((e=>!matches(t,e)))}),{flush:"post",deep:!0});let m=null;const v=()=>{null!=m&&i.set(m,getInnerChild(n.subTree))};return onMounted(v),onUpdated(v),onBeforeUnmount((()=>{i.forEach((e=>{const{subTree:t,suspense:r}=n,i=getInnerChild(t);if(e.type!==i.type)f(e);else{resetShapeFlag(i);const e=i.component.da;e&&queuePostRenderEffect(e,r)}}))})),()=>{if(m=null,!t.default)return null;const n=t.default(),r=n[0];if(n.length>1)return a=null,n;if(!(isVNode(r)&&(4&r.shapeFlag||128&r.shapeFlag)))return a=null,r;let s=getInnerChild(r);const l=s.type,c=getComponentName(isAsyncWrapper(s)?s.type.__asyncResolved||{}:l),{include:u,exclude:h,max:d}=e;if(u&&(!c||!matches(u,c))||h&&c&&matches(h,c))return a=s,r;const f=null==s.key?l:s.key,p=i.get(f);return s.el&&(s=cloneVNode(s),128&r.shapeFlag&&(r.ssContent=s)),m=f,p?(s.el=p.el,s.component=p.component,s.transition&&setTransitionHooks(s,s.transition),s.shapeFlag|=512,o.delete(f),o.add(f)):(o.add(f),d&&o.size>parseInt(d,10)&&g(o.values().next().value)),s.shapeFlag|=256,a=s,isSuspense(r.type)?r:s}}},KeepAlive=KeepAliveImpl;function matches(e,t){return isArray$4(e)?e.some((e=>matches(e,t))):isString$2(e)?e.split(",").includes(t):!!e.test&&e.test(t)}function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,n=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()});if(injectHook(t,r,n),n){let e=n.parent;for(;e&&e.parent;)isKeepAlive(e.parent.vnode)&&injectToKeepAliveRoot(r,t,n,e),e=e.parent}}function injectToKeepAliveRoot(e,t,n,r){const i=injectHook(t,e,r,!0);onUnmounted((()=>{remove$2(r[t],i)}),n)}function resetShapeFlag(e){e.shapeFlag&=-257,e.shapeFlag&=-513}function getInnerChild(e){return 128&e.shapeFlag?e.ssContent:e}function injectHook(e,t,n=currentInstance,r=!1){if(n){const i=n[e]||(n[e]=[]),o=t.__weh||(t.__weh=(...r)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const i=callWithAsyncErrorHandling(t,n,e,r);return unsetCurrentInstance(),resetTracking(),i});return r?i.unshift(o):i.push(o),o}}const createHook=e=>(t,n=currentInstance)=>(!isInSSRComponentSetup||"sp"===e)&&injectHook(e,((...e)=>t(...e)),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function withDirectives(e,t){const n=currentRenderingInstance;if(null===n)return e;const r=getExposeProxy(n)||n.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[e,n,a,s=EMPTY_OBJ]=t[o];e&&(isFunction$3(e)&&(e={mounted:e,updated:e}),e.deep&&traverse$1(n),i.push({dir:e,instance:r,value:n,oldValue:void 0,arg:a,modifiers:s}))}return e}function invokeDirectiveHook(e,t,n,r){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,n,8,[e.el,s,e,t]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(e,t){return resolveAsset(COMPONENTS,e,!0,t)||e}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(e){return isString$2(e)?resolveAsset(COMPONENTS,e,!1)||e:e||NULL_DYNAMIC_COMPONENT}function resolveDirective(e){return resolveAsset(DIRECTIVES,e)}function resolveAsset(e,t,n=!0,r=!1){const i=currentRenderingInstance||currentInstance;if(i){const n=i.type;if(e===COMPONENTS){const e=getComponentName(n,!1);if(e&&(e===t||e===camelize(t)||e===capitalize$1(camelize(t))))return n}const o=resolve$2(i[e]||n[e],t)||resolve$2(i.appContext[e],t);return!o&&r?n:o}}function resolve$2(e,t){return e&&(e[t]||e[camelize(t)]||e[capitalize$1(camelize(t))])}function renderList(e,t,n,r){let i;const o=n&&n[r];if(isArray$4(e)||isString$2(e)){i=new Array(e.length);for(let n=0,r=e.length;n<r;n++)i[n]=t(e[n],n,void 0,o&&o[n])}else if("number"==typeof e){i=new Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,o&&o[n])}else if(isObject$2(e))if(e[Symbol.iterator])i=Array.from(e,((e,n)=>t(e,n,void 0,o&&o[n])));else{const n=Object.keys(e);i=new Array(n.length);for(let r=0,a=n.length;r<a;r++){const a=n[r];i[r]=t(e[a],a,r,o&&o[r])}}else i=[];return n&&(n[r]=i),i}function createSlots(e,t){for(let n=0;n<t.length;n++){const r=t[n];if(isArray$4(r))for(let t=0;t<r.length;t++)e[r[t].name]=r[t].fn;else r&&(e[r.name]=r.key?(...e)=>{const t=r.fn(...e);return t&&(t.key=r.key),t}:r.fn)}return e}function renderSlot(e,t,n={},r,i){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return"default"!==t&&(n.name=t),createVNode("slot",n,r&&r());let o=e[t];o&&o._c&&(o._d=!1),openBlock();const a=o&&ensureValidVNode(o(n)),s=createBlock(Fragment,{key:n.key||a&&a.key||`_${t}`},a||(r?r():[]),a&&1===e._?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function ensureValidVNode(e){return e.some((e=>!isVNode(e)||e.type!==Comment&&!(e.type===Fragment&&!ensureValidVNode(e.children))))?e:null}function toHandlers(e,t){const n={};for(const r in e)n[t&&/[A-Z]/.test(r)?`on:${r}`:toHandlerKey(r)]=e[r];return n}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend$2(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:n,setupState:r,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let c;if("$"!==t[0]){const s=a[t];if(void 0!==s)switch(s){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return o[t]}else{if(hasSetupBinding(r,t))return a[t]=1,r[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return a[t]=2,i[t];if((c=e.propsOptions[0])&&hasOwn(c,t))return a[t]=3,o[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return a[t]=4,n[t];shouldCacheAccess&&(a[t]=0)}}const u=publicPropertiesMap[t];let h,d;return u?("$attrs"===t&&track(e,"get",t),u(e)):(h=s.__cssModules)&&(h=h[t])?h:n!==EMPTY_OBJ&&hasOwn(n,t)?(a[t]=4,n[t]):(d=l.config.globalProperties,hasOwn(d,t)?d[t]:void 0)},set({_:e},t,n){const{data:r,setupState:i,ctx:o}=e;return hasSetupBinding(i,t)?(i[t]=n,!0):r!==EMPTY_OBJ&&hasOwn(r,t)?(r[t]=n,!0):!hasOwn(e.props,t)&&(("$"!==t[0]||!(t.slice(1)in e))&&(o[t]=n,!0))},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,propsOptions:o}},a){let s;return!!n[a]||e!==EMPTY_OBJ&&hasOwn(e,a)||hasSetupBinding(t,a)||(s=o[0])&&hasOwn(s,a)||hasOwn(r,a)||hasOwn(publicPropertiesMap,a)||hasOwn(i.config.globalProperties,a)},defineProperty(e,t,n){return null!=n.get?e._.accessCache[t]=0:hasOwn(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$2({},PublicInstanceProxyHandlers,{get(e,t){if(t!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(e,t,e)},has:(e,t)=>"_"!==t[0]&&!isGloballyWhitelisted(t)});let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),n=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook$1(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:p,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:x,render:w,renderTracked:_,renderTriggered:C,errorCaptured:$,serverPrefetch:S,expose:E,inheritAttrs:A,components:M,directives:k,filters:T}=t;if(c&&resolveInjections(c,r,null,e.appContext.config.unwrapInjectedRef),a)for(const O in a){const e=a[O];isFunction$3(e)&&(r[O]=e.bind(n))}if(i){const t=i.call(n,n);isObject$2(t)&&(e.data=reactive(t))}if(shouldCacheAccess=!0,o)for(const O in o){const e=o[O],t=isFunction$3(e)?e.bind(n,n):isFunction$3(e.get)?e.get.bind(n,n):NOOP,i=!isFunction$3(e)&&isFunction$3(e.set)?e.set.bind(n):NOOP,a=computed({get:t,set:i});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>a.value,set:e=>a.value=e})}if(s)for(const O in s)createWatcher(s[O],r,n,O);if(l){const e=isFunction$3(l)?l.call(n):l;Reflect.ownKeys(e).forEach((t=>{provide(t,e[t])}))}function P(e,t){isArray$4(t)?t.forEach((t=>e(t.bind(n)))):t&&e(t.bind(n))}if(u&&callHook$1(u,e,"c"),P(onBeforeMount,h),P(onMounted,d),P(onBeforeUpdate,f),P(onUpdated,p),P(onActivated,g),P(onDeactivated,m),P(onErrorCaptured,$),P(onRenderTracked,_),P(onRenderTriggered,C),P(onBeforeUnmount,y),P(onUnmounted,x),P(onServerPrefetch,S),isArray$4(E))if(E.length){const t=e.exposed||(e.exposed={});E.forEach((e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t})}))}else e.exposed||(e.exposed={});w&&e.render===NOOP&&(e.render=w),null!=A&&(e.inheritAttrs=A),M&&(e.components=M),k&&(e.directives=k)}function resolveInjections(e,t,n=NOOP,r=!1){isArray$4(e)&&(e=normalizeInject(e));for(const i in e){const n=e[i];let o;o=isObject$2(n)?"default"in n?inject(n.from||i,n.default,!0):inject(n.from||i):inject(n),isRef(o)&&r?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>o.value,set:e=>o.value=e}):t[i]=o}}function callHook$1(e,t,n){callWithAsyncErrorHandling(isArray$4(e)?e.map((e=>e.bind(t.proxy))):e.bind(t.proxy),t,n)}function createWatcher(e,t,n,r){const i=r.includes(".")?createPathGetter(n,r):()=>n[r];if(isString$2(e)){const n=t[e];isFunction$3(n)&&watch(i,n)}else if(isFunction$3(e))watch(i,e.bind(n));else if(isObject$2(e))if(isArray$4(e))e.forEach((e=>createWatcher(e,t,n,r)));else{const r=isFunction$3(e.handler)?e.handler.bind(n):t[e.handler];isFunction$3(r)&&watch(i,r,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:i.length||n||r?(l={},i.length&&i.forEach((e=>mergeOptions(l,e,a,!0))),mergeOptions(l,t,a)):l=t,isObject$2(t)&&o.set(t,l),l}function mergeOptions(e,t,n,r=!1){const{mixins:i,extends:o}=t;o&&mergeOptions(e,o,n,!0),i&&i.forEach((t=>mergeOptions(e,t,n,!0)));for(const a in t)if(r&&"expose"===a);else{const r=internalOptionMergeStrats[a]||n&&n[a];e[a]=r?r(e[a],t[a]):t[a]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend$2(isFunction$3(e)?e.call(this,this):e,isFunction$3(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray$4(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend$2(extend$2(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const n=extend$2(Object.create(null),e);for(const r in t)n[r]=mergeAsArray(e[r],t[r]);return n}function initProps(e,t,n,r=!1){const i={},o={};def(o,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);n?e.props=r?i:shallowReactive(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function updateProps(e,t,n,r){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=toRaw(i),[l]=e.propsOptions;let c=!1;if(!(r||a>0)||16&a){let r;setFullProps(e,t,i,o)&&(c=!0);for(const o in s)t&&(hasOwn(t,o)||(r=hyphenate(o))!==o&&hasOwn(t,r))||(l?!n||void 0===n[o]&&void 0===n[r]||(i[o]=resolvePropValue(l,s,o,void 0,e,!0)):delete i[o]);if(o!==s)for(const e in o)t&&hasOwn(t,e)||(delete o[e],c=!0)}else if(8&a){const n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let a=n[r];if(isEmitListener(e.emitsOptions,a))continue;const u=t[a];if(l)if(hasOwn(o,a))u!==o[a]&&(o[a]=u,c=!0);else{const t=camelize(a);i[t]=resolvePropValue(l,s,t,u,e,!1)}else u!==o[a]&&(o[a]=u,c=!0)}}c&&trigger(e,"set","$attrs")}function setFullProps(e,t,n,r){const[i,o]=e.propsOptions;let a,s=!1;if(t)for(let l in t){if(isReservedProp(l))continue;const c=t[l];let u;i&&hasOwn(i,u=camelize(l))?o&&o.includes(u)?(a||(a={}))[u]=c:n[u]=c:isEmitListener(e.emitsOptions,l)||l in r&&c===r[l]||(r[l]=c,s=!0)}if(o){const t=toRaw(n),r=a||EMPTY_OBJ;for(let a=0;a<o.length;a++){const s=o[a];n[s]=resolvePropValue(i,t,s,r[s],e,!hasOwn(r,s))}}return s}function resolvePropValue(e,t,n,r,i,o){const a=e[n];if(null!=a){const e=hasOwn(a,"default");if(e&&void 0===r){const e=a.default;if(a.type!==Function&&isFunction$3(e)){const{propsDefaults:o}=i;n in o?r=o[n]:(setCurrentInstance(i),r=o[n]=e.call(null,t),unsetCurrentInstance())}else r=e}a[0]&&(o&&!e?r=!1:!a[1]||""!==r&&r!==hyphenate(n)||(r=!0))}return r}function normalizePropsOptions(e,t,n=!1){const r=t.propsCache,i=r.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!isFunction$3(e)){const r=e=>{l=!0;const[n,r]=normalizePropsOptions(e,t,!0);extend$2(a,n),r&&s.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!o&&!l)return isObject$2(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray$4(o))for(let u=0;u<o.length;u++){const e=camelize(o[u]);validatePropName(e)&&(a[e]=EMPTY_OBJ)}else if(o)for(const u in o){const e=camelize(u);if(validatePropName(e)){const t=o[u],n=a[e]=isArray$4(t)||isFunction$3(t)?{type:t}:Object.assign({},t);if(n){const t=getTypeIndex(Boolean,n.type),r=getTypeIndex(String,n.type);n[0]=t>-1,n[1]=r<0||t<r,(t>-1||hasOwn(n,"default"))&&s.push(e)}}}const c=[a,s];return isObject$2(e)&&r.set(e,c),c}function validatePropName(e){return"$"!==e[0]}function getType$1(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:null===e?"null":""}function isSameType(e,t){return getType$1(e)===getType$1(t)}function getTypeIndex(e,t){return isArray$4(t)?t.findIndex((t=>isSameType(t,e))):isFunction$3(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>"_"===e[0]||"$stable"===e,normalizeSlotValue=e=>isArray$4(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,n)=>{if(t._n)return t;const r=withCtx(((...e)=>normalizeSlotValue(t(...e))),n);return r._c=!1,r},normalizeObjectSlots=(e,t,n)=>{const r=e._ctx;for(const i in e){if(isInternalKey(i))continue;const n=e[i];if(isFunction$3(n))t[i]=normalizeSlot(i,n,r);else if(null!=n){const e=normalizeSlotValue(n);t[i]=()=>e}}},normalizeVNodeSlots=(e,t)=>{const n=normalizeSlotValue(t);e.slots.default=()=>n},initSlots=(e,t)=>{if(32&e.vnode.shapeFlag){const n=t._;n?(e.slots=toRaw(t),def(t,"_",n)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,n)=>{const{vnode:r,slots:i}=e;let o=!0,a=EMPTY_OBJ;if(32&r.shapeFlag){const e=t._;e?n&&1===e?o=!1:(extend$2(i,t),n||1!==e||delete i._):(o=!t.$stable,normalizeObjectSlots(t,i)),a=t}else t&&(normalizeVNodeSlots(e,t),a={default:1});if(o)for(const s in i)isInternalKey(s)||s in a||delete i[s]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(e,t){return function(n,r=null){isFunction$3(n)||(n=Object.assign({},n)),null==r||isObject$2(r)||(r=null);const i=createAppContext(),o=new Set;let a=!1;const s=i.app={_uid:uid++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:version,get config(){return i.config},set config(e){},use:(e,...t)=>(o.has(e)||(e&&isFunction$3(e.install)?(o.add(e),e.install(s,...t)):isFunction$3(e)&&(o.add(e),e(s,...t))),s),mixin:e=>(i.mixins.includes(e)||i.mixins.push(e),s),component:(e,t)=>t?(i.components[e]=t,s):i.components[e],directive:(e,t)=>t?(i.directives[e]=t,s):i.directives[e],mount(o,l,c){if(!a){const u=createVNode(n,r);return u.appContext=i,l&&t?t(u,o):e(u,o,c),a=!0,s._container=o,o.__vue_app__=s,getExposeProxy(u.component)||u.component.proxy}},unmount(){a&&(e(null,s._container),delete s._container.__vue_app__)},provide:(e,t)=>(i.provides[e]=t,s)};return s}}function setRef(e,t,n,r,i=!1){if(isArray$4(e))return void e.forEach(((e,o)=>setRef(e,t&&(isArray$4(t)?t[o]:t),n,r,i)));if(isAsyncWrapper(r)&&!i)return;const o=4&r.shapeFlag?getExposeProxy(r.component)||r.component.proxy:r.el,a=i?null:o,{i:s,r:l}=e,c=t&&t.r,u=s.refs===EMPTY_OBJ?s.refs={}:s.refs,h=s.setupState;if(null!=c&&c!==l&&(isString$2(c)?(u[c]=null,hasOwn(h,c)&&(h[c]=null)):isRef(c)&&(c.value=null)),isFunction$3(l))callWithErrorHandling(l,s,12,[a,u]);else{const t=isString$2(l),r=isRef(l);if(t||r){const s=()=>{if(e.f){const n=t?hasOwn(h,l)?h[l]:u[l]:l.value;i?isArray$4(n)&&remove$2(n,o):isArray$4(n)?n.includes(o)||n.push(o):t?(u[l]=[o],hasOwn(h,l)&&(h[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else t?(u[l]=a,hasOwn(h,l)&&(h[l]=a)):r&&(l.value=a,e.k&&(u[e.k]=a))};a?(s.id=-1,queuePostRenderEffect(s,n)):s()}}}let hasMismatch=!1;const isSVGContainer=e=>/svg/.test(e.namespaceURI)&&"foreignObject"!==e.tagName,isComment=e=>8===e.nodeType;function createHydrationFunctions(e){const{mt:t,p:n,o:{patchProp:r,createText:i,nextSibling:o,parentNode:a,remove:s,insert:l,createComment:c}}=e,u=(n,r,s,c,m,v=!1)=>{const y=isComment(n)&&"["===n.data,b=()=>p(n,r,s,c,m,y),{type:x,ref:w,shapeFlag:_,patchFlag:C}=r;let $=n.nodeType;r.el=n,-2===C&&(v=!1,r.dynamicChildren=null);let S=null;switch(x){case Text$5:3!==$?""===r.children?(l(r.el=i(""),a(n),n),S=n):S=b():(n.data!==r.children&&(hasMismatch=!0,n.data=r.children),S=o(n));break;case Comment:S=8!==$||y?b():o(n);break;case Static:if(y&&($=(n=o(n)).nodeType),1===$||3===$){S=n;const e=!r.children.length;for(let t=0;t<r.staticCount;t++)e&&(r.children+=1===S.nodeType?S.outerHTML:S.data),t===r.staticCount-1&&(r.anchor=S),S=o(S);return y?o(S):S}b();break;case Fragment:S=y?f(n,r,s,c,m,v):b();break;default:if(1&_)S=1!==$||r.type.toLowerCase()!==n.tagName.toLowerCase()?b():h(n,r,s,c,m,v);else if(6&_){r.slotScopeIds=m;const e=a(n);if(t(r,e,null,s,c,isSVGContainer(e),v),S=y?g(n):o(n),S&&isComment(S)&&"teleport end"===S.data&&(S=o(S)),isAsyncWrapper(r)){let t;y?(t=createVNode(Fragment),t.anchor=S?S.previousSibling:e.lastChild):t=3===n.nodeType?createTextVNode(""):createVNode("div"),t.el=n,r.component.subTree=t}}else 64&_?S=8!==$?b():r.type.hydrate(n,r,s,c,m,v,e,d):128&_&&(S=r.type.hydrate(n,r,s,c,isSVGContainer(a(n)),m,v,e,u))}return null!=w&&setRef(w,null,c,r),S},h=(e,t,n,i,o,a)=>{a=a||!!t.dynamicChildren;const{type:l,props:c,patchFlag:u,shapeFlag:h,dirs:f}=t,p="input"===l&&f||"option"===l;if(p||-1!==u){if(f&&invokeDirectiveHook(t,null,n,"created"),c)if(p||!a||48&u)for(const t in c)(p&&t.endsWith("value")||isOn(t)&&!isReservedProp(t))&&r(e,t,null,c[t],!1,void 0,n);else c.onClick&&r(e,"onClick",null,c.onClick,!1,void 0,n);let l;if((l=c&&c.onVnodeBeforeMount)&&invokeVNodeHook(l,n,t),f&&invokeDirectiveHook(t,null,n,"beforeMount"),((l=c&&c.onVnodeMounted)||f)&&queueEffectWithSuspense((()=>{l&&invokeVNodeHook(l,n,t),f&&invokeDirectiveHook(t,null,n,"mounted")}),i),16&h&&(!c||!c.innerHTML&&!c.textContent)){let r=d(e.firstChild,t,e,n,i,o,a);for(;r;){hasMismatch=!0;const e=r;r=r.nextSibling,s(e)}}else 8&h&&e.textContent!==t.children&&(hasMismatch=!0,e.textContent=t.children)}return e.nextSibling},d=(e,t,r,i,o,a,s)=>{s=s||!!t.dynamicChildren;const l=t.children,c=l.length;for(let h=0;h<c;h++){const t=s?l[h]:l[h]=normalizeVNode(l[h]);if(e)e=u(e,t,i,o,a,s);else{if(t.type===Text$5&&!t.children)continue;hasMismatch=!0,n(null,t,r,null,i,o,isSVGContainer(r),a)}}return e},f=(e,t,n,r,i,s)=>{const{slotScopeIds:u}=t;u&&(i=i?i.concat(u):u);const h=a(e),f=d(o(e),t,h,n,r,i,s);return f&&isComment(f)&&"]"===f.data?o(t.anchor=f):(hasMismatch=!0,l(t.anchor=c("]"),h,f),f)},p=(e,t,r,i,l,c)=>{if(hasMismatch=!0,t.el=null,c){const t=g(e);for(;;){const n=o(e);if(!n||n===t)break;s(n)}}const u=o(e),h=a(e);return s(e),n(null,t,h,u,r,i,isSVGContainer(h),l),u},g=e=>{let t=0;for(;e;)if((e=o(e))&&isComment(e)&&("["===e.data&&t++,"]"===e.data)){if(0===t)return o(e);t--}return e};return[(e,t)=>{if(!t.hasChildNodes())return n(null,e,t),flushPostFlushCbs(),void(t._vnode=e);hasMismatch=!1,u(t.firstChild,e,null,null,null),flushPostFlushCbs(),t._vnode=e},u]}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function createHydrationRenderer(e){return baseCreateRenderer(e,createHydrationFunctions)}function baseCreateRenderer(e,t){getGlobalThis().__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:o,createText:a,createComment:s,setText:l,setElementText:c,parentNode:u,nextSibling:h,setScopeId:d=NOOP,insertStaticContent:f}=e,p=(e,t,n,r=null,i=null,o=null,a=!1,s=null,l=!!t.dynamicChildren)=>{if(e===t)return;e&&!isSameVNodeType(e,t)&&(r=F(e),D(e,i,o,!0),e=null),-2===t.patchFlag&&(l=!1,t.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=t;switch(c){case Text$5:g(e,t,n,r);break;case Comment:m(e,t,n,r);break;case Static:null==e&&v(t,n,r,a);break;case Fragment:S(e,t,n,r,i,o,a,s,l);break;default:1&h?y(e,t,n,r,i,o,a,s,l):6&h?E(e,t,n,r,i,o,a,s,l):(64&h||128&h)&&c.process(e,t,n,r,i,o,a,s,l,V)}null!=u&&i&&setRef(u,e&&e.ref,o,t||e,!t)},g=(e,t,r,i)=>{if(null==e)n(t.el=a(t.children),r,i);else{const n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},m=(e,t,r,i)=>{null==e?n(t.el=s(t.children||""),r,i):t.el=e.el},v=(e,t,n,r)=>{[e.el,e.anchor]=f(e.children,t,n,r,e.el,e.anchor)},y=(e,t,n,r,i,o,a,s,l)=>{a=a||"svg"===t.type,null==e?b(t,n,r,i,o,a,s,l):_(e,t,i,o,a,s,l)},b=(e,t,r,a,s,l,u,h)=>{let d,f;const{type:p,props:g,shapeFlag:m,transition:v,dirs:y}=e;if(d=e.el=o(e.type,l,g&&g.is,g),8&m?c(d,e.children):16&m&&w(e.children,d,null,a,s,l&&"foreignObject"!==p,u,h),y&&invokeDirectiveHook(e,null,a,"created"),g){for(const t in g)"value"===t||isReservedProp(t)||i(d,t,null,g[t],l,e.children,a,s,j);"value"in g&&i(d,"value",null,g.value),(f=g.onVnodeBeforeMount)&&invokeVNodeHook(f,a,e)}x(d,e,e.scopeId,u,a),y&&invokeDirectiveHook(e,null,a,"beforeMount");const b=(!s||s&&!s.pendingBranch)&&v&&!v.persisted;b&&v.beforeEnter(d),n(d,t,r),((f=g&&g.onVnodeMounted)||b||y)&&queuePostRenderEffect((()=>{f&&invokeVNodeHook(f,a,e),b&&v.enter(d),y&&invokeDirectiveHook(e,null,a,"mounted")}),s)},x=(e,t,n,r,i)=>{if(n&&d(e,n),r)for(let o=0;o<r.length;o++)d(e,r[o]);if(i){if(t===i.subTree){const t=i.vnode;x(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},w=(e,t,n,r,i,o,a,s,l=0)=>{for(let c=l;c<e.length;c++){const l=e[c]=s?cloneIfMounted(e[c]):normalizeVNode(e[c]);p(null,l,t,n,r,i,o,a,s)}},_=(e,t,n,r,o,a,s)=>{const l=t.el=e.el;let{patchFlag:u,dynamicChildren:h,dirs:d}=t;u|=16&e.patchFlag;const f=e.props||EMPTY_OBJ,p=t.props||EMPTY_OBJ;let g;n&&toggleRecurse(n,!1),(g=p.onVnodeBeforeUpdate)&&invokeVNodeHook(g,n,t,e),d&&invokeDirectiveHook(t,e,n,"beforeUpdate"),n&&toggleRecurse(n,!0);const m=o&&"foreignObject"!==t.type;if(h?C(e.dynamicChildren,h,l,n,r,m,a):s||P(e,t,l,null,n,r,m,a,!1),u>0){if(16&u)$(l,t,f,p,n,r,o);else if(2&u&&f.class!==p.class&&i(l,"class",null,p.class,o),4&u&&i(l,"style",f.style,p.style,o),8&u){const a=t.dynamicProps;for(let t=0;t<a.length;t++){const s=a[t],c=f[s],u=p[s];u===c&&"value"!==s||i(l,s,c,u,o,e.children,n,r,j)}}1&u&&e.children!==t.children&&c(l,t.children)}else s||null!=h||$(l,t,f,p,n,r,o);((g=p.onVnodeUpdated)||d)&&queuePostRenderEffect((()=>{g&&invokeVNodeHook(g,n,t,e),d&&invokeDirectiveHook(t,e,n,"updated")}),r)},C=(e,t,n,r,i,o,a)=>{for(let s=0;s<t.length;s++){const l=e[s],c=t[s],h=l.el&&(l.type===Fragment||!isSameVNodeType(l,c)||70&l.shapeFlag)?u(l.el):n;p(l,c,h,null,r,i,o,a,!0)}},$=(e,t,n,r,o,a,s)=>{if(n!==r){if(n!==EMPTY_OBJ)for(const l in n)isReservedProp(l)||l in r||i(e,l,n[l],null,s,t.children,o,a,j);for(const l in r){if(isReservedProp(l))continue;const c=r[l],u=n[l];c!==u&&"value"!==l&&i(e,l,u,c,s,t.children,o,a,j)}"value"in r&&i(e,"value",n.value,r.value)}},S=(e,t,r,i,o,s,l,c,u)=>{const h=t.el=e?e.el:a(""),d=t.anchor=e?e.anchor:a("");let{patchFlag:f,dynamicChildren:p,slotScopeIds:g}=t;g&&(c=c?c.concat(g):g),null==e?(n(h,r,i),n(d,r,i),w(t.children,r,d,o,s,l,c,u)):f>0&&64&f&&p&&e.dynamicChildren?(C(e.dynamicChildren,p,r,o,s,l,c),(null!=t.key||o&&t===o.subTree)&&traverseStaticChildren(e,t,!0)):P(e,t,r,d,o,s,l,c,u)},E=(e,t,n,r,i,o,a,s,l)=>{t.slotScopeIds=s,null==e?512&t.shapeFlag?i.ctx.activate(t,n,r,a,l):A(t,n,r,i,o,a,l):M(e,t,l)},A=(e,t,n,r,i,o,a)=>{const s=e.component=createComponentInstance(e,r,i);if(isKeepAlive(e)&&(s.ctx.renderer=V),setupComponent(s),s.asyncDep){if(i&&i.registerDep(s,k),!e.el){const e=s.subTree=createVNode(Comment);m(null,e,t,n)}}else k(s,e,t,n,i,o,a)},M=(e,t,n)=>{const r=t.component=e.component;if(shouldUpdateComponent(e,t,n)){if(r.asyncDep&&!r.asyncResolved)return void T(r,t,n);r.next=t,invalidateJob(r.update),r.update()}else t.el=e.el,r.vnode=t},k=(e,t,n,r,i,o,a)=>{const s=e.effect=new ReactiveEffect((()=>{if(e.isMounted){let t,{next:n,bu:r,u:s,parent:l,vnode:c}=e,h=n;toggleRecurse(e,!1),n?(n.el=c.el,T(e,n,a)):n=c,r&&invokeArrayFns(r),(t=n.props&&n.props.onVnodeBeforeUpdate)&&invokeVNodeHook(t,l,n,c),toggleRecurse(e,!0);const d=renderComponentRoot(e),f=e.subTree;e.subTree=d,p(f,d,u(f.el),F(f),e,i,o),n.el=d.el,null===h&&updateHOCHostEl(e,d.el),s&&queuePostRenderEffect(s,i),(t=n.props&&n.props.onVnodeUpdated)&&queuePostRenderEffect((()=>invokeVNodeHook(t,l,n,c)),i)}else{let a;const{el:s,props:l}=t,{bm:c,m:u,parent:h}=e,d=isAsyncWrapper(t);if(toggleRecurse(e,!1),c&&invokeArrayFns(c),!d&&(a=l&&l.onVnodeBeforeMount)&&invokeVNodeHook(a,h,t),toggleRecurse(e,!0),s&&H){const n=()=>{e.subTree=renderComponentRoot(e),H(s,e.subTree,e,i,null)};d?t.type.__asyncLoader().then((()=>!e.isUnmounted&&n())):n()}else{const a=e.subTree=renderComponentRoot(e);p(null,a,n,r,e,i,o),t.el=a.el}if(u&&queuePostRenderEffect(u,i),!d&&(a=l&&l.onVnodeMounted)){const e=t;queuePostRenderEffect((()=>invokeVNodeHook(a,h,e)),i)}(256&t.shapeFlag||h&&isAsyncWrapper(h.vnode)&&256&h.vnode.shapeFlag)&&e.a&&queuePostRenderEffect(e.a,i),e.isMounted=!0,t=n=r=null}}),(()=>queueJob(l)),e.scope),l=e.update=()=>s.run();l.id=e.uid,toggleRecurse(e,!0),l()},T=(e,t,n)=>{t.component=e;const r=e.vnode.props;e.vnode=t,e.next=null,updateProps(e,t.props,r,n),updateSlots(e,t.children,n),pauseTracking(),flushPreFlushCbs(),resetTracking()},P=(e,t,n,r,i,o,a,s,l=!1)=>{const u=e&&e.children,h=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:p}=t;if(f>0){if(128&f)return void N(u,d,n,r,i,o,a,s,l);if(256&f)return void O(u,d,n,r,i,o,a,s,l)}8&p?(16&h&&j(u,i,o),d!==u&&c(n,d)):16&h?16&p?N(u,d,n,r,i,o,a,s,l):j(u,i,o,!0):(8&h&&c(n,""),16&p&&w(d,n,r,i,o,a,s,l))},O=(e,t,n,r,i,o,a,s,l)=>{t=t||EMPTY_ARR;const c=(e=e||EMPTY_ARR).length,u=t.length,h=Math.min(c,u);let d;for(d=0;d<h;d++){const r=t[d]=l?cloneIfMounted(t[d]):normalizeVNode(t[d]);p(e[d],r,n,null,i,o,a,s,l)}c>u?j(e,i,o,!0,!1,h):w(t,n,r,i,o,a,s,l,h)},N=(e,t,n,r,i,o,a,s,l)=>{let c=0;const u=t.length;let h=e.length-1,d=u-1;for(;c<=h&&c<=d;){const r=e[c],u=t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]);if(!isSameVNodeType(r,u))break;p(r,u,n,null,i,o,a,s,l),c++}for(;c<=h&&c<=d;){const r=e[h],c=t[d]=l?cloneIfMounted(t[d]):normalizeVNode(t[d]);if(!isSameVNodeType(r,c))break;p(r,c,n,null,i,o,a,s,l),h--,d--}if(c>h){if(c<=d){const e=d+1,h=e<u?t[e].el:r;for(;c<=d;)p(null,t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]),n,h,i,o,a,s,l),c++}}else if(c>d)for(;c<=h;)D(e[c],i,o,!0),c++;else{const f=c,g=c,m=new Map;for(c=g;c<=d;c++){const e=t[c]=l?cloneIfMounted(t[c]):normalizeVNode(t[c]);null!=e.key&&m.set(e.key,c)}let v,y=0;const b=d-g+1;let x=!1,w=0;const _=new Array(b);for(c=0;c<b;c++)_[c]=0;for(c=f;c<=h;c++){const r=e[c];if(y>=b){D(r,i,o,!0);continue}let u;if(null!=r.key)u=m.get(r.key);else for(v=g;v<=d;v++)if(0===_[v-g]&&isSameVNodeType(r,t[v])){u=v;break}void 0===u?D(r,i,o,!0):(_[u-g]=c+1,u>=w?w=u:x=!0,p(r,t[u],n,null,i,o,a,s,l),y++)}const C=x?getSequence(_):EMPTY_ARR;for(v=C.length-1,c=b-1;c>=0;c--){const e=g+c,h=t[e],d=e+1<u?t[e+1].el:r;0===_[c]?p(null,h,n,d,i,o,a,s,l):x&&(v<0||c!==C[v]?I(h,n,d,2):v--)}}},I=(e,t,r,i,o=null)=>{const{el:a,type:s,transition:l,children:c,shapeFlag:u}=e;if(6&u)return void I(e.component.subTree,t,r,i);if(128&u)return void e.suspense.move(t,r,i);if(64&u)return void s.move(e,t,r,V);if(s===Fragment){n(a,t,r);for(let e=0;e<c.length;e++)I(c[e],t,r,i);return void n(e.anchor,t,r)}if(s===Static)return void(({el:e,anchor:t},r,i)=>{let o;for(;e&&e!==t;)o=h(e),n(e,r,i),e=o;n(t,r,i)})(e,t,r);if(2!==i&&1&u&&l)if(0===i)l.beforeEnter(a),n(a,t,r),queuePostRenderEffect((()=>l.enter(a)),o);else{const{leave:e,delayLeave:i,afterLeave:o}=l,s=()=>n(a,t,r),c=()=>{e(a,(()=>{s(),o&&o()}))};i?i(a,s,c):c()}else n(a,t,r)},D=(e,t,n,r=!1,i=!1)=>{const{type:o,props:a,ref:s,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:d}=e;if(null!=s&&setRef(s,null,n,e,!0),256&u)return void t.ctx.deactivate(e);const f=1&u&&d,p=!isAsyncWrapper(e);let g;if(p&&(g=a&&a.onVnodeBeforeUnmount)&&invokeVNodeHook(g,t,e),6&u)B(e.component,n,r);else{if(128&u)return void e.suspense.unmount(n,r);f&&invokeDirectiveHook(e,null,t,"beforeUnmount"),64&u?e.type.remove(e,t,n,i,V,r):c&&(o!==Fragment||h>0&&64&h)?j(c,t,n,!1,!0):(o===Fragment&&384&h||!i&&16&u)&&j(l,t,n),r&&L(e)}(p&&(g=a&&a.onVnodeUnmounted)||f)&&queuePostRenderEffect((()=>{g&&invokeVNodeHook(g,t,e),f&&invokeDirectiveHook(e,null,t,"unmounted")}),n)},L=e=>{const{type:t,el:n,anchor:i,transition:o}=e;if(t===Fragment)return void R(n,i);if(t===Static)return void(({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),r(e),e=n;r(t)})(e);const a=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&e.shapeFlag&&o&&!o.persisted){const{leave:t,delayLeave:r}=o,i=()=>t(n,a);r?r(e.el,a,i):i()}else a()},R=(e,t)=>{let n;for(;e!==t;)n=h(e),r(e),e=n;r(t)},B=(e,t,n)=>{const{bum:r,scope:i,update:o,subTree:a,um:s}=e;r&&invokeArrayFns(r),i.stop(),o&&(o.active=!1,D(a,e,t,n)),s&&queuePostRenderEffect(s,t),queuePostRenderEffect((()=>{e.isUnmounted=!0}),t),t&&t.pendingBranch&&!t.isUnmounted&&e.asyncDep&&!e.asyncResolved&&e.suspenseId===t.pendingId&&(t.deps--,0===t.deps&&t.resolve())},j=(e,t,n,r=!1,i=!1,o=0)=>{for(let a=o;a<e.length;a++)D(e[a],t,n,r,i)},F=e=>6&e.shapeFlag?F(e.component.subTree):128&e.shapeFlag?e.suspense.next():h(e.anchor||e.el),G=(e,t,n)=>{null==e?t._vnode&&D(t._vnode,null,null,!0):p(t._vnode||null,e,t,null,null,null,n),flushPreFlushCbs(),flushPostFlushCbs(),t._vnode=e},V={p:p,um:D,m:I,r:L,mt:A,mc:w,pc:P,pbc:C,n:F,o:e};let z,H;return t&&([z,H]=t(V)),{render:G,hydrate:z,createApp:createAppAPI(G,z)}}function toggleRecurse({effect:e,update:t},n){e.allowRecurse=t.allowRecurse=n}function traverseStaticChildren(e,t,n=!1){const r=e.children,i=t.children;if(isArray$4(r)&&isArray$4(i))for(let o=0;o<r.length;o++){const e=r[o];let t=i[o];1&t.shapeFlag&&!t.dynamicChildren&&((t.patchFlag<=0||32===t.patchFlag)&&(t=i[o]=cloneIfMounted(i[o]),t.el=e.el),n||traverseStaticChildren(e,t)),t.type===Text$5&&(t.el=e.el)}}function getSequence(e){const t=e.slice(),n=[0];let r,i,o,a,s;const l=e.length;for(r=0;r<l;r++){const l=e[r];if(0!==l){if(i=n[n.length-1],e[i]<l){t[r]=i,n.push(r);continue}for(o=0,a=n.length-1;o<a;)s=o+a>>1,e[n[s]]<l?o=s+1:a=s;l<e[n[o]]&&(o>0&&(t[r]=n[o-1]),n[o]=r)}}for(o=n.length,a=n[o-1];o-- >0;)n[o]=a,a=t[a];return n}const isTeleport=e=>e.__isTeleport,isTeleportDisabled=e=>e&&(e.disabled||""===e.disabled),isTargetSVG=e=>"undefined"!=typeof SVGElement&&e instanceof SVGElement,resolveTarget=(e,t)=>{const n=e&&e.to;if(isString$2(n)){if(t){return t(n)}return null}return n},TeleportImpl={__isTeleport:!0,process(e,t,n,r,i,o,a,s,l,c){const{mc:u,pc:h,pbc:d,o:{insert:f,querySelector:p,createText:g,createComment:m}}=c,v=isTeleportDisabled(t.props);let{shapeFlag:y,children:b,dynamicChildren:x}=t;if(null==e){const e=t.el=g(""),c=t.anchor=g("");f(e,n,r),f(c,n,r);const h=t.target=resolveTarget(t.props,p),d=t.targetAnchor=g("");h&&(f(d,h),a=a||isTargetSVG(h));const m=(e,t)=>{16&y&&u(b,e,t,i,o,a,s,l)};v?m(n,c):h&&m(h,d)}else{t.el=e.el;const r=t.anchor=e.anchor,u=t.target=e.target,f=t.targetAnchor=e.targetAnchor,g=isTeleportDisabled(e.props),m=g?n:u,y=g?r:f;if(a=a||isTargetSVG(u),x?(d(e.dynamicChildren,x,m,i,o,a,s),traverseStaticChildren(e,t,!0)):l||h(e,t,m,y,i,o,a,s,!1),v)g||moveTeleport(t,n,r,c,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const e=t.target=resolveTarget(t.props,p);e&&moveTeleport(t,e,null,c,0)}else g&&moveTeleport(t,u,f,c,1)}updateCssVars(t)},remove(e,t,n,r,{um:i,o:{remove:o}},a){const{shapeFlag:s,children:l,anchor:c,targetAnchor:u,target:h,props:d}=e;if(h&&o(u),(a||!isTeleportDisabled(d))&&(o(c),16&s))for(let f=0;f<l.length;f++){const e=l[f];i(e,t,n,!0,!!e.dynamicChildren)}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(e,t,n,{o:{insert:r},m:i},o=2){0===o&&r(e.targetAnchor,t,n);const{el:a,anchor:s,shapeFlag:l,children:c,props:u}=e,h=2===o;if(h&&r(a,t,n),(!h||isTeleportDisabled(u))&&16&l)for(let d=0;d<c.length;d++)i(c[d],t,n,2);h&&r(s,t,n)}function hydrateTeleport(e,t,n,r,i,o,{o:{nextSibling:a,parentNode:s,querySelector:l}},c){const u=t.target=resolveTarget(t.props,l);if(u){const l=u._lpa||u.firstChild;if(16&t.shapeFlag)if(isTeleportDisabled(t.props))t.anchor=c(a(e),t,s(e),n,r,i,o),t.targetAnchor=l;else{t.anchor=a(e);let s=l;for(;s;)if(s=a(s),s&&8===s.nodeType&&"teleport anchor"===s.data){t.targetAnchor=s,u._lpa=t.targetAnchor&&a(t.targetAnchor);break}c(l,t,u,n,r,i,o)}updateCssVars(t)}return t.anchor&&a(t.anchor)}const Teleport=TeleportImpl;function updateCssVars(e){const t=e.ctx;if(t&&t.ut){let n=e.children[0].el;for(;n!==e.targetAnchor;)1===n.nodeType&&n.setAttribute("data-v-owner",t.uid),n=n.nextSibling;t.ut()}}const Fragment=Symbol(void 0),Text$5=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,n,r,i,o){return setupBlock(createBaseVNode(e,t,n,r,i,o,!0))}function createBlock(e,t,n,r,i){return setupBlock(createVNode(e,t,n,r,i,!0))}function isVNode(e){return!!e&&!0===e.__v_isVNode}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}function transformVNodeArgs(e){}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>null!=e?e:null,normalizeRef=({ref:e,ref_key:t,ref_for:n})=>null!=e?isString$2(e)||isRef(e)||isFunction$3(e)?{i:currentRenderingInstance,r:e,k:t,f:!!n}:e:null;function createBaseVNode(e,t=null,n=null,r=0,i=null,o=(e===Fragment?0:1),a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(l,n),128&o&&e.normalize(l)):n&&(l.shapeFlag|=isString$2(n)?8:16),isBlockTreeEnabled>0&&!a&&currentBlock&&(l.patchFlag>0||6&o)&&32!==l.patchFlag&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,n=null,r=0,i=null,o=!1){if(e&&e!==NULL_DYNAMIC_COMPONENT||(e=Comment),isVNode(e)){const r=cloneVNode(e,t,!0);return n&&normalizeChildren(r,n),isBlockTreeEnabled>0&&!o&&currentBlock&&(6&r.shapeFlag?currentBlock[currentBlock.indexOf(e)]=r:currentBlock.push(r)),r.patchFlag|=-2,r}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:e,style:n}=t;e&&!isString$2(e)&&(t.class=normalizeClass(e)),isObject$2(n)&&(isProxy(n)&&!isArray$4(n)&&(n=extend$2({},n)),t.style=normalizeStyle(n))}return createBaseVNode(e,t,n,r,i,isString$2(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject$2(e)?4:isFunction$3(e)?2:0,o,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend$2({},e):e:null}function cloneVNode(e,t,n=!1){const{props:r,ref:i,patchFlag:o,children:a}=e,s=t?mergeProps(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&normalizeKey(s),ref:t&&t.ref?n&&i?isArray$4(i)?i.concat(normalizeRef(t)):[i,normalizeRef(t)]:normalizeRef(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?-1===o?16:16|o:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx}}function createTextVNode(e=" ",t=0){return createVNode(Text$5,null,e,t)}function createStaticVNode(e,t){const n=createVNode(Static,null,e);return n.staticCount=t,n}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return null==e||"boolean"==typeof e?createVNode(Comment):isArray$4(e)?createVNode(Fragment,null,e.slice()):"object"==typeof e?cloneIfMounted(e):createVNode(Text$5,null,String(e))}function cloneIfMounted(e){return null===e.el&&-1!==e.patchFlag||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let n=0;const{shapeFlag:r}=e;if(null==t)t=null;else if(isArray$4(t))n=16;else if("object"==typeof t){if(65&r){const n=t.default;return void(n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0)))}{n=32;const r=t._;r||InternalObjectKey in t?3===r&&currentRenderingInstance&&(1===currentRenderingInstance.slots._?t._=1:(t._=2,e.patchFlag|=1024)):t._ctx=currentRenderingInstance}}else isFunction$3(t)?(t={default:t,_ctx:currentRenderingInstance},n=32):(t=String(t),64&r?(n=16,t=[createTextVNode(t)]):n=8);e.children=t,e.shapeFlag|=n}function mergeProps(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const e in r)if("class"===e)t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if("style"===e)t.style=normalizeStyle([t.style,r.style]);else if(isOn(e)){const n=t[e],i=r[e];!i||n===i||isArray$4(n)&&n.includes(i)||(t[e]=n?[].concat(n,i):i)}else""!==e&&(t[e]=r[e])}return t}function invokeVNodeHook(e,t,n,r=null){callWithAsyncErrorHandling(e,t,7,[n,r])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(e,t,n){const r=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,o={uid:uid$1++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,i),emitsOptions:normalizeEmitsOptions(r,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=emit$1.bind(null,o),e.ce&&e.ce(o),o}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return 4&e.vnode.shapeFlag}let isInSSRComponentSetup=!1,compile$1,installWithProxy;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:n,children:r}=e.vnode,i=isStatefulComponent(e);initProps(e,n,i,t),initSlots(e,r);const o=i?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,o}function setupStatefulComponent(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:r}=n;if(r){const n=e.setupContext=r.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const i=callWithErrorHandling(r,e,0,[e.props,n]);if(resetTracking(),unsetCurrentInstance(),isPromise(i)){if(i.then(unsetCurrentInstance,unsetCurrentInstance),t)return i.then((n=>{handleSetupResult(e,n,t)})).catch((t=>{handleError(t,e,0)}));e.asyncDep=i}else handleSetupResult(e,i,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,n){isFunction$3(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject$2(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,n)}function registerRuntimeCompiler(e){compile$1=e,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(e,t,n){const r=e.type;if(!e.render){if(!t&&compile$1&&!r.render){const t=r.template||resolveMergedOptions(e).template;if(t){const{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:o,compilerOptions:a}=r,s=extend$2(extend$2({isCustomElement:n,delimiters:o},i),a);r.render=compile$1(t,s)}}e.render=r.render||NOOP,installWithProxy&&installWithProxy(e)}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get:(t,n)=>(track(e,"get","$attrs"),t[n])})}function createSetupContext(e){const t=t=>{e.exposed=t||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get:(t,n)=>n in t?t[n]:n in publicPropertiesMap?publicPropertiesMap[n](e):void 0,has:(e,t)=>t in e||t in publicPropertiesMap}))}function getComponentName(e,t=!0){return isFunction$3(e)?e.displayName||e.name:e.name||t&&e.__name}function isClassComponent(e){return isFunction$3(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup);function defineProps(){return null}function defineEmits(){return null}function defineExpose(e){}function withDefaults(e,t){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const e=getCurrentInstance();return e.setupContext||(e.setupContext=createSetupContext(e))}function mergeDefaults(e,t){const n=isArray$4(e)?e.reduce(((e,t)=>(e[t]={},e)),{}):e;for(const r in t){const e=n[r];e?isArray$4(e)||isFunction$3(e)?n[r]={type:e,default:t[r]}:e.default=t[r]:null===e&&(n[r]={default:t[r]})}return n}function createPropsRestProxy(e,t){const n={};for(const r in e)t.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>e[r]});return n}function withAsyncContext(e){const t=getCurrentInstance();let n=e();return unsetCurrentInstance(),isPromise(n)&&(n=n.catch((e=>{throw setCurrentInstance(t),e}))),[n,()=>setCurrentInstance(t)]}function h$1(e,t,n){const r=arguments.length;return 2===r?isObject$2(t)&&!isArray$4(t)?isVNode(t)?createVNode(e,null,[t]):createVNode(e,t):createVNode(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&isVNode(n)&&(n=[n]),createVNode(e,t,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey);function initCustomFormatter(){}function withMemo(e,t,n,r){const i=n[r];if(i&&isMemoSame(i,e))return i;const o=t();return o.memo=e.slice(),n[r]=o}function isMemoSame(e,t){const n=e.memo;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(hasChanged(n[r],t[r]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),!0}const version="3.2.45",_ssrUtils={createComponentInstance:createComponentInstance,setupComponent:setupComponent,renderComponentRoot:renderComponentRoot,setCurrentRenderingInstance:setCurrentRenderingInstance,isVNode:isVNode,normalizeVNode:normalizeVNode},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,svgNS="http://www.w3.org/2000/svg",doc="undefined"!=typeof document?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const i=t?doc.createElementNS(svgNS,e):doc.createElement(e,n?{is:n}:void 0);return"select"===e&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,i,o){const a=n?n.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),i!==o&&(i=i.nextSibling););else{templateContainer.innerHTML=r?`<svg>${e}</svg>`:e;const i=templateContainer.content;if(r){const e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}};function patchClass(e,t,n){const r=e._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),null==t?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,n){const r=e.style,i=isString$2(n);if(n&&!i){for(const e in n)setStyle(r,e,n[e]);if(t&&!isString$2(t))for(const e in t)null==n[e]&&setStyle(r,e,"")}else{const o=r.display;i?t!==n&&(r.cssText=n):t&&e.removeAttribute("style"),"_vod"in e&&(r.display=o)}}const importantRE=/\s*!important$/;function setStyle(e,t,n){if(isArray$4(n))n.forEach((n=>setStyle(e,t,n)));else if(null==n&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=autoPrefix(e,t);importantRE.test(n)?e.setProperty(hyphenate(r),n.replace(importantRE,""),"important"):e[r]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const n=prefixCache[t];if(n)return n;let r=camelize(t);if("filter"!==r&&r in e)return prefixCache[t]=r;r=capitalize$1(r);for(let i=0;i<prefixes.length;i++){const n=prefixes[i]+r;if(n in e)return prefixCache[t]=n}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,n,r,i){if(r&&t.startsWith("xlink:"))null==n?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,n);else{const r=isSpecialBooleanAttr(t);null==n||r&&!includeBooleanAttr(n)?e.removeAttribute(t):e.setAttribute(t,r?"":n)}}function patchDOMProp(e,t,n,r,i,o,a){if("innerHTML"===t||"textContent"===t)return r&&a(r,i,o),void(e[t]=null==n?"":n);if("value"===t&&"PROGRESS"!==e.tagName&&!e.tagName.includes("-")){e._value=n;const r=null==n?"":n;return e.value===r&&"OPTION"!==e.tagName||(e.value=r),void(null==n&&e.removeAttribute(t))}let s=!1;if(""===n||null==n){const r=typeof e[t];"boolean"===r?n=includeBooleanAttr(n):null==n&&"string"===r?(n="",s=!0):"number"===r&&(n=0,s=!0)}try{e[t]=n}catch(e11){}s&&e.removeAttribute(t)}function addEventListener$1(e,t,n,r){e.addEventListener(t,n,r)}function removeEventListener(e,t,n,r){e.removeEventListener(t,n,r)}function patchEvent(e,t,n,r,i=null){const o=e._vei||(e._vei={}),a=o[t];if(r&&a)a.value=r;else{const[n,s]=parseName(t);if(r){addEventListener$1(e,n,o[t]=createInvoker(r,i),s)}else a&&(removeEventListener(e,n,a,s),o[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){let n;for(t={};n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[":"===e[2]?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then((()=>cachedNow=0)),cachedNow=Date.now());function createInvoker(e,t){const n=e=>{if(e._vts){if(e._vts<=n.attached)return}else e._vts=Date.now();callWithAsyncErrorHandling(patchStopImmediatePropagation(e,n.value),t,5,[e])};return n.value=e,n.attached=getNow(),n}function patchStopImmediatePropagation(e,t){if(isArray$4(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map((e=>t=>!t._stopped&&e&&e(t)))}return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,n,r,i=!1,o,a,s,l)=>{"class"===t?patchClass(e,r,i):"style"===t?patchStyle(e,n,r):isOn(t)?isModelListener(t)||patchEvent(e,t,n,r,a):("."===t[0]?(t=t.slice(1),1):"^"===t[0]?(t=t.slice(1),0):shouldSetAsProp(e,t,r,i))?patchDOMProp(e,t,r,o,a,s,l):("true-value"===t?e._trueValue=r:"false-value"===t&&(e._falseValue=r),patchAttr(e,t,r,i))};function shouldSetAsProp(e,t,n,r){return r?"innerHTML"===t||"textContent"===t||!!(t in e&&nativeOnRE.test(t)&&isFunction$3(n)):"spellcheck"!==t&&"draggable"!==t&&"translate"!==t&&("form"!==t&&(("list"!==t||"INPUT"!==e.tagName)&&(("type"!==t||"TEXTAREA"!==e.tagName)&&((!nativeOnRE.test(t)||!isString$2(n))&&t in e))))}function defineCustomElement(e,t){const n=defineComponent(e);class r extends VueElement{constructor(e){super(n,e,t)}}return r.def=n,r}const defineSSRCustomElement=e=>defineCustomElement(e,hydrate),BaseClass="undefined"!=typeof HTMLElement?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},n){super(),this._def=e,this._props=t,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&n?n(this._createVNode(),this.shadowRoot):(this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick((()=>{this._connected||(render(null,this.shadowRoot),this._instance=null)}))}_resolveDef(){this._resolved=!0;for(let n=0;n<this.attributes.length;n++)this._setAttr(this.attributes[n].name);new MutationObserver((e=>{for(const t of e)this._setAttr(t.attributeName)})).observe(this,{attributes:!0});const e=(e,t=!1)=>{const{props:n,styles:r}=e;let i;if(n&&!isArray$4(n))for(const o in n){const e=n[o];(e===Number||e&&e.type===Number)&&(o in this._props&&(this._props[o]=toNumber$1(this._props[o])),(i||(i=Object.create(null)))[camelize(o)]=!0)}this._numberProps=i,t&&this._resolveProps(e),this._applyStyles(r),this._update()},t=this._def.__asyncLoader;t?t().then((t=>e(t,!0))):e(this._def)}_resolveProps(e){const{props:t}=e,n=isArray$4(t)?t:Object.keys(t||{});for(const r of Object.keys(this))"_"!==r[0]&&n.includes(r)&&this._setProp(r,this[r],!0,!1);for(const r of n.map(camelize))Object.defineProperty(this,r,{get(){return this._getProp(r)},set(e){this._setProp(r,e)}})}_setAttr(e){let t=this.getAttribute(e);const n=camelize(e);this._numberProps&&this._numberProps[n]&&(t=toNumber$1(t)),this._setProp(n,t,!1)}_getProp(e){return this._props[e]}_setProp(e,t,n=!0,r=!0){t!==this._props[e]&&(this._props[e]=t,r&&this._instance&&this._update(),n&&(!0===t?this.setAttribute(hyphenate(e),""):"string"==typeof t||"number"==typeof t?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e))))}_update(){render(this._createVNode(),this.shadowRoot)}_createVNode(){const e=createVNode(this._def,extend$2({},this._props));return this._instance||(e.ce=e=>{this._instance=e,e.isCE=!0;const t=(e,t)=>{this.dispatchEvent(new CustomEvent(e,{detail:t}))};e.emit=(e,...n)=>{t(e,n),hyphenate(e)!==e&&t(hyphenate(e),n)};let n=this;for(;n=n&&(n.parentNode||n.host);)if(n instanceof VueElement){e.parent=n._instance,e.provides=n._instance.provides;break}}),e}_applyStyles(e){e&&e.forEach((e=>{const t=document.createElement("style");t.textContent=e,this.shadowRoot.appendChild(t)}))}}function useCssModule(e="$style"){{const t=getCurrentInstance();if(!t)return EMPTY_OBJ;const n=t.type.__cssModules;if(!n)return EMPTY_OBJ;const r=n[e];return r||EMPTY_OBJ}}function useCssVars(e){const t=getCurrentInstance();if(!t)return;const n=t.ut=(n=e(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach((e=>setVarsOnNode(e,n)))},r=()=>{const r=e(t.proxy);setVarsOnVNode(t.subTree,r),n(r)};watchPostEffect(r),onMounted((()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),onUnmounted((()=>e.disconnect()))}))}function setVarsOnVNode(e,t){if(128&e.shapeFlag){const n=e.suspense;e=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push((()=>{setVarsOnVNode(n.activeBranch,t)}))}for(;e.component;)e=e.component.subTree;if(1&e.shapeFlag&&e.el)setVarsOnNode(e.el,t);else if(e.type===Fragment)e.children.forEach((e=>setVarsOnVNode(e,t)));else if(e.type===Static){let{el:n,anchor:r}=e;for(;n&&(setVarsOnNode(n,t),n!==r);)n=n.nextSibling}}function setVarsOnNode(e,t){if(1===e.nodeType){const n=e.style;for(const e in t)n.setProperty(`--${e}`,t[e])}}const TRANSITION="transition",ANIMATION="animation",Transition=(e,{slots:t})=>h$1(BaseTransition,resolveTransitionProps(e),t);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$2({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(e,t=[])=>{isArray$4(e)?e.forEach((e=>e(...t))):e&&e(...t)},hasExplicitCallback=e=>!!e&&(isArray$4(e)?e.some((e=>e.length>1)):e.length>1);function resolveTransitionProps(e){const t={};for(const M in e)M in DOMTransitionPropsValidators||(t[M]=e[M]);if(!1===e.css)return t;const{name:n="v",type:r,duration:i,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:s=`${n}-enter-to`,appearFromClass:l=o,appearActiveClass:c=a,appearToClass:u=s,leaveFromClass:h=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=e,p=normalizeDuration(i),g=p&&p[0],m=p&&p[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:x,onLeaveCancelled:w,onBeforeAppear:_=v,onAppear:C=y,onAppearCancelled:$=b}=t,S=(e,t,n)=>{removeTransitionClass(e,t?u:s),removeTransitionClass(e,t?c:a),n&&n()},E=(e,t)=>{e._isLeaving=!1,removeTransitionClass(e,h),removeTransitionClass(e,f),removeTransitionClass(e,d),t&&t()},A=e=>(t,n)=>{const i=e?C:y,a=()=>S(t,e,n);callHook(i,[t,a]),nextFrame((()=>{removeTransitionClass(t,e?l:o),addTransitionClass(t,e?u:s),hasExplicitCallback(i)||whenTransitionEnds(t,r,g,a)}))};return extend$2(t,{onBeforeEnter(e){callHook(v,[e]),addTransitionClass(e,o),addTransitionClass(e,a)},onBeforeAppear(e){callHook(_,[e]),addTransitionClass(e,l),addTransitionClass(e,c)},onEnter:A(!1),onAppear:A(!0),onLeave(e,t){e._isLeaving=!0;const n=()=>E(e,t);addTransitionClass(e,h),forceReflow(),addTransitionClass(e,d),nextFrame((()=>{e._isLeaving&&(removeTransitionClass(e,h),addTransitionClass(e,f),hasExplicitCallback(x)||whenTransitionEnds(e,r,m,n))})),callHook(x,[e,n])},onEnterCancelled(e){S(e,!1),callHook(b,[e])},onAppearCancelled(e){S(e,!0),callHook($,[e])},onLeaveCancelled(e){E(e),callHook(w,[e])}})}function normalizeDuration(e){if(null==e)return null;if(isObject$2(e))return[NumberOf(e.enter),NumberOf(e.leave)];{const t=NumberOf(e);return[t,t]}}function NumberOf(e){return toNumber$1(e)}function addTransitionClass(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.add(t))),(e._vtc||(e._vtc=new Set)).add(t)}function removeTransitionClass(e,t){t.split(/\s+/).forEach((t=>t&&e.classList.remove(t)));const{_vtc:n}=e;n&&(n.delete(t),n.size||(e._vtc=void 0))}function nextFrame(e){requestAnimationFrame((()=>{requestAnimationFrame(e)}))}let endId=0;function whenTransitionEnds(e,t,n,r){const i=e._endId=++endId,o=()=>{i===e._endId&&r()};if(n)return setTimeout(o,n);const{type:a,timeout:s,propCount:l}=getTransitionInfo(e,t);if(!a)return r();const c=a+"end";let u=0;const h=()=>{e.removeEventListener(c,d),o()},d=t=>{t.target===e&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),s+1),e.addEventListener(c,d)}function getTransitionInfo(e,t){const n=window.getComputedStyle(e),r=e=>(n[e]||"").split(", "),i=r(`${TRANSITION}Delay`),o=r(`${TRANSITION}Duration`),a=getTimeout(i,o),s=r(`${ANIMATION}Delay`),l=r(`${ANIMATION}Duration`),c=getTimeout(s,l);let u=null,h=0,d=0;t===TRANSITION?a>0&&(u=TRANSITION,h=a,d=o.length):t===ANIMATION?c>0&&(u=ANIMATION,h=c,d=l.length):(h=Math.max(a,c),u=h>0?a>c?TRANSITION:ANIMATION:null,d=u?u===TRANSITION?o.length:l.length:0);return{type:u,timeout:h,propCount:d,hasTransform:u===TRANSITION&&/\b(transform|all)(,|$)/.test(r(`${TRANSITION}Property`).toString())}}function getTimeout(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map(((t,n)=>toMs(t)+toMs(e[n]))))}function toMs(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$2({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(e,{slots:t}){const n=getCurrentInstance(),r=useTransitionState();let i,o;return onUpdated((()=>{if(!i.length)return;const t=e.moveClass||`${e.name||"v"}-move`;if(!hasCSSTransform(i[0].el,n.vnode.el,t))return;i.forEach(callPendingCbs),i.forEach(recordPosition);const r=i.filter(applyTranslation);forceReflow(),r.forEach((e=>{const n=e.el,r=n.style;addTransitionClass(n,t),r.transform=r.webkitTransform=r.transitionDuration="";const i=n._moveCb=e=>{e&&e.target!==n||e&&!/transform$/.test(e.propertyName)||(n.removeEventListener("transitionend",i),n._moveCb=null,removeTransitionClass(n,t))};n.addEventListener("transitionend",i)}))})),()=>{const a=toRaw(e),s=resolveTransitionProps(a);let l=a.tag||Fragment;i=o,o=t.default?getTransitionRawChildren(t.default()):[];for(let e=0;e<o.length;e++){const t=o[e];null!=t.key&&setTransitionHooks(t,resolveTransitionHooks(t,s,r,n))}if(i)for(let e=0;e<i.length;e++){const t=i[e];setTransitionHooks(t,resolveTransitionHooks(t,s,r,n)),positionMap.set(t,t.el.getBoundingClientRect())}return createVNode(l,null,o)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function recordPosition(e){newPositionMap.set(e,e.el.getBoundingClientRect())}function applyTranslation(e){const t=positionMap.get(e),n=newPositionMap.get(e),r=t.left-n.left,i=t.top-n.top;if(r||i){const t=e.el.style;return t.transform=t.webkitTransform=`translate(${r}px,${i}px)`,t.transitionDuration="0s",e}}function hasCSSTransform(e,t,n){const r=e.cloneNode();e._vtc&&e._vtc.forEach((e=>{e.split(/\s+/).forEach((e=>e&&r.classList.remove(e)))})),n.split(/\s+/).forEach((e=>e&&r.classList.add(e))),r.style.display="none";const i=1===t.nodeType?t:t.parentNode;i.appendChild(r);const{hasTransform:o}=getTransitionInfo(r);return i.removeChild(r),o}const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray$4(t)?e=>invokeArrayFns(t,e):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e._assign=getModelAssigner(i);const o=r||i.props&&"number"===i.props.type;addEventListener$1(e,t?"change":"input",(t=>{if(t.target.composing)return;let r=e.value;n&&(r=r.trim()),o&&(r=toNumber$1(r)),e._assign(r)})),n&&addEventListener$1(e,"change",(()=>{e.value=e.value.trim()})),t||(addEventListener$1(e,"compositionstart",onCompositionStart),addEventListener$1(e,"compositionend",onCompositionEnd),addEventListener$1(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=null==t?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:n,trim:r,number:i}},o){if(e._assign=getModelAssigner(o),e.composing)return;if(document.activeElement===e&&"range"!==e.type){if(n)return;if(r&&e.value.trim()===t)return;if((i||"number"===e.type)&&toNumber$1(e.value)===t)return}const a=null==t?"":t;e.value!==a&&(e.value=a)}},vModelCheckbox={deep:!0,created(e,t,n){e._assign=getModelAssigner(n),addEventListener$1(e,"change",(()=>{const t=e._modelValue,n=getValue$2(e),r=e.checked,i=e._assign;if(isArray$4(t)){const e=looseIndexOf(t,n),o=-1!==e;if(r&&!o)i(t.concat(n));else if(!r&&o){const n=[...t];n.splice(e,1),i(n)}}else if(isSet$2(t)){const e=new Set(t);r?e.add(n):e.delete(n),i(e)}else i(getCheckboxValue(e,r))}))},mounted:setChecked,beforeUpdate(e,t,n){e._assign=getModelAssigner(n),setChecked(e,t,n)}};function setChecked(e,{value:t,oldValue:n},r){e._modelValue=t,isArray$4(t)?e.checked=looseIndexOf(t,r.props.value)>-1:isSet$2(t)?e.checked=t.has(r.props.value):t!==n&&(e.checked=looseEqual(t,getCheckboxValue(e,!0)))}const vModelRadio={created(e,{value:t},n){e.checked=looseEqual(t,n.props.value),e._assign=getModelAssigner(n),addEventListener$1(e,"change",(()=>{e._assign(getValue$2(e))}))},beforeUpdate(e,{value:t,oldValue:n},r){e._assign=getModelAssigner(r),t!==n&&(e.checked=looseEqual(t,r.props.value))}},vModelSelect={deep:!0,created(e,{value:t,modifiers:{number:n}},r){const i=isSet$2(t);addEventListener$1(e,"change",(()=>{const t=Array.prototype.filter.call(e.options,(e=>e.selected)).map((e=>n?toNumber$1(getValue$2(e)):getValue$2(e)));e._assign(e.multiple?i?new Set(t):t:t[0])})),e._assign=getModelAssigner(r)},mounted(e,{value:t}){setSelected(e,t)},beforeUpdate(e,t,n){e._assign=getModelAssigner(n)},updated(e,{value:t}){setSelected(e,t)}};function setSelected(e,t){const n=e.multiple;if(!n||isArray$4(t)||isSet$2(t)){for(let r=0,i=e.options.length;r<i;r++){const i=e.options[r],o=getValue$2(i);if(n)isArray$4(t)?i.selected=looseIndexOf(t,o)>-1:i.selected=t.has(o);else if(looseEqual(getValue$2(i),t))return void(e.selectedIndex!==r&&(e.selectedIndex=r))}n||-1===e.selectedIndex||(e.selectedIndex=-1)}}function getValue$2(e){return"_value"in e?e._value:e.value}function getCheckboxValue(e,t){const n=t?"_trueValue":"_falseValue";return n in e?e[n]:t}const vModelDynamic={created(e,t,n){callModelHook(e,t,n,null,"created")},mounted(e,t,n){callModelHook(e,t,n,null,"mounted")},beforeUpdate(e,t,n,r){callModelHook(e,t,n,r,"beforeUpdate")},updated(e,t,n,r){callModelHook(e,t,n,r,"updated")}};function resolveDynamicModel(e,t){switch(e){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(t){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(e,t,n,r,i){const o=resolveDynamicModel(e.tagName,n.props&&n.props.type)[i];o&&o(e,t,n,r)}function initVModelForSSR(){vModelText.getSSRProps=({value:e})=>({value:e}),vModelRadio.getSSRProps=({value:e},t)=>{if(t.props&&looseEqual(t.props.value,e))return{checked:!0}},vModelCheckbox.getSSRProps=({value:e},t)=>{if(isArray$4(e)){if(t.props&&looseIndexOf(e,t.props.value)>-1)return{checked:!0}}else if(isSet$2(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}},vModelDynamic.getSSRProps=(e,t)=>{if("string"!=typeof t.type)return;const n=resolveDynamicModel(t.type.toUpperCase(),t.props&&t.props.type);return n.getSSRProps?n.getSSRProps(e,t):void 0}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&0!==e.button,middle:e=>"button"in e&&1!==e.button,right:e=>"button"in e&&2!==e.button,exact:(e,t)=>systemModifiers.some((n=>e[`${n}Key`]&&!t.includes(n)))},withModifiers=(e,t)=>(n,...r)=>{for(let e=0;e<t.length;e++){const r=modifierGuards[t[e]];if(r&&r(n,t))return}return e(n,...r)},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(e,t)=>n=>{if(!("key"in n))return;const r=hyphenate(n.key);return t.some((e=>e===r||keyNames[e]===r))?e(n):void 0},vShow={beforeMount(e,{value:t},{transition:n}){e._vod="none"===e.style.display?"":e.style.display,n&&t?n.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),setDisplay(e,!0),r.enter(e)):r.leave(e,(()=>{setDisplay(e,!1)})):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}function initVShowForSSR(){vShow.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const rendererOptions=extend$2({patchProp:patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render=(...e)=>{ensureRenderer().render(...e)},hydrate=(...e)=>{ensureHydrationRenderer().hydrate(...e)},createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:n}=t;return t.mount=e=>{const r=normalizeContainer(e);if(!r)return;const i=t._component;isFunction$3(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t},createSSRApp=(...e)=>{const t=ensureHydrationRenderer().createApp(...e),{mount:n}=t;return t.mount=e=>{const t=normalizeContainer(e);if(t)return n(t,!0,t instanceof SVGElement)},t};function normalizeContainer(e){if(isString$2(e)){return document.querySelector(e)}return e}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())},compile=()=>{},Vue=Object.freeze(Object.defineProperty({__proto__:null,compile:compile,EffectScope:EffectScope,ReactiveEffect:ReactiveEffect,customRef:customRef,effect:effect,effectScope:effectScope,getCurrentScope:getCurrentScope,isProxy:isProxy,isReactive:isReactive,isReadonly:isReadonly,isRef:isRef,isShallow:isShallow,markRaw:markRaw,onScopeDispose:onScopeDispose,proxyRefs:proxyRefs,reactive:reactive,readonly:readonly,ref:ref$1,shallowReactive:shallowReactive,shallowReadonly:shallowReadonly,shallowRef:shallowRef,stop:stop,toRaw:toRaw,toRef:toRef,toRefs:toRefs,triggerRef:triggerRef,unref:unref,camelize:camelize,capitalize:capitalize$1,normalizeClass:normalizeClass,normalizeProps:normalizeProps,normalizeStyle:normalizeStyle,toDisplayString:toDisplayString,toHandlerKey:toHandlerKey,BaseTransition:BaseTransition,Comment:Comment,Fragment:Fragment,KeepAlive:KeepAlive,Static:Static,Suspense:Suspense,Teleport:Teleport,Text:Text$5,callWithAsyncErrorHandling:callWithAsyncErrorHandling,callWithErrorHandling:callWithErrorHandling,cloneVNode:cloneVNode,compatUtils:compatUtils,computed:computed,createBlock:createBlock,createCommentVNode:createCommentVNode,createElementBlock:createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer:createHydrationRenderer,createPropsRestProxy:createPropsRestProxy,createRenderer:createRenderer,createSlots:createSlots,createStaticVNode:createStaticVNode,createTextVNode:createTextVNode,createVNode:createVNode,defineAsyncComponent:defineAsyncComponent,defineComponent:defineComponent,defineEmits:defineEmits,defineExpose:defineExpose,defineProps:defineProps,get devtools(){return devtools},getCurrentInstance:getCurrentInstance,getTransitionRawChildren:getTransitionRawChildren,guardReactiveProps:guardReactiveProps,h:h$1,handleError:handleError,initCustomFormatter:initCustomFormatter,inject:inject,isMemoSame:isMemoSame,isRuntimeOnly:isRuntimeOnly,isVNode:isVNode,mergeDefaults:mergeDefaults,mergeProps:mergeProps,nextTick:nextTick,onActivated:onActivated,onBeforeMount:onBeforeMount,onBeforeUnmount:onBeforeUnmount,onBeforeUpdate:onBeforeUpdate,onDeactivated:onDeactivated,onErrorCaptured:onErrorCaptured,onMounted:onMounted,onRenderTracked:onRenderTracked,onRenderTriggered:onRenderTriggered,onServerPrefetch:onServerPrefetch,onUnmounted:onUnmounted,onUpdated:onUpdated,openBlock:openBlock,popScopeId:popScopeId,provide:provide,pushScopeId:pushScopeId,queuePostFlushCb:queuePostFlushCb,registerRuntimeCompiler:registerRuntimeCompiler,renderList:renderList,renderSlot:renderSlot,resolveComponent:resolveComponent,resolveDirective:resolveDirective,resolveDynamicComponent:resolveDynamicComponent,resolveFilter:resolveFilter,resolveTransitionHooks:resolveTransitionHooks,setBlockTracking:setBlockTracking,setDevtoolsHook:setDevtoolsHook,setTransitionHooks:setTransitionHooks,ssrContextKey:ssrContextKey,ssrUtils:ssrUtils,toHandlers:toHandlers,transformVNodeArgs:transformVNodeArgs,useAttrs:useAttrs,useSSRContext:useSSRContext,useSlots:useSlots,useTransitionState:useTransitionState,version:version,warn:warn,watch:watch,watchEffect:watchEffect,watchPostEffect:watchPostEffect,watchSyncEffect:watchSyncEffect,withAsyncContext:withAsyncContext,withCtx:withCtx,withDefaults:withDefaults,withDirectives:withDirectives,withMemo:withMemo,withScopeId:withScopeId,Transition:Transition,TransitionGroup:TransitionGroup,VueElement:VueElement,createApp:createApp,createSSRApp:createSSRApp,defineCustomElement:defineCustomElement,defineSSRCustomElement:defineSSRCustomElement,hydrate:hydrate,initDirectivesForSSR:initDirectivesForSSR,render:render,useCssModule:useCssModule,useCssVars:useCssVars,vModelCheckbox:vModelCheckbox,vModelDynamic:vModelDynamic,vModelRadio:vModelRadio,vModelSelect:vModelSelect,vModelText:vModelText,vShow:vShow,withKeys:withKeys,withModifiers:withModifiers},Symbol.toStringTag,{value:"Module"})),style$2="";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function getAugmentedNamespace(e){var t=e.default;if("function"==typeof t){var n=function(){return t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}var jquery={exports:{}},global2,factory;
/*!
 * jQuery JavaScript Library v3.6.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2022-08-26T17:52Z
 */global2="undefined"!=typeof window?window:commonjsGlobal,factory=function(e,t){var n=[],r=Object.getPrototypeOf,i=n.slice,o=n.flat?function(e){return n.flat.call(e)}:function(e){return n.concat.apply([],e)},a=n.push,s=n.indexOf,l={},c=l.toString,u=l.hasOwnProperty,h=u.toString,d=h.call(Object),f={},p=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},g=function(e){return null!=e&&e===e.window},m=e.document,v={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,n){var r,i,o=(n=n||m).createElement("script");if(o.text=e,t)for(r in v)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function b(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[c.call(e)]||"object":typeof e}var x="3.6.1",w=function(e,t){return new w.fn.init(e,t)};function _(e){var t=!!e&&"length"in e&&e.length,n=b(e);return!p(e)&&!g(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}w.fn=w.prototype={jquery:x,constructor:w,length:0,toArray:function(){return i.call(this)},get:function(e){return null==e?i.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=w.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return w.each(this,e)},map:function(e){return this.pushStack(w.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(w.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(w.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},w.extend=w.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||p(a)||(a={}),s===l&&(a=this,s--);s<l;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(w.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||w.isPlainObject(n)?n:{},i=!1,a[t]=w.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},w.extend({expando:"jQuery"+(x+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==c.call(e)||(t=r(e))&&("function"!=typeof(n=u.call(t,"constructor")&&t.constructor)||h.call(n)!==d))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){y(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(_(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(_(Object(e))?w.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:s.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,a=0,s=[];if(_(e))for(r=e.length;a<r;a++)null!=(i=t(e[a],a,n))&&s.push(i);else for(a in e)null!=(i=t(e[a],a,n))&&s.push(i);return o(s)},guid:1,support:f}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=n[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){l["[object "+t+"]"]=t.toLowerCase()}));var C=function(e){var t,n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x="sizzle"+1*new Date,w=e.document,_=0,C=0,$=le(),S=le(),E=le(),A=le(),M=function(e,t){return e===t&&(h=!0),0},k={}.hasOwnProperty,T=[],P=T.pop,O=T.push,N=T.push,I=T.slice,D=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",R="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",j="\\["+R+"*("+B+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+R+"*\\]",F=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+j+")*)|.*)\\)|)",G=new RegExp(R+"+","g"),V=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g"),z=new RegExp("^"+R+"*,"+R+"*"),H=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),U=new RegExp(R+"|>"),W=new RegExp(F),q=new RegExp("^"+B+"$"),Y={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+j),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,K=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){d()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{N.apply(T=I.call(w.childNodes),w.childNodes),T[w.childNodes.length].nodeType}catch(e11){N={apply:T.length?function(e,t){O.apply(e,I.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function se(e,t,r,i){var o,s,c,u,h,p,v,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return r;if(!i&&(d(t),t=t||f,g)){if(11!==w&&(h=J.exec(e)))if(o=h[1]){if(9===w){if(!(c=t.getElementById(o)))return r;if(c.id===o)return r.push(c),r}else if(y&&(c=y.getElementById(o))&&b(t,c)&&c.id===o)return r.push(c),r}else{if(h[2])return N.apply(r,t.getElementsByTagName(e)),r;if((o=h[3])&&n.getElementsByClassName&&t.getElementsByClassName)return N.apply(r,t.getElementsByClassName(o)),r}if(n.qsa&&!A[e+" "]&&(!m||!m.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(v=e,y=t,1===w&&(U.test(e)||H.test(e))){for((y=ee.test(e)&&ve(t.parentNode)||t)===t&&n.scope||((u=t.getAttribute("id"))?u=u.replace(re,ie):t.setAttribute("id",u=x)),s=(p=a(e)).length;s--;)p[s]=(u?"#"+u:":scope")+" "+be(p[s]);v=p.join(",")}try{return N.apply(r,y.querySelectorAll(v)),r}catch(_){A(e,!0)}finally{u===x&&t.removeAttribute("id")}}}return l(e.replace(V,"$1"),t,r,i)}function le(){var e=[];return function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}}function ce(e){return e[x]=!0,e}function ue(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e11){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function he(e,t){for(var n=e.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=t}function de(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ge(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ce((function(t){return t=+t,ce((function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ve(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},d=se.setDocument=function(e){var t,i,a=e?e.ownerDocument||e:w;return a!=f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,g=!o(f),w!=f&&(i=f.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",oe,!1):i.attachEvent&&i.attachEvent("onunload",oe)),n.scope=ue((function(e){return p.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=ue((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=ue((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(f.getElementsByClassName),n.getById=ue((function(e){return p.appendChild(e).id=x,!f.getElementsByName||!f.getElementsByName(x).length})),n.getById?(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n=t.getElementById(e);return n?[n]:[]}}):(r.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&g){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(i=t.getElementsByName(e),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&g)return t.getElementsByClassName(e)},v=[],m=[],(n.qsa=Q.test(f.querySelectorAll))&&(ue((function(e){var t;p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+R+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+R+"*(?:value|"+L+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),ue((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+R+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=Q.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&ue((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),v.push("!=",F)})),m=m.length&&new RegExp(m.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(p.compareDocumentPosition),b=t||Q.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return h=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===r?e==f||e.ownerDocument==w&&b(w,e)?-1:t==f||t.ownerDocument==w&&b(w,t)?1:u?D(u,e)-D(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return h=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==f?-1:t==f?1:i?-1:o?1:u?D(u,e)-D(u,t):0;if(i===o)return de(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?de(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(d(e),n.matchesSelector&&g&&!A[t+" "]&&(!v||!v.test(t))&&(!m||!m.test(t)))try{var r=y.call(e,t);if(r||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e11){A(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&d(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&d(e);var i=r.attrHandle[t.toLowerCase()],o=i&&k.call(r.attrHandle,t.toLowerCase())?i(e,t,!g):void 0;return void 0!==o?o:n.attributes||!g?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,r=[],i=0,o=0;if(h=!n.detectDuplicates,u=!n.sortStable&&e.slice(0),e.sort(M),h){for(;t=e[o++];)t===e[o]&&(i=r.push(o));for(;i--;)e.splice(r[i],1)}return u=null,e},i=se.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=i(t);return n},(r=se.selectors={cacheLength:50,createPseudo:ce,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return Y.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&W.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+R+")"+e+"("+R+"|$)"))&&$(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=se.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(G," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var c,u,h,d,f,p,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=g="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(b=(f=(c=(u=(h=(d=m)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===_&&c[1])&&c[2],d=f&&m.childNodes[f];d=++f&&d&&d[g]||(b=f=0)||p.pop();)if(1===d.nodeType&&++b&&d===t){u[e]=[_,f,b];break}}else if(y&&(b=f=(c=(u=(h=(d=t)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]||[])[0]===_&&c[1]),!1===b)for(;(d=++f&&d&&d[g]||(b=f=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++b||(y&&((u=(h=d[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[e]=[_,b]),d!==t)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return i[x]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?ce((function(e,n){for(var r,o=i(e,t),a=o.length;a--;)e[r=D(e,o[a])]=!(n[r]=o[a])})):function(e){return i(e,0,n)}):i}},pseudos:{not:ce((function(e){var t=[],n=[],r=s(e.replace(V,"$1"));return r[x]?ce((function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ce((function(e){return function(t){return se(e,t).length>0}})),contains:ce((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||i(t)).indexOf(e)>-1}})),lang:ce((function(e){return q.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=g?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return K.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:me((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}}).pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=pe(t);function ye(){}function be(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function xe(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=C++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,l){var c,u,h,d=[_,s];if(l){for(;t=t[r];)if((1===t.nodeType||a)&&e(t,n,l))return!0}else for(;t=t[r];)if(1===t.nodeType||a)if(u=(h=t[x]||(t[x]={}))[t.uniqueID]||(h[t.uniqueID]={}),i&&i===t.nodeName.toLowerCase())t=t[r]||t;else{if((c=u[o])&&c[0]===_&&c[1]===s)return d[2]=c[2];if(u[o]=d,d[2]=e(t,n,l))return!0}return!1}}function we(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function _e(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,c=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function Ce(e,t,n,r,i,o){return r&&!r[x]&&(r=Ce(r)),i&&!i[x]&&(i=Ce(i,o)),ce((function(o,a,s,l){var c,u,h,d=[],f=[],p=a.length,g=o||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:_e(g,d,e,s,l),v=n?i||(o?e:p||r)?[]:a:m;if(n&&n(m,v,s,l),r)for(c=_e(v,f),r(c,[],s,l),u=c.length;u--;)(h=c[u])&&(v[f[u]]=!(m[f[u]]=h));if(o){if(i||e){if(i){for(c=[],u=v.length;u--;)(h=v[u])&&c.push(m[u]=h);i(null,v=[],c,l)}for(u=v.length;u--;)(h=v[u])&&(c=i?D(o,h):d[u])>-1&&(o[c]=!(a[c]=h))}}else v=_e(v===a?v.splice(p,v.length):v),i?i(null,a,v,l):N.apply(a,v)}))}function $e(e){for(var t,n,i,o=e.length,a=r.relative[e[0].type],s=a||r.relative[" "],l=a?1:0,u=xe((function(e){return e===t}),s,!0),h=xe((function(e){return D(t,e)>-1}),s,!0),d=[function(e,n,r){var i=!a&&(r||n!==c)||((t=n).nodeType?u(e,n,r):h(e,n,r));return t=null,i}];l<o;l++)if(n=r.relative[e[l].type])d=[xe(we(d),n)];else{if((n=r.filter[e[l].type].apply(null,e[l].matches))[x]){for(i=++l;i<o&&!r.relative[e[i].type];i++);return Ce(l>1&&we(d),l>1&&be(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(V,"$1"),n,l<i&&$e(e.slice(l,i)),i<o&&$e(e=e.slice(i)),i<o&&be(e))}d.push(n)}return we(d)}return ye.prototype=r.filters=r.pseudos,r.setFilters=new ye,a=se.tokenize=function(e,t){var n,i,o,a,s,l,c,u=S[e+" "];if(u)return t?0:u.slice(0);for(s=e,l=[],c=r.preFilter;s;){for(a in n&&!(i=z.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),n=!1,(i=H.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(V," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||c[a]&&!(i=c[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):S(e,l).slice(0)},s=se.compile=function(e,t){var n,i=[],o=[],s=E[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=$e(t[n]))[x]?i.push(s):o.push(s);s=E(e,function(e,t){var n=t.length>0,i=e.length>0,o=function(o,a,s,l,u){var h,p,m,v=0,y="0",b=o&&[],x=[],w=c,C=o||i&&r.find.TAG("*",u),$=_+=null==w?1:Math.random()||.1,S=C.length;for(u&&(c=a==f||a||u);y!==S&&null!=(h=C[y]);y++){if(i&&h){for(p=0,a||h.ownerDocument==f||(d(h),s=!g);m=e[p++];)if(m(h,a||f,s)){l.push(h);break}u&&(_=$)}n&&((h=!m&&h)&&v--,o&&b.push(h))}if(v+=y,n&&y!==v){for(p=0;m=t[p++];)m(b,x,a,s);if(o){if(v>0)for(;y--;)b[y]||x[y]||(x[y]=P.call(l));x=_e(x)}N.apply(l,x),u&&!o&&x.length>0&&v+t.length>1&&se.uniqueSort(l)}return u&&(_=$,c=w),b};return n?ce(o):o}(o,i)),s.selector=e}return s},l=se.select=function(e,t,n,i){var o,l,c,u,h,d="function"==typeof e&&e,f=!i&&a(e=d.selector||e);if(n=n||[],1===f.length){if((l=f[0]=f[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===t.nodeType&&g&&r.relative[l[1].type]){if(!(t=(r.find.ID(c.matches[0].replace(te,ne),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(l.shift().value.length)}for(o=Y.needsContext.test(e)?0:l.length;o--&&(c=l[o],!r.relative[u=c.type]);)if((h=r.find[u])&&(i=h(c.matches[0].replace(te,ne),ee.test(l[0].type)&&ve(t.parentNode)||t))){if(l.splice(o,1),!(e=i.length&&be(l)))return N.apply(n,i),n;break}}return(d||s(e,f))(i,t,!g,n,!t||ee.test(e)&&ve(t.parentNode)||t),n},n.sortStable=x.split("").sort(M).join("")===x,n.detectDuplicates=!!h,d(),n.sortDetached=ue((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),ue((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||he("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&ue((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||he("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),ue((function(e){return null==e.getAttribute("disabled")}))||he(L,(function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null})),se}(e);w.find=C,w.expr=C.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=C.uniqueSort,w.text=C.getText,w.isXMLDoc=C.isXML,w.contains=C.contains,w.escapeSelector=C.escape;var $=function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&w(e).is(n))break;r.push(e)}return r},S=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=w.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var M=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function k(e,t,n){return p(t)?w.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?w.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?w.grep(e,(function(e){return s.call(t,e)>-1!==n})):w.filter(t,e,n)}w.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?w.find.matchesSelector(r,e)?[r]:[]:w.find.matches(e,w.grep(t,(function(e){return 1===e.nodeType})))},w.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(w(e).filter((function(){for(t=0;t<r;t++)if(w.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)w.find(e,i[t],n);return r>1?w.uniqueSort(n):n},filter:function(e){return this.pushStack(k(this,e||[],!1))},not:function(e){return this.pushStack(k(this,e||[],!0))},is:function(e){return!!k(this,"string"==typeof e&&E.test(e)?w(e):e||[],!1).length}});var T,P=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||T,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:P.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof w?t[0]:t,w.merge(this,w.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),M.test(r[1])&&w.isPlainObject(t))for(r in t)p(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=m.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):p(e)?void 0!==n.ready?n.ready(e):e(w):w.makeArray(e,this)}).prototype=w.fn,T=w(m);var O=/^(?:parents|prev(?:Until|All))/,N={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}w.fn.extend({has:function(e){var t=w(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(w.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&w(e);if(!E.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&w.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?w.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?s.call(w(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),w.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return $(e,"parentNode")},parentsUntil:function(e,t,n){return $(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return $(e,"nextSibling")},prevAll:function(e){return $(e,"previousSibling")},nextUntil:function(e,t,n){return $(e,"nextSibling",n)},prevUntil:function(e,t,n){return $(e,"previousSibling",n)},siblings:function(e){return S((e.parentNode||{}).firstChild,e)},children:function(e){return S(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),w.merge([],e.childNodes))}},(function(e,t){w.fn[e]=function(n,r){var i=w.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=w.filter(r,i)),this.length>1&&(N[e]||w.uniqueSort(i),O.test(e)&&i.reverse()),this.pushStack(i)}}));var D=/[^\x20\t\r\n\f]+/g;function L(e){return e}function R(e){throw e}function B(e,t,n,r){var i;try{e&&p(i=e.promise)?i.call(e).done(t).fail(n):e&&p(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(o){n.apply(void 0,[o])}}w.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return w.each(e.match(D)||[],(function(e,n){t[n]=!0})),t}(e):w.extend({},e);var t,n,r,i,o=[],a=[],s=-1,l=function(){for(i=i||e.once,r=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){w.each(n,(function(n,r){p(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==b(r)&&t(r)}))}(arguments),n&&!t&&l()),this},remove:function(){return w.each(arguments,(function(e,t){for(var n;(n=w.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?w.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},w.extend({Deferred:function(t){var n=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return w.Deferred((function(t){w.each(n,(function(n,r){var i=p(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&p(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(t,r,i){var o=0;function a(t,n,r,i){return function(){var s=this,l=arguments,c=function(){var e,c;if(!(t<o)){if((e=r.apply(s,l))===n.promise())throw new TypeError("Thenable self-resolution");c=e&&("object"==typeof e||"function"==typeof e)&&e.then,p(c)?i?c.call(e,a(o,n,L,i),a(o,n,R,i)):(o++,c.call(e,a(o,n,L,i),a(o,n,R,i),a(o,n,L,n.notifyWith))):(r!==L&&(s=void 0,l=[e]),(i||n.resolveWith)(s,l))}},u=i?c:function(){try{c()}catch(e11){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(e11,u.stackTrace),t+1>=o&&(r!==R&&(s=void 0,l=[e11]),n.rejectWith(s,l))}};t?u():(w.Deferred.getStackHook&&(u.stackTrace=w.Deferred.getStackHook()),e.setTimeout(u))}}return w.Deferred((function(e){n[0][3].add(a(0,e,p(i)?i:L,e.notifyWith)),n[1][3].add(a(0,e,p(t)?t:L)),n[2][3].add(a(0,e,p(r)?r:R))})).promise()},promise:function(e){return null!=e?w.extend(e,i):i}},o={};return w.each(n,(function(e,t){var a=t[2],s=t[5];i[t[1]]=a.add,s&&a.add((function(){r=s}),n[3-e][2].disable,n[3-e][3].disable,n[0][2].lock,n[0][3].lock),a.add(t[3].fire),o[t[0]]=function(){return o[t[0]+"With"](this===o?void 0:this,arguments),this},o[t[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),o=i.call(arguments),a=w.Deferred(),s=function(e){return function(n){r[e]=this,o[e]=arguments.length>1?i.call(arguments):n,--t||a.resolveWith(r,o)}};if(t<=1&&(B(e,a.done(s(n)).resolve,a.reject,!t),"pending"===a.state()||p(o[n]&&o[n].then)))return a.then();for(;n--;)B(o[n],s(n),a.reject);return a.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,n){e.console&&e.console.warn&&t&&j.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,n)},w.readyException=function(t){e.setTimeout((function(){throw t}))};var F=w.Deferred();function G(){m.removeEventListener("DOMContentLoaded",G),e.removeEventListener("load",G),w.ready()}w.fn.ready=function(e){return F.then(e).catch((function(e){w.readyException(e)})),this},w.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==e&&--w.readyWait>0||F.resolveWith(m,[w]))}}),w.ready.then=F.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(w.ready):(m.addEventListener("DOMContentLoaded",G),e.addEventListener("load",G));var V=function(e,t,n,r,i,o,a){var s=0,l=e.length,c=null==n;if("object"===b(n))for(s in i=!0,n)V(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,p(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(w(e),n)})),t))for(;s<l;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):l?t(e[0],n):o},z=/^-ms-/,H=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function W(e){return e.replace(z,"ms-").replace(H,U)}var q=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Y(){this.expando=w.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(e){var t=e[this.expando];return t||(t={},q(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[W(t)]=n;else for(r in t)i[W(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][W(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(W):(t=W(t))in r?[t]:t.match(D)||[]).length;for(;n--;)delete r[t[n]]}(void 0===t||w.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!w.isEmptyObject(t)}};var X=new Y,K=new Y,Z=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Q=/[A-Z]/g;function J(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(Q,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:Z.test(e)?JSON.parse(e):e)}(n)}catch(e11){}K.set(e,t,n)}else n=void 0;return n}w.extend({hasData:function(e){return K.hasData(e)||X.hasData(e)},data:function(e,t,n){return K.access(e,t,n)},removeData:function(e,t){K.remove(e,t)},_data:function(e,t,n){return X.access(e,t,n)},_removeData:function(e,t){X.remove(e,t)}}),w.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=K.get(o),1===o.nodeType&&!X.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=W(r.slice(5)),J(o,r,i[r]));X.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each((function(){K.set(this,e)})):V(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=K.get(o,e))||void 0!==(n=J(o,e))?n:void 0;this.each((function(){K.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){K.remove(this,e)}))}}),w.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=X.get(e,t),n&&(!r||Array.isArray(n)?r=X.access(e,t,w.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=w.queue(e,t),r=n.length,i=n.shift(),o=w._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,(function(){w.dequeue(e,t)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return X.get(e,n)||X.access(e,n,{empty:w.Callbacks("once memory").add((function(){X.remove(e,[t+"queue",n])}))})}}),w.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?w.queue(this[0],e):void 0===t?this:this.each((function(){var n=w.queue(this,e,t);w._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&w.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){w.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=w.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=X.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=m.documentElement,ie=function(e){return w.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return w.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===w.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return w.css(e,t,"")},l=s(),c=n&&n[3]||(w.cssNumber[t]?"":"px"),u=e.nodeType&&(w.cssNumber[t]||"px"!==c&&+l)&&te.exec(w.css(e,t));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;a--;)w.style(e,t,u+c),(1-o)*(1-(o=s()/l||.5))<=0&&(a=0),u/=o;u*=2,w.style(e,t,u+c),n=n||[]}return n&&(u=+u||+l||0,i=n[1]?u+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=u,r.end=i)),i}var le={};function ce(e){var t,n=e.ownerDocument,r=e.nodeName,i=le[r];return i||(t=n.body.appendChild(n.createElement(r)),i=w.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),le[r]=i,i)}function ue(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(r=e[o]).style&&(n=r.style.display,t?("none"===n&&(i[o]=X.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&ae(r)&&(i[o]=ce(r))):"none"!==n&&(i[o]="none",X.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}w.fn.extend({show:function(){return ue(this,!0)},hide:function(){return ue(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ae(this)?w(this).show():w(this).hide()}))}});var he,de,fe=/^(?:checkbox|radio)$/i,pe=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ge=/^$|^module$|\/(?:java|ecma)script/i;he=m.createDocumentFragment().appendChild(m.createElement("div")),(de=m.createElement("input")).setAttribute("type","radio"),de.setAttribute("checked","checked"),de.setAttribute("name","t"),he.appendChild(de),f.checkClone=he.cloneNode(!0).cloneNode(!0).lastChild.checked,he.innerHTML="<textarea>x</textarea>",f.noCloneChecked=!!he.cloneNode(!0).lastChild.defaultValue,he.innerHTML="<option></option>",f.option=!!he.lastChild;var me={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?w.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)X.set(e[n],"globalEval",!t||X.get(t[n],"globalEval"))}me.tbody=me.tfoot=me.colgroup=me.caption=me.thead,me.th=me.td,f.option||(me.optgroup=me.option=[1,"<select multiple='multiple'>","</select>"]);var be=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,l,c,u,h=t.createDocumentFragment(),d=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===b(o))w.merge(d,o.nodeType?[o]:o);else if(be.test(o)){for(a=a||h.appendChild(t.createElement("div")),s=(pe.exec(o)||["",""])[1].toLowerCase(),l=me[s]||me._default,a.innerHTML=l[1]+w.htmlPrefilter(o)+l[2],u=l[0];u--;)a=a.lastChild;w.merge(d,a.childNodes),(a=h.firstChild).textContent=""}else d.push(t.createTextNode(o));for(h.textContent="",f=0;o=d[f++];)if(r&&w.inArray(o,r)>-1)i&&i.push(o);else if(c=ie(o),a=ve(h.appendChild(o),"script"),c&&ye(a),n)for(u=0;o=a[u++];)ge.test(o.type||"")&&n.push(o);return h}var we=/^([^.]*)(?:\.(.+)|)/;function _e(){return!0}function Ce(){return!1}function $e(e,t){return e===function(){try{return m.activeElement}catch(e){}}()==("focus"===t)}function Se(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Se(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ce;else if(!i)return e;return 1===o&&(a=i,i=function(e){return w().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=w.guid++)),e.each((function(){w.event.add(this,t,i,r,n)}))}function Ee(e,t,n){n?(X.set(e,t,!1),w.event.add(e,t,{namespace:!1,handler:function(e){var r,o,a=X.get(this,t);if(1&e.isTrigger&&this[t]){if(a.length)(w.event.special[t]||{}).delegateType&&e.stopPropagation();else if(a=i.call(arguments),X.set(this,t,a),r=n(this,t),this[t](),a!==(o=X.get(this,t))||r?X.set(this,t,!1):o={},a!==o)return e.stopImmediatePropagation(),e.preventDefault(),o&&o.value}else a.length&&(X.set(this,t,{value:w.event.trigger(w.extend(a[0],w.Event.prototype),a.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===X.get(e,t)&&w.event.add(e,t,_e)}w.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,f,p,g,m=X.get(e);if(q(e))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&w.find.matchesSelector(re,i),n.guid||(n.guid=w.guid++),(l=m.events)||(l=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==w&&w.event.triggered!==t.type?w.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(D)||[""]).length;c--;)f=g=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f&&(h=w.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,h=w.event.special[f]||{},u=w.extend({type:f,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&w.expr.match.needsContext.test(i),namespace:p.join(".")},o),(d=l[f])||((d=l[f]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(f,a)),h.add&&(h.add.call(e,u),u.handler.guid||(u.handler.guid=n.guid)),i?d.splice(d.delegateCount++,0,u):d.push(u),w.event.global[f]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,c,u,h,d,f,p,g,m=X.hasData(e)&&X.get(e);if(m&&(l=m.events)){for(c=(t=(t||"").match(D)||[""]).length;c--;)if(f=g=(s=we.exec(t[c])||[])[1],p=(s[2]||"").split(".").sort(),f){for(h=w.event.special[f]||{},d=l[f=(r?h.delegateType:h.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)u=d[o],!i&&g!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(e,u));a&&!d.length&&(h.teardown&&!1!==h.teardown.call(e,p,m.handle)||w.removeEvent(e,f,m.handle),delete l[f])}else for(f in l)w.event.remove(e,f+t[c],n,r,!0);w.isEmptyObject(l)&&X.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),l=w.event.fix(e),c=(X.get(this,"events")||Object.create(null))[l.type]||[],u=w.event.special[l.type]||{};for(s[0]=l,t=1;t<arguments.length;t++)s[t]=arguments[t];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(a=w.event.handlers.call(this,l,c),t=0;(i=a[t++])&&!l.isPropagationStopped();)for(l.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==o.namespace&&!l.rnamespace.test(o.namespace)||(l.handleObj=o,l.data=o.data,void 0!==(r=((w.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(l.result=r)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(e,t){var n,r,i,o,a,s=[],l=t.delegateCount,c=e.target;if(l&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<l;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?w(i,this).index(c)>-1:w.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,l<t.length&&s.push({elem:c,handlers:t.slice(l)}),s},addProp:function(e,t){Object.defineProperty(w.Event.prototype,e,{enumerable:!0,configurable:!0,get:p(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[w.expando]?e:new w.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return fe.test(t.type)&&t.click&&A(t,"input")&&Ee(t,"click",_e),!1},trigger:function(e){var t=this||e;return fe.test(t.type)&&t.click&&A(t,"input")&&Ee(t,"click"),!0},_default:function(e){var t=e.target;return fe.test(t.type)&&t.click&&A(t,"input")&&X.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},w.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},w.Event=function(e,t){if(!(this instanceof w.Event))return new w.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?_e:Ce,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&w.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ce,isPropagationStopped:Ce,isImmediatePropagationStopped:Ce,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=_e,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=_e,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=_e,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},w.event.addProp),w.each({focus:"focusin",blur:"focusout"},(function(e,t){w.event.special[e]={setup:function(){return Ee(this,e,$e),!1},trigger:function(){return Ee(this,e),!0},_default:function(t){return X.get(t.target,e)},delegateType:t}})),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){w.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||w.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),w.fn.extend({on:function(e,t,n,r){return Se(this,e,t,n,r)},one:function(e,t,n,r){return Se(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,w(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Ce),this.each((function(){w.event.remove(this,e,n,t)}))}});var Ae=/<script|<style|<link/i,Me=/checked\s*(?:[^=]|=\s*.checked.)/i,ke=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Te(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&w(e).children("tbody")[0]||e}function Pe(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Oe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ne(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(X.hasData(e)&&(s=X.get(e).events))for(i in X.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)w.event.add(t,i,s[i][n]);K.hasData(e)&&(o=K.access(e),a=w.extend({},o),K.set(t,a))}}function Ie(e,t,n,r){t=o(t);var i,a,s,l,c,u,h=0,d=e.length,g=d-1,m=t[0],v=p(m);if(v||d>1&&"string"==typeof m&&!f.checkClone&&Me.test(m))return e.each((function(i){var o=e.eq(i);v&&(t[0]=m.call(this,i,o.html())),Ie(o,t,n,r)}));if(d&&(a=(i=xe(t,e[0].ownerDocument,!1,e,r)).firstChild,1===i.childNodes.length&&(i=a),a||r)){for(l=(s=w.map(ve(i,"script"),Pe)).length;h<d;h++)c=i,h!==g&&(c=w.clone(c,!0,!0),l&&w.merge(s,ve(c,"script"))),n.call(e[h],c,h);if(l)for(u=s[s.length-1].ownerDocument,w.map(s,Oe),h=0;h<l;h++)c=s[h],ge.test(c.type||"")&&!X.access(c,"globalEval")&&w.contains(u,c)&&(c.src&&"module"!==(c.type||"").toLowerCase()?w._evalUrl&&!c.noModule&&w._evalUrl(c.src,{nonce:c.nonce||c.getAttribute("nonce")},u):y(c.textContent.replace(ke,""),c,u))}return e}function De(e,t,n){for(var r,i=t?w.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||w.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}w.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,l,c,u=e.cloneNode(!0),h=ie(e);if(!(f.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||w.isXMLDoc(e)))for(a=ve(u),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],l=a[r],c=void 0,"input"===(c=l.nodeName.toLowerCase())&&fe.test(s.type)?l.checked=s.checked:"input"!==c&&"textarea"!==c||(l.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(u),r=0,i=o.length;r<i;r++)Ne(o[r],a[r]);else Ne(e,u);return(a=ve(u,"script")).length>0&&ye(a,!h&&ve(e,"script")),u},cleanData:function(e){for(var t,n,r,i=w.event.special,o=0;void 0!==(n=e[o]);o++)if(q(n)){if(t=n[X.expando]){if(t.events)for(r in t.events)i[r]?w.event.remove(n,r):w.removeEvent(n,r,t.handle);n[X.expando]=void 0}n[K.expando]&&(n[K.expando]=void 0)}}}),w.fn.extend({detach:function(e){return De(this,e,!0)},remove:function(e){return De(this,e)},text:function(e){return V(this,(function(e){return void 0===e?w.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ie(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Te(this,e).appendChild(e)}))},prepend:function(){return Ie(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Te(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ie(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ie(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(w.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return w.clone(this,e,t)}))},html:function(e){return V(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!me[(pe.exec(e)||["",""])[1].toLowerCase()]){e=w.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(w.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e11){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ie(this,arguments,(function(t){var n=this.parentNode;w.inArray(this,e)<0&&(w.cleanData(ve(this)),n&&n.replaceChild(t,this))}),e)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){w.fn[e]=function(e){for(var n,r=[],i=w(e),o=i.length-1,s=0;s<=o;s++)n=s===o?this:this.clone(!0),w(i[s])[t](n),a.apply(r,n.get());return this.pushStack(r)}}));var Le=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=/^--/,Be=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},je=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Fe=new RegExp(ne.join("|"),"i"),Ge="[\\x20\\t\\r\\n\\f]",Ve=new RegExp("^"+Ge+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Ge+"+$","g");function ze(e,t,n){var r,i,o,a,s=Re.test(t),l=e.style;return(n=n||Be(e))&&(a=n.getPropertyValue(t)||n[t],s&&(a=a.replace(Ve,"$1")),""!==a||ie(e)||(a=w.style(e,t)),!f.pixelBoxStyles()&&Le.test(a)&&Fe.test(t)&&(r=l.width,i=l.minWidth,o=l.maxWidth,l.minWidth=l.maxWidth=l.width=a,a=n.width,l.width=r,l.minWidth=i,l.maxWidth=o)),void 0!==a?a+"":a}function He(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(c).appendChild(u);var t=e.getComputedStyle(u);r="1%"!==t.top,l=12===n(t.marginLeft),u.style.right="60%",a=36===n(t.right),i=36===n(t.width),u.style.position="absolute",o=12===n(u.offsetWidth/3),re.removeChild(c),u=null}}function n(e){return Math.round(parseFloat(e))}var r,i,o,a,s,l,c=m.createElement("div"),u=m.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",f.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(f,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,n,r,i;return null==s&&(t=m.createElement("table"),n=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",n.style.cssText="border:1px solid",n.style.height="1px",r.style.height="9px",r.style.display="block",re.appendChild(t).appendChild(n).appendChild(r),i=e.getComputedStyle(n),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===n.offsetHeight,re.removeChild(t)),s}}))}();var Ue=["Webkit","Moz","ms"],We=m.createElement("div").style,qe={};function Ye(e){var t=w.cssProps[e]||qe[e];return t||(e in We?e:qe[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=Ue.length;n--;)if((e=Ue[n]+t)in We)return e}(e)||e)}var Xe=/^(none|table(?!-c[ea]).+)/,Ke={position:"absolute",visibility:"hidden",display:"block"},Ze={letterSpacing:"0",fontWeight:"400"};function Qe(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Je(e,t,n,r,i,o){var a="width"===t?1:0,s=0,l=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=w.css(e,n+ne[a],!0,i)),r?("content"===n&&(l-=w.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(l-=w.css(e,"border"+ne[a]+"Width",!0,i))):(l+=w.css(e,"padding"+ne[a],!0,i),"padding"!==n?l+=w.css(e,"border"+ne[a]+"Width",!0,i):s+=w.css(e,"border"+ne[a]+"Width",!0,i));return!r&&o>=0&&(l+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-l-s-.5))||0),l}function et(e,t,n){var r=Be(e),i=(!f.boxSizingReliable()||n)&&"border-box"===w.css(e,"boxSizing",!1,r),o=i,a=ze(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Le.test(a)){if(!n)return a;a="auto"}return(!f.boxSizingReliable()&&i||!f.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===w.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===w.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Je(e,t,n||(i?"border":"content"),o,r,a)+"px"}function tt(e,t,n,r,i){return new tt.prototype.init(e,t,n,r,i)}w.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=ze(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=W(t),l=Re.test(t),c=e.style;if(l||(t=Ye(s)),a=w.cssHooks[t]||w.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];"string"==(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||l||(n+=i&&i[3]||(w.cssNumber[s]?"":"px")),f.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=W(t);return Re.test(t)||(t=Ye(s)),(a=w.cssHooks[t]||w.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=ze(e,t,r)),"normal"===i&&t in Ze&&(i=Ze[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),w.each(["height","width"],(function(e,t){w.cssHooks[t]={get:function(e,n,r){if(n)return!Xe.test(w.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?et(e,t,r):je(e,Ke,(function(){return et(e,t,r)}))},set:function(e,n,r){var i,o=Be(e),a=!f.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===w.css(e,"boxSizing",!1,o),l=r?Je(e,t,r,s,o):0;return s&&a&&(l-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-Je(e,t,"border",!1,o)-.5)),l&&(i=te.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=w.css(e,t)),Qe(0,n,l)}}})),w.cssHooks.marginLeft=He(f.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(ze(e,"marginLeft"))||e.getBoundingClientRect().left-je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),w.each({margin:"",padding:"",border:"Width"},(function(e,t){w.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[e+ne[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(w.cssHooks[e+t].set=Qe)})),w.fn.extend({css:function(e,t){return V(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Be(e),i=t.length;a<i;a++)o[t[a]]=w.css(e,t[a],!1,r);return o}return void 0!==n?w.style(e,t,n):w.css(e,t)}),e,t,arguments.length>1)}}),w.Tween=tt,tt.prototype={constructor:tt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||w.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(w.cssNumber[n]?"":"px")},cur:function(){var e=tt.propHooks[this.prop];return e&&e.get?e.get(this):tt.propHooks._default.get(this)},run:function(e){var t,n=tt.propHooks[this.prop];return this.options.duration?this.pos=t=w.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):tt.propHooks._default.set(this),this}},tt.prototype.init.prototype=tt.prototype,tt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=w.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){w.fx.step[e.prop]?w.fx.step[e.prop](e):1!==e.elem.nodeType||!w.cssHooks[e.prop]&&null==e.elem.style[Ye(e.prop)]?e.elem[e.prop]=e.now:w.style(e.elem,e.prop,e.now+e.unit)}}},tt.propHooks.scrollTop=tt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},w.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},w.fx=tt.prototype.init,w.fx.step={};var nt,rt,it=/^(?:toggle|show|hide)$/,ot=/queueHooks$/;function at(){rt&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(at):e.setTimeout(at,w.fx.interval),w.fx.tick())}function st(){return e.setTimeout((function(){nt=void 0})),nt=Date.now()}function lt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ct(e,t,n){for(var r,i=(ut.tweeners[t]||[]).concat(ut.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function ut(e,t,n){var r,i,o=0,a=ut.prefilters.length,s=w.Deferred().always((function(){delete l.elem})),l=function(){if(i)return!1;for(var t=nt||st(),n=Math.max(0,c.startTime+c.duration-t),r=1-(n/c.duration||0),o=0,a=c.tweens.length;o<a;o++)c.tweens[o].run(r);return s.notifyWith(e,[c,r,n]),r<1&&a?n:(a||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:w.extend({},t),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},n),originalProperties:t,originalOptions:n,startTime:nt||st(),duration:n.duration,tweens:[],createTween:function(t,n){var r=w.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),u=c.props;for(function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=W(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=w.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(u,c.opts.specialEasing);o<a;o++)if(r=ut.prefilters[o].call(c,e,u,c.opts))return p(r.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return w.map(u,ct,c),p(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:e,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(ut,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){p(e)?(t=e,e=["*"]):e=e.match(D);for(var n,r=0,i=e.length;r<i;r++)n=e[r],ut.tweeners[n]=ut.tweeners[n]||[],ut.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,l,c,u,h="width"in t||"height"in t,d=this,f={},p=e.style,g=e.nodeType&&ae(e),m=X.get(e,"fxshow");for(r in n.queue||(null==(a=w._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,d.always((function(){d.always((function(){a.unqueued--,w.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],it.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!m||void 0===m[r])continue;g=!0}f[r]=m&&m[r]||w.style(e,r)}if((l=!w.isEmptyObject(t))||!w.isEmptyObject(f))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=m&&m.display)&&(c=X.get(e,"display")),"none"===(u=w.css(e,"display"))&&(c?u=c:(ue([e],!0),c=e.style.display||c,u=w.css(e,"display"),ue([e]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===w.css(e,"float")&&(l||(d.done((function(){p.display=c})),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=X.access(e,"fxshow",{display:c}),o&&(m.hidden=!g),g&&ue([e],!0),d.done((function(){for(r in g||ue([e]),X.remove(e,"fxshow"),f)w.style(e,r,f[r])}))),l=ct(g?m[r]:0,r,d),r in m||(m[r]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(e,t){t?ut.prefilters.unshift(e):ut.prefilters.push(e)}}),w.speed=function(e,t,n){var r=e&&"object"==typeof e?w.extend({},e):{complete:n||!n&&t||p(e)&&e,duration:e,easing:n&&t||t&&!p(t)&&t};return w.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in w.fx.speeds?r.duration=w.fx.speeds[r.duration]:r.duration=w.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){p(r.old)&&r.old.call(this),r.queue&&w.dequeue(this,r.queue)},r},w.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=w.isEmptyObject(e),o=w.speed(t,n,r),a=function(){var t=ut(this,w.extend({},e),o);(i||X.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=w.timers,a=X.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ot.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||w.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=X.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=w.timers,a=r?r.length:0;for(n.finish=!0,w.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),w.each(["toggle","show","hide"],(function(e,t){var n=w.fn[t];w.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(lt(t,!0),e,r,i)}})),w.each({slideDown:lt("show"),slideUp:lt("hide"),slideToggle:lt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){w.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),w.timers=[],w.fx.tick=function(){var e,t=0,n=w.timers;for(nt=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||w.fx.stop(),nt=void 0},w.fx.timer=function(e){w.timers.push(e),w.fx.start()},w.fx.interval=13,w.fx.start=function(){rt||(rt=!0,at())},w.fx.stop=function(){rt=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,n){return t=w.fx&&w.fx.speeds[t]||t,n=n||"fx",this.queue(n,(function(n,r){var i=e.setTimeout(n,t);r.stop=function(){e.clearTimeout(i)}}))},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",f.checkOn=""!==e.value,f.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",f.radioValue="t"===e.value}();var ht,dt=w.expr.attrHandle;w.fn.extend({attr:function(e,t){return V(this,w.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){w.removeAttr(this,e)}))}}),w.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?w.prop(e,t,n):(1===o&&w.isXMLDoc(e)||(i=w.attrHooks[t.toLowerCase()]||(w.expr.match.bool.test(t)?ht:void 0)),void 0!==n?null===n?void w.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=w.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!f.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(D);if(i&&1===e.nodeType)for(;n=i[r++];)e.removeAttribute(n)}}),ht={set:function(e,t,n){return!1===t?w.removeAttr(e,n):e.setAttribute(n,n),n}},w.each(w.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=dt[t]||w.find.attr;dt[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=dt[a],dt[a]=i,i=null!=n(e,t,r)?a:null,dt[a]=o),i}}));var ft=/^(?:input|select|textarea|button)$/i,pt=/^(?:a|area)$/i;function gt(e){return(e.match(D)||[]).join(" ")}function mt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(D)||[]}w.fn.extend({prop:function(e,t){return V(this,w.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[w.propFix[e]||e]}))}}),w.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&w.isXMLDoc(e)||(t=w.propFix[t]||t,i=w.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=w.find.attr(e,"tabindex");return t?parseInt(t,10):ft.test(e.nodeName)||pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),f.optSelected||(w.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){w.propFix[this.toLowerCase()]=this})),w.fn.extend({addClass:function(e){var t,n,r,i,o,a;return p(e)?this.each((function(t){w(this).addClass(e.call(this,t,mt(this)))})):(t=vt(e)).length?this.each((function(){if(r=mt(this),n=1===this.nodeType&&" "+gt(r)+" "){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=gt(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(e){var t,n,r,i,o,a;return p(e)?this.each((function(t){w(this).removeClass(e.call(this,t,mt(this)))})):arguments.length?(t=vt(e)).length?this.each((function(){if(r=mt(this),n=1===this.nodeType&&" "+gt(r)+" "){for(o=0;o<t.length;o++)for(i=t[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=gt(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return p(e)?this.each((function(n){w(this).toggleClass(e.call(this,n,mt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=vt(e),this.each((function(){if(s)for(o=w(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||((r=mt(this))&&X.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":X.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;for(t=" "+e+" ";n=this[r++];)if(1===n.nodeType&&(" "+gt(mt(n))+" ").indexOf(t)>-1)return!0;return!1}});var yt=/\r/g;w.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=p(e),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?e.call(this,n,w(this).val()):e)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=w.map(i,(function(e){return null==e?"":e+""}))),(t=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=w.valHooks[i.type]||w.valHooks[i.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(yt,""):null==n?"":n:void 0}}),w.extend({valHooks:{option:{get:function(e){var t=w.find.attr(e,"value");return null!=t?t:gt(w.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],l=a?o+1:i.length;for(r=o<0?l:a?o:0;r<l;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=w(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=w.makeArray(t),a=i.length;a--;)((r=i[a]).selected=w.inArray(w.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),w.each(["radio","checkbox"],(function(){w.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=w.inArray(w(e).val(),t)>-1}},f.checkOn||(w.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),f.focusin="onfocusin"in e;var bt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};w.extend(w.event,{trigger:function(t,n,r,i){var o,a,s,l,c,h,d,f,v=[r||m],y=u.call(t,"type")?t.type:t,b=u.call(t,"namespace")?t.namespace.split("."):[];if(a=f=s=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!bt.test(y+w.event.triggered)&&(y.indexOf(".")>-1&&(b=y.split("."),y=b.shift(),b.sort()),c=y.indexOf(":")<0&&"on"+y,(t=t[w.expando]?t:new w.Event(y,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=b.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+b.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:w.makeArray(n,[t]),d=w.event.special[y]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!g(r)){for(l=d.delegateType||y,bt.test(l+y)||(a=a.parentNode);a;a=a.parentNode)v.push(a),s=a;s===(r.ownerDocument||m)&&v.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=v[o++])&&!t.isPropagationStopped();)f=a,t.type=o>1?l:d.bindType||y,(h=(X.get(a,"events")||Object.create(null))[t.type]&&X.get(a,"handle"))&&h.apply(a,n),(h=c&&a[c])&&h.apply&&q(a)&&(t.result=h.apply(a,n),!1===t.result&&t.preventDefault());return t.type=y,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!q(r)||c&&p(r[y])&&!g(r)&&((s=r[c])&&(r[c]=null),w.event.triggered=y,t.isPropagationStopped()&&f.addEventListener(y,xt),r[y](),t.isPropagationStopped()&&f.removeEventListener(y,xt),w.event.triggered=void 0,s&&(r[c]=s)),t.result}},simulate:function(e,t,n){var r=w.extend(new w.Event,n,{type:e,isSimulated:!0});w.event.trigger(r,null,t)}}),w.fn.extend({trigger:function(e,t){return this.each((function(){w.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return w.event.trigger(e,t,n,!0)}}),f.focusin||w.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){w.event.simulate(t,e.target,w.event.fix(e))};w.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t);i||r.addEventListener(e,n,!0),X.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=X.access(r,t)-1;i?X.access(r,t,i):(r.removeEventListener(e,n,!0),X.remove(r,t))}}}));var wt=e.location,_t={guid:Date.now()},Ct=/\?/;w.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e11){}return r=n&&n.getElementsByTagName("parsererror")[0],n&&!r||w.error("Invalid XML: "+(r?w.map(r.childNodes,(function(e){return e.textContent})).join("\n"):t)),n};var $t=/\[\]$/,St=/\r?\n/g,Et=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;function Mt(e,t,n,r){var i;if(Array.isArray(t))w.each(t,(function(t,i){n||$t.test(e)?r(e,i):Mt(e+"["+("object"==typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==b(t))r(e,t);else for(i in t)Mt(e+"["+i+"]",t[i],n,r)}w.param=function(e,t){var n,r=[],i=function(e,t){var n=p(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!w.isPlainObject(e))w.each(e,(function(){i(this.name,this.value)}));else for(n in e)Mt(n,e[n],t,i);return r.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=w.prop(this,"elements");return e?w.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!w(this).is(":disabled")&&At.test(this.nodeName)&&!Et.test(e)&&(this.checked||!fe.test(e))})).map((function(e,t){var n=w(this).val();return null==n?null:Array.isArray(n)?w.map(n,(function(e){return{name:t.name,value:e.replace(St,"\r\n")}})):{name:t.name,value:n.replace(St,"\r\n")}})).get()}});var kt=/%20/g,Tt=/#.*$/,Pt=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)$/gm,Nt=/^(?:GET|HEAD)$/,It=/^\/\//,Dt={},Lt={},Rt="*/".concat("*"),Bt=m.createElement("a");function jt(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(D)||[];if(p(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Ft(e,t,n,r){var i={},o=e===Lt;function a(s){var l;return i[s]=!0,w.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!=typeof c||o||i[c]?o?!(l=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),l}return a(t.dataTypes[0])||!i["*"]&&a("*")}function Gt(e,t){var n,r,i=w.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&w.extend(!0,e,r),e}Bt.href=wt.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Gt(Gt(e,w.ajaxSettings),t):Gt(w.ajaxSettings,e)},ajaxPrefilter:jt(Dt),ajaxTransport:jt(Lt),ajax:function(t,n){"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,i,o,a,s,l,c,u,h,d,f=w.ajaxSetup({},n),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?w(p):w.event,v=w.Deferred(),y=w.Callbacks("once memory"),b=f.statusCode||{},x={},_={},C="canceled",$={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a)for(a={};t=Ot.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=_[e.toLowerCase()]=_[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==c&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)$.always(e[$.status]);else for(t in e)b[t]=[b[t],e[t]];return this},abort:function(e){var t=e||C;return r&&r.abort(t),S(0,t),this}};if(v.promise($),f.url=((t||f.url||wt.href)+"").replace(It,wt.protocol+"//"),f.type=n.method||n.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(D)||[""],null==f.crossDomain){l=m.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=l.protocol+"//"+l.host}catch(e11){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=w.param(f.data,f.traditional)),Ft(Dt,f,n,$),c)return $;for(h in(u=w.event&&f.global)&&0==w.active++&&w.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Nt.test(f.type),i=f.url.replace(Tt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(kt,"+")):(d=f.url.slice(i.length),f.data&&(f.processData||"string"==typeof f.data)&&(i+=(Ct.test(i)?"&":"?")+f.data,delete f.data),!1===f.cache&&(i=i.replace(Pt,"$1"),d=(Ct.test(i)?"&":"?")+"_="+_t.guid+++d),f.url=i+d),f.ifModified&&(w.lastModified[i]&&$.setRequestHeader("If-Modified-Since",w.lastModified[i]),w.etag[i]&&$.setRequestHeader("If-None-Match",w.etag[i])),(f.data&&f.hasContent&&!1!==f.contentType||n.contentType)&&$.setRequestHeader("Content-Type",f.contentType),$.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Rt+"; q=0.01":""):f.accepts["*"]),f.headers)$.setRequestHeader(h,f.headers[h]);if(f.beforeSend&&(!1===f.beforeSend.call(p,$,f)||c))return $.abort();if(C="abort",y.add(f.complete),$.done(f.success),$.fail(f.error),r=Ft(Lt,f,n,$)){if($.readyState=1,u&&g.trigger("ajaxSend",[$,f]),c)return $;f.async&&f.timeout>0&&(s=e.setTimeout((function(){$.abort("timeout")}),f.timeout));try{c=!1,r.send(x,S)}catch(e11){if(c)throw e11;S(-1,e11)}}else S(-1,"No Transport");function S(t,n,a,l){var h,d,m,x,_,C=n;c||(c=!0,s&&e.clearTimeout(s),r=void 0,o=l||"",$.readyState=t>0?4:0,h=t>=200&&t<300||304===t,a&&(x=function(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(f,$,a)),!h&&w.inArray("script",f.dataTypes)>-1&&w.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(e,t,n,r){var i,o,a,s,l,c={},u=e.dataTypes.slice();if(u[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];for(o=u.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=c[l+" "+o]||c["* "+o]))for(i in c)if((s=i.split(" "))[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],u.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e11){return{state:"parsererror",error:a?e11:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}(f,x,$,h),h?(f.ifModified&&((_=$.getResponseHeader("Last-Modified"))&&(w.lastModified[i]=_),(_=$.getResponseHeader("etag"))&&(w.etag[i]=_)),204===t||"HEAD"===f.type?C="nocontent":304===t?C="notmodified":(C=x.state,d=x.data,h=!(m=x.error))):(m=C,!t&&C||(C="error",t<0&&(t=0))),$.status=t,$.statusText=(n||C)+"",h?v.resolveWith(p,[d,C,$]):v.rejectWith(p,[$,C,m]),$.statusCode(b),b=void 0,u&&g.trigger(h?"ajaxSuccess":"ajaxError",[$,f,h?d:m]),y.fireWith(p,[$,C]),u&&(g.trigger("ajaxComplete",[$,f]),--w.active||w.event.trigger("ajaxStop")))}return $},getJSON:function(e,t,n){return w.get(e,t,n,"json")},getScript:function(e,t){return w.get(e,void 0,t,"script")}}),w.each(["get","post"],(function(e,t){w[t]=function(e,n,r,i){return p(n)&&(i=i||r,r=n,n=void 0),w.ajax(w.extend({url:e,type:t,dataType:i,data:n,success:r},w.isPlainObject(e)&&e))}})),w.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),w._evalUrl=function(e,t,n){return w.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){w.globalEval(e,t,n)}})},w.fn.extend({wrapAll:function(e){var t;return this[0]&&(p(e)&&(e=e.call(this[0])),t=w(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return p(e)?this.each((function(t){w(this).wrapInner(e.call(this,t))})):this.each((function(){var t=w(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=p(e);return this.each((function(n){w(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){w(this).replaceWith(this.childNodes)})),this}}),w.expr.pseudos.hidden=function(e){return!w.expr.pseudos.visible(e)},w.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e11){}};var Vt={0:200,1223:204},zt=w.ajaxSettings.xhr();f.cors=!!zt&&"withCredentials"in zt,f.ajax=zt=!!zt,w.ajaxTransport((function(t){var n,r;if(f.cors||zt&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);n=function(e){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Vt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=s.ontimeout=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){n&&r()}))},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e11){if(n)throw e11}},abort:function(){n&&n()}}})),w.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return w.globalEval(e),e}}}),w.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),w.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=w("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),m.head.appendChild(t[0])},abort:function(){n&&n()}}}));var Ht,Ut=[],Wt=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ut.pop()||w.expando+"_"+_t.guid++;return this[e]=!0,e}}),w.ajaxPrefilter("json jsonp",(function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Wt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Wt.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=p(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Wt,"$1"+i):!1!==t.jsonp&&(t.url+=(Ct.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||w.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always((function(){void 0===o?w(e).removeProp(i):e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Ut.push(i)),a&&p(o)&&o(a[0]),a=o=void 0})),"script"})),f.createHTMLDocument=((Ht=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ht.childNodes.length),w.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(f.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),o=!n&&[],(i=M.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&w(o).remove(),w.merge([],i.childNodes)));var r,i,o},w.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=gt(e.slice(s)),e=e.slice(0,s)),p(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&w.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?w("<div>").append(w.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},w.expr.pseudos.animated=function(e){return w.grep(w.timers,(function(t){return e===t.elem})).length},w.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,c=w.css(e,"position"),u=w(e),h={};"static"===c&&(e.style.position="relative"),s=u.offset(),o=w.css(e,"top"),l=w.css(e,"left"),("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1?(a=(r=u.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),p(t)&&(t=t.call(e,n,w.extend({},s))),null!=t.top&&(h.top=t.top-s.top+a),null!=t.left&&(h.left=t.left-s.left+i),"using"in t?t.using.call(e,h):u.css(h)}},w.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){w.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===w.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===w.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=w(e).offset()).top+=w.css(e,"borderTopWidth",!0),i.left+=w.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-w.css(r,"marginTop",!0),left:t.left-i.left-w.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===w.css(e,"position");)e=e.offsetParent;return e||re}))}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;w.fn[e]=function(r){return V(this,(function(e,r,i){var o;if(g(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),w.each(["top","left"],(function(e,t){w.cssHooks[t]=He(f.pixelPosition,(function(e,n){if(n)return n=ze(e,t),Le.test(n)?w(e).position()[t]+"px":n}))})),w.each({Height:"height",Width:"width"},(function(e,t){w.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){w.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return V(this,(function(t,n,i){var o;return g(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?w.css(t,n,s):w.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){w.fn[t]=function(e){return this.on(t,e)}})),w.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){w.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var qt=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;w.proxy=function(e,t){var n,r,o;if("string"==typeof t&&(n=e[t],t=e,e=n),p(e))return r=i.call(arguments,2),o=function(){return e.apply(t||this,r.concat(i.call(arguments)))},o.guid=e.guid=e.guid||w.guid++,o},w.holdReady=function(e){e?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=A,w.isFunction=p,w.isWindow=g,w.camelCase=W,w.type=b,w.now=Date.now,w.isNumeric=function(e){var t=w.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},w.trim=function(e){return null==e?"":(e+"").replace(qt,"$1")};var Yt=e.jQuery,Xt=e.$;return w.noConflict=function(t){return e.$===w&&(e.$=Xt),t&&e.jQuery===w&&(e.jQuery=Yt),w},void 0===t&&(e.jQuery=e.$=w),w},jquery.exports=global2.document?factory(global2,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return factory(e)};const JQuery=jquery.exports;var jquery_mousewheel={exports:{}};
/*!
 * jQuery Mousewheel 3.1.13
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 */jquery_mousewheel.exports=function(e){var t,n,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],i="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],o=Array.prototype.slice;if(e.event.fixHooks)for(var a=r.length;a;)e.event.fixHooks[r[--a]]=e.event.mouseHooks;var s=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],l,!1);else this.onmousewheel=l;e.data(this,"mousewheel-line-height",s.getLineHeight(this)),e.data(this,"mousewheel-page-height",s.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],l,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),r=n["offsetParent"in e.fn?"offsetParent":"parent"]();return r.length||(r=e("body")),parseInt(r.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function l(r){var i=r||window.event,a=o.call(arguments,1),l=0,h=0,d=0,f=0,p=0,g=0;if((r=e.event.fix(i)).type="mousewheel","detail"in i&&(d=-1*i.detail),"wheelDelta"in i&&(d=i.wheelDelta),"wheelDeltaY"in i&&(d=i.wheelDeltaY),"wheelDeltaX"in i&&(h=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(h=-1*d,d=0),l=0===d?h:d,"deltaY"in i&&(l=d=-1*i.deltaY),"deltaX"in i&&(h=i.deltaX,0===d&&(l=-1*h)),0!==d||0!==h){if(1===i.deltaMode){var m=e.data(this,"mousewheel-line-height");l*=m,d*=m,h*=m}else if(2===i.deltaMode){var v=e.data(this,"mousewheel-page-height");l*=v,d*=v,h*=v}if(f=Math.max(Math.abs(d),Math.abs(h)),(!n||f<n)&&(n=f,u(i,f)&&(n/=40)),u(i,f)&&(l/=40,h/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/n),h=Math[h>=1?"floor":"ceil"](h/n),d=Math[d>=1?"floor":"ceil"](d/n),s.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();p=r.clientX-y.left,g=r.clientY-y.top}return r.deltaX=h,r.deltaY=d,r.deltaFactor=n,r.offsetX=p,r.offsetY=g,r.deltaMode=0,a.unshift(r,l,h,d),t&&clearTimeout(t),t=setTimeout(c,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function c(){n=null}function u(e,t){return s.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})};let _IS_MAC=!1,_IS_IOS=!1,_IS_WINDOWS=!1,_IS_IE=!1,_IS_IE11=!1,_IS_EDGE=!1,_IS_NETSCAPE=!1,_IS_CHROME_APP=!1,_IS_CHROME=!1,_IS_OPERA=!1,_IS_FIREFOX=!1,_IS_SAFARI=!1,_SUPPORT_TOUCH=!1,_SUPPORT_POINTER=!1,_SUPPORT_PASSIVE=!1,_NO_FOREIGNOBJECT=!1;if("object"==typeof navigator){const e=navigator.userAgent;_IS_MAC=e.indexOf("Macintosh")>=0,_IS_IOS=!!e.match(/(iPad|iPhone|iPod)/g),_IS_WINDOWS=e.indexOf("Windows")>=0,_IS_IE=e.indexOf("MSIE")>=0,_IS_IE11=!!e.match(/Trident\/7\./),_IS_EDGE=!!e.match(/Edge\//),_IS_NETSCAPE=e.indexOf("Mozilla/")>=0&&e.indexOf("MSIE")<0&&e.indexOf("Edge/")<0,_IS_CHROME=e.indexOf("Chrome/")>=0&&e.indexOf("Edge/")<0,_IS_OPERA=e.indexOf("Opera/")>=0||e.indexOf("OPR/")>=0,_IS_FIREFOX=e.indexOf("Firefox/")>=0,_IS_SAFARI=e.indexOf("AppleWebKit/")>=0&&e.indexOf("Chrome/")<0&&e.indexOf("Edge/")<0,"object"==typeof document&&(_NO_FOREIGNOBJECT=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||e.indexOf("Opera/")>=0)}if("object"==typeof window&&(_IS_CHROME_APP=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,_SUPPORT_POINTER=null!=window.PointerEvent&&!_IS_MAC),"object"==typeof document){_SUPPORT_TOUCH="ontouchstart"in document.documentElement;try{const e=Object.defineProperty({},"passive",{get(){_SUPPORT_PASSIVE=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",(()=>{}),e)}catch(err){}}var Platform,Platform2;if(Platform2=Platform||(Platform={}),Platform2.IS_MAC=_IS_MAC,Platform2.IS_IOS=_IS_IOS,Platform2.IS_WINDOWS=_IS_WINDOWS,Platform2.IS_IE=_IS_IE,Platform2.IS_IE11=_IS_IE11,Platform2.IS_EDGE=_IS_EDGE,Platform2.IS_NETSCAPE=_IS_NETSCAPE,Platform2.IS_CHROME_APP=_IS_CHROME_APP,Platform2.IS_CHROME=_IS_CHROME,Platform2.IS_OPERA=_IS_OPERA,Platform2.IS_FIREFOX=_IS_FIREFOX,Platform2.IS_SAFARI=_IS_SAFARI,Platform2.SUPPORT_TOUCH=_SUPPORT_TOUCH,Platform2.SUPPORT_POINTER=_SUPPORT_POINTER,Platform2.SUPPORT_PASSIVE=_SUPPORT_PASSIVE,Platform2.NO_FOREIGNOBJECT=_NO_FOREIGNOBJECT,Platform2.SUPPORT_FOREIGNOBJECT=!Platform2.NO_FOREIGNOBJECT,function(e){function t(){const e=window.module;return null!=e&&null!=e.hot&&null!=e.hot.status?e.hot.status():"unkonwn"}e.getHMRStatus=t,e.isApplyingHMR=function(){return"apply"===t()};const n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};e.isEventSupported=function(e){const t=document.createElement(n[e]||"div"),r=`on${e}`;let i=r in t;return i||(t.setAttribute(r,"return;"),i="function"==typeof t[r]),i}}(Platform||(Platform={})),Platform.SUPPORT_PASSIVE){JQuery.event.special.touchstart={setup(e,t,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};const e=JQuery.event.special.mousewheel;if(e){const t=e.setup;e.setup=function(){const e=this.addEventListener;if(!e)return!1;this.addEventListener=(t,n)=>{e.call(this,t,n,{passive:!0})},t.call(this),this.addEventListener=e}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...e){const t=document.createDocumentFragment();e.forEach((e=>{const n=e instanceof Node;t.appendChild(n?e:document.createTextNode(String(e)))})),this.appendChild(t)}})}));var freeGlobal$2="object"==typeof global&&global&&global.Object===Object&&global;const freeGlobal$3=freeGlobal$2;var freeSelf$1="object"==typeof self&&self&&self.Object===Object&&self,root$2=freeGlobal$3||freeSelf$1||Function("return this")();const root$3=root$2;var Symbol$4=root$3.Symbol;const Symbol$5=Symbol$4;var objectProto$p=Object.prototype,hasOwnProperty$o=objectProto$p.hasOwnProperty,nativeObjectToString$3=objectProto$p.toString,symToStringTag$3=Symbol$5?Symbol$5.toStringTag:void 0;function getRawTag$2(e){var t=hasOwnProperty$o.call(e,symToStringTag$3),n=e[symToStringTag$3];try{e[symToStringTag$3]=void 0;var r=!0}catch(e11){}var i=nativeObjectToString$3.call(e);return r&&(t?e[symToStringTag$3]=n:delete e[symToStringTag$3]),i}var objectProto$o=Object.prototype,nativeObjectToString$2=objectProto$o.toString;function objectToString$2(e){return nativeObjectToString$2.call(e)}var nullTag$1="[object Null]",undefinedTag$1="[object Undefined]",symToStringTag$2=Symbol$5?Symbol$5.toStringTag:void 0;function baseGetTag$4(e){return null==e?void 0===e?undefinedTag$1:nullTag$1:symToStringTag$2&&symToStringTag$2 in Object(e)?getRawTag$2(e):objectToString$2(e)}function isObjectLike$5(e){return null!=e&&"object"==typeof e}var symbolTag$3="[object Symbol]";function isSymbol(e){return"symbol"==typeof e||isObjectLike$5(e)&&baseGetTag$4(e)==symbolTag$3}function arrayMap(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var isArray$2=Array.isArray;const isArray$3=isArray$2;var INFINITY$2=1/0,symbolProto$2=Symbol$5?Symbol$5.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(e){if("string"==typeof e)return e;if(isArray$3(e))return arrayMap(e,baseToString)+"";if(isSymbol(e))return symbolToString?symbolToString.call(e):"";var t=e+"";return"0"==t&&1/e==-INFINITY$2?"-0":t}var reWhitespace=/\s/;function trimmedEndIndex(e){for(var t=e.length;t--&&reWhitespace.test(e.charAt(t)););return t}var reTrimStart=/^\s+/;function baseTrim(e){return e?e.slice(0,trimmedEndIndex(e)+1).replace(reTrimStart,""):e}function isObject$1(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(e){if("number"==typeof e)return e;if(isSymbol(e))return NAN;if(isObject$1(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=isObject$1(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=baseTrim(e);var n=reIsBinary.test(e);return n||reIsOctal.test(e)?freeParseInt(e.slice(2),n?2:8):reIsBadHex.test(e)?NAN:+e}function identity$8(e){return e}var asyncTag="[object AsyncFunction]",funcTag$3="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(e){if(!isObject$1(e))return!1;var t=baseGetTag$4(e);return t==funcTag$3||t==genTag$1||t==asyncTag||t==proxyTag}var coreJsData=root$3["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=(uid2=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||""),uid2?"Symbol(src)_1."+uid2:""),uid2;function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto$3=Function.prototype,funcToString$3=funcProto$3.toString;function toSource(e){if(null!=e){try{return funcToString$3.call(e)}catch(e11){}try{return e+""}catch(e11){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$2=Function.prototype,objectProto$n=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$n=objectProto$n.hasOwnProperty,reIsNative=RegExp("^"+funcToString$2.call(hasOwnProperty$n).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject$1(e)||isMasked(e))&&(isFunction$2(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getValue$1(e,t){return null==e?void 0:e[t]}function getNative(e,t){var n=getValue$1(e,t);return baseIsNative(n)?n:void 0}var WeakMap$1=getNative(root$3,"WeakMap");const WeakMap$2=WeakMap$1;var objectCreate=Object.create,baseCreate=function(){function e(){}return function(t){if(!isObject$1(t))return{};if(objectCreate)return objectCreate(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const baseCreate$1=baseCreate;function apply$2(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function noop$3(){}function copyArray(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(e){var t=0,n=0;return function(){var r=nativeNow(),i=HOT_SPAN-(r-n);if(n=r,i>0){if(++t>=HOT_COUNT)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function constant$3(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e11){}}();const defineProperty$1=defineProperty;var baseSetToString=defineProperty$1?function(e,t){return defineProperty$1(e,"toString",{configurable:!0,enumerable:!1,value:constant$3(t),writable:!0})}:identity$8;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function baseFindIndex(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}function baseIsNaN(e){return e!=e}function strictIndexOf(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function baseIndexOf(e,t,n){return t==t?strictIndexOf(e,t,n):baseFindIndex(e,baseIsNaN,n)}function arrayIncludes(e,t){return!!(null==e?0:e.length)&&baseIndexOf(e,t,0)>-1}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var n=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER$2:t)&&("number"==n||"symbol"!=n&&reIsUint.test(e))&&e>-1&&e%1==0&&e<t}function baseAssignValue(e,t,n){"__proto__"==t&&defineProperty$1?defineProperty$1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function eq(e,t){return e===t||e!=e&&t!=t}var objectProto$m=Object.prototype,hasOwnProperty$m=objectProto$m.hasOwnProperty;function assignValue(e,t,n){var r=e[t];hasOwnProperty$m.call(e,t)&&eq(r,n)&&(void 0!==n||t in e)||baseAssignValue(e,t,n)}function copyObject(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?baseAssignValue(n,s,l):assignValue(n,s,l)}return n}var nativeMax$1=Math.max;function overRest(e,t,n){return t=nativeMax$1(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=nativeMax$1(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),apply$2(e,this,s)}}function baseRest(e,t){return setToString$1(overRest(e,t,identity$8),e+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength$2(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER$1}function isArrayLike$1(e){return null!=e&&isLength$2(e.length)&&!isFunction$2(e)}function isIterateeCall(e,t,n){if(!isObject$1(n))return!1;var r=typeof t;return!!("number"==r?isArrayLike$1(n)&&isIndex(t,n.length):"string"==r&&t in n)&&eq(n[t],e)}function createAssigner(e){return baseRest((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&isIterateeCall(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}var objectProto$l=Object.prototype;function isPrototype$1(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$l)}function baseTimes(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var argsTag$4="[object Arguments]";function baseIsArguments(e){return isObjectLike$5(e)&&baseGetTag$4(e)==argsTag$4}var objectProto$k=Object.prototype,hasOwnProperty$l=objectProto$k.hasOwnProperty,propertyIsEnumerable$1=objectProto$k.propertyIsEnumerable,isArguments$1=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike$5(e)&&hasOwnProperty$l.call(e,"callee")&&!propertyIsEnumerable$1.call(e,"callee")};const isArguments$2=isArguments$1;function stubFalse(){return!1}var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$3.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$3="[object Arguments]",arrayTag$3="[object Array]",boolTag$4="[object Boolean]",dateTag$4="[object Date]",errorTag$4="[object Error]",funcTag$2="[object Function]",mapTag$7="[object Map]",numberTag$6="[object Number]",objectTag$6="[object Object]",regexpTag$4="[object RegExp]",setTag$7="[object Set]",stringTag$4="[object String]",weakMapTag$3="[object WeakMap]",arrayBufferTag$4="[object ArrayBuffer]",dataViewTag$5="[object DataView]",float32Tag$3="[object Float32Array]",float64Tag$3="[object Float64Array]",int8Tag$3="[object Int8Array]",int16Tag$3="[object Int16Array]",int32Tag$3="[object Int32Array]",uint8Tag$3="[object Uint8Array]",uint8ClampedTag$3="[object Uint8ClampedArray]",uint16Tag$3="[object Uint16Array]",uint32Tag$3="[object Uint32Array]",typedArrayTags$1={};function baseIsTypedArray$2(e){return isObjectLike$5(e)&&isLength$2(e.length)&&!!typedArrayTags$1[baseGetTag$4(e)]}function baseUnary$2(e){return function(t){return e(t)}}typedArrayTags$1[float32Tag$3]=typedArrayTags$1[float64Tag$3]=typedArrayTags$1[int8Tag$3]=typedArrayTags$1[int16Tag$3]=typedArrayTags$1[int32Tag$3]=typedArrayTags$1[uint8Tag$3]=typedArrayTags$1[uint8ClampedTag$3]=typedArrayTags$1[uint16Tag$3]=typedArrayTags$1[uint32Tag$3]=!0,typedArrayTags$1[argsTag$3]=typedArrayTags$1[arrayTag$3]=typedArrayTags$1[arrayBufferTag$4]=typedArrayTags$1[boolTag$4]=typedArrayTags$1[dataViewTag$5]=typedArrayTags$1[dateTag$4]=typedArrayTags$1[errorTag$4]=typedArrayTags$1[funcTag$2]=typedArrayTags$1[mapTag$7]=typedArrayTags$1[numberTag$6]=typedArrayTags$1[objectTag$6]=typedArrayTags$1[regexpTag$4]=typedArrayTags$1[setTag$7]=typedArrayTags$1[stringTag$4]=typedArrayTags$1[weakMapTag$3]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$3.process,nodeUtil$1=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e11){}}();const nodeUtil$2=nodeUtil$1;var nodeIsTypedArray$1=nodeUtil$2&&nodeUtil$2.isTypedArray,isTypedArray$1=nodeIsTypedArray$1?baseUnary$2(nodeIsTypedArray$1):baseIsTypedArray$2;const isTypedArray$2=isTypedArray$1;var objectProto$j=Object.prototype,hasOwnProperty$k=objectProto$j.hasOwnProperty;function arrayLikeKeys(e,t){var n=isArray$3(e),r=!n&&isArguments$2(e),i=!n&&!r&&isBuffer$1(e),o=!n&&!r&&!i&&isTypedArray$2(e),a=n||r||i||o,s=a?baseTimes(e.length,String):[],l=s.length;for(var c in e)!t&&!hasOwnProperty$k.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||isIndex(c,l))||s.push(c);return s}function overArg$2(e,t){return function(n){return e(t(n))}}var nativeKeys=overArg$2(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$i=Object.prototype,hasOwnProperty$j=objectProto$i.hasOwnProperty;function baseKeys(e){if(!isPrototype$1(e))return nativeKeys$1(e);var t=[];for(var n in Object(e))hasOwnProperty$j.call(e,n)&&"constructor"!=n&&t.push(n);return t}function keys$1(e){return isArrayLike$1(e)?arrayLikeKeys(e):baseKeys(e)}function nativeKeysIn(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var objectProto$h=Object.prototype,hasOwnProperty$i=objectProto$h.hasOwnProperty;function baseKeysIn(e){if(!isObject$1(e))return nativeKeysIn(e);var t=isPrototype$1(e),n=[];for(var r in e)("constructor"!=r||!t&&hasOwnProperty$i.call(e,r))&&n.push(r);return n}function keysIn(e){return isArrayLike$1(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var assignInWith=createAssigner((function(e,t,n,r){copyObject(t,keysIn(t),e,r)}));const extendWith=assignInWith;var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(e,t){if(isArray$3(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!isSymbol(e))||(reIsPlainProp.test(e)||!reIsDeepProp.test(e)||null!=t&&e in Object(t))}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$g=Object.prototype,hasOwnProperty$h=objectProto$g.hasOwnProperty;function hashGet(e){var t=this.__data__;if(nativeCreate$1){var n=t[e];return n===HASH_UNDEFINED$2?void 0:n}return hasOwnProperty$h.call(t,e)?t[e]:void 0}var objectProto$f=Object.prototype,hasOwnProperty$g=objectProto$f.hasOwnProperty;function hashHas(e){var t=this.__data__;return nativeCreate$1?void 0!==t[e]:hasOwnProperty$g.call(t,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nativeCreate$1&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,t){for(var n=e.length;n--;)if(eq(e[n][0],t))return n;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice$2=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,n=assocIndexOf(t,e);return!(n<0)&&(n==t.length-1?t.pop():splice$2.call(t,n,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,n=assocIndexOf(t,e);return n<0?void 0:t[n][1]}function listCacheHas(e){return assocIndexOf(this.__data__,e)>-1}function listCacheSet(e,t){var n=this.__data__,r=assocIndexOf(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function ListCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$1=getNative(root$3,"Map");const Map$2=Map$1;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var n=e.__data__;return isKeyable(t)?n["string"==typeof t?"string":"hash"]:n.map}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var n=getMapData(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function MapCache(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize$1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(FUNC_ERROR_TEXT$2);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(memoize$1.Cache||MapCache),n}memoize$1.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(e){var t=memoize$1(e,(function(e){return n.size===MAX_MEMOIZE_SIZE&&n.clear(),e})),n=t.cache;return t}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rePropName,(function(e,n,r,i){t.push(r?i.replace(reEscapeChar,"$1"):n||e)})),t}));const stringToPath$1=stringToPath;function toString$4(e){return null==e?"":baseToString(e)}function castPath(e,t){return isArray$3(e)?e:isKey(e,t)?[e]:stringToPath$1(toString$4(e))}var INFINITY$1=1/0;function toKey(e){if("string"==typeof e||isSymbol(e))return e;var t=e+"";return"0"==t&&1/e==-INFINITY$1?"-0":t}function baseGet(e,t){for(var n=0,r=(t=castPath(t,e)).length;null!=e&&n<r;)e=e[toKey(t[n++])];return n&&n==r?e:void 0}function get$2(e,t,n){var r=null==e?void 0:baseGet(e,t);return void 0===r?n:r}function arrayPush(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var spreadableSymbol=Symbol$5?Symbol$5.isConcatSpreadable:void 0;function isFlattenable(e){return isArray$3(e)||isArguments$2(e)||!!(spreadableSymbol&&e&&e[spreadableSymbol])}function baseFlatten(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=isFlattenable),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?baseFlatten(s,t-1,n,r,i):arrayPush(i,s):r||(i[i.length]=s)}return i}function flatten$1(e){return(null==e?0:e.length)?baseFlatten(e,1):[]}function flatRest(e){return setToString$1(overRest(e,void 0,flatten$1),e+"")}var getPrototype$2=overArg$2(Object.getPrototypeOf,Object);const getPrototype$3=getPrototype$2;var objectTag$5="[object Object]",funcProto$1=Function.prototype,objectProto$e=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$f=objectProto$e.hasOwnProperty,objectCtorString$1=funcToString$1.call(Object);function isPlainObject$2(e){if(!isObjectLike$5(e)||baseGetTag$4(e)!=objectTag$5)return!1;var t=getPrototype$3(e);if(null===t)return!0;var n=hasOwnProperty$f.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&funcToString$1.call(n)==objectCtorString$1}var domExcTag="[object DOMException]",errorTag$3="[object Error]";function isError$1(e){if(!isObjectLike$5(e))return!1;var t=baseGetTag$4(e);return t==errorTag$3||t==domExcTag||"string"==typeof e.message&&"string"==typeof e.name&&!isPlainObject$2(e)}var attempt=baseRest((function(e,t){try{return apply$2(e,void 0,t)}catch(e11){return isError$1(e11)?e11:new Error(e11)}}));const attempt$1=attempt;function baseSlice(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function castSlice(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:baseSlice(e,t,n)}var rsAstralRange$2="\\ud800-\\udfff",rsComboMarksRange$3="\\u0300-\\u036f",reComboHalfMarksRange$3="\\ufe20-\\ufe2f",rsComboSymbolsRange$3="\\u20d0-\\u20ff",rsComboRange$3=rsComboMarksRange$3+reComboHalfMarksRange$3+rsComboSymbolsRange$3,rsVarRange$2="\\ufe0e\\ufe0f",rsZWJ$2="\\u200d",reHasUnicode=RegExp("["+rsZWJ$2+rsAstralRange$2+rsComboRange$3+rsVarRange$2+"]");function hasUnicode(e){return reHasUnicode.test(e)}function asciiToArray(e){return e.split("")}var rsAstralRange$1="\\ud800-\\udfff",rsComboMarksRange$2="\\u0300-\\u036f",reComboHalfMarksRange$2="\\ufe20-\\ufe2f",rsComboSymbolsRange$2="\\u20d0-\\u20ff",rsComboRange$2=rsComboMarksRange$2+reComboHalfMarksRange$2+rsComboSymbolsRange$2,rsVarRange$1="\\ufe0e\\ufe0f",rsAstral="["+rsAstralRange$1+"]",rsCombo$2="["+rsComboRange$2+"]",rsFitz$1="\\ud83c[\\udffb-\\udfff]",rsModifier$1="(?:"+rsCombo$2+"|"+rsFitz$1+")",rsNonAstral$1="[^"+rsAstralRange$1+"]",rsRegional$1="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair$1="[\\ud800-\\udbff][\\udc00-\\udfff]",rsZWJ$1="\\u200d",reOptMod$1=rsModifier$1+"?",rsOptVar$1="["+rsVarRange$1+"]?",rsOptJoin$1="(?:"+rsZWJ$1+"(?:"+[rsNonAstral$1,rsRegional$1,rsSurrPair$1].join("|")+")"+rsOptVar$1+reOptMod$1+")*",rsSeq$1=rsOptVar$1+reOptMod$1+rsOptJoin$1,rsSymbol="(?:"+[rsNonAstral$1+rsCombo$2+"?",rsCombo$2,rsRegional$1,rsSurrPair$1,rsAstral].join("|")+")",reUnicode=RegExp(rsFitz$1+"(?="+rsFitz$1+")|"+rsSymbol+rsSeq$1,"g");function unicodeToArray(e){return e.match(reUnicode)||[]}function stringToArray(e){return hasUnicode(e)?unicodeToArray(e):asciiToArray(e)}function createCaseFirst(e){return function(t){var n=hasUnicode(t=toString$4(t))?stringToArray(t):void 0,r=n?n[0]:t.charAt(0),i=n?castSlice(n,1).join(""):t.slice(1);return r[e]()+i}}var upperFirst$1=createCaseFirst("toUpperCase");const upperFirst$2=upperFirst$1;function capitalize(e){return upperFirst$2(toString$4(e).toLowerCase())}function arrayReduce(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function basePropertyOf(e){return function(t){return null==e?void 0:e[t]}}var deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},deburrLetter=basePropertyOf(deburredLetters);const deburrLetter$1=deburrLetter;var reLatin=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rsComboMarksRange$1="\\u0300-\\u036f",reComboHalfMarksRange$1="\\ufe20-\\ufe2f",rsComboSymbolsRange$1="\\u20d0-\\u20ff",rsComboRange$1=rsComboMarksRange$1+reComboHalfMarksRange$1+rsComboSymbolsRange$1,rsCombo$1="["+rsComboRange$1+"]",reComboMark=RegExp(rsCombo$1,"g");function deburr(e){return(e=toString$4(e))&&e.replace(reLatin,deburrLetter$1).replace(reComboMark,"")}var reAsciiWord=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function asciiWords(e){return e.match(reAsciiWord)||[]}var reHasUnicodeWord=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function hasUnicodeWord(e){return reHasUnicodeWord.test(e)}var rsAstralRange="\\ud800-\\udfff",rsComboMarksRange="\\u0300-\\u036f",reComboHalfMarksRange="\\ufe20-\\ufe2f",rsComboSymbolsRange="\\u20d0-\\u20ff",rsComboRange=rsComboMarksRange+reComboHalfMarksRange+rsComboSymbolsRange,rsDingbatRange="\\u2700-\\u27bf",rsLowerRange="a-z\\xdf-\\xf6\\xf8-\\xff",rsMathOpRange="\\xac\\xb1\\xd7\\xf7",rsNonCharRange="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",rsPunctuationRange="\\u2000-\\u206f",rsSpaceRange=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",rsUpperRange="A-Z\\xc0-\\xd6\\xd8-\\xde",rsVarRange="\\ufe0e\\ufe0f",rsBreakRange=rsMathOpRange+rsNonCharRange+rsPunctuationRange+rsSpaceRange,rsApos$1="[']",rsBreak="["+rsBreakRange+"]",rsCombo="["+rsComboRange+"]",rsDigits="\\d+",rsDingbat="["+rsDingbatRange+"]",rsLower="["+rsLowerRange+"]",rsMisc="[^"+rsAstralRange+rsBreakRange+rsDigits+rsDingbatRange+rsLowerRange+rsUpperRange+"]",rsFitz="\\ud83c[\\udffb-\\udfff]",rsModifier="(?:"+rsCombo+"|"+rsFitz+")",rsNonAstral="[^"+rsAstralRange+"]",rsRegional="(?:\\ud83c[\\udde6-\\uddff]){2}",rsSurrPair="[\\ud800-\\udbff][\\udc00-\\udfff]",rsUpper="["+rsUpperRange+"]",rsZWJ="\\u200d",rsMiscLower="(?:"+rsLower+"|"+rsMisc+")",rsMiscUpper="(?:"+rsUpper+"|"+rsMisc+")",rsOptContrLower="(?:"+rsApos$1+"(?:d|ll|m|re|s|t|ve))?",rsOptContrUpper="(?:"+rsApos$1+"(?:D|LL|M|RE|S|T|VE))?",reOptMod=rsModifier+"?",rsOptVar="["+rsVarRange+"]?",rsOptJoin="(?:"+rsZWJ+"(?:"+[rsNonAstral,rsRegional,rsSurrPair].join("|")+")"+rsOptVar+reOptMod+")*",rsOrdLower="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",rsOrdUpper="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",rsSeq=rsOptVar+reOptMod+rsOptJoin,rsEmoji="(?:"+[rsDingbat,rsRegional,rsSurrPair].join("|")+")"+rsSeq,reUnicodeWord=RegExp([rsUpper+"?"+rsLower+"+"+rsOptContrLower+"(?="+[rsBreak,rsUpper,"$"].join("|")+")",rsMiscUpper+"+"+rsOptContrUpper+"(?="+[rsBreak,rsUpper+rsMiscLower,"$"].join("|")+")",rsUpper+"?"+rsMiscLower+"+"+rsOptContrLower,rsUpper+"+"+rsOptContrUpper,rsOrdUpper,rsOrdLower,rsDigits,rsEmoji].join("|"),"g");function unicodeWords(e){return e.match(reUnicodeWord)||[]}function words(e,t,n){return e=toString$4(e),void 0===(t=n?void 0:t)?hasUnicodeWord(e)?unicodeWords(e):asciiWords(e):e.match(t)||[]}var rsApos="[']",reApos=RegExp(rsApos,"g");function createCompounder(e){return function(t){return arrayReduce(words(deburr(t).replace(reApos,"")),e,"")}}var camelCase=createCompounder((function(e,t,n){return t=t.toLowerCase(),e+(n?capitalize(t):t)}));const camelCase$1=camelCase;function baseClamp(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}function clamp$3(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=toNumber(n))==n?n:0),void 0!==t&&(t=(t=toNumber(t))==t?t:0),baseClamp(toNumber(e),t,n)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE$2=200;function stackSet(e,t){var n=this.__data__;if(n instanceof ListCache){var r=n.__data__;if(!Map$2||r.length<LARGE_ARRAY_SIZE$2-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new MapCache(r)}return n.set(e,t),this.size=n.size,this}function Stack$1(e){var t=this.__data__=new ListCache(e);this.size=t.size}function baseAssign(e,t){return e&&copyObject(t,keys$1(t),e)}function baseAssignIn(e,t){return e&&copyObject(t,keysIn(t),e)}Stack$1.prototype.clear=stackClear,Stack$1.prototype.delete=stackDelete,Stack$1.prototype.get=stackGet,Stack$1.prototype.has=stackHas,Stack$1.prototype.set=stackSet;var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$3.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(e,t){if(t)return e.slice();var n=e.length,r=allocUnsafe?allocUnsafe(n):new e.constructor(n);return e.copy(r),r}function arrayFilter(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function stubArray(){return[]}var objectProto$d=Object.prototype,propertyIsEnumerable=objectProto$d.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(e){return null==e?[]:(e=Object(e),arrayFilter(nativeGetSymbols$1(e),(function(t){return propertyIsEnumerable.call(e,t)})))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(e,t){return copyObject(e,getSymbols$1(e),t)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(e){for(var t=[];e;)arrayPush(t,getSymbols$1(e)),e=getPrototype$3(e);return t}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(e,t){return copyObject(e,getSymbolsIn$1(e),t)}function baseGetAllKeys(e,t,n){var r=t(e);return isArray$3(e)?r:arrayPush(r,n(e))}function getAllKeys(e){return baseGetAllKeys(e,keys$1,getSymbols$1)}function getAllKeysIn(e){return baseGetAllKeys(e,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$3,"DataView");const DataView$2=DataView$1;var Promise$1=getNative(root$3,"Promise");const Promise$2=Promise$1;var Set$1=getNative(root$3,"Set");const Set$2=Set$1;var mapTag$6="[object Map]",objectTag$4="[object Object]",promiseTag="[object Promise]",setTag$6="[object Set]",weakMapTag$2="[object WeakMap]",dataViewTag$4="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$2),promiseCtorString=toSource(Promise$2),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$2),getTag=baseGetTag$4;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$4||Map$2&&getTag(new Map$2)!=mapTag$6||Promise$2&&getTag(Promise$2.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$6||WeakMap$2&&getTag(new WeakMap$2)!=weakMapTag$2)&&(getTag=function(e){var t=baseGetTag$4(e),n=t==objectTag$4?e.constructor:void 0,r=n?toSource(n):"";if(r)switch(r){case dataViewCtorString:return dataViewTag$4;case mapCtorString:return mapTag$6;case promiseCtorString:return promiseTag;case setCtorString:return setTag$6;case weakMapCtorString:return weakMapTag$2}return t});const getTag$1=getTag;var objectProto$c=Object.prototype,hasOwnProperty$e=objectProto$c.hasOwnProperty;function initCloneArray(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&hasOwnProperty$e.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Uint8Array$1=root$3.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array$2(t).set(new Uint8Array$2(e)),t}function cloneDataView(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var reFlags=/\w*$/;function cloneRegExp(e){var t=new e.constructor(e.source,reFlags.exec(e));return t.lastIndex=e.lastIndex,t}var symbolProto$1=Symbol$5?Symbol$5.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(e){return symbolValueOf$1?Object(symbolValueOf$1.call(e)):{}}function cloneTypedArray(e,t){var n=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var boolTag$3="[object Boolean]",dateTag$3="[object Date]",mapTag$5="[object Map]",numberTag$5="[object Number]",regexpTag$3="[object RegExp]",setTag$5="[object Set]",stringTag$3="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$3="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]";function initCloneByTag(e,t,n){var r=e.constructor;switch(t){case arrayBufferTag$3:return cloneArrayBuffer(e);case boolTag$3:case dateTag$3:return new r(+e);case dataViewTag$3:return cloneDataView(e,n);case float32Tag$2:case float64Tag$2:case int8Tag$2:case int16Tag$2:case int32Tag$2:case uint8Tag$2:case uint8ClampedTag$2:case uint16Tag$2:case uint32Tag$2:return cloneTypedArray(e,n);case mapTag$5:return new r;case numberTag$5:case stringTag$3:return new r(e);case regexpTag$3:return cloneRegExp(e);case setTag$5:return new r;case symbolTag$2:return cloneSymbol(e)}}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype$1(e)?{}:baseCreate$1(getPrototype$3(e))}var mapTag$4="[object Map]";function baseIsMap(e){return isObjectLike$5(e)&&getTag$1(e)==mapTag$4}var nodeIsMap=nodeUtil$2&&nodeUtil$2.isMap,isMap=nodeIsMap?baseUnary$2(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$4="[object Set]";function baseIsSet(e){return isObjectLike$5(e)&&getTag$1(e)==setTag$4}var nodeIsSet=nodeUtil$2&&nodeUtil$2.isSet,isSet=nodeIsSet?baseUnary$2(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG$2=4,argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$2="[object Boolean]",dateTag$2="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",mapTag$3="[object Map]",numberTag$4="[object Number]",objectTag$3="[object Object]",regexpTag$2="[object RegExp]",setTag$3="[object Set]",stringTag$2="[object String]",symbolTag$1="[object Symbol]",weakMapTag$1="[object WeakMap]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]",cloneableTags={};function baseClone(e,t,n,r,i,o){var a,s=t&CLONE_DEEP_FLAG$1,l=t&CLONE_FLAT_FLAG,c=t&CLONE_SYMBOLS_FLAG$2;if(n&&(a=i?n(e,r,i,o):n(e)),void 0!==a)return a;if(!isObject$1(e))return e;var u=isArray$3(e);if(u){if(a=initCloneArray(e),!s)return copyArray(e,a)}else{var h=getTag$1(e),d=h==funcTag$1||h==genTag;if(isBuffer$1(e))return cloneBuffer(e,s);if(h==objectTag$3||h==argsTag$2||d&&!i){if(a=l||d?{}:initCloneObject(e),!s)return l?copySymbolsIn(e,baseAssignIn(a,e)):copySymbols(e,baseAssign(a,e))}else{if(!cloneableTags[h])return i?e:{};a=initCloneByTag(e,h,s)}}o||(o=new Stack$1);var f=o.get(e);if(f)return f;o.set(e,a),isSet$1(e)?e.forEach((function(r){a.add(baseClone(r,t,n,r,e,o))})):isMap$1(e)&&e.forEach((function(r,i){a.set(i,baseClone(r,t,n,i,e,o))}));var p=u?void 0:(c?l?getAllKeysIn:getAllKeys:l?keysIn:keys$1)(e);return arrayEach(p||e,(function(r,i){p&&(r=e[i=r]),assignValue(a,i,baseClone(r,t,n,i,e,o))})),a}cloneableTags[argsTag$2]=cloneableTags[arrayTag$2]=cloneableTags[arrayBufferTag$2]=cloneableTags[dataViewTag$2]=cloneableTags[boolTag$2]=cloneableTags[dateTag$2]=cloneableTags[float32Tag$1]=cloneableTags[float64Tag$1]=cloneableTags[int8Tag$1]=cloneableTags[int16Tag$1]=cloneableTags[int32Tag$1]=cloneableTags[mapTag$3]=cloneableTags[numberTag$4]=cloneableTags[objectTag$3]=cloneableTags[regexpTag$2]=cloneableTags[setTag$3]=cloneableTags[stringTag$2]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag$1]=cloneableTags[uint8ClampedTag$1]=cloneableTags[uint16Tag$1]=cloneableTags[uint32Tag$1]=!0,cloneableTags[errorTag$2]=cloneableTags[funcTag$1]=cloneableTags[weakMapTag$1]=!1;var CLONE_SYMBOLS_FLAG$1=4;function clone$a(e){return baseClone(e,CLONE_SYMBOLS_FLAG$1)}var CLONE_DEEP_FLAG=1,CLONE_SYMBOLS_FLAG=4;function cloneDeep(e){return baseClone(e,CLONE_DEEP_FLAG|CLONE_SYMBOLS_FLAG)}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(e){return this.__data__.set(e,HASH_UNDEFINED),this}function setCacheHas(e){return this.__data__.has(e)}function SetCache(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new MapCache;++t<n;)this.add(e[t])}function arraySome(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function cacheHas(e,t){return e.has(t)}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd,SetCache.prototype.has=setCacheHas;var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(e,t,n,r,i,o){var a=n&COMPARE_PARTIAL_FLAG$5,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=n&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],g=t[h];if(r)var m=a?r(g,p,h,t,e,o):r(p,g,h,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!arraySome(t,(function(e,t){if(!cacheHas(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function mapToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function setToArray(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",mapTag$2="[object Map]",numberTag$3="[object Number]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag="[object Symbol]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",symbolProto=Symbol$5?Symbol$5.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(e,t,n,r,i,o,a){switch(n){case dataViewTag$1:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case arrayBufferTag$1:return!(e.byteLength!=t.byteLength||!o(new Uint8Array$2(e),new Uint8Array$2(t)));case boolTag$1:case dateTag$1:case numberTag$3:return eq(+e,+t);case errorTag$1:return e.name==t.name&&e.message==t.message;case regexpTag$1:case stringTag$1:return e==t+"";case mapTag$2:var s=mapToArray;case setTag$2:var l=r&COMPARE_PARTIAL_FLAG$4;if(s||(s=setToArray),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=COMPARE_UNORDERED_FLAG$2,a.set(e,t);var u=equalArrays(s(e),s(t),r,i,o,a);return a.delete(e),u;case symbolTag:if(symbolValueOf)return symbolValueOf.call(e)==symbolValueOf.call(t)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$b=Object.prototype,hasOwnProperty$d=objectProto$b.hasOwnProperty;function equalObjects(e,t,n,r,i,o){var a=n&COMPARE_PARTIAL_FLAG$3,s=getAllKeys(e),l=s.length;if(l!=getAllKeys(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:hasOwnProperty$d.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],m=t[u];if(r)var v=a?r(m,g,u,t,e,o):r(g,m,u,e,t,o);if(!(void 0===v?g===m||i(g,m,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f}var COMPARE_PARTIAL_FLAG$2=1,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",objectTag$2="[object Object]",objectProto$a=Object.prototype,hasOwnProperty$c=objectProto$a.hasOwnProperty;function baseIsEqualDeep(e,t,n,r,i,o){var a=isArray$3(e),s=isArray$3(t),l=a?arrayTag$1:getTag$1(e),c=s?arrayTag$1:getTag$1(t),u=(l=l==argsTag$1?objectTag$2:l)==objectTag$2,h=(c=c==argsTag$1?objectTag$2:c)==objectTag$2,d=l==c;if(d&&isBuffer$1(e)){if(!isBuffer$1(t))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new Stack$1),a||isTypedArray$2(e)?equalArrays(e,t,n,r,i,o):equalByTag(e,t,l,n,r,i,o);if(!(n&COMPARE_PARTIAL_FLAG$2)){var f=u&&hasOwnProperty$c.call(e,"__wrapped__"),p=h&&hasOwnProperty$c.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return o||(o=new Stack$1),i(g,m,n,r,o)}}return!!d&&(o||(o=new Stack$1),equalObjects(e,t,n,r,i,o))}function baseIsEqual(e,t,n,r,i){return e===t||(null==e||null==t||!isObjectLike$5(e)&&!isObjectLike$5(t)?e!=e&&t!=t:baseIsEqualDeep(e,t,n,r,baseIsEqual,i))}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new Stack$1;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?baseIsEqual(u,c,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,r,h):d))return!1}}return!0}function isStrictComparable(e){return e==e&&!isObject$1(e)}function getMatchData(e){for(var t=keys$1(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,isStrictComparable(i)]}return t}function matchesStrictComparable(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}function baseMatches(e){var t=getMatchData(e);return 1==t.length&&t[0][2]?matchesStrictComparable(t[0][0],t[0][1]):function(n){return n===e||baseIsMatch(n,e,t)}}function baseHasIn(e,t){return null!=e&&t in Object(e)}function hasPath(e,t,n){for(var r=-1,i=(t=castPath(t,e)).length,o=!1;++r<i;){var a=toKey(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&isLength$2(i)&&isIndex(a,i)&&(isArray$3(e)||isArguments$2(e))}function hasIn(e,t){return null!=e&&hasPath(e,t,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(e,t){return isKey(e)&&isStrictComparable(t)?matchesStrictComparable(toKey(e),t):function(n){var r=get$2(n,e);return void 0===r&&r===t?hasIn(n,e):baseIsEqual(t,r,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(e){return function(t){return null==t?void 0:t[e]}}function basePropertyDeep(e){return function(t){return baseGet(t,e)}}function property(e){return isKey(e)?baseProperty(toKey(e)):basePropertyDeep(e)}function baseIteratee(e){return"function"==typeof e?e:null==e?identity$8:"object"==typeof e?isArray$3(e)?baseMatchesProperty(e[0],e[1]):baseMatches(e):property(e)}function arrayAggregator(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function createBaseFor(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}var baseFor=createBaseFor();const baseFor$1=baseFor;function baseForOwn(e,t){return e&&baseFor$1(e,t,keys$1)}function createBaseEach(e,t){return function(n,r){if(null==n)return n;if(!isArrayLike$1(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var baseEach=createBaseEach(baseForOwn);const baseEach$1=baseEach;function baseAggregator(e,t,n,r){return baseEach$1(e,(function(e,i,o){t(r,e,n(e),o)})),r}function createAggregator(e,t){return function(n,r){var i=isArray$3(n)?arrayAggregator:baseAggregator,o=t?t():{};return i(n,e,baseIteratee(r),o)}}var now$2=function(){return root$3.Date.now()};const now$3=now$2;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax=Math.max,nativeMin$1=Math.min;function debounce$2(e,t,n){var r,i,o,a,s,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT$1);function f(t){var n=r,o=i;return r=i=void 0,c=t,a=e.apply(o,n)}function p(e){return c=e,s=setTimeout(m,t),u?f(e):a}function g(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=o}function m(){var e=now$3();if(g(e))return v(e);s=setTimeout(m,function(e){var n=t-(e-l);return h?nativeMin$1(n,o-(e-c)):n}(e))}function v(e){return s=void 0,d&&r?f(e):(r=i=void 0,a)}function y(){var e=now$3(),n=g(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return p(l);if(h)return clearTimeout(s),s=setTimeout(m,t),f(l)}return void 0===s&&(s=setTimeout(m,t)),a}return t=toNumber(t)||0,isObject$1(n)&&(u=!!n.leading,o=(h="maxWait"in n)?nativeMax(toNumber(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),y.cancel=function(){void 0!==s&&clearTimeout(s),c=0,r=l=i=s=void 0},y.flush=function(){return void 0===s?a:v(now$3())},y}var objectProto$9=Object.prototype,hasOwnProperty$b=objectProto$9.hasOwnProperty,defaults$3=baseRest((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&isIterateeCall(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=keysIn(o),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||eq(u,objectProto$9[c])&&!hasOwnProperty$b.call(e,c))&&(e[c]=o[c])}return e}));const defaults$4=defaults$3;function assignMergeValue(e,t,n){(void 0!==n&&!eq(e[t],n)||void 0===n&&!(t in e))&&baseAssignValue(e,t,n)}function isArrayLikeObject(e){return isObjectLike$5(e)&&isArrayLike$1(e)}function safeGet(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,t,n,r,i,o,a){var s=safeGet(e,n),l=safeGet(t,n),c=a.get(l);if(c)assignMergeValue(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var d=isArray$3(l),f=!d&&isBuffer$1(l),p=!d&&!f&&isTypedArray$2(l);u=l,d||f||p?isArray$3(s)?u=s:isArrayLikeObject(s)?u=copyArray(s):f?(h=!1,u=cloneBuffer(l,!0)):p?(h=!1,u=cloneTypedArray(l,!0)):u=[]:isPlainObject$2(l)||isArguments$2(l)?(u=s,isArguments$2(s)?u=toPlainObject(s):isObject$1(s)&&!isFunction$2(s)||(u=initCloneObject(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),assignMergeValue(e,n,u)}}function baseMerge(e,t,n,r,i){e!==t&&baseFor$1(t,(function(o,a){if(i||(i=new Stack$1),isObject$1(o))baseMergeDeep(e,t,a,n,baseMerge,r,i);else{var s=r?r(safeGet(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),assignMergeValue(e,a,s)}}),keysIn)}function customDefaultsMerge(e,t,n,r,i,o){return isObject$1(e)&&isObject$1(t)&&(o.set(t,e),baseMerge(e,t,void 0,customDefaultsMerge,o),o.delete(t)),e}var mergeWith=createAssigner((function(e,t,n,r){baseMerge(e,t,n,r)}));const mergeWith$1=mergeWith;var defaultsDeep=baseRest((function(e){return e.push(void 0,customDefaultsMerge),apply$2(mergeWith$1,void 0,e)}));const defaultsDeep$1=defaultsDeep;var FUNC_ERROR_TEXT="Expected a function";function baseDelay(e,t,n){if("function"!=typeof e)throw new TypeError(FUNC_ERROR_TEXT);return setTimeout((function(){e.apply(void 0,n)}),t)}var defer=baseRest((function(e,t){return baseDelay(e,1,t)}));const defer$1=defer;function arrayIncludesWith(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var LARGE_ARRAY_SIZE$1=200;function baseDifference(e,t,n,r){var i=-1,o=arrayIncludes,a=!0,s=e.length,l=[],c=t.length;if(!s)return l;n&&(t=arrayMap(t,baseUnary$2(n))),r?(o=arrayIncludesWith,a=!1):t.length>=LARGE_ARRAY_SIZE$1&&(o=cacheHas,a=!1,t=new SetCache(t));e:for(;++i<s;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,a&&h==h){for(var d=c;d--;)if(t[d]===h)continue e;l.push(u)}else o(t,h,r)||l.push(u)}return l}var difference$1=baseRest((function(e,t){return isArrayLikeObject(e)?baseDifference(e,baseFlatten(t,1,isArrayLikeObject,!0)):[]}));const difference$2=difference$1;var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},escapeHtmlChar=basePropertyOf(htmlEscapes);const escapeHtmlChar$1=escapeHtmlChar;var reUnescapedHtml=/[&<>"']/g,reHasUnescapedHtml=RegExp(reUnescapedHtml.source);function escape$1(e){return(e=toString$4(e))&&reHasUnescapedHtml.test(e)?e.replace(reUnescapedHtml,escapeHtmlChar$1):e}function baseMap(e,t){var n=-1,r=isArrayLike$1(e)?Array(e.length):[];return baseEach$1(e,(function(e,i,o){r[++n]=t(e,i,o)})),r}var objectProto$8=Object.prototype,hasOwnProperty$a=objectProto$8.hasOwnProperty,groupBy$1=createAggregator((function(e,t,n){hasOwnProperty$a.call(e,n)?e[n].push(t):baseAssignValue(e,n,[t])}));const groupBy$2=groupBy$1;function baseGt(e,t){return e>t}var objectProto$7=Object.prototype,hasOwnProperty$9=objectProto$7.hasOwnProperty;function baseHas(e,t){return null!=e&&hasOwnProperty$9.call(e,t)}function has$1(e,t){return null!=e&&hasPath(e,t,baseHas)}function baseValues(e,t){return arrayMap(t,(function(t){return e[t]}))}var mapTag$1="[object Map]",setTag$1="[object Set]",objectProto$6=Object.prototype,hasOwnProperty$8=objectProto$6.hasOwnProperty;function isEmpty$1(e){if(null==e)return!0;if(isArrayLike$1(e)&&(isArray$3(e)||"string"==typeof e||"function"==typeof e.splice||isBuffer$1(e)||isTypedArray$2(e)||isArguments$2(e)))return!e.length;var t=getTag$1(e);if(t==mapTag$1||t==setTag$1)return!e.size;if(isPrototype$1(e))return!baseKeys(e).length;for(var n in e)if(hasOwnProperty$8.call(e,n))return!1;return!0}function isEqual$2(e,t){return baseIsEqual(e,t)}var numberTag$2="[object Number]";function isNumber$2(e){return"number"==typeof e||isObjectLike$5(e)&&baseGetTag$4(e)==numberTag$2}var lowerFirst$1=createCaseFirst("toLowerCase");const lowerFirst$2=lowerFirst$1;function baseExtremum(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!isSymbol(a):n(a,s)))var s=a,l=o}return l}function max$7(e){return e&&e.length?baseExtremum(e,identity$8,baseGt):void 0}var merge=createAssigner((function(e,t,n){baseMerge(e,t,n)}));const merge$1=merge;function baseSet(e,t,n,r){if(!isObject$1(e))return e;for(var i=-1,o=(t=castPath(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=toKey(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=isObject$1(u)?u:isIndex(t[i+1])?[]:{})}assignValue(s,l,c),s=s[l]}return e}function basePickBy(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=baseGet(e,a);n(s,a)&&baseSet(o,castPath(a,e),s)}return o}function baseSortBy(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function compareAscending(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=isSymbol(e),a=void 0!==t,s=null===t,l=t==t,c=isSymbol(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function compareMultiple(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=compareAscending(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}function baseOrderBy(e,t,n){t=t.length?arrayMap(t,(function(e){return isArray$3(e)?function(t){return baseGet(t,1===e.length?e[0]:e)}:e})):[identity$8];var r=-1;return t=arrayMap(t,baseUnary$2(baseIteratee)),baseSortBy(baseMap(e,(function(e,n,i){return{criteria:arrayMap(t,(function(t){return t(e)})),index:++r,value:e}})),(function(e,t){return compareMultiple(e,t,n)}))}function basePick(e,t){return basePickBy(e,t,(function(t,n){return hasIn(e,n)}))}var pick$1=flatRest((function(e,t){return null==e?{}:basePick(e,t)}));const pick$2=pick$1;var sortBy$1=baseRest((function(e,t){if(null==e)return[];var n=t.length;return n>1&&isIterateeCall(e,t[0],t[1])?t=[]:n>2&&isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),baseOrderBy(e,baseFlatten(t,1),[])}));const sortBy$2=sortBy$1;var MAX_ARRAY_LENGTH$1=4294967295,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH$1-1,nativeFloor=Math.floor,nativeMin=Math.min;function baseSortedIndexBy(e,t,n,r){var i=0,o=null==e?0:e.length;if(0===o)return 0;for(var a=(t=n(t))!=t,s=null===t,l=isSymbol(t),c=void 0===t;i<o;){var u=nativeFloor((i+o)/2),h=n(e[u]),d=void 0!==h,f=null===h,p=h==h,g=isSymbol(h);if(a)var m=r||p;else m=c?p&&(r||d):s?p&&d&&(r||!f):l?p&&d&&!f&&(r||!g):!f&&!g&&(r?h<=t:h<t);m?i=u+1:o=u}return nativeMin(o,MAX_ARRAY_INDEX)}var MAX_ARRAY_LENGTH=4294967295,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;function baseSortedIndex(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=HALF_MAX_ARRAY_LENGTH){for(;r<i;){var o=r+i>>>1,a=e[o];null!==a&&!isSymbol(a)&&(n?a<=t:a<t)?r=o+1:i=o}return i}return baseSortedIndexBy(e,t,identity$8,n)}function sortedIndex(e,t){return baseSortedIndex(e,t)}function sortedIndexBy(e,t,n){return baseSortedIndexBy(e,t,baseIteratee(n))}var startCase=createCompounder((function(e,t,n){return e+(n?" ":"")+upperFirst$2(t)}));const startCase$1=startCase;var objectProto$5=Object.prototype,hasOwnProperty$7=objectProto$5.hasOwnProperty;function customDefaultsAssignIn(e,t,n,r){return void 0===e||eq(e,objectProto$5[n])&&!hasOwnProperty$7.call(r,n)?t:e}var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};function escapeStringChar(e){return"\\"+stringEscapes[e]}var reInterpolate=/<%=([\s\S]+?)%>/g;const reInterpolate$1=reInterpolate;var reEscape=/<%-([\s\S]+?)%>/g;const reEscape$1=reEscape;var reEvaluate=/<%([\s\S]+?)%>/g;const reEvaluate$1=reEvaluate;var templateSettings={escape:reEscape$1,evaluate:reEvaluate$1,interpolate:reInterpolate$1,variable:"",imports:{_:{escape:escape$1}}};const templateSettings$1=templateSettings;var INVALID_TEMPL_VAR_ERROR_TEXT="Invalid `variable` option passed into `_.template`",reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g,reForbiddenIdentifierChars=/[()=,{}\[\]\/\s]/,reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,reNoMatch=/($^)/,reUnescapedString=/['\n\r\u2028\u2029\\]/g,objectProto$4=Object.prototype,hasOwnProperty$6=objectProto$4.hasOwnProperty;function template(e,t,n){var r=templateSettings$1.imports._.templateSettings||templateSettings$1;n&&isIterateeCall(e,t,n)&&(t=void 0),e=toString$4(e),t=extendWith({},t,r,customDefaultsAssignIn);var i,o,a=extendWith({},t.imports,r.imports,customDefaultsAssignIn),s=keys$1(a),l=baseValues(a,s),c=0,u=t.interpolate||reNoMatch,h="__p += '",d=RegExp((t.escape||reNoMatch).source+"|"+u.source+"|"+(u===reInterpolate$1?reEsTemplate:reNoMatch).source+"|"+(t.evaluate||reNoMatch).source+"|$","g"),f=hasOwnProperty$6.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(d,(function(t,n,r,a,s,l){return r||(r=a),h+=e.slice(c,l).replace(reUnescapedString,escapeStringChar),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),s&&(o=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t})),h+="';\n";var p=hasOwnProperty$6.call(t,"variable")&&t.variable;if(p){if(reForbiddenIdentifierChars.test(p))throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT)}else h="with (obj) {\n"+h+"\n}\n";h=(o?h.replace(reEmptyStringLeading,""):h).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;"),h="function("+(p||"obj")+") {\n"+(p?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=attempt$1((function(){return Function(s,f+"return "+h).apply(void 0,l)}));if(g.source=h,isError$1(g))throw g;return g}var INFINITY=1/0,createSet=Set$2&&1/setToArray(new Set$2([,-0]))[1]==INFINITY?function(e){return new Set$2(e)}:noop$3;const createSet$1=createSet;var LARGE_ARRAY_SIZE=200;function baseUniq(e,t,n){var r=-1,i=arrayIncludes,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=arrayIncludesWith;else if(o>=LARGE_ARRAY_SIZE){var c=t?null:createSet$1(e);if(c)return setToArray(c);a=!1,i=cacheHas,l=new SetCache}else l=t?[]:s;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s}var union$1=baseRest((function(e){return baseUniq(baseFlatten(e,1,isArrayLikeObject,!0))}));const union$2=union$1;function uniq$1(e){return e&&e.length?baseUniq(e):[]}var idCounter$1=0;function uniqueId$5(e){var t=++idCounter$1;return toString$4(e)+t}const isNumeric=e=>!Array.isArray(e)&&e-parseFloat(e)+1>=0;function applyMixins(e,...t){t.forEach((t=>{Object.getOwnPropertyNames(t.prototype).forEach((n=>{"constructor"!==n&&Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))}))}))}const extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])};function inherit(e,t){function n(){this.constructor=e}extendStatics$1(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}class A$1{}const isNativeClass=/^\s*class\s+/.test(`${A$1}`)||/^\s*class\s*\{/.test(`${class{}}`);function createClass(e,t){let n;return isNativeClass?n=class extends t{}:(n=function(){return t.apply(this,arguments)},inherit(n,t)),Object.defineProperty(n,"name",{value:e}),n}function isMaliciousProp(e){return"__proto__"===e}function getByPath(e,t,n="/"){let r;const i=Array.isArray(t)?t:t.split(n);if(i.length)for(r=e;i.length;){const e=i.shift();if(Object(r)!==r||!e||!(e in r))return;r=r[e]}return r}function setByPath(e,t,n,r="/"){const i=Array.isArray(t)?t:t.split(r),o=i.pop();if(o&&!isMaliciousProp(o)){let t=e;i.forEach((e=>{isMaliciousProp(e)||(null==t[e]&&(t[e]={}),t=t[e])})),t[o]=n}return e}function unsetByPath(e,t,n="/"){const r=Array.isArray(t)?t.slice():t.split(n),i=r.pop();if(i)if(r.length>0){const t=getByPath(e,r);t&&delete t[i]}else delete e[i];return e}const cacheStringFunction$1=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},kebabCase=cacheStringFunction$1((e=>e.replace(/\B([A-Z])/g,"-$1").toLowerCase())),pascalCase=cacheStringFunction$1((e=>startCase$1(camelCase$1(e)).replace(/ /g,"")));function hashcode(e){let t=2166136261,n=!1,r=e;for(let i=0,o=r.length;i<o;i+=1){let e=r.charCodeAt(i);e>127&&!n&&(r=unescape(encodeURIComponent(r)),e=r.charCodeAt(i),n=!0),t^=e,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function uuid(){let e="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let n=0,r=t.length;n<r;n+=1){const r=t[n],i=16*Math.random()|0;e+=("x"===r?i:"y"===r?3&i|8:r).toString(16)}return e}function sanitizeHTML(e,t={}){const n=JQuery.parseHTML(e,null,!1);return n.forEach((e=>{const t=e;if(t){const e=t.attributes;if(e)for(let n=0,r=e.length;n<r;n+=1){const r=e.item(n);if(r){const e=r.value.toLowerCase(),n=r.name.toLowerCase();(n.startsWith("on")||e.startsWith("javascript:")||e.startsWith("data:")||e.startsWith("vbscript:"))&&t.removeAttribute(n)}}}})),t.raw?n:JQuery("<div/>").append(n).html()}function getSpellingSuggestion(e,t,n){const r=Math.min(2,Math.floor(.34*e.length));let i,o=Math.floor(.4*e.length)+1,a=!1;const s=e.toLowerCase();for(const l of t){const t=n(l);if(void 0!==t&&Math.abs(t.length-s.length)<=r){const n=t.toLowerCase();if(n===s){if(t===e)continue;return l}if(a)continue;if(t.length<3)continue;const r=levenshteinWithMax(s,n,o-1);if(void 0===r)continue;r<3?(a=!0,i=l):(o=r,i=l)}}return i}function levenshteinWithMax(e,t,n){let r=new Array(t.length+1),i=new Array(t.length+1);const o=n+1;for(let s=0;s<=t.length;s+=1)r[s]=s;for(let s=1;s<=e.length;s+=1){const a=e.charCodeAt(s-1),l=s>n?s-n:1,c=t.length>n+s?n+s:t.length;i[0]=s;let u=s;for(let e=1;e<l;e+=1)i[e]=o;for(let e=l;e<=c;e+=1){const n=a===t.charCodeAt(e-1)?r[e-1]:Math.min(r[e]+1,i[e-1]+1,r[e-1]+2);i[e]=n,u=Math.min(u,n)}for(let e=c+1;e<=t.length;e+=1)i[e]=o;if(u>n)return;const h=r;r=i,i=h}const a=r[t.length];return a>n?void 0:a}function isPercentage$1(e){return"string"==typeof e&&"%"===e.slice(-1)}function normalizePercentage(e,t){if(null==e)return 0;let n;if("string"==typeof e){if(n=parseFloat(e),isPercentage$1(e)&&(n/=100,Number.isFinite(n)))return n*t}else n=e;return Number.isFinite(n)?n>0&&n<1?n*t:n:0}function parseCssNumeric(e,t){const n=parseFloat(e);if(Number.isNaN(n))return null;let r;if(null==t)r="[A-Za-z]*";else if(Array.isArray(t)){if(0===t.length)return null;r=t.join("|")}else"string"==typeof t&&(r=t);const i=function(t){const n=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${t})$`).exec(e);return n?n[1]:null}(r);return null===i?null:{unit:i,value:n}}function normalizeSides(e){if("object"==typeof e){let t=0,n=0,r=0,i=0;return null!=e.vertical&&Number.isFinite(e.vertical)&&(n=i=e.vertical),null!=e.horizontal&&Number.isFinite(e.horizontal)&&(r=t=e.horizontal),null!=e.left&&Number.isFinite(e.left)&&(t=e.left),null!=e.top&&Number.isFinite(e.top)&&(n=e.top),null!=e.right&&Number.isFinite(e.right)&&(r=e.right),null!=e.bottom&&Number.isFinite(e.bottom)&&(i=e.bottom),{top:n,right:r,bottom:i,left:t}}let t=0;return null!=e&&Number.isFinite(e)&&(t=e),{top:t,right:t,bottom:t,left:t}}function apply$1(e,t,n){if(n)switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2]);case 4:return e.call(t,n[0],n[1],n[2],n[3]);case 5:return e.call(t,n[0],n[1],n[2],n[3],n[4]);case 6:return e.call(t,n[0],n[1],n[2],n[3],n[4],n[5]);default:return e.apply(t,n)}return e.call(t)}function call(e,t,...n){return apply$1(e,t,n)}function isAsyncLike(e){return"object"==typeof e&&e.then&&"function"==typeof e.then}function isAsync(e){return null!=e&&(e instanceof Promise||isAsyncLike(e))}function toAsyncBoolean(...e){const t=[];e.forEach((e=>{Array.isArray(e)?t.push(...e):t.push(e)}));if(t.some((e=>isAsync(e)))){const e=t.map((e=>isAsync(e)?e:Promise.resolve(!1!==e)));return Promise.all(e).then((e=>e.reduce(((e,t)=>!1!==t&&e),!0)))}return t.every((e=>!1!==e))}function toDeferredBoolean(...e){const t=toAsyncBoolean(e);return"boolean"==typeof t?Promise.resolve(t):t}const rclass=/[\t\r\n\f]/g,rnotwhite=/\S+/g,fillSpaces=e=>` ${e} `;function getClass$1(e){return e&&e.getAttribute&&e.getAttribute("class")||""}function hasClass(e,t){if(null==e||null==t)return!1;const n=fillSpaces(getClass$1(e)),r=fillSpaces(t);return 1===e.nodeType&&n.replace(rclass," ").includes(r)}function addClass(e,t){if(null!=e&&null!=t){if("function"==typeof t)return addClass(e,t(getClass$1(e)));if("string"==typeof t&&1===e.nodeType){const n=t.match(rnotwhite)||[],r=fillSpaces(getClass$1(e)).replace(rclass," ");let i=n.reduce(((e,t)=>e.indexOf(fillSpaces(t))<0?`${e}${t} `:e),r);i=i.trim(),r!==i&&e.setAttribute("class",i)}}}function removeClass(e,t){if(null!=e){if("function"==typeof t)return removeClass(e,t(getClass$1(e)));if((!t||"string"==typeof t)&&1===e.nodeType){const n=(t||"").match(rnotwhite)||[],r=fillSpaces(getClass$1(e)).replace(rclass," ");let i=n.reduce(((e,t)=>{const n=fillSpaces(t);return e.indexOf(n)>-1?e.replace(n," "):e}),r);i=t?i.trim():"",r!==i&&e.setAttribute("class",i)}}}function toggleClass(e,t,n){if(null!=e&&null!=t)if(null==n||"string"!=typeof t){if("function"==typeof t)return toggleClass(e,t(getClass$1(e),n),n);if("string"==typeof t){(t.match(rnotwhite)||[]).forEach((t=>{hasClass(e,t)?removeClass(e,t):addClass(e,t)}))}}else n?addClass(e,t):removeClass(e,t)}let idCounter=0;function uniqueId$4(){return idCounter+=1,`v${idCounter}`}function ensureId(e){return null!=e.id&&""!==e.id||(e.id=uniqueId$4()),e.id}function isSVGGraphicsElement(e){return null!=e&&("function"==typeof e.getScreenCTM&&e instanceof SVGElement)}const ns$1={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},svgVersion="1.1";function createElement(e,t=document){return t.createElement(e)}function createElementNS(e,t=ns$1.xhtml,n=document){return n.createElementNS(t,e)}function createSvgElement(e,t=document){return createElementNS(e,ns$1.svg,t)}function createSvgDocument(e){if(e){const t=`<svg xmlns="${ns$1.svg}" xmlns:xlink="${ns$1.xlink}" version="${svgVersion}">${e}</svg>`,{documentElement:n}=parseXML$1(t,{async:!1});return n}const t=document.createElementNS(ns$1.svg,"svg");return t.setAttributeNS(ns$1.xmlns,"xmlns:xlink",ns$1.xlink),t.setAttribute("version",svgVersion),t}function parseXML$1(e,t={}){let n;try{const r=new DOMParser;if(null!=t.async){r.async=t.async}n=r.parseFromString(e,t.mimeType||"text/xml")}catch(r){n=void 0}if(!n||n.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${e}`);return n}function tagName(e,t=!0){const n=e.nodeName;return t?n.toLowerCase():n.toUpperCase()}function index$6(e){let t=0,n=e.previousSibling;for(;n;)1===n.nodeType&&(t+=1),n=n.previousSibling;return t}function find$2(e,t){return e.querySelectorAll(t)}function findOne(e,t){return e.querySelector(t)}function findParentByClass(e,t,n){const r=e.ownerSVGElement;let i=e.parentNode;for(;i&&i!==n&&i!==r;){if(hasClass(i,t))return i;i=i.parentNode}return null}function contains$1(e,t){const n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&16&e.compareDocumentPosition(n))}function remove$1(e){e.parentNode&&e.parentNode.removeChild(e)}function empty(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function append(e,t){(Array.isArray(t)?t:[t]).forEach((t=>{null!=t&&e.appendChild(t)}))}function prepend(e,t){const n=e.firstChild;return n?before(n,t):append(e,t)}function before(e,t){const n=e.parentNode;if(n){(Array.isArray(t)?t:[t]).forEach((t=>{null!=t&&n.insertBefore(t,e)}))}}function appendTo(e,t){null!=t&&t.appendChild(e)}function isHTMLElement(e){try{return e instanceof HTMLElement}catch(e11){return"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument}}function clickable(e){return!(!e||!isHTMLElement(e))&&(!!["a","button"].includes(tagName(e))||("button"===e.getAttribute("role")||"button"===e.getAttribute("type")||clickable(e.parentNode)))}function isInputElement(e){if("input"===tagName(e)){const t=e.getAttribute("type");if(null==t||["text","password","number","email","search","tel","url"].includes(t))return!0}return!1}const CASE_SENSITIVE_ATTR=["viewBox","attributeName","attributeType","repeatCount"];function getAttribute(e,t){return e.getAttribute(t)}function removeAttribute(e,t){const n=qualifyAttr(t);n.ns?e.hasAttributeNS(n.ns,n.local)&&e.removeAttributeNS(n.ns,n.local):e.hasAttribute(t)&&e.removeAttribute(t)}function setAttribute(e,t,n){if(null==n)return removeAttribute(e,t);const r=qualifyAttr(t);r.ns&&"string"==typeof n?e.setAttributeNS(r.ns,t,n):"id"===t?e.id=`${n}`:e.setAttribute(t,`${n}`)}function setAttributes(e,t){Object.keys(t).forEach((n=>{setAttribute(e,n,t[n])}))}function attr(e,t,n){if(null==t){const t=e.attributes,n={};for(let e=0;e<t.length;e+=1)n[t[e].name]=t[e].value;return n}if("string"==typeof t&&void 0===n)return e.getAttribute(t);"object"==typeof t?setAttributes(e,t):setAttribute(e,t,n)}function qualifyAttr(e){if(-1!==e.indexOf(":")){const t=e.split(":");return{ns:ns$1[t[0]],local:t[1]}}return{ns:null,local:e}}function kebablizeAttrs(e){const t={};return Object.keys(e).forEach((n=>{const r=CASE_SENSITIVE_ATTR.includes(n)?n:kebabCase(n);t[r]=e[n]})),t}function styleToObject(e){const t={};return e.split(";").forEach((e=>{const n=e.trim();if(n){const e=n.split("=");e.length&&(t[e[0].trim()]=e[1]?e[1].trim():"")}})),t}function mergeAttrs(e,t){return Object.keys(t).forEach((n=>{if("class"===n)e[n]=e[n]?`${e[n]} ${t[n]}`:t[n];else if("style"===n){const r="object"==typeof e[n],i="object"==typeof t[n];let o,a;r&&i?(o=e[n],a=t[n]):r?(o=e[n],a=styleToObject(t[n])):i?(o=styleToObject(e[n]),a=t[n]):(o=styleToObject(e[n]),a=styleToObject(t[n])),e[n]=mergeAttrs(o,a)}else e[n]=t[n]})),e}function annotate(e,t,n={}){const r=n.offset||0,i=[],o=[];let a,s,l=null;for(let c=0;c<e.length;c+=1){a=o[c]=e[c];for(let i=0,s=t.length;i<s;i+=1){const s=t[i],l=s.start+r,u=s.end+r;c>=l&&c<u&&("string"==typeof a?a=o[c]={t:e[c],attrs:s.attrs}:a.attrs=mergeAttrs(mergeAttrs({},a.attrs),s.attrs),n.includeAnnotationIndices&&(null==a.annotations&&(a.annotations=[]),a.annotations.push(i)))}s=o[c-1],s?isObject$1(a)&&isObject$1(s)?JSON.stringify(a.attrs)===JSON.stringify(s.attrs)?l.t+=a.t:(i.push(l),l=a):isObject$1(a)||isObject$1(s)?(i.push(l),l=a):l=(l||"")+a:l=a}return null!=l&&i.push(l),i}function sanitize(e){return e.replace(/ /g,"")}var JSONExt,DataUri;let millimeterSize;!function(e){function t(e){return null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e}function n(e){return Array.isArray(e)}function r(e,i){if(e===i)return!0;if(t(e)||t(i))return!1;const o=n(e),a=n(i);return o===a&&(o&&a?function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n+=1)if(!r(e[n],t[n]))return!1;return!0}(e,i):function(e,t){if(e===t)return!0;for(const n in e)if(!(n in t))return!1;for(const n in t)if(!(n in e))return!1;for(const n in e)if(!r(e[n],t[n]))return!1;return!0}(e,i))}function i(e){return t(e)?e:n(e)?function(e){const t=new Array(e.length);for(let n=0,r=e.length;n<r;n+=1)t[n]=i(e[n]);return t}(e):function(e){const t={};return Object.keys(e).forEach((n=>{t[n]=i(e[n])})),t}(e)}e.emptyObject=Object.freeze({}),e.emptyArray=Object.freeze([]),e.isPrimitive=t,e.isArray=n,e.isObject=function(e){return!t(e)&&!n(e)},e.deepEqual=r,e.deepCopy=i}(JSONExt||(JSONExt={})),function(e){function t(e){const t="data:";return e.substr(0,t.length)===t}function n(e){let t=e.replace(/\s/g,"");t=decodeURIComponent(t);const n=t.indexOf(","),r=t.slice(0,n),i=r.split(":")[1].split(";")[0],o=t.slice(n+1);let a;a=r.indexOf("base64")>=0?atob(o):unescape(encodeURIComponent(o));const s=new Uint8Array(a.length);for(let l=0;l<a.length;l+=1)s[l]=a.charCodeAt(l);return new Blob([s],{type:i})}function r(e,t){const n=window.navigator.msSaveBlob;if(n)n(e,t);else{const n=window.URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}}function i(e){const t=parseFloat(e);return Number.isNaN(t)?null:t}e.isDataUrl=t,e.imageToDataUri=function(e,n){if(!e||t(e))return void setTimeout((()=>n(null,e)));const r=()=>{n(new Error(`Failed to load image: ${e}`))},i=window.FileReader?e=>{if(200===e.status){const t=new FileReader;t.onload=e=>{const t=e.target.result;n(null,t)},t.onerror=r,t.readAsDataURL(e.response)}else r()}:t=>{if(200===t.status){let r=e.split(".").pop()||"png";"svg"===r&&(r="svg+xml");const i=`data:image/${r};base64,`,o=new Uint8Array(t.response),a=i+btoa((e=>{const t=[];for(let n=0;n<e.length;n+=32768)t.push(String.fromCharCode.apply(null,e.subarray(n,n+32768)));return t.join("")})(o));n(null,a)}else r()},o=new XMLHttpRequest;o.responseType=window.FileReader?"blob":"arraybuffer",o.open("GET",e,!0),o.addEventListener("error",r),o.addEventListener("load",(()=>i(o))),o.send()},e.dataUriToBlob=n,e.downloadBlob=r,e.downloadDataUri=function(e,t){r(n(e),t)},e.svgToDataUrl=function(e,t={}){let n=null;const r=t=>(null==n&&(n=function(e){const t=e.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return t&&t[2]?t[2].replace(/\s+/," ").split(" "):null}(e)),null!=n?i(n[t]):null),o=t=>{const n=e.match(t);return n&&n[2]?i(n[2]):null};let a=t.width;if(null==a&&(a=o(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==a&&(a=r(2)),null==a)throw new Error("Can not parse width from svg string");let s=t.height;if(null==s&&(s=o(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==s&&(s=r(3)),null==s)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(e).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(DataUri||(DataUri={}));const supportedUnits={px:e=>e,mm:e=>millimeterSize*e,cm:e=>millimeterSize*e*10,in:e=>millimeterSize*e*25.4,pt:e=>millimeterSize*(25.4*e/72),pc:e=>millimeterSize*(25.4*e/6)};var Unit;!function(e){function t(e,t,n){const r=JQuery("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:e+(n||""),height:t+(n||"")}).appendTo(document.body),i={width:r.width()||0,height:r.height()||0};return r.remove(),i}e.measure=t,e.toPx=function(e,n){null==millimeterSize&&(millimeterSize=t("1","1","mm").width);const r=n?supportedUnits[n]:null;return r?r(e):e}}(Unit||(Unit={}));const requestAnimationFrame$2=function(){let e;const t=window;if(null!=t&&(e=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame,null!=e&&(e=e.bind(t))),null==e){let t=0;e=e=>{const n=(new Date).getTime(),r=Math.max(0,16-(n-t)),i=setTimeout((()=>{e(n+r)}),r);return t=n+r,i}}return e}(),cancelAnimationFrame$2=function(){let e;const t=window;return null!=t&&(e=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame||t.msCancelAnimationFrame||t.msCancelRequestAnimationFrame||t.oCancelAnimationFrame||t.oCancelRequestAnimationFrame||t.mozCancelAnimationFrame||t.mozCancelRequestAnimationFrame,e&&(e=e.bind(t))),null==e&&(e=clearTimeout),e}();function getComputedStyle$1(e,t){const n=e.ownerDocument&&e.ownerDocument.defaultView&&e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null);return n&&t?n.getPropertyValue(t)||n[t]:n}var Angle,Angle2,Point2,Rectangle2,Line2,Ellipse2,Polyline2,Curve2,LineTo2,Close2,MoveTo2,CurveTo2;function round$5(e,t=0){return Number.isInteger(e)?e:+e.toFixed(t)}function random$5(e,t){let n,r;if(null==t?(r=null==e?1:e,n=0):(r=t,n=null==e?0:e),r<n){const e=n;n=r,r=e}return Math.floor(Math.random()*(r-n+1)+n)}function clamp$2(e,t,n){return Number.isNaN(e)?NaN:Number.isNaN(t)||Number.isNaN(n)?0:t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}function snapToGrid(e,t){return t*Math.round(e/t)}function containsPoint(e,t){return null!=t&&null!=e&&t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height}function squaredLength$5(e,t){const n=e.x-t.x,r=e.y-t.y;return n*n+r*r}!document||document.createElement("div").style,Angle2=Angle||(Angle={}),Angle2.toDeg=function(e){return 180*e/Math.PI%360},Angle2.toRad=function(e,t=!1){return(t?e:e%360)*Math.PI/180},Angle2.normalize=function(e){return e%360+(e<0?360:0)};class Geometry{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class Point extends Geometry{constructor(e,t){super(),this.x=null==e?0:e,this.y=null==t?0:t}get[Symbol.toStringTag](){return Point.toStringTag}round(e=0){return this.x=round$5(this.x,e),this.y=round$5(this.y,e),this}add(e,t){const n=Point.create(e,t);return this.x+=n.x,this.y+=n.y,this}update(e,t){const n=Point.create(e,t);return this.x=n.x,this.y=n.y,this}translate(e,t){const n=Point.create(e,t);return this.x+=n.x,this.y+=n.y,this}rotate(e,t){const n=Point.rotate(this,e,t);return this.x=n.x,this.y=n.y,this}scale(e,t,n=new Point){const r=Point.create(n);return this.x=r.x+e*(this.x-r.x),this.y=r.y+t*(this.y-r.y),this}closest(e){if(1===e.length)return Point.create(e[0]);let t=null,n=1/0;return e.forEach((e=>{const r=this.squaredDistance(e);r<n&&(t=e,n=r)})),t?Point.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=Point.create(e),n=this.x-t.x,r=this.y-t.y;return n*n+r*r}manhattanDistance(e){const t=Point.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new Point){const t=Point.create(e),n=-(t.y-this.y),r=t.x-this.x;let i=Math.atan2(n,r);return i<0&&(i=2*Math.PI+i),180*i/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let n=this.theta(t)-this.theta(e);return n<0&&(n+=360),n}vectorAngle(e){return new Point(0,0).angleBetween(this,e)}toPolar(e){return this.update(Point.toPolar(this,e)),this}changeInAngle(e,t,n=new Point){return this.clone().translate(-e,-t).theta(n)-this.theta(n)}adhereToRect(e){return containsPoint(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=Point.create(e),n=Angle.toRad(this.y),r=Angle.toRad(t.y),i=this.x,o=t.x,a=Angle.toRad(o-i),s=Math.sin(a)*Math.cos(r),l=Math.cos(n)*Math.sin(r)-Math.sin(n)*Math.cos(r)*Math.cos(a);let c=Angle.toDeg(Math.atan2(s,l))-22.5;return c<0&&(c+=360),c=parseInt(c/45,10),["NE","E","SE","S","SW","W","NW","N"][c]}cross(e,t){if(null!=e&&null!=t){const n=Point.create(e),r=Point.create(t);return(r.x-this.x)*(n.y-this.y)-(r.y-this.y)*(n.x-this.x)}return NaN}dot(e){const t=Point.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if("number"==typeof e)return new Point(this.x-e,this.y-t);const n=Point.create(e);return new Point(this.x-n.x,this.y-n.y)}lerp(e,t){const n=Point.create(e);return new Point((1-t)*this.x+t*n.x,(1-t)*this.y+t*n.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const n=Point.create(e),r=Angle.toRad(n.theta(this));return this.translate(Math.cos(r)*t,-Math.sin(r)*t)}reflection(e){return Point.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=snapToGrid(this.x,e),this.y=snapToGrid(this.y,null==t?e:t),this}equals(e){const t=Point.create(e);return null!=t&&t.x===this.x&&t.y===this.y}clone(){return Point.clone(this)}toJSON(){return Point.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}Point2=Point||(Point={}),Point2.toStringTag=`X6.Geometry.${Point2.name}`,Point2.isPoint=function(e){if(null==e)return!1;if(e instanceof Point2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Point2.toStringTag)&&"number"==typeof n.x&&"number"==typeof n.y&&"function"==typeof n.toPolar},function(e){e.isPointLike=function(e){return null!=e&&"object"==typeof e&&"number"==typeof e.x&&"number"==typeof e.y},e.isPointData=function(e){return null!=e&&Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}}(Point||(Point={})),function(e){function t(t){return e.isPoint(t)?new e(t.x,t.y):Array.isArray(t)?new e(t[0],t[1]):new e(t.x,t.y)}function n(e,t){return e===t||null!=e&&null!=t&&(e.x===t.x&&e.y===t.y)}function r(n,r,i,o=new e){const a=t(n),s=t(o),l=a.x-s.x,c=a.y-s.y,u=c*r+l*i;return new e(l*r-c*i+s.x,u+s.y)}e.create=function(n,r){return null==n||"number"==typeof n?new e(n,r):t(n)},e.clone=t,e.toJSON=function(t){return e.isPoint(t)?{x:t.x,y:t.y}:Array.isArray(t)?{x:t[0],y:t[1]}:{x:t.x,y:t.y}},e.fromPolar=function(n,r,i=new e){let o=Math.abs(n*Math.cos(r)),a=Math.abs(n*Math.sin(r));const s=t(i),l=Angle.normalize(Angle.toDeg(r));return l<90?a=-a:l<180?(o=-o,a=-a):l<270&&(o=-o),new e(s.x+o,s.y+a)},e.toPolar=function(n,r=new e){const i=t(n),o=t(r),a=i.x-o.x,s=i.y-o.y;return new e(Math.sqrt(a*a+s*s),Angle.toRad(o.theta(i)))},e.equals=n,e.equalPoints=function(e,t){if(null==e&&null!=t||null!=e&&null==t||null!=e&&null!=t&&e.length!==t.length)return!1;if(null!=e&&null!=t)for(let r=0,i=e.length;r<i;r+=1)if(!n(e[r],t[r]))return!1;return!0},e.random=function(t,n,r,i){return new e(random$5(t,n),random$5(r,i))},e.rotate=function(e,t,n){const i=Angle.toRad(Angle.normalize(-t)),o=Math.sin(i);return r(e,Math.cos(i),o,n)},e.rotateEx=r}(Point||(Point={}));class Rectangle extends Geometry{constructor(e,t,n,r){super(),this.x=null==e?0:e,this.y=null==t?0:t,this.width=null==n?0:n,this.height=null==r?0:r}get[Symbol.toStringTag](){return Rectangle.toStringTag}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new Point(this.x,this.y)}get topLeft(){return new Point(this.x,this.y)}get topCenter(){return new Point(this.x+this.width/2,this.y)}get topRight(){return new Point(this.x+this.width,this.y)}get center(){return new Point(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new Point(this.x,this.y+this.height)}get bottomCenter(){return new Point(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new Point(this.x+this.width,this.y+this.height)}get corner(){return new Point(this.x+this.width,this.y+this.height)}get rightMiddle(){return new Point(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new Point(this.x,this.y+this.height/2)}get topLine(){return new Line$5(this.topLeft,this.topRight)}get rightLine(){return new Line$5(this.topRight,this.bottomRight)}get bottomLine(){return new Line$5(this.bottomLeft,this.bottomRight)}get leftLine(){return new Line$5(this.topLeft,this.bottomLeft)}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=Angle.toRad(e),n=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t)),i=this.width*r+this.height*n,o=this.width*n+this.height*r;return new Rectangle(this.x+(this.width-i)/2,this.y+(this.height-o)/2,i,o)}round(e=0){return this.x=round$5(this.x,e),this.y=round$5(this.y,e),this.width=round$5(this.width,e),this.height=round$5(this.height,e),this}add(e,t,n,r){const i=Rectangle.create(e,t,n,r),o=Math.min(this.x,i.x),a=Math.min(this.y,i.y),s=Math.max(this.x+this.width,i.x+i.width),l=Math.max(this.y+this.height,i.y+i.height);return this.x=o,this.y=a,this.width=s-o,this.height=l-a,this}update(e,t,n,r){const i=Rectangle.create(e,t,n,r);return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this}inflate(e,t){const n=e,r=null!=t?t:e;return this.x-=n,this.y-=r,this.width+=2*n,this.height+=2*r,this}snapToGrid(e,t){const n=this.origin.snapToGrid(e,t),r=this.corner.snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=r.x-n.x,this.height=r.y-n.y,this}translate(e,t){const n=Point.create(e,t);return this.x+=n.x,this.y+=n.y,this}scale(e,t,n=new Point){const r=this.origin.scale(e,t,n);return this.x=r.x,this.y=r.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(0!==e){const n=Angle.toRad(e),r=Math.cos(n),i=Math.sin(n);let o=this.getOrigin(),a=this.getTopRight(),s=this.getBottomRight(),l=this.getBottomLeft();o=Point.rotateEx(o,r,i,t),a=Point.rotateEx(a,r,i,t),s=Point.rotateEx(s,r,i,t),l=Point.rotateEx(l,r,i,t);const c=new Rectangle(o.x,o.y,0,0);c.add(a.x,a.y,0,0),c.add(s.x,s.y,0,0),c.add(l.x,l.y,0,0),this.update(c)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=Rectangle.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const n=Rectangle.clone(e),r=t.x,i=t.y;let o=1/0,a=1/0,s=1/0,l=1/0,c=1/0,u=1/0,h=1/0,d=1/0;const f=n.topLeft;f.x<r&&(o=(this.x-r)/(f.x-r)),f.y<i&&(c=(this.y-i)/(f.y-i));const p=n.bottomRight;p.x>r&&(a=(this.x+this.width-r)/(p.x-r)),p.y>i&&(u=(this.y+this.height-i)/(p.y-i));const g=n.topRight;g.x>r&&(s=(this.x+this.width-r)/(g.x-r)),g.y<i&&(h=(this.y-i)/(g.y-i));const m=n.bottomLeft;return m.x<r&&(l=(this.x-r)/(m.x-r)),m.y>i&&(d=(this.y+this.height-i)/(m.y-i)),{sx:Math.min(o,a,s,l),sy:Math.min(c,u,h,d)}}getMaxUniformScaleToFit(e,t=this.center){const n=this.getMaxScaleToFit(e,t);return Math.min(n.sx,n.sy)}containsPoint(e,t){return containsPoint(this,Point.create(e,t))}containsRect(e,t,n,r){const i=Rectangle.create(e,t,n,r),o=this.x,a=this.y,s=this.width,l=this.height,c=i.x,u=i.y,h=i.width,d=i.height;return 0!==s&&0!==l&&0!==h&&0!==d&&(c>=o&&u>=a&&c+h<=o+s&&u+d<=a+l)}intersectsWithLine(e){const t=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],n=[],r=[];return t.forEach((t=>{const i=e.intersectsWithLine(t);null!==i&&r.indexOf(i.toString())<0&&(n.push(i),r.push(i.toString()))})),n.length>0?n:null}intersectsWithLineFromCenterToPoint(e,t){const n=Point.clone(e),r=this.center;let i=null;null!=t&&0!==t&&n.rotate(t,r);const o=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],a=new Line$5(r,n);for(let s=o.length-1;s>=0;s-=1){const e=o[s].intersectsWithLine(a);if(null!==e){i=e;break}}return i&&null!=t&&0!==t&&i.rotate(-t,r),i}intersectsWithRect(e,t,n,r){const i=Rectangle.create(e,t,n,r);if(!this.isIntersectWithRect(i))return null;const o=this.origin,a=this.corner,s=i.origin,l=i.corner,c=Math.max(o.x,s.x),u=Math.max(o.y,s.y);return new Rectangle(c,u,Math.min(a.x,l.x)-c,Math.min(a.y,l.y)-u)}isIntersectWithRect(e,t,n,r){const i=Rectangle.create(e,t,n,r),o=this.origin,a=this.corner,s=i.origin,l=i.corner;return!(l.x<=o.x||l.y<=o.y||s.x>=a.x||s.y>=a.y)}normalize(){let e=this.x,t=this.y,n=this.width,r=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,r=-this.height),this.x=e,this.y=t,this.width=n,this.height=r,this}union(e){const t=Rectangle.clone(e),n=this.origin,r=this.corner,i=t.origin,o=t.corner,a=Math.min(n.x,i.x),s=Math.min(n.y,i.y),l=Math.max(r.x,o.x),c=Math.max(r.y,o.y);return new Rectangle(a,s,l-a,c-s)}getNearestSideToPoint(e){const t=Point.clone(e),n=t.x-this.x,r=this.x+this.width-t.x,i=t.y-this.y;let o=n,a="left";return r<o&&(o=r,a="right"),i<o&&(o=i,a="top"),this.y+this.height-t.y<o&&(a="bottom"),a}getNearestPointToPoint(e){const t=Point.clone(e);if(this.containsPoint(t)){switch(this.getNearestSideToPoint(t)){case"right":return new Point(this.x+this.width,t.y);case"left":return new Point(this.x,t.y);case"bottom":return new Point(t.x,this.y+this.height);case"top":return new Point(t.x,this.y)}}return t.adhereToRect(this)}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}Rectangle2=Rectangle||(Rectangle={}),Rectangle2.toStringTag=`X6.Geometry.${Rectangle2.name}`,Rectangle2.isRectangle=function(e){if(null==e)return!1;if(e instanceof Rectangle2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Rectangle2.toStringTag)&&"number"==typeof n.x&&"number"==typeof n.y&&"number"==typeof n.width&&"number"==typeof n.height&&"function"==typeof n.inflate&&"function"==typeof n.moveAndExpand},(Rectangle||(Rectangle={})).isRectangleLike=function(e){return null!=e&&"object"==typeof e&&"number"==typeof e.x&&"number"==typeof e.y&&"number"==typeof e.width&&"number"==typeof e.height},function(e){function t(t){return e.isRectangle(t)?t.clone():Array.isArray(t)?new e(t[0],t[1],t[2],t[3]):new e(t.x,t.y,t.width,t.height)}e.create=function(n,r,i,o){return null==n||"number"==typeof n?new e(n,r,i,o):t(n)},e.clone=t,e.fromSize=function(t){return new e(0,0,t.width,t.height)},e.fromPositionAndSize=function(t,n){return new e(t.x,t.y,n.width,n.height)},e.fromEllipse=function(t){return new e(t.x-t.a,t.y-t.b,2*t.a,2*t.b)}}(Rectangle||(Rectangle={}));class Line$5 extends Geometry{constructor(e,t,n,r){super(),"number"==typeof e&&"number"==typeof t?(this.start=new Point(e,t),this.end=new Point(n,r)):(this.start=Point.create(e),this.end=Point.create(t))}get[Symbol.toStringTag](){return Line$5.toStringTag}get center(){return new Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const n=e/t;return this.scale(n,n,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:n,end:r}=t,i=n.clone().rotate(270,r),o=r.clone().rotate(90,n);return n.move(o,e),r.move(i,e),t}vector(){return new Point(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new Point(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),r=Math.max(this.start.y,this.end.y);return new Rectangle(e,t,n-e,r-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new Line$5(this.start,e).vector()),n=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(n)?0:n}pointAt(e){const t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)}pointAtLength(e){const t=this.start,n=this.end;let r=!0;e<0&&(r=!1,e=-e);const i=this.length();if(e>=i)return r?n.clone():t.clone();const o=(r?e:i-e)/i;return this.pointAt(o)}divideAt(e){const t=this.pointAt(e);return[new Line$5(this.start,t),new Line$5(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new Line$5(this.start,t),new Line$5(t,this.end)]}containsPoint(e){const t=this.start,n=this.end;if(0!==t.cross(e,n))return!1;const r=this.length();return!(new Line$5(t,e).length()>r)&&!(new Line$5(e,n).length()>r)}intersect(e,t){const n=e.intersectsWithLine(this,t);return n?Array.isArray(n)?n:[n]:null}intersectsWithLine(e){const t=new Point(this.end.x-this.start.x,this.end.y-this.start.y),n=new Point(e.end.x-e.start.x,e.end.y-e.start.y),r=t.x*n.y-t.y*n.x,i=new Point(e.start.x-this.start.x,e.start.y-this.start.y),o=i.x*n.y-i.y*n.x,a=i.x*t.y-i.y*t.x;if(0===r||o*r<0||a*r<0)return null;if(r>0){if(o>r||a>r)return null}else if(o<r||a<r)return null;return new Point(this.start.x+o*t.x/r,this.start.y+o*t.y/r)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=Point.clone(e),n=this.start,r=this.end;return((r.x-n.x)*(t.y-n.y)-(r.y-n.y)*(t.x-n.x))/this.length()}pointSquaredDistance(e,t){const n=Point.create(e,t);return this.closestPoint(n).squaredDistance(n)}pointDistance(e,t){const n=Point.create(e,t);return this.closestPoint(n).distance(n)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,r=this.pointAt(e),i=new Line$5(t,n);return i.translate(r.x-t.x,r.y-t.y),i}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,r=this.pointAtLength(e),i=new Line$5(t,n);return i.translate(r.x-t.x,r.y-t.y),i}relativeCcw(e,t){const n=Point.create(e,t);let r=n.x-this.start.x,i=n.y-this.start.y;const o=this.end.x-this.start.x,a=this.end.y-this.start.y;let s=r*a-i*o;return 0===s&&(s=r*o+i*a,s>0&&(r-=o,i-=a,s=r*o+i*a,s<0&&(s=0))),s<0?-1:s>0?1:0}equals(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new Line$5(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}Line2=Line$5||(Line$5={}),Line2.toStringTag=`X6.Geometry.${Line2.name}`,Line2.isLine=function(e){if(null==e)return!1;if(e instanceof Line2)return!0;const t=e[Symbol.toStringTag],n=e;try{if((null==t||t===Line2.toStringTag)&&Point.isPoint(n.start)&&Point.isPoint(n.end)&&"function"==typeof n.vector&&"function"==typeof n.bearing&&"function"==typeof n.parallel&&"function"==typeof n.intersect)return!0}catch(e11){return!1}return!1};class Ellipse$4 extends Geometry{constructor(e,t,n,r){super(),this.x=null==e?0:e,this.y=null==t?0:t,this.a=null==n?0:n,this.b=null==r?0:r}get[Symbol.toStringTag](){return Ellipse$4.toStringTag}get center(){return new Point(this.x,this.y)}bbox(){return Rectangle.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const n=e,r=null!=t?t:e;return this.a+=2*n,this.b+=2*r,this}normalizedDistance(e,t){const n=Point.create(e,t),r=n.x-this.x,i=n.y-this.y,o=this.a,a=this.b;return r*r/(o*o)+i*i/(a*a)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],n=this.a,r=this.b,i=e.start,o=e.end,a=e.vector(),s=i.diff(new Point(this.x,this.y)),l=new Point(a.x/(n*n),a.y/(r*r)),c=new Point(s.x/(n*n),s.y/(r*r)),u=a.dot(l),h=a.dot(c),d=h*h-u*(s.dot(c)-1);if(d<0)return null;if(d>0){const e=Math.sqrt(d),n=(-h-e)/u,r=(-h+e)/u;if((n<0||n>1)&&(r<0||r>1))return null;n>=0&&n<=1&&t.push(i.lerp(o,n)),r>=0&&r<=1&&t.push(i.lerp(o,r))}else{const e=-h/u;if(!(e>=0&&e<=1))return null;t.push(i.lerp(o,e))}return t}intersectsWithLineFromCenterToPoint(e,t=0){const n=Point.clone(e);t&&n.rotate(t,this.getCenter());const r=n.x-this.x,i=n.y-this.y;let o;if(0===r)return o=this.bbox().getNearestPointToPoint(n),t?o.rotate(-t,this.getCenter()):o;const a=i/r,s=a*a,l=this.a*this.a,c=this.b*this.b;let u=Math.sqrt(1/(1/l+s/c));u=r<0?-u:u;const h=a*u;return o=new Point(this.x+u,this.y+h),t?o.rotate(-t,this.getCenter()):o}tangentTheta(e){const t=Point.clone(e),n=t.x,r=t.y,i=this.a,o=this.b,a=this.bbox().center,s=a.x,l=a.y,c=n>a.x+i/2,u=n<a.x-i/2;let h,d;return c||u?(d=n>a.x?r-30:r+30,h=i*i/(n-s)-i*i*(r-l)*(d-l)/(o*o*(n-s))+s):(h=r>a.y?n+30:n-30,d=o*o/(r-l)-o*o*(n-s)*(h-s)/(i*i*(r-l))+l),new Point(h,d).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const n=Rectangle.fromEllipse(this);n.rotate(e,t);const r=Ellipse$4.fromRect(n);return this.a=r.a,this.b=r.b,this.x=r.x,this.y=r.y,this}translate(e,t){const n=Point.create(e,t);return this.x+=n.x,this.y+=n.y,this}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new Ellipse$4(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}Ellipse2=Ellipse$4||(Ellipse$4={}),Ellipse2.toStringTag=`X6.Geometry.${Ellipse2.name}`,Ellipse2.isEllipse=function(e){if(null==e)return!1;if(e instanceof Ellipse2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Ellipse2.toStringTag)&&"number"==typeof n.x&&"number"==typeof n.y&&"number"==typeof n.a&&"number"==typeof n.b&&"function"==typeof n.inflate&&"function"==typeof n.normalizedDistance},function(e){function t(t){return e.isEllipse(t)?t.clone():Array.isArray(t)?new e(t[0],t[1],t[2],t[3]):new e(t.x,t.y,t.a,t.b)}e.create=function(n,r,i,o){return null==n||"number"==typeof n?new e(n,r,i,o):t(n)},e.parse=t,e.fromRect=function(t){const n=t.center;return new e(n.x,n.y,t.width/2,t.height/2)}}(Ellipse$4||(Ellipse$4={}));class Polyline$2 extends Geometry{constructor(e){if(super(),null!=e){if("string"==typeof e)return Polyline$2.parse(e);this.points=e.map((e=>Point.create(e)))}else this.points=[]}get[Symbol.toStringTag](){return Polyline$2.toStringTag}get start(){return 0===this.points.length?null:this.points[0]}get end(){return 0===this.points.length?null:this.points[this.points.length-1]}scale(e,t,n=new Point){return this.points.forEach((r=>r.scale(e,t,n))),this}rotate(e,t){return this.points.forEach((n=>n.rotate(e,t))),this}translate(e,t){const n=Point.create(e,t);return this.points.forEach((e=>e.translate(n.x,n.y))),this}bbox(){if(0===this.points.length)return new Rectangle;let e=1/0,t=-1/0,n=1/0,r=-1/0;const i=this.points;for(let o=0,a=i.length;o<a;o+=1){const a=i[o],s=a.x,l=a.y;s<e&&(e=s),s>t&&(t=s),l<n&&(n=l),l>r&&(r=l)}return new Rectangle(e,n,t-e,r-n)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,n=t.length;if(0===n||1===n)return 0;let r=0,i=0,o=1/0;for(let a=0,s=n-1;a<s;a+=1){const n=new Line$5(t[a],t[a+1]),s=n.length(),l=n.closestPointNormalizedLength(e),c=n.pointAt(l).squaredDistance(e);c<o&&(o=c,i=r+l*s),r+=s}return i}closestPointNormalizedLength(e){const t=this.closestPointLength(e);if(0===t)return 0;const n=this.length();return 0===n?0:t/n}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(0===this.points.length)return!1;const t=Point.clone(e),n=t.x,r=t.y,i=this.points,o=i.length;let a=o-1,s=0;for(let l=0;l<o;l+=1){const o=i[a],c=i[l];if(t.equals(o))return!0;const u=new Line$5(o,c);if(u.containsPoint(e))return!0;if(r<=o.y&&r>c.y||r>o.y&&r<=c.y){const t=o.x-n>c.x-n?o.x-n:c.x-n;if(t>=0){const i=new Point(n+t,r),o=new Line$5(e,i);u.intersectsWithLine(o)&&(s+=1)}}a=l}return s%2==1}intersectsWithLine(e){const t=[];for(let n=0,r=this.points.length-1;n<r;n+=1){const r=this.points[n],i=this.points[n+1],o=e.intersectsWithLine(new Line$5(r,i));o&&t.push(o)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1){const t=this.points[e],n=this.points[e+1];if(new Line$5(t,n).isDifferentiable())return!0}return!1}length(){let e=0;for(let t=0,n=this.points.length-1;t<n;t+=1){const n=this.points[t],r=this.points[t+1];e+=n.distance(r)}return e}pointAt(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();if(e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();const r=this.length()*e;return this.pointAtLength(r)}pointAtLength(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();let r=!0;e<0&&(r=!1,e=-e);let i=0;for(let o=0,a=n-1;o<a;o+=1){const n=r?o:a-1-o,s=t[n],l=t[n+1],c=new Line$5(s,l),u=s.distance(l);if(e<=i+u)return c.pointAtLength((r?1:-1)*(e-i));i+=u}return(r?t[n-1]:t[0]).clone()}tangentAt(e){const t=this.points.length;if(0===t||1===t)return null;e<0&&(e=0),e>1&&(e=1);const n=this.length()*e;return this.tangentAtLength(n)}tangentAtLength(e){const t=this.points,n=t.length;if(0===n||1===n)return null;let r,i=!0;e<0&&(i=!1,e=-e);let o=0;for(let a=0,s=n-1;a<s;a+=1){const n=i?a:s-1-a,l=t[n],c=t[n+1],u=new Line$5(l,c),h=l.distance(c);if(u.isDifferentiable()){if(e<=o+h)return u.tangentAtLength((i?1:-1)*(e-o));r=u}o+=h}if(r){const e=i?1:0;return r.tangentAt(e)}return null}simplify(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||0;let r=0;for(;t[r+2];){const e=r+1,i=r+2,o=t[r],a=t[e],s=t[i];new Line$5(o,s).closestPoint(a).distance(a)<=n?t.splice(e,1):r+=1}return this}toHull(){const e=this.points,t=e.length;if(0===t)return new Polyline$2;let n=e[0];for(let h=1;h<t;h+=1)(e[h].y<n.y||e[h].y===n.y&&e[h].x>n.x)&&(n=e[h]);const r=[];for(let h=0;h<t;h+=1){let t=n.theta(e[h]);0===t&&(t=360),r.push([e[h],h,t])}if(r.sort(((e,t)=>{let n=e[2]-t[2];return 0===n&&(n=t[1]-e[1]),n})),r.length>2){const e=r[r.length-1];r.unshift(e)}const i={},o=[],a=e=>`${e[0].toString()}@${e[1]}`;for(;0!==r.length;){const e=r.pop(),t=e[0];if(i[a(e)])continue;let n=!1;for(;!n;)if(o.length<2)o.push(e),n=!0;else{const s=o.pop(),l=s[0],c=o.pop(),u=c[0],h=u.cross(l,t);if(h<0)o.push(c),o.push(s),o.push(e),n=!0;else if(0===h){const e=1e-10,n=l.angleBetween(u,t);Math.abs(n-180)<e||l.equals(t)||u.equals(l)?(i[a(s)]=l,o.push(c)):Math.abs((n+1)%360-1)<e&&(o.push(c),r.push(s))}else i[a(s)]=l,o.push(c)}}let s;o.length>2&&o.pop();let l=-1;for(let h=0,d=o.length;h<d;h+=1){const e=o[h][1];(void 0===s||e<s)&&(s=e,l=h)}let c=[];if(l>0){const e=o.slice(l),t=o.slice(0,l);c=e.concat(t)}else c=o;const u=[];for(let h=0,d=c.length;h<d;h+=1)u.push(c[h][0]);return new Polyline$2(u)}equals(e){return null!=e&&(e.points.length===this.points.length&&e.points.every(((e,t)=>e.equals(this.points[t]))))}clone(){return new Polyline$2(this.points.map((e=>e.clone())))}toJSON(){return this.points.map((e=>e.toJSON()))}serialize(){return this.points.map((e=>`${e.x}, ${e.y}`)).join(" ")}}Polyline2=Polyline$2||(Polyline$2={}),Polyline2.toStringTag=`X6.Geometry.${Polyline2.name}`,Polyline2.isPolyline=function(e){if(null==e)return!1;if(e instanceof Polyline2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Polyline2.toStringTag)&&"function"==typeof n.toHull&&"function"==typeof n.simplify},function(e){e.parse=function(t){const n=t.trim();if(""===n)return new e;const r=[],i=n.split(/\s*,\s*|\s+/);for(let e=0,o=i.length;e<o;e+=2)r.push({x:+i[e],y:+i[e+1]});return new e(r)}}(Polyline$2||(Polyline$2={}));class Curve extends Geometry{constructor(e,t,n,r){super(),this.PRECISION=3,this.start=Point.create(e),this.controlPoint1=Point.create(t),this.controlPoint2=Point.create(n),this.end=Point.create(r)}get[Symbol.toStringTag](){return Curve.toStringTag}bbox(){const e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end,i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,c=n.y,u=r.x,h=r.y,d=[],f=[[],[]];let p,g,m,v,y,b,x,w,_,C,$;for(let P=0;P<2;P+=1)if(0===P?(g=6*i-12*a+6*l,p=-3*i+9*a-9*l+3*u,m=3*a-3*i):(g=6*o-12*s+6*c,p=-3*o+9*s-9*c+3*h,m=3*s-3*o),Math.abs(p)<1e-12){if(Math.abs(g)<1e-12)continue;v=-m/g,v>0&&v<1&&d.push(v)}else x=g*g-4*m*p,w=Math.sqrt(x),x<0||(y=(-g+w)/(2*p),y>0&&y<1&&d.push(y),b=(-g-w)/(2*p),b>0&&b<1&&d.push(b));let S=d.length;const E=S;for(;S;)S-=1,v=d[S],$=1-v,_=$*$*$*i+3*$*$*v*a+3*$*v*v*l+v*v*v*u,f[0][S]=_,C=$*$*$*o+3*$*$*v*s+3*$*v*v*c+v*v*v*h,f[1][S]=C;d[E]=0,d[E+1]=1,f[0][E]=i,f[1][E]=o,f[0][E+1]=u,f[1][E+1]=h,d.length=E+2,f[0].length=E+2,f[1].length=E+2;const A=Math.min.apply(null,f[0]),M=Math.min.apply(null,f[1]),k=Math.max.apply(null,f[0]),T=Math.max.apply(null,f[1]);return new Rectangle(A,M,k-A,T-M)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const n=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,n),n)}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),r=this.closestPointLength(e,n);if(!r)return 0;const i=this.length(n);return 0===i?0:r/i}closestPointT(e,t={}){const n=this.getPrecision(t),r=this.getDivisions(t),i=Math.pow(10,-n);let o=null,a=0,s=0,l=0,c=0,u=0,h=null;const d=r.length;let f=d>0?1/d:0;for(r.forEach(((t,n)=>{const r=t.start.distance(e),i=t.end.distance(e),d=r+i;(null==h||d<h)&&(o=t,a=n*f,s=(n+1)*f,l=r,c=i,h=d,u=t.endpointDistance())}));;){const t=l?Math.abs(l-c)/l:0,n=null!=c?Math.abs(l-c)/c:0;if(t<i||n<i||(!l||l<u*i||(!c||c<u*i)))return l<=c?a:s;const r=o.divide(.5);f/=2;const h=r[0].start.distance(e),d=r[0].end.distance(e),p=h+d,g=r[1].start.distance(e),m=r[1].end.distance(e);p<=g+m?(o=r[0],s-=f,l=h,c=d):(o=r[1],a+=f,l=g,c=m)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const n=this.tAt(e,t);return this.divideAtT(n)}divideAtLength(e,t={}){const n=this.tAtLength(e,t);return this.divideAtT(n)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(e<=0)return[new Curve(t,t,t,t),new Curve(t,n,r,i)];if(e>=1)return[new Curve(t,n,r,i),new Curve(i,i,i,i)];const o=this.getSkeletonPoints(e),a=o.startControlPoint1,s=o.startControlPoint2,l=o.divider,c=o.dividerControlPoint1,u=o.dividerControlPoint2;return[new Curve(t,a,s,l),new Curve(l,c,u,i)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,n=this.controlPoint1,r=this.controlPoint2,i=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:r.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:r.clone(),divider:i.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:i.clone()};const o=new Line$5(t,n).pointAt(e),a=new Line$5(n,r).pointAt(e),s=new Line$5(r,i).pointAt(e),l=new Line$5(o,a).pointAt(e),c=new Line$5(a,s).pointAt(e);return{startControlPoint1:o,startControlPoint2:l,divider:new Line$5(l,c).pointAt(e),dividerControlPoint1:c,dividerControlPoint2:s}}getSubdivisions(e={}){const t=this.getPrecision(e);let n=[new Curve(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return n;let r=this.endpointDistance();const i=Math.pow(10,-t);let o=0;for(;;){o+=1;const e=[];n.forEach((t=>{const n=t.divide(.5);e.push(n[0],n[1])}));const t=e.reduce(((e,t)=>e+t.endpointDistance()),0);if(o>1&&(0!==t?(t-r)/t:0)<i)return e;n=e,r=t}}length(e={}){return this.getDivisions(e).reduce(((e,t)=>e+t.endpointDistance()),0)}lengthAtT(e,t={}){if(e<=0)return 0;const n=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.tAt(e,t);return this.pointAtT(n)}pointAtLength(e,t={}){const n=this.tAtLength(e,t);return this.pointAtT(n)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const n=this.tAt(e,t);return this.tangentAtT(n)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const n=this.tAtLength(e,t);return this.tangentAtT(n)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),n=t.startControlPoint2,r=t.dividerControlPoint1,i=t.divider,o=new Line$5(n,r);return o.translate(i.x-n.x,i.y-n.y),o}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getDivisions(e={}){if(null!=e.subdivisions)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const n=this.getOptions(t),r=this.length(n)*e;return this.tAtLength(r,n)}tAtLength(e,t={}){let n=!0;e<0&&(n=!1,e=-e);const r=this.getPrecision(t),i=this.getDivisions(t),o={precision:r,subdivisions:i};let a,s,l=null,c=0,u=0,h=0;const d=i.length;let f=d>0?1/d:0;for(let m=0;m<d;m+=1){const t=n?m:d-1-m,r=i[m],o=r.endpointDistance();if(e<=h+o){l=r,a=t*f,s=(t+1)*f,c=n?e-h:o+h-e,u=n?o+h-e:e-h;break}h+=o}if(null==l)return n?1:0;const p=this.length(o),g=Math.pow(10,-r);for(;;){let e,t,n;if(e=0!==p?c/p:0,e<g)return a;if(e=0!==p?u/p:0,e<g)return s;const r=l.divide(.5);f/=2;const i=r[0].endpointDistance(),o=r[1].endpointDistance();c<=i?(l=r[0],s-=f,t=c,n=i-t):(l=r[1],a+=f,t=c-i,n=o-t),c=t,u=n}}toPoints(e={}){const t=this.getDivisions(e),n=[t[0].start.clone()];return t.forEach((e=>n.push(e.end.clone()))),n}toPolyline(e={}){return new Polyline$2(this.toPoints(e))}scale(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new Curve(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}Curve2=Curve||(Curve={}),Curve2.toStringTag=`X6.Geometry.${Curve2.name}`,Curve2.isCurve=function(e){if(null==e)return!1;if(e instanceof Curve2)return!0;const t=e[Symbol.toStringTag],n=e;try{if((null==t||t===Curve2.toStringTag)&&Point.isPoint(n.start)&&Point.isPoint(n.controlPoint1)&&Point.isPoint(n.controlPoint2)&&Point.isPoint(n.end)&&"function"==typeof n.toPoints&&"function"==typeof n.toPolyline)return!0}catch(e11){return!1}return!1},function(e){function t(e){const t=e.length,n=[],r=[];let i=2;n[0]=e[0]/i;for(let o=1;o<t;o+=1)r[o]=1/i,i=(o<t-1?4:3.5)-r[o],n[o]=(e[o]-n[o-1])/i;for(let o=1;o<t;o+=1)n[t-o-1]-=r[t-o]*n[t-o];return n}e.throughPoints=function(n){if(null==n||Array.isArray(n)&&n.length<2)throw new Error("At least 2 points are required");const r=function(e){const n=e.map((e=>Point.clone(e))),r=[],i=[],o=n.length-1;if(1===o)return r[0]=new Point((2*n[0].x+n[1].x)/3,(2*n[0].y+n[1].y)/3),i[0]=new Point(2*r[0].x-n[0].x,2*r[0].y-n[0].y),[r,i];const a=[];for(let t=1;t<o-1;t+=1)a[t]=4*n[t].x+2*n[t+1].x;a[0]=n[0].x+2*n[1].x,a[o-1]=(8*n[o-1].x+n[o].x)/2;const s=t(a);for(let t=1;t<o-1;t+=1)a[t]=4*n[t].y+2*n[t+1].y;a[0]=n[0].y+2*n[1].y,a[o-1]=(8*n[o-1].y+n[o].y)/2;const l=t(a);for(let t=0;t<o;t+=1)r.push(new Point(s[t],l[t])),t<o-1?i.push(new Point(2*n[t+1].x-s[t+1],2*n[t+1].y-l[t+1])):i.push(new Point((n[o].x+s[o-1])/2,(n[o].y+l[o-1])/2));return[r,i]}(n),i=[];for(let t=0,o=r[0].length;t<o;t+=1){const o=new Point(r[0][t].x,r[0][t].y),a=new Point(r[1][t].x,r[1][t].y);i.push(new e(n[t],o,a,n[t+1]))}return i}}(Curve||(Curve={}));class Segment extends Geometry{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const n=this.length();return e>=1?n:n*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class LineTo extends Segment{constructor(e,t){super(),Line$5.isLine(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Point.create(e,t).round(2)}get type(){return"L"}get line(){return new Line$5(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new LineTo(t[0]),new LineTo(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new LineTo(t[0]),new LineTo(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new LineTo(this.end)}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}LineTo2=LineTo||(LineTo={}),LineTo2.create=function(...e){const t=e.length,n=e[0];if(Line$5.isLine(n))return new LineTo2(n);if(Point.isPointLike(n))return 1===t?new LineTo2(n):e.map((e=>new LineTo2(e)));if(2===t)return new LineTo2(+e[0],+e[1]);const r=[];for(let i=0;i<t;i+=2){const t=+e[i],n=+e[i+1];r.push(new LineTo2(t,n))}return r};class Close extends Segment{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new Line$5(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new LineTo(t[0]):this.clone(),new LineTo(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new LineTo(t[0]):this.clone(),new LineTo(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment)&&!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new Close}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}Close2=Close||(Close={}),Close2.create=function(){return new Close2};class MoveTo extends Segment{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,Line$5.isLine(e)||Curve.isCurve(e)?this.endPoint=e.end.clone().round(2):this.endPoint=Point.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}clone(){return new MoveTo(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}MoveTo2=MoveTo||(MoveTo={}),MoveTo2.create=function(...e){const t=e.length,n=e[0];if(Line$5.isLine(n))return new MoveTo2(n);if(Curve.isCurve(n))return new MoveTo2(n);if(Point.isPointLike(n)){if(1===t)return new MoveTo2(n);const r=[];for(let n=0;n<t;n+=1)0===n?r.push(new MoveTo2(e[n])):r.push(new LineTo(e[n]));return r}if(2===t)return new MoveTo2(+e[0],+e[1]);const r=[];for(let i=0;i<t;i+=2){const t=+e[i],n=+e[i+1];0===i?r.push(new MoveTo2(t,n)):r.push(new LineTo(t,n))}return r};class CurveTo extends Segment{constructor(e,t,n,r,i,o){super(),Curve.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):"number"==typeof e?(this.controlPoint1=new Point(e,t).round(2),this.controlPoint2=new Point(n,r).round(2),this.endPoint=new Point(i,o).round(2)):(this.controlPoint1=Point.create(e).round(2),this.controlPoint2=Point.create(t).round(2),this.endPoint=Point.create(n).round(2))}get type(){return"C"}get curve(){return new Curve(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const n=this.curve.divideAt(e,t);return[new CurveTo(n[0]),new CurveTo(n[1])]}divideAtLength(e,t={}){const n=this.curve.divideAtLength(e,t);return[new CurveTo(n[0]),new CurveTo(n[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new CurveTo(t[0]),new CurveTo(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const e=this.start,t=this.controlPoint1,n=this.controlPoint2,r=this.end;return!(e.equals(t)&&t.equals(n)&&n.equals(r))}scale(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new CurveTo(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,n=this.end;return[this.type,e.x,e.y,t.x,t.y,n.x,n.y].join(" ")}}function rotate$8(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function q2c$1(e,t,n,r,i,o){const a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]}function a2c$1(e,t,n,r,i,o,a,s,l,c){const u=120*Math.PI/180,h=Math.PI/180*(+i||0);let d,f,p,g,m,v=[];if(c)f=c[0],p=c[1],g=c[2],m=c[3];else{d=rotate$8(e,t,-h),e=d.x,t=d.y,d=rotate$8(s,l,-h);const i=(e-(s=d.x))/2,c=(t-(l=d.y))/2;let u=i*i/(n*n)+c*c/(r*r);u>1&&(u=Math.sqrt(u),n*=u,r*=u);const v=n*n,y=r*r,b=(o===a?-1:1)*Math.sqrt(Math.abs((v*y-v*c*c-y*i*i)/(v*c*c+y*i*i)));g=b*n*c/r+(e+s)/2,m=b*-r*i/n+(t+l)/2,f=Math.asin((t-m)/r),p=Math.asin((l-m)/r),f=e<g?Math.PI-f:f,p=s<g?Math.PI-p:p,f<0&&(f=2*Math.PI+f),p<0&&(p=2*Math.PI+p),a&&f>p&&(f-=2*Math.PI),!a&&p>f&&(p-=2*Math.PI)}let y=p-f;if(Math.abs(y)>u){const e=p,t=s,o=l;p=f+u*(a&&p>f?1:-1),v=a2c$1(s=g+n*Math.cos(p),l=m+r*Math.sin(p),n,r,i,0,a,t,o,[p,e,g,m])}y=p-f;const b=Math.cos(f),x=Math.sin(f),w=Math.cos(p),_=Math.sin(p),C=Math.tan(y/4),$=4/3*(n*C),S=4/3*(r*C),E=[e,t],A=[e+$*x,t-S*b],M=[s+$*_,l-S*w],k=[s,l];if(A[0]=2*E[0]-A[0],A[1]=2*E[1]-A[1],c)return[A,M,k].concat(v);{v=[A,M,k].concat(v).join().split(",");const e=[],t=v.length;for(let n=0;n<t;n+=1)e[n]=n%2?rotate$8(+v[n-1],+v[n],h).y:rotate$8(+v[n],+v[n+1],h).x;return e}}function parse$1(e){if(!e)return null;const t="\t\n\v\f\r \u2028\u2029",n=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),r=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},o=[];return e.replace(n,((e,t,n)=>{const a=[];let s=t.toLowerCase();n.replace(r,((e,t)=>(t&&a.push(+t),e))),"m"===s&&a.length>2&&(o.push([t,...a.splice(0,2)]),s="l",t="m"===t?"l":"L");const l=i[s];for(;a.length>=l&&(o.push([t,...a.splice(0,l)]),l););return e})),o}function abs$2(e){const t=parse$1(e);if(!t||!t.length)return[["M",0,0]];let n=0,r=0,i=0,o=0;const a=[];for(let s=0,l=t.length;s<l;s+=1){const e=[];a.push(e);const l=t[s],c=l[0];if(c!==c.toUpperCase())switch(e[0]=c.toUpperCase(),e[0]){case"A":e[1]=l[1],e[2]=l[2],e[3]=l[3],e[4]=l[4],e[5]=l[5],e[6]=+l[6]+n,e[7]=+l[7]+r;break;case"V":e[1]=+l[1]+r;break;case"H":e[1]=+l[1]+n;break;case"M":i=+l[1]+n,o=+l[2]+r;for(let t=1,i=l.length;t<i;t+=1)e[t]=+l[t]+(t%2?n:r);break;default:for(let t=1,i=l.length;t<i;t+=1)e[t]=+l[t]+(t%2?n:r)}else for(let t=0,n=l.length;t<n;t+=1)e[t]=l[t];switch(e[0]){case"Z":n=+i,r=+o;break;case"H":n=e[1];break;case"V":r=e[1];break;case"M":i=e[e.length-2],o=e[e.length-1],n=e[e.length-2],r=e[e.length-1];break;default:n=e[e.length-2],r=e[e.length-1]}}return a}function normalize$7(e){const t=abs$2(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function r(e,t,n){let r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=null,t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":return 0===parseFloat(e[1])||0===parseFloat(e[2])?["L",e[6],e[7]]:["C"].concat(a2c$1.apply(0,[t.x,t.y].concat(e.slice(1))));case"S":return"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),["C",r,i].concat(e.slice(1));case"T":return"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),["C"].concat(q2c$1(t.x,t.y,t.qx,t.qy,e[1],e[2]));case"Q":return t.qx=e[1],t.qy=e[2],["C"].concat(q2c$1(t.x,t.y,e[1],e[2],e[3],e[4]));case"H":return["L"].concat(e[1],t.y);case"V":return["L"].concat(t.x,e[1])}return e}function i(e,n){if(e[n].length>7){e[n].shift();const r=e[n];for(;r.length;)o[n]="A",n+=1,e.splice(n,0,["C"].concat(r.splice(0,6)));e.splice(n,1),s=t.length}}const o=[];let a="",s=t.length;for(let l=0;l<s;l+=1){let e="";t[l]&&(e=t[l][0]),"C"!==e&&(o[l]=e,l>0&&(a=o[l-1])),t[l]=r(t[l],n,a),"A"!==o[l]&&"C"===e&&(o[l]="C"),i(t,l);const s=t[l],c=s.length;n.x=s[c-2],n.y=s[c-1],n.bx=parseFloat(s[c-4])||n.x,n.by=parseFloat(s[c-3])||n.y}return t[0][0]&&"M"===t[0][0]||t.unshift(["M",0,0]),t}function normalizePathData(e){return normalize$7(e).map((e=>e.map((e=>"string"==typeof e?e:round$5(e,2))))).join(",").split(",").join(" ")}CurveTo2=CurveTo||(CurveTo={}),CurveTo2.create=function(...e){const t=e.length,n=e[0];if(Curve.isCurve(n))return new CurveTo2(n);if(Point.isPointLike(n)){if(3===t)return new CurveTo2(e[0],e[1],e[2]);const n=[];for(let r=0;r<t;r+=3)n.push(new CurveTo2(e[r],e[r+1],e[r+2]));return n}if(6===t)return new CurveTo2(e[0],e[1],e[2],e[3],e[4],e[5]);const r=[];for(let i=0;i<t;i+=6)r.push(new CurveTo2(e[i],e[i+1],e[i+2],e[i+3],e[i+4],e[i+5]));return r};const regexSupportedData=new RegExp("^[\\s\\dLMCZz,.]*$");function isValid(e){return"string"==typeof e&&regexSupportedData.test(e)}function mod$2(e,t){return(e%t+t)%t}function draw(e,t,n,r,i){const o=[],a=e[e.length-1],s=null!=t&&t>0,l=t||0;if(r&&s){const t=(e=e.slice())[0],n=new Point(a.x+(t.x-a.x)/2,a.y+(t.y-a.y)/2);e.splice(0,0,n)}let c=e[0],u=1;for(n?o.push("M",c.x,c.y):o.push("L",c.x,c.y);u<(r?e.length:e.length-1);){let t=e[mod$2(u,e.length)],n=c.x-t.x,r=c.y-t.y;if(s&&(0!==n||0!==r)&&(null==i||i.indexOf(u-1)<0)){let i=Math.sqrt(n*n+r*r);const a=n*Math.min(l,i/2)/i,s=r*Math.min(l,i/2)/i,c=t.x+a,h=t.y+s;o.push("L",c,h);let d=e[mod$2(u+1,e.length)];for(;u<e.length-2&&0===Math.round(d.x-t.x)&&0===Math.round(d.y-t.y);)d=e[mod$2(u+2,e.length)],u+=1;n=d.x-t.x,r=d.y-t.y,i=Math.max(1,Math.sqrt(n*n+r*r));const f=n*Math.min(l,i/2)/i,p=r*Math.min(l,i/2)/i,g=t.x+f,m=t.y+p;o.push("Q",t.x,t.y,g,m),t=new Point(g,m)}else o.push("L",t.x,t.y);c=t,u+=1}return r?o.push("Z"):o.push("L",a.x,a.y),o.map((e=>"string"==typeof e?e:+e.toFixed(3))).join(" ")}function drawPoints(e,t={}){const n=[];return e&&e.length&&e.forEach((e=>{Array.isArray(e)?n.push({x:e[0],y:e[1]}):n.push({x:e.x,y:e.y})})),draw(n,t.round,null==t.initialMove||t.initialMove,t.close,t.exclude)}function arcToCurves(e,t,n,r,i=0,o=0,a=0,s,l){if(0===n||0===r)return[];s-=e,l-=t,n=Math.abs(n),r=Math.abs(r);const c=-s/2,u=-l/2,h=Math.cos(i*Math.PI/180),d=Math.sin(i*Math.PI/180),f=h*c+d*u,p=-1*d*c+h*u,g=f*f,m=p*p,v=n*n,y=r*r,b=g/v+m/y;let x;if(b>1)n=Math.sqrt(b)*n,r=Math.sqrt(b)*r,x=0;else{let e=1;o===a&&(e=-1),x=e*Math.sqrt((v*y-v*m-y*g)/(v*m+y*g))}const w=x*n*p/r,_=-1*x*r*f/n,C=h*w-d*_+s/2,$=d*w+h*_+l/2;let S=Math.atan2((p-_)/r,(f-w)/n)-Math.atan2(0,1),E=S>=0?S:2*Math.PI+S;S=Math.atan2((-p-_)/r,(-f-w)/n)-Math.atan2((p-_)/r,(f-w)/n);let A=S>=0?S:2*Math.PI+S;0===a&&A>0?A-=2*Math.PI:0!==a&&A<0&&(A+=2*Math.PI);const M=2*A/Math.PI,k=Math.ceil(M<0?-1*M:M),T=A/k,P=8/3*Math.sin(T/4)*Math.sin(T/4)/Math.sin(T/2),O=h*n,N=h*r,I=d*n,D=d*r;let L=Math.cos(E),R=Math.sin(E),B=-P*(O*R+D*L),j=-P*(I*R-N*L),F=0,G=0;const V=[];for(let z=0;z<k;z+=1){E+=T,L=Math.cos(E),R=Math.sin(E),F=O*L-D*R+C,G=I*L+N*R+$;const n=-P*(O*R+D*L),r=-P*(I*R-N*L),i=6*z;V[i]=Number(B+e),V[i+1]=Number(j+t),V[i+2]=Number(F-n+e),V[i+3]=Number(G-r+t),V[i+4]=Number(F+e),V[i+5]=Number(G+t),B=F+n,j=G+r}return V.map((e=>+e.toFixed(2)))}function drawArc(e,t,n,r,i=0,o=0,a=0,s,l){const c=[],u=arcToCurves(e,t,n,r,i,o,a,s,l);if(null!=u)for(let h=0,d=u.length;h<d;h+=6)c.push("C",u[h],u[h+1],u[h+2],u[h+3],u[h+4],u[h+5]);return c.join(" ")}class Path$5 extends Geometry{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(Line$5.isLine(e[0])||Curve.isCurve(e[0])){let t=null;e.forEach(((e,n)=>{0===n&&this.appendSegment(Path$5.createSegment("M",e.start)),null==t||t.end.equals(e.start)||this.appendSegment(Path$5.createSegment("M",e.start)),Line$5.isLine(e)?this.appendSegment(Path$5.createSegment("L",e.end)):Curve.isCurve(e)&&this.appendSegment(Path$5.createSegment("C",e.controlPoint1,e.controlPoint2,e.end)),t=e}))}else{e.forEach((e=>{e.isSegment&&this.appendSegment(e)}))}else null!=e&&(Line$5.isLine(e)?(this.appendSegment(Path$5.createSegment("M",e.start)),this.appendSegment(Path$5.createSegment("L",e.end))):Curve.isCurve(e)?(this.appendSegment(Path$5.createSegment("M",e.start)),this.appendSegment(Path$5.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):Polyline$2.isPolyline(e)?e.points&&e.points.length&&e.points.forEach(((e,t)=>{const n=0===t?Path$5.createSegment("M",e):Path$5.createSegment("L",e);this.appendSegment(n)})):e.isSegment&&this.appendSegment(e))}get[Symbol.toStringTag](){return Path$5.toStringTag}get start(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=0;n<t;n+=1){const t=e[n];if(t.isVisible)return t.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=t-1;n>=0;n-=1){const t=e[n];if(t.isVisible)return t.end}return e[t-1].end}moveTo(...e){return this.appendSegment(MoveTo.create.call(null,...e))}lineTo(...e){return this.appendSegment(LineTo.create.call(null,...e))}curveTo(...e){return this.appendSegment(CurveTo.create.call(null,...e))}arcTo(e,t,n,r,i,o,a){const s=this.end||new Point,l="number"==typeof o?arcToCurves(s.x,s.y,e,t,n,r,i,o,a):arcToCurves(s.x,s.y,e,t,n,r,i,o.x,o.y);if(null!=l)for(let c=0,u=l.length;c<u;c+=6)this.curveTo(l[c],l[c+1],l[c+2],l[c+3],l[c+4],l[c+5]);return this}quadTo(e,t,n,r){const i=this.end||new Point,o=["M",i.x,i.y];if("number"==typeof e)o.push("Q",e,t,n,r);else{const n=t;o.push("Q",e.x,e.y,n.x,n.y)}const a=Path$5.parse(o.join(" "));return this.appendSegment(a.segments.slice(1)),this}close(){return this.appendSegment(Close.create())}drawPoints(e,t={}){const n=drawPoints(e,t),r=Path$5.parse(n);r&&r.segments&&this.appendSegment(r.segments)}bbox(){const e=this.segments,t=e.length;if(0===t)return null;let n;for(let i=0;i<t;i+=1){const t=e[i];if(t.isVisible){const e=t.bbox();null!=e&&(n=n?n.union(e):e)}}if(null!=n)return n;const r=e[t-1];return new Rectangle(r.end.x,r.end.y,0,0)}appendSegment(e){const t=this.segments.length;let n,r=0!==t?this.segments[t-1]:null;if(Array.isArray(e))for(let i=0,o=e.length;i<o;i+=1){const t=e[i];n=this.prepareSegment(t,r,null),this.segments.push(n),r=n}else null!=e&&e.isSegment&&(n=this.prepareSegment(e,r,null),this.segments.push(n));return this}insertSegment(e,t){const n=this.segments.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");let r,i=null,o=null;if(0!==n&&(e>=1?(i=this.segments[e-1],o=i.nextSegment):(i=null,o=this.segments[0])),Array.isArray(t))for(let a=0,s=t.length;a<s;a+=1){const n=t[a];r=this.prepareSegment(n,i,o),this.segments.splice(e+a,0,r),i=r}else r=this.prepareSegment(t,i,o),this.segments.splice(e,0,r);return this}removeSegment(e){const t=this.fixIndex(e),n=this.segments.splice(t,1)[0],r=n.previousSegment,i=n.nextSegment;return r&&(r.nextSegment=i),i&&(i.previousSegment=r),n.isSubpathStart&&i&&this.updateSubpathStartSegment(i),n}replaceSegment(e,t){const n=this.fixIndex(e);let r;const i=this.segments[n];let o=i.previousSegment;const a=i.nextSegment;let s=i.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(let n=0,i=t.length;n<i;n+=1){const i=t[n];r=this.prepareSegment(i,o,a),this.segments.splice(e+n,0,r),o=r,s&&r.isSubpathStart&&(s=!1)}}else r=this.prepareSegment(t,o,a),this.segments.splice(n,1,r),s&&r.isSubpathStart&&(s=!1);s&&a&&this.updateSubpathStartSegment(a)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(0===t)throw new Error("Path has no segments.");let n=e;for(;n<0;)n=t+n;if(n>=t||n<0)throw new Error("Index out of range.");return n}segmentAt(e,t={}){const n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null}segmentAtLength(e,t={}){const n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null}segmentIndexAt(e,t={}){if(0===this.segments.length)return null;const n=clamp$2(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.segmentIndexAtLength(i,r)}segmentIndexAtLength(e,t={}){const n=this.segments.length;if(0===n)return null;let r=!0;e<0&&(r=!1,e=-e);const i=this.getPrecision(t),o=this.getSubdivisions(t);let a=0,s=null;for(let l=0;l<n;l+=1){const t=r?l:n-1-l,c=this.segments[t],u=o[t],h=c.length({precision:i,subdivisions:u});if(c.isVisible){if(e<=a+h)return t;s=t}a+=h}return s}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),n=[];for(let r=0,i=this.segments.length;r<i;r+=1){const e=this.segments[r].getSubdivisions({precision:t});n.push(e)}return n}updateSubpathStartSegment(e){let t=e.previousSegment,n=e;for(;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=n,n=n.nextSegment}prepareSegment(e,t,n){e.previousSegment=t,e.nextSegment=n,null!=t&&(t.nextSegment=e),null!=n&&(n.previousSegment=e);let r=e;return e.isSubpathStart&&(e.subpathStartSegment=e,r=n),null!=r&&this.updateSubpathStartSegment(r),e}closestPoint(e,t={}){const n=this.closestPointT(e,t);return n?this.pointAtT(n):null}closestPointLength(e,t={}){const n=this.getOptions(t),r=this.closestPointT(e,n);return r?this.lengthAtT(r,n):0}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),r=this.closestPointLength(e,n);if(0===r)return 0;const i=this.length(n);return 0===i?0:r/i}closestPointT(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),r=this.getSubdivisions(t);let i,o=1/0;for(let a=0,s=this.segments.length;a<s;a+=1){const t=this.segments[a],s=r[a];if(t.isVisible){const r=t.closestPointT(e,{precision:n,subdivisions:s}),l=squaredLength$5(t.pointAtT(r),e);l<o&&(i={segmentIndex:a,value:r},o=l)}}return i||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),r=this.getSubdivisions(t);let i,o=1/0;for(let a=0,s=this.segments.length;a<s;a+=1){const t=this.segments[a],s=r[a];if(t.isDifferentiable()){const r=t.closestPointT(e,{precision:n,subdivisions:s}),a=squaredLength$5(t.pointAtT(r),e);a<o&&(i=t.tangentAtT(r),o=a)}}return i||null}containsPoint(e,t={}){const n=this.toPolylines(t);if(!n)return!1;let r=0;for(let i=0,o=n.length;i<o;i+=1){n[i].containsPoint(e)&&(r+=1)}return r%2==1}pointAt(e,t={}){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.getOptions(t),r=this.length(n)*e;return this.pointAtLength(r,n)}pointAtLength(e,t={}){if(0===this.segments.length)return null;if(0===e)return this.start.clone();let n=!0;e<0&&(n=!1,e=-e);const r=this.getPrecision(t),i=this.getSubdivisions(t);let o,a=0;for(let s=0,l=this.segments.length;s<l;s+=1){const t=n?s:l-1-s,c=this.segments[t],u=i[t],h=c.length({precision:r,subdivisions:u});if(c.isVisible){if(e<=a+h)return c.pointAtLength((n?1:-1)*(e-a),{precision:r,subdivisions:u});o=c}a+=h}if(o)return n?o.end:o.start;return this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,n=t.length;if(0===n)return null;const r=e.segmentIndex;if(r<0)return t[0].pointAtT(0);if(r>=n)return t[n-1].pointAtT(1);const i=clamp$2(e.value,0,1);return t[r].pointAtT(i)}divideAt(e,t={}){if(0===this.segments.length)return null;const n=clamp$2(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.divideAtLength(i,r)}divideAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const r=this.getPrecision(t),i=this.getSubdivisions(t);let o,a,s,l,c,u=0;for(let y=0,b=this.segments.length;y<b;y+=1){const t=n?y:b-1-y,c=this.getSegment(t),h={precision:r,subdivisions:i[t]},d=c.length(h);if(c.isDifferentiable()&&(s=c,l=t,e<=u+d)){a=t,o=c.divideAtLength((n?1:-1)*(e-u),h);break}u+=d}if(!s)return null;o||(a=l,c=n?1:0,o=s.divideAtT(c));const h=this.clone(),d=a;h.replaceSegment(d,o);const f=d;let p=d+1,g=d+2;o[0].isDifferentiable()||(h.removeSegment(f),p-=1,g-=1);const m=h.getSegment(p).start;h.insertSegment(p,Path$5.createSegment("M",m)),g+=1,o[1].isDifferentiable()||(h.removeSegment(g-1),g-=1);const v=g-f-1;for(let y=g,b=h.segments.length;y<b;y+=1){const e=this.getSegment(y-v),t=h.getSegment(y);if("Z"===t.type&&!e.subpathStartSegment.end.equals(t.subpathStartSegment.end)){const t=Path$5.createSegment("L",e.end);h.replaceSegment(y,t)}}return[new Path$5(h.segments.slice(0,p)),new Path$5(h.segments.slice(p))]}intersectsWithLine(e,t={}){const n=this.toPolylines(t);if(null==n)return null;let r=null;for(let i=0,o=n.length;i<o;i+=1){const t=n[i],o=e.intersect(t);o&&(null==r&&(r=[]),Array.isArray(o)?r.push(...o):r.push(o))}return r}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1){if(this.segments[e].isDifferentiable())return!0}return!1}isValid(){const e=this.segments;return 0===e.length||"M"===e[0].type}length(e={}){if(0===this.segments.length)return 0;const t=this.getSubdivisions(e);let n=0;for(let r=0,i=this.segments.length;r<i;r+=1){const e=this.segments[r],i=t[r];n+=e.length({subdivisions:i})}return n}lengthAtT(e,t={}){const n=this.segments.length;if(0===n)return 0;let r=e.segmentIndex;if(r<0)return 0;let i=clamp$2(e.value,0,1);r>=n&&(r=n-1,i=1);const o=this.getPrecision(t),a=this.getSubdivisions(t);let s=0;for(let u=0;u<r;u+=1){const e=this.segments[u],t=a[u];s+=e.length({precision:o,subdivisions:t})}const l=this.segments[r],c=a[r];return s+=l.lengthAtT(i,{precision:o,subdivisions:c}),s}tangentAt(e,t={}){if(0===this.segments.length)return null;const n=clamp$2(e,0,1),r=this.getOptions(t),i=this.length(r)*n;return this.tangentAtLength(i,r)}tangentAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const r=this.getPrecision(t),i=this.getSubdivisions(t);let o,a=0;for(let s=0,l=this.segments.length;s<l;s+=1){const t=n?s:l-1-s,c=this.segments[t],u=i[t],h=c.length({precision:r,subdivisions:u});if(c.isDifferentiable()){if(e<=a+h)return c.tangentAtLength((n?1:-1)*(e-a),{precision:r,subdivisions:u});o=c}a+=h}if(o){const e=n?1:0;return o.tangentAtT(e)}return null}tangentAtT(e){const t=this.segments.length;if(0===t)return null;const n=e.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=t)return this.segments[t-1].tangentAtT(1);const r=clamp$2(e.value,0,1);return this.segments[n].tangentAtT(r)}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getSubdivisions(e={}){if(null==e.segmentSubdivisions){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}toPoints(e={}){const t=this.segments,n=t.length;if(0===n)return null;const r=this.getSubdivisions(e),i=[];let o=[];for(let a=0;a<n;a+=1){const e=t[a];if(e.isVisible){const t=r[a];t.length>0?t.forEach((e=>o.push(e.start))):o.push(e.start)}else o.length>0&&(o.push(t[a-1].end),i.push(o),o=[])}return o.length>0&&(o.push(this.end),i.push(o)),i}toPolylines(e={}){const t=this.toPoints(e);return t?t.map((e=>new Polyline$2(e))):null}scale(e,t,n){return this.segments.forEach((r=>r.scale(e,t,n))),this}rotate(e,t){return this.segments.forEach((n=>n.rotate(e,t))),this}translate(e,t){return"number"==typeof e?this.segments.forEach((n=>n.translate(e,t))):this.segments.forEach((t=>t.translate(e))),this}clone(){const e=new Path$5;return this.segments.forEach((t=>e.appendSegment(t.clone()))),e}equals(e){if(null==e)return!1;const t=this.segments,n=e.segments,r=t.length;if(n.length!==r)return!1;for(let i=0;i<r;i+=1){const e=t[i],r=n[i];if(e.type!==r.type||!e.equals(r))return!1}return!0}toJSON(){return this.segments.map((e=>e.toJSON()))}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map((e=>e.serialize())).join(" ")}toString(){return this.serialize()}}var Path2;Path2=Path$5||(Path$5={}),Path2.toStringTag=`X6.Geometry.${Path2.name}`,Path2.isPath=function(e){if(null==e)return!1;if(e instanceof Path2)return!0;const t=e[Symbol.toStringTag],n=e;return!(null!=t&&t!==Path2.toStringTag||!Array.isArray(n.segments)||"function"!=typeof n.moveTo||"function"!=typeof n.lineTo||"function"!=typeof n.curveTo)},function(e){function t(e,...t){if("M"===e)return MoveTo.create.call(null,...t);if("L"===e)return LineTo.create.call(null,...t);if("C"===e)return CurveTo.create.call(null,...t);if("z"===e||"Z"===e)return Close.create();throw new Error(`Invalid path segment type "${e}"`)}e.parse=function(n){if(!n)return new e;const r=new e,i=e.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=i)for(let e=0,o=i.length;e<o;e+=1){const n=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,o=i[e].match(n);if(null!=o){const e=o[0],n=o.slice(1).map((e=>+e)),i=t.call(null,e,...n);r.appendSegment(i)}}return r},e.createSegment=t}(Path$5||(Path$5={})),function(e){e.normalize=normalizePathData,e.isValid=isValid,e.drawArc=drawArc,e.drawPoints=drawPoints,e.arcToCurves=arcToCurves}(Path$5||(Path$5={}));class Vector$2{constructor(e,t,n){if(!e)throw new TypeError("Invalid element to create vector");let r;if(Vector$2.isVector(e))r=e.node;else if("string"==typeof e)if("svg"===e.toLowerCase())r=createSvgDocument();else if("<"===e[0]){const t=createSvgDocument(e);r=document.importNode(t.firstChild,!0)}else r=document.createElementNS(ns$1.svg,e);else r=e;this.node=r,t&&this.setAttributes(t),n&&this.append(n)}get[Symbol.toStringTag](){return Vector$2.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}transform(e,t){return null==e?transform$e(this.node):(transform$e(this.node,e,t),this)}translate(e,t=0,n={}){return null==e?translate$5(this.node):(translate$5(this.node,e,t,n),this)}rotate(e,t,n,r={}){return null==e?rotate$7(this.node):(rotate$7(this.node,e,t,n,r),this)}scale(e,t){return null==e?scale$a(this.node):(scale$a(this.node,e,t),this)}getTransformToElement(e){const t=Vector$2.toNode(e);return getTransformToElement(this.node,t)}removeAttribute(e){return removeAttribute(this.node,e),this}getAttribute(e){return getAttribute(this.node,e)}setAttribute(e,t){return setAttribute(this.node,e,t),this}setAttributes(e){return setAttributes(this.node,e),this}attr(e,t){return null==e?attr(this.node):"string"==typeof e&&void 0===t?attr(this.node,e):("object"==typeof e?attr(this.node,e):attr(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:Vector$2.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?Vector$2.create(t):Vector$2.create("defs").appendTo(e)}text(e,t={}){return text$2(this.node,e,t),this}tagName(){return tagName(this.node)}clone(){return Vector$2.create(this.node.cloneNode(!0))}remove(){return remove$1(this.node),this}empty(){return empty(this.node),this}append(e){return append(this.node,Vector$2.toNodes(e)),this}appendTo(e){return appendTo(this.node,Vector$2.isVector(e)?e.node:e),this}prepend(e){return prepend(this.node,Vector$2.toNodes(e)),this}before(e){return before(this.node,Vector$2.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(Vector$2.toNode(e),this.node),Vector$2.create(e)}first(){return this.node.firstChild?Vector$2.create(this.node.firstChild):null}last(){return this.node.lastChild?Vector$2.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?Vector$2.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(Vector$2.toNode(e))}find(e){const t=[],n=find$2(this.node,e);if(n)for(let r=0,i=n.length;r<i;r+=1)t.push(Vector$2.create(n[r]));return t}findOne(e){const t=findOne(this.node,e);return t?Vector$2.create(t):null}findParentByClass(e,t){const n=findParentByClass(this.node,e,t);return n?Vector$2.create(n):null}matches(e){const t=this.node;this.node.matches;const n=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return n&&n.call(t,e)}contains(e){return contains$1(this.node,Vector$2.isVector(e)?e.node:e)}wrap(e){const t=Vector$2.create(e),n=this.node.parentNode;return null!=n&&n.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(null==t.node.parentNode)return null;if(t=Vector$2.create(t.node.parentNode),null==e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=Vector$2.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let n=0;n<e.length;n+=1){1===e[n].nodeType&&t.push(Vector$2.create(e[n]))}return t}eachChild(e,t){const n=this.children();for(let r=0,i=n.length;r<i;r+=1)e.call(n[r],n[r],r,n),t&&n[r].eachChild(e,t);return this}index(){return index$6(this.node)}hasClass(e){return hasClass(this.node,e)}addClass(e){return addClass(this.node,e),this}removeClass(e){return removeClass(this.node,e),this}toggleClass(e,t){return toggleClass(this.node,e,t),this}toLocalPoint(e,t){return toLocalPoint(this.node,e,t)}toGeometryShape(){return toGeometryShape(this.node)}translateCenterToPoint(e){const t=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-t.x,e.y-t.y),this}translateAndAutoOrient(e,t,n){return translateAndAutoOrient(this.node,e,t,n),this}animate(e){return animate(this.node,e)}animateTransform(e){return animateTransform(this.node,e)}animateAlongPath(e,t){return animateAlongPath(this.node,e,t)}normalizePath(){return"path"===this.tagName()&&this.attr("d",Path$5.normalize(this.attr("d"))),this}bbox(e,t){return bbox$1(this.node,e,t)}getBBox(e={}){return getBBox$2(this.node,{recursive:e.recursive,target:e.target?Vector$2.toNode(e.target):null})}sample(e=1){return this.node instanceof SVGPathElement?sample(this.node,e):[]}toPath(){return Vector$2.create(toPath(this.node))}toPathData(){return toPathData(this.node)}}function createTextPathNode(e,t){const n=Vector$2.create(t),r=Vector$2.create("textPath"),i=e.d;if(i&&void 0===e["xlink:href"]){const e=Vector$2.create("path").attr("d",i).appendTo(n.defs());r.attr("xlink:href",`#${e.id}`)}return"object"==typeof e&&r.attr(e),r.node}function annotateTextLine(e,t,n){const r=n.eol,i=n.baseSize,o=n.lineHeight;let a,s=0;const l={},c=t.length-1;for(let u=0;u<=c;u+=1){let o=t[u],l=null;if("object"==typeof o){const e=o.attrs,t=Vector$2.create("tspan",e);a=t.node;let h=o.t;r&&u===c&&(h+=r),a.textContent=h;const d=e.class;d&&t.addClass(d),n.includeAnnotationIndices&&t.attr("annotations",o.annotations.join(",")),l=parseFloat(e["font-size"]),void 0===l&&(l=i),l&&l>s&&(s=l)}else r&&u===c&&(o+=r),a=document.createTextNode(o||" "),i&&i>s&&(s=i);e.appendChild(a)}return s&&(l.maxFontSize=s),o?l.lineHeight=o:s&&(l.lineHeight=1.2*s),l}!function(e){function t(t){if(null==t)return!1;if(t instanceof e)return!0;const n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&r.node instanceof SVGElement&&"function"==typeof r.animate&&"function"==typeof r.sample&&"function"==typeof r.normalizePath&&"function"==typeof r.toPath}function n(t,n,r){return new e(t,n,r)}function r(e){return t(e)?e.node:e}e.toStringTag=`X6.${e.name}`,e.isVector=t,e.create=n,e.createVectors=function(e){if("<"===e[0]){const t=createSvgDocument(e),r=[];for(let e=0,i=t.childNodes.length;e<i;e+=1){const i=t.childNodes[e];r.push(n(document.importNode(i,!0)))}return r}return[n(e)]},e.toNode=r,e.toNodes=function(e){return Array.isArray(e)?e.map((e=>r(e))):[r(e)]}}(Vector$2||(Vector$2={}));const emRegex=/em$/;function emToPx(e,t){const n=parseFloat(e);return emRegex.test(e)?n*t:n}function calculateDY(e,t,n,r){if(!Array.isArray(t))return 0;const i=t.length;if(!i)return 0;let o=t[0];const a=emToPx(o.maxFontSize,n)||n;let s=0;const l=emToPx(r,n);for(let h=1;h<i;h+=1){o=t[h];s+=emToPx(o.lineHeight,n)||l}const c=emToPx(o.maxFontSize,n)||n;let u;switch(e){case"middle":u=a/2-.15*c-s/2;break;case"bottom":u=-.25*c-s;break;default:u=.8*a}return u}function text$2(e,t,n={}){t=sanitize(t);const r=n.eol;let i=n.textPath;const o=n.textVerticalAnchor,a="middle"===o||"bottom"===o||"top"===o;let s=n.x;void 0===s&&(s=e.getAttribute("x")||0);const l=n.includeAnnotationIndices;let c=n.annotations;c&&!Array.isArray(c)&&(c=[c]);const u=n.lineHeight,h="auto"===u,d=h?"1.5em":u||"1em";empty(e),attr(e,{"xml:space":"preserve",display:t||n.displayEmpty?null:"none"});const f=attr(e,"font-size");let p,g,m=parseFloat(f);m||(m=16,!a&&!c||f||attr(e,"font-size",`${m}`)),i?("string"==typeof i&&(i={d:i}),p=createTextPathNode(i,e)):p=document.createDocumentFragment();let v,y=0;const b=t.split("\n"),x=[],w=b.length-1;for(let _=0;_<=w;_+=1){g=d;let e="v-line";const t=createSvgElement("tspan");let n,o=b[_];if(o)if(c){n=annotateTextLine(t,annotate(o,c,{offset:-y,includeAnnotationIndices:l}),{eol:_!==w&&r,baseSize:m,lineHeight:h?null:d,includeAnnotationIndices:l});const e=n.lineHeight;e&&h&&0!==_&&(g=e),0===_&&(v=.8*n.maxFontSize)}else r&&_!==w&&(o+=r),t.textContent=o;else{t.textContent="-",e+=" v-empty-line";const r=t.style;r.fillOpacity=0,r.strokeOpacity=0,c&&(n={})}n&&x.push(n),_>0&&t.setAttribute("dy",g),(_>0||i)&&t.setAttribute("x",s),t.className.baseVal=e,p.appendChild(t),y+=o.length+1}if(a)if(c)g=calculateDY(o,x,m,d);else if("top"===o)g="0.8em";else{let e;switch(w>0?(e=parseFloat(d)||1,e*=w,emRegex.test(d)||(e/=m)):e=0,o){case"middle":g=.3-e/2+"em";break;case"bottom":g=-e-.3+"em"}}else 0===o?g="0em":o?g=o:(g=0,null==e.getAttribute("y")&&e.setAttribute("y",`${v||"0.8em"}`));p.firstChild.setAttribute("dy",g),e.appendChild(p)}function splitText(e,t,n,r){const i=[],o=[];if(null!=t){const n=e.split(t);if(i.push(...n),"string"==typeof t)for(let e=0,r=n.length-1;e<r;e+=1)o.push(t);else{const r=e.match(new RegExp(t,"g"));for(let e=0,t=n.length-1;e<t;e+=1)o.push(r?r[e]:"")}}else{let t="";for(let n=0,r=e.length;n<r;n+=1){const r=e[n];" "===r?(i.push(t),o.push(" "),t=""):r.match(/[^\x00-\xff]/)?(t.length&&(i.push(t),o.push("")),i.push(r),o.push(""),t=""):t+=r}t.length&&i.push(t)}for(let a=0;a<i.length;a+=1){const e=i[a];if(e.indexOf(n)>=0&&e.length>1){const t=e.split(n);for(let e=0,i=t.length-1;e<i;e+=1)t.splice(2*e+1,0,n);const r=t.filter((e=>""!==e));i.splice(a,1,...r);const s=r.map((()=>""));s.pop(),o.splice(a,0,...s)}}for(let a=0;a<i.length;a+=1){const e=i[a],t=e.search(r);t>0&&t<e.length-1&&(i.splice(a,1,e.substring(0,t+1),e.substring(t+1)),o.splice(a,0,""))}return{words:i,separators:o}}function breakText(e,t,n={},r={}){const i=t.width,o=t.height,a=r.svgDocument||createSvgElement("svg"),s=createSvgElement("text"),l=createSvgElement("tspan"),c=document.createTextNode("");attr(s,n),s.appendChild(l),s.style.opacity="0",s.style.display="block",l.style.display="block",l.appendChild(c),a.appendChild(s);const u=null==a.parentNode;u&&document.body.appendChild(a);const h=r.eol||"\n",d=r.separator||" ",f=r.hyphen?new RegExp(r.hyphen):/[^\w\d]/,p=!1!==r.breakWord,g=[],m={};let v,y,b,x=[];const{words:w,separators:_}=splitText(e,r.separator,h,f);for(let C=0,$=0,S=w.length;C<S;C+=1){const e=w[C];if(e)if(e!==h){if(null!=x[$]?(b=_[C-1]||"",c.data=`${x[$]}${b}${e}`):c.data=e,l.getComputedTextLength()<=i)x[$]=c.data,m[$]=_[C],v&&(g[$]=!0,$+=1,v=0);else{if(p){if(!x[$]||v){const t=!!v,n=1===e.length;if(v=e.length-1,t||n){if(n){if(!x[$]){x=[];break}w.splice(C,2,e+w[C+1]),_.splice(C+1,1),g[$]=!0,$+=1,S-=1,C-=1;continue}w[C]=e.substring(0,v),w[C+1]=e.substring(v)+w[C+1]}else w.splice(C,1,e.substring(0,v),e.substring(v)),_.splice(C,0,""),S+=1,$&&!g[$-1]&&($-=1);C-=1;continue}}else if(!x[$]){x[$]=e,g[$]=!0,$+=1;continue}$+=1,C-=1}if(null!=o){if(null==y){let e;e="auto"===n.lineHeight?{value:1.5,unit:"em"}:parseCssNumeric(n.lineHeight,["em"])||{value:1,unit:"em"},y=e.value,"em"===e.unit&&(Platform.IS_FIREFOX?y*=l.getBBox().height:y*=s.getBBox().height)}if(y*x.length>o){const e=Math.floor(o/y)-1,t=x[e],n=x[e+1];if(x.splice(e+1),null==t)break;let a=r.ellipsis;if(!a)break;"string"!=typeof a&&(a="");let s=t;n&&p&&(s+=b+n);let u,h,f=s.length;do{if(h=s[f],u=s.substring(0,f),h?h.match(d)&&(u+=h):u+=m[e],u+=a,c.data=u,l.getComputedTextLength()<=i){x[e]=u;break}f-=1}while(f>=0);break}}}else g[$]=!0,$+=1,x[$]=""}return remove$1(u?a:s),x.join(h)}const KAPPA=.551784;function getNumbericAttribute(e,t,n=NaN){const r=e.getAttribute(t);if(null==r)return n;const i=parseFloat(r);return Number.isNaN(i)?n:i}function sample(e,t=1){const n=e.getTotalLength(),r=[];let i,o=0;for(;o<n;)i=e.getPointAtLength(o),r.push({distance:o,x:i.x,y:i.y}),o+=t;return r}function lineToPathData(e){return["M",getNumbericAttribute(e,"x1"),getNumbericAttribute(e,"y1"),"L",getNumbericAttribute(e,"x2"),getNumbericAttribute(e,"y2")].join(" ")}function polygonToPathData(e){const t=getPointsFromSvgElement(e);return 0===t.length?null:`${svgPointsToPath(t)} Z`}function polylineToPathData(e){const t=getPointsFromSvgElement(e);return 0===t.length?null:svgPointsToPath(t)}function svgPointsToPath(e){return`M ${e.map((e=>`${e.x} ${e.y}`)).join(" L")}`}function getPointsFromSvgElement(e){const t=[],n=e.points;if(n)for(let r=0,i=n.numberOfItems;r<i;r+=1)t.push(n.getItem(r));return t}function circleToPathData(e){const t=getNumbericAttribute(e,"cx",0),n=getNumbericAttribute(e,"cy",0),r=getNumbericAttribute(e,"r"),i=r*KAPPA;return["M",t,n-r,"C",t+i,n-r,t+r,n-i,t+r,n,"C",t+r,n+i,t+i,n+r,t,n+r,"C",t-i,n+r,t-r,n+i,t-r,n,"C",t-r,n-i,t-i,n-r,t,n-r,"Z"].join(" ")}function ellipseToPathData(e){const t=getNumbericAttribute(e,"cx",0),n=getNumbericAttribute(e,"cy",0),r=getNumbericAttribute(e,"rx"),i=getNumbericAttribute(e,"ry")||r,o=r*KAPPA,a=i*KAPPA;return["M",t,n-i,"C",t+o,n-i,t+r,n-a,t+r,n,"C",t+r,n+a,t+o,n+i,t,n+i,"C",t-o,n+i,t-r,n+a,t-r,n,"C",t-r,n-a,t-o,n-i,t,n-i,"Z"].join(" ")}function rectangleToPathData(e){return rectToPathData({x:getNumbericAttribute(e,"x",0),y:getNumbericAttribute(e,"y",0),width:getNumbericAttribute(e,"width",0),height:getNumbericAttribute(e,"height",0),rx:getNumbericAttribute(e,"rx",0),ry:getNumbericAttribute(e,"ry",0)})}function rectToPathData(e){let t;const n=e.x,r=e.y,i=e.width,o=e.height,a=Math.min(e.rx||e["top-rx"]||0,i/2),s=Math.min(e.rx||e["bottom-rx"]||0,i/2),l=Math.min(e.ry||e["top-ry"]||0,o/2),c=Math.min(e.ry||e["bottom-ry"]||0,o/2);return t=a||s||l||c?["M",n,r+l,"v",o-l-c,"a",s,c,0,0,0,s,c,"h",i-2*s,"a",s,c,0,0,0,s,-c,"v",-(o-c-l),"a",a,l,0,0,0,-a,-l,"h",-(i-2*a),"a",a,l,0,0,0,-a,l,"Z"]:["M",n,r,"H",n+i,"V",r+o,"H",n,"V",r,"Z"],t.join(" ")}function toPath(e){const t=createSvgElement("path");attr(t,attr(e));const n=toPathData(e);return n&&t.setAttribute("d",n),t}function toPathData(e){const t=e.tagName.toLowerCase();switch(t){case"path":return e.getAttribute("d");case"line":return lineToPathData(e);case"polygon":return polygonToPathData(e);case"polyline":return polylineToPathData(e);case"ellipse":return ellipseToPathData(e);case"circle":return circleToPathData(e);case"rect":return rectangleToPathData(e)}throw new Error(`"${t}" cannot be converted to svg path element.`)}function createSlicePathData(e,t,n,r){const i=2*Math.PI-1e-6,o=e,a=t;let s=n,l=r;if(l<s){const e=s;s=l,l=e}const c=l-s,u=c<Math.PI?"0":"1",h=Math.cos(s),d=Math.sin(s),f=Math.cos(l),p=Math.sin(l);return c>=i?o?`M0,${a}A${a},${a} 0 1,1 0,${-a}A${a},${a} 0 1,1 0,${a}M0,${o}A${o},${o} 0 1,0 0,${-o}A${o},${o} 0 1,0 0,${o}Z`:`M0,${a}A${a},${a} 0 1,1 0,${-a}A${a},${a} 0 1,1 0,${a}Z`:o?`M${a*h},${a*d}A${a},${a} 0 ${u},1 ${a*f},${a*p}L${o*f},${o*p}A${o},${o} 0 ${u},0 ${o*h},${o*d}Z`:`M${a*h},${a*d}A${a},${a} 0 ${u},1 ${a*f},${a*p}L0,0Z`}const svgDocument=createSvgElement("svg"),transformRegex=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,transformSeparatorRegex=/[ ,]+/,transformationListRegex=/^(\w+)\((.*)\)/;function createSVGPoint(e,t){const n=svgDocument.createSVGPoint();return n.x=e,n.y=t,n}function createSVGMatrix(e){const t=svgDocument.createSVGMatrix();if(null!=e){const n=e,r=t;for(const e in n)r[e]=n[e]}return t}function createSVGTransform(e){return null!=e?(e instanceof DOMMatrix||(e=createSVGMatrix(e)),svgDocument.createSVGTransformFromMatrix(e)):svgDocument.createSVGTransform()}function transformStringToMatrix(e){let t=createSVGMatrix();const n=null!=e&&e.match(transformRegex);if(!n)return t;for(let r=0,i=n.length;r<i;r+=1){const e=n[r].match(transformationListRegex);if(e){let n,r,i,o,a,s=createSVGMatrix();const l=e[2].split(transformSeparatorRegex);switch(e[1].toLowerCase()){case"scale":n=parseFloat(l[0]),r=void 0===l[1]?n:parseFloat(l[1]),s=s.scaleNonUniform(n,r);break;case"translate":i=parseFloat(l[0]),o=parseFloat(l[1]),s=s.translate(i,o);break;case"rotate":a=parseFloat(l[0]),i=parseFloat(l[1])||0,o=parseFloat(l[2])||0,s=0!==i||0!==o?s.translate(i,o).rotate(a).translate(-i,-o):s.rotate(a);break;case"skewx":a=parseFloat(l[0]),s=s.skewX(a);break;case"skewy":a=parseFloat(l[0]),s=s.skewY(a);break;case"matrix":s.a=parseFloat(l[0]),s.b=parseFloat(l[1]),s.c=parseFloat(l[2]),s.d=parseFloat(l[3]),s.e=parseFloat(l[4]),s.f=parseFloat(l[5]);break;default:continue}t=t.multiply(s)}}return t}function matrixToTransformString(e){const t=e||{};return`matrix(${null!=t.a?t.a:1},${null!=t.b?t.b:0},${null!=t.c?t.c:0},${null!=t.d?t.d:1},${null!=t.e?t.e:0},${null!=t.f?t.f:0})`}function parseTransformString(e){let t,n,r;if(e){const i=transformSeparatorRegex;if(e.trim().indexOf("matrix")>=0){const i=decomposeMatrix(transformStringToMatrix(e));t=[i.translateX,i.translateY],n=[i.rotation],r=[i.scaleX,i.scaleY];const o=[];0===t[0]&&0===t[1]||o.push(`translate(${t.join(",")})`),1===r[0]&&1===r[1]||o.push(`scale(${r.join(",")})`),0!==n[0]&&o.push(`rotate(${n[0]})`),e=o.join(" ")}else{const o=e.match(/translate\((.*?)\)/);o&&(t=o[1].split(i));const a=e.match(/rotate\((.*?)\)/);a&&(n=a[1].split(i));const s=e.match(/scale\((.*?)\)/);s&&(r=s[1].split(i))}}const i=r&&r[0]?parseFloat(r[0]):1;return{raw:e||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:n&&n[0]?parseInt(n[0],10):0,cx:n&&n[1]?parseInt(n[1],10):void 0,cy:n&&n[2]?parseInt(n[2],10):void 0},scale:{sx:i,sy:r&&r[1]?parseFloat(r[1]):i}}}function deltaTransformPoint(e,t){return{x:t.x*e.a+t.y*e.c+0,y:t.x*e.b+t.y*e.d+0}}function decomposeMatrix(e){const t=deltaTransformPoint(e,{x:0,y:1}),n=deltaTransformPoint(e,{x:1,y:0}),r=180/Math.PI*Math.atan2(t.y,t.x)-90;return{skewX:r,skewY:180/Math.PI*Math.atan2(n.y,n.x),translateX:e.e,translateY:e.f,scaleX:Math.sqrt(e.a*e.a+e.b*e.b),scaleY:Math.sqrt(e.c*e.c+e.d*e.d),rotation:r}}function matrixToScale(e){let t,n,r,i;return e?(t=null==e.a?1:e.a,i=null==e.d?1:e.d,n=e.b,r=e.c):t=i=1,{sx:n?Math.sqrt(t*t+n*n):t,sy:r?Math.sqrt(r*r+i*i):i}}function matrixToRotation(e){let t={x:0,y:1};return e&&(t=deltaTransformPoint(e,t)),{angle:Angle.normalize(Angle.toDeg(Math.atan2(t.y,t.x))-90)}}function matrixToTranslation(e){return{tx:e&&e.e||0,ty:e&&e.f||0}}function transformPoint(e,t){const n=createSVGPoint(e.x,e.y).matrixTransform(t);return new Point(n.x,n.y)}function transformLine(e,t){return new Line$5(transformPoint(e.start,t),transformPoint(e.end,t))}function transformRectangle(e,t){const n=svgDocument.createSVGPoint();n.x=e.x,n.y=e.y;const r=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y;const i=n.matrixTransform(t);n.x=e.x+e.width,n.y=e.y+e.height;const o=n.matrixTransform(t);n.x=e.x,n.y=e.y+e.height;const a=n.matrixTransform(t),s=Math.min(r.x,i.x,o.x,a.x),l=Math.max(r.x,i.x,o.x,a.x),c=Math.min(r.y,i.y,o.y,a.y),u=Math.max(r.y,i.y,o.y,a.y);return new Rectangle(s,c,l-s,u-c)}var __rest$B=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function bbox$1(e,t,n){let r;const i=e.ownerSVGElement;if(!i)return new Rectangle(0,0,0,0);try{r=e.getBBox()}catch(e11){r={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}if(t)return Rectangle.create(r);return transformRectangle(r,getTransformToElement(e,n||i))}function getBBox$2(e,t={}){let n;if(!e.ownerSVGElement||!isSVGGraphicsElement(e)){if(isHTMLElement(e)){const{left:t,top:n,width:r,height:i}=getBoundingOffsetRect(e);return new Rectangle(t,n,r,i)}return new Rectangle(0,0,0,0)}let r=t.target;if(!t.recursive){try{n=e.getBBox()}catch(e11){n={x:e.clientLeft,y:e.clientTop,width:e.clientWidth,height:e.clientHeight}}if(!r)return Rectangle.create(n);return transformRectangle(n,getTransformToElement(e,r))}{const t=e.childNodes,i=t.length;if(0===i)return getBBox$2(e,{target:r});r||(r=e);for(let e=0;e<i;e+=1){const i=t[e];let o;o=0===i.childNodes.length?getBBox$2(i,{target:r}):getBBox$2(i,{target:r,recursive:!0}),n=n?n.union(o):o}return n}}function getTransformToElement(e,t){if(isSVGGraphicsElement(t)&&isSVGGraphicsElement(e)){const n=t.getScreenCTM(),r=e.getScreenCTM();if(n&&r)return n.inverse().multiply(r)}return createSVGMatrix()}function toLocalPoint(e,t,n){const r=e instanceof SVGSVGElement?e:e.ownerSVGElement,i=r.createSVGPoint();i.x=t,i.y=n;try{const t=r.getScreenCTM(),n=i.matrixTransform(t.inverse()),o=getTransformToElement(e,r).inverse();return n.matrixTransform(o)}catch(e11){return i}}function toGeometryShape(e){const t=t=>{const n=e.getAttribute(t),r=n?parseFloat(n):0;return Number.isNaN(r)?0:r};switch(e instanceof SVGElement&&e.nodeName.toLowerCase()){case"rect":return new Rectangle(t("x"),t("y"),t("width"),t("height"));case"circle":return new Ellipse$4(t("cx"),t("cy"),t("r"),t("r"));case"ellipse":return new Ellipse$4(t("cx"),t("cy"),t("rx"),t("ry"));case"polyline":{const t=getPointsFromSvgElement(e);return new Polyline$2(t)}case"polygon":{const t=getPointsFromSvgElement(e);return t.length>1&&t.push(t[0]),new Polyline$2(t)}case"path":{let t=e.getAttribute("d");return Path$5.isValid(t)||(t=Path$5.normalize(t)),Path$5.parse(t)}case"line":return new Line$5(t("x1"),t("y1"),t("x2"),t("y2"))}return getBBox$2(e)}function animate(e,t){return createAnimation(e,t,"animate")}function animateTransform(e,t){return createAnimation(e,t,"animateTransform")}function createAnimation(e,t,n){const r=createSvgElement(n);e.appendChild(r);try{return setupAnimation(r,t)}catch(i){}return()=>{}}function setupAnimation(e,t){const{start:n,complete:r,repeat:i}=t;attr(e,__rest$B(t,["start","complete","repeat"])),n&&e.addEventListener("beginEvent",n),r&&e.addEventListener("endEvent",r),i&&e.addEventListener("repeatEvent",i);const o=e;return setTimeout((()=>{o.beginElement()})),()=>o.endElement()}function animateAlongPath(e,t,n){const r=ensureId(n),i=createSvgElement("animateMotion"),o=createSvgElement("mpath");attr(o,{"xlink:href":`#${r}`}),i.appendChild(o),e.appendChild(i);try{return setupAnimation(i,t)}catch(e11){if("fake"===document.documentElement.getAttribute("smiling")){const e=i;e.animators=[];const t=window,n=e.getAttribute("id");n&&(t.id2anim[n]=e);const r=t.getTargets(e);for(let i=0,o=r.length;i<o;i+=1){const n=r[i],o=new t.Animator(e,n,i);t.animators.push(o),e.animators[i]=o,o.register()}}}return()=>{}}function getBoundingOffsetRect(e){let t=0,n=0,r=0,i=0;if(e){let o=e;for(;o;)t+=o.offsetLeft,n+=o.offsetTop,o=o.offsetParent,o&&(t+=parseInt(getComputedStyle$1(o,"borderLeft"),10),n+=parseInt(getComputedStyle$1(o,"borderTop"),10));r=e.offsetWidth,i=e.offsetHeight}return{left:t,top:n,width:r,height:i}}function transform$e(e,t,n={}){if(null==t)return transformStringToMatrix(attr(e,"transform"));if(n.absolute)return void e.setAttribute("transform",matrixToTransformString(t));const r=e.transform,i=createSVGTransform(t);r.baseVal.appendItem(i)}function translate$5(e,t,n=0,r={}){let i=attr(e,"transform");const o=parseTransformString(i);if(null==t)return o.translation;i=o.raw,i=i.replace(/translate\([^)]*\)/g,"").trim();const a=`translate(${r.absolute?t:o.translation.tx+t},${r.absolute?n:o.translation.ty+n})`;e.setAttribute("transform",`${a} ${i}`.trim())}function rotate$7(e,t,n,r,i={}){let o=attr(e,"transform");const a=parseTransformString(o);if(null==t)return a.rotation;o=a.raw,o=o.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;const s=`rotate(${i.absolute?t:a.rotation.angle+t}${null!=n&&null!=r?`,${n},${r}`:""})`;e.setAttribute("transform",`${o} ${s}`.trim())}function scale$a(e,t,n){let r=attr(e,"transform");const i=parseTransformString(r);if(null==t)return i.scale;n=null==n?t:n,r=i.raw,r=r.replace(/scale\([^)]*\)/g,"").trim();const o=`scale(${t},${n})`;e.setAttribute("transform",`${r} ${o}`.trim())}function translateAndAutoOrient(e,t,n,r){const i=Point.create(t),o=Point.create(n);if(!r){r=e instanceof SVGSVGElement?e:e.ownerSVGElement}const a=scale$a(e);e.setAttribute("transform","");const s=getBBox$2(e,{target:r}).scale(a.sx,a.sy),l=createSVGTransform();l.setTranslate(-s.x-s.width/2,-s.y-s.height/2);const c=createSVGTransform(),u=i.angleBetween(o,i.clone().translate(1,0));u&&c.setRotate(u,0,0);const h=createSVGTransform(),d=i.clone().move(o,s.width/2);h.setTranslate(2*i.x-d.x,2*i.y-d.y);const f=getTransformToElement(e,r),p=createSVGTransform();p.setMatrix(h.matrix.multiply(c.matrix.multiply(l.matrix.multiply(f.scale(a.sx,a.sy))))),e.setAttribute("transform",matrixToTransformString(p.matrix))}class MouseWheelHandle{constructor(e,t,n){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=Platform.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){Platform.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):JQuery(this.target).on("mousewheel",this.onWheel)}disable(){Platform.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):JQuery(this.target).off("mousewheel")}onWheel(e){if(null!=this.onWheelGuard&&!this.onWheelGuard(e))return;let t;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),0===this.deltaX&&0===this.deltaY||(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame((()=>{this.didWheel(e)})))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function debounce$1(e,t=60){let n=null;return(...r)=>{n&&clearTimeout(n),n=window.setTimeout((()=>{e.apply(this,r)}),t)}}function createSensor$2(e){let t=null,n=[];const r=debounce$1((()=>{n.forEach((t=>t(e)))})),i=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",r),t.parentNode.removeChild(t),t=null,n=[])};return{element:e,bind:i=>{t||(t=(()=>{"static"===getComputedStyle(e).position&&(e.style.position="relative");const t=document.createElement("object");return t.onload=()=>{t.contentDocument.defaultView.addEventListener("resize",r),r()},t.style.display="block",t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.height="100%",t.style.width="100%",t.style.overflow="hidden",t.style.pointerEvents="none",t.style.zIndex="-1",t.style.opacity="0",t.setAttribute("tabindex","-1"),t.type="text/html",e.appendChild(t),t.data="about:blank",t})()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:e=>{const r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}}function createSensor$1(e){let t=null,n=[];const r=debounce$1((()=>{n.forEach((t=>{t(e)}))})),i=()=>{t&&(t.disconnect(),n=[],t=null)};return{element:e,bind:i=>{t||(t=(()=>{const t=new ResizeObserver(r);return t.observe(e),r(),t})()),-1===n.indexOf(i)&&n.push(i)},destroy:i,unbind:e=>{const r=n.indexOf(e);-1!==r&&n.splice(r,1),0===n.length&&t&&i()}}}Vector$2.isVector,Vector$2.create,Vector$2.createVectors;const createSensor="undefined"!=typeof ResizeObserver?createSensor$1:createSensor$2;var SizeSensor,Scheduler,Registry2;!function(e){const t=new WeakMap;function n(e){let n=t.get(e);return n||(n=createSensor(e),t.set(e,n),n)}e.bind=(e,t)=>{const r=n(e);return r.bind(t),()=>r.unbind(t)},e.clear=e=>{!function(e){e.destroy(),t.delete(e.element)}(n(e))}}(SizeSensor||(SizeSensor={})),function(e){const t=[],n=[];let r=0;const i=()=>performance.now(),o=e=>e[0],a=e=>1===n.push(e)&&s(),s=(()=>{const e=()=>{var e,t;return null===(t=(e=n.splice(0,n.length))[0])||void 0===t?void 0:t.call(e)};if("undefined"!=typeof MessageChannel){const{port1:t,port2:n}=new MessageChannel;return t.onmessage=e,()=>n.postMessage(null)}return()=>setTimeout(e)})(),l=()=>{r=i()+16.666666666666668;let n=o(t);for(;n&&!e.shouldYield();){const{callback:e,data:r}=n;n.callback=null;const i=e&&e(r);i?n.callback=i:t.shift(),n=o(t)}n&&a(l)};e.scheduleTask=(e,n)=>{const r={callback:e,data:n};t.push(r),a(l)},e.shouldYield=()=>{var e,t;return(null===(t=null===(e=navigator)||void 0===e?void 0:e.scheduling)||void 0===t?void 0:t.isInputPending())||i()>=r}}(Scheduler||(Scheduler={}));class Registry{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,n=!1){if("object"==typeof e)return void Object.keys(e).forEach((n=>{this.register(n,e[n],t)}));!this.exist(e)||n||Platform.isApplyingHMR()||this.onDuplicated(e);const r=this.options.process,i=r?call(r,this,e,t):t;return this.data[e]=i,i}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return!!e&&null!=this.data[e]}onDuplicated(e){try{throw this.options.onConflict&&call(this.options.onConflict,this,e),new Error(`${upperFirst$2(this.options.type)} with name '${e}' already registered.`)}catch(err){throw err}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const n=this.getSpellingSuggestionForName(e),r=t?`${t} ${lowerFirst$2(this.options.type)}`:this.options.type;return`${upperFirst$2(r)} with name '${e}' does not exist.${n?` Did you mean '${n}'?`:""}`}getSpellingSuggestionForName(e){return getSpellingSuggestion(e,Object.keys(this.data),(e=>e))}}Registry2=Registry||(Registry={}),Registry2.create=function(e){return new Registry2(e)};const raw={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},ref={},refX={position:positionWrapper("x","width","origin")},refY={position:positionWrapper("y","height","origin")},refDx={position:positionWrapper("x","width","corner")},refDy={position:positionWrapper("y","height","corner")},refWidth={set:setWrapper("width","width")},refHeight={set:setWrapper("height","height")},refRx={set:setWrapper("rx","width")},refRy={set:setWrapper("ry","height")},refRInscribed={set:(e=>{const t=setWrapper("r","width"),n=setWrapper("r","height");return function(e,r){const i=r.refBBox;return call(i.height>i.width?t:n,this,e,r)}})()},refRCircumscribed={set(e,{refBBox:t}){let n=parseFloat(e);const r=isPercentage$1(e);r&&(n/=100);const i=Math.sqrt(t.height*t.height+t.width*t.width);let o;return Number.isFinite(n)&&(o=r||n>=0&&n<=1?n*i:Math.max(n+i,0)),{r:o}}},refCx={set:setWrapper("cx","width")},refCy={set:setWrapper("cy","height")},refDResetOffset={set:dWrapper({resetOffset:!0})},refDKeepOffset={set:dWrapper({resetOffset:!1})},refPointsResetOffset={set:pointsWrapper({resetOffset:!0})},refPointsKeepOffset={set:pointsWrapper({resetOffset:!1})},refR=refRInscribed,refD=refDResetOffset,refPoints=refPointsResetOffset,refX2=refX,refY2=refY,refWidth2=refWidth,refHeight2=refHeight;function positionWrapper(e,t,n){return(r,{refBBox:i})=>{if(null==r)return null;let o=parseFloat(r);const a=isPercentage$1(r);let s;if(a&&(o/=100),Number.isFinite(o)){const r=i[n];s=a||o>0&&o<1?r[e]+i[t]*o:r[e]+o}const l=new Point;return l[e]=s||0,l}}function setWrapper(e,t){return function(n,{refBBox:r}){let i=parseFloat(n);const o=isPercentage$1(n);o&&(i/=100);const a={};if(Number.isFinite(i)){const n=o||i>=0&&i<=1?i*r[t]:Math.max(i+r[t],0);a[e]=n}return a}}function shapeWrapper(e,t){const n="x6-shape",r=t&&t.resetOffset;return function(t,{view:i,elem:o,refBBox:a}){const s=i.$(o);let l=s.data(n);if(!l||l.value!==t){const r=e(t);l={value:t,shape:r,shapeBBox:r.bbox()},s.data(n,l)}const c=l.shape.clone(),u=l.shapeBBox.clone(),h=u.getOrigin(),d=a.getOrigin();u.x=d.x,u.y=d.y;const f=a.getMaxScaleToFit(u,d),p=0===u.width||0===a.width?1:f.sx,g=0===u.height||0===a.height?1:f.sy;return c.scale(p,g,h),r&&c.translate(-h.x,-h.y),c}}function dWrapper(e){const t=shapeWrapper((function(e){return Path$5.parse(e)}),e);return(e,n)=>({d:t(e,n).serialize()})}function pointsWrapper(e){const t=shapeWrapper((e=>new Polyline$2(e)),e);return(e,n)=>({points:t(e,n).serialize()})}const fill={qualify:isPlainObject$2,set:(e,{view:t})=>`url(#${t.graph.defineGradient(e)})`},stroke$1={qualify:isPlainObject$2,set(e,{view:t}){const n=t.cell,r=Object.assign({},e);if(n.isEdge()&&"linearGradient"===r.type){const e=t,i=e.sourcePoint,o=e.targetPoint;r.id=`gradient-${r.type}-${n.id}`,r.attrs=Object.assign(Object.assign({},r.attrs),{x1:i.x,y1:i.y,x2:o.x,y2:o.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(r.id)}return`url(#${t.graph.defineGradient(r)})`}},text$1={qualify:(e,{attrs:t})=>null==t.textWrap||!isPlainObject$2(t.textWrap),set(e,{view:t,elem:n,attrs:r}){const i="x6-text",o=t.$(n),a=o.data(i),s=e=>{try{return JSON.parse(e)}catch(t){return e}},l={x:r.x,eol:r.eol,annotations:s(r.annotations),textPath:s(r["text-path"]||r.textPath),textVerticalAnchor:r["text-vertical-anchor"]||r.textVerticalAnchor,displayEmpty:"true"===(r["display-empty"]||r.displayEmpty),lineHeight:r["line-height"]||r.lineHeight},c=r["font-size"]||r.fontSize,u=JSON.stringify([e,l]);if(c&&n.setAttribute("font-size",c),null==a||a!==u){const r=l.textPath;if(null!=r&&"object"==typeof r){const e=r.selector;if("string"==typeof e){const n=t.find(e)[0];n instanceof SVGPathElement&&(ensureId(n),l.textPath=Object.assign({"xlink:href":`#${n.id}`},r))}}text$2(n,`${e}`,l),o.data(i,u)}}},textWrap={qualify:isPlainObject$2,set(e,{view:t,elem:n,attrs:r,refBBox:i}){const o=e,a=o.width||0;isPercentage$1(a)?i.width*=parseFloat(a)/100:a<=0?i.width+=a:i.width=a;const s=o.height||0;let l;isPercentage$1(s)?i.height*=parseFloat(s)/100:s<=0?i.height+=s:i.height=s;let c=o.text;null==c&&(c=r.text),l=null!=c?breakText(`${c}`,i,{"font-weight":r["font-weight"]||r.fontWeight,"font-size":r["font-size"]||r.fontSize,"font-family":r["font-family"]||r.fontFamily,lineHeight:r.lineHeight},{svgDocument:t.graph.view.svg,ellipsis:o.ellipsis,hyphen:o.hyphen,breakWord:o.breakWord}):"",call(text$1.set,this,l,{view:t,elem:n,attrs:r,refBBox:i,cell:t.cell})}},isTextInUse=(e,{attrs:t})=>void 0!==t.text,lineHeight={qualify:isTextInUse},textVerticalAnchor={qualify:isTextInUse},textPath={qualify:isTextInUse},annotations={qualify:isTextInUse},eol={qualify:isTextInUse},displayEmpty={qualify:isTextInUse},title={qualify:(e,{elem:t})=>t instanceof SVGElement,set(e,{view:t,elem:n}){const r="x6-title",i=`${e}`,o=t.$(n),a=o.data(r);if(null==a||a!==i){o.data(r,i);const e=n.firstChild;if(e&&"TITLE"===e.tagName.toUpperCase()){e.textContent=i}else{const t=document.createElementNS(n.namespaceURI,"title");t.textContent=i,n.insertBefore(t,e)}}}},xAlign={offset:offsetWrapper("x","width","right")},yAlign={offset:offsetWrapper("y","height","bottom")},resetOffset={offset:(e,{refBBox:t})=>e?{x:-t.x,y:-t.y}:{x:0,y:0}};function offsetWrapper(e,t,n){return(r,{refBBox:i})=>{const o=new Point;let a;return a="middle"===r?i[t]/2:r===n?i[t]:"number"==typeof r&&Number.isFinite(r)?r>-1&&r<1?-i[t]*r:-r:isPercentage$1(r)?i[t]*parseFloat(r)/100:0,o[e]=-(i[e]+a),o}}const style$1={qualify:isPlainObject$2,set(e,{view:t,elem:n}){t.$(n).css(e)}},html={set(e,{view:t,elem:n}){t.$(n).html(`${e}`)}},filter$1={qualify:isPlainObject$2,set:(e,{view:t})=>`url(#${t.graph.defineFilter(e)})`},port={set:e=>null!=e&&"object"==typeof e&&e.id?e.id:e};function normalize$6(e,t,n){let r,i;"object"==typeof t?(r=t.x,i=t.y):(r=t,i=n);const o=Path$5.parse(e),a=o.bbox();if(a){let e=-a.height/2-a.y,t=-a.width/2-a.x;"number"==typeof r&&(t-=r),"number"==typeof i&&(e-=i),o.translate(t,e)}return o.serialize()}var __rest$A=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const block=e=>{var{size:t,width:n,height:r,offset:i,open:o}=e;return createClassicMarker({size:t,width:n,height:r,offset:i},!0===o,!0,void 0,__rest$A(e,["size","width","height","offset","open"]))},classic=e=>{var{size:t,width:n,height:r,offset:i,factor:o}=e;return createClassicMarker({size:t,width:n,height:r,offset:i},!1,!1,o,__rest$A(e,["size","width","height","offset","factor"]))};function createClassicMarker(e,t,n,r=3/4,i={}){const o=e.size||10,a=e.width||o,s=e.height||o,l=new Path$5,c={};if(t)l.moveTo(a,0).lineTo(0,s/2).lineTo(a,s),c.fill="none";else{if(l.moveTo(0,s/2),l.lineTo(a,0),!n){const e=clamp$3(r,0,1);l.lineTo(a*e,s/2)}l.lineTo(a,s),l.close()}return Object.assign(Object.assign(Object.assign({},c),i),{tagName:"path",d:normalize$6(l.serialize(),{x:null!=e.offset?e.offset:-a/2})})}var __rest$z=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const diamond=e=>{var{size:t,width:n,height:r,offset:i}=e,o=__rest$z(e,["size","width","height","offset"]);const a=t||10,s=n||a,l=r||a,c=new Path$5;return c.moveTo(0,l/2).lineTo(s/2,0).lineTo(s,l/2).lineTo(s/2,l).close(),Object.assign(Object.assign({},o),{tagName:"path",d:normalize$6(c.serialize(),null==i?-s/2:i)})};var __rest$y=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const path$2=e=>{var{d:t,offsetX:n,offsetY:r}=e,i=__rest$y(e,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:normalize$6(t,n,r)})};var __rest$x=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const cross$4=e=>{var{size:t,width:n,height:r,offset:i}=e,o=__rest$x(e,["size","width","height","offset"]);const a=t||10,s=n||a,l=r||a,c=new Path$5;return c.moveTo(0,0).lineTo(s,l).moveTo(0,l).lineTo(s,0),Object.assign(Object.assign({},o),{tagName:"path",fill:"none",d:normalize$6(c.serialize(),i||-s/2)})};var __rest$w=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const async=e=>{var{width:t,height:n,offset:r,open:i,flip:o}=e,a=__rest$w(e,["width","height","offset","open","flip"]);let s=n||6;const l=t||10,c=!0===i,u=!0===o,h=Object.assign(Object.assign({},a),{tagName:"path"});u&&(s=-s);const d=new Path$5;return d.moveTo(0,s).lineTo(l,0),c?h.fill="none":(d.lineTo(l,s),d.close()),h.d=normalize$6(d.serialize(),{x:r||-l/2,y:s/2}),h};var __rest$v=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const circle$1=e=>{var{r:t}=e,n=__rest$v(e,["r"]);const r=t||5;return Object.assign(Object.assign({cx:r},n),{tagName:"circle",r:r})},circlePlus=e=>{var{r:t}=e,n=__rest$v(e,["r"]);const r=t||5,i=new Path$5;return i.moveTo(r,0).lineTo(r,2*r),i.moveTo(0,r).lineTo(2*r,r),{children:[Object.assign(Object.assign({},circle$1({r:r})),{fill:"none"}),Object.assign(Object.assign({},n),{tagName:"path",d:normalize$6(i.serialize(),-r)})]}};var __rest$u=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const ellipse$3=e=>{var{rx:t,ry:n}=e,r=__rest$u(e,["rx","ry"]);const i=t||5,o=n||5;return Object.assign(Object.assign({cx:i},r),{tagName:"ellipse",rx:i,ry:o})},markers=Object.freeze(Object.defineProperty({__proto__:null,block:block,classic:classic,diamond:diamond,path:path$2,cross:cross$4,async:async,circle:circle$1,circlePlus:circlePlus,ellipse:ellipse$3},Symbol.toStringTag,{value:"Module"}));var Marker$5,Marker2;Marker2=Marker$5||(Marker$5={}),Marker2.presets=markers,Marker2.registry=Registry.create({type:"marker"}),Marker2.registry.register(Marker2.presets,!0),(Marker$5||(Marker$5={})).normalize=normalize$6;var __rest$t=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function qualify(e){return"string"==typeof e||isPlainObject$2(e)}const sourceMarker={qualify:qualify,set:(e,{view:t,attrs:n})=>createMarker("marker-start",e,t,n)},targetMarker={qualify:qualify,set:(e,{view:t,attrs:n})=>createMarker("marker-end",e,t,n,{transform:"rotate(180)"})},vertexMarker={qualify:qualify,set:(e,{view:t,attrs:n})=>createMarker("marker-mid",e,t,n)};function createMarker(e,t,n,r,i={}){const o="string"==typeof t?{name:t}:t,{name:a,args:s}=o,l=__rest$t(o,["name","args"]);let c=l;if(a&&"string"==typeof a){const e=Marker$5.registry.get(a);if(!e)return Marker$5.registry.onNotFound(a);c=e(Object.assign(Object.assign({},l),s))}const u=Object.assign(Object.assign(Object.assign({},normalizeAttr(r,e)),i),c);return{[e]:`url(#${n.graph.defineMarker(u)})`}}function normalizeAttr(e,t){const n={},r=e.stroke;"string"==typeof r&&(n.stroke=r,n.fill=r);let i=e.strokeOpacity;if(null==i&&(i=e["stroke-opacity"]),null==i&&(i=e.opacity),null!=i&&(n["stroke-opacity"]=i,n["fill-opacity"]=i),"marker-mid"!==t){const r=parseFloat(e.strokeWidth||e["stroke-width"]);if(Number.isFinite(r)&&r>1){const e=Math.ceil(r/2);n.refX="marker-start"===t?e:-e}}return n}const isEdgeView=(e,{view:t})=>t.cell.isEdge(),connection={qualify:isEdgeView,set(e,t){var n,r,i,o;const a=t.view,s=e.reverse||!1,l=e.stubs||0;let c;if(Number.isFinite(l)&&0!==l)if(s){let e,t;const s=a.getConnectionLength()||0;l<0?(e=(s+l)/2,t=-l):(e=l,t=s-2*l);const u=a.getConnection();c=null===(o=null===(i=null===(r=null===(n=null==u?void 0:u.divideAtLength(e))||void 0===n?void 0:n[1])||void 0===r?void 0:r.divideAtLength(t))||void 0===i?void 0:i[0])||void 0===o?void 0:o.serialize()}else{let e;if(l<0){e=((a.getConnectionLength()||0)+l)/2}else e=l;const t=a.getConnection();if(t){const n=t.divideAtLength(e),r=t.divideAtLength(-e);n&&r&&(c=`${n[0].serialize()} ${r[1].serialize()}`)}}return{d:c||a.getConnectionPathData()}}},atConnectionLengthKeepGradient={qualify:isEdgeView,set:atConnectionWrapper("getTangentAtLength",{rotate:!0})},atConnectionLengthIgnoreGradient={qualify:isEdgeView,set:atConnectionWrapper("getTangentAtLength",{rotate:!1})},atConnectionRatioKeepGradient={qualify:isEdgeView,set:atConnectionWrapper("getTangentAtRatio",{rotate:!0})},atConnectionRatioIgnoreGradient={qualify:isEdgeView,set:atConnectionWrapper("getTangentAtRatio",{rotate:!1})},atConnectionLength=atConnectionLengthKeepGradient,atConnectionRatio=atConnectionRatioKeepGradient;function atConnectionWrapper(e,t){const n={x:1,y:0};return(r,i)=>{let o,a;const s=i.view,l=s[e](Number(r));return l?(a=t.rotate?l.vector().vectorAngle(n):0,o=l.start):(o=s.path.start,a=0),0===a?{transform:`translate(${o.x},${o.y}')`}:{transform:`translate(${o.x},${o.y}') rotate(${a})`}}}const attrs=Object.freeze(Object.defineProperty({__proto__:null,ref:ref,refX:refX,refY:refY,refDx:refDx,refDy:refDy,refWidth:refWidth,refHeight:refHeight,refRx:refRx,refRy:refRy,refRInscribed:refRInscribed,refRCircumscribed:refRCircumscribed,refCx:refCx,refCy:refCy,refDResetOffset:refDResetOffset,refDKeepOffset:refDKeepOffset,refPointsResetOffset:refPointsResetOffset,refPointsKeepOffset:refPointsKeepOffset,refR:refR,refD:refD,refPoints:refPoints,refX2:refX2,refY2:refY2,refWidth2:refWidth2,refHeight2:refHeight2,fill:fill,stroke:stroke$1,text:text$1,textWrap:textWrap,lineHeight:lineHeight,textVerticalAnchor:textVerticalAnchor,textPath:textPath,annotations:annotations,eol:eol,displayEmpty:displayEmpty,title:title,xAlign:xAlign,yAlign:yAlign,resetOffset:resetOffset,style:style$1,html:html,filter:filter$1,port:port,sourceMarker:sourceMarker,targetMarker:targetMarker,vertexMarker:vertexMarker,connection:connection,atConnectionLengthKeepGradient:atConnectionLengthKeepGradient,atConnectionLengthIgnoreGradient:atConnectionLengthIgnoreGradient,atConnectionRatioKeepGradient:atConnectionRatioKeepGradient,atConnectionRatioIgnoreGradient:atConnectionRatioIgnoreGradient,atConnectionLength:atConnectionLength,atConnectionRatio:atConnectionRatio},Symbol.toStringTag,{value:"Module"}));var Attr,Attr2;(Attr||(Attr={})).isValidDefinition=function(e,t,n){if(null!=e){if("string"==typeof e)return!0;if("function"!=typeof e.qualify||call(e.qualify,this,t,n))return!0}return!1},Attr2=Attr||(Attr={}),Attr2.presets=Object.assign(Object.assign({},raw),attrs),Attr2.registry=Registry.create({type:"attribute definition"}),Attr2.registry.register(Attr2.presets,!0);const dot$5={color:"#aaaaaa",thickness:1,markup:"rect",update(e,t){const n=t.thickness*t.sx,r=t.thickness*t.sy;attr(e,{width:n,height:r,rx:n,ry:r,fill:t.color})}},fixedDot={color:"#aaaaaa",thickness:1,markup:"rect",update(e,t){const n=t.sx<=1?t.thickness*t.sx:t.thickness;attr(e,{width:n,height:n,rx:n,ry:n,fill:t.color})}},mesh={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(e,t){let n;const r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}},doubleMesh=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(e,t){let n;const r=t.width,i=t.height,o=t.thickness;n=r-o>=0&&i-o>=0?["M",r,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(e,t){let n;const r=t.factor||1,i=t.width*r,o=t.height*r,a=t.thickness;n=i-a>=0&&o-a>=0?["M",i,0,"H0 M0 0 V0",o].join(" "):"M 0 0 0 0",t.width=i,t.height=o,attr(e,{d:n,stroke:t.color,"stroke-width":t.thickness})}}],patterns$1=Object.freeze(Object.defineProperty({__proto__:null,dot:dot$5,fixedDot:fixedDot,mesh:mesh,doubleMesh:doubleMesh},Symbol.toStringTag,{value:"Module"}));class Grid$3{constructor(){this.patterns={},this.root=Vector$2.create(createSvgDocument(),{width:"100%",height:"100%"},[createSvgElement("defs")]).node}add(e,t){const n=this.root.childNodes[0];n&&n.appendChild(t),this.patterns[e]=t,Vector$2.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return null!=this.patterns[e]}}var Grid2;function getString(e,t){return null!=e?e:t}function getNumber(e,t){return null!=e&&Number.isFinite(e)?e:t}function outline(e={}){const t=getString(e.color,"blue"),n=getNumber(e.width,1),r=getNumber(e.margin,2);return`\n    <filter>\n      <feFlood flood-color="${t}" flood-opacity="${getNumber(e.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${r+n}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${r}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function highlight(e={}){const t=getString(e.color,"red"),n=getNumber(e.blur,0),r=getNumber(e.width,1);return`\n      <filter>\n        <feFlood flood-color="${t}" flood-opacity="${getNumber(e.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${r}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${n}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function blur(e={}){const t=getNumber(e.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=e.y&&Number.isFinite(e.y)?[t,e.y]:t}"/>\n    </filter>\n  `.trim()}function dropShadow(e={}){const t=getNumber(e.dx,0),n=getNumber(e.dy,0),r=getString(e.color,"black"),i=getNumber(e.blur,4),o=getNumber(e.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${i}" dx="${t}" dy="${n}" flood-color="${r}" flood-opacity="${o}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />\n         <feOffset dx="${t}" dy="${n}" result="offsetblur" />\n         <feFlood flood-color="${r}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${o}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function grayScale(e={}){const t=getNumber(e.amount,1),n=.7152-.7152*(1-t);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-t)} ${n} ${.0722-.0722*(1-t)} 0 0 ${.2126-.2126*(1-t)} ${.7152+.2848*(1-t)} ${.0722-.0722*(1-t)} 0 0 ${.2126-.2126*(1-t)} ${n} ${.0722+.9278*(1-t)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function sepia(e={}){const t=getNumber(e.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-t)} ${.769-.769*(1-t)} ${.189-.189*(1-t)} 0 0 ${.349-.349*(1-t)} ${.686+.314*(1-t)} ${.168-.168*(1-t)} 0 0 ${.272-.272*(1-t)} ${.534-.534*(1-t)} ${.131+.869*(1-t)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function saturate$1(e={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-getNumber(e.amount,1)}"/>\n      </filter>\n    `.trim()}function hueRotate(e={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${getNumber(e.angle,0)}"/>\n      </filter>\n    `.trim()}function invert$7(e={}){const t=getNumber(e.amount,1),n=1-t;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${t} ${n}"/>\n          <feFuncG type="table" tableValues="${t} ${n}"/>\n          <feFuncB type="table" tableValues="${t} ${n}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function brightness(e={}){const t=getNumber(e.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${t}"/>\n        <feFuncG type="linear" slope="${t}"/>\n        <feFuncB type="linear" slope="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function contrast(e={}){const t=getNumber(e.amount,1),n=.5-t/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${t}" intercept="${n}"/>\n        <feFuncG type="linear" slope="${t}" intercept="${n}"/>\n        <feFuncB type="linear" slope="${t}" intercept="${n}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}Grid2=Grid$3||(Grid$3={}),Grid2.presets=patterns$1,Grid2.registry=Registry.create({type:"grid"}),Grid2.registry.register(Grid2.presets,!0);const filters=Object.freeze(Object.defineProperty({__proto__:null,outline:outline,highlight:highlight,blur:blur,dropShadow:dropShadow,grayScale:grayScale,sepia:sepia,saturate:saturate$1,hueRotate:hueRotate,invert:invert$7,brightness:brightness,contrast:contrast},Symbol.toStringTag,{value:"Module"}));var Filter,Filter2;Filter2=Filter||(Filter={}),Filter2.presets=filters,Filter2.registry=Registry.create({type:"filter"}),Filter2.registry.register(Filter2.presets,!0);const flipX=function(e){const t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=r;const i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(2*n,0),i.scale(-1,1),i.drawImage(e,0,0,n,r),t},flipY=function(e){const t=document.createElement("canvas"),n=e.width,r=e.height;t.width=n,t.height=2*r;const i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.translate(0,2*r),i.scale(1,-1),i.drawImage(e,0,0,n,r),t},flipXY=function(e){const t=document.createElement("canvas"),n=e.width,r=e.height;t.width=2*n,t.height=2*r;const i=t.getContext("2d");return i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,-1,t.width,t.height),i.drawImage(e,0,0,n,r),i.setTransform(-1,0,0,1,t.width,0),i.drawImage(e,0,0,n,r),i.setTransform(1,0,0,-1,0,t.height),i.drawImage(e,0,0,n,r),t},watermark=function(e,t){const n=e.width,r=e.height,i=document.createElement("canvas");i.width=3*n,i.height=3*r;const o=i.getContext("2d"),a=null!=t.angle?-t.angle:-20,s=Angle.toRad(a),l=i.width/4,c=i.height/4;for(let u=0;u<4;u+=1)for(let t=0;t<4;t+=1)(u+t)%2>0&&(o.setTransform(1,0,0,1,(2*u-1)*l,(2*t-1)*c),o.rotate(s),o.drawImage(e,-n/2,-r/2,n,r));return i},patterns=Object.freeze(Object.defineProperty({__proto__:null,flipX:flipX,flipY:flipY,flipXY:flipXY,watermark:watermark},Symbol.toStringTag,{value:"Module"}));var Background,Background2;Background2=Background||(Background={}),Background2.presets=Object.assign({},patterns),Background2.presets["flip-x"]=flipX,Background2.presets["flip-y"]=flipY,Background2.presets["flip-xy"]=flipXY,Background2.registry=Registry.create({type:"background pattern"}),Background2.registry.register(Background2.presets,!0);const Config={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track(e){Config.trackable=e}};var Util$4,Util2;Util2=Util$4||(Util$4={}),Util2.snapToGrid=snapToGrid,Util2.normalizeMarker=normalize$6,Util2.prefix=function(e){return`${Config.prefixCls}-${e}`},(Util$4||(Util$4={})).makeTree=function(e,t,n,r=[]){const i="function"==typeof t.children?t.children(e):e[t.children||"children"];return n||(n=t.createNode(e),r.push(n)),Array.isArray(i)&&i.forEach((e=>{const i=t.createNode(e),o=t.createEdge(n,i);r.push(i,o),this.makeTree(e,t,i,r)})),r};const defaultClassName=Util$4.prefix("highlighted"),className$1={highlight(e,t,n){addClass(t,n&&n.className||defaultClassName)},unhighlight(e,t,n){removeClass(t,n&&n.className||defaultClassName)}},className=Util$4.prefix("highlight-opacity"),opacity={highlight(e,t){addClass(t,className)},unhighlight(e,t){removeClass(t,className)}},defaultOptions={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},stroke={highlight(e,t,n){const r=Private$8.getHighlighterId(t,n);if(Private$8.hasCache(r))return;n=defaultsDeep$1({},n,defaultOptions);const i=Vector$2.create(t);let o,a;try{o=i.toPathData()}catch(u){a=i.bbox(!0),o=rectToPathData(Object.assign(Object.assign({},n),a))}const s=createSvgElement("path");if(attr(s,Object.assign({d:o,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},n.attrs?kebablizeAttrs(n.attrs):null)),e.isEdgeElement(t))attr(s,"d",e.getConnectionPathData());else{let t=i.getTransformToElement(e.container);const r=n.padding;if(r){null==a&&(a=i.bbox(!0));const e=a.x+a.width/2,n=a.y+a.height/2;a=transformRectangle(a,t);const o=Math.max(a.width,1),s=Math.max(a.height,1),l=(o+r)/o,c=(s+r)/s,u=createSVGMatrix({a:l,b:0,c:0,d:c,e:e-l*e,f:n-c*n});t=t.multiply(u)}transform$e(s,t)}addClass(s,Util$4.prefix("highlight-stroke"));const l=e.cell,c=()=>Private$8.removeHighlighter(r);l.on("removed",c),l.model&&l.model.on("reseted",c),e.container.appendChild(s),Private$8.setCache(r,s)},unhighlight(e,t,n){Private$8.removeHighlighter(Private$8.getHighlighterId(t,n))}};var Private$8;!function(e){e.getHighlighterId=function(e,t){return ensureId(e),e.id+JSON.stringify(t)};const t={};e.setCache=function(e,n){t[e]=n},e.hasCache=function(e){return null!=t[e]},e.removeHighlighter=function(e){const n=t[e];n&&(remove$1(n),delete t[e])}}(Private$8||(Private$8={}));const highlighters=Object.freeze(Object.defineProperty({__proto__:null,className:className$1,opacity:opacity,stroke:stroke},Symbol.toStringTag,{value:"Module"}));var Highlighter,Highlighter2;function normalizePoint$1(e,t={}){return new Point(normalizePercentage(t.x,e.width),normalizePercentage(t.y,e.height))}function toResult$1(e,t,n){return Object.assign({angle:t,position:e.toJSON()},n)}(Highlighter||(Highlighter={})).check=function(e,t){if("function"!=typeof t.highlight)throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if("function"!=typeof t.unhighlight)throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)},Highlighter2=Highlighter||(Highlighter={}),Highlighter2.presets=highlighters,Highlighter2.registry=Registry.create({type:"highlighter"}),Highlighter2.registry.register(Highlighter2.presets,!0);const absolute=(e,t)=>e.map((({x:e,y:n,angle:r})=>toResult$1(normalizePoint$1(t,{x:e,y:n}),r||0))),ellipse$2=(e,t,n)=>{const r=n.start||0,i=n.step||20;return ellipseLayout(e,t,r,((e,t)=>(e+.5-t/2)*i))},ellipseSpread=(e,t,n)=>{const r=n.start||0,i=n.step||360/e.length;return ellipseLayout(e,t,r,(e=>e*i))};function ellipseLayout(e,t,n,r){const i=t.getCenter(),o=t.getTopCenter(),a=t.width/t.height,s=Ellipse$4.fromRect(t),l=e.length;return e.map(((e,t)=>{const c=n+r(t,l),u=o.clone().rotate(-c,i).scale(a,1,i),h=e.compensateRotate?-s.tangentTheta(u):0;return(e.dx||e.dy)&&u.translate(e.dx||0,e.dy||0),e.dr&&u.move(i,e.dr),toResult$1(u.round(),h,e)}))}var __rest$s=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const line$1=(e,t,n)=>lineLayout(e,normalizePoint$1(t,n.start||t.getOrigin()),normalizePoint$1(t,n.end||t.getCorner()),n),left$2=(e,t,n)=>lineLayout(e,t.getTopLeft(),t.getBottomLeft(),n),right$2=(e,t,n)=>lineLayout(e,t.getTopRight(),t.getBottomRight(),n),top$2=(e,t,n)=>lineLayout(e,t.getTopLeft(),t.getTopRight(),n),bottom$2=(e,t,n)=>lineLayout(e,t.getBottomLeft(),t.getBottomRight(),n);function lineLayout(e,t,n,r){const i=new Line$5(t,n),o=e.length;return e.map(((e,t)=>{var{strict:n}=e,a=__rest$s(e,["strict"]);const s=n||r.strict?(t+1)/(o+1):(t+.5)/o,l=i.pointAt(s);return(a.dx||a.dy)&&l.translate(a.dx||0,a.dy||0),toResult$1(l.round(),0,a)}))}const layouts$1=Object.freeze(Object.defineProperty({__proto__:null,absolute:absolute,ellipse:ellipse$2,ellipseSpread:ellipseSpread,line:line$1,left:left$2,right:right$2,top:top$2,bottom:bottom$2},Symbol.toStringTag,{value:"Module"}));var PortLayout,PortLayout2;PortLayout2=PortLayout||(PortLayout={}),PortLayout2.presets=layouts$1,PortLayout2.registry=Registry.create({type:"port layout"}),PortLayout2.registry.register(PortLayout2.presets,!0);const defaults$2={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function toResult(e,t){const{x:n,y:r,angle:i,attrs:o}=t||{};return defaultsDeep$1({},{angle:i,attrs:o,position:{x:n,y:r}},e,defaults$2)}const manual=(e,t,n)=>toResult({position:t.getTopLeft()},n),left$1=(e,t,n)=>toResult({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},n),right$1=(e,t,n)=>toResult({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},n),top$1=(e,t,n)=>toResult({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},n),bottom$1=(e,t,n)=>toResult({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},n),outside=(e,t,n)=>outsideLayout(e,t,!1,n),outsideOriented=(e,t,n)=>outsideLayout(e,t,!0,n),inside=(e,t,n)=>insideLayout(e,t,!1,n),insideOriented=(e,t,n)=>insideLayout(e,t,!0,n);function outsideLayout(e,t,n,r){const i=null!=r.offset?r.offset:15,o=t.getCenter().theta(e),a=getBBoxAngles(t);let s,l,c,u,h=0;return o<a[1]||o>a[2]?(s=".3em",l=i,c=0,u="start"):o<a[0]?(s="0",l=0,c=-i,n?(h=-90,u="start"):u="middle"):o<a[3]?(s=".3em",l=-i,c=0,u="end"):(s=".6em",l=0,c=i,n?(h=90,u="start"):u="middle"),toResult({position:{x:Math.round(l),y:Math.round(c)},angle:h,attrs:{".":{y:s,"text-anchor":u}}},r)}function insideLayout(e,t,n,r){const i=null!=r.offset?r.offset:15,o=t.getCenter().theta(e),a=getBBoxAngles(t);let s,l,c,u,h=0;return o<a[1]||o>a[2]?(s=".3em",l=-i,c=0,u="end"):o<a[0]?(s=".6em",l=0,c=i,n?(h=90,u="start"):u="middle"):o<a[3]?(s=".3em",l=i,c=0,u="start"):(s="0em",l=0,c=-i,n?(h=-90,u="start"):u="middle"),toResult({position:{x:Math.round(l),y:Math.round(c)},angle:h,attrs:{".":{y:s,"text-anchor":u}}},r)}function getBBoxAngles(e){const t=e.getCenter(),n=t.theta(e.getTopLeft()),r=t.theta(e.getBottomLeft()),i=t.theta(e.getBottomRight());return[n,t.theta(e.getTopRight()),i,r]}const radial$3=(e,t,n)=>radialLayout$3(e.diff(t.getCenter()),!1,n),radialOriented=(e,t,n)=>radialLayout$3(e.diff(t.getCenter()),!0,n);function radialLayout$3(e,t,n){const r=null!=n.offset?n.offset:20,i=new Point(0,0),o=-e.theta(i);let a,s=".3em",l=o;return(o+90)%180==0?(a=t?"end":"middle",t||-270!==o||(s="0em")):o>-270&&o<-90?(a="start",l=o-180):a="end",toResult({position:e.clone().move(i,r).diff(e).round().round().toJSON(),angle:t?l:0,attrs:{".":{y:s,"text-anchor":a}}},n)}const layouts=Object.freeze(Object.defineProperty({__proto__:null,manual:manual,left:left$1,right:right$1,top:top$1,bottom:bottom$1,outside:outside,outsideOriented:outsideOriented,inside:inside,insideOriented:insideOriented,radial:radial$3,radialOriented:radialOriented},Symbol.toStringTag,{value:"Module"}));var PortLabelLayout,PortLabelLayout2,Private$7,DisposableSet2;PortLabelLayout2=PortLabelLayout||(PortLabelLayout={}),PortLabelLayout2.presets=layouts,PortLabelLayout2.registry=Registry.create({type:"port label layout"}),PortLabelLayout2.registry.register(PortLabelLayout2.presets,!0);class Color$2{constructor(e,t,n,r){return null==e?this.set(255,255,255,1):"number"==typeof e?this.set(e,t,n,r):"string"==typeof e?Color$2.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,null==e.a?1:e.a)}blend(e,t,n){this.set(e.r+(t.r-e.r)*n,e.g+(t.g-e.g)*n,e.b+(t.b-e.b)*n,e.a+(t.a-e.a)*n)}lighten(e){const t=Color$2.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,n,r){const i=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:n,s=Array.isArray(e)?e[3]:r;return this.r=Math.round(clamp$3(i,0,255)),this.g=Math.round(clamp$3(o,0,255)),this.b=Math.round(clamp$3(a,0,255)),this.a=null==s?1:clamp$3(s,0,1),this}toHex(){return`#${["r","g","b"].map((e=>{const t=this[e].toString(16);return t.length<2?`0${t}`:t})).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return Color$2.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return Color$2.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}!function(e){function t(t){return new e([...s(t),1])}function n(t){const n=t.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(n){const t=n[1].split(/\s*,\s*/).map((e=>parseInt(e,10)));return new e(t)}return null}function r(e,t,n){n<0&&++n,n>1&&--n;const r=6*n;return r<1?e+(t-e)*r:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function i(t){const n=t.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(n){const t=n[2].split(/\s*,\s*/),r=(parseFloat(t[0])%360+360)%360/360,i=parseFloat(t[1])/100,a=parseFloat(t[2])/100,s=null==t[3]?1:parseInt(t[3],10);return new e(o(r,i,a,s))}return null}function o(e,t,n,i){const o=Array.isArray(e)?e[0]:e,a=Array.isArray(e)?e[1]:t,s=Array.isArray(e)?e[2]:n,l=Array.isArray(e)?e[3]:i,c=s<=.5?s*(a+1):s+a-s*a,u=2*s-c;return[256*r(u,c,o+1/3),256*r(u,c,o),256*r(u,c,o-1/3),null==l?1:l]}function a(t){return new e(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),t?void 0:parseFloat(Math.random().toFixed(2)))}function s(e){const t=0===e.indexOf("#")?e:`#${e}`;let n=Number(`0x${t.substr(1)}`);if(4!==t.length&&7!==t.length||Number.isNaN(n))throw new Error("Invalid hex color.");const r=4===t.length?4:8,i=(1<<r)-1,o=["b","g","r"].map((()=>{const e=n&i;return n>>=r,4===r?17*e:e}));return[o[2],o[1],o[0]]}function l(e,t,n){const r=e=>e.length<2?`0${e}`:e;return`${r(e.toString(16))}${r(t.toString(16))}${r(n.toString(16))}`}function c(e,t){if("string"==typeof e){const n="#"===e[0],r=parseInt(n?e.substr(1):e,16),i=clamp$3((r>>16)+t,0,255),o=clamp$3((r>>8&255)+t,0,255);return`${n?"#":""}${(clamp$3((255&r)+t,0,255)|o<<8|i<<16).toString(16)}`}const n=s(c(l(e[0],e[1],e[2]),t));return[n[0],n[1],n[2],e[3]]}e.fromArray=function(t){return new e(t)},e.fromHex=t,e.fromRGBA=n,e.fromHSLA=i,e.fromString=function(r){if(r.startsWith("#"))return t(r);if(r.startsWith("rgb"))return n(r);const o=e.named[r];return o?t(o):i(r)},e.makeGrey=function(t,n){return e.fromArray([t,t,t,n])},e.rgba2hsla=function(e,t,n,r){const i=Array.isArray(e)?e[0]:e,o=Array.isArray(e)?e[1]:t,a=Array.isArray(e)?e[2]:n,s=Array.isArray(e)?e[3]:r,l=Math.max(i,o,a),c=Math.min(i,o,a),u=(l+c)/2;let h=0,d=0;if(c!==l){const e=l-c;switch(d=u>.5?e/(2-l-c):e/(l+c),l){case i:h=(o-a)/e+(o<a?6:0);break;case o:h=(a-i)/e+2;break;case a:h=(i-o)/e+4}h/=6}return[h,d,u,null==s?1:s]},e.hsla2rgba=o,e.random=a,e.randomHex=function(){let e="#";for(let t=0;t<6;t+=1)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e},e.randomRGBA=function(e){return a(e).toString()},e.invert=function(e,t){if("string"==typeof e){const n="#"===e[0],[r,i,o]=s(e);return t?.299*r+.587*i+.114*o>186?"#000000":"#ffffff":`${n?"#":""}${l(255-r,255-i,255-o)}`}const n=e[0],r=e[1],i=e[2],o=e[3];return t?.299*n+.587*r+.114*i>186?[0,0,0,o]:[255,255,255,o]:[255-n,255-r,255-i,o]},e.lighten=function(e,t){return c(e,t)},e.darken=function(e,t){return c(e,-t)}}(Color$2||(Color$2={})),(Color$2||(Color$2={})).named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};class Events{constructor(){this.listeners={}}on(e,t,n){if(null==t)return this;this.listeners[e]||(this.listeners[e]=[]);return this.listeners[e].push(t,n),this}once(e,t,n){const r=(...i)=>(this.off(e,r),Private$7.call([t,n],i));return this.on(e,r,this)}off(e,t,n){if(!(e||t||n))return this.listeners={},this;const r=this.listeners;return(e?[e]:Object.keys(r)).forEach((e=>{const i=r[e];if(i)if(t||n)for(let r=i.length-2;r>=0;r-=2)t&&i[r]!==t||n&&i[r+1]!==n||i.splice(r,2);else delete r[e]})),this}trigger(e,...t){let n=!0;if("*"!==e){const r=this.listeners[e];null!=r&&(n=Private$7.call([...r],t))}const r=this.listeners["*"];return null!=r?toAsyncBoolean([n,Private$7.call([...r],[e,...t])]):n}emit(e,...t){return this.trigger(e,...t)}}(Private$7||(Private$7={})).call=function(e,t){const n=[];for(let r=0;r<e.length;r+=2){const i=apply$1(e[r],e[r+1],Array.isArray(t)?t:[t]);n.push(i)}return toAsyncBoolean(n)};class Disposable{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}(Disposable||(Disposable={})).dispose=function(){return(e,t,n)=>{const r=n.value,i=e.__proto__;n.value=function(){this.disposed||(r.call(this),i.dispose.call(this))}}};class DisposableSet{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach((e=>{e.dispose()})),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}DisposableSet2=DisposableSet||(DisposableSet={}),DisposableSet2.from=function(e){const t=new DisposableSet2;return e.forEach((e=>{t.add(e)})),t};class Basecoat extends Events{}(Basecoat||(Basecoat={})).dispose=Disposable.dispose,applyMixins(Basecoat,Disposable);class Disablable extends Basecoat{get disabled(){return!0===this._disabled}enable(){delete this._disabled}disable(){this._disabled=!0}}var __decorate$u=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Dijkstra,Timing,Timing2,Interp,Interp2,LocalStorage,View2,Private$6;class Dictionary extends Disposable{constructor(){super(),this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const n=this.map.get(e);return this.map.delete(e),n}each(e){this.arr.forEach((t=>{const n=this.map.get(t);e(n,t)}))}dispose(){this.clear()}}__decorate$u([Disposable.dispose()],Dictionary.prototype,"dispose",null);class PriorityQueue$1{constructor(e={}){this.comparator=e.comparator||PriorityQueue$1.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(e,t,n){const r={priority:e,value:t},i=this.data.length-1;return n&&(r.id=n,this.index[n]=i),this.data.push(r),this.bubbleUp(i),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const n=this.index[e];if(void 0===n)throw new Error(`Node with id '${e}' was not found in the heap.`);const r=this.data,i=r[n].priority,o=this.comparator(t,i);o<0?(r[n].priority=t,this.bubbleUp(n)):o>0&&(r[n].priority=t,this.bubbleDown(n))}remove(){const e=this.data,t=e[0],n=e.pop();return delete this.index[e.length],e.length>0&&(e[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let n,r,i=e;for(;i>0&&(r=i-1>>>1,this.comparator(t[i].priority,t[r].priority)<0);){n=t[r],t[r]=t[i];let e=t[i].id;null!=e&&(this.index[e]=r),t[i]=n,e=t[i].id,null!=e&&(this.index[e]=i),i=r}}bubbleDown(e){const t=this.data,n=t.length-1;let r=e;for(;;){const e=1+(r<<1),i=e+1;let o=r;if(e<=n&&this.comparator(t[e].priority,t[o].priority)<0&&(o=e),i<=n&&this.comparator(t[i].priority,t[o].priority)<0&&(o=i),o===r)break;{const e=t[o];t[o]=t[r];let n=t[r].id;null!=n&&(this.index[n]=o),t[r]=e,n=t[r].id,null!=n&&(this.index[n]=r),r=o}}}}(PriorityQueue$1||(PriorityQueue$1={})).defaultComparator=(e,t)=>e-t,(Dijkstra||(Dijkstra={})).run=function(e,t,n=((e,t)=>1)){const r={},i={},o={},a=new PriorityQueue$1;for(r[t]=0,Object.keys(e).forEach((e=>{e!==t&&(r[e]=1/0),a.insert(r[e],e,e)}));!a.isEmpty();){const t=a.remove();o[t]=!0;const s=e[t]||[];for(let e=0;e<s.length;e+=1){const l=s[e];if(!o[l]){const e=r[t]+n(t,l);e<r[l]&&(r[l]=e,i[l]=t,a.updatePriority(l,e))}}}return i},Timing2=Timing||(Timing={}),Timing2.linear=e=>e,Timing2.quad=e=>e*e,Timing2.cubic=e=>e*e*e,Timing2.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},Timing2.exponential=e=>Math.pow(2,10*(e-1)),Timing2.bounce=e=>{for(let t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){const r=(11-6*t-11*e)/4;return-r*r+n*n}},(Timing||(Timing={})).decorators={reverse:e=>t=>1-e(1-t),reflect:e=>t=>.5*(t<.5?e(2*t):2-e(2-2*t)),clamp:(e,t=0,n=1)=>r=>{const i=e(r);return i<t?t:i>n?n:i},back:(e=1.70158)=>t=>t*t*((e+1)*t-e),elastic:(e=1.5)=>t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)},function(e){function t(e){const t=e/1;if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75){const e=t-1.5/2.75;return 7.5625*e*e+.75}if(t<2.5/2.75){const e=t-2.25/2.75;return 7.5625*e*e+.9375}{const e=t-2.625/2.75;return 7.5625*e*e+.984375}}function n(e){return 1-t(1-e)}e.easeInSine=function(e){return-1*Math.cos(e*(Math.PI/2))+1},e.easeOutSine=function(e){return Math.sin(e*(Math.PI/2))},e.easeInOutSine=function(e){return-.5*(Math.cos(Math.PI*e)-1)},e.easeInQuad=function(e){return e*e},e.easeOutQuad=function(e){return e*(2-e)},e.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},e.easeInCubic=function(e){return e*e*e},e.easeOutCubic=function(e){const t=e-1;return t*t*t+1},e.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},e.easeInQuart=function(e){return e*e*e*e},e.easeOutQuart=function(e){const t=e-1;return 1-t*t*t*t},e.easeInOutQuart=function(e){const t=e-1;return e<.5?8*e*e*e*e:1-8*t*t*t*t},e.easeInQuint=function(e){return e*e*e*e*e},e.easeOutQuint=function(e){const t=e-1;return 1+t*t*t*t*t},e.easeInOutQuint=function(e){const t=e-1;return e<.5?16*e*e*e*e*e:1+16*t*t*t*t*t},e.easeInExpo=function(e){return 0===e?0:Math.pow(2,10*(e-1))},e.easeOutExpo=function(e){return 1===e?1:1-Math.pow(2,-10*e)},e.easeInOutExpo=function(e){if(0===e||1===e)return e;const t=2*e,n=t-1;return t<1?.5*Math.pow(2,10*n):.5*(2-Math.pow(2,-10*n))},e.easeInCirc=function(e){const t=e/1;return-1*(Math.sqrt(1-t*e)-1)},e.easeOutCirc=function(e){const t=e-1;return Math.sqrt(1-t*t)},e.easeInOutCirc=function(e){const t=2*e,n=t-2;return t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-n*n)+1)},e.easeInBack=function(e,t=1.70158){return e*e*((t+1)*e-t)},e.easeOutBack=function(e,t=1.70158){const n=e/1-1;return n*n*((t+1)*n+t)+1},e.easeInOutBack=function(e,t=1.70158){const n=2*e,r=n-2,i=1.525*t;return n<1?.5*n*n*((i+1)*n-i):.5*(r*r*((i+1)*r+i)+2)},e.easeInElastic=function(e,t=.7){if(0===e||1===e)return e;const n=e/1-1,r=1-t,i=r/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*n)*Math.sin((n-i)*(2*Math.PI)/r)},e.easeOutElastic=function(e,t=.7){const n=1-t,r=2*e;if(0===e||1===e)return e;const i=n/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*r)*Math.sin((r-i)*(2*Math.PI)/n)+1},e.easeInOutElastic=function(e,t=.65){const n=1-t;if(0===e||1===e)return e;const r=2*e,i=r-1,o=n/(2*Math.PI)*Math.asin(1);return r<1?Math.pow(2,10*i)*Math.sin((i-o)*(2*Math.PI)/n)*-.5:Math.pow(2,-10*i)*Math.sin((i-o)*(2*Math.PI)/n)*.5+1},e.easeOutBounce=t,e.easeInBounce=n,e.easeInOutBounce=function(e){return e<.5?.5*n(2*e):.5*t(2*e-1)+.5}}(Timing||(Timing={})),Interp2=Interp||(Interp={}),Interp2.number=(e,t)=>{const n=t-e;return t=>e+n*t},Interp2.object=(e,t)=>{const n=Object.keys(e);return r=>{const i={};for(let o=n.length-1;-1!==o;o-=1){const a=n[o];i[a]=e[a]+(t[a]-e[a])*r}return i}},Interp2.unit=(e,t)=>{const n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,r=n.exec(e),i=n.exec(t),o=i?i[1]:"",a=r?+r[1]:0,s=i?+i[1]:0,l=o.indexOf("."),c=l>0?o[1].length-l-1:0,u=s-a,h=r?r[2]:"";return e=>(a+u*e).toFixed(c)+h},Interp2.color=(e,t)=>{const n=parseInt(e.slice(1),16),r=parseInt(t.slice(1),16),i=255&n,o=(255&r)-i,a=65280&n,s=(65280&r)-a,l=16711680&n,c=(16711680&r)-l;return e=>`#${(1<<24|i+o*e&255|a+s*e&65280|l+c*e&16711680).toString(16).slice(1)}`},function(e){const t=`${Config.prefixCls}.storage`;function n(e,t,n){e&&defer$1((()=>{e(t,n)}))}function r(e,t){localStorage.setItem(e,JSON.stringify(t))}function i(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}function o(e){const t=i(s(e));return t?(null==t.keys&&(t.keys=[]),t):{keys:[]}}function a(e,n){return`${t}.${e}.docs.${n}`}function s(e){return`${t}.${e}.index`}e.insert=function(e,t,i){const l=t.id||uniqueId$5("doc-"),c=o(e);c.keys.push(l),r(a(e,l),t),r(s(e),c),n(i,null,Object.assign(Object.assign({},t),{id:l}))},e.find=function(e,t,r){const s=o(e),l=[];if(null==t)s.keys.forEach((t=>{const o=i(a(e,t));o?l.push(o):n(r,new Error(`No document found for an ID '${t}' from index.`))})),n(r,null,l);else if(t.id){const o=i(a(e,t.id));n(r,null,o?[o]:[])}else n(r,null,[])},e.remove=function(e,t,i){const l=o(e);if(null==t)l.keys.forEach((t=>{localStorage.removeItem(a(e,t))})),localStorage.removeItem(s(e)),n(i,null);else if(t.id){const o=l.keys.indexOf(t.id);o>=0&&l.keys.splice(o,1),localStorage.removeItem(a(e,t.id)),r(s(e),l),n(i,null)}}}(LocalStorage||(LocalStorage={}));class View extends Basecoat{constructor(){super(),this.cid=Private$6.uniqueId(),View.views[this.cid]=this}get priority(){return 2}confirmUpdate(e,t){return 0}$(e){return View.$(e)}empty(e=this.container){return this.$(e).empty(),this}unmount(e=this.container){return this.$(e).remove(),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete View.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return this.$(t).css(e),this}setAttrs(e,t=this.container){return null!=e&&null!=t&&(t instanceof SVGElement?attr(t,e):this.$(t).attr(e)),this}findAttr(e,t=this.container){let n=t;for(;n&&1===n.nodeType;){const t=n.getAttribute(e);if(null!=t)return t;if(n===this.container)return null;n=n.parentNode}return null}find(e,t=this.container,n=this.selectors){return View.find(e,t,n).elems}findOne(e,t=this.container,n=this.selectors){const r=this.find(e,t,n);return r.length>0?r[0]:null}findByAttr(e,t=this.container){let n=t;for(;n&&n.getAttribute;){const t=n.getAttribute(e);if((null!=t||n===this.container)&&"false"!==t)return n;n=n.parentNode}return null}getSelector(e,t){let n;if(e===this.container)return"string"==typeof t&&(n=`> ${t}`),n;if(e){const r=index$6(e)+1;n=`${e.tagName.toLowerCase()}:nth-child(${r})`,t&&(n+=` > ${t}`),n=this.getSelector(e.parentNode,n)}return n}prefixClassName(e){return Util$4.prefix(e)}delegateEvents(e,t){if(null==e)return this;t||this.undelegateEvents();const n=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach((t=>{const r=t.match(n);if(null==r)return;const i=this.getEventHandler(e[t]);"function"==typeof i&&this.delegateEvent(r[1],r[2],i)})),this}undelegateEvents(){return this.$(this.container).off(this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,n){return this.$(this.container).on(e+this.getEventNamespace(),t,n),this}undelegateEvent(e,t,n){const r=e+this.getEventNamespace();return null==t?this.$(this.container).off(r):"string"==typeof t?this.$(this.container).off(r,t,n):this.$(this.container).off(r,t),this}addEventListeners(e,t,n){if(null==t)return this;const r=this.getEventNamespace(),i=this.$(e);return Object.keys(t).forEach((e=>{const o=this.getEventHandler(t[e]);"function"==typeof o&&i.on(e+r,n,o)})),this}removeEventListeners(e){return null!=e&&this.$(e).off(this.getEventNamespace()),this}getEventNamespace(){return`.${Config.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if("string"==typeof e){const n=this[e];"function"==typeof n&&(t=(...e)=>n.call(this,...e))}else t=(...t)=>e.call(this,...t);return t}getEventTarget(e,t={}){const{target:n,type:r,clientX:i=0,clientY:o=0}=e;return t.fromPoint||"touchmove"===r||"touchend"===r?document.elementFromPoint(i,o):n}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return!0===this.getEventData(e).propagationStopped}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(null==e)throw new TypeError("Event object required");let n=e.data;const r=`__${this.cid}__`;return null==t?null==n?{}:n[r]||{}:(null==n&&(n=e.data={}),null==n[r]?n[r]=Object.assign({},t):n[r]=Object.assign(Object.assign({},n[r]),t),n[r])}normalizeEvent(e){return View.normalizeEvent(e)}}!function(e){function t(e){return JQuery(e)}e.$=t,e.createElement=function(e,t){return t?createSvgElement(e||"g"):createElementNS(e||"div")},e.find=function(e,n,r){if(!e||"."===e)return{elems:[n]};if(r){const t=r[e];if(t)return{elems:Array.isArray(t)?t:[t]}}return{isCSSSelector:!0,elems:t(n).find(e).toArray()}},e.normalizeEvent=function(e){let t=e;const n=e.originalEvent,r=n&&n.changedTouches&&n.changedTouches[0];if(r){for(const t in e)void 0===r[t]&&(r[t]=e[t]);t=r}const i=t.target;if(i){const e=i.correspondingUseElement;e&&(t.target=e)}return t}}(View||(View={})),View2=View||(View={}),View2.views={},View2.getView=function(e){return View2.views[e]||null},function(e){let t=0;e.uniqueId=function(){const e=`v${t}`;return t+=1,e}}(Private$6||(Private$6={}));const noop$2=e=>e;function toPercentage(e,t){return 0===t?"0%":`${Math.round(e/t*100)}%`}function pin(e){return(t,n,r,i)=>n.isEdgeElement(r)?pinEdgeTerminal(e,t,n,r,i):pinNodeTerminal(e,t,n,r,i)}function pinNodeTerminal(e,t,n,r,i){const o=n.cell,a=o.getAngle(),s=n.getUnrotatedBBoxOfElement(r),l=o.getBBox().getCenter(),c=Point.create(i).rotate(a,l);let u=c.x-s.x,h=c.y-s.y;return e&&(u=toPercentage(u,s.width),h=toPercentage(h,s.height)),t.anchor={name:"topLeft",args:{dx:u,dy:h,rotate:!0}},t}function pinEdgeTerminal(e,t,n,r,i){const o=n.getConnection();if(!o)return t;const a=o.closestPointLength(i);if(e){const e=o.length();t.anchor={name:"ratio",args:{ratio:a/e}}}else t.anchor={name:"length",args:{length:a}};return t}const pinRelative=pin(!0),pinAbsolute=pin(!1),strategies=Object.freeze(Object.defineProperty({__proto__:null,noop:noop$2,pinRelative:pinRelative,pinAbsolute:pinAbsolute},Symbol.toStringTag,{value:"Module"}));var ConnectionStrategy,ConnectionStrategy2,Markup,Markup2;ConnectionStrategy2=ConnectionStrategy||(ConnectionStrategy={}),ConnectionStrategy2.presets=strategies,ConnectionStrategy2.registry=Registry.create({type:"connection strategy"}),ConnectionStrategy2.registry.register(ConnectionStrategy2.presets,!0);class Cache{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new Dictionary,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);if(null==t.matrix){const n=this.view.rotatableNode||this.view.container;t.matrix=getTransformToElement(e,n)}return createSVGMatrix(t.matrix)}getShape(e){const t=this.get(e);return null==t.shape&&(t.shape=toGeometryShape(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return null==t.boundingRect&&(t.boundingRect=getBBox$2(e)),t.boundingRect.clone()}}!function(e){function t(e){return null!=e&&"string"==typeof e}function n(e){return`${e}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}function r(e,t={ns:ns$1.svg}){const n=document.createDocumentFragment(),r={},i={},o=[{markup:Array.isArray(e)?e:[e],parent:n,ns:t.ns}];for(;o.length>0;){const e=o.pop();let t=e.ns||ns$1.svg;const n=e.markup,a=e.parent;n.forEach((e=>{const n=e.tagName;if(!n)throw new TypeError("Invalid tagName");e.ns&&(t=e.ns);const s=t===ns$1.svg,l=t?createElementNS(n,t):createElement(n),c=e.attrs;c&&(s?attr(l,kebablizeAttrs(c)):JQuery(l).attr(c));const u=e.style;u&&JQuery(l).css(u);const h=e.className;null!=h&&l.setAttribute("class",Array.isArray(h)?h.join(" "):h),e.textContent&&(l.textContent=e.textContent);const d=e.selector;if(null!=d){if(i[d])throw new TypeError("Selector must be unique");i[d]=l}if(e.groupSelector){let t=e.groupSelector;Array.isArray(t)||(t=[t]),t.forEach((e=>{r[e]||(r[e]=[]),r[e].push(l)}))}a.appendChild(l);const f=e.children;Array.isArray(f)&&o.push({ns:t,markup:f,parent:l})}))}return Object.keys(r).forEach((e=>{if(i[e])throw new Error("Ambiguous group selector");i[e]=r[e]})),{fragment:n,selectors:i,groups:r}}function i(e){return e instanceof SVGElement?createSvgElement("g"):createElement("div")}e.isJSONMarkup=function(e){return null!=e&&!t(e)},e.isStringMarkup=t,e.clone=function(e){return null==e||t(e)?e:cloneDeep(e)},e.sanitize=n,e.parseStringMarkup=function(e){const t=document.createDocumentFragment();return sanitizeHTML(n(e),{raw:!0}).forEach((e=>{t.appendChild(e)})),{fragment:t,selectors:{},groups:{}}},e.parseJSONMarkup=r,e.renderMarkup=function(e){if(t(e)){const t=Vector$2.createVectors(e),n=t.length;if(1===n)return{elem:t[0].node};if(n>1){const e=i(t[0].node);return t.forEach((t=>{e.appendChild(t.node)})),{elem:e}}return{}}const n=r(e),o=n.fragment;let a=null;return o.childNodes.length>1?(a=i(o.firstChild),a.appendChild(o)):a=o.firstChild,{elem:a,selectors:n.selectors}},e.parseLabelStringMarkup=function(e){const t=Vector$2.createVectors(e),n=document.createDocumentFragment();for(let r=0,i=t.length;r<i;r+=1){const e=t[r].node;n.appendChild(e)}return{fragment:n,selectors:{}}}}(Markup||(Markup={})),function(e){function t(e,n,r){if(null!=e){let i;const o=e.tagName.toLowerCase();if(e===n)return i="string"==typeof r?`> ${o} > ${r}`:`> ${o}`,i;const a=e.parentNode;if(a&&a.childNodes.length>1){i=`${o}:nth-child(${index$6(e)+1})`}else i=o;return r&&(i+=` > ${r}`),t(e.parentNode,n,i)}return r}e.getSelector=t,e.xml2json=function(n){const r=parseXML$1(e.sanitize(n),{mimeType:"image/svg+xml"}),i=Array.prototype.slice.call(r.childNodes),o={},a=new WeakMap,s=(e,n,r)=>{const i=function(e,n,r){if("#text"===e.nodeName)return null;let i=null,o=null,a=null,s=!1;const l={tagName:e.tagName};if(e.attributes){a={};for(let t=0,n=e.attributes.length;t<n;t+=1){const n=e.attributes[t],r=n.nodeName,s=n.nodeValue;"selector"===r?i=s:"groupSelector"===r?o=s:"class"===r?l.attrs={class:s}:a[r]=s}}return null==i&&(s=!0,i=t(e,n)),e.namespaceURI&&(l.ns=e.namespaceURI),null==l.ns&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(e.tagName)?l.ns=ns$1.xhtml:r&&(l.ns=r)),i&&(l.selector=i),null!=o&&(l.groupSelector=o),{markup:l,attrs:a,isCSSSelector:s}}(e,n,r);if(null!=i){const{markup:t,attrs:r,isCSSSelector:l}=i;if(a.set(e,t),t.selector&&null!=r&&(Object.keys(r).length&&(o[t.selector]=r),l&&delete t.selector),e.childNodes&&e.childNodes.length>0)for(let i=0,o=e.childNodes.length;i<o;i+=1){const r=e.childNodes[i],o=s(r,n,t.ns);o&&(null==t.children&&(t.children=[]),t.children.push(o))}return t}{const t=a.get(e.parentNode);t&&e.textContent&&(t.textContent=e.textContent)}};return{markup:i.map((e=>s(e,e))).filter((e=>null!=e)),attrs:o}}}(Markup||(Markup={})),Markup2=Markup||(Markup={}),Markup2.getPortContainerMarkup=function(){return"g"},Markup2.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},Markup2.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}},function(e){e.getEdgeMarkup=function(){return e.sanitize('\n    <path class="connection" stroke="black" d="M 0 0 0 0"/>\n    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="connection-wrap" d="M 0 0 0 0"/>\n    <g class="labels"/>\n    <g class="vertices"/>\n    <g class="arrowheads"/>\n    <g class="tools"/>\n  ')},e.getEdgeToolMarkup=function(){return e.sanitize('\n    <g class="edge-tool">\n      <g class="tool-remove" event="edge:remove">\n        <circle r="11" />\n        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />\n        <title>Remove edge.</title>\n      </g>\n      <g class="tool-options" event="edge:options">\n        <circle r="11" transform="translate(25)"/>\n        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>\n        <title>Edge options.</title>\n      </g>\n    </g>\n  ')},e.getEdgeVertexMarkup=function(){return e.sanitize('\n    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">\n      <circle class="vertex" data-index="<%= index %>" r="10" />\n      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>\n      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">\n      <title>Remove vertex.</title>\n      </path>\n    </g>\n  ')},e.getEdgeArrowheadMarkup=function(){return e.sanitize('\n    <g class="arrowhead-group arrowhead-group-<%= end %>">\n      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />\n    </g>\n  ')}}(Markup||(Markup={})),(Markup||(Markup={})).getForeignObjectMarkup=function(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:ns$1.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:ns$1.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}};class AttrManager{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let n,r,i,o,a;const s=[];return Object.keys(t).forEach((r=>{const i=t[r],o=this.getDefinition(r),a=call(Attr.isValidDefinition,this.view,o,i,{elem:e,attrs:t,cell:this.cell,view:this.view});if(o&&a)"string"==typeof o?(null==n&&(n={}),n[o]=i):null!==i&&s.push({name:r,definition:o});else{null==n&&(n={});const e=CASE_SENSITIVE_ATTR.includes(r)?r:kebabCase(r);n[e]=i}})),s.forEach((({name:n,definition:s})=>{const l=t[n];"function"==typeof s.set&&(!isHTMLElement(e)&&AttrManager.DELAY_ATTRS.includes(n)?(null==a&&(a={}),a[n]=l):(null==r&&(r={}),r[n]=l));"function"==typeof s.offset&&(null==i&&(i={}),i[n]=l);"function"==typeof s.position&&(null==o&&(o={}),o[n]=l)})),{raw:t,normal:n,set:r,offset:i,position:o,delay:a}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const n=e.normal&&e.normal.transform;null!=n&&t.normal&&(t.normal.transform=n),e.normal=t.normal}findAttrs(e,t,n,r){const i=[],o=new Dictionary;return Object.keys(e).forEach((a=>{const s=e[a];if(!isPlainObject$2(s))return;const{isCSSSelector:l,elems:c}=View.find(a,t,r);n[a]=c;for(let e=0,t=c.length;e<t;e+=1){const n=c[e],u=r&&r[a]===n,h=o.get(n);if(h){h.array||(i.push(n),h.array=!0,h.attrs=[h.attrs],h.priority=[h.priority]);const e=h.attrs,r=h.priority;if(u)e.unshift(s),r.unshift(-1);else{const n=sortedIndex(r,l?-1:t);e.splice(n,0,s),r.splice(n,0,t)}}else o.set(n,{elem:n,attrs:s,priority:u?-1:t,array:!1})}})),i.forEach((e=>{const t=o.get(e),n=t.attrs;t.attrs=n.reduceRight(((e,t)=>merge$1(e,t)),{})})),o}updateRelativeAttrs(e,t,n,r){const i=t.raw||{};let o=t.normal||{};const a=t.set,s=t.position,l=t.offset,c=t.delay,u=()=>({elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:n.clone()});if(null!=a&&Object.keys(a).forEach((e=>{const t=a[e],n=this.getDefinition(e);if(null!=n){const r=call(n.set,this.view,t,u());"object"==typeof r?o=Object.assign(Object.assign({},o),r):null!=r&&(o[e]=r)}})),isHTMLElement(e))return void this.view.setAttrs(o,e);const h=o.transform,d=transformStringToMatrix(h?`${h}`:null),f=new Point(d.e,d.f);h&&(delete o.transform,d.e=0,d.f=0);let p=1,g=1;if(s||l){const t=this.view.getScaleOfElement(e,r.scalableNode);p=t.sx,g=t.sy}let m=!1;null!=s&&Object.keys(s).forEach((e=>{const t=s[e],n=this.getDefinition(e);if(null!=n){const e=call(n.position,this.view,t,u());null!=e&&(m=!0,f.translate(Point.create(e).scale(p,g)))}})),this.view.setAttrs(o,e);let v=!1;if(null!=l){const t=this.view.getBoundingRectOfElement(e);if(t.width>0&&t.height>0){const n=transformRectangle(t,d).scale(1/p,1/g);Object.keys(l).forEach((t=>{const r=l[t],o=this.getDefinition(t);if(null!=o){const t=call(o.offset,this.view,r,{elem:e,cell:this.cell,view:this.view,attrs:i,refBBox:n});null!=t&&(v=!0,f.translate(Point.create(t).scale(p,g)))}}))}}(null!=h||m||v)&&(f.round(1),d.e=f.x,d.f=f.y,e.setAttribute("transform",matrixToTransformString(d)));const y=()=>{null!=c&&Object.keys(c).forEach((t=>{const n=c[t],r=this.getDefinition(t);if(null!=r){const i=call(r.set,this.view,n,u());"object"==typeof i?this.view.setAttrs(i,e):null!=i&&this.view.setAttrs({[t]:i},e)}}))};r.forceSync?y():Scheduler.scheduleTask(y)}update(e,t,n){const r={},i=this.findAttrs(n.attrs||t,e,r,n.selectors),o=n.attrs?this.findAttrs(t,e,r,n.selectors):i,a=[];i.each((t=>{const i=t.elem,s=t.attrs,l=this.processAttrs(i,s);if(null==l.set&&null==l.position&&null==l.offset&&null==l.delay)this.view.setAttrs(l.normal,i);else{const t=o.get(i),c=t?t.attrs:null,u=c&&null==s.ref?c.ref:s.ref;let h;if(u){if(h=(r[u]||this.view.find(u,e,n.selectors))[0],!h)throw new Error(`"${u}" reference does not exist.`)}else h=null;const d={node:i,refNode:h,attributes:c,processedAttributes:l},f=a.findIndex((e=>e.refNode===i));f>-1?a.splice(f,0,d):a.push(d)}}));const s=new Dictionary;let l;a.forEach((t=>{const r=t.node,i=t.refNode;let o;const c=null!=i&&null!=n.rotatableNode&&contains$1(n.rotatableNode,i);if(i&&(o=s.get(i)),!o){const t=c?n.rotatableNode:e;o=i?getBBox$2(i,{target:t}):n.rootBBox,i&&s.set(i,o)}let u;n.attrs&&t.attributes?(u=this.processAttrs(r,t.attributes),this.mergeProcessedAttrs(u,t.processedAttributes)):u=t.processedAttributes;let h=o;c&&null!=n.rotatableNode&&!n.rotatableNode.contains(r)&&(l||(l=transformStringToMatrix(attr(n.rotatableNode,"transform"))),h=transformRectangle(o,l));a.find((e=>e.refNode===r))&&(n.forceSync=!0),this.updateRelativeAttrs(r,u,h,n)}))}}(AttrManager||(AttrManager={})).DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"];class FlagManager{constructor(e,t,n=[]){this.view=e;const r={},i={};let o=0;Object.keys(t).forEach((e=>{let n=t[e];Array.isArray(n)||(n=[n]),n.forEach((t=>{let n=r[t];n||(o+=1,n=r[t]=1<<o),i[e]|=n}))}));let a=n;if(Array.isArray(a)||(a=[a]),a.forEach((e=>{r[e]||(o+=1,r[e]=1<<o)})),o>25)throw new Error("Maximum number of flags exceeded.");this.flags=r,this.attrs=i,this.bootstrap=n}get cell(){return this.view.cell}getFlag(e){const t=this.flags;return null==t?0:Array.isArray(e)?e.reduce(((e,n)=>e|t[n]),0):0|t[e]}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs?(Object.keys(this.attrs).forEach((t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])})),e):e}}var __rest$r=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},CellView2,ToolsView2,Button2;class CellView extends View{constructor(e,t={}){super(),this.cell=e,this.options=this.ensureOptions(t),this.graph=this.options.graph,this.attr=new AttrManager(this),this.flag=new FlagManager(this,this.options.actions,this.options.bootstrap),this.cache=new Cache(this),this.setContainer(this.ensureContainer()),this.setup(),this.$(this.container).data("view",this),this.init()}static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){const t=(e,t)=>null!=t?uniq$1([...Array.isArray(e)?e:[e],...Array.isArray(t)?t:[t]]):Array.isArray(e)?[...e]:[e],n=cloneDeep(this.getDefaults()),{bootstrap:r,actions:i,events:o,documentEvents:a}=e,s=__rest$r(e,["bootstrap","actions","events","documentEvents"]);return r&&(n.bootstrap=t(n.bootstrap,r)),i&&Object.keys(i).forEach((e=>{const r=i[e],o=n.actions[e];r&&o?n.actions[e]=t(o,r):r&&(n.actions[e]=t(r))})),o&&(n.events=Object.assign(Object.assign({},n.events),o)),e.documentEvents&&(n.documentEvents=Object.assign(Object.assign({},n.documentEvents),a)),merge$1(n,s)}get[Symbol.toStringTag](){return CellView.toStringTag}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(e){return this.getConstructor().getOptions(e)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return View.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(e){if(this.container!==e){this.undelegateEvents(),this.container=e,null!=this.options.events&&this.delegateEvents(this.options.events);const t=this.getContainerAttrs();null!=t&&this.setAttrs(t,e);const n=this.getContainerStyle();null!=n&&this.setStyle(n,e);const r=this.getContainerClassName();null!=r&&this.addClass(r,e)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(e,t={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(e){return this.flag.getFlag(e)}hasAction(e,t){return this.flag.hasAction(e,t)}removeAction(e,t){return this.flag.removeAction(e,t)}handleAction(e,t,n,r){if(this.hasAction(e,t)){n();const i=[t];return r&&("string"==typeof r?i.push(r):i.push(...r)),this.removeAction(e,i)}return e}setup(){this.cell.on("changed",(({options:e})=>this.onAttrsChange(e)))}onAttrsChange(e){let t=this.flag.getChangedFlag();!e.updated&&t&&(e.dirty&&this.hasAction(t,"update")&&(t|=this.getFlag("render")),e.toolId&&(e.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,t,this.priority,e))}parseJSONMarkup(e,t){const n=Markup.parseJSONMarkup(e),r=n.selectors,i=this.rootSelector;if(t&&i){if(r[i])throw new Error("Invalid root selector");r[i]=t}return n}can(e){let t=this.graph.options.interacting;if("function"==typeof t&&(t=call(t,this.graph,this)),"object"==typeof t){let n=t[e];return"function"==typeof n&&(n=call(n,this.graph,this)),!1!==n}return"boolean"==typeof t&&t}cleanCache(){return this.cache.clean(),this}getCache(e){return this.cache.get(e)}getDataOfElement(e){return this.cache.getData(e)}getMatrixOfElement(e){return this.cache.getMatrix(e)}getShapeOfElement(e){return this.cache.getShape(e)}getScaleOfElement(e,t){let n,r;if(t&&t.contains(e)){const e=scale$a(t);n=1/e.sx,r=1/e.sy}else n=1,r=1;return{sx:n,sy:r}}getBoundingRectOfElement(e){return this.cache.getBoundingRect(e)}getBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),n=this.getMatrixOfElement(e),r=this.getRootRotatedMatrix();return transformRectangle(t,this.getRootTranslatedMatrix().multiply(r).multiply(n))}getUnrotatedBBoxOfElement(e){const t=this.getBoundingRectOfElement(e),n=this.getMatrixOfElement(e);return transformRectangle(t,this.getRootTranslatedMatrix().multiply(n))}getBBox(e={}){let t;if(e.useCellGeometry){const e=this.cell,n=e.isNode()?e.getAngle():0;t=e.getBBox().bbox(n)}else t=this.getBBoxOfElement(this.container);return this.graph.localToGraph(t)}getRootTranslatedMatrix(){const e=this.cell,t=e.isNode()?e.getPosition():{x:0,y:0};return createSVGMatrix().translate(t.x,t.y)}getRootRotatedMatrix(){let e=createSVGMatrix();const t=this.cell,n=t.isNode()?t.getAngle():0;if(n){const r=t.getBBox(),i=r.width/2,o=r.height/2;e=e.translate(i,o).rotate(n).translate(-i,-o)}return e}findMagnet(e=this.container){return this.findByAttr("magnet",e)}updateAttrs(e,t,n={}){null==n.rootBBox&&(n.rootBBox=new Rectangle),null==n.selectors&&(n.selectors=this.selectors),this.attr.update(e,t,n)}isEdgeElement(e){return this.cell.isEdge()&&(null==e||e===this.container)}prepareHighlight(e,t={}){const n=e&&this.$(e)[0]||this.container;return t.partial=n===this.container,n}highlight(e,t={}){const n=this.prepareHighlight(e,t);return this.notify("cell:highlight",{magnet:n,options:t,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:n,options:t,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:n,options:t,view:this,node:this.cell,cell:this.cell}),this}unhighlight(e,t={}){const n=this.prepareHighlight(e,t);return this.notify("cell:unhighlight",{magnet:n,options:t,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:n,options:t,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:n,options:t,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(e,t){}getEdgeTerminal(e,t,n,r,i){const o=this.cell,a=this.findAttr("port",e),s=e.getAttribute("data-selector"),l={cell:o.id};return null!=s&&(l.magnet=s),null!=a?(l.port=a,o.isNode()&&(o.hasPort(a)||null!=s||(l.selector=this.getSelector(e)))):null==s&&this.container!==e&&(l.selector=this.getSelector(e)),this.customizeEdgeTerminal(l,e,t,n,r,i)}customizeEdgeTerminal(e,t,n,r,i,o){const a=i.getStrategy()||this.graph.options.connecting.strategy;if(a){const s="string"==typeof a?a:a.name,l="string"==typeof a?{}:a.args||{},c=ConnectionStrategy.registry;if(s){const a=c.get(s);if(null==a)return c.onNotFound(s);const u=call(a,this.graph,e,this,t,new Point(n,r),i,o,l);if(u)return u}}return e}getMagnetFromEdgeTerminal(e){const t=this.cell,n=this.container,r=e.port;let i,o=e.magnet;return null!=r&&t.isNode()&&t.hasPort(r)?i=this.findPortElem(r,o)||n:(o||(o=e.selector),o||null==r||(o=`[port="${r}"]`),i=this.findOne(o,n,this.selectors)),i}animate(e,t){const n="string"==typeof e?this.findOne(e):e;if(null==n)throw new Error("Invalid animation element.");const r=n.parentNode,i=Vector$2.create(n);r||i.appendTo(this.graph.view.stage);const o=t.complete;return t.complete=e=>{r||remove$1(n),o&&o(e)},i.animate(t)}animateTransform(e,t){const n="string"==typeof e?this.findOne(e):e;if(null==n)throw new Error("Invalid animation element.");const r=n.parentNode,i=Vector$2.create(n);r||i.appendTo(this.graph.view.stage);const o=t.complete;return t.complete=e=>{r||remove$1(n),o&&o(e)},i.animateTransform(t)}hasTools(e){const t=this.tools;return null!=t&&(null==e||t.name===e)}addTools(e){if(!this.can("toolsAddable"))return this;if(this.removeTools(),e){const t=ToolsView.isToolsView(e)?e:new ToolsView(e);this.tools=t,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),t.config({view:this}),t.mount()}return this}updateTools(e={}){return this.tools&&this.tools.update(e),this}removeTools(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const e=this.cell.getTools();return this.addTools(e),this}notify(e,t){return this.trigger(e,t),this.graph.trigger(e,t),this}getEventArgs(e,t,n){const r=this,i=r.cell;return null==t||null==n?{e:e,view:r,cell:i}:{e:e,x:t,y:n,view:r,cell:i}}onClick(e,t,n){this.notify("cell:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){this.notify("cell:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){this.notify("cell:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(e,t,n))}onMouseUp(e,t,n){this.notify("cell:mouseup",this.getEventArgs(e,t,n)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(e,t,n){this.notify("cell:mousemove",this.getEventArgs(e,t,n))}onMouseOver(e){this.notify("cell:mouseover",this.getEventArgs(e))}onMouseOut(e){this.notify("cell:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.notify("cell:mouseenter",this.getEventArgs(e))}onMouseLeave(e){this.notify("cell:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,r){this.notify("cell:mousewheel",Object.assign({delta:r},this.getEventArgs(e,t,n)))}onCustomEvent(e,t,n,r){this.notify("cell:customevent",Object.assign({name:t},this.getEventArgs(e,n,r))),this.notify(t,Object.assign({},this.getEventArgs(e,n,r)))}onMagnetMouseDown(e,t,n,r){}onMagnetDblClick(e,t,n,r){}onMagnetContextMenu(e,t,n,r){}onLabelMouseDown(e,t,n){}checkMouseleave(e){const t=this.graph;t.renderer.isAsync()&&t.renderer.dumpView(this);const n=this.getEventTarget(e,{fromPoint:!0}),r=t.renderer.findViewByElem(n);r!==this&&(this.onMouseLeave(e),r&&r.onMouseEnter(e))}}CellView.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},CellView2=CellView||(CellView={}),CellView2.Flag=FlagManager,CellView2.Attr=AttrManager,function(e){e.toStringTag=`X6.${e.name}`,e.isCellView=function(t){if(null==t)return!1;if(t instanceof e)return!0;const n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"==typeof r.isNodeView&&"function"==typeof r.isEdgeView&&"function"==typeof r.confirmUpdate}}(CellView||(CellView={})),function(e){e.priority=function(e){return function(t){t.config({priority:e})}},e.bootstrap=function(e){return function(t){t.config({bootstrap:e})}}}(CellView||(CellView={})),(CellView||(CellView={})).registry=Registry.create({type:"view"});class ToolsView extends View{constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return ToolsView.toStringTag}createContainer(e,t){const n=e?View.createElement("g",!0):View.createElement("div",!1);return addClass(n,this.prefixClassName("cell-tools")),t.className&&addClass(n,t.className),n}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!CellView.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(addClass(this.svgContainer,this.prefixClassName("edge-tools")),addClass(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(addClass(this.svgContainer,this.prefixClassName("node-tools")),addClass(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const n=[];t.forEach((e=>{if(ToolsView.ToolItem.isToolItem(e))"vertices"===e.name?n.unshift(e):n.push(e);else{"vertices"===("object"==typeof e?e.name:e)?n.unshift(e):n.push(e)}}));for(let r=0;r<n.length;r+=1){const e=n[r];let t;if(ToolsView.ToolItem.isToolItem(e))t=e;else{const n="object"==typeof e?e.name:e,r="object"==typeof e&&e.args||{};if(n)if(this.cell.isNode()){const e=NodeTool.registry.get(n);if(!e)return NodeTool.registry.onNotFound(n);t=new e(r)}else if(this.cell.isEdge()){const e=EdgeTool.registry.get(n);if(!e)return EdgeTool.registry.onNotFound(n);t=new e(r)}}if(t){t.config(this.cellView,this),t.render();(!1!==t.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(t.container),this.tools.push(t)}}return this}update(e={}){const t=this.tools;return t&&t.forEach((t=>{e.toolId!==t.cid&&t.isVisible()&&t.update()})),this}focus(e){const t=this.tools;return t&&t.forEach((t=>{e===t?t.show():t.hide()})),this}blur(e){const t=this.tools;return t&&t.forEach((t=>{t===e||t.isVisible()||(t.show(),t.update())})),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach((e=>e.remove())),this.tools=null),remove$1(this.svgContainer),remove$1(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const n=e.some((e=>!1!==e.options.isSVGElement)),r=e.some((e=>!1===e.options.isSVGElement));if(n){(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer)}r&&this.graph.container.appendChild(this.htmlContainer)}return this}}function getAnchor(e,t,n,r){return call(ConnectionStrategy.presets.pinRelative,this.graph,{},t,n,e,this.cell,r,{}).anchor}function getViewBBox(e,t){return t?e.cell.getBBox():e.cell.isEdge()?e.getConnection().bbox():e.getUnrotatedBBoxOfElement(e.container)}ToolsView2=ToolsView||(ToolsView={}),ToolsView2.toStringTag=`X6.${ToolsView2.name}`,ToolsView2.isToolsView=function(e){if(null==e)return!1;if(e instanceof ToolsView2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===ToolsView2.toStringTag)&&null!=n.graph&&null!=n.cell&&"function"==typeof n.config&&"function"==typeof n.update&&"function"==typeof n.focus&&"function"==typeof n.blur&&"function"==typeof n.show&&"function"==typeof n.hide},function(e){class t extends View{constructor(e={}){super(),this.visible=!0,this.options=this.getOptions(e),this.container=View.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),addClass(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&addClass(this.container,this.options.className),this.init()}static getDefaults(){return this.defaults}static config(e){this.defaults=this.getOptions(e)}static getOptions(e){return merge$1(cloneDeep(this.getDefaults()),e)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}init(){}getOptions(e){return this.constructor.getOptions(e)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(e,t){return this.cellView=e,this.parent=t,this.stamp(this.container),this.cell.isEdge()?addClass(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&addClass(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const e=this.options.markup;if(e){const t=Markup.isStringMarkup(e)?Markup.parseStringMarkup(e):Markup.parseJSONMarkup(e);this.container.appendChild(t.fragment),this.childNodes=t.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(e=this.container){e&&e.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return!!this.visible}focus(){const e=this.options.focusOpacity;return null!=e&&Number.isFinite(e)&&(this.container.style.opacity=`${e}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(e){return null==this.graph||null==this.cellView||this.graph.view.guard(e,this.cellView)}}var n;t.defaults={isSVGElement:!0,tagName:"g"},e.ToolItem=t,function(e){let t=0;e.define=function(e){const n=createClass((r=e.name)?pascalCase(r):(t+=1,`CustomTool${t}`),this);var r;return n.config(e),n}}(t=e.ToolItem||(e.ToolItem={})),(n=t=e.ToolItem||(e.ToolItem={})).toStringTag=`X6.${n.name}`,n.isToolItem=function(e){if(null==e)return!1;if(e instanceof n)return!0;const t=e[Symbol.toStringTag],r=e;return(null==t||t===n.toStringTag)&&null!=r.graph&&null!=r.cell&&"function"==typeof r.config&&"function"==typeof r.update&&"function"==typeof r.focus&&"function"==typeof r.blur&&"function"==typeof r.show&&"function"==typeof r.hide&&"function"==typeof r.isVisible}}(ToolsView||(ToolsView={}));class Button$2 extends ToolsView.ToolItem{onRender(){addClass(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();transform$e(this.container,e,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:n=0,y:r=0}=t;const{offset:i,useCellGeometry:o,rotate:a}=t;let s=getViewBBox(e,o);const l=e.cell.getAngle();a||(s=s.bbox(l));let c=0,u=0;"number"==typeof i?(c=i,u=i):"object"==typeof i&&(c=i.x,u=i.y),n=normalizePercentage(n,s.width),r=normalizePercentage(r,s.height);let h=createSVGMatrix().translate(s.x+s.width/2,s.y+s.height/2);return a&&(h=h.rotate(l)),h=h.translate(n+c-s.width/2,r+u-s.height/2),h}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:n=0,distance:r=0,rotate:i}=t;let o,a,s;const l=normalizePercentage(r,1);o=l>=0&&l<=1?e.getTangentAtRatio(l):e.getTangentAtLength(l),o?(a=o.start,s=o.vector().vectorAngle(new Point(1,0))||0):(a=e.getConnection().start,s=0);let c=createSVGMatrix().translate(a.x,a.y).rotate(s);return c="object"==typeof n?c.translate(n.x||0,n.y||0):c.translate(0,n),i||(c=c.rotate(-s)),c}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;"function"==typeof t&&call(t,this.cellView,{e:e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(Button$2||(Button$2={})).config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}}),Button2=Button$2||(Button$2={}),Button2.Remove=Button2.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}});var __rest$q=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Vertices2,Segments2;class Boundary extends ToolsView.ToolItem{onRender(){if(addClass(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,n=__rest$q(e,["class"]);attr(this.container,kebablizeAttrs(n)),t&&addClass(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:n,rotate:r}=t,i=normalizeSides(t.padding);let o=getViewBBox(e,n).moveAndExpand({x:-i.left,y:-i.top,width:i.left+i.right,height:i.top+i.bottom});const a=e.cell;if(a.isNode()){const e=a.getAngle();if(e)if(r){const t=a.getBBox().getCenter();rotate$7(this.container,e,t.x,t.y,{absolute:!0})}else o=o.bbox(e)}return attr(this.container,o.toJSON()),this}}(Boundary||(Boundary={})).config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}});class Vertices extends ToolsView.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach((e=>{this.stopHandleListening(e),e.remove()}))}renderHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const n=e[t],r=this.options.createHandle,i=this.options.processHandle,o=r({index:t,graph:this.graph,guard:e=>this.guard(e),attrs:this.options.attrs||{}});i&&i(o),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:o}),o.updatePosition(n.x,n.y),this.stamp(o.container),this.container.appendChild(o.container),this.handles.push(o),this.startHandleListening(o)}}updateHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const n=e[t],r=this.handles[t];r&&r.updatePosition(n.x,n.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,n=this.vertices,r=e>0?n[e-1]:t.sourceAnchor,i=e<n.length-1?n[e+1]:t.targetAnchor;return{prev:Point.create(r),next:Point.create(i)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:n,y:r}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:n,y:r}}onHandleChange({e:e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:n,x:r,y:i}=this.getMouseEventArgs(e);t.notifyMouseDown(n,r,i)}}onHandleChanging({handle:e,e:t}){const n=this.cellView,r=e.options.index,{e:i,x:o,y:a}=this.getMouseEventArgs(t),s={x:o,y:a};this.snapVertex(s,r),n.cell.setVertexAt(r,s,{ui:!0,toolId:this.cid}),e.updatePosition(s.x,s.y),this.options.stopPropagation||n.notifyMouseMove(i,o,a)}onHandleChanged({e:e}){const t=this.options,n=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;n.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),n.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&n.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:r,x:i,y:o}=this.getMouseEventArgs(e);this.options.stopPropagation||n.notifyMouseUp(r,i,o),n.checkMouseleave(r),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}snapVertex(e,t){const n=this.options.snapRadius||0;if(n>0){const r=this.getNeighborPoints(t),i=r.prev,o=r.next;Math.abs(e.x-i.x)<n?e.x=i.x:Math.abs(e.x-o.x)<n&&(e.x=o.x),Math.abs(e.y-i.y)<n?e.y=r.prev.y:Math.abs(e.y-o.y)<n&&(e.y=o.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const n=e.options.index,r=this.cellView;r.cell.removeVertexAt(n,{ui:!0}),this.options.addable&&this.updatePath(),r.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const n=this.normalizeEvent(e),r=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const i=t.getVertexIndex(r.x,r.y);this.snapVertex(r,i),t.cell.insertVertex(r,i,{ui:!0,toolId:this.cid}),this.render();const o=this.handles[i];this.eventData(n,{vertexAdded:!0}),o.onMouseDown(n)}onRemove(){this.resetHandles()}}Vertices2=Vertices||(Vertices={}),Vertices2.Handle=class extends View{constructor(e){super(),this.options=e,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}get graph(){return this.options.graph}render(){this.container=View.createElement("circle",!0);const e=this.options.attrs;if("function"==typeof e){const t=Vertices2.getDefaults();this.setAttrs(Object.assign(Object.assign({},t.attrs),e(this)))}else this.setAttrs(e);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(e,t){this.setAttrs({cx:e,cy:t})}onMouseDown(e){this.options.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.data),this.emit("change",{e:e,handle:this}))}onMouseMove(e){this.emit("changing",{e:e,handle:this})}onMouseUp(e){this.emit("changed",{e:e,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(e){this.emit("remove",{e:e,handle:this})}},function(e){const t=Util$4.prefix("edge-tool-vertex-path");e.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new e.Handle(t),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})}(Vertices||(Vertices={}));class Segments extends ToolsView.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){addClass(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let n=0,r=t.length;n<r-1;n+=1){const e=t[n],r=t[n+1],i=this.renderHandle(e,r,n);this.stamp(i.container),this.handles.push(i)}return this}renderHandle(e,t,n){const r=this.options.createHandle({index:n,graph:this.graph,guard:e=>this.guard(e),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(r),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:r}),this.updateHandle(r,e,t),this.container.appendChild(r.container),this.startHandleListening(r),r}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach((e=>{this.stopHandleListening(e),e.remove()}))}shiftHandleIndexes(e){const t=this.handles;for(let n=0,r=t.length;n<r;n+=1)t[n].options.index+=e}resetAnchor(e,t){const n=this.cellView.cell,r={ui:!0,toolId:this.cid};t?n.prop([e,"anchor"],t,r):n.removeProp([e,"anchor"],r)}snapHandle(e,t,n){const r=e.options.axis,i=e.options.index,o=this.cellView.cell.getVertices(),a=o[i-2]||n.sourceAnchor,s=o[i+1]||n.targetAnchor,l=this.options.snapRadius;return Math.abs(t[r]-a[r])<l?t[r]=a[r]:Math.abs(t[r]-s[r])<l&&(t[r]=s[r]),t}onHandleChanging({handle:e,e:t}){const n=this.graph,r=this.options,i=this.cellView,o=r.anchor,a=e.options.axis,s=e.options.index-1,l=this.getEventData(t),c=this.normalizeEvent(t),u=n.snapToGrid(c.clientX,c.clientY),h=this.snapHandle(e,u.clone(),l),d=cloneDeep(this.vertices);let f=d[s],p=d[s+1];const g=i.sourceView,m=i.sourceBBox;let v=!1,y=!1;if(f?0===s?m.containsPoint(f)?(d.shift(),this.shiftHandleIndexes(-1),v=!0):(f[a]=h[a],y=!0):f[a]=h[a]:(f=i.sourceAnchor.toJSON(),f[a]=h[a],m.containsPoint(f)?v=!0:(d.unshift(f),this.shiftHandleIndexes(1),y=!0)),"function"==typeof o&&g){if(v){const e=l.sourceAnchor.clone();e[a]=h[a];const t=call(o,i,e,g,i.sourceMagnet||g.container,"source",i,this);this.resetAnchor("source",t)}y&&this.resetAnchor("source",l.sourceAnchorDef)}const b=i.targetView,x=i.targetBBox;let w=!1,_=!1;if(p?s===d.length-2?x.containsPoint(p)?(d.pop(),w=!0):(p[a]=h[a],_=!0):p[a]=h[a]:(p=i.targetAnchor.toJSON(),p[a]=h[a],x.containsPoint(p)?w=!0:(d.push(p),_=!0)),"function"==typeof o&&b){if(w){const e=l.targetAnchor.clone();e[a]=h[a];const t=call(o,i,e,b,i.targetMagnet||b.container,"target",i,this);this.resetAnchor("target",t)}_&&this.resetAnchor("target",l.targetAnchorDef)}Point.equalPoints(d,this.vertices)||this.cellView.cell.setVertices(d,{ui:!0,toolId:this.cid}),this.updateHandle(e,f,p,0),r.stopPropagation||i.notifyMouseMove(c,u.x,u.y)}onHandleChange({handle:e,e:t}){const n=this.options,r=this.handles,i=this.cellView,o=e.options.index;if(Array.isArray(r)){for(let e=0,t=r.length;e<t;e+=1)e!==o&&r[e].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:i.sourceAnchor.clone(),targetAnchor:i.targetAnchor.clone(),sourceAnchorDef:cloneDeep(this.cell.prop(["source","anchor"])),targetAnchorDef:cloneDeep(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!n.stopPropagation){const e=this.normalizeEvent(t),n=this.graph.snapToGrid(e.clientX,e.clientY);i.notifyMouseDown(e,n.x,n.y)}}}onHandleChanged({e:e}){const t=this.options,n=this.cellView;t.removeRedundancies&&n.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||n.notifyMouseUp(r,i.x,i.y),n.checkMouseleave(r),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}updateHandle(e,t,n,r=0){const i=this.options.precision||0,o=Math.abs(t.x-n.x)<i,a=Math.abs(t.y-n.y)<i;if(o||a){const i=new Line$5(t,n);if(i.length()<this.options.threshold)e.hide();else{const t=i.getCenter(),n=o?"x":"y";t[n]+=r||0;const a=i.vector().vectorAngle(new Point(1,0));e.updatePosition(t.x,t.y,a,this.cellView),e.show(),e.options.axis=n}}else e.hide()}onRemove(){this.resetHandles()}}Segments2=Segments||(Segments={}),Segments2.Handle=class extends View{constructor(e){super(),this.options=e,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=View.createElement("rect",!0);const e=this.options.attrs;if("function"==typeof e){const t=Segments2.getDefaults();this.setAttrs(Object.assign(Object.assign({},t.attrs),e(this)))}else this.setAttrs(e);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(e,t,n,r){const i=r.getClosestPoint(new Point(e,t))||new Point(e,t);let o=createSVGMatrix().translate(i.x,i.y);if(i.equals({x:e,y:t}))o=o.rotate(n);else{let n=new Line$5(e,t,i.x,i.y).vector().vectorAngle(new Point(1,0));0!==n&&(n+=90),o=o.rotate(n)}this.setAttrs({transform:matrixToTransformString(o),cursor:n%180==0?"row-resize":"col-resize"})}onMouseDown(e){this.options.guard(e)||(this.trigger("change",{e:e,handle:this}),e.stopPropagation(),e.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.data))}onMouseMove(e){this.emit("changing",{e:e,handle:this})}onMouseUp(e){this.emit("changed",{e:e,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}},function(e){e.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new e.Handle(t),anchor:getAnchor})}(Segments||(Segments={}));class Anchor extends ToolsView.ToolItem{get type(){return this.options.type}onRender(){addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const e=this.type;return this.cellView.getTerminalView(e)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const n=this.type,r=this.cellView,i=this.options,o=r.getTerminalAnchor(n),a=r.cell.prop([n,"anchor"]);t.setAttribute("transform",`translate(${o.x}, ${o.y})`);const s=a?i.customAnchorAttrs:i.defaultAnchorAttrs;s&&Object.keys(s).forEach((e=>{t.setAttribute(e,s[e])}))}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const n=this.type,r=this.cellView,i=r.getTerminalView(n);if(i){const e=i.cell,o=r.getTerminalMagnet(n);let a,s,l,c=this.options.areaPadding||0;Number.isFinite(c)||(c=0),i.isEdgeElement(o)?(a=i.getBBox(),s=0,l=a.getCenter()):(a=i.getUnrotatedBBoxOfElement(o),s=e.getAngle(),l=a.getCenter(),s&&l.rotate(-s,e.getBBox().getCenter())),a.inflate(c),attr(t,{x:-a.width/2,y:-a.height/2,width:a.width,height:a.height,transform:`translate(${l.x}, ${l.y}) rotate(${s})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,n=this.cell;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,n=this.cellView,r=n.getTerminalView(t);if(null==r)return;const i=this.normalizeEvent(e),o=r.cell,a=n.getTerminalMagnet(t);let s=this.graph.clientToLocal(i.clientX,i.clientY);const l=this.options.snap;if("function"==typeof l){const e=call(l,n,s,r,a,t,n,this);s=Point.create(e)}if(this.options.restrictArea)if(r.isEdgeElement(a)){const e=r.getClosestPoint(s);e&&(s=e)}else{const e=r.getUnrotatedBBoxOfElement(a),t=o.getAngle(),n=o.getBBox().getCenter(),i=s.clone().rotate(t,n);e.containsPoint(i)||(s=e.getNearestPointToPoint(i).rotate(-t,n))}let c;const u=this.options.anchor;"function"==typeof u&&(c=call(u,n,s,r,a,t,n,this)),this.resetAnchor(c),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const t=this.cellView;this.options.removeRedundancies&&t.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}}(Anchor||(Anchor={})).config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:getAnchor,snap(e,t,n,r,i,o){const a=o.options.snapRadius||0,s="source"===r,l=s?0:-1,c=this.cell.getVertexAt(l)||this.getTerminalAnchor(s?"target":"source");return c&&(Math.abs(c.x-e.x)<a&&(e.x=c.x),Math.abs(c.y-e.y)<a&&(e.y=c.y)),e}});const SourceAnchor=Anchor.define({name:"source-anchor",type:"source"}),TargetAnchor=Anchor.define({name:"target-anchor",type:"target"});var __rest$p=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Arrowhead extends ToolsView.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,n=__rest$p(e,["class"]);this.setAttrs(n,this.container),t&&addClass(this.container,t)}}onRender(){addClass(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,n=t.getTangentAtRatio(e),r=n?n.start:t.getPointAtRatio(e),i=n&&n.vector().vectorAngle(new Point(1,0))||0;if(!r)return this;const o=createSVGMatrix().translate(r.x,r.y).rotate(i);return transform$e(this.container,o,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const n=this.graph.snapToGrid(e.clientX,e.clientY),r=t.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:{toolId:this.cid}});this.cellView.setEventData(e,r),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,n.x,n.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.cellView,r=this.graph.snapToGrid(t.clientX,t.clientY);n.onMouseUp(t,r.x,r.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(Arrowhead||(Arrowhead={})).config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}});const SourceArrowhead=Arrowhead.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),TargetArrowhead=Arrowhead.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class CellEditor extends ToolsView.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName((e.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=ToolsView.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}updateEditor(){const{graph:e,cell:t,editor:n}=this,r=n.style;let i=new Point,o=20;if(t.isNode())i=t.getBBox().center,o=t.size().width-4;else if(t.isEdge()){const t=this.options.event,n=t.target,r=n.parentElement;if(r&&hasClass(r,this.prefixClassName("edge-label"))){const e=r.getAttribute("data-index")||"0";this.labelIndex=parseInt(e,10);const t=r.getAttribute("transform"),{translation:a}=parseTransformString(t);i=new Point(a.tx,a.ty),o=getBBox$2(n).width}else{if(!this.options.labelAddable)return this;i=e.clientToLocal(Point.create(t.clientX,t.clientY));const n=this.cellView.path.closestPointLength(i);this.distance=n}}i=e.localToGraph(i),r.left=`${i.x}px`,r.top=`${i.y}px`,r.minWidth=`${o}px`;const a=e.scale();r.transform=`scale(${a.sx}, ${a.sy}) translate(-50%, -50%)`;const s=this.options.attrs;r.fontSize=`${s.fontSize}px`,r.fontFamily=s.fontFamily,r.color=s.color,r.backgroundColor=s.backgroundColor;const l=this.options.getText;let c;return"function"==typeof l&&(c=call(l,this.cellView,{cell:this.cell,index:this.labelIndex})),n.innerText=c||"",this}onDocumentMouseDown(e){if(e.target!==this.editor){const e=this.cell,t=this.editor.innerText.replace(/\n$/,"")||"",n=this.options.setText;"function"==typeof n&&call(n,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance}),e.removeTool(e.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout((()=>{this.editor.focus(),this.selectText()}))}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}var CellEditor2;(CellEditor||(CellEditor={})).config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}}),CellEditor2=CellEditor||(CellEditor={}),CellEditor2.NodeEditor=CellEditor2.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:({cell:e})=>e.attr("text/text"),setText({cell:e,value:t}){e.attr("text/text",t)}}),CellEditor2.EdgeEditor=CellEditor2.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:({cell:e,index:t})=>-1===t?"":e.prop(`labels/${t}/attrs/label/text`),setText({cell:e,value:t,index:n,distance:r}){const i=e;-1===n?i.appendLabel({position:{distance:r},attrs:{label:{text:t}}}):t?i.prop(`labels/${n}/attrs/label/text`,t):"number"==typeof n&&i.removeLabelAt(n)}});var __rest$o=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},NodeTool,NodeTool2,EdgeTool,EdgeTool2;NodeTool2=NodeTool||(NodeTool={}),NodeTool2.presets={boundary:Boundary,button:Button$2,"button-remove":Button$2.Remove,"node-editor":CellEditor.NodeEditor},NodeTool2.registry=Registry.create({type:"node tool",process(e,t){if("function"==typeof t)return t;let n=ToolsView.ToolItem;const{inherit:r}=t,i=__rest$o(t,["inherit"]);if(r){const e=this.get(r);null==e?this.onNotFound(r,"inherited"):n=e}return null==i.name&&(i.name=e),n.define.call(n,i)}}),NodeTool2.registry.register(NodeTool2.presets,!0),EdgeTool2=EdgeTool||(EdgeTool={}),EdgeTool2.presets={boundary:Boundary,vertices:Vertices,segments:Segments,button:Button$2,"button-remove":Button$2.Remove,"source-anchor":SourceAnchor,"target-anchor":TargetAnchor,"source-arrowhead":SourceArrowhead,"target-arrowhead":TargetArrowhead,"edge-editor":CellEditor.EdgeEditor},EdgeTool2.registry=Registry.create({type:"edge tool",process(e,t){if("function"==typeof t)return t;let n=ToolsView.ToolItem;const{inherit:r}=t,i=__rest$o(t,["inherit"]);if(r){const e=this.get(r);null==e?this.onNotFound(r,"inherited"):n=e}return null==i.name&&(i.name=e),n.define.call(n,i)}}),EdgeTool2.registry.register(EdgeTool2.presets,!0);const center$1=createBBoxAnchor("center"),top=createBBoxAnchor("topCenter"),bottom=createBBoxAnchor("bottomCenter"),left=createBBoxAnchor("leftMiddle"),right=createBBoxAnchor("rightMiddle"),topLeft=createBBoxAnchor("topLeft"),topRight=createBBoxAnchor("topRight"),bottomLeft=createBBoxAnchor("bottomLeft"),bottomRight=createBBoxAnchor("bottomRight");function createBBoxAnchor(e){return function(t,n,r,i={}){const o=i.rotate?t.getUnrotatedBBoxOfElement(n):t.getBBoxOfElement(n),a=o[e];a.x+=normalizePercentage(i.dx,o.width),a.y+=normalizePercentage(i.dy,o.height);const s=t.cell;return i.rotate?a.rotate(-s.getAngle(),s.getBBox().getCenter()):a}}function resolve$1(e){return function(t,n,r,i){if(r instanceof Element){const o=this.graph.renderer.findViewByElem(r);let a;if(o)if(o.isEdgeElement(r)){a=getPointAtEdge(o,null!=i.fixedAt?i.fixedAt:"50%")}else a=o.getBBoxOfElement(r).getCenter();else a=new Point;return e.call(this,t,n,a,i)}return e.apply(this,arguments)}}function getPointAtEdge(e,t){const n=isPercentage$1(t),r="string"==typeof t?parseFloat(t):t;return n?e.getPointAtRatio(r/100):e.getPointAtLength(r)}const orthogonal$1=function(e,t,n,r){const i=e.cell.getAngle(),o=e.getBBoxOfElement(t),a=o.getCenter(),s=o.getTopLeft(),l=o.getBottomRight();let c=r.padding;if(Number.isFinite(c)||(c=0),s.y+c<=n.y&&n.y<=l.y-c){const e=n.y-a.y;a.x+=0===i||180===i?0:1*e/Math.tan(Angle.toRad(i)),a.y+=e}else if(s.x+c<=n.x&&n.x<=l.x-c){const e=n.x-a.x;a.y+=90===i||270===i?0:e*Math.tan(Angle.toRad(i)),a.x+=e}return a},orth$2=resolve$1(orthogonal$1),nodeCenter=function(e,t,n,r,i){const o=e.cell.getConnectionPoint(this.cell,i);return(r.dx||r.dy)&&o.translate(r.dx||0,r.dy||0),o},middleSide=function(e,t,n,r){let i,o,a=0;const s=e.cell;r.rotate?(i=e.getUnrotatedBBoxOfElement(t),o=s.getBBox().getCenter(),a=s.getAngle()):i=e.getBBoxOfElement(t);const l=r.padding;null!=l&&Number.isFinite(l)&&i.inflate(l),r.rotate&&n.rotate(a,o);const c=i.getNearestSideToPoint(n);let u;switch(c){case"left":u=i.getLeftMiddle();break;case"right":u=i.getRightMiddle();break;case"top":u=i.getTopCenter();break;case"bottom":u=i.getBottomCenter()}const h=r.direction;return"H"===h?"top"!==c&&"bottom"!==c||(u=n.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===h&&(u=n.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),r.rotate?u.rotate(-a,o):u},midSide=resolve$1(middleSide),anchors$1=Object.freeze(Object.defineProperty({__proto__:null,center:center$1,top:top,bottom:bottom,left:left,right:right,topLeft:topLeft,topRight:topRight,bottomLeft:bottomLeft,bottomRight:bottomRight,orth:orth$2,nodeCenter:nodeCenter,midSide:midSide},Symbol.toStringTag,{value:"Module"}));var NodeAnchor,NodeAnchor2;NodeAnchor2=NodeAnchor||(NodeAnchor={}),NodeAnchor2.presets=anchors$1,NodeAnchor2.registry=Registry.create({type:"node endpoint"}),NodeAnchor2.registry.register(NodeAnchor2.presets,!0);const ratio=function(e,t,n,r){let i=null!=r.ratio?r.ratio:.5;return i>1&&(i/=100),e.getPointAtRatio(i)},length$6=function(e,t,n,r){const i=null!=r.length?r.length:20;return e.getPointAtLength(i)},getClosestPoint=function(e,t,n,r){const i=e.getClosestPoint(n);return null!=i?i:new Point},closest=resolve$1(getClosestPoint),orthogonal=function(e,t,n,r){const i=1e6,o=e.getConnection(),a=e.getConnectionSubdivisions(),s=new Line$5(n.clone().translate(0,i),n.clone().translate(0,-i)),l=new Line$5(n.clone().translate(i,0),n.clone().translate(-i,0)),c=s.intersect(o,{segmentSubdivisions:a}),u=l.intersect(o,{segmentSubdivisions:a}),h=[];return c&&h.push(...c),u&&h.push(...u),h.length>0?n.closest(h):null!=r.fallbackAt?getPointAtEdge(e,r.fallbackAt):call(getClosestPoint,this,e,t,n,r)},orth$1=resolve$1(orthogonal),anchors=Object.freeze(Object.defineProperty({__proto__:null,closest:closest,ratio:ratio,length:length$6,orth:orth$1},Symbol.toStringTag,{value:"Module"}));var EdgeAnchor,EdgeAnchor2;function offset(e,t,n){let r;if("object"==typeof n){if(Number.isFinite(n.y)){const r=new Line$5(t,e),{start:i,end:o}=r.parallel(n.y);t=i,e=o}r=n.x}else r=n;if(null==r||!Number.isFinite(r))return e;const i=e.distance(t);return 0===r&&i>0?e:e.move(t,-Math.min(r,i-1))}function getStrokeWidth(e){const t=e.getAttribute("stroke-width");return null===t?0:parseFloat(t)||0}function findShapeNode(e){if(null==e)return null;let t=e;do{let e=t.tagName;if("string"!=typeof e)return null;if(e=e.toUpperCase(),"G"===e)t=t.firstElementChild;else{if("TITLE"!==e)break;t=t.nextElementSibling}}while(t);return t}EdgeAnchor2=EdgeAnchor||(EdgeAnchor={}),EdgeAnchor2.presets=anchors,EdgeAnchor2.registry=Registry.create({type:"edge endpoint"}),EdgeAnchor2.registry.register(EdgeAnchor2.presets,!0);const bbox=function(e,t,n,r){const i=t.getBBoxOfElement(n);r.stroked&&i.inflate(getStrokeWidth(n)/2);const o=e.intersect(i);return offset(o&&o.length?e.start.closest(o):e.end,e.start,r.offset)},rect$1=function(e,t,n,r,i){const o=t.cell,a=o.isNode()?o.getAngle():0;if(0===a)return call(bbox,this,e,t,n,r,i);const s=t.getUnrotatedBBoxOfElement(n);r.stroked&&s.inflate(getStrokeWidth(n)/2);const l=s.getCenter(),c=e.clone().rotate(a,l),u=c.setLength(1e6).intersect(s);return offset(u&&u.length?c.start.closest(u).rotate(-a,l):e.end,e.start,r.offset)},boundary=function(e,t,n,r){let i,o;const a=e.end,s=r.selector;if(i="string"==typeof s?t.findOne(s):Array.isArray(s)?getByPath(n,s):findShapeNode(n),!isSVGGraphicsElement(i)){if(i===n||!isSVGGraphicsElement(n))return a;i=n}const l=t.getShapeOfElement(i),c=t.getMatrixOfElement(i),u=t.getRootTranslatedMatrix(),h=t.getRootRotatedMatrix(),d=u.multiply(h).multiply(c),f=transformLine(e,d.inverse()),p=f.start.clone(),g=t.getDataOfElement(i);if(!1===r.insideout){null==g.shapeBBox&&(g.shapeBBox=l.bbox());const e=g.shapeBBox;if(null!=e&&e.containsPoint(p))return a}let m;if(!0===r.extrapolate&&f.setLength(1e6),Path$5.isPath(l)){const e=r.precision||2;null==g.segmentSubdivisions&&(g.segmentSubdivisions=l.getSegmentSubdivisions({precision:e})),m={precision:e,segmentSubdivisions:g.segmentSubdivisions},o=f.intersect(l,m)}else o=f.intersect(l);o?Array.isArray(o)&&(o=p.closest(o)):!0===r.sticky&&(o=Rectangle.isRectangle(l)?l.getNearestPointToPoint(p):Ellipse$4.isEllipse(l)?l.intersectsWithLineFromCenterToPoint(p):l.closestPoint(p,m));const v=o?transformPoint(o,d):a;let y=r.offset||0;return!1!==r.stroked&&("object"==typeof y?(y=Object.assign({},y),null==y.x&&(y.x=0),y.x+=getStrokeWidth(i)/2):y+=getStrokeWidth(i)/2),offset(v,e.start,y)};function alignLine(e,t,n=0){const{start:r,end:i}=e;let o,a,s,l;switch(t){case"left":l="x",o=i,a=r,s=-1;break;case"right":l="x",o=r,a=i,s=1;break;case"top":l="y",o=i,a=r,s=-1;break;case"bottom":l="y",o=r,a=i,s=1;break;default:return}r[l]<i[l]?o[l]=a[l]:a[l]=o[l],Number.isFinite(n)&&(o[l]+=s*n,a[l]+=s*n)}const anchor=function(e,t,n,r){const{alignOffset:i,align:o}=r;return o&&alignLine(e,o,i),offset(e.end,e.start,r.offset)},connectionPoints=Object.freeze(Object.defineProperty({__proto__:null,bbox:bbox,rect:rect$1,boundary:boundary,anchor:anchor},Symbol.toStringTag,{value:"Module"}));var ConnectionPoint,ConnectionPoint2;ConnectionPoint2=ConnectionPoint||(ConnectionPoint={}),ConnectionPoint2.presets=connectionPoints,ConnectionPoint2.registry=Registry.create({type:"connection point"}),ConnectionPoint2.registry.register(ConnectionPoint2.presets,!0);const normal$1=function(e){return[...e]},oneSide=function(e,t,n){const r=t.side||"bottom",i=normalizeSides(t.padding||40),o=n.sourceBBox,a=n.targetBBox,s=o.getCenter(),l=a.getCenter();let c,u,h;switch(r){case"top":h=-1,c="y",u="height";break;case"left":h=-1,c="x",u="width";break;case"right":h=1,c="x",u="width";break;default:h=1,c="y",u="height"}return s[c]+=h*(o[u]/2+i[r]),l[c]+=h*(a[u]/2+i[r]),h*(s[c]-l[c])>0?l[c]=s[c]:s[c]=l[c],[s.toJSON(),...e,l.toJSON()]};function getPointBBox(e){return new Rectangle(e.x,e.y,0,0)}function getPaddingBox(e={}){const t=normalizeSides(e.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function getSourceBBox$1(e,t={}){return e.sourceBBox.clone().moveAndExpand(getPaddingBox(t))}function getTargetBBox$1(e,t={}){return e.targetBBox.clone().moveAndExpand(getPaddingBox(t))}function getSourceAnchor(e,t={}){if(e.sourceAnchor)return e.sourceAnchor;return getSourceBBox$1(e,t).getCenter()}function getTargetAnchor(e,t={}){if(e.targetAnchor)return e.targetAnchor;return getTargetBBox$1(e,t).getCenter()}const orth=function(e,t,n){let r=getSourceBBox$1(n,t),i=getTargetBBox$1(n,t);const o=getSourceAnchor(n,t),a=getTargetAnchor(n,t);r=r.union(getPointBBox(o)),i=i.union(getPointBBox(a));const s=e.map((e=>Point.create(e)));s.unshift(o),s.push(a);let l=null;const c=[];for(let u=0,h=s.length-1;u<h;u+=1){let e=null;const n=s[u],o=s[u+1],a=null!=Private$5.getBearing(n,o);if(0===u)u+1===h?r.intersectsWithRect(i.clone().inflate(1))?e=Private$5.insideNode(n,o,r,i):a||(e=Private$5.nodeToNode(n,o,r,i)):r.containsPoint(o)?e=Private$5.insideNode(n,o,r,getPointBBox(o).moveAndExpand(getPaddingBox(t))):a||(e=Private$5.nodeToVertex(n,o,r));else if(u+1===h){const r=a&&Private$5.getBearing(o,n)===l;i.containsPoint(n)||r?e=Private$5.insideNode(n,o,getPointBBox(n).moveAndExpand(getPaddingBox(t)),i,l):a||(e=Private$5.vertexToNode(n,o,i,l))}else a||(e=Private$5.vertexToVertex(n,o,l));e?(c.push(...e.points),l=e.direction):l=Private$5.getBearing(n,o),u+1<h&&c.push(o)}return c};var Private$5;!function(e){const t={N:"S",S:"N",E:"W",W:"E"},n={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function r(e,t,n){let r=new Point(e.x,t.y);return n.containsPoint(r)&&(r=new Point(t.x,e.y)),r}function i(e,t){return e["W"===t||"E"===t?"width":"height"]}function o(e,t){return e.x===t.x?e.y>t.y?"N":"S":e.y===t.y?e.x>t.x?"W":"E":null}function a(e,n,r){const i=new Point(e.x,n.y),a=new Point(n.x,e.y),s=o(e,i),l=o(e,a),c=r?t[r]:null,u=s===r||s!==c&&(l===c||l!==r)?i:a;return{points:[u],direction:o(u,n)}}function s(e,t,n){const i=r(e,t,n);return{points:[i],direction:o(i,t)}}e.getBBoxSize=i,e.getBearing=o,e.vertexToVertex=a,e.nodeToVertex=s,e.vertexToNode=function(e,t,n,a){const s=[new Point(e.x,t.y),new Point(t.x,e.y)],l=s.filter((e=>!n.containsPoint(e))),c=l.filter((t=>o(t,e)!==a));let u;if(c.length>0)return u=c.filter((t=>o(e,t)===a)).pop(),u=u||c[0],{points:[u],direction:o(u,t)};{u=difference$2(s,l)[0];const c=Point.create(t).move(u,-i(n,a)/2);return{points:[r(c,e,n),c],direction:o(c,t)}}},e.nodeToNode=function(e,t,n,r){let l=s(t,e,r);const c=l.points[0];if(n.containsPoint(c)){l=s(e,t,n);const u=l.points[0];if(r.containsPoint(u)){const h=Point.create(e).move(u,-i(n,o(e,u))/2),d=Point.create(t).move(c,-i(r,o(t,c))/2),f=new Line$5(h,d).getCenter(),p=s(e,f,n),g=a(f,t,p.direction);l.points=[p.points[0],g.points[0]],l.direction=g.direction}}return l},e.insideNode=function(e,t,i,a,s){const l=i.union(a).inflate(1),c=l.getCenter(),u=c.distance(t)>c.distance(e),h=u?t:e,d=u?e:t;let f,p,g,m;return s?(f=Point.fromPolar(l.width+l.height,n[s],h),f=l.getNearestPointToPoint(f).move(f,-1)):f=l.getNearestPointToPoint(h).move(h,1),p=r(f,d,l),f.round().equals(p.round())?(p=Point.fromPolar(l.width+l.height,Angle.toRad(f.theta(h))+Math.PI/2,d),p=l.getNearestPointToPoint(p).move(d,1).round(),g=r(f,p,l),m=u?[p,g,f]:[f,g,p]):m=u?[p,f]:[f,p],{points:m,direction:o(u?f:p,t)}}}(Private$5||(Private$5={}));const defaults$1={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeNodes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return resolve(this.step,this)},directions(){const e=resolve(this.step,this),t=resolve(this.cost,this);return[{cost:t,offsetX:e,offsetY:0},{cost:t,offsetX:-e,offsetY:0},{cost:t,offsetX:0,offsetY:e},{cost:t,offsetX:0,offsetY:-e}]},penalties(){const e=resolve(this.step,this);return{0:0,45:e/2,90:e/2}},paddingBox(){const e=resolve(this.step,this);return{x:-e,y:-e,width:2*e,height:2*e}},fallbackRouter:orth,draggingRouter:null};function resolve(e,t){return"function"==typeof e?e.call(t):e}function resolveOptions(e){const t=Object.keys(e).reduce(((t,n)=>{const r=t;return r[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?e[n]:resolve(e[n],e),t}),{});if(t.padding){const e=normalizeSides(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach((e=>{const t=new Point(0,0),n=new Point(e.offsetX,e.offsetY);e.angle=Angle.normalize(t.theta(n))})),t}const OPEN=1,CLOSE=2;class SortedSet{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=OPEN,this.values[e]=t;const n=sortedIndexBy(this.items,e,(e=>this.values[e]));this.items.splice(n,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=CLOSE),e}isOpen(e){return this.hash[e]===OPEN}isClose(e){return this.hash[e]===CLOSE}isEmpty(){return 0===this.items.length}}class ObstacleMap{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const n=this.options,r=n.excludeTerminals.reduce(((n,r)=>{const i=t[r];if(i){const t=e.getCell(i.cell);t&&n.push(t)}return n}),[]);let i=[];const o=e.getCell(t.getSourceCellId());o&&(i=union$2(i,o.getAncestors().map((e=>e.id))));const a=e.getCell(t.getTargetCellId());a&&(i=union$2(i,a.getAncestors().map((e=>e.id))));const s=this.mapGridSize;return e.getNodes().reduce(((e,t)=>{const o=t.shape,a=n.excludeShapes,l=!!o&&a.includes(o),c=r.some((e=>e.id===t.id)),u=n.excludeNodes.includes(t),h=i.includes(t.id),d=n.excludeHiddenNodes&&!t.isVisible();if(!(l||c||u||h||d)){const r=t.getBBox().moveAndExpand(n.paddingBox),i=r.getOrigin().snapToGrid(s),o=r.getCorner().snapToGrid(s);for(let t=i.x;t<=o.x;t+=s)for(let n=i.y;n<=o.y;n+=s){const i=new Point(t,n).toString();null==e[i]&&(e[i]=[]),e[i].push(r)}}return e}),this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[t];return!n||n.every((t=>!t.containsPoint(e)))}}function getSourceBBox(e,t){const n=e.sourceBBox.clone();return t&&t.paddingBox?n.moveAndExpand(t.paddingBox):n}function getTargetBBox(e,t){const n=e.targetBBox.clone();return t&&t.paddingBox?n.moveAndExpand(t.paddingBox):n}function getSourceEndpoint(e,t){if(e.sourceAnchor)return e.sourceAnchor;return getSourceBBox(e,t).getCenter()}function getTargetEndpoint(e,t){if(e.targetAnchor)return e.targetAnchor;return getTargetBBox(e,t).getCenter()}function getDirectionAngle$1(e,t,n,r,i){const o=360/n,a=e.theta(fixAngleEnd(e,t,r,i)),s=Angle.normalize(a+o/2);return o*Math.floor(s/o)}function fixAngleEnd(e,t,n,r){const i=r.step,o=t.x-e.x,a=t.y-e.y,s=o/n.x*i,l=a/n.y*i;return new Point(e.x+s,e.y+l)}function getDirectionChange$1(e,t){const n=Math.abs(e-t);return n>180?360-n:n}function getGridOffsets(e,t){const n=t.step;return t.directions.forEach((t=>{t.gridOffsetX=t.offsetX/n*e.x,t.gridOffsetY=t.offsetY/n*e.y})),t.directions}function getGrid(e,t,n){return{source:t.clone(),x:getGridDimension(n.x-t.x,e),y:getGridDimension(n.y-t.y,e)}}function getGridDimension(e,t){if(!e)return t;const n=Math.abs(e),r=Math.round(n/t);if(!r)return n;return t+(n-r*t)/r}function snapGrid(e,t){const n=t.source,r=Util$4.snapToGrid(e.x-n.x,t.x)+n.x,i=Util$4.snapToGrid(e.y-n.y,t.y)+n.y;return new Point(r,i)}function round$4(e,t){return e.round(t)}function align(e,t,n){return round$4(snapGrid(e.clone(),t),n)}function getKey(e){return e.toString()}function normalizePoint(e){return new Point(0===e.x?0:Math.abs(e.x)/e.x,0===e.y?0:Math.abs(e.y)/e.y)}function getCost(e,t){let n=1/0;for(let r=0,i=t.length;r<i;r+=1){const i=e.manhattanDistance(t[r]);i<n&&(n=i)}return n}function getRectPoints$1(e,t,n,r,i){const o=i.precision,a=i.directionMap,s=e.diff(t.getCenter()),l=Object.keys(a).reduce(((i,l)=>{if(n.includes(l)){const n=a[l],c=new Point(e.x+n.x*(Math.abs(s.x)+t.width),e.y+n.y*(Math.abs(s.y)+t.height)),u=new Line$5(e,c).intersect(t)||[];let h,d=null;for(let t=0;t<u.length;t+=1){const n=u[t],r=e.squaredDistance(n);(null==h||r>h)&&(h=r,d=n)}if(d){let e=align(d,r,o);t.containsPoint(e)&&(e=align(e.translate(n.x*r.x,n.y*r.y),r,o)),i.push(e)}}return i}),[]);return t.containsPoint(e)||l.push(align(e,r,o)),l}function reconstructRoute(e,t,n,r,i){const o=[];let a,s=normalizePoint(i.diff(n)),l=getKey(n),c=e[l];for(;c;){a=t[l];const n=normalizePoint(a.diff(c));n.equals(s)||(o.unshift(a),s=n),l=getKey(c),c=e[l]}const u=t[l];return normalizePoint(u.diff(r)).equals(s)||o.unshift(u),o}function findRoute(e,t,n,r,i){const o=i.precision;let a,s;a=Rectangle.isRectangle(t)?round$4(getSourceEndpoint(e,i).clone(),o):round$4(t.clone(),o),s=Rectangle.isRectangle(n)?round$4(getTargetEndpoint(e,i).clone(),o):round$4(n.clone(),o);const l=getGrid(i.step,a,s),c=a,u=s;let h,d;if(h=Rectangle.isRectangle(t)?getRectPoints$1(c,t,i.startDirections,l,i):[c],d=Rectangle.isRectangle(n)?getRectPoints$1(s,n,i.endDirections,l,i):[u],h=h.filter((e=>r.isAccessible(e))),d=d.filter((e=>r.isAccessible(e))),h.length>0&&d.length>0){const e=new SortedSet,t={},n={},a={};for(let r=0,i=h.length;r<i;r+=1){const n=h[r],i=getKey(n);e.add(i,getCost(n,d)),t[i]=n,a[i]=0}const s=i.previousDirectionAngle,f=void 0===s;let p,g;const m=getGridOffsets(l,i),v=m.length,y=d.reduce(((e,t)=>{const n=getKey(t);return e.push(n),e}),[]),b=Point.equalPoints(h,d);let x=i.maxLoopCount;for(;!e.isEmpty()&&x>0;){const h=e.pop(),w=t[h],_=n[h],C=a[h],$=w.equals(c),S=null==_;let E;E=S?f?$?null:getDirectionAngle$1(c,w,v,l,i):s:getDirectionAngle$1(_,w,v,l,i);if(!(S&&b)&&y.indexOf(h)>=0)return i.previousDirectionAngle=E,reconstructRoute(n,t,w,c,u);for(let s=0;s<v;s+=1){p=m[s];const c=p.angle;if(g=getDirectionChange$1(E,c),(!f||!$)&&g>i.maxDirectionChange)continue;const h=align(w.clone().translate(p.gridOffsetX||0,p.gridOffsetY||0),l,o),b=getKey(h);if(e.isClose(b)||!r.isAccessible(h))continue;if(y.indexOf(b)>=0){if(!h.equals(u)){if(getDirectionChange$1(c,getDirectionAngle$1(h,u,v,l,i))>i.maxDirectionChange)continue}}const x=C+p.cost+($?0:i.penalties[g]);(!e.isOpen(b)||x<a[b])&&(t[b]=h,n[b]=w,a[b]=x,e.add(b,x+getCost(h,d)))}x-=1}}return i.fallbackRoute?call(i.fallbackRoute,this,c,u,i):null}const router=function(e,t,n){const r=resolveOptions(t),i=getSourceBBox(n,r),o=getTargetBBox(n,r),a=getSourceEndpoint(n,r),s=new ObstacleMap(r).build(n.graph.model,n.cell),l=e.map((e=>Point.create(e))),c=[];let u,h,d=a;for(let f=0,p=l.length;f<=p;f+=1){let t=null;if(u=h||i,h=l[f],null==h){h=o;const e=n.cell;if((null==e.getSourceCellId()||null==e.getTargetCellId())&&"function"==typeof r.draggingRouter){const e=u===i?a:u,o=h.getOrigin();t=call(r.draggingRouter,n,e,o,r)}}if(null==t&&(t=findRoute(n,u,h,s,r)),null===t)return call(r.fallbackRouter,this,e,r,n);const p=t[0];p&&p.equals(d)&&t.shift(),d=t[t.length-1]||d,c.push(...t)}return c},manhattan=function(e,t,n){return call(router,this,e,Object.assign(Object.assign({},defaults$1),t),n)},defaults={maxDirectionChange:45,directions(){const e=resolve(this.step,this),t=resolve(this.cost,this),n=Math.ceil(Math.sqrt(e*e<<1));return[{cost:t,offsetX:e,offsetY:0},{cost:n,offsetX:e,offsetY:e},{cost:t,offsetX:0,offsetY:e},{cost:n,offsetX:-e,offsetY:e},{cost:t,offsetX:-e,offsetY:0},{cost:n,offsetX:-e,offsetY:-e},{cost:t,offsetX:0,offsetY:-e},{cost:n,offsetX:e,offsetY:-e}]},fallbackRoute(e,t,n){const r=e.theta(t),i=[];let o={x:t.x,y:e.y},a={x:e.x,y:t.y};if(r%180>90){const e=o;o=a,a=e}const s=r%90<45?o:a,l=new Line$5(e,s),c=90*Math.ceil(r/90),u=Point.fromPolar(l.squaredLength(),Angle.toRad(c+135),s),h=new Line$5(t,u),d=l.intersectsWithLine(h),f=d||t,p=d?f:e,g=360/n.directions.length,m=p.theta(t),v=Angle.normalize(m+g/2),y=g*Math.floor(v/g);return n.previousDirectionAngle=y,f&&i.push(f.round()),i.push(t),i}},metro=function(e,t,n){return call(manhattan,this,e,Object.assign(Object.assign({},defaults),t),n)},er$3=function(e,t,n){const r=t.offset||32,i=null==t.min?16:t.min;let o=0,a=t.direction;const s=n.sourceBBox,l=n.targetBBox,c=s.getCenter(),u=l.getCenter();if("number"==typeof r&&(o=r),null==a){let e=l.left-s.right,t=l.top-s.bottom;e>=0&&t>=0?a=e>=t?"L":"T":e<=0&&t>=0?(e=s.left-l.right,a=e>=0&&e>=t?"R":"T"):e>=0&&t<=0?(t=s.top-l.bottom,a=t>=0?e>=t?"L":"B":"L"):(e=s.left-l.right,t=s.top-l.bottom,a=e>=0&&t>=0?e>=t?"R":"B":e<=0&&t>=0?"B":e>=0&&t<=0||Math.abs(e)>Math.abs(t)?"R":"B")}let h,d,f;"H"===a?a=u.x-c.x>=0?"L":"R":"V"===a&&(a=u.y-c.y>=0?"T":"B"),"center"===r&&("L"===a?o=(l.left-s.right)/2:"R"===a?o=(s.left-l.right)/2:"T"===a?o=(l.top-s.bottom)/2:"B"===a&&(o=(s.top-l.bottom)/2));const p="L"===a||"R"===a;if(p){if(u.y===c.y)return[...e];f="L"===a?1:-1,h="x",d="width"}else{if(u.x===c.x)return[...e];f="T"===a?1:-1,h="y",d="height"}const g=c.clone(),m=u.clone();if(g[h]+=f*(s[d]/2+o),m[h]-=f*(l[d]/2+o),p){const e=g.x,t=m.x,n=s.width/2+i,r=l.width/2+i;u.x>c.x?t<=e&&(g.x=Math.max(t,c.x+n),m.x=Math.min(e,u.x-r)):t>=e&&(g.x=Math.min(t,c.x-n),m.x=Math.max(e,u.x+r))}else{const e=g.y,t=m.y,n=s.height/2+i,r=l.height/2+i;u.y>c.y?t<=e&&(g.y=Math.max(t,c.y+n),m.y=Math.min(e,u.y-r)):t>=e&&(g.y=Math.min(t,c.y-n),m.y=Math.max(e,u.y+r))}return[g.toJSON(),...e,m.toJSON()]};function rollup(e,t){if(null!=t&&!1!==t){const n="boolean"==typeof t?0:t;if(n>0){const t=Point.create(e[1]).move(e[2],n),r=Point.create(e[1]).move(e[0],n);return[t.toJSON(),...e,r.toJSON()]}{const t=e[1];return[Object.assign({},t),...e,Object.assign({},t)]}}return e}const loop$1=function(e,t,n){const r=t.width||50,i=(t.height||80)/2,o=t.angle||"auto",a=n.sourceAnchor,s=n.targetAnchor,l=n.sourceBBox,c=n.targetBBox;if(a.equals(s)){const e=e=>{const t=Angle.toRad(e),n=Math.sin(t),o=Math.cos(t),s=new Point(a.x+o*r,a.y+n*r),l=new Point(s.x-o*i,s.y-n*i),c=l.clone().rotate(-90,s),u=l.clone().rotate(90,s);return[c.toJSON(),s.toJSON(),u.toJSON()]},n=e=>{const t=a.clone().move(e,-1),n=new Line$5(t,e);return!l.containsPoint(e)&&!l.intersectsWithLine(n)},s=[0,90,180,270,45,135,225,315];if("number"==typeof o)return rollup(e(o),t.merge);const c=l.getCenter();if(c.equals(a))return rollup(e(0),t.merge);const u=c.angleBetween(a,c.clone().translate(1,0));let h=e(u);if(n(h[1]))return rollup(h,t.merge);for(let r=1,i=s.length;r<i;r+=1)if(h=e(u+s[r]),n(h[1]))return rollup(h,t.merge);return rollup(h,t.merge)}{const e=new Line$5(a,s);let o=e.parallel(-r),u=o.getCenter(),h=o.start.clone().move(o.end,i),d=o.end.clone().move(o.start,i);const f=e.parallel(-1),p=new Line$5(f.start,u),g=new Line$5(f.end,u);if((l.containsPoint(u)||c.containsPoint(u)||l.intersectsWithLine(p)||l.intersectsWithLine(g)||c.intersectsWithLine(p)||c.intersectsWithLine(g))&&(o=e.parallel(r),u=o.getCenter(),h=o.start.clone().move(o.end,i),d=o.end.clone().move(o.start,i)),t.merge){const e=new Line$5(a,s),t=new Line$5(u,e.center).setLength(Number.MAX_SAFE_INTEGER),r=l.intersectsWithLine(t),i=c.intersectsWithLine(t),o=r?Array.isArray(r)?r:[r]:[];i&&(Array.isArray(i)?o.push(...i):o.push(i));const h=e.center.closest(o);h?(n.sourceAnchor=h.clone(),n.targetAnchor=h.clone()):(n.sourceAnchor=e.center.clone(),n.targetAnchor=e.center.clone())}return rollup([h.toJSON(),u.toJSON(),d.toJSON()],t.merge)}},routers=Object.freeze(Object.defineProperty({__proto__:null,normal:normal$1,oneSide:oneSide,orth:orth,metro:metro,manhattan:manhattan,er:er$3,loop:loop$1},Symbol.toStringTag,{value:"Module"}));var Router,Router2;Router2=Router||(Router={}),Router2.presets=routers,Router2.registry=Registry.create({type:"router"}),Router2.registry.register(Router2.presets,!0);const normal=function(e,t,n,r={}){const i=[e,...n,t],o=new Polyline$2(i),a=new Path$5(o);return r.raw?a:a.serialize()},loop=function(e,t,n,r={}){const i=3===n.length?0:1,o=Point.create(n[0+i]),a=Point.create(n[2+i]),s=Point.create(n[1+i]);if(!Point.equals(e,t)){const n=new Point((e.x+t.x)/2,(e.y+t.y)/2),r=n.angleBetween(Point.create(e).rotate(90,n),s);r>1&&(o.rotate(180-r,n),a.rotate(180-r,n),s.rotate(180-r,n))}const l=`\n     M ${e.x} ${e.y}\n     Q ${o.x} ${o.y} ${s.x} ${s.y}\n     Q ${a.x} ${a.y} ${t.x} ${t.y}\n  `;return r.raw?Path$5.parse(l):l},rounded=function(e,t,n,r={}){const i=new Path$5;i.appendSegment(Path$5.createSegment("M",e));const o=1/3,a=2/3,s=r.radius||10;let l,c;for(let u=0,h=n.length;u<h;u+=1){const r=Point.create(n[u]),h=n[u-1]||e,d=n[u+1]||t;l=c||r.distance(h)/2,c=r.distance(d)/2;const f=-Math.min(s,l),p=-Math.min(s,c),g=r.clone().move(h,f).round(),m=r.clone().move(d,p).round(),v=new Point(o*g.x+a*r.x,a*r.y+o*g.y),y=new Point(o*m.x+a*r.x,a*r.y+o*m.y);i.appendSegment(Path$5.createSegment("L",g)),i.appendSegment(Path$5.createSegment("C",v,y,m))}return i.appendSegment(Path$5.createSegment("L",t)),r.raw?i:i.serialize()},smooth=function(e,t,n,r={}){let i,o=r.direction;if(n&&0!==n.length){const r=[e,...n,t],o=Curve.throughPoints(r);i=new Path$5(o)}else if(i=new Path$5,i.appendSegment(Path$5.createSegment("M",e)),o||(o=Math.abs(e.x-t.x)>=Math.abs(e.y-t.y)?"H":"V"),"H"===o){const n=(e.x+t.x)/2;i.appendSegment(Path$5.createSegment("C",n,e.y,n,t.y,t.x,t.y))}else{const n=(e.y+t.y)/2;i.appendSegment(Path$5.createSegment("C",e.x,n,t.x,n,t.x,t.y))}return r.raw?i:i.serialize()},CLOSE_PROXIMITY_PADDING=1,F13=1/3,F23=2/3;function setupUpdating(e){let t=e.graph._jumpOverUpdateList;if(null==t&&(t=e.graph._jumpOverUpdateList=[],e.graph.on("cell:mouseup",(()=>{const t=e.graph._jumpOverUpdateList;for(let e=0;e<t.length;e+=1)t[e].update()})),e.graph.on("model:reseted",(()=>{t=e.graph._jumpOverUpdateList=[]}))),t.indexOf(e)<0){t.push(e);const n=()=>t.splice(t.indexOf(e),1);e.cell.once("change:connector",n),e.cell.once("removed",n)}}function createLines(e,t,n=[]){const r=[e,...n,t],i=[];return r.forEach(((e,t)=>{const n=r[t+1];null!=n&&i.push(new Line$5(e,n))})),i}function findLineIntersections(e,t){const n=[];return t.forEach((t=>{const r=e.intersectsWithLine(t);r&&n.push(r)})),n}function getDistence(e,t){return new Line$5(e,t).squaredLength()}function createJumps(e,t,n){return t.reduce(((r,i,o)=>{if(skippedPoints.includes(i))return r;const a=r.pop()||e,s=Point.create(i).move(a.start,-n);let l=Point.create(i).move(a.start,+n);const c=t[o+1];if(null!=c){const e=l.distance(c);e<=n&&(l=c.move(a.start,e),skippedPoints.push(c))}else{if(s.distance(a.end)<2*n+CLOSE_PROXIMITY_PADDING)return r.push(a),r}if(l.distance(a.start)<2*n+CLOSE_PROXIMITY_PADDING)return r.push(a),r;const u=new Line$5(s,l);return jumppedLines.push(u),r.push(new Line$5(a.start,s),u,new Line$5(l,a.end)),r}),[])}function buildPath(e,t,n,r){const i=new Path$5;let o;return o=Path$5.createSegment("M",e[0].start),i.appendSegment(o),e.forEach(((a,s)=>{if(jumppedLines.includes(a)){let e,r,s,l;if("arc"===n){e=-90,r=a.start.diff(a.end);(r.x<0||0===r.x&&r.y<0)&&(e+=180);const t=a.getCenter(),n=new Line$5(t,a.end).rotate(e,t);let c;c=new Line$5(a.start,t),s=c.pointAt(2/3).rotate(e,a.start),l=n.pointAt(1/3).rotate(-e,n.end),o=Path$5.createSegment("C",s,l,n.end),i.appendSegment(o),c=new Line$5(t,a.end),s=n.pointAt(1/3).rotate(e,n.end),l=c.pointAt(1/3).rotate(-e,a.end),o=Path$5.createSegment("C",s,l,a.end),i.appendSegment(o)}else if("gap"===n)o=Path$5.createSegment("M",a.end),i.appendSegment(o);else if("cubic"===n){e=a.start.theta(a.end);const n=.6*t;let c=1.35*t;r=a.start.diff(a.end);(r.x<0||0===r.x&&r.y<0)&&(c*=-1),s=new Point(a.start.x+n,a.start.y+c).rotate(e,a.start),l=new Point(a.end.x-n,a.end.y+c).rotate(e,a.end),o=Path$5.createSegment("C",s,l,a.end),i.appendSegment(o)}}else{const t=e[s+1];0===r||!t||jumppedLines.includes(t)?(o=Path$5.createSegment("L",a.end),i.appendSegment(o)):buildRoundedSegment(r,i,a.end,a.start,t.end)}})),i}function buildRoundedSegment(e,t,n,r,i){const o=n.distance(r)/2,a=n.distance(i)/2,s=-Math.min(e,o),l=-Math.min(e,a),c=n.clone().move(r,s).round(),u=n.clone().move(i,l).round(),h=new Point(F13*c.x+F23*n.x,F23*n.y+F13*c.y),d=new Point(F13*u.x+F23*n.x,F23*n.y+F13*u.y);let f;f=Path$5.createSegment("L",c),t.appendSegment(f),f=Path$5.createSegment("C",h,d,u),t.appendSegment(f)}let jumppedLines,skippedPoints;const jumpover=function(e,t,n,r={}){jumppedLines=[],skippedPoints=[],setupUpdating(this);const i=r.size||5,o=r.type||"arc",a=r.radius||0,s=r.ignoreConnectors||["smooth"],l=this.graph,c=l.model.getEdges();if(1===c.length)return buildPath(createLines(e,t,n),i,o,a);const u=this.cell,h=c.indexOf(u),d=l.options.connecting.connector||{},f=c.filter(((e,t)=>{const n=e.getConnector()||d;return!s.includes(n.name)&&(!(t>h)||"jumpover"!==n.name)})),p=f.map((e=>l.renderer.findViewByCell(e))),g=createLines(e,t,n),m=p.map((e=>null==e?[]:e===this?g:createLines(e.sourcePoint,e.targetPoint,e.routePoints))),v=[];g.forEach((e=>{const t=f.reduce(((t,n,r)=>{if(n!==u){const n=findLineIntersections(e,m[r]);t.push(...n)}return t}),[]).sort(((t,n)=>getDistence(e.start,t)-getDistence(e.start,n)));t.length>0?v.push(...createJumps(e,t,i)):v.push(e)}));const y=buildPath(v,i,o,a);return jumppedLines=[],skippedPoints=[],r.raw?y:y.serialize()},connectors=Object.freeze(Object.defineProperty({__proto__:null,normal:normal,loop:loop,rounded:rounded,smooth:smooth,jumpover:jumpover},Symbol.toStringTag,{value:"Module"}));var Connector,Connector2;Connector2=Connector||(Connector={}),Connector2.presets=connectors,Connector2.registry=Registry.create({type:"connector"}),Connector2.registry.register(Connector2.presets,!0),Registry.create;class Animation{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,n={},r="/"){const i=this.cell.getPropByPath(e),o=defaults$4(n,Animation.defaultOptions),a=this.getTiming(o.timing),s=this.getInterp(o.interp,i,t);let l=0;const c=Array.isArray(e)?e.join(r):e,u=Array.isArray(e)?e:e.split(r),h=()=>{const e=(new Date).getTime();0===l&&(l=e);let t=(e-l)/o.duration;t<1?this.ids[c]=requestAnimationFrame$2(h):t=1;const r=s(a(t));this.cell.setPropByPath(u,r),n.progress&&n.progress(Object.assign({progress:t,currentValue:r},this.getArgs(c))),1===t&&(this.cell.notify("transition:end",this.getArgs(c)),this.cell.notify("transition:complete",this.getArgs(c)),n.complete&&n.complete(this.getArgs(c)),this.cell.notify("transition:finish",this.getArgs(c)),n.finish&&n.finish(this.getArgs(c)),this.clean(c))};return setTimeout((()=>{this.stop(e,void 0,r),this.cache[c]={startValue:i,targetValue:t,options:o},this.ids[c]=requestAnimationFrame$2(h),this.cell.notify("transition:begin",this.getArgs(c)),this.cell.notify("transition:start",this.getArgs(c)),n.start&&n.start(this.getArgs(c))}),n.delay),this.stop.bind(this,e,r,n)}stop(e,t={},n="/"){const r=Array.isArray(e)?e:e.split(n);return Object.keys(this.ids).filter((e=>isEqual$2(r,e.split(n).slice(0,r.length)))).forEach((e=>{cancelAnimationFrame$2(this.ids[e]);const n=this.cache[e],r=this.getArgs(e),i=Object.assign(Object.assign({},n.options),t),o=i.jumpedToEnd;o&&null!=n.targetValue&&(this.cell.setPropByPath(e,n.targetValue),this.cell.notify("transition:end",Object.assign({},r)),this.cell.notify("transition:complete",Object.assign({},r)),i.complete&&i.complete(Object.assign({},r)));const a=Object.assign({jumpedToEnd:o},r);this.cell.notify("transition:stop",Object.assign({},a)),i.stop&&i.stop(Object.assign({},a)),this.cell.notify("transition:finish",Object.assign({},r)),i.finish&&i.finish(Object.assign({},r)),this.clean(e)})),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return"string"==typeof e?Timing[e]:e}getInterp(e,t,n){return e?e(t,n):"number"==typeof n?Interp.number(t,n):"string"==typeof n?"#"===n[0]?Interp.color(t,n):Interp.unit(t,n):Interp.object(t,n)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}(Animation||(Animation={})).defaultOptions={delay:10,duration:100,timing:"linear"};var __decorate$t=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class Store extends Basecoat{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(cloneDeep(e)),this.changed={}}mutate(e,t={}){const n=!0===t.unset,r=!0===t.silent,i=[],o=this.changing;this.changing=!0,o||(this.previous=cloneDeep(this.data),this.changed={});const a=this.data,s=this.previous,l=this.changed;if(Object.keys(e).forEach((t=>{const r=t,o=e[r];isEqual$2(a[r],o)||i.push(r),isEqual$2(s[r],o)?delete l[r]:l[r]=o,n?delete a[r]:a[r]=o})),!r&&i.length>0&&(this.pending=!0,this.pendingOptions=t,i.forEach((e=>{this.emit("change:*",{key:e,options:t,store:this,current:a[e],previous:s[e]})}))),o)return this;if(!r)for(;this.pending;)this.pending=!1,this.emit("changed",{current:a,previous:s,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(null==e)return this.data;const n=this.data[e];return null==n?t:n}getPrevious(e){if(this.previous){const t=this.previous[e];return null==t?void 0:t}}set(e,t,n){return null!=e&&("object"==typeof e?this.mutate(e,t):this.mutate({[e]:t},n)),this}remove(e,t){const n=void 0,r={};let i;if("string"==typeof e)r[e]=n,i=t;else if(Array.isArray(e))e.forEach((e=>r[e]=n)),i=t;else{for(const e in this.data)r[e]=n;i=e}return this.mutate(r,Object.assign(Object.assign({},i),{unset:!0})),this}getByPath(e){return getByPath(this.data,e,"/")}setByPath(e,t,n={}){const r="/",i=Array.isArray(e)?[...e]:e.split(r),o=Array.isArray(e)?e.join(r):e,a=i[0],s=i.length;if(n.propertyPath=o,n.propertyValue=t,n.propertyPathArray=i,1===s)this.set(a,t,n);else{const o={};let l=o,c=a;for(let e=1;e<s;e+=1){const t=i[e],n=Number.isFinite(Number(t));l=l[c]=n?[]:{},c=t}setByPath(o,i,t,r);const u=cloneDeep(this.data);n.rewrite&&unsetByPath(u,e,r);const h=merge$1(u,o);this.set(a,h[a],n)}return this}removeByPath(e,t){const n=Array.isArray(e)?e:e.split("/"),r=n[0];if(1===n.length)this.remove(r,t);else{const e=n.slice(1),i=cloneDeep(this.get(r));i&&unsetByPath(i,e),this.set(r,i,t)}return this}hasChanged(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(null==e)return this.hasChanged()?cloneDeep(this.changed):null;const t=this.changing?this.previous:this.data,n={};let r;for(const i in e){const o=e[i];isEqual$2(t[i],o)||(n[i]=o,r=!0)}return r?cloneDeep(n):null}toJSON(){return cloneDeep(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}__decorate$t([Basecoat.dispose()],Store.prototype,"dispose",null);var __decorate$s=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$n=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Cell2,ShareRegistry;class Cell extends Basecoat{constructor(e={}){super();const t=this.constructor.getDefaults(!0),n=merge$1({},this.preprocess(t),this.preprocess(e));this.id=n.id||uuid(),this.store=new Store(n),this.animation=new Animation(this),this.setup(),this.init(),this.postprocess(e)}static config(e){const{markup:t,propHooks:n,attrHooks:r}=e,i=__rest$n(e,["markup","propHooks","attrHooks"]);null!=t&&(this.markup=t),n&&(this.propHooks=this.propHooks.slice(),Array.isArray(n)?this.propHooks.push(...n):"function"==typeof n?this.propHooks.push(n):Object.keys(n).forEach((e=>{const t=n[e];"function"==typeof t&&this.propHooks.push(t)}))),r&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),r)),this.defaults=merge$1({},this.defaults,i)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:cloneDeep(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce(((t,n)=>n?call(n,e,t):t),t)}get[Symbol.toStringTag](){return Cell.toStringTag}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const n=e.id,r=this.constructor.applyPropHooks(this,e);return null==n&&!0!==t&&(r.id=uuid()),r}postprocess(e){}setup(){this.store.on("change:*",(e=>{const{key:t,current:n,previous:r,options:i}=e;this.notify("change:*",{key:t,options:i,current:n,previous:r,cell:this}),this.notify(`change:${t}`,{options:i,current:n,previous:r,cell:this});const o=t;"source"!==o&&"target"!==o||this.notify("change:terminal",{type:o,current:n,previous:r,options:i,cell:this})})),this.store.on("changed",(({options:e})=>this.notify("changed",{options:e,cell:this})))}notify(e,t){this.trigger(e,t);const n=this.model;return n&&(n.notify(`cell:${e}`,t),this.isNode()?n.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&n.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return null==e?this.store.get():this.store.get(e,t)}setProp(e,t,n){if("string"==typeof e)this.store.set(e,t,n);else{const n=this.preprocess(e,!0);this.store.set(merge$1({},this.getProp(),n),t),this.postprocess(e)}return this}removeProp(e,t){return"string"==typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,n={}){return this.model&&("children"===e?this._children=t?t.map((e=>this.model.getCell(e))).filter((e=>null!=e)):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,n),this}removePropByPath(e,t={}){const n=Array.isArray(e)?e:e.split("/");return"attrs"===n[0]&&(t.dirty=!0),this.store.removeByPath(n,t),this}prop(e,t,n){return null==e?this.getProp():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,n||{}):this.setPropByPath(e,t,n||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){null==e?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let n,r=t.getMaxZIndex();e.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0}),n.unshift(this)):n=[this],r=r-n.length+1;const i=t.total();let o=t.indexOf(this)!==i-n.length;o||(o=n.some(((e,t)=>e.getZIndex()!==r+t))),o&&this.batchUpdate("to-front",(()=>{r+=n.length,n.forEach(((t,n)=>{t.setZIndex(r+n,e)}))}))}return this}toBack(e={}){const t=this.model;if(t){let n,r=t.getMinZIndex();e.deep?(n=this.getDescendants({deep:!0,breadthFirst:!0}),n.unshift(this)):n=[this];let i=0!==t.indexOf(this);i||(i=n.some(((e,t)=>e.getZIndex()!==r+t))),i&&this.batchUpdate("to-back",(()=>{r-=n.length,n.forEach(((t,n)=>{t.setZIndex(r+n,e)}))}))}return this}get markup(){return this.getMarkup()}set markup(e){null==e?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");if(null==e){e=this.constructor.getMarkup()}return e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){null==e?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(null==e)this.removeAttrs(t);else{const n=e=>this.store.set("attrs",e,t);if(!0===t.overwrite)n(e);else{const r=this.getAttrs();!1===t.deep?n(Object.assign(Object.assign({},r),e)):n(merge$1({},r,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const t=this.constructor.getAttrHooks()||{};let n=t[e]||Attr.registry.get(e);if(!n){const r=camelCase$1(e);n=t[r]||Attr.registry.get(r)}return n||null}getAttrByPath(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,n={}){return this.setPropByPath(this.prefixAttrPath(e),t,n),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,n){return null==e?this.getAttrByPath():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,n||{}):this.setAttrByPath(e,t,n||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return!1!==this.store.get("visible")}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const n="boolean"==typeof e?t:e;return("boolean"==typeof e?e:!this.isVisible())?this.show(n):this.hide(n),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(null==e)this.removeData(t);else{const n=e=>this.store.set("data",e,t);if(!0===t.overwrite)n(e);else{const r=this.getData();!1===t.deep?n("object"==typeof e?Object.assign(Object.assign({},r),e):e):n(merge$1({},r,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map((e=>{var t;return null===(t=this.model)||void 0===t?void 0:t.getCell(e)})).filter((e=>null!=e));return this._children=t,[...t]}return null}hasParent(){return null!=this.parent}isParentOf(e){return null!=e&&e.getParent()===this}isChildOf(e){return null!=e&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(e){return null==this.children?-1:this.children.indexOf(e)}getChildAt(e){return null!=this.children&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let n=this.getParent();for(;n;)t.push(n),n=!1!==e.deep?n.getParent():null;return t}getDescendants(e={}){if(!1!==e.deep){if(e.breadthFirst){const e=[],t=this.getChildren()||[];for(;t.length>0;){const n=t.shift(),r=n.getChildren();e.push(n),r&&t.push(...r)}return e}{const t=this.getChildren()||[];return t.forEach((n=>{t.push(...n.getDescendants(e))})),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(null==e)return!1;if(!1!==t.deep){let t=this.getParent();for(;t;){if(t===e)return!0;t=t.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return null!=e&&e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return Cell.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,null!=e?this.store.set("children",e.map((e=>e.id)),t):this.store.remove("children",t),this}unembed(e,t={}){const n=this.children;if(null!=n&&null!=e){const r=this.getChildIndex(e);-1!==r&&(n.splice(r,1),e.setParent(null,t),this.setChildren(n,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return Cell.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,n={}){return e.insertChild(this,t,n),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,n={}){if(null!=e&&e!==this){const r=e.getParent(),i=this!==r;let o=t;if(null==o&&(o=this.getChildCount(),i||(o-=1)),r){const t=r.getChildren();if(t){const i=t.indexOf(e);i>=0&&(e.setParent(null,n),t.splice(i,1),r.setChildren(t,n))}}let a=this.children;if(null==a?(a=[],a.push(e)):a.splice(o,0,e),e.setParent(this,n),this.setChildren(a,n),i&&this.model){const e=this.model.getIncomingEdges(this),t=this.model.getOutgoingEdges(this);e&&e.forEach((e=>e.updateParent(n))),t&&t.forEach((e=>e.updateParent(n)))}this.model&&this.model.addCell(e,n)}return this}removeFromParent(e={}){const t=this.getParent();if(null!=t){const n=t.getChildIndex(this);t.removeChildAt(n,e)}return this}removeChild(e,t={}){const n=this.getChildIndex(e);return this.removeChildAt(n,t)}removeChildAt(e,t={}){const n=this.getChildAt(e);return null!=this.children&&null!=n&&(this.unembed(n,t),n.remove(t)),n}remove(e={}){return this.batchUpdate("remove",(()=>{const t=this.getParent();t&&t.removeChild(this,e),!1!==e.deep&&this.eachChild((t=>t.remove(e))),this.model&&this.model.removeCell(this,e)})),this}transition(e,t,n={},r="/"){return this.animation.start(e,t,n,r)}stopTransition(e,t,n="/"){return this.animation.stop(e,t,n),this}getTransitions(){return this.animation.get()}translate(e,t,n){return this}scale(e,t,n,r){return this}addTools(e,t,n){const r=Array.isArray(e)?e:[e],i="string"==typeof t?t:null,o="object"==typeof t?t:"object"==typeof n?n:{};if(o.reset)return this.setTools({name:i,items:r,local:o.local},o);let a=cloneDeep(this.getTools());return null==a||null==i||a.name===i?(null==a&&(a={}),a.items||(a.items=[]),a.name=i,a.items=[...a.items,...r],this.setTools(Object.assign({},a),o)):void 0}setTools(e,t={}){return null==e?this.removeTools():this.store.set("tools",Cell.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return null!=t&&(null==e||t.name===e)}hasTool(e){const t=this.getTools();return null!=t&&t.items.some((t=>"string"==typeof t?t===e:t.name===e))}removeTool(e,t={}){const n=cloneDeep(this.getTools());if(n){let r=!1;const i=n.items.slice(),o=e=>{i.splice(e,1),r=!0};if("number"==typeof e)o(e);else for(let t=i.length-1;t>=0;t-=1){const n=i[t];("string"==typeof n?n===e:n.name===e)&&o(t)}r&&(n.items=i,this.setTools(n,t))}return this}getBBox(e){return new Rectangle}getConnectionPoint(e,t){return new Point}toJSON(e={}){const t=Object.assign({},this.store.get()),n=Object.prototype.toString,r=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const e=this.constructor;throw new Error(`Unable to serialize ${r} missing "shape" prop, check the ${r} "${e.name||n.call(e)}"`)}const i=this.constructor,o=!0===e.diff,a=t.attrs||{},s=i.getDefaults(!0),l=o?this.preprocess(s,!0):s,c=l.attrs||{},u={};Object.keys(t).forEach((e=>{const i=t[e];if(null!=i&&!Array.isArray(i)&&"object"==typeof i&&!isPlainObject$2(i))throw new Error(`Can only serialize ${r} with plain-object props, but got a "${n.call(i)}" type of key "${e}" on ${r} "${this.id}"`);if("attrs"!==e&&"shape"!==e&&o){isEqual$2(i,l[e])&&delete t[e]}})),Object.keys(a).forEach((e=>{const t=a[e],n=c[e];Object.keys(t).forEach((r=>{const i=t[r],o=n?n[r]:null;null==i||"object"!=typeof i||Array.isArray(i)?null!=n&&isEqual$2(o,i)||(null==u[e]&&(u[e]={}),u[e][r]=i):Object.keys(i).forEach((t=>{const a=i[t];if(null==n||null==o||!isObject$1(o)||!isEqual$2(o[t],a)){null==u[e]&&(u[e]={}),null==u[e][r]&&(u[e][r]={});u[e][r][t]=a}}))}))}));const h=Object.assign(Object.assign({},t),{attrs:isEmpty$1(u)?void 0:u});null==h.attrs&&delete h.attrs;const d=h;return 0===d.angle&&delete d.angle,cloneDeep(d)}clone(e={}){if(!e.deep){const t=Object.assign({},this.store.get());e.keepId||delete t.id,delete t.parent,delete t.children;return new(0,this.constructor)(t)}return Cell.deepClone(this)[this.id]}findView(e){return e.renderer.findViewByCell(this)}startBatch(e,t={},n=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),n&&n.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},n=this.model){return n&&n.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,n){const r=this.model;this.startBatch(e,n,r);const i=t();return this.stopBatch(e,n,r),i}dispose(){this.removeFromParent(),this.store.dispose()}}Cell.defaults={},Cell.attrHooks={},Cell.propHooks=[],__decorate$s([Basecoat.dispose()],Cell.prototype,"dispose",null),(Cell||(Cell={})).normalizeTools=function(e){return"string"==typeof e?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}},Cell2=Cell||(Cell={}),Cell2.toStringTag=`X6.${Cell2.name}`,Cell2.isCell=function(e){if(null==e)return!1;if(e instanceof Cell2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Cell2.toStringTag)&&"function"==typeof n.isNode&&"function"==typeof n.isEdge&&"function"==typeof n.prop&&"function"==typeof n.attr},function(e){e.getCommonAncestor=function(...e){const t=e.filter((e=>null!=e)).map((e=>e.getAncestors())).sort(((e,t)=>e.length-t.length));return t.shift().find((e=>t.every((t=>t.includes(e)))))||null},e.getCellsBBox=function(e,t={}){let n=null;for(let r=0,i=e.length;r<i;r+=1){const i=e[r];let o=i.getBBox(t);if(o){if(i.isNode()){const e=i.getAngle();null!=e&&0!==e&&(o=o.bbox(e))}n=null==n?o:n.union(o)}}return n},e.deepClone=function(t){const n=[t,...t.getDescendants({deep:!0})];return e.cloneCells(n)},e.cloneCells=function(e){const t=uniq$1(e),n=t.reduce(((e,t)=>(e[t.id]=t.clone(),e)),{});return t.forEach((e=>{const t=n[e.id];if(t.isEdge()){const e=t.getSourceCellId(),r=t.getTargetCellId();e&&n[e]&&t.setSource(Object.assign(Object.assign({},t.getSource()),{cell:n[e].id})),r&&n[r]&&t.setTarget(Object.assign(Object.assign({},t.getTarget()),{cell:n[r].id}))}const r=e.getParent();r&&n[r.id]&&t.setParent(n[r.id]);const i=e.getChildren();if(i&&i.length){const e=i.reduce(((e,t)=>(n[t.id]&&e.push(n[t.id]),e)),[]);e.length>0&&t.setChildren(e)}})),n}}(Cell||(Cell={})),function(e){e.config({propHooks(t){var{tools:n}=t,r=__rest$n(t,["tools"]);return n&&(r.tools=e.normalizeTools(n)),r}})}(Cell||(Cell={})),function(e){let t,n;e.exist=function(e,r){return r?null!=t&&t.exist(e):null!=n&&n.exist(e)},e.setEdgeRegistry=function(e){t=e},e.setNodeRegistry=function(e){n=e}}(ShareRegistry||(ShareRegistry={}));class PortManager{constructor(e){this.ports=[],this.groups={},this.init(cloneDeep(e))}getPorts(){return this.ports}getGroup(e){return null!=e?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter((t=>t.group===e||null==t.group&&null==e))}getPortsLayoutByGroup(e,t){const n=this.getPortsByGroup(e),r=e?this.getGroup(e):null,i=r?r.position:null,o=i?i.name:null;let a;if(null!=o){const e=PortLayout.registry.get(o);if(null==e)return PortLayout.registry.onNotFound(o);a=e}else a=PortLayout.presets.left;const s=n.map((e=>e&&e.position&&e.position.args||{})),l=i&&i.args||{};return a(s,t,l).map(((e,r)=>{const i=n[r];return{portLayout:e,portId:i.id,portSize:i.size,portAttrs:i.attrs,labelSize:i.label.size,labelLayout:this.getPortLabelLayout(i,Point.create(e.position),t)}}))}init(e){const{groups:t,items:n}=e;null!=t&&Object.keys(t).forEach((e=>{this.groups[e]=this.parseGroup(t[e])})),Array.isArray(n)&&n.forEach((e=>{this.ports.push(this.parsePort(e))}))}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),n=this.getGroup(e.group)||{};return t.markup=t.markup||n.markup,t.attrs=merge$1({},n.attrs,t.attrs),t.position=this.createPosition(n,t),t.label=merge$1({},n.label,this.getLabel(t)),t.zIndex=this.getZIndex(n,t),t.size=Object.assign(Object.assign({},n.size),t.size),t}getZIndex(e,t){return"number"==typeof t.zIndex?t.zIndex:"number"==typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}createPosition(e,t){return merge$1({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"==typeof e)return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if("object"==typeof e)return e}return{args:{}}}getLabel(e,t=!1){const n=e.label||{};return n.position=this.getPortLabelPosition(n.position,t),n}getPortLabelLayout(e,t,n){const r=e.label.position.name||"left",i=e.label.position.args||{},o=PortLabelLayout.registry.get(r)||PortLabelLayout.presets.left;return o?o(t,n,i):null}}var __rest$m=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Node2;class Node$4 extends Cell{constructor(e={}){super(e),this.initPorts()}get[Symbol.toStringTag](){return Node$4.toStringTag}preprocess(e,t){const{x:n,y:r,width:i,height:o}=e,a=__rest$m(e,["x","y","width","height"]);if(null!=n||null!=r){const e=a.position;a.position=Object.assign(Object.assign({},e),{x:null!=n?n:e?e.x:0,y:null!=r?r:e?e.y:0})}if(null!=i||null!=o){const e=a.size;a.size=Object.assign(Object.assign({},e),{width:null!=i?i:e?e.width:0,height:null!=o?o:e?e.height:0})}return super.preprocess(a,t)}isNode(){return!0}size(e,t,n){return void 0===e?this.getSize():"number"==typeof e?this.setSize(e,t,n):this.setSize(e,t)}getSize(){const e=this.store.get("size");return e?Object.assign({},e):{width:1,height:1}}setSize(e,t,n){return"object"==typeof e?this.resize(e.width,e.height,t):this.resize(e,t,n),this}resize(e,t,n={}){this.startBatch("resize",n);const r=n.direction;if(r){const i=this.getSize();switch(r){case"left":case"right":t=i.height;break;case"top":case"bottom":e=i.width}let o={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[r];const a=Angle.normalize(this.getAngle()||0);n.absolute&&(o+=Math.floor((a+45)/90),o%=4);const s=this.getBBox();let l;l=0===o?s.getBottomLeft():1===o?s.getCorner():2===o?s.getTopRight():s.getOrigin();const c=l.clone().rotate(-a,s.getCenter()),u=Math.sqrt(e*e+t*t)/2;let h=o*Math.PI/2;h+=Math.atan(o%2==0?t/e:e/t),h-=Angle.toRad(a);const d=Point.fromPolar(u,h,c).clone().translate(e/-2,t/-2);this.store.set("size",{width:e,height:t},n),this.setPosition(d.x,d.y,n)}else this.store.set("size",{width:e,height:t},n);return this.stopBatch("resize",n),this}scale(e,t,n,r={}){const i=this.getBBox().scale(e,t,null==n?void 0:n);return this.startBatch("scale",r),this.setPosition(i.x,i.y,r),this.resize(i.width,i.height,r),this.stopBatch("scale"),this}position(e,t,n){return"number"==typeof e?this.setPosition(e,t,n):this.getPosition(e)}getPosition(e={}){if(e.relative){const e=this.getParent();if(null!=e&&e.isNode()){const t=this.getPosition(),n=e.getPosition();return{x:t.x-n.x,y:t.y-n.y}}}const t=this.store.get("position");return t?Object.assign({},t):{x:0,y:0}}setPosition(e,t,n={}){let r,i,o;if("object"==typeof e?(r=e.x,i=e.y,o=t||{}):(r=e,i=t,o=n||{}),o.relative){const e=this.getParent();if(null!=e&&e.isNode()){const t=e.getPosition();r+=t.x,i+=t.y}}if(o.deep){const e=this.getPosition();this.translate(r-e.x,i-e.y,o)}else this.store.set("position",{x:r,y:i},o);return this}translate(e=0,t=0,n={}){if(0===e&&0===t)return this;n.translateBy=n.translateBy||this.id;const r=this.getPosition();if(null!=n.restrict&&n.translateBy===this.id){const i=this.getBBox({deep:!0}),o=n.restrict,a=r.x-i.x,s=r.y-i.y,l=Math.max(o.x+a,Math.min(o.x+o.width+a-i.width,r.x+e)),c=Math.max(o.y+s,Math.min(o.y+o.height+s-i.height,r.y+t));e=l-r.x,t=c-r.y}const i={x:r.x+e,y:r.y+t};return n.tx=e,n.ty=t,n.transition?("object"!=typeof n.transition&&(n.transition={}),this.transition("position",i,Object.assign(Object.assign({},n.transition),{interp:Interp.object})),this.eachChild((r=>{var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(e,t,n)}))):(this.startBatch("translate",n),this.store.set("position",i,n),this.eachChild((r=>{var i;(null===(i=n.exclude)||void 0===i?void 0:i.includes(r))||r.translate(e,t,n)})),this.stopBatch("translate",n)),this}angle(e,t){return null==e?this.getAngle():this.rotate(e,t)}getAngle(){return this.store.get("angle",0)}rotate(e,t={}){const n=this.getAngle();if(t.center){const r=this.getSize(),i=this.getPosition(),o=this.getBBox().getCenter();o.rotate(n-e,t.center);const a=o.x-r.width/2-i.x,s=o.y-r.height/2-i.y;this.startBatch("rotate",{angle:e,options:t}),this.setPosition(i.x+a,i.y+s,t),this.rotate(e,Object.assign(Object.assign({},t),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",t.absolute?e:(n+e)%360,t);return this}getBBox(e={}){if(e.deep){const e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),Cell.getCellsBBox(e)}return Rectangle.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(e,t){const n=this.getBBox(),r=n.getCenter(),i=e.getTerminal(t);if(null==i)return r;const o=i.port;if(!o||!this.hasPort(o))return r;const a=this.getPort(o);if(!a||!a.group)return r;const s=this.getPortsPosition(a.group)[o].position,l=Point.create(s).translate(n.getOrigin()),c=this.getAngle();return c&&l.rotate(-c,r),l}fit(e={}){const t=(this.getChildren()||[]).filter((e=>e.isNode()));if(0===t.length)return this;this.startBatch("fit-embeds",e),e.deep&&t.forEach((t=>t.fit(e)));let{x:n,y:r,width:i,height:o}=Cell.getCellsBBox(t);const a=normalizeSides(e.padding);return n-=a.left,r-=a.top,i+=a.left+a.right,o+=a.bottom+a.top,this.store.set({position:{x:n,y:r},size:{width:i,height:o}},e),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(e){this.setPortContainerMarkup(e)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Markup.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(e,t={}){return this.store.set("portContainerMarkup",Markup.clone(e),t),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(e){this.setPortMarkup(e)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Markup.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(e,t={}){return this.store.set("portMarkup",Markup.clone(e),t),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(e){this.setPortLabelMarkup(e)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Markup.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(e,t={}){return this.store.set("portLabelMarkup",Markup.clone(e),t),this}get ports(){const e=this.store.get("ports",{items:[]});return null==e.items&&(e.items=[]),e}getPorts(){return cloneDeep(this.ports.items)}getPortsByGroup(e){return this.getPorts().filter((t=>t.group===e))}getPort(e){return cloneDeep(this.ports.items.find((t=>t.id&&t.id===e)))}getPortAt(e){return this.ports.items[e]||null}hasPorts(){return this.ports.items.length>0}hasPort(e){return-1!==this.getPortIndex(e)}getPortIndex(e){const t="string"==typeof e?e:e.id;return null!=t?this.ports.items.findIndex((e=>e.id===t)):-1}getPortsPosition(e){const t=this.getSize();return this.port.getPortsLayoutByGroup(e,new Rectangle(0,0,t.width,t.height)).reduce(((e,t)=>{const n=t.portLayout;return e[t.portId]={position:Object.assign({},n.position),angle:n.angle||0},e}),{})}getPortProp(e,t){return this.getPropByPath(this.prefixPortPath(e,t))}setPortProp(e,t,n,r){if("string"==typeof t||Array.isArray(t)){const i=this.prefixPortPath(e,t),o=n;return this.setPropByPath(i,o,r)}const i=this.prefixPortPath(e),o=t;return this.setPropByPath(i,o,n)}removePortProp(e,t,n){return"string"==typeof t||Array.isArray(t)?this.removePropByPath(this.prefixPortPath(e,t),n):this.removePropByPath(this.prefixPortPath(e),t)}portProp(e,t,n,r){return null==t?this.getPortProp(e):"string"==typeof t||Array.isArray(t)?2===arguments.length?this.getPortProp(e,t):null==n?this.removePortProp(e,t,r):this.setPortProp(e,t,n,r):this.setPortProp(e,t,n)}prefixPortPath(e,t){const n=this.getPortIndex(e);if(-1===n)throw new Error(`Unable to find port with id: "${e}"`);return null==t||""===t?["ports","items",`${n}`]:Array.isArray(t)?["ports","items",`${n}`,...t]:`ports/items/${n}/${t}`}addPort(e,t){const n=[...this.ports.items];return n.push(e),this.setPropByPath("ports/items",n,t),this}addPorts(e,t){return this.setPropByPath("ports/items",[...this.ports.items,...e],t),this}insertPort(e,t,n){const r=[...this.ports.items];return r.splice(e,0,t),this.setPropByPath("ports/items",r,n),this}removePort(e,t={}){return this.removePortAt(this.getPortIndex(e),t)}removePortAt(e,t={}){if(e>=0){const n=[...this.ports.items];n.splice(e,1),t.rewrite=!0,this.setPropByPath("ports/items",n,t)}return this}removePorts(e,t){let n;if(Array.isArray(e)){if(n=t||{},e.length){n.rewrite=!0;const t=[...this.ports.items].filter((t=>!e.some((e=>{const n="string"==typeof e?e:e.id;return t.id===n}))));this.setPropByPath("ports/items",t,n)}}else n=e||{},n.rewrite=!0,this.setPropByPath("ports/items",[],n);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(e,t){return this.port.getPortsLayoutByGroup(e,t)}initPorts(){this.updatePortData(),this.on("change:ports",(()=>{this.processRemovedPort(),this.updatePortData()}))}processRemovedPort(){const e=this.ports,t={};e.items.forEach((e=>{e.id&&(t[e.id]=!0)}));const n={};(this.store.getPrevious("ports")||{items:[]}).items.forEach((e=>{e.id&&!t[e.id]&&(n[e.id]=!0)}));const r=this.model;if(r&&!isEmpty$1(n)){r.getConnectedEdges(this,{incoming:!0}).forEach((e=>{const t=e.getTargetPortId();t&&n[t]&&e.remove()}));r.getConnectedEdges(this,{outgoing:!0}).forEach((e=>{const t=e.getSourcePortId();t&&n[t]&&e.remove()}))}}validatePorts(){const e={},t=[];return this.ports.items.forEach((n=>{"object"!=typeof n&&t.push(`Invalid port ${n}.`),null==n.id&&(n.id=this.generatePortId()),e[n.id]&&t.push("Duplicitied port id."),e[n.id]=!0})),t}generatePortId(){return uuid()}updatePortData(){const e=this.validatePorts();if(e.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(e.join(" "));const t=this.port?this.port.getPorts():null;this.port=new PortManager(this.ports);const n=this.port.getPorts(),r=t?n.filter((e=>t.find((t=>t.id===e.id))?null:e)):[...n],i=t?t.filter((e=>n.find((t=>t.id===e.id))?null:e)):[];r.length>0&&this.notify("ports:added",{added:r,cell:this,node:this}),i.length>0&&this.notify("ports:removed",{removed:i,cell:this,node:this})}}Node$4.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},Node2=Node$4||(Node$4={}),Node2.toStringTag=`X6.${Node2.name}`,Node2.isNode=function(e){if(null==e)return!1;if(e instanceof Node2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Node2.toStringTag)&&"function"==typeof n.isNode&&"function"==typeof n.isEdge&&"function"==typeof n.prop&&"function"==typeof n.attr&&"function"==typeof n.size&&"function"==typeof n.position},(Node$4||(Node$4={})).config({propHooks(e){var{ports:t}=e,n=__rest$m(e,["ports"]);return t&&(n.ports=Array.isArray(t)?{items:t}:t),n}}),function(e){e.registry=Registry.create({type:"node",process(t,n){if(ShareRegistry.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if("function"==typeof n)return n.config({shape:t}),n;let r=e;const{inherit:i}=n,o=__rest$m(n,["inherit"]);if(i)if("string"==typeof i){const e=this.get(i);null==e?this.onNotFound(i,"inherited"):r=e}else r=i;null==o.constructorName&&(o.constructorName=t);const a=r.define.call(r,o);return a.config({shape:t}),a}}),ShareRegistry.setNodeRegistry(e.registry)}(Node$4||(Node$4={})),function(e){let t=0;e.define=function(n){const{constructorName:r,overwrite:i}=n,o=__rest$m(n,["constructorName","overwrite"]),a=createClass((s=r||o.shape)?pascalCase(s):(t+=1,`CustomNode${t}`),this);var s;return a.config(o),o.shape&&e.registry.register(o.shape,a,i),a},e.create=function(t){const n=t.shape||"rect",r=e.registry.get(n);return r?new r(t):e.registry.onNotFound(n)}}(Node$4||(Node$4={}));var __rest$l=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Base2;class Base$3 extends Node$4{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}Base2=Base$3||(Base$3={}),Base2.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},Base2.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},Base2.config({attrs:{text:Object.assign({},Base2.labelAttr)},propHooks(e){const{label:t}=e,n=__rest$l(e,["label"]);return t&&setByPath(n,"attrs/text/text",t),n},visible:!0});var __rest$k=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function getMarkup$1(e,t=!1){return`<g class="rotatable"><g class="scalable"><${e}/></g>${t?"":"<text/>"}</g>`}function getName(e){return`basic.${e}`}function getImageUrlHook(e="xlink:href"){return t=>{const{imageUrl:n,imageWidth:r,imageHeight:i}=t,o=__rest$k(t,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=r||null!=i){const t=()=>{if(o.attrs){const t=o.attrs.image;null!=n&&(t[e]=n),null!=r&&(t.width=r),null!=i&&(t.height=i),o.attrs.image=t}};o.attrs?(null==o.attrs.image&&(o.attrs.image={}),t()):(o.attrs={image:{}},t())}return o}}function createShape$1(e,t,n={}){const r=getName(e),i={constructorName:r,attrs:{".":{fill:"#ffffff",stroke:"none"},[e]:{fill:"#ffffff",stroke:"#000000"}}};n.ignoreMarkup||(i.markup=getMarkup$1(e,!0===n.noText));return(n.parent||Base$3).define(merge$1(i,t,{shape:r}))}createShape$1("rect",{attrs:{rect:{width:100,height:60}}}),createShape$1("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),createShape$1("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),createShape$1("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),createShape$1("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),createShape$1("image",{attrs:{text:{refY:null,refDy:16}},propHooks:getImageUrlHook()});var __rest$j=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const Path$4=createShape$1("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks(e){const{d:t}=e,n=__rest$j(e,["d"]);return null!=t&&setByPath(n,"attrs/path/d",t),n}});createShape$1("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:Path$4,ignoreMarkup:!0}),createShape$1("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:Path$4,ignoreMarkup:!0});var __rest$i=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Edge2;class Edge$4 extends Cell{constructor(e={}){super(e)}get[Symbol.toStringTag](){return Edge$4.toStringTag}preprocess(e,t){const{source:n,sourceCell:r,sourcePort:i,sourcePoint:o,target:a,targetCell:s,targetPort:l,targetPoint:c}=e,u=__rest$i(e,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),h=e=>"string"==typeof e||"number"==typeof e;if(null!=n)if(Cell.isCell(n))u.source={cell:n.id};else if(h(n))u.source={cell:n};else if(Point.isPoint(n))u.source=n.toJSON();else if(Array.isArray(n))u.source={x:n[0],y:n[1]};else{const e=n.cell;Cell.isCell(e)?u.source=Object.assign(Object.assign({},n),{cell:e.id}):u.source=n}if(null!=r||null!=i){let e=u.source;if(null!=r){const t=h(r)?r:r.id;e?e.cell=t:e=u.source={cell:t}}null!=i&&e&&(e.port=i)}else null!=o&&(u.source=Point.create(o).toJSON());if(null!=a)if(Cell.isCell(a))u.target={cell:a.id};else if(h(a))u.target={cell:a};else if(Point.isPoint(a))u.target=a.toJSON();else if(Array.isArray(a))u.target={x:a[0],y:a[1]};else{const e=a.cell;Cell.isCell(e)?u.target=Object.assign(Object.assign({},a),{cell:e.id}):u.target=a}if(null!=s||null!=l){let e=u.target;if(null!=s){const t=h(s)?s:s.id;e?e.cell=t:e=u.target={cell:t}}null!=l&&e&&(e.port=l)}else null!=c&&(u.target=Point.create(c).toJSON());return super.preprocess(u,t)}setup(){super.setup(),this.on("change:labels",(e=>this.onLabelsChanged(e))),this.on("change:vertices",(e=>this.onVertexsChanged(e)))}isEdge(){return!0}disconnect(e={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},e),this}get source(){return this.getSource()}set source(e){this.setSource(e)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(e,t,n={}){return this.setTerminal("source",e,t,n)}get target(){return this.getTarget()}set target(e){this.setTarget(e)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(e,t,n={}){return this.setTerminal("target",e,t,n)}getTerminal(e){return Object.assign({},this.store.get(e))}setTerminal(e,t,n,r={}){if(Cell.isCell(t))return this.store.set(e,merge$1({},n,{cell:t.id}),r),this;const i=t;return Point.isPoint(t)||null!=i.x&&null!=i.y?(this.store.set(e,merge$1({},n,{x:i.x,y:i.y}),r),this):(this.store.set(e,cloneDeep(t),r),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(e){const t=this[e];if(Point.isPointLike(t))return Point.create(t);const n=this.getTerminalCell(e);return n?n.getConnectionPoint(this,e):new Point}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(e){if(this.model){const t="source"===e?this.getSourceCellId():this.getTargetCellId();if(t)return this.model.getCell(t)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(e){let t=this;const n={};for(;t&&t.isEdge();){if(n[t.id])return null;n[t.id]=!0,t=t.getTerminalCell(e)}return t&&t.isNode()?t:null}get router(){return this.getRouter()}set router(e){null==e?this.removeRouter():this.setRouter(e)}getRouter(){return this.store.get("router")}setRouter(e,t,n){return"object"==typeof e?this.store.set("router",e,t):this.store.set("router",{name:e,args:t},n),this}removeRouter(e={}){return this.store.remove("router",e),this}get connector(){return this.getConnector()}set connector(e){null==e?this.removeConnector():this.setConnector(e)}getConnector(){return this.store.get("connector")}setConnector(e,t,n){return"object"==typeof e?this.store.set("connector",e,t):this.store.set("connector",{name:e,args:t},n),this}removeConnector(e={}){return this.store.remove("connector",e)}get strategy(){return this.getStrategy()}set strategy(e){null==e?this.removeStrategy():this.setStrategy(e)}getStrategy(){return this.store.get("strategy")}setStrategy(e,t,n){return"object"==typeof e?this.store.set("strategy",e,t):this.store.set("strategy",{name:e,args:t},n),this}removeStrategy(e={}){return this.store.remove("strategy",e)}getDefaultLabel(){const e=this.constructor;return cloneDeep(this.store.get("defaultLabel")||e.defaultLabel||{})}get labels(){return this.getLabels()}set labels(e){this.setLabels(e)}getLabels(){return[...this.store.get("labels",[])].map((e=>this.parseLabel(e)))}setLabels(e,t={}){return this.store.set("labels",Array.isArray(e)?e:[e],t),this}insertLabel(e,t,n={}){const r=this.getLabels(),i=r.length;let o=null!=t&&Number.isFinite(t)?t:i;return o<0&&(o=i+o+1),r.splice(o,0,this.parseLabel(e)),this.setLabels(r,n)}appendLabel(e,t={}){return this.insertLabel(e,-1,t)}getLabelAt(e){const t=this.getLabels();return null!=e&&Number.isFinite(e)?this.parseLabel(t[e]):null}setLabelAt(e,t,n={}){if(null!=e&&Number.isFinite(e)){const r=this.getLabels();r[e]=this.parseLabel(t),this.setLabels(r,n)}return this}removeLabelAt(e,t={}){const n=this.getLabels(),r=null!=e&&Number.isFinite(e)?e:-1,i=n.splice(r,1);return this.setLabels(n,t),i.length?i[0]:null}parseLabel(e){if("string"==typeof e){return this.constructor.parseStringLabel(e)}return e}onLabelsChanged({previous:e,current:t}){const n=e&&t?t.filter((t=>e.find((e=>t===e||isEqual$2(t,e)))?null:t)):t?[...t]:[],r=e&&t?e.filter((e=>t.find((t=>e===t||isEqual$2(e,t)))?null:e)):e?[...e]:[];n.length>0&&this.notify("labels:added",{added:n,cell:this,edge:this}),r.length>0&&this.notify("labels:removed",{removed:r,cell:this,edge:this})}get vertexMarkup(){return this.getVertexMarkup()}set vertexMarkup(e){this.setVertexMarkup(e)}getDefaultVertexMarkup(){return this.store.get("defaultVertexMarkup")||Markup.getEdgeVertexMarkup()}getVertexMarkup(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}setVertexMarkup(e,t={}){return this.store.set("vertexMarkup",Markup.clone(e),t),this}get vertices(){return this.getVertices()}set vertices(e){this.setVertices(e)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(e,t={}){const n=Array.isArray(e)?e:[e];return this.store.set("vertices",n.map((e=>Point.toJSON(e))),t),this}insertVertex(e,t,n={}){const r=this.getVertices(),i=r.length;let o=null!=t&&Number.isFinite(t)?t:i;return o<0&&(o=i+o+1),r.splice(o,0,Point.toJSON(e)),this.setVertices(r,n)}appendVertex(e,t={}){return this.insertVertex(e,-1,t)}getVertexAt(e){if(null!=e&&Number.isFinite(e)){return this.getVertices()[e]}return null}setVertexAt(e,t,n={}){if(null!=e&&Number.isFinite(e)){const r=this.getVertices();r[e]=t,this.setVertices(r,n)}return this}removeVertexAt(e,t={}){const n=this.getVertices(),r=null!=e&&Number.isFinite(e)?e:-1;return n.splice(r,1),this.setVertices(n,t)}onVertexsChanged({previous:e,current:t}){const n=e&&t?t.filter((t=>e.find((e=>Point.equals(t,e)))?null:t)):t?[...t]:[],r=e&&t?e.filter((e=>t.find((t=>Point.equals(e,t)))?null:e)):e?[...e]:[];n.length>0&&this.notify("vertexs:added",{added:n,cell:this,edge:this}),r.length>0&&this.notify("vertexs:removed",{removed:r,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Markup.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}get toolMarkup(){return this.getToolMarkup()}set toolMarkup(e){this.setToolMarkup(e)}getDefaultToolMarkup(){return this.store.get("defaultToolMarkup")||Markup.getEdgeToolMarkup()}getToolMarkup(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}setToolMarkup(e,t={}){return this.store.set("toolMarkup",e,t),this}get doubleToolMarkup(){return this.getDoubleToolMarkup()}set doubleToolMarkup(e){this.setDoubleToolMarkup(e)}getDefaultDoubleToolMarkup(){return this.store.get("defaultDoubleToolMarkup")}getDoubleToolMarkup(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}setDoubleToolMarkup(e,t={}){return this.store.set("doubleToolMarkup",e,t),this}get arrowheadMarkup(){return this.getArrowheadMarkup()}set arrowheadMarkup(e){this.setArrowheadMarkup(e)}getDefaultArrowheadMarkup(){return this.store.get("defaultArrowheadMarkup")||Markup.getEdgeArrowheadMarkup()}getArrowheadMarkup(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}setArrowheadMarkup(e,t={}){return this.store.set("arrowheadMarkup",e,t),this}translate(e,t,n={}){return n.translateBy=n.translateBy||this.id,n.tx=e,n.ty=t,this.applyToPoints((n=>({x:(n.x||0)+e,y:(n.y||0)+t})),n)}scale(e,t,n,r={}){return this.applyToPoints((r=>Point.create(r).scale(e,t,n).toJSON()),r)}applyToPoints(e,t={}){const n={},r=this.getSource(),i=this.getTarget();Point.isPointLike(r)&&(n.source=e(r)),Point.isPointLike(i)&&(n.target=e(i));const o=this.getVertices();return o.length>0&&(n.vertices=o.map(e)),this.store.set(n,t),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const e=[this.getSourcePoint(),...this.getVertices().map((e=>Point.create(e))),this.getTargetPoint()];return new Polyline$2(e)}updateParent(e){let t=null;const n=this.getSourceCell(),r=this.getTargetCell(),i=this.getParent();return n&&r&&(t=n===r||n.isDescendantOf(r)?r:r.isDescendantOf(n)?n:Cell.getCommonAncestor(n,r)),!i||t&&t.id===i.id||i.unembed(this,e),t&&t.embed(this,e),t}hasLoop(e={}){const t=this.getSource(),n=this.getTarget(),r=t.cell,i=n.cell;if(!r||!i)return!1;let o=r===i;if(!o&&e.deep&&this._model){const t=this.getSourceCell(),n=this.getTargetCell();t&&n&&(o=t.isAncestorOf(n,e)||n.isAncestorOf(t,e))}return o}getFragmentAncestor(){const e=[this,this.getSourceNode(),this.getTargetNode()].filter((e=>null!=e));return this.getCommonAncestor(...e)}isFragmentDescendantOf(e){const t=this.getFragmentAncestor();return!!t&&(t.id===e.id||t.isDescendantOf(e))}}Edge$4.defaults={},(Edge$4||(Edge$4={})).equalTerminals=function(e,t){const n=e,r=t;return n.cell===r.cell&&(n.port===r.port||null==n.port&&null==r.port)},Edge2=Edge$4||(Edge$4={}),Edge2.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},Edge2.parseStringLabel=function(e){return{attrs:{label:{text:e}}}},function(e){e.toStringTag=`X6.${e.name}`,e.isEdge=function(t){if(null==t)return!1;if(t instanceof e)return!0;const n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&"function"==typeof r.isNode&&"function"==typeof r.isEdge&&"function"==typeof r.prop&&"function"==typeof r.attr&&"function"==typeof r.disconnect&&"function"==typeof r.getSource&&"function"==typeof r.getTarget}}(Edge$4||(Edge$4={})),function(e){e.registry=Registry.create({type:"edge",process(t,n){if(ShareRegistry.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if("function"==typeof n)return n.config({shape:t}),n;let r=e;const{inherit:i="edge"}=n,o=__rest$i(n,["inherit"]);if("string"==typeof i){const e=this.get(i||"edge");null==e&&i?this.onNotFound(i,"inherited"):r=e}else r=i;null==o.constructorName&&(o.constructorName=t);const a=r.define.call(r,o);return a.config({shape:t}),a}}),ShareRegistry.setEdgeRegistry(e.registry)}(Edge$4||(Edge$4={})),function(e){let t=0;e.define=function(n){const{constructorName:r,overwrite:i}=n,o=__rest$i(n,["constructorName","overwrite"]),a=createClass((s=r||o.shape)?pascalCase(s):(t+=1,`CustomEdge${t}`),this);var s;return a.config(o),o.shape&&e.registry.register(o.shape,a,i),a},e.create=function(t){const n=t.shape||"edge",r=e.registry.get(n);return r?new r(t):e.registry.onNotFound(n)}}(Edge$4||(Edge$4={})),function(e){const t="basic.edge";e.config({shape:t,propHooks(t){const{label:n,vertices:r}=t,i=__rest$i(t,["label","vertices"]);if(n){null==i.labels&&(i.labels=[]);const t="string"==typeof n?e.parseStringLabel(n):n;i.labels.push(t)}return r&&Array.isArray(r)&&(i.vertices=r.map((e=>Point.create(e).toJSON()))),i}}),e.registry.register(t,e)}(Edge$4||(Edge$4={}));var __rest$h=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},EdgeView2,NodeView2;class EdgeView extends CellView{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.markerCache={}}get[Symbol.toStringTag](){return EdgeView.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const e=this.cell.getSource();return new Rectangle(e.x,e.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new Rectangle(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const e=this.cell.getTarget();return new Rectangle(e.x,e.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new Rectangle(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let n=e;if(this.hasAction(n,"source")){if(!this.updateTerminalProperties("source"))return n;n=this.removeAction(n,"source")}if(this.hasAction(n,"target")){if(!this.updateTerminalProperties("target"))return n;n=this.removeAction(n,"target")}const r=this.graph,i=this.sourceView,o=this.targetView;return r&&(i&&!r.renderer.isViewMounted(i)||o&&!r.renderer.isViewMounted(o))?n:this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","vertices","labels","tools","widget"]),n):(n=this.handleAction(n,"vertices",(()=>this.renderVertexMarkers())),n=this.handleAction(n,"update",(()=>this.update(null,t))),n=this.handleAction(n,"labels",(()=>this.onLabelsChange(t))),n=this.handleAction(n,"tools",(()=>{this.renderTools(),this.updateToolsPosition()})),n=this.handleAction(n,"widget",(()=>this.renderExternalTools())),n)}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const n=e.propertyPathArray||[],r=n.length;if(r>1){if(t[n[1]]){if(2===r)return"object"==typeof e.propertyValue&&has$1(e.propertyValue,"markup");if("markup"!==n[2])return!1}}}return!0}render(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}renderMarkup(){const e=this.cell.markup;if(e)return"string"==typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}renderStringMarkup(e){const t=this.containers,n=Vector$2.createVectors(e);n.forEach((e=>{const n=e.attr("class");n&&(t[camelCase$1(n)]=e.node)})),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),append(this.container,n.map((e=>e.node)))}renderLabels(){const e=this.cell,t=e.getLabels(),n=t.length;let r=this.containers.labels;if(this.labelCache={},this.labelSelectors={},n<=0)return r&&r.parentNode&&r.parentNode.removeChild(r),this;r?this.empty(r):(r=createSvgElement("g"),this.addClass(this.prefixClassName("edge-labels"),r),this.containers.labels=r);for(let i=0,o=t.length;i<o;i+=1){const n=t[i],o=this.normalizeLabelMarkup(this.parseLabelMarkup(n.markup));let a,s;if(o)a=o.node,s=o.selectors;else{const t=e.getDefaultLabel(),n=this.normalizeLabelMarkup(this.parseLabelMarkup(t.markup));a=n.node,s=n.selectors}a.setAttribute("data-index",`${i}`),r.appendChild(a);const l=this.rootSelector;if(s[l])throw new Error("Ambiguous label root selector.");s[l]=a,this.labelCache[i]=a,this.labelSelectors[i]=s}return null==r.parentNode&&this.container.appendChild(r),this.updateLabels(),this.customizeLabels(),this}parseLabelMarkup(e){return e?"string"==typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=Vector$2.createVectors(e),n=document.createDocumentFragment();for(let r=0,i=t.length;r<i;r+=1){const e=t[r].node;n.appendChild(e)}return{fragment:n,selectors:{}}}normalizeLabelMarkup(e){if(null==e)return;const t=e.fragment;if(!(t instanceof DocumentFragment&&t.hasChildNodes()))throw new Error("Invalid label markup.");let n;const r=t.childNodes;return n=r.length>1||"G"!==r[0].nodeName.toUpperCase()?Vector$2.create("g").append(t):Vector$2.create(r[0]),n.addClass(this.prefixClassName("edge-label")),{node:n.node,selectors:e.selectors}}updateLabels(){if(this.containers.labels){const e=this.cell,t=e.labels,n=this.can("edgeLabelMovable"),r=e.getDefaultLabel();for(let i=0,o=t.length;i<o;i+=1){const e=this.labelCache[i],o=this.labelSelectors[i];e.setAttribute("cursor",n?"move":"default");const a=t[i],s=merge$1({},r.attrs,a.attrs);this.updateAttrs(e,s,{selectors:o,rootBBox:a.size?Rectangle.fromSize(a.size):void 0})}}}mergeLabelAttrs(e,t,n){if(null===t)return null;if(void 0===t){if(null===n)return null;if(void 0===n)return;return e?n:merge$1({},n)}return e?merge$1({},n,t):void 0}customizeLabels(){if(this.containers.labels){const e=this.cell,t=e.labels;for(let n=0,r=t.length;n<r;n+=1){const r=t[n],i=this.labelCache[n],o=this.labelSelectors[n];this.graph.hook.onEdgeLabelRendered({edge:e,label:r,container:i,selectors:o})}}}renderTools(){const e=this.containers.tools;if(null==e)return this;const t=this.cell.toolMarkup,n=this.$(e).empty();if(Markup.isStringMarkup(t)){let e=template(t);const r=Vector$2.create(e());if(n.append(r.node),this.toolCache=r.node,this.options.doubleTools){let t;const i=this.cell.doubleToolMarkup;Markup.isStringMarkup(i)?(e=template(i),t=Vector$2.create(e())):t=r.clone(),n.append(t.node),this.tool2Cache=t.node}}return this}renderExternalTools(){const e=this.cell.getTools();return this.addTools(e),this}renderVertexMarkers(){const e=this.containers.vertices;if(null==e)return this;const t=this.cell.vertexMarkup,n=this.$(e).empty();if(Markup.isStringMarkup(t)){const e=template(t);this.cell.getVertices().forEach(((t,r)=>{n.append(Vector$2.create(e(Object.assign({index:r},t))).node)}))}return this}renderArrowheadMarkers(){const e=this.containers.arrowheads;if(null==e)return this;const t=this.cell.arrowheadMarkup,n=this.$(e).empty();if(Markup.isStringMarkup(t)){const e=template(t),r=Vector$2.create(e({end:"source"})).node,i=Vector$2.create(e({end:"target"})).node;this.containers.sourceArrowhead=r,this.containers.targetArrowhead=i,n.append(r,i)}return this}update(e,t={}){this.cleanCache(),this.updateConnection(t);const n=this.cell.getAttrs();return null!=n&&this.updateAttrs(this.container,n,{attrs:e===n?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}removeRedundantLinearVertices(e={}){const t=this.cell,n=t.getVertices(),r=[this.sourceAnchor,...n,this.targetAnchor],i=r.length,o=new Polyline$2(r);o.simplify({threshold:.01});const a=o.points.map((e=>e.toJSON())),s=a.length;return i===s?0:(t.setVertices(a.slice(1,s-1),e),i-s)}updateConnectionPath(){const e=this.containers;if(e.connection){const t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){const t=this.getConnectionPathData();e.connectionWrap.setAttribute("d",t)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return Point.create(this.sourceAnchor);case"target":return Point.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return Point.create(this.sourcePoint);case"target":return Point.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const e=this.sourceView;return e?this.sourceMagnet||e.container:null}case"target":{if(t.raw)return this.targetMagnet;const e=this.targetView;return e?this.targetMagnet||e.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const t=e.tx||0,n=e.ty||0;this.routePoints=new Polyline$2(this.routePoints).translate(t,n).points,this.translateConnectionPoints(t,n),this.path.translate(t,n)}else{const e=t.getVertices(),n=this.findAnchors(e);this.sourceAnchor=n.source,this.targetAnchor=n.target,this.routePoints=this.findRoutePoints(e);const r=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=r.source,this.targetPoint=r.target;const i=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,i.source||this.sourcePoint,i.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,n=t.source,r=t.target,i=e[0],o=e[e.length-1];return r.priority&&!n.priority?this.findAnchorsOrdered("target",o,"source",i):this.findAnchorsOrdered("source",i,"target",o)}findAnchorsOrdered(e,t,n,r){let i,o;const a=this.cell,s=a[e],l=a[n],c=this.getTerminalView(e),u=this.getTerminalView(n),h=this.getTerminalMagnet(e),d=this.getTerminalMagnet(n);if(c){let n;n=t?Point.create(t):u?d:Point.create(l),i=this.getAnchor(s.anchor,c,h,n,e)}else i=Point.create(s);if(u){const e=Point.create(r||i);o=this.getAnchor(l.anchor,u,d,e,n)}else o=Point.isPointLike(l)?Point.create(l):new Point;return{[e]:i,[n]:o}}getAnchor(e,t,n,r,i){const o=t.isEdgeElement(n),a=this.graph.options.connecting;let s,l="string"==typeof e?{name:e}:e;if(!l){const e=o?("source"===i?a.sourceEdgeAnchor:a.targetEdgeAnchor)||a.edgeAnchor:("source"===i?a.sourceAnchor:a.targetAnchor)||a.anchor;l="string"==typeof e?{name:e}:e}if(!l)throw new Error("Anchor should be specified.");const c=l.name;if(o){const e=EdgeAnchor.registry.get(c);if("function"!=typeof e)return EdgeAnchor.registry.onNotFound(c);s=call(e,this,t,n,r,l.args||{},i)}else{const e=NodeAnchor.registry.get(c);if("function"!=typeof e)return NodeAnchor.registry.onNotFound(c);s=call(e,this,t,n,r,l.args||{},i)}return s?s.round(this.POINT_ROUNDING):new Point}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||Router.presets.normal,n=this.cell.getRouter()||t;let r;if("function"==typeof n)r=call(n,this,e,{},this);else{const t="string"==typeof n?n:n.name,i="string"==typeof n?{}:n.args||{},o=t?Router.registry.get(t):Router.presets.normal;if("function"!=typeof o)return Router.registry.onNotFound(t);r=call(o,this,e,i,this)}return null==r?e.map((e=>Point.create(e))):r.map((e=>Point.create(e)))}findConnectionPoints(e,t,n){const r=this.cell,i=this.graph.options.connecting,o=r.getSource(),a=r.getTarget(),s=this.sourceView,l=this.targetView,c=e[0],u=e[e.length-1];let h,d;if(s&&!s.isEdgeElement(this.sourceMagnet)){const e=this.sourceMagnet||s.container,r=new Line$5(c||n,t),a=o.connectionPoint||i.sourceConnectionPoint||i.connectionPoint;h=this.getConnectionPoint(a,s,e,r,"source")}else h=t;if(l&&!l.isEdgeElement(this.targetMagnet)){const e=this.targetMagnet||l.container,r=a.connectionPoint||i.targetConnectionPoint||i.connectionPoint,o=new Line$5(u||t,n);d=this.getConnectionPoint(r,l,e,o,"target")}else d=n;return{source:h,target:d}}getConnectionPoint(e,t,n,r,i){const o=r.end;if(null==e)return o;const a="string"==typeof e?e:e.name,s="string"==typeof e?{}:e.args,l=ConnectionPoint.registry.get(a);if("function"!=typeof l)return ConnectionPoint.registry.onNotFound(a);const c=call(l,this,r,t,n,s||{},i);return c?c.round(this.POINT_ROUNDING):o}updateMarkerAttr(e){const t=this.cell.getAttrs(),n=`.${e}-marker`,r=t&&t[n];r&&this.updateAttrs(this.container,{},{attrs:{[n]:r},selectors:this.selectors})}findMarkerPoints(e,t,n){const r=e=>{const t=this.cell.getAttrs(),n=Object.keys(t);for(let r=0,i=n.length;r<i;r+=1){const i=t[n[r]];if(i[`${e}Marker`]||i[`${e}-marker`]){const e=i.strokeWidth||i["stroke-width"];if(e)return parseFloat(e);break}}return null},i=e[0],o=e[e.length-1],a=this.containers.sourceMarker,s=this.containers.targetMarker,l=this.markerCache;let c,u;if(a){if(this.updateMarkerAttr("source"),l.sourceBBox=l.sourceBBox||getBBox$2(a),l.sourceBBox.width>0){const e=scale$a(a);c=t.clone().move(i||n,l.sourceBBox.width*e.sx*-1)}}else{const e=r("source");e&&(c=t.clone().move(i||n,-e))}if(s){if(this.updateMarkerAttr("target"),l.targetBBox=l.targetBBox||getBBox$2(s),l.targetBBox.width>0){const e=scale$a(s);u=n.clone().move(o||t,l.targetBBox.width*e.sx*-1)}}else{const e=r("target");e&&(u=n.clone().move(o||t,-e))}return l.sourcePoint=c||t.clone(),l.targetPoint=u||n.clone(),{source:c,target:u}}findPath(e,t,n){const r=this.cell.getConnector()||this.graph.options.connecting.connector;let i,o,a;if("string"==typeof r?i=r:(i=r.name,o=r.args),i){const e=Connector.registry.get(i);if("function"!=typeof e)return Connector.registry.onNotFound(i);a=e}else a=Connector.presets.normal;const s=call(a,this,t,n,e,Object.assign(Object.assign({},o),{raw:!0}),this);return"string"==typeof s?Path$5.parse(s):s}translateConnectionPoints(e,t){const n=this.markerCache;n.sourcePoint&&n.sourcePoint.translate(e,t),n.targetPoint&&n.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}updateLabelPositions(){if(null==this.containers.labels)return this;if(!this.path)return this;const e=this.cell,t=e.getLabels();if(0===t.length)return this;const n=e.getDefaultLabel(),r=this.normalizeLabelPosition(n.position);for(let i=0,o=t.length;i<o;i+=1){const e=t[i],n=this.normalizeLabelPosition(e.position),o=merge$1({},r,n),a=this.getLabelTransformationMatrix(o);this.labelCache[i].setAttribute("transform",matrixToTransformString(a))}return this}updateToolsPosition(){if(null==this.containers.tools)return this;let e="",t=this.options.toolsOffset;const n=this.getConnectionLength();if(null!=n){n<this.options.shortLength&&(e="scale(.5)",t/=2);let r=this.getPointAtLength(t);if(null!=r&&attr(this.toolCache,"transform",`translate(${r.x},${r.y}) ${e}`),this.options.doubleTools&&n>=this.options.longLength){const i=this.options.doubleToolsOffset||t;r=this.getPointAtLength(n-i),null!=r&&attr(this.tool2Cache,"transform",`translate(${r.x},${r.y}) ${e}`),attr(this.tool2Cache,"visibility","visible")}else this.options.doubleTools&&attr(this.tool2Cache,"visibility","hidden")}return this}updateArrowheadMarkers(){const e=this.containers.arrowheads;if(null==e)return this;if("none"===e.style.display)return this;const t=this.containers.sourceArrowhead,n=this.containers.targetArrowhead;if(t&&n){const e=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;scale$a(t,e),scale$a(n,e),this.translateAndAutoOrientArrows(t,n)}return this}updateTerminalProperties(e){const t=this.cell,n=this.graph,r=t[e],i=r&&r.cell,o=`${e}View`;if(!i)return this[o]=null,this.updateTerminalMagnet(e),!0;const a=n.getCellById(i);if(!a)throw new Error(`Edge's ${e} node with id "${i}" not exists`);const s=a.findView(n);return!!s&&(this[o]=s,this.updateTerminalMagnet(e),!0)}updateTerminalMagnet(e){const t=`${e}Magnet`,n=this.getTerminalView(e);if(n){let r=n.getMagnetFromEdgeTerminal(this.cell[e]);r===n.container&&(r=null),this[t]=r}else this[t]=null}translateAndAutoOrientArrows(e,t){const n=this.routePoints;e&&translateAndAutoOrient(e,this.sourcePoint,n[0]||this.targetPoint,this.graph.view.stage),t&&translateAndAutoOrient(t,this.targetPoint,n[n.length-1]||this.sourcePoint,this.graph.view.stage)}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&"object"==typeof t.position)return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&"object"==typeof e.position)return e.position.options}mergeLabelPositionArgs(e,t){return null===e?null:void 0===e?null===t?null:t:merge$1({},t,e)}addLabel(e,t,n,r){let i,o,a,s=0;"number"!=typeof e?(i=e.x,o=e.y,"number"==typeof t?(s=t,a=n):a=t):(i=e,o=t,"number"==typeof n?(s=n,a=r):a=n);const l=this.getDefaultLabelPositionArgs(),c=a,u=this.mergeLabelPositionArgs(c,l),h={position:this.getLabelPosition(i,o,s,u)};return this.cell.insertLabel(h,-1,a),-1}addVertex(e,t,n){const r="number"!=typeof e,i=r?e.x:e,o=r?e.y:t,a=r?t:n,s={x:i,y:o},l=this.getVertexIndex(i,o);return this.cell.insertVertex(s,l,a),l}sendToken(e,t,n){let r,i,o,a,s="linear";"object"==typeof t?(r=t.duration,i=!0===t.reversed,o=t.selector,!1===t.rotate?a="":!0===t.rotate?a="auto":null!=t.rotate&&(a=`${t.rotate}`),t.timing&&(s=t.timing)):(r=t,i=!1,o=null),r=r||1e3;const l={dur:`${r}ms`,repeatCount:"1",calcMode:s,fill:"freeze"};if(a&&(l.rotate=a),i&&(l.keyPoints="1;0",l.keyTimes="0;1"),"object"==typeof t){const e=__rest$h(t,["duration","reversed","selector","rotate","timing"]);Object.keys(e).forEach((t=>{l[t]=e[t]}))}let c;if(c="string"==typeof o?this.findOne(o,this.container,this.selectors):this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(c instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");const u="string"==typeof e?this.findOne(e):e;if(null==u)throw new Error("Token animation requires a valid token element.");const h=u.parentNode,d=()=>{h||remove$1(u)},f=Vector$2.create(u);h||f.appendTo(this.graph.view.stage);const p=l.complete;l.complete=e=>{d(),n&&n(),p&&p(e)};const g=f.animateAlongPath(l,c);return()=>{d(),g()}}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const e=this.cache.pathCache;return has$1(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const e=this.cache.pathCache;return has$1(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const e=this.cache.pathCache;return has$1(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return null==this.path?null:(isPercentage$1(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,n,r){const i={distance:0};let o,a=0;"number"==typeof n?(a=n,o=r):o=n,null!=o&&(i.options=o);const s=o&&o.absoluteOffset,l=!(o&&o.absoluteDistance),c=o&&o.absoluteDistance&&o.reverseDistance,u=this.path,h={segmentSubdivisions:this.getConnectionSubdivisions()},d=new Point(e,t),f=u.closestPointT(d,h),p=this.getConnectionLength()||0;let g,m,v=u.lengthAtT(f,h);if(l&&(v=p>0?v/p:0),c&&(v=-1*(p-v)||1),i.distance=v,s||(g=u.tangentAtT(f)),g)m=g.pointOffset(d);else{const e=u.pointAtT(f),t=d.diff(e);m={x:t.x,y:t.y}}return i.offset=m,i.angle=a,i}normalizeLabelPosition(e){return"number"==typeof e?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),n=t.options||{},r=t.angle||0,i=t.distance,o=i>0&&i<=1;let a=0;const s={x:0,y:0},l=t.offset;l&&("number"==typeof l?a=l:(null!=l.x&&(s.x=l.x),null!=l.y&&(s.y=l.y)));const c=0!==s.x||0!==s.y||0===a,u=n.keepGradient,h=n.ensureLegibility,d=this.path,f={segmentSubdivisions:this.getConnectionSubdivisions()},p=o?i*this.getConnectionLength():i,g=d.tangentAtLength(p,f);let m,v=r;if(g){if(c)m=g.start,m.translate(s);else{const e=g.clone();e.rotate(-90,g.start),e.setLength(a),m=e.end}u&&(v=g.angle()+r,h&&(v=Angle.normalize((v+90)%180-90)))}else m=d.start,c&&m.translate(s);return createSVGMatrix().translate(m.x,m.y).rotate(v)}getLabelCoordinates(e){const t=this.getLabelTransformationMatrix(e);return new Point(t.e,t.f)}getVertexIndex(e,t){const n=this.cell.getVertices(),r=this.getClosestPointLength(new Point(e,t));let i=0;if(null!=r)for(const o=n.length;i<o;i+=1){const e=n[i],t=this.getClosestPointLength(e);if(null!=t&&r<t)break}return i}getEventArgs(e,t,n){const r=this,i=r.cell;return null==t||null==n?{e:e,view:r,edge:i,cell:i}:{e:e,x:t,y:n,view:r,edge:i,cell:i}}notifyUnhandledMouseDown(e,t,n){this.notify("edge:unhandled:mousedown",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("edge:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("edge:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("edge:mouseup",this.getEventArgs(e,t,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("edge:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("edge:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("edge:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){this.notifyMouseDown(e,t,n);switch(e.target.getAttribute("class")){case"vertex":return void this.startVertexDragging(e,t,n);case"vertex-remove":case"vertex-remove-area":return void this.handleVertexRemoving(e,t,n);case"connection":case"connection-wrap":return void this.handleVertexAdding(e,t,n);case"arrowhead":return void this.startArrowheadDragging(e,t,n);case"source-marker":case"target-marker":return void this.notifyUnhandledMouseDown(e,t,n)}this.startEdgeDragging(e,t,n)}onMouseMove(e,t,n){const r=this.getEventData(e);switch(r.action){case"drag-vertex":this.dragVertex(e,t,n);break;case"drag-label":this.dragLabel(e,t,n);break;case"drag-arrowhead":this.dragArrowhead(e,t,n);break;case"drag-edge":this.dragEdge(e,t,n)}return this.notifyMouseMove(e,t,n),r}onMouseUp(e,t,n){const r=this.getEventData(e);switch(r.action){case"drag-vertex":this.stopVertexDragging(e,t,n);break;case"drag-label":this.stopLabelDragging(e,t,n);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,n);break;case"drag-edge":this.stopEdgeDragging(e,t,n)}return this.notifyMouseUp(e,t,n),this.checkMouseleave(e),r}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,r){super.onMouseWheel(e,t,n,r),this.notify("edge:mousewheel",Object.assign({delta:r},this.getEventArgs(e,t,n)))}onCustomEvent(e,t,n,r){if(findParentByClass(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===t)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,r)))}this.notifyMouseDown(e,n,r)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,r))),super.onCustomEvent(e,t,n,r)}onLabelMouseDown(e,t,n){this.notifyMouseDown(e,t,n),this.startLabelDragging(e,t,n);this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,n){this.can("edgeMovable")?this.setEventData(e,{x:t,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,n)}dragEdge(e,t,n){const r=this.getEventData(e);r.moving||(r.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-r.x,n-r.y,{ui:!0}),this.setEventData(e,{x:t,y:n}),this.notify("edge:moving",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,n){const r=this.getEventData(e);r.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),r.moving=!1}prepareArrowheadDragging(e,t){const n=this.getTerminalMagnet(e),r={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:n,initialTerminal:clone$a(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(r),r}createValidateConnectionArgs(e){const t=[];let n;t[4]=e,t[5]=this;let r=0,i=0;"source"===e?(r=2,n="target"):(i=2,n="source");const o=this.cell[n],a=o.cell;if(a){let e;const n=t[r]=this.graph.renderer.findViewByCell(a);n&&(e=n.getMagnetFromEdgeTerminal(o),e===n.container&&(e=void 0)),t[r+1]=e}return(e,n)=>(t[i]=e,t[i+1]=e.container===n?void 0:n,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null);this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}arrowheadDragging(e,t,n,r){r.x=t,r.y=n,r.currentTarget!==e&&(r.currentMagnet&&r.currentView&&r.currentView.unhighlight(r.currentMagnet,{type:"magnetAdsorbed"}),r.currentView=this.graph.renderer.findViewByElem(e),r.currentView?(r.currentMagnet=r.currentView.findMagnet(e),r.currentMagnet&&this.graph.hook.validateConnection(...r.getValidateConnectionArgs(r.currentView,r.currentMagnet),r.currentView.getEdgeTerminal(r.currentMagnet,t,n,this.cell,r.terminalType))?r.currentView.highlight(r.currentMagnet,{type:"magnetAdsorbed"}):r.currentMagnet=null):r.currentMagnet=null),r.currentTarget=e,this.cell.prop(r.terminalType,{x:t,y:n},Object.assign(Object.assign({},r.options),{ui:!0}))}arrowheadDragged(e,t,n){const r=e.currentView,i=e.currentMagnet;if(!i||!r)return;r.unhighlight(i,{type:"magnetAdsorbed"});const o=e.terminalType,a=r.getEdgeTerminal(i,t,n,this.cell,o);this.cell.setTerminal(o,a,{ui:!0})}snapArrowhead(e,t,n){const r=this.graph,{snap:i,allowEdge:o}=r.options.connecting,a="object"==typeof i&&i.radius||50,s={x:e-a,y:t-a,width:2*a,height:2*a},l=r.renderer.findViewsInArea(s);if(o){const e=r.renderer.findEdgeViewsInArea(s).filter((e=>e!==this));l.push(...e)}const c=n.closestView||null,u=n.closestMagnet||null;let h;n.closestView=null,n.closestMagnet=null;let d=Number.MAX_SAFE_INTEGER;const f=new Point(e,t);let p;l.forEach((i=>{"false"!==i.container.getAttribute("magnet")&&(h=i.cell.getBBox().getCenter().distance(f),h<a&&h<d&&(u===i.container||r.hook.validateConnection(...n.getValidateConnectionArgs(i,null),i.getEdgeTerminal(i.container,e,t,this.cell,n.terminalType)))&&(d=h,n.closestView=i,n.closestMagnet=i.container)),i.container.querySelectorAll("[magnet]").forEach((o=>{if("false"!==o.getAttribute("magnet")){const s=i.getBBoxOfElement(o);h=f.distance(s.getCenter()),h<a&&h<d&&(u===o||r.hook.validateConnection(...n.getValidateConnectionArgs(i,o),i.getEdgeTerminal(o,e,t,this.cell,n.terminalType)))&&(d=h,n.closestView=i,n.closestMagnet=o)}}))}));const g=n.terminalType,m=n.closestView,v=n.closestMagnet,y=u!==v;if(c&&y&&c.unhighlight(u,{type:"magnetAdsorbed"}),m){if(!y)return;m.highlight(v,{type:"magnetAdsorbed"}),p=m.getEdgeTerminal(v,e,t,this.cell,g)}else p={x:e,y:t};this.cell.setTerminal(g,p,{},Object.assign(Object.assign({},n.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(n,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(n)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){if("remove"===e.fallbackAction)this.cell.remove({ui:!0});else this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}notifyConnectionEvent(e,t){const n=e.terminalType,r=e.initialTerminal,i=this.cell[n];if(i&&!Edge$4.equalTerminals(r,i)){const o=this.graph,a=r,s=a.cell?o.getCellById(a.cell):null,l=a.port,c=s?o.findViewByCell(s):null,u=s||e.isNewEdge?null:Point.create(r).toJSON(),h=i,d=h.cell?o.getCellById(h.cell):null,f=h.port,p=d?o.findViewByCell(d):null,g=d?null:Point.create(i).toJSON();this.notify("edge:connected",{e:t,previousCell:s,previousPort:l,previousView:c,previousPoint:u,currentCell:d,currentView:p,currentPort:f,currentPoint:g,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:n,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,n=t.model.getCells();e.marked={};for(let r=0,i=n.length;r<i;r+=1){const i=t.renderer.findViewByCell(n[r]);if(!i)continue;const o=Array.prototype.slice.call(i.container.querySelectorAll("[magnet]"));"false"!==i.container.getAttribute("magnet")&&o.push(i.container);const a=o.filter((n=>t.hook.validateConnection(...e.getValidateConnectionArgs(i,n),i.getEdgeTerminal(n,e.x,e.y,this.cell,e.terminalType))));if(a.length>0){for(let e=0,t=a.length;e<t;e+=1)i.highlight(a[e],{type:"magnetAvailable"});i.highlight(null,{type:"nodeAvailable"}),e.marked[i.cell.id]=a}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach((e=>{const n=this.graph.renderer.findViewByCell(e);if(n){t[e].forEach((e=>{n.unhighlight(e,{type:"magnetAvailable"})})),n.unhighlight(null,{type:"nodeAvailable"})}})),e.marked=null}startArrowheadDragging(e,t,n){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(e,t,n);const r=e.target.getAttribute("data-terminal"),i=this.prepareArrowheadDragging(r,{x:t,y:n});this.setEventData(e,i)}dragArrowhead(e,t,n){const r=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,n,r):this.arrowheadDragging(this.getEventTarget(e),t,n,r)}stopArrowheadDragging(e,t,n){const r=this.graph,i=this.getEventData(e);r.options.connecting.snap?this.snapArrowheadEnd(i):this.arrowheadDragged(i,t,n);r.hook.validateEdge(this.cell,i.terminalType,i.initialTerminal)?(this.finishEmbedding(i),this.notifyConnectionEvent(i,e)):this.fallbackConnection(i),this.afterArrowheadDragging(i)}startLabelDragging(e,t,n){if(this.can("edgeLabelMovable")){const t=e.currentTarget,n=parseInt(t.getAttribute("data-index"),10),r=this.getLabelPositionAngle(n),i=this.getLabelPositionArgs(n),o=this.getDefaultLabelPositionArgs(),a=this.mergeLabelPositionArgs(i,o);this.setEventData(e,{index:n,positionAngle:r,positionArgs:a,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,n){const r=this.getEventData(e),i=this.cell.getLabelAt(r.index),o=merge$1({},i,{position:this.getLabelPosition(t,n,r.positionAngle,r.positionArgs)});this.cell.setLabelAt(r.index,o)}stopLabelDragging(e,t,n){}handleVertexAdding(e,t,n){if(!this.can("vertexAddable"))return void this.notifyUnhandledMouseDown(e,t,n);const r=this.addVertex({x:t,y:n},{ui:!0});this.setEventData(e,{index:r,action:"drag-vertex"})}handleVertexRemoving(e,t,n){if(!this.can("vertexDeletable"))return void this.notifyUnhandledMouseDown(e,t,n);const r=e.target,i=parseInt(r.getAttribute("idx"),10);this.cell.removeVertexAt(i)}startVertexDragging(e,t,n){if(!this.can("vertexMovable"))return void this.notifyUnhandledMouseDown(e,t,n);const r=e.target,i=parseInt(r.getAttribute("idx"),10);this.setEventData(e,{index:i,action:"drag-vertex"})}dragVertex(e,t,n){const r=this.getEventData(e);this.cell.setVertexAt(r.index,{x:t,y:n},{ui:!0})}stopVertexDragging(e,t,n){}}EdgeView2=EdgeView||(EdgeView={}),EdgeView2.toStringTag=`X6.${EdgeView2.name}`,EdgeView2.isEdgeView=function(e){if(null==e)return!1;if(e instanceof EdgeView2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===EdgeView2.toStringTag)&&"function"==typeof n.isNodeView&&"function"==typeof n.isEdgeView&&"function"==typeof n.confirmUpdate&&"function"==typeof n.update&&"function"==typeof n.getConnection},EdgeView.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),EdgeView.registry.register("edge",EdgeView,!0);class NodeView extends CellView{constructor(){super(...arguments),this.scalableNode=null,this.rotatableNode=null,this.scalableSelector="scalable",this.rotatableSelector="rotatable",this.defaultPortMarkup=Markup.getPortMarkup(),this.defaultPortLabelMarkup=Markup.getPortLabelMarkup(),this.defaultPortContainerMarkup=Markup.getPortContainerMarkup(),this.portsCache={}}get[Symbol.toStringTag](){return NodeView.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const e=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?removeClass(t,e):addClass(t,e)}else{const e=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(e):this.addClass(e)}}isNodeView(){return!0}confirmUpdate(e,t={}){let n=e;return this.hasAction(n,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","resize","translate","rotate","ports","tools"])):(n=this.handleAction(n,"resize",(()=>this.resize(t)),"update"),n=this.handleAction(n,"update",(()=>this.update()),"ports"),n=this.handleAction(n,"translate",(()=>this.translate())),n=this.handleAction(n,"rotate",(()=>this.rotate())),n=this.handleAction(n,"ports",(()=>this.renderPorts())),n=this.handleAction(n,"tools",(()=>this.renderTools()))),n}update(e){this.cleanCache(),this.removePorts();const t=this.cell,n=t.getSize(),r=t.getAttrs();this.updateAttrs(this.container,r,{attrs:e===r?null:e,rootBBox:new Rectangle(0,0,n.width,n.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e)return"string"==typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container),n=e=>Array.isArray(e)?e[0]:e;this.selectors=t.selectors,this.rotatableNode=n(this.selectors[this.rotatableSelector]),this.scalableNode=n(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}renderStringMarkup(e){append(this.container,Vector$2.toNodes(Vector$2.createVectors(e))),this.rotatableNode=findOne(this.container,`.${this.rotatableSelector}`),this.scalableNode=findOne(this.container,`.${this.scalableSelector}`),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}render(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),this.renderTools(),this}resize(e={}){if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}translate(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}rotate(){if(this.rotatableNode)return this.updateRotation(),void this.update();this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}updateRotation(){if(null!=this.rotatableNode){const e=this.getRotationString();null!=e?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}updateTranslation(){this.container.setAttribute("transform",this.getTranslationString())}updateSize(e={}){const t=this.cell,n=t.getSize(),r=t.getAngle(),i=this.scalableNode;let o=!1;i.getElementsByTagName("path").length>0&&(o=!0);const a=getBBox$2(i,{recursive:o}),s=n.width/(a.width||1),l=n.height/(a.height||1);i.setAttribute("transform",`scale(${s},${l})`);const c=this.rotatableNode;if(null!=c){const o=c.getAttribute("transform");if(o){c.setAttribute("transform",`${o} rotate(${-r},${n.width/2},${n.height/2})`);const a=getBBox$2(i,{target:this.graph.view.stage});t.prop("position",{x:a.x,y:a.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}findPortElem(e,t){const n=e?this.portsCache[e]:null;if(!n)return null;const r=n.portContentElement,i=n.portContentSelectors||{};return this.findOne(t,r,i)}initializePorts(){this.cleanPortsCache()}refreshPorts(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach((e=>{remove$1(this.portsCache[e].portElement)}))}renderPorts(){const e=this.getPortsContainer(),t=[];e.childNodes.forEach((e=>{t.push(e)}));const n=groupBy$2(this.cell.getParsedPorts(),"zIndex"),r="auto";n[r]&&n[r].forEach((n=>{const r=this.getPortElement(n);e.append(r),t.push(r)})),Object.keys(n).forEach((e=>{if(e!==r){const r=parseInt(e,10);this.appendPorts(n[e],r,t)}})),this.updatePorts()}getPortsContainer(){return this.rotatableNode||this.container}appendPorts(e,t,n){const r=e.map((e=>this.getPortElement(e)));n[t]||t<0?before(n[Math.max(t,0)],r):append(this.getPortsContainer(),r)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Markup.renderMarkup(this.getPortContainerMarkup());const n=t.elem;if(null==n)throw new Error("Invalid port container markup.");t=Markup.renderMarkup(this.getPortMarkup(e));const r=t.elem,i=t.selectors;if(null==r)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},r),t=Markup.renderMarkup(this.getPortLabelMarkup(e.label));const o=t.elem,a=t.selectors;if(null==o)throw new Error("Invalid port label markup.");let s;if(i&&a){for(const e in a)if(i[e]&&e!==this.rootSelector)throw new Error("Selectors within port must be unique.");s=Object.assign(Object.assign({},i),a)}else s=i||a;let l="x6-port";return e.group&&(l+=` x6-port-${e.group}`),addClass(n,l),addClass(r,"x6-port-body"),addClass(o,"x6-port-label"),n.appendChild(r),n.appendChild(o),this.portsCache[e.id]={portElement:n,portSelectors:s,portLabelElement:o,portLabelSelectors:a,portContentElement:r,portContentSelectors:i},this.graph.hook.onPortRendered({port:e,node:this.cell,container:n,selectors:s,labelContainer:o,labelSelectors:a,contentContainer:r,contentSelectors:i}),n}updatePorts(){this.updatePortGroup();const e=this.cell.getParsedGroups();Object.keys(e).forEach((e=>this.updatePortGroup(e)))}updatePortGroup(e){const t=Rectangle.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(e,t);for(let r=0,i=n.length;r<i;r+=1){const e=n[r],t=e.portId,i=this.portsCache[t]||{},o=e.portLayout;if(this.applyPortTransform(i.portElement,o),null!=e.portAttrs){const t={selectors:i.portSelectors||{}};e.portSize&&(t.rootBBox=Rectangle.fromSize(e.portSize)),this.updateAttrs(i.portElement,e.portAttrs,t)}const a=e.labelLayout;if(a&&(this.applyPortTransform(i.portLabelElement,a,-(o.angle||0)),a.attrs)){const t={selectors:i.portLabelSelectors||{}};e.labelSize&&(t.rootBBox=Rectangle.fromSize(e.labelSize)),this.updateAttrs(i.portLabelElement,a.attrs,t)}}}applyPortTransform(e,t,n=0){const r=t.angle,i=t.position;transform$e(e,createSVGMatrix().rotate(n).translate(i.x||0,i.y||0).rotate(r||0),{absolute:!0})}getPortContainerMarkup(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}getPortMarkup(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}getEventArgs(e,t,n){const r=this,i=r.cell;return null==t||null==n?{e:e,view:r,node:i,cell:i}:{e:e,x:t,y:n,view:r,node:i,cell:i}}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("node:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("node:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("node:mouseup",this.getEventArgs(e,t,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("node:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("node:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("node:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){if(this.isPropagationStopped(e))return;const r=e.target;clickable(r)||isInputElement(r)||(this.notifyMouseDown(e,t,n),this.startNodeDragging(e,t,n))}onMouseMove(e,t,n){const r=this.getEventData(e),i=r.action;if("magnet"===i)this.dragMagnet(e,t,n);else{if("move"===i){const i=r.targetView||this;i.dragNode(e,t,n),i.notify("node:moving",{e:e,x:t,y:n,view:i,cell:i.cell,node:i.cell})}this.notifyMouseMove(e,t,n)}this.setEventData(e,r)}onMouseUp(e,t,n){const r=this.getEventData(e),i=r.action;if("magnet"===i)this.stopMagnetDragging(e,t,n);else{const o=e.target;if(clickable(o)||isInputElement(o))return;if(this.notifyMouseUp(e,t,n),"move"===i){(r.targetView||this).stopNodeDragging(e,t,n)}}const o=r.targetMagnet;o&&this.onMagnetClick(e,o,t,n),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,r){super.onMouseWheel(e,t,n,r),this.notify("node:mousewheel",Object.assign({delta:r},this.getEventArgs(e,t,n)))}onMagnetClick(e,t,n,r){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}onMagnetDblClick(e,t,n,r){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}onMagnetContextMenu(e,t,n,r){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,n,r)))}onMagnetMouseDown(e,t,n,r){this.startMagnetDragging(e,n,r)}onCustomEvent(e,t,n,r){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,n,r))),super.onCustomEvent(e,t,n,r)}prepareEmbedding(e){const t=this.getEventData(e).cell||this.cell,n=this.graph.findViewByCell(t),r=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e:e,node:t,view:n,cell:t,x:r.x,y:r.y,currentParent:t.getParent()})}processEmbedding(e,t){const n=t.cell||this.cell,r=t.graph||this.graph,i=r.options.embedding,o=i.findParent;let a="function"==typeof o?call(o,r,{view:this,node:this.cell}).filter((e=>Cell.isCell(e)&&this.cell.id!==e.id&&!e.isDescendantOf(this.cell))):r.model.getNodesUnderNode(n,{by:o});if(i.frontOnly&&a.length>0){const e=groupBy$2(a,"zIndex"),t=max$7(Object.keys(e));t&&(a=e[t])}a=a.filter((e=>e.visible));let s=null;const l=t.candidateEmbedView,c=i.validate;for(let h=a.length-1;h>=0;h-=1){const e=a[h];if(l&&l.cell.id===e.id){s=l;break}{const t=e.findView(r);if(call(c,r,{child:this.cell,parent:t.cell,childView:this,parentView:t})){s=t;break}}}this.clearEmbedding(t),s&&s.highlight(null,{type:"embedding"}),t.candidateEmbedView=s;const u=r.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e:e,cell:n,node:n,view:r.findViewByCell(n),x:u.x,y:u.y,currentParent:n.getParent(),candidateParent:s?s.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){this.graph.startBatch("embedding");const n=t.cell||this.cell,r=t.graph||this.graph,i=r.findViewByCell(n),o=n.getParent(),a=t.candidateEmbedView;if(a?(a.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,null!=o&&o.id===a.cell.id||a.cell.insertChild(n,void 0,{ui:!0})):o&&o.unembed(n,{ui:!0}),r.model.getConnectedEdges(n,{deep:!0}).forEach((e=>{e.updateParent({ui:!0})})),i&&a){const t=r.snapToGrid(e.clientX,e.clientY);i.notify("node:embedded",{e:e,cell:n,x:t.x,y:t.y,node:n,view:r.findViewByCell(n),previousParent:o,currentParent:n.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}startMagnetDragging(e,t,n){if(!this.can("magnetConnectable"))return;e.stopPropagation();const r=e.currentTarget,i=this.graph;this.setEventData(e,{targetMagnet:r}),i.hook.validateMagnet(this,r,e)?(i.options.magnetThreshold<=0&&this.startConnectting(e,r,t,n),this.setEventData(e,{action:"magnet"}),this.stopPropagation(e)):((hasClass(r,"x6-port-body")||JQuery(r).closest(".x6-port-body").length>0)&&this.stopPropagation(e),this.onMouseDown(e,t,n)),i.view.delegateDragEvents(e,this)}startConnectting(e,t,n,r){this.graph.model.startBatch("add-edge");const i=this.createEdgeFromMagnet(t,n,r);i.notifyMouseDown(e,n,r),i.setEventData(e,i.prepareArrowheadDragging("target",{x:n,y:r,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:i})}createEdgeFromMagnet(e,t,n){const r=this.graph,i=r.model,o=r.hook.getDefaultEdge(this,e);return o.setSource(Object.assign(Object.assign({},o.getSource()),this.getEdgeTerminal(e,t,n,o,"source"))),o.setTarget(Object.assign(Object.assign({},o.getTarget()),{x:t,y:n})),o.addTo(i,{async:!1,ui:!0}),o.findView(r)}dragMagnet(e,t,n){const r=this.getEventData(e),i=r.edgeView;if(i)i.onMouseMove(e,t,n),this.autoScrollGraph(e.clientX,e.clientY);else{const i=this.graph,o=i.options.magnetThreshold,a=this.getEventTarget(e),s=r.targetMagnet;if("onleave"===o){if(s===a||s.contains(a))return}else if(i.view.getMouseMovedCount(e)<=o)return;this.startConnectting(e,s,t,n)}}stopMagnetDragging(e,t,n){const r=this.eventData(e).edgeView;r&&(r.onMouseUp(e,t,n),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,n){this.notify("node:unhandled:mousedown",{e:e,x:t,y:n,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,n,r,i){let o=[i];const a=this.graph.selection.widget;if(a&&a.options.movable){const e=this.graph.getSelectedCells();e.includes(i)&&(o=e.filter((e=>e.isNode())))}o.forEach((i=>{this.notify(e,{e:t,x:n,y:r,cell:i,node:i,view:i.findView(this.graph)})}))}startNodeDragging(e,t,n){const r=this.getDelegatedView();if(null==r||!r.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,n);this.setEventData(e,{targetView:r,action:"move"});const i=Point.create(r.cell.getPosition());r.setEventData(e,{moving:!1,offset:i.diff(t,n),restrict:this.graph.hook.getRestrictArea(r)})}dragNode(e,t,n){const r=this.cell,i=this.graph,o=i.getGridSize(),a=this.getEventData(e),s=a.offset,l=a.restrict;a.moving||(a.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,n,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const c=Util$4.snapToGrid(t+s.x,o),u=Util$4.snapToGrid(n+s.y,o);r.setPosition(c,u,{restrict:l,deep:!0,ui:!0}),i.options.embedding.enabled&&(a.embedding||(this.prepareEmbedding(e),a.embedding=!0),this.processEmbedding(e,a))}stopNodeDragging(e,t,n){const r=this.getEventData(e);r.embedding&&this.finalizeEmbedding(e,r),r.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,n,this.cell)),r.moving=!1,r.embedding=!1}autoScrollGraph(e,t){const n=this.graph.scroller.widget;n&&n.autoScroll(e,t)}}NodeView2=NodeView||(NodeView={}),NodeView2.toStringTag=`X6.${NodeView2.name}`,NodeView2.isNodeView=function(e){if(null==e)return!1;if(e instanceof NodeView2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===NodeView2.toStringTag)&&"function"==typeof n.isNodeView&&"function"==typeof n.isEdgeView&&"function"==typeof n.confirmUpdate&&"function"==typeof n.update&&"function"==typeof n.findPortElem&&"function"==typeof n.resize&&"function"==typeof n.rotate&&"function"==typeof n.translate},NodeView.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),NodeView.registry.register("node",NodeView,!0);const viewName=getName("text");class Text$4 extends(createShape$1("text",{view:viewName,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0})){}!function(e){class t extends NodeView{confirmUpdate(e,t={}){let n=super.confirmUpdate(e,t);return this.hasAction(n,"scale")&&(this.resize(),n=this.removeAction(n,"scale")),n}}e.View=t,t.config({actions:{attrs:["scale"]}}),NodeView.registry.register(viewName,t)}(Text$4||(Text$4={}));class Collection extends Basecoat{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map((e=>e.toJSON()))}add(e,t,n){let r,i;"number"==typeof t?(r=t,i=Object.assign({merge:!1},n)):(r=this.length,i=Object.assign({merge:!1},t)),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);const o=Array.isArray(e)?e:[e],a=this.comparator&&"number"!=typeof t&&!1!==i.sort,s=this.comparator||null;let l=!1;const c=[],u=[];return o.forEach((e=>{const t=this.get(e);t?i.merge&&!e.isSameStore(t)&&(t.setProp(e.getProp(),n),u.push(t),a&&!l&&(l=null==s||"function"==typeof s?t.hasChanged():"string"==typeof s?t.hasChanged(s):s.some((e=>t.hasChanged(e))))):(c.push(e),this.reference(e))})),c.length&&(a&&(l=!0),this.cells.splice(r,0,...c),this.length=this.cells.length),l&&this.sort({silent:!0}),i.silent||(c.forEach(((e,t)=>{const n={cell:e,index:r+t,options:i};this.trigger("added",n),i.dryrun||e.notify("added",Object.assign({},n))})),l&&this.trigger("sorted"),(c.length||u.length)&&this.trigger("updated",{added:c,merged:u,removed:[],options:i})),this}remove(e,t={}){const n=Array.isArray(e)?e:[e],r=this.removeCells(n,t);return!t.silent&&r.length>0&&this.trigger("updated",{options:t,removed:r,added:[],merged:[]}),Array.isArray(e)?r:r[0]}removeCells(e,t){const n=[];for(let r=0;r<e.length;r+=1){const i=this.get(e[r]);if(null==i)continue;const o=this.cells.indexOf(i);this.cells.splice(o,1),this.length-=1,delete this.map[i.id],n.push(i),this.unreference(i),t.dryrun||i.remove(),t.silent||(this.trigger("removed",{cell:i,index:o,options:t}),t.dryrun||i.notify("removed",{cell:i,index:o,options:t}))}return n}reset(e,t={}){const n=this.cells.slice();if(n.forEach((e=>this.unreference(e))),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const e=this.cells.slice();this.trigger("reseted",{options:t,previous:n,current:e});const r=[],i=[];e.forEach((e=>{n.some((t=>t.id===e.id))||r.push(e)})),n.forEach((t=>{e.some((e=>e.id===t.id))||i.push(t)})),this.trigger("updated",{options:t,added:r,removed:i,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){if(null==e)return null;const t="string"==typeof e||"number"==typeof e?e:e.id;return this.map[t]||null}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return null!=this.comparator&&(this.cells=sortBy$2(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const n=t.cell;this.trigger(`cell:${e}`,t),n&&(n.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:n})))}clean(){this.length=0,this.cells=[],this.map={}}}class Model extends Basecoat{constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new Collection(e),this.setup()}get[Symbol.toStringTag](){return Model.toStringTag}notify(e,t){this.trigger(e,t);const n=this.graph;return n&&("sorted"===e||"reseted"===e||"updated"===e?n.trigger(`model:${e}`,t):n.trigger(e,t)),this}setup(){const e=this.collection;e.on("sorted",(()=>this.notify("sorted",null))),e.on("updated",(e=>this.notify("updated",e))),e.on("cell:change:zIndex",(()=>this.sortOnChangeZ())),e.on("added",(({cell:e})=>{this.onCellAdded(e)})),e.on("removed",(e=>{const t=e.cell;this.onCellRemoved(t,e.options),this.notify("cell:removed",e),t.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:t})):t.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:t}))})),e.on("reseted",(e=>{this.onReset(e.current),this.notify("reseted",e)})),e.on("edge:change:source",(({edge:e})=>this.onEdgeTerminalChanged(e,"source"))),e.on("edge:change:target",(({edge:e})=>{this.onEdgeTerminalChanged(e,"target")}))}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const n=e.id;if(e.isEdge()){delete this.edges[n];const t=e.getSource(),r=e.getTarget();if(t&&t.cell){const e=this.outgoings[t.cell],r=e?e.indexOf(n):-1;r>=0&&(e.splice(r,1),0===e.length&&delete this.outgoings[t.cell])}if(r&&r.cell){const e=this.incomings[r.cell],t=e?e.indexOf(n):-1;t>=0&&(e.splice(t,1),0===e.length&&delete this.incomings[r.cell])}}else delete this.nodes[n];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach((e=>this.onCellAdded(e)))}onEdgeTerminalChanged(e,t){const n="source"===t?this.outgoings:this.incomings,r=e.previous(t);if(r&&r.cell){const t=Cell.isCell(r.cell)?r.cell.id:r.cell,i=n[t],o=i?i.indexOf(e.id):-1;o>=0&&(i.splice(o,1),0===i.length&&delete n[t])}const i=e.getTerminal(t);if(i&&i.cell){const t=Cell.isCell(i.cell)?i.cell.id:i.cell,r=n[t]||[];-1===r.indexOf(e.id)&&r.push(e.id),n[t]=r}}prepareCell(e,t){return e.model||t&&t.dryrun||(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map((e=>this.prepareCell(e,Object.assign(Object.assign({},t),{dryrun:!0})))),this.collection.reset(e,t),e.map((e=>this.prepareCell(e,{options:t}))),this}clear(e={}){const t=this.getCells();if(0===t.length)return this;const n=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",(()=>{const e=t.sort(((e,t)=>(e.isEdge()?1:2)-(t.isEdge()?1:2)));for(;e.length>0;){const t=e.shift();t&&t.remove(n)}}),n),this}addNode(e,t={}){const n=Node$4.isNode(e)?e:this.createNode(e);return this.addCell(n,t),n}createNode(e){return Node$4.create(e)}addEdge(e,t={}){const n=Edge$4.isEdge(e)?e:this.createEdge(e);return this.addCell(n,t),n}createEdge(e){return Edge$4.create(e)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(this.collection.has(e)||this.addings.has(e)||(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild((e=>this.addCell(e,t))),this.addings.delete(e)),this)}addCells(e,t={}){const n=e.length;if(0===n)return this;const r=Object.assign(Object.assign({},t),{position:n-1,maxPosition:n-1});return this.startBatch("add",Object.assign(Object.assign({},r),{cells:e})),e.forEach((e=>{this.addCell(e,r),r.position-=1})),this.stopBatch("add",Object.assign(Object.assign({},r),{cells:e})),this}removeCell(e,t={}){const n="string"==typeof e?this.getCell(e):e;return n&&this.has(n)?this.collection.remove(n,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const n=e.clone({keepId:!0});this.addCell(n);return this.getConnectedEdges(e).forEach((n=>{const r=n.getSourceCell(),i=n.getTargetCell();r===e&&n.setSource(Object.assign(Object.assign({},n.getSource()),{cell:t})),i===e&&n.setTarget(Object.assign(Object.assign({},n.getTarget()),{cell:t}))})),this.removeCell(e),this.stopBatch("update",{id:t}),n}removeCells(e,t={}){return e.length?this.batchUpdate("remove",(()=>e.map((e=>this.removeCell(e,t))))):[]}removeConnectedEdges(e,t={}){const n=this.getConnectedEdges(e);return n.forEach((e=>{e.remove(t)})),n}disconnectConnectedEdges(e,t={}){const n="string"==typeof e?e:e.id;this.getConnectedEdges(e).forEach((e=>{const r=e.getSourceCell(),i=e.getTargetCell();r&&r.id===n&&e.setSource({x:0,y:0},t),i&&i.id===n&&e.setTarget({x:0,y:0},t)}))}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map((e=>this.getCell(e))).filter((e=>null!=e)):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const t="string"==typeof e?e:e.id,n=this.outgoings[t];return n?n.map((e=>this.getCell(e))).filter((e=>e&&e.isEdge())):null}getIncomingEdges(e){const t="string"==typeof e?e:e.id,n=this.incomings[t];return n?n.map((e=>this.getCell(e))).filter((e=>e&&e.isEdge())):null}getConnectedEdges(e,t={}){const n=[],r="string"==typeof e?this.getCell(e):e;if(null==r)return n;const i={},o=t.indirect;let a=t.incoming,s=t.outgoing;null==a&&null==s&&(a=s=!0);const l=(e,t)=>{const r=t?this.getOutgoingEdges(e):this.getIncomingEdges(e);if(null!=r&&r.forEach((e=>{i[e.id]||(n.push(e),i[e.id]=!0,o&&(a&&l(e,!1),s&&l(e,!0)))})),o&&e.isEdge()){const r=t?e.getTargetCell():e.getSourceCell();r&&r.isEdge()&&(i[r.id]||(n.push(r),l(r,t)))}};if(s&&l(r,!0),a&&l(r,!1),t.deep){const e=r.getDescendants({deep:!0}),o={};e.forEach((e=>{e.isNode()&&(o[e.id]=!0)}));const l=(e,r)=>{const a=r?this.getOutgoingEdges(e.id):this.getIncomingEdges(e.id);null!=a&&a.forEach((e=>{if(!i[e.id]){const r=e.getSourceCell(),a=e.getTargetCell();if(!t.enclosed&&r&&o[r.id]&&a&&o[a.id])return;n.push(e),i[e.id]=!0}}))};e.forEach((e=>{e.isEdge()||(s&&l(e,!0),a&&l(e,!1))}))}return n}isBoundary(e,t){const n="string"==typeof e?this.getCell(e):e,r=t?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==r||0===r.length}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach((n=>{if(this.isBoundary(n,e)){const e=this.getCell(n);e&&t.push(e)}})),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let n=t.incoming,r=t.outgoing;null==n&&null==r&&(n=r=!0);const i=this.getConnectedEdges(e,t).reduce(((i,o)=>{const a=o.hasLoop(t),s=o.getSourceCell(),l=o.getTargetCell();return n&&s&&s.isNode()&&!i[s.id]&&(!a&&(s===e||t.deep&&s.isDescendantOf(e))||(i[s.id]=s)),r&&l&&l.isNode()&&!i[l.id]&&(!a&&(l===e||t.deep&&l.isDescendantOf(e))||(i[l.id]=l)),i}),{});if(e.isEdge()){if(n){const t=e.getSourceCell();t&&t.isNode()&&!i[t.id]&&(i[t.id]=t)}if(r){const t=e.getTargetCell();t&&t.isNode()&&!i[t.id]&&(i[t.id]=t)}}return Object.keys(i).map((e=>i[e]))}isNeighbor(e,t,n={}){let r=n.incoming,i=n.outgoing;return null==r&&null==i&&(r=i=!0),this.getConnectedEdges(e,n).some((e=>{const n=e.getSourceCell(),o=e.getTargetCell();return!(!r||!n||n.id!==t.id)||!(!i||!o||o.id!==t.id)}))}getSuccessors(e,t={}){const n=[];return this.search(e,((r,i)=>{r!==e&&this.matchDistance(i,t.distance)&&n.push(r)}),Object.assign(Object.assign({},t),{outgoing:!0})),n}isSuccessor(e,t,n={}){let r=!1;return this.search(e,((i,o)=>{if(i===t&&i!==e&&this.matchDistance(o,n.distance))return r=!0,!1}),Object.assign(Object.assign({},n),{outgoing:!0})),r}getPredecessors(e,t={}){const n=[];return this.search(e,((r,i)=>{r!==e&&this.matchDistance(i,t.distance)&&n.push(r)}),Object.assign(Object.assign({},t),{incoming:!0})),n}isPredecessor(e,t,n={}){let r=!1;return this.search(e,((i,o)=>{if(i===t&&i!==e&&this.matchDistance(o,n.distance))return r=!0,!1}),Object.assign(Object.assign({},n),{incoming:!0})),r}matchDistance(e,t){return null==t||("function"==typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}getCommonAncestor(...e){const t=[];return e.forEach((e=>{e&&(Array.isArray(e)?t.push(...e):t.push(e))})),Cell.getCommonAncestor(...t)}getSubGraph(e,t={}){const n=[],r={},i=[],o=[],a=e=>{r[e.id]||(n.push(e),r[e.id]=e,e.isEdge()&&o.push(e),e.isNode()&&i.push(e))};return e.forEach((e=>{if(a(e),t.deep){e.getDescendants({deep:!0}).forEach((e=>a(e)))}})),o.forEach((e=>{const t=e.getSourceCell(),o=e.getTargetCell();t&&!r[t.id]&&(n.push(t),r[t.id]=t,t.isNode()&&i.push(t)),o&&!r[o.id]&&(n.push(o),r[o.id]=o,o.isNode()&&i.push(o))})),i.forEach((e=>{this.getConnectedEdges(e,t).forEach((e=>{const t=e.getSourceCell(),i=e.getTargetCell();!r[e.id]&&t&&r[t.id]&&i&&r[i.id]&&(n.push(e),r[e.id]=e)}))})),n}cloneSubGraph(e,t={}){const n=this.getSubGraph(e,t);return this.cloneCells(n)}cloneCells(e){return Cell.cloneCells(e)}getNodesFromPoint(e,t){const n="number"==typeof e?{x:e,y:t||0}:e;return this.getNodes().filter((e=>e.getBBox().containsPoint(n)))}getNodesInArea(e,t,n,r,i){const o="number"==typeof e?new Rectangle(e,t,n,r):Rectangle.create(e),a="number"==typeof e?i:t,s=a&&a.strict;return this.getNodes().filter((e=>{const t=e.getBBox();return s?o.containsRect(t):o.isIntersectWithRect(t)}))}getEdgesInArea(e,t,n,r,i){const o="number"==typeof e?new Rectangle(e,t,n,r):Rectangle.create(e),a="number"==typeof e?i:t,s=a&&a.strict;return this.getEdges().filter((e=>{const t=e.getBBox();return 0===t.width?t.inflate(1,0):0===t.height&&t.inflate(0,1),s?o.containsRect(t):o.isIntersectWithRect(t)}))}getNodesUnderNode(e,t={}){const n=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(n):this.getNodesFromPoint(n[t.by])).filter((t=>e.id!==t.id&&!t.isDescendantOf(e)))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return Cell.getCellsBBox(e,t)}search(e,t,n={}){n.breadthFirst?this.breadthFirstSearch(e,t,n):this.depthFirstSearch(e,t,n)}breadthFirstSearch(e,t,n={}){const r=[],i={},o={};for(r.push(e),o[e.id]=0;r.length>0;){const e=r.shift();if(null==e||i[e.id])continue;if(i[e.id]=!0,!1===call(t,this,e,o[e.id]))continue;this.getNeighbors(e,n).forEach((t=>{o[t.id]=o[e.id]+1,r.push(t)}))}}depthFirstSearch(e,t,n={}){const r=[],i={},o={};for(r.push(e),o[e.id]=0;r.length>0;){const e=r.pop();if(null==e||i[e.id])continue;if(i[e.id]=!0,!1===call(t,this,e,o[e.id]))continue;const a=this.getNeighbors(e,n),s=r.length;a.forEach((t=>{o[t.id]=o[e.id]+1,r.splice(s,0,t)}))}}getShortestPath(e,t,n={}){const r={};this.getEdges().forEach((e=>{const t=e.getSourceCellId(),i=e.getTargetCellId();t&&i&&(r[t]||(r[t]=[]),r[i]||(r[i]=[]),r[t].push(i),n.directed||r[i].push(t))}));const i="string"==typeof e?e:e.id,o=Dijkstra.run(r,i,n.weight),a=[];let s="string"==typeof t?t:t.id;for(o[s]&&a.push(s);s=o[s];)a.unshift(s);return a}translate(e,t,n){return this.getCells().filter((e=>!e.hasParent())).forEach((r=>r.translate(e,t,n))),this}resize(e,t,n){return this.resizeCells(e,t,this.getCells(),n)}resizeCells(e,t,n,r={}){const i=this.getCellsBBox(n);if(i){const o=Math.max(e/i.width,0),a=Math.max(t/i.height,0),s=i.getOrigin();n.forEach((e=>e.scale(o,a,s,r)))}return this}toJSON(e={}){return Model.toJSON(this.getCells(),e)}parseJSON(e){return Model.fromJSON(e)}fromJSON(e,t={}){const n=this.parseJSON(e);return this.resetCells(n,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,n={}){this.startBatch(e,n);const r=t();return this.stopBatch(e,n),r}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some((e=>this.batches[e]>0))}}var Model2;Model2=Model||(Model={}),Model2.toStringTag=`X6.${Model2.name}`,Model2.isModel=function(e){if(null==e)return!1;if(e instanceof Model2)return!0;const t=e[Symbol.toStringTag],n=e;return(null==t||t===Model2.toStringTag)&&"function"==typeof n.addNode&&"function"==typeof n.addEdge&&null!=n.collection},function(e){e.toJSON=function(e,t={}){return{cells:e.map((e=>e.toJSON(t)))}},e.fromJSON=function(e){const t=[];return Array.isArray(e)?t.push(...e):(e.cells&&t.push(...e.cells),e.nodes&&e.nodes.forEach((e=>{null==e.shape&&(e.shape="rect"),t.push(e)})),e.edges&&e.edges.forEach((e=>{null==e.shape&&(e.shape="edge"),t.push(e)}))),t.map((e=>{const t=e.shape;if(t){if(Node$4.registry.exist(t))return Node$4.create(e);if(Edge$4.registry.exist(t))return Edge$4.create(e)}throw new Error("The `shape` should be specified when creating a node/edge instance")}))}}(Model||(Model={}));const contentSelector=".text-block-content",registryName=getName("text-block");class TextBlock extends Node$4{get content(){return this.getContent()}set content(e){this.setContent(e)}getContent(){return this.store.get("content","")}setContent(e,t={}){this.store.set("content",e,t)}setup(){super.setup(),this.store.on("change:*",(e=>{const t=e.key;"content"===t?this.updateContent(this.getContent()):"size"===t&&this.updateSize(this.getSize())})),this.updateSize(this.getSize()),this.updateContent(this.getContent())}updateSize(e){Platform.SUPPORT_FOREIGNOBJECT&&this.setAttrs({foreignObject:Object.assign({},e),[contentSelector]:{style:Object.assign({},e)}})}updateContent(e){Platform.SUPPORT_FOREIGNOBJECT?this.setAttrs({[contentSelector]:{html:e?sanitizeHTML(e):""}}):this.setAttrs({[contentSelector]:{text:e}})}}var TextBlock2;function getMarkup(e,t="body"){return[{tagName:e,selector:t},{tagName:"text",selector:"label"}]}function createShape(e,t,n={}){const r={constructorName:e,markup:getMarkup(e,n.selector),attrs:{[e]:Object.assign({},Base$3.bodyAttr)}};return(n.parent||Base$3).define(merge$1(r,t,{shape:e}))}TextBlock2=TextBlock||(TextBlock={}),TextBlock2.config({type:registryName,view:registryName,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',Platform.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">',`<div class="${contentSelector.substr(1)}" />`,"</body>","</foreignObject>"].join(""):`<text class="${contentSelector.substr(1)}"/>`,"</g>"].join(""),attrs:{".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}},[contentSelector]:{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}}}}),Node$4.registry.register(registryName,TextBlock2),function(e){const t="content";class n extends NodeView{confirmUpdate(e,n={}){let r=super.confirmUpdate(e,n);return this.hasAction(r,t)&&(this.updateContent(),r=this.removeAction(r,t)),r}update(e){if(Platform.SUPPORT_FOREIGNOBJECT)super.update(e);else{const t=this.cell,n=Object.assign({},e||t.getAttrs());delete n[contentSelector],super.update(n),e&&!has$1(e,contentSelector)||this.updateContent(e)}}updateContent(e){if(Platform.SUPPORT_FOREIGNOBJECT)super.update(e);else{const t=this.cell,n=(e||t.getAttrs())[contentSelector],r=breakText(t.getContent(),t.getSize(),n,{svgDocument:this.graph.view.svg}),i={[contentSelector]:merge$1({},n,{text:r})};super.update(i)}}}var r;e.View=n,(r=n=e.View||(e.View={})).config({bootstrap:["render",t],actions:Platform.SUPPORT_FOREIGNOBJECT?{}:{size:t,content:t}}),NodeView.registry.register(registryName,r)}(TextBlock||(TextBlock={})),Base$3.define({shape:"empty"}),createShape("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),Node$4.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},Base$3.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},Base$3.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},Base$3.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},Base$3.labelAttr),{refY2:15})}}),createShape("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});const CYLINDER_TILT=10;Base$3.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},Base$3.bodyAttr),{lateral:CYLINDER_TILT}),top:Object.assign(Object.assign({},Base$3.bodyAttr),{refCx:"50%",refRx:"50%",cy:CYLINDER_TILT,ry:CYLINDER_TILT})},attrHooks:{lateral:{set(e,{refBBox:t}){const n=isPercentage$1(e);n&&(e=parseFloat(e)/100);const r=t.x,i=t.y,o=t.width,a=t.height,s=n?a*e:e,l=.551784,c=l*(o/2),u=l*s,h=r+o/2,d=r+o,f=i+s,p=f-s,g=i+a-s,m=i+a;return{d:["M",r,f,"L",r,g,"C",r,g+u,h-c,m,h,m,"C",h+c,m,d,g+u,d,g,"L",d,f,"C",d,f-u,h+c,p,h,p,"C",h-c,p,r,f-u,r,f,"Z"].join(" ")}}}},knob:{enabled:!0,position:({node:e})=>({x:0,y:e.attr("body/lateral")}),onMouseMove({node:e,data:t,deltaY:n}){if(0!==n){const r=e.getBBox(),i=e.attr("body/lateral");null==t.round&&(t.round=i);const o=0,a=r.height/2,s=clamp$3(t.round+n,o,a);s!==i&&e.attr({body:{lateral:s},top:{cy:s,ry:s}})}}}}),createShape("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var __rest$g=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Poly extends Base$3{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",Poly.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(e){function t(e){return"string"==typeof e?e:e.map((e=>Array.isArray(e)?e.join(","):Point.isPointLike(e)?`${e.x}, ${e.y}`:"")).join(" ")}e.pointsToString=t,e.config({propHooks(e){const{points:n}=e,r=__rest$g(e,["points"]);if(n){const e=t(n);e&&setByPath(r,"attrs/body/refPoints",e)}return r}})}(Poly||(Poly={})),createShape("polygon",{},{parent:Poly}),createShape("polyline",{},{parent:Poly});var __rest$f=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Base$3.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(e){const{path:t}=e,n=__rest$f(e,["path"]);return t&&setByPath(n,"attrs/body/refD",t),n}});var __rest$e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Base$3.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},Platform.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:ns$1.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},Base$3.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(e){const{text:t}=e,n=__rest$e(e,["text"]);return t&&setByPath(n,"attrs/label/text",t),n},attrHooks:{text:{set(e,{cell:t,view:n,refBBox:r,elem:i,attrs:o}){if(!(i instanceof HTMLElement)){const a=o.style||{},s={text:e,width:-5,height:"100%"},l=Object.assign({textVerticalAnchor:"middle"},a);return call(Attr.presets.textWrap.set,this,s,{cell:t,view:n,elem:i,refBBox:r,attrs:l}),{fill:a.color||null}}i.textContent=e},position(e,{refBBox:t,elem:n}){if(n instanceof SVGElement)return t.getCenter()}}}}),createShape("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:getImageUrlHook()},{selector:"image"}),createShape("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:getImageUrlHook()}),createShape("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:getImageUrlHook()}),createShape("image-inscribed",{propHooks:getImageUrlHook(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}});const Edge$3=Edge$4.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});Edge$4.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),Edge$4.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}});class HTML extends Base$3{get html(){return this.getHTML()}set html(e){this.setHTML(e)}getHTML(){return this.store.get("html")}setHTML(e,t={}){return null==e?this.removeHTML(t):this.store.set("html",e,t),this}removeHTML(e={}){return this.store.remove("html",e)}}var HTML2;!function(e){class t extends NodeView{init(){super.init(),this.cell.on("change:*",(()=>{this.graph.hook.shouldUpdateHTMLComponent(this.cell)&&this.renderHTMLComponent()}))}confirmUpdate(e){const n=super.confirmUpdate(e);return this.handleAction(n,t.action,(()=>this.renderHTMLComponent()))}renderHTMLComponent(){const e=this.selectors.foContent;if(e){const t=this.$(e).empty(),n=this.graph.hook.getHTMLComponent(this.cell);n&&("string"==typeof n?t.html(n):t.append(n))}}}var n;e.View=t,(n=t=e.View||(e.View={})).action="html",n.config({bootstrap:[n.action],actions:{html:n.action}}),NodeView.registry.register("html-view",n)}(HTML||(HTML={})),HTML2=HTML||(HTML={}),HTML2.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Markup.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),Node$4.registry.register("html",HTML2),(HTML||(HTML={})).componentRegistry=Registry.create({type:"html componnet"});var __decorate$r=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class AutoSave extends Disablable{constructor(e){super(),this.delay=10,this.throttle=2,this.threshold=5,this.changeCount=0,this.timestamp=0,this.options=Object.assign(Object.assign({},AutoSave.defaultOptions),e),this.graph.model.on("cell:change:*",this.onModelChanged,this)}get graph(){return this.options.graph}onModelChanged(){if(this.disabled)return;const e=((new Date).getTime()-this.timestamp)/1e3;e>this.delay||this.changeCount>=this.threshold&&e>this.throttle?(this.save(),this.reset()):this.changeCount+=1}save(){this.trigger("save")}reset(){this.changeCount=0,this.timestamp=(new Date).getTime()}dispose(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}__decorate$r([Disablable.dispose()],AutoSave.prototype,"dispose",null),(AutoSave||(AutoSave={})).defaultOptions={delay:10,throttle:2,threshold:5};class Base$2 extends Disposable{constructor(e){super(),this.graph=e,this.init()}get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}init(){}}var __decorate$q=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Decorator$1;class GraphView extends View{constructor(e){super(),this.graph=e;const{selectors:t,fragment:n}=Markup.parseJSONMarkup(GraphView.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=GraphView.snapshoot(this.container),this.$(this.container).addClass(this.prefixClassName("graph")).append(n),this.delegateEvents()}get model(){return this.graph.model}get options(){return this.graph.options}delegateEvents(){const e=this.constructor;return super.delegateEvents(e.events),this}guard(e,t){return"mousedown"===e.type&&2===e.button||(!(!this.options.guard||!this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&Cell.isCell(t.cell))&&(this.svg!==e.target&&this.container!==e.target&&!JQuery.contains(this.svg,e.target))))}findView(e){return this.graph.renderer.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onDblClick(t,r.x,r.y):this.graph.trigger("blank:dblclick",{e:t,x:r.x,y:r.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onClick(t,r.x,r.y):this.graph.trigger("blank:click",{e:t,x:r.x,y:r.y})}}isPreventDefaultContextMenu(e,t){let n=this.options.preventDefaultContextMenu;return"function"==typeof n&&(n=call(n,this.graph,{view:t})),n}onContextMenu(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.isPreventDefaultContextMenu(t,n)&&e.preventDefault(),this.guard(t,n))return;const r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onContextMenu(t,r.x,r.y):this.graph.trigger("blank:contextmenu",{e:t,x:r.x,y:r.y})}delegateDragEvents(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}});const n=this.constructor;this.delegateDocumentEvents(n.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;this.options.preventDefaultMouseDown&&t.preventDefault();const r=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onMouseDown(t,r.x,r.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(t.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:r.x,y:r.y})),this.delegateDragEvents(t,n)}onMouseMove(e){const t=this.getEventData(e),n=t.startPosition;if(n&&n.x===e.clientX&&n.y===e.clientY)return;null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1;if(t.mouseMovedCount<=this.options.moveThreshold)return;const r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY),o=t.currentView;o?o.onMouseMove(r,i.x,i.y):this.graph.trigger("blank:mousemove",{e:r,x:i.x,y:i.y}),this.setEventData(r,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY),r=this.getEventData(e).currentView;r?r.onMouseUp(t,n.x,n.y):this.graph.trigger("blank:mouseup",{e:t,x:n.x,y:n.y}),e.isPropagationStopped()||this.onClick(JQuery.Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const r=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(r===n)return;n.onMouseEnter(t)}else{if(r)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const r=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(r===n)return;n.onMouseLeave(t)}else{if(r)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const r=t.originalEvent,i=this.graph.snapToGrid(r.clientX,r.clientY),o=Math.max(-1,Math.min(1,r.wheelDelta||-r.detail));n?n.onMouseWheel(t,i.x,i.y,o):this.graph.trigger("blank:mousewheel",{e:t,delta:o,x:i.x,y:i.y})}onCustomEvent(e){const t=e.currentTarget,n=t.getAttribute("event")||t.getAttribute("data-event");if(n){const r=this.findView(t);if(r){const t=this.normalizeEvent(e);if(this.guard(t,r))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);r.onCustomEvent(t,n,i.x,i.y)}}}handleMagnetEvent(e,t){const n=e.currentTarget,r=n.getAttribute("magnet");if(r&&"false"!==r.toLowerCase()){const r=this.findView(n);if(r){const i=this.normalizeEvent(e);if(this.guard(i,r))return;const o=this.graph.snapToGrid(i.clientX,i.clientY);call(t,this.graph,r,i,n,o.x,o.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,((e,t,n,r,i)=>{e.onMagnetMouseDown(t,n,r,i)}))}onMagnetDblClick(e){this.handleMagnetEvent(e,((e,t,n,r,i)=>{e.onMagnetDblClick(t,n,r,i)}))}onMagnetContextMenu(e){const t=this.normalizeEvent(e),n=this.findView(t.target);this.isPreventDefaultContextMenu(t,n)&&t.preventDefault(),this.handleMagnetEvent(t,((e,t,n,r,i)=>{e.onMagnetContextMenu(t,n,r,i)}))}onLabelMouseDown(e){const t=e.currentTarget,n=this.findView(t);if(n){const t=this.normalizeEvent(e);if(this.guard(t,n))return;const r=this.graph.snapToGrid(t.clientX,t.clientY);n.onLabelMouseDown(t,r.x,r.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}__decorate$q([View.dispose()],GraphView.prototype,"dispose",null),function(e){const t=`${Config.prefixCls}-graph`;e.markup=[{ns:ns$1.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:ns$1.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:ns$1.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":ns$1.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}],e.snapshoot=function(e){const t=e.cloneNode();return e.childNodes.forEach((e=>t.appendChild(e))),()=>{for(empty(e);e.attributes.length>0;)e.removeAttribute(e.attributes[0].name);for(let n=0,r=t.attributes.length;n<r;n+=1){const r=t.attributes[n];e.setAttribute(r.name,r.value)}t.childNodes.forEach((t=>e.appendChild(t)))}}}(GraphView||(GraphView={})),function(e){const t=Config.prefixCls;e.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},e.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(GraphView||(GraphView={})),(Decorator$1||(Decorator$1={})).checkScroller=function(e,t){return(t,n,r)=>{const i=r.value;r.value=function(...t){if(null==this.scroller.widget){if(!1!==e)throw new Error(`Shoule enable scroller to use method '${n}'`);return this}return i.call(this,...t)}}};const content=".x6-graph {\n  position: relative;\n  outline: none;\n  touch-action: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n@keyframes halo-pie-visibility {\n  0% {\n    visibility: hidden;\n  }\n  100% {\n    visibility: visible;\n  }\n}\n@keyframes halo-pie-opening {\n  0% {\n    transform: scale(0.4) rotate(-20deg);\n  }\n  100% {\n    transform: scale(1) rotate(0);\n  }\n}\n.x6-widget-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  background-size: 20px 20px;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle.hidden {\n  display: none;\n}\n.x6-widget-handle-selected {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.x6-widget-handle-remove {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: pointer;\n}\n.x6-widget-handle-remove:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-rotate {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-rotate:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-resize {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n  cursor: se-resize;\n}\n.x6-widget-handle-resize:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-clone {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-clone:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-link {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.x6-widget-handle-link:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-fork {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-fork:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-direction {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-direction:hover {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {\n  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-se {\n  right: -25px;\n  bottom: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-nw {\n  top: -21px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-n {\n  top: -22px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-e {\n  top: -webkit-calc(40%);\n  top: calc(50% - 10px);\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-ne {\n  top: -21px;\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-w {\n  top: 50%;\n  left: -25px;\n  margin-top: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-sw {\n  bottom: -25px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-s {\n  bottom: -24px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {\n  width: 15px;\n  height: 15px;\n  font-size: 15px;\n  background-size: 15px 15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {\n  right: -19px;\n  bottom: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {\n  top: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {\n  top: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {\n  top: -webkit-calc(42%);\n  top: calc(50% - 8px);\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {\n  top: -19px;\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {\n  left: -19px;\n  margin-top: -8px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {\n  bottom: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {\n  bottom: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {\n  width: 10px;\n  height: 10px;\n  font-size: 10px;\n  background-size: 10px 10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {\n  right: -15px;\n  bottom: -13px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {\n  top: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {\n  top: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {\n  top: -webkit-calc(45%);\n  top: calc(50% - 5px);\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {\n  top: -13px;\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {\n  left: -15px;\n  margin-top: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {\n  bottom: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {\n  bottom: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-toolbar {\n  position: absolute;\n  top: -50px;\n  display: table-row;\n  padding: 7px 5px;\n}\n.x6-widget-handle-toolbar::after {\n  position: absolute;\n  top: 100%;\n  left: 10px;\n  width: 0;\n  height: 0;\n  margin-top: 4px;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  content: '';\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  position: relative;\n  display: table-cell;\n  min-width: 20px;\n  margin: 0 2px;\n  background-position: 3px 3px;\n  background-size: 16px 16px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle::after {\n  position: absolute;\n  bottom: -11px;\n  width: 100%;\n  content: '';\n}\n.x6-widget-handle-pie {\n  position: absolute;\n  top: -webkit-calc(0%);\n  top: calc(50% - 50px);\n  right: -50px;\n  z-index: 1;\n  display: none;\n  width: 100px;\n  height: 100px;\n  margin: -2px -2px 0 0;\n  border-radius: 50%;\n  cursor: default;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie .x6-widget-handle {\n  width: 1px;\n  height: auto;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie-slice-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible !important;\n}\n.x6-widget-handle-pie-slice-img,\n.x6-widget-handle-pie-slice-txt {\n  display: none;\n  pointer-events: none;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='e'] {\n  top: calc(50% - 50px);\n  right: -50px;\n  left: auto;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='w'] {\n  top: calc(50% - 50px);\n  right: auto;\n  left: -52px;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='n'] {\n  top: -50px;\n  right: auto;\n  bottom: auto;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie[data-pie-toggle-position='s'] {\n  top: auto;\n  right: auto;\n  bottom: -52px;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie-opened {\n  display: block;\n  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;\n  animation-timing-function: step-end, ease;\n  animation-delay: 0s, 0.1s;\n}\n.x6-widget-handle-pie-toggle {\n  position: absolute;\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  z-index: 2;\n  display: block;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 20px 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: visiblePainted;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle-pie-toggle-pos-e {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  bottom: auto;\n  left: auto;\n}\n.x6-widget-handle-pie-toggle-pos-w {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: auto;\n  bottom: auto;\n  left: -15px;\n}\n.x6-widget-handle-pie-toggle-pos-n {\n  top: -15px;\n  right: auto;\n  bottom: auto;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-pos-s {\n  top: auto;\n  right: auto;\n  bottom: -15px;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-opened {\n  transition: 0.1s background-image;\n}\n.x6-widget-handle-toolbar {\n  position: static;\n  display: inline-block;\n  margin-top: -50px;\n  margin-left: 45px;\n  white-space: nowrap;\n  vertical-align: top;\n  background-color: #f5f5f5;\n  border-bottom: 3px solid #333;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px #222;\n}\n.x6-widget-handle-toolbar::after {\n  top: -12px;\n  left: 55px;\n  margin-top: 0;\n  border-top: 6px solid #333;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  display: inline-block;\n  vertical-align: top;\n}\n.x6-widget-handle-toolbar .x6-widget-handle:hover::after {\n  border-bottom: 4px solid #fc6cb8;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-rotate {\n  position: absolute;\n  top: 100%;\n  right: 100%;\n  margin-top: 3px;\n  margin-right: 6px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,\n.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {\n  border-bottom: none;\n}\n.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {\n  margin-left: 4px;\n}\n.x6-widget-handle-pie {\n  box-sizing: content-box;\n  background-color: #f5f5f5;\n  border: 2px solid #404040;\n}\n.x6-widget-handle-pie-slice {\n  fill: transparent;\n  stroke: #e9e9e9;\n  stroke-width: 1;\n}\n.x6-widget-handle-pie-slice:hover {\n  fill: #fff;\n}\n.x6-widget-handle-pie-slice-img {\n  display: block;\n}\n.x6-widget-handle-selected .x6-widget-handle-pie-slice {\n  fill: #fff;\n}\n.x6-widget-handle-pie-toggle {\n  background-color: #f6f6f6;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  background-size: 16px 16px;\n  border: 2px solid #3b425f;\n}\n.x6-widget-handle-pie-toggle:hover {\n  background-color: #fff;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  border-color: #fd6eb6;\n}\n.x6-widget-handle-pie-toggle-opened {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-pie-toggle-opened:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-halo {\n  position: absolute;\n  pointer-events: none;\n}\n.x6-widget-halo-content {\n  position: absolute;\n  top: 100%;\n  padding: 6px;\n  font-size: 10px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-halo-handles + .x6-widget-halo-content {\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 25px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 20px;\n}\n.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {\n  right: 0;\n  left: 0;\n  margin-top: 10px;\n}\n.x6-widget-halo-content {\n  color: #fff;\n  background-color: #6a6b8a;\n}\n.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {\n  position: absolute;\n  right: 100%;\n  bottom: 100%;\n  margin-right: 6px;\n  margin-bottom: 3px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {\n  background-color: #fff;\n  border-radius: 50%;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar {\n  margin-top: -60px;\n  margin-left: -18px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {\n  top: -22px;\n  left: -9px;\n}\n.x6-widget-minimap {\n  position: relative;\n  display: table-cell;\n  box-sizing: border-box;\n  overflow: hidden;\n  text-align: center;\n  vertical-align: middle;\n  background-color: #fff;\n  user-select: none;\n}\n.x6-widget-minimap .x6-graph {\n  display: inline-block;\n  box-shadow: 0 0 4px 0 #eee;\n  cursor: pointer;\n}\n.x6-widget-minimap .x6-graph > svg {\n  pointer-events: none;\n  shape-rendering: optimizeSpeed;\n}\n.x6-widget-minimap .x6-graph .x6-node * {\n  /* stylelint-disable-next-line */\n  vector-effect: initial;\n}\n.x6-widget-minimap-viewport {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -2px 0 0 -2px;\n  border: 2px solid #31d0c6;\n  cursor: move;\n}\n.x6-widget-minimap-viewport-zoom {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 12px;\n  height: 12px;\n  margin: 0 -6px -6px 0;\n  background-color: #fff;\n  border: 2px solid #31d0c6;\n  border-radius: 50%;\n  cursor: nwse-resize;\n}\n.x6-graph-scroller {\n  position: relative;\n  box-sizing: border-box;\n  overflow: scroll;\n  outline: none;\n}\n.x6-graph-scroller-content {\n  position: relative;\n}\n.x6-graph-scroller-background {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-scroller .x6-graph {\n  position: absolute;\n  display: inline-block;\n  margin: 0;\n  box-shadow: none;\n}\n.x6-graph-scroller .x6-graph > svg {\n  display: block;\n}\n.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {\n  box-shadow: 0 0 4px 0 #eee;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-graph-pagebreak {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-pagebreak-vertical {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 1px;\n  border-left: 1px dashed #bdbdbd;\n}\n.x6-graph-pagebreak-horizontal {\n  position: absolute;\n  right: 0;\n  left: 0;\n  box-sizing: border-box;\n  height: 1px;\n  border-top: 1px dashed #bdbdbd;\n}\n.x6-widget-selection {\n  position: absolute;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n.x6-widget-snapline {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  stroke: #2ecc71;\n  stroke-width: 1px;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  -webkit-appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n.x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n.x6-widget-knob {\n  position: absolute;\n  box-sizing: border-box;\n  width: 16px;\n  height: 16px;\n  margin-top: -8px;\n  margin-left: -8px;\n  cursor: pointer;\n  user-select: none;\n}\n.x6-widget-knob::before,\n.x6-widget-knob::after {\n  position: absolute;\n  transform: rotate(45deg);\n  content: '';\n}\n.x6-widget-knob::before {\n  top: 4px;\n  left: 4px;\n  box-sizing: border-box;\n  width: 8px;\n  height: 8px;\n  background-color: #fff;\n}\n.x6-widget-knob::after {\n  top: 5px;\n  left: 5px;\n  box-sizing: border-box;\n  width: 6px;\n  height: 6px;\n  background-color: #fca000;\n}\n.x6-graph-print {\n  position: relative;\n}\n.x6-graph-print .x6-graph-print-ready {\n  display: none;\n}\n.x6-graph-print .x6-graph-print-preview {\n  overflow: hidden !important;\n  background: #fff !important;\n}\n@media print {\n  html,\n  html > body.x6-graph-printing {\n    position: relative !important;\n    width: 100% !important;\n    height: 100% !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n  html > body.x6-graph-printing > * {\n    display: none !important;\n  }\n  html > body.x6-graph-printing > .x6-graph-print {\n    display: block !important;\n  }\n  .x6-graph-print {\n    top: 0 !important;\n    left: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    page-break-after: always;\n    background: #fff !important;\n  }\n  .x6-graph-print .x6-graph-print-ready {\n    display: none;\n  }\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n";var __decorate$p=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class CSSManager extends Base$2{init(){CSSManager.ensure()}dispose(){CSSManager.clean()}}__decorate$p([CSSManager.dispose()],CSSManager.prototype,"dispose",null),function(e){let t,n=0;e.ensure=function(){if(n+=1,!(n>1||Platform.isApplyingHMR())){t=document.createElement("style"),t.setAttribute("type","text/css"),t.textContent=content;const e=document.querySelector("head");e&&e.insertBefore(t,e.firstChild)}},e.clean=function(){n-=1,n>0||(t&&t.parentNode&&t.parentNode.removeChild(t),t=null)}}(CSSManager||(CSSManager={}));var __rest$d=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ClassNames$1,ClassNames2;class Handle{get handleClassName(){return ClassNames$1.handle}get pie(){return Object.assign(Object.assign({},Handle.defaultPieOptions),this.handleOptions.pie)}initHandles(){if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach((e=>this.addHandle(e))),"pie"===this.handleOptions.type){if(this.pie.toggles){const e=ClassNames$1.pieToggle;this.$pieToggles={},this.pie.toggles.forEach((t=>{const n=this.$("<div/>");this.applyAttrs(n,t.attrs),n.addClass(e).addClass(`${e}-pos-${t.position||"e"}`).attr("data-name",t.name).appendTo(this.container),this.$pieToggles[t.name]=n}))}this.setPieIcons()}if(this.$handleContainer){const e=this.handleOptions.type||"surround";this.$handleContainer.addClass(ClassNames$1.wrap).addClass(ClassNames$1.animate).addClass(`${ClassNames$1.handle}-${e}`)}this.delegateEvents({[`mousedown .${ClassNames$1.handle}`]:"onHandleMouseDown",[`touchstart .${ClassNames$1.handle}`]:"onHandleMouseDown",[`mousedown .${ClassNames$1.pieToggle}`]:"onPieToggleMouseDown",[`touchstart .${ClassNames$1.pieToggle}`]:"onPieToggleMouseDown"})}onHandleMouseDown(e){const t=this.$(e.currentTarget).closest(`.${ClassNames$1.handle}`).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),"mousedown"===e.type&&2===e.button?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}onHandleMouseMove(e){const t=this.getEventData(e).action;t&&this.triggerHandleAction(t,"mousemove",e)}onHandleMouseUp(e){const t=this.getEventData(e).action;t&&(this.triggerHandleAction(t,"mouseup",e),this.undelegateDocumentEvents())}triggerHandleAction(e,t,n,r){n.preventDefault(),n.stopPropagation();const i=this.normalizeEvent(n),o=this.getEventData(i),a=this.graph.snapToGrid(i.clientX,i.clientY),s=this.graph.snapToGrid(o.clientX,o.clientY),l=a.x-s.x,c=a.y-s.y;this.trigger(`action:${e}:${t}`,Object.assign({e:i,dx:l,dy:c,x:a.x,y:a.y,offsetX:n.clientX-o.startX,offsetY:n.clientY-o.startY},r)),o.clientX=n.clientX,o.clientY=n.clientY}onPieToggleMouseDown(e){e.stopPropagation();const t=this.$(e.target).closest(`.${ClassNames$1.pieToggle}`).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}setPieIcons(){"pie"===this.handleOptions.type&&this.$handleContainer.find(`.${ClassNames$1.handle}`).each(((e,t)=>{const n=this.$(t),r=n.attr("data-action"),i=ClassNames$1.pieSlice,o=this.getHandle(r);if(!o||!o.icon){const e=window.getComputedStyle(t,":before").getPropertyValue("content");if(e&&"none"!==e){const t=n.find(`.${i}-txt`);t.length&&Vector$2.create(t[0]).text(e.replace(/['"]/g,""))}const r=n.css("background-image");if(r){const e=r.match(/url\(['"]?([^'"]+)['"]?\)/);if(e){const t=e[1],r=n.find(`.${i}-img`);r.length>0&&Vector$2.create(r[0]).attr("xlink:href",t)}}}}))}getHandleIdx(e){return this.handles.findIndex((t=>t.name===e))}hasHandle(e){return this.getHandleIdx(e)>=0}getHandle(e){return this.handles.find((t=>t.name===e))}renderHandle(e){const t=this.$("<div/>").addClass(`${ClassNames$1.handle} ${ClassNames$1.handle}-${e.name}`).attr("data-action",e.name).prop("draggable",!1);if("pie"===this.handleOptions.type){const n=this.getHandleIdx(e.name),r=this.pie,i=r.outerRadius,o=r.innerRadius,a=(i+o)/2,s=new Point(i,i),l=Angle.toRad(r.sliceAngle),c=n*l+Angle.toRad(r.startAngle),u=createSlicePathData(o,i,c,c+l),h=Vector$2.create("svg").addClass(`${ClassNames$1.pieSlice}-svg`),d=Vector$2.create("path").addClass(ClassNames$1.pieSlice).attr("d",u).translate(i,i),f=Point.fromPolar(a,-c-l/2,s).toJSON(),p=r.iconSize,g=Vector$2.create("image").attr(f).addClass(`${ClassNames$1.pieSlice}-img`);f.y=f.y+p-2;const m=Vector$2.create("text",{"font-size":p}).attr(f).addClass(`${ClassNames$1.pieSlice}-txt`);g.attr({width:p,height:p}),g.translate(-p/2,-p/2),m.translate(-p/2,-p/2),h.append([d,g,m]),t.append(h.node)}else t.addClass(`${ClassNames$1.handle}-pos-${e.position}`),e.content&&("string"==typeof e.content?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}addHandle(e){if(!this.hasHandle(e.name)){this.handles.push(e);const t=e.events;t&&Object.keys(t).forEach((n=>{const r=t[n],i=`action:${e.name}:${n}`;"string"==typeof r?this.on(i,this[r],this):this.on(i,r)})),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}addHandles(e){return e.forEach((e=>this.addHandle(e))),this}removeHandles(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}removeHandle(e){const t=this.getHandleIdx(e),n=this.handles[t];return n&&(n.events&&Object.keys(n.events).forEach((t=>{this.off(`action:${e}:${t}`)})),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this}changeHandle(e,t){const n=this.getHandle(e);return n&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},n),t))),this}toggleHandle(e,t){const n=this.getHandle(e);if(n){const r=this.getHandleElem(e),i=`${ClassNames$1.handle}-selected`;void 0===t&&(t=!r.hasClass(i)),r.toggleClass(i,t);const o=t?n.iconSelected:n.icon;o&&this.updateHandleIcon(r,o)}return this}selectHandle(e){return this.toggleHandle(e,!0)}deselectHandle(e){return this.toggleHandle(e,!1)}deselectAllHandles(){return this.handles.forEach((e=>this.deselectHandle(e.name))),this}getHandleElem(e){return this.$handleContainer.find(`.${ClassNames$1.handle}-${e}`)}updateHandleIcon(e,t){if("pie"===this.handleOptions.type){const n=e.find(`.${ClassNames$1.pieSliceImg}`);this.$(n[0]).attr("xlink:href",t||"")}else e.css("background-image",t?`url(${t})`:"")}isRendered(){return null!=this.$handleContainer}isOpen(e){return!!this.isRendered()&&(e?this.$pieToggles[e].hasClass(ClassNames$1.pieToggleOpened):this.$handleContainer.hasClass(`${ClassNames$1.pieOpended}`))}toggleState(e){if(this.isRendered()){const t=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach((e=>{this.$pieToggles[e].removeClass(ClassNames$1.pieToggleOpened)})),this.isOpen())this.trigger("pie:close",{name:e}),t.removeClass(ClassNames$1.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){const n=this.pie.toggles,r=n&&n.find((t=>t.name===e));r&&t.attr({"data-pie-toggle-name":r.name,"data-pie-toggle-position":r.position}),this.$pieToggles[e].addClass(ClassNames$1.pieToggleOpened)}t.addClass(ClassNames$1.pieOpended)}}}applyAttrs(e,t){if(t){const n=View.$(e);Object.keys(t).forEach((e=>{const r=n.find(e).addBack().filter(e),i=t[e],{class:o}=i,a=__rest$d(i,["class"]);o&&r.addClass(o),r.attr(a)}))}}}(Handle||(Handle={})).defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]},ClassNames2=ClassNames$1||(ClassNames$1={}),ClassNames2.handle=View.prototype.prefixClassName("widget-handle"),ClassNames2.wrap=`${ClassNames2.handle}-wrap`,ClassNames2.animate=`${ClassNames2.handle}-animate`,ClassNames2.pieOpended=`${ClassNames2.handle}-pie-opened`,ClassNames2.pieToggle=`${ClassNames2.handle}-pie-toggle`,ClassNames2.pieToggleOpened=`${ClassNames2.handle}-pie-toggle-opened`,ClassNames2.pieSlice=`${ClassNames2.handle}-pie-slice`,ClassNames2.pieSliceImg=`${ClassNames2.handle}-pie-slice-img`;var __decorate$o=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$c=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Private$4,Private2;class Widget extends View{constructor(e){super();const t=e,{view:n,cell:r,node:i,edge:o,graph:a}=t,s=__rest$c(t,["view","cell","node","edge","graph"]);n?(this.view=n,this.cell=n.cell,this.graph=n.graph,this.model=this.graph.model):(r||o||i)&&a&&(this.cell=i||o||r,this.view=a.renderer.findViewByCell(this.cell),this.graph=a,this.model=this.graph.model);const l=this.constructor;!1!==e.clearAll&&l.removeInstances(this.graph),l.register(this),this.init(s)}static ensureCache(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}static register(e,t){null==t&&(t=e.graph);const n=this.ensureCache();let r=n[t.view.cid];null==r&&(r=n[t.view.cid]={}),r[e.cid]=e}static unregister(e,t){null==t&&(t=e.graph);const n=this.ensureCache();n[t.view.cid]&&delete n[t.view.cid][e.cid]}static removeInstances(e){const t=this.ensureCache()[e.view.cid];t&&Object.keys(t).forEach((e=>{const n=t[e];n&&n.remove()}))}static getInstances(e){return this.ensureCache()[e.view.cid]||{}}init(e){}render(){return this}startListening(){!1!==this.options.clearOnBlankMouseDown&&this.graph.on("blank:mousedown",this.remove,this)}stopListening(){!1!==this.options.clearOnBlankMouseDown&&this.graph.off("blank:mousedown",this.remove,this)}remove(){this.stopListening();return this.constructor.unregister(this),super.remove()}dispose(){this.remove()}}Widget.instanceCache=new WeakMap,__decorate$o([View.dispose()],Widget.prototype,"dispose",null);class Knob extends Widget{get node(){return this.cell}get metadata(){const e=this.cell.prop("knob");return Array.isArray(e)?null!=this.options.index?e[this.options.index]:null:e}init(e){this.options=Object.assign({},e),this.render(),this.startListening()}startListening(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}render(){return this.container=document.createElement("div"),addClass(this.container,this.prefixClassName("widget-knob")),this.options.className&&addClass(this.container,this.options.className),this.view.addClass(Private$4.KNOB),this.graph.container.appendChild(this.container),this.update(),this}remove(){return this.view.removeClass(Private$4.KNOB),super.remove()}update(){if(this.metadata){const{update:e,position:t}=this.metadata,n={knob:this,cell:this.cell,node:this.node};if(t){const e=t.call(this.graph,Object.assign({},n));if(e){const t=this.graph.matrix(),n=this.node.getBBox(),r=Angle.normalize(this.node.getAngle()),i=Point.create(e);0!==r&&i.rotate(-r,{x:n.width/2,y:n.height/2}),i.translate(n).scale(t.a,t.d).translate(t.e,t.f),this.container.style.left=`${i.x}px`,this.container.style.top=`${i.y}px`}}e&&e.call(this.graph,Object.assign({},n))}}hide(){this.container.style.display="none"}show(){this.container.style.display=""}onTransform(){this.hide()}onTransformed(){this.show()}onKnobMouseDown({knob:e}){this.cid!==e.cid&&this.hide()}onKnobMouseUp(){this.show()}notify(e,t){if(this.view){const n=this.view.normalizeEvent(t),r=this.graph.snapToGrid(n.clientX,n.clientY);this.view.notify(`cell:${e}`,{e:n,view:this.view,node:this.node,cell:this.cell,x:r.x,y:r.y,knob:this}),this.cell.isNode()?this.view.notify(`node:${e}`,{e:n,view:this.view,node:this.node,cell:this.cell,x:r.x,y:r.y,knob:this}):this.cell.isEdge()&&this.view.notify(`edge:${e}`,{e:n,view:this.view,edge:this.cell,cell:this.cell,x:r.x,y:r.y,knob:this})}}onMouseDown(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Private$4.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e:e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}onMouseMove(e){const t=this.getEventData(e),n=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,n&&(n.addClass(Private$4.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){const n=this.graph.matrix(),r=(e.clientX-t.originX)/n.a,i=(e.clientY-t.originY)/n.d,o=this.node.getAngle(),a=new Point(r,i).rotate(o);this.metadata.onMouseMove.call(this.graph,{e:e,data:t,deltaX:a.x,deltaY:a.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}onMouseUp(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.getEventData(e),n=this.graph.findViewByCell(this.node);t.knobbing&&(n&&n.removeClass(Private$4.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e:e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}Private2=Private$4||(Private$4={}),Private2.KNOB="has-widget-knob",Private2.KNOBBING="node-knobbing",Private2.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"};var __decorate$n=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ClassName,ClassName2,Util$3;ClassName2=ClassName||(ClassName={}),ClassName2.root="widget-minimap",ClassName2.viewport=`${ClassName2.root}-viewport`,ClassName2.zoom=`${ClassName2.viewport}-zoom`;class MiniMap$1 extends View{constructor(e){super(),this.options=Object.assign(Object.assign({},Util$3.defaultOptions),e),this.updateViewport=debounce$2(this.updateViewport.bind(this),0),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(ClassName.root));const t=document.createElement("div");this.container.appendChild(t),this.$viewport=this.$("<div>").addClass(this.prefixClassName(ClassName.viewport)),this.options.scalable&&(this.zoomHandle=this.$("<div>").addClass(this.prefixClassName(ClassName.zoom)).appendTo(this.$viewport).get(0)),this.$container.append(this.$viewport).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const n=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,frozen:!0,async:this.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(n):new Graph$5(n),this.targetGraph.renderer.unfreeze(),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}get graph(){return this.options.graph}get scroller(){return this.graph.scroller.widget}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}get $graphContainer(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}startListening(){this.scroller?this.$graphContainer.on(`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let n,r;"object"==typeof e?(n=e.width,r=e.height):(n=e,r=t);const i=this.sourceGraph.options,o=this.sourceGraph.transform.getScale(),a=this.options.width-2*this.options.padding,s=this.options.height-2*this.options.padding;n/=o.sx,r/=o.sy,this.ratio=Math.min(a/n,s/r);const l=this.ratio,c=i.x*l/o.sx,u=i.y*l/o.sy;return n*=l,r*=l,this.targetGraph.resizeGraph(n,r),this.targetGraph.translate(c,u),this.scroller?this.targetGraph.scale(l,l):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let n=null;n=this.scroller?this.scroller.clientToLocalPoint(0,0):this.graph.graphToLocal(0,0);const r=this.$(this.targetGraph.container).position(),i=this.targetGraph.translate();i.ty=i.ty||0,this.geometry={top:r.top+n.y*t.sy+i.ty,left:r.left+n.x*t.sx+i.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}startAction(e){const t=this.normalizeEvent(e),n=t.target===this.zoomHandle?"zooming":"panning",{tx:r,ty:i}=this.sourceGraph.translate(),o={action:n,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:r,translateY:i};this.targetGraphTransforming=!0,this.delegateDocumentEvents(Util$3.documentEvents,o)}doAction(e){const t=this.normalizeEvent(e),n=t.clientX,r=t.clientY,i=t.data;switch(i.action){case"panning":{const e=this.sourceGraph.transform.getScale(),t=(n-i.clientX)*e.sx,o=(r-i.clientY)*e.sy;this.scroller?(this.graphContainer.scrollLeft=i.scrollLeft+t/this.ratio,this.graphContainer.scrollTop=i.scrollTop+o/this.ratio):this.sourceGraph.translate(i.translateX-t/this.ratio,i.translateY-o/this.ratio);break}case"zooming":{const e=i.scale,t=i.geometry,r=1+(i.clientX-n)/t.width/e.sx;i.frameId&&cancelAnimationFrame(i.frameId),i.frameId=requestAnimationFrame((()=>{this.sourceGraph.zoom(r*i.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})}));break}}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let n,r;const i=this.targetGraph.translate();if(i.ty=i.ty||0,null==t.offsetX){const e=this.$(this.targetGraph.container).offset();n=t.pageX-e.left,r=t.pageY-e.top}else n=t.offsetX,r=t.offsetY;const o=(n-i.tx)/this.ratio,a=(r-i.ty)/this.ratio;this.sourceGraph.centerPoint(o,a)}dispose(){this.remove()}}__decorate$n([View.dispose()],MiniMap$1.prototype,"dispose",null),function(e){e.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new Graph$5(e)},e.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}}(Util$3||(Util$3={}));var __decorate$m=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$b=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class Snapline extends View{constructor(e){super();const{graph:t}=e,n=__rest$b(e,["graph"]);this.graph=t,this.options=Object.assign({tolerance:10},n),this.offset={x:0,y:0},this.render(),this.parseFilter(),this.disabled||this.startListening()}get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}get disabled(){return!0!==this.options.enabled||!0!==this.graph.options.snapline.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e,this.parseFilter()}render(){const e=this.containerWrapper=new Vector$2("svg"),t=this.horizontal=new Vector$2("line"),n=this.vertical=new Vector$2("line");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),n.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),n.setAttribute("display","none"),e.append([t,n]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}parseFilter(){this.filterShapes={},this.filterCells={},this.filterFunction=null;const e=this.options.filter;Array.isArray(e)?e.forEach((e=>{"string"==typeof e?this.filterShapes[e]=!0:this.filterCells[e.id]=!0})):"function"==typeof e&&(this.filterFunction=e)}onBatchStop({name:e,data:t}){"resize"===e&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:n}){const r=e.getDelegatedView();if(r&&this.isNodeMovable(r)){const r=e.cell.getPosition();this.offset={x:t-r.x,y:n-r.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const n=this.graph.renderer.findViewByCell(e);if(n&&n.cell.isNode()){const r=e.getBBox(),i=r.bbox(e.getAngle()),o=i.getTopLeft(),a=i.getBottomRight(),s=Angle.normalize(e.getAngle()),l=this.options.tolerance||0;let c,u,h,d,f,p;const g={vertical:0,horizontal:0},m=t.direction,v=t.trueDirection,y=t.relativeDirection;-1!==v.indexOf("right")?g.vertical=a.x:g.vertical=o.x,-1!==v.indexOf("bottom")?g.horizontal=a.y:g.horizontal=o.y,this.model.getNodes().some((t=>{if(this.isIgnored(e,t))return!1;const n=t.getBBox().bbox(t.getAngle()),r=n.getTopLeft(),o=n.getBottomRight(),s={vertical:[r.x,o.x],horizontal:[r.y,o.y]},m={};return Object.keys(s).forEach((e=>{const t=e,n=s[t].map((e=>({position:e,distance:Math.abs(e-g[t])}))).filter((e=>e.distance<=l));m[t]=sortBy$2(n,(e=>e.distance))})),null==c&&m.vertical.length>0&&(c=m.vertical[0].position,u=Math.min(i.y,n.y),h=Math.max(a.y,o.y)-u),null==d&&m.horizontal.length>0&&(d=m.horizontal[0].position,f=Math.min(i.x,n.x),p=Math.max(a.x,o.x)-f),null!=c&&null!=d})),this.hide();let b=0,x=0;null==d&&null==c||(null!=c&&(b=-1!==v.indexOf("right")?c-a.x:o.x-c),null!=d&&(x=-1!==v.indexOf("bottom")?d-a.y:o.y-d));let w=0,_=0;if(s%90==0)90===s||270===s?(w=x,_=b):(w=b,_=x);else{const e=s>=0&&s<90?1:s>=90&&s<180?4:s>=180&&s<270?3:2;null!=d&&null!=c&&(b<x?(x=0,d=void 0):(b=0,c=void 0));const t=Angle.toRad(s%90);b&&(w=3===e?b/Math.cos(t):b/Math.sin(t)),x&&(_=3===e?x/Math.cos(t):x/Math.sin(t));const n=1===e||3===e;switch(y){case"top":case"bottom":_=x?x/(n?Math.cos(t):Math.sin(t)):b/(n?Math.sin(t):Math.cos(t));break;case"left":case"right":w=b?b/(n?Math.cos(t):Math.sin(t)):x/(n?Math.sin(t):Math.cos(t))}}switch(y){case"top":case"bottom":w=0;break;case"left":case"right":_=0}const C=this.graph.getGridSize();let $=Math.max(r.width+w,C),S=Math.max(r.height+_,C);t.minWidth&&t.minWidth>C&&($=Math.max($,t.minWidth)),t.minHeight&&t.minHeight>C&&(S=Math.max(S,t.minHeight)),t.maxWidth&&($=Math.min($,t.maxWidth)),t.maxHeight&&(S=Math.min(S,t.maxHeight)),t.preserveAspectRatio&&(_<w?S=$*(r.height/r.width):$=S*(r.width/r.height)),$===r.width&&S===r.height||(e.resize($,S,{direction:m,relativeDirection:y,trueDirection:v,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(n)}),h&&(h+=S-r.height),p&&(p+=$-r.width));const E=e.getBBox().bbox(s);c&&Math.abs(E.x-c)>1&&Math.abs(E.width+E.x-c)>1&&(c=void 0),d&&Math.abs(E.y-d)>1&&Math.abs(E.height+E.y-d)>1&&(d=void 0),this.update({verticalLeft:c,verticalTop:u,verticalHeight:h,horizontalTop:d,horizontalLeft:f,horizontalWidth:p})}}}snapOnMoving({view:e,e:t,x:n,y:r}){const i=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(i))return;const o=i.cell,a=o.getSize(),s=o.getPosition(),l=new Rectangle(n-this.offset.x,r-this.offset.y,a.width,a.height),c=o.getAngle(),u=l.getCenter(),h=l.bbox(c),d=h.getTopLeft(),f=h.getBottomRight(),p=this.options.tolerance||0;let g,m,v,y,b,x,w=0,_=0;if(this.model.getNodes().some((e=>{if(this.isIgnored(o,e))return!1;const t=e.getBBox().bbox(e.getAngle()),n=t.getCenter(),r=t.getTopLeft(),i=t.getBottomRight();return null==g&&(Math.abs(n.x-u.x)<p?(g=n.x,w=.5):Math.abs(r.x-d.x)<p?(g=r.x,w=0):Math.abs(r.x-f.x)<p?(g=r.x,w=1):Math.abs(i.x-f.x)<p?(g=i.x,w=1):Math.abs(i.x-d.x)<p&&(g=i.x),null!=g&&(m=Math.min(h.y,t.y),v=Math.max(f.y,i.y)-m)),null==y&&(Math.abs(n.y-u.y)<p?(y=n.y,_=.5):Math.abs(r.y-d.y)<p?y=r.y:Math.abs(r.y-f.y)<p?(y=r.y,_=1):Math.abs(i.y-f.y)<p?(y=i.y,_=1):Math.abs(i.y-d.y)<p&&(y=i.y),null!=y&&(b=Math.min(h.x,t.x),x=Math.max(f.x,i.x)-b)),null!=g&&null!=y})),this.hide(),null!=y||null!=g){null!=y&&(h.y=y-_*h.height),null!=g&&(h.x=g-w*h.width);const e=h.getCenter(),t=e.x-l.width/2,n=e.y-l.height/2,r=t-s.x,a=n-s.y;0===r&&0===a||(o.translate(r,a,{snapped:!0,restrict:this.graph.hook.getRestrictArea(i)}),x&&(x+=r),v&&(v+=a)),this.update({verticalLeft:g,verticalTop:m,verticalHeight:v,horizontalTop:y,horizontalLeft:b,horizontalWidth:x})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&call(this.filterFunction,this.graph,t)}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new Point(e.horizontalLeft,e.horizontalTop)),n=this.graph.localToGraph(new Point(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({x1:this.options.sharp?`${t.x}`:"0",y1:`${t.y}`,x2:this.options.sharp?`${n.x}`:"100%",y2:`${n.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new Point(e.verticalLeft,e.verticalTop)),n=this.graph.localToGraph(new Point(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({x1:`${t.x}`,y1:this.options.sharp?`${t.y}`:"0",x2:`${n.x}`,y2:this.options.sharp?`${n.y}`:"100%",display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t="number"==typeof e?e:!1!==e?3e3:0;return t>0&&(this.timer=window.setTimeout((()=>{null!==this.container.parentNode&&this.unmount()}),t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}__decorate$m([View.dispose()],Snapline.prototype,"dispose",null);var __decorate$l=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Renderer2;class Renderer extends Base$2{init(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}startListening(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}resetUpdates(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}onSortModel(){this.model.hasActiveBatch(Renderer.SORT_DELAYING_BATCHES)||this.sortViews()}onModelReseted({options:e}){this.removeZPivots(),this.resetViews(this.model.getCells(),e)}onBatchStop({name:e,data:t}){if(this.isFrozen())return;const n=this.model;if(!this.isAsync()){const r=Renderer.UPDATE_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.updateViews(t)}const r=Renderer.SORT_DELAYING_BATCHES;r.includes(e)&&!n.hasActiveBatch(r)&&this.sortViews()}onCellAdded({cell:e,options:t}){const n=t.position;this.isAsync()||"number"!=typeof n?this.renderView(e,t):(t.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,t),0===n&&this.unfreeze({key:"addCells"}))}onCellRemoved({cell:e,options:t}){const n=this.findViewByCell(e);n&&this.requestViewUpdate(n,Renderer.FLAG_REMOVE,n.priority,t)}onCellZIndexChanged({cell:e,options:t}){if("approx"===this.options.sorting){const n=this.findViewByCell(e);n&&this.requestViewUpdate(n,Renderer.FLAG_INSERT,n.priority,t)}}onCellVisibleChanged({cell:e,current:t,options:n}){t||this.processEdgeOnTerminalVisibleChanged(e,!1);const r=this.findViewByCell(e);!t&&r?this.removeView(e):t&&null==r&&this.renderView(e,n),t&&this.processEdgeOnTerminalVisibleChanged(e,!0)}processEdgeOnTerminalVisibleChanged(e,t){this.model.getConnectedEdges(e).forEach((n=>{const r=((e,t)=>e.getSourceCellId()!==t.id?e.getSourceCell():e.getTargetCellId()!==t.id?e.getTargetCell():null)(n,e);(null==r||r.isVisible())&&(t?n.show():n.hide())}))}isEdgeTerminalVisible(e,t){const n="source"===t?e.getSourceCellId():e.getTargetCellId(),r=n?this.model.getCell(n):null;return!(r&&!r.isVisible())}requestConnectedEdgesUpdate(e,t={}){if(CellView.isCellView(e)){const n=e.cell,r=this.model.getConnectedEdges(n);for(let e=0,i=r.length;e<i;e+=1){const i=r[e],o=this.findViewByCell(i);if(!o)continue;const a=["update"];i.getTargetCell()===n&&a.push("target"),i.getSourceCell()===n&&a.push("source"),this.scheduleViewUpdate(o,o.getFlag(a),o.priority,t)}}}forcePostponedViewUpdate(e,t){if(!e||!CellView.isCellView(e))return!1;const n=e.cell;if(n.isNode())return!1;const r=e;if(n.isEdge()&&0==(t&e.getFlag(["source","target"]))){let e=0;const t=this.findViewByCell(n.getSourceCell());t&&!this.isViewMounted(t)&&(e=this.dumpView(t),r.updateTerminalMagnet("source"));let i=0;const o=this.findViewByCell(n.getTargetCell());if(o&&!this.isViewMounted(o)&&(i=this.dumpView(o),r.updateTerminalMagnet("target")),0===e&&0===i)return!this.dumpView(r)}return!1}scheduleViewUpdate(e,t,n,r={}){const i=e.cid,o=this.updates;let a=o.priorities[n];a||(a=o.priorities[n]={});const s=a[i]||0;(s&t)!==t&&(s||(o.count+=1),t&Renderer.FLAG_REMOVE&&s&Renderer.FLAG_INSERT?a[i]^=Renderer.FLAG_INSERT:t&Renderer.FLAG_INSERT&&s&Renderer.FLAG_REMOVE&&(a[i]^=Renderer.FLAG_REMOVE),a[i]|=t,this.graph.hook.onViewUpdated(e,t,r))}requestViewUpdate(e,t,n,r={}){this.scheduleViewUpdate(e,t,n,r);const i=this.isAsync();if(this.isFrozen()||i&&!1!==r.async||this.model.hasActiveBatch(Renderer.UPDATE_DELAYING_BATCHES))return;const o=this.updateViews(r);i&&this.graph.trigger("render:done",{stats:o,options:r})}dumpView(e,t={}){if(null==e)return 0;const n=e.cid,r=this.updates.priorities[e.priority],i=this.registerMountedView(e)|r[n];return delete r[n],i?this.updateView(e,i,t):0}dumpViews(e={}){this.checkView(e),this.updateViews(e)}requireView(e,t={}){const n=this.findViewByCell(e);return null==n?null:(this.dumpView(n,t),n)}updateView(e,t,n={}){if(null==e)return 0;if(CellView.isCellView(e)){if(t&Renderer.FLAG_REMOVE)return this.removeView(e.cell),0;t&Renderer.FLAG_INSERT&&(this.insertView(e),t^=Renderer.FLAG_INSERT)}return t?e.confirmUpdate(t,n):0}updateViews(e={}){let t,n=0,r=0,i=Renderer.MIN_PRIORITY;do{t=this.updateViewsBatch(e),n+=1,r+=t.updatedCount,i=Math.min(t.priority,i)}while(!t.empty);return{priority:i,batchCount:n,updatedCount:r}}updateViewsBatch(e={}){const t=this.updates,n=t.priorities,r=e.batchSize||Renderer.UPDATE_BATCH_SIZE;let i=!0,o=Renderer.MIN_PRIORITY,a=0,s=0,l=0,c=0,u=e.checkView||this.options.checkView;"function"!=typeof u&&(u=null);e:for(let h=0,d=n.length;h<d;h+=1){const d=n[h];for(const n in d){if(l>=r){i=!1;break e}const f=View.views[n];if(!f){delete d[n];continue}let p=d[n];if(0==(p&Renderer.FLAG_REMOVE)){const e=n in t.unmounted;if(u&&!call(u,this.graph,{view:f,unmounted:e})){e||(this.registerUnmountedView(f),f.unmount()),t.unmounted[n]|=p,delete d[n],s+=1;continue}e&&(p|=Renderer.FLAG_INSERT,a+=1),p|=this.registerMountedView(f)}const g=f;let m=this.updateView(f,p,e);if(m>0){const e=g.cell;e&&e.isEdge()&&(g.hasAction(m,"source")&&!this.isEdgeTerminalVisible(e,"source")&&(m=g.removeAction(m,"source"),m|=Renderer.FLAG_REMOVE),g.hasAction(m,"target")&&!this.isEdgeTerminalVisible(e,"target")&&(m=g.removeAction(m,"target"),m|=Renderer.FLAG_REMOVE))}m>0&&(d[n]=m,!this.graph.hook.onViewPostponed(g,m,e)||d[n])?(c+=1,i=!1):(o>h&&(o=h),l+=1,delete d[n])}}return{empty:i,priority:o,mountedCount:a,unmountedCount:s,updatedCount:l,postponedCount:c}}updateViewsAsync(e={},t={processed:0,priority:Renderer.MIN_PRIORITY}){const n=this.updates,r=n.animationId;if(r){if(cancelAnimationFrame$2(r),0===t.processed){const t=e.before;"function"==typeof t&&call(t,this.graph,this.graph)}const i=this.updateViewsBatch(e),o=this.checkViewImpl({checkView:e.checkView,mountedBatchSize:Renderer.MOUNT_BATCH_SIZE-i.mountedCount,unmountedBatchSize:Renderer.MOUNT_BATCH_SIZE-i.unmountedCount});let a=t.processed;const s=n.count,l=o.mountedCount,c=o.unmountedCount;i.updatedCount>0&&(a+=i.updatedCount+i.unmountedCount,t.priority=Math.min(i.priority,t.priority),i.empty&&0===l?(i.priority=t.priority,i.mountedCount+=l,i.unmountedCount+=c,this.graph.trigger("render:done",{stats:i,options:e}),t.processed=0,n.count=0):t.processed=a);const u=e.progress;if(s&&"function"==typeof u&&call(u,this.graph,{total:s,done:i.empty,current:a}),n.animationId!==r)return}n.animationId=requestAnimationFrame$2((()=>{this.updateViewsAsync(e,t)}))}registerMountedView(e){const t=e.cid,n=this.updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);const r=n.unmounted[t]||0;return delete n.unmounted[t],r}registerUnmountedView(e){const t=e.cid,n=this.updates;if(t in n.unmounted)return 0;n.unmounted[t]|=Renderer.FLAG_INSERT;const r=n.unmounted[t];return n.unmountedCids.push(t),delete n.mounted[t],r}isViewMounted(e){if(null==e)return!1;return e.cid in this.updates.mounted}getMountedViews(){return Object.keys(this.updates.mounted).map((e=>CellView.views[e]))}getUnmountedViews(){return Object.keys(this.updates.unmounted).map((e=>CellView.views[e]))}checkMountedViews(e,t){let n=0;if("function"!=typeof e)return n;const r=this.updates,i=r.mounted,o=r.mountedCids,a=null==t?o.length:Math.min(o.length,t);for(let s=0;s<a;s+=1){const t=o[s];if(!(t in i))continue;const r=CellView.views[t];if(null==r)continue;if(call(e,this.graph,{view:r,unmounted:!0})){o.push(t);continue}n+=1;this.registerUnmountedView(r)&&r.unmount()}return o.splice(0,a),n}checkUnmountedViews(e,t){let n=0;"function"!=typeof e&&(e=null);const r=this.updates,i=r.unmounted,o=r.unmountedCids,a=null==t?o.length:Math.min(o.length,t);for(let s=0;s<a;s+=1){const t=o[s];if(!(t in i))continue;const r=CellView.views[t];if(null==r)continue;if(e&&!call(e,this.graph,{view:r,unmounted:!1})){o.push(t);continue}n+=1;const a=this.registerMountedView(r);a&&this.scheduleViewUpdate(r,a,r.priority,{mounting:!0})}return o.splice(0,a),n}checkViewImpl(e={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER}){const t=e.checkView||this.options.checkView,n=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,n>0?Math.min(this.updates.unmountedCids.length-n,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:n}}checkView(e={}){return this.checkViewImpl(e)}isFrozen(){return!!this.options.frozen}freeze(e={}){const t=e.key,n=this.updates,r=this.options.frozen,i=n.freezeKey;if(t&&t!==i){if(r&&i)return;n.frozen=r,n.freezeKey=t}this.options.frozen=!0;const o=n.animationId;n.animationId=null,this.isAsync()&&null!=o&&cancelAnimationFrame$2(o),this.graph.trigger("freeze",{key:t})}unfreeze(e={}){const t=e.key,n=this.updates,r=n.freezeKey;if(t&&r&&t!==r)return;if(n.freezeKey=null,t&&t===r&&n.frozen)return;const i=()=>{this.options.frozen=n.frozen=!1,n.sort&&(this.sortViews(),n.sort=!1);const r=e.after;r&&call(r,this.graph,this.graph),this.graph.trigger("unfreeze",{key:t})};if(this.isAsync()){this.freeze();const t=e.progress;this.updateViewsAsync(Object.assign(Object.assign({},e),{progress:({done:e,current:n,total:r})=>{t&&call(t,this.graph,{done:e,current:n,total:r}),e&&i()}}))}else this.updateViews(e),i()}isAsync(){return!!this.options.async}setAsync(e){this.options.async=e}onRemove(){this.freeze(),this.removeViews()}resetViews(e=[],t={}){this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(let n=0,r=e.length;n<r;n+=1)this.renderView(e[n],t);this.unfreeze({key:"reset"}),this.sortViews()}removeView(e){const t=this.views[e.id];if(t){const n=t.cid,r=this.updates,i=r.mounted,o=r.unmounted;t.remove(),delete this.views[e.id],delete i[n],delete o[n]}return t}removeViews(){this.views&&Object.keys(this.views).forEach((e=>{const t=this.views[e];t&&this.removeView(t.cell)})),this.views={}}renderView(e,t={}){const n=e.id,r=this.views;let i=0,o=r[n];if(e.isVisible()&&(!e.isEdge()||this.isEdgeTerminalVisible(e,"source")&&this.isEdgeTerminalVisible(e,"target"))){if(o)i=Renderer.FLAG_INSERT;else{const t=this.graph.hook.createCellView(e);t&&(o=r[e.id]=t,o.graph=this.graph,i=this.registerUnmountedView(o)|o.getBootstrapFlag())}o&&this.requestViewUpdate(o,i,o.priority,t)}}isExactSorting(){return"exact"===this.options.sorting}sortViews(){this.isExactSorting()&&(this.isFrozen()?this.updates.sort=!0:this.sortViewsExact())}sortElements(e,t){const n=e.map((e=>{const t=e.parentNode,n=t.insertBefore(document.createTextNode(""),e.nextSibling);return e=>{if(t===e)throw new Error("You can't sort elements if any one is a descendant of another.");t.insertBefore(e,n),t.removeChild(n)}}));e.sort(t).forEach(((e,t)=>n[t](e)))}sortViewsExact(){const e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,((e,n)=>{const r=t.getCell(e.getAttribute("data-cell-id")||""),i=t.getCell(n.getAttribute("data-cell-id")||""),o=r.getZIndex()||0,a=i.getZIndex()||0;return o===a?0:o<a?-1:1}))}addZPivot(e=0){null==this.zPivots&&(this.zPivots={});const t=this.zPivots;let n=t[e];if(n)return n;n=t[e]=document.createComment(`z-index:${e+1}`);let r=-1/0;for(const o in t){const t=+o;t<e&&t>r&&(r=t)}const i=this.view.stage;if(r!==-1/0){const e=t[r];i.insertBefore(n,e.nextSibling)}else i.insertBefore(n,i.firstChild);return n}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach((e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)})),this.zPivots={}}insertView(e){const t=this.view.stage;switch(this.options.sorting){case"approx":{const n=e.cell.getZIndex(),r=this.addZPivot(n);t.insertBefore(e.container,r);break}default:t.appendChild(e.container)}}findViewByCell(e){if(null==e)return null;const t=Cell.isCell(e)?e.id:e;return this.views[t]}findViewByElem(e){if(null==e)return null;const t="string"==typeof e?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){const e=this.view.findAttr("data-cell-id",t);if(e)return this.views[e]}return null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map((e=>this.findViewByCell(e))).filter((e=>null!=e&&getBBox$2(e.container,{target:this.view.stage}).containsPoint(t)))}findEdgeViewsInArea(e,t={}){const n=Rectangle.create(e);return this.model.getEdges().map((e=>this.findViewByCell(e))).filter((e=>{if(e){const r=getBBox$2(e.container,{target:this.view.stage});return 0===r.width?r.inflate(1,0):0===r.height&&r.inflate(0,1),t.strict?n.containsRect(r):n.isIntersectWithRect(r)}return!1}))}findViewsInArea(e,t={}){const n=Rectangle.create(e);return this.model.getNodes().map((e=>this.findViewByCell(e))).filter((e=>{if(e){const r=getBBox$2(e.container,{target:this.view.stage});return t.strict?n.containsRect(r):n.isIntersectWithRect(r)}return!1}))}dispose(){this.resetUpdates(),this.stopListening()}}__decorate$l([Base$2.dispose()],Renderer.prototype,"dispose",null),Renderer2=Renderer||(Renderer={}),Renderer2.FLAG_INSERT=1<<30,Renderer2.FLAG_REMOVE=1<<29,Renderer2.MOUNT_BATCH_SIZE=1e3,Renderer2.UPDATE_BATCH_SIZE=1e3,Renderer2.MIN_PRIORITY=2,Renderer2.SORT_DELAYING_BATCHES=["add","to-front","to-back"],Renderer2.UPDATE_DELAYING_BATCHES=["translate"];var __decorate$k=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class BackgroundManager extends Base$2{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",n=e.position||"center";const r=this.graph.transform.getScale(),i=this.graph.translate();if("object"==typeof n){n=`${i.tx+r.sx*(n.x||0)}px ${i.ty+r.sy*(n.y||0)}px`}"object"==typeof t&&(t=Rectangle.fromSize(t).scale(r.sx,r.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=n}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const n=this.optionsCache;if(n&&n.image!==t.image)return;let r;const i=t.opacity,o=t.size;let a=t.repeat||"no-repeat";const s=Background.registry.get(a);if("function"==typeof s){const n=t.quality||1;e.width*=n,e.height*=n;const i=s(e,t);if(!(i instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");r=i.toDataURL("image/png"),a=t.repeat&&a!==t.repeat?t.repeat:"repeat","object"==typeof o?(o.width*=i.width/e.width,o.height*=i.height/e.height):void 0===o&&(t.size={width:i.width/n,height:i.height/n})}else r=e.src,void 0===o&&(t.size={width:e.width,height:e.height});null!=n&&"object"==typeof t.size&&t.image===n.image&&t.repeat===n.repeat&&t.quality===n.quality&&(n.size=clone$a(t.size));const l=this.elem.style;l.backgroundImage=`url(${r})`,l.backgroundRepeat=a,l.opacity=null==i||i>=1?"":`${i}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=clone$a(t);const n=document.createElement("img");n.onload=()=>this.drawBackgroundImage(n,e),n.setAttribute("crossorigin","anonymous"),n.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}__decorate$k([Base$2.dispose()],BackgroundManager.prototype,"dispose",null);var __decorate$j=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$a=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Scroller2,Util$2;class Scroller extends View{constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=Util$2.getOptions(e);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const n=this.options.width||this.graph.options.width,r=this.options.height||this.graph.options.height;this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Util$2.containerClass)).css({width:n,height:r}),this.options.pageVisible&&this.$container.addClass(this.prefixClassName(Util$2.pagedClass)),this.options.className&&this.$container.addClass(this.options.className);const i=this.graph.container;i.parentNode&&this.$container.insertBefore(i);const o=i.getAttribute("style");if(o){const e={};o.split(";").forEach((t=>{const n=t.trim();if(n){const t=n.split(":");t.length&&(e[t[0].trim()]=t[1]?t[1].trim():"")}})),Object.keys(e).forEach((t=>{"width"!==t&&"height"!==t&&(i.style[t]="",this.container.style[t]=e[t])}))}this.content=document.createElement("div"),this.$content=this.$(this.content).addClass(this.prefixClassName(Util$2.contentClass)).css({width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),this.$background=this.$(this.background).addClass(this.prefixClassName(Util$2.backgroundClass)),this.$content.append(this.background),this.options.pageVisible||this.$content.append(this.graph.view.grid),this.$content.append(i),this.$content.appendTo(this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new Scroller.Background(this),this.options.autoResize||this.update()}get graph(){return this.options.graph}get model(){return this.graph.model}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){!this.graph.isAsync()&&this.options.autoResize&&this.update()}onBatchStop(e){!this.graph.isAsync()&&this.options.autoResize&&Renderer.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}delegateBackgroundEvents(e){const t=e||GraphView.events;this.delegatedHandlers=Object.keys(t).reduce(((e,n)=>{const r=t[n];if(-1===n.indexOf(" "))if("function"==typeof r)e[n]=r;else{let t=this.graph.view[r];"function"==typeof t&&(t=t.bind(this.graph.view),e[n]=t)}return e}),{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach((e=>{this.delegateEvent(e,{guarded:!1},this.onBackgroundEvent)}))}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach((e=>{this.undelegateEvent(e,this.onBackgroundEvent)}))}onBackgroundEvent(e){let t=!1;const n=e.target;if(this.options.pageVisible)t=this.options.background?this.background===n:this.content===n;else{const e=this.graph.view;t=e.background===n||e.grid===n}if(t){const t=this.delegatedHandlers[e.type];"function"==typeof t&&t.apply(this.graph,arguments)}}onRenderDone({stats:e}){this.options.autoResize&&e.priority<2&&this.update()}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:n,oy:r}){this.updateScale(e,t),(n||r)&&(this.centerPoint(n,r),this.updatePageBreak());"function"==typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(Platform.IS_IE||Platform.IS_EDGE)&&this.$container.css("visibility","hidden")}afterManipulation(){(Platform.IS_IE||Platform.IS_EDGE)&&this.$container.css("visibility","visible")}updatePageSize(e,t){null!=e&&(this.options.pageWidth=e),null!=t&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,n=this.options.pageWidth*this.sx,r=this.options.pageHeight*this.sy;if(0===n||0===r)return;if(e>n||t>r){let i=!1;const o=document.createElement("div");for(let t=1,r=Math.floor(e/n);t<r;t+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:t*n}).appendTo(o),i=!0;for(let e=1,n=Math.floor(t/r);e<n;e+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:e*r}).appendTo(o),i=!0;i&&(addClass(o,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(o),this.pageBreak=o)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions||this.options.fitTocontentOptions;"function"==typeof t&&(t=call(t,this,this));const n=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative",contentArea:this.calcContextArea(t)},t);this.graph.fitToContent(this.getFitToContentOptions(n))}calcContextArea(e){const t=null==e?void 0:e.direction;if(!t)return this.graph.transform.getContentArea(e);function n(e){let t=e.getBBox();if(t&&e.isNode()){const n=e.getAngle();null!=n&&0!==n&&(t=t.bbox(n))}return t}const r=this.options.pageWidth||1,i=this.options.pageHeight||1;let o=this.graph.getCells();return t.includes("top")||(o=o.filter((e=>n(e).y>=0))),t.includes("left")||(o=o.filter((e=>n(e).x>=0))),t.includes("right")||(o=o.filter((e=>{const t=n(e);return t.x+t.width<=r}))),t.includes("bottom")||(o=o.filter((e=>{const t=n(e);return t.y+t.height<=i}))),this.model.getCellsBBox(o)||new Rectangle}getFitToContentOptions(e){const t=this.sx,n=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=n),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=n),"object"==typeof e.padding?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*n,bottom:(e.padding.bottom||0)*n}:"number"==typeof e.padding&&(e.padding*=t),this.options.autoResize||(e.contentArea=Rectangle.create()),e}updateScale(e,t){const n=this.graph.options,r=e/this.sx,i=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(n.x*r,n.y*i),this.graph.resizeGraph(n.width*r,n.height*i)}scrollbarPosition(e,t,n){if(null==e&&null==t)return{left:this.container.scrollLeft,top:this.container.scrollTop};const r={};return"number"==typeof e&&(r.scrollLeft=e),"number"==typeof t&&(r.scrollTop=t),n&&n.animation?this.$container.animate(r,n.animation):this.$container.prop(r),this}scrollToPoint(e,t,n){const r=this.getClientSize(),i=this.graph.matrix(),o={};return"number"==typeof e&&(o.scrollLeft=e-r.width/2+i.e+(this.padding.left||0)),"number"==typeof t&&(o.scrollTop=t-r.height/2+i.f+(this.padding.top||0)),n&&n.animation?this.$container.animate(o,n.animation):this.$container.prop(o),this}scrollToContent(e){const t=this.sx,n=this.sy,r=this.graph.getContentArea().getCenter();return this.scrollToPoint(r.x*t,r.y*n,e)}scrollToCell(e,t){const n=this.sx,r=this.sy,i=e.getBBox().getCenter();return this.scrollToPoint(i.x*n,i.y*r,t)}center(e){return this.centerPoint(e)}centerPoint(e,t,n){const r=this.graph.matrix(),i=r.a,o=r.d,a=-r.e,s=-r.f,l=a+this.graph.options.width,c=s+this.graph.options.height;let u;if(this.storeClientSize(),"number"==typeof e||"number"==typeof t){u=n;const r=this.getVisibleArea().getCenter();"number"==typeof e?e*=i:e=r.x,"number"==typeof t?t*=o:t=r.y}else u=e,e=(a+l)/2,t=(s+c)/2;if(u&&u.padding)return this.positionPoint({x:e,y:t},"50%","50%",u);const h=this.getPadding(),d=this.getClientSize(),f=d.width/2,p=d.height/2,g=f-h.left-e+a,m=f-h.right+e-l,v=p-h.top-t+s,y=p-h.bottom+t-c;this.addPadding(Math.max(g,0),Math.max(m,0),Math.max(v,0),Math.max(y,0));const b=this.scrollToPoint(e,t,u||void 0);return this.restoreClientSize(),b}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const n=this.graph.getContentArea(t);return this.positionRect(n,e,t)}positionCell(e,t,n){const r=e.getBBox();return this.positionRect(r,t,n)}positionRect(e,t,n){const r=Rectangle.create(e);switch(t){case"center":return this.positionPoint(r.getCenter(),"50%","50%",n);case"top":return this.positionPoint(r.getTopCenter(),"50%",0,n);case"top-right":return this.positionPoint(r.getTopRight(),"100%",0,n);case"right":return this.positionPoint(r.getRightMiddle(),"100%","50%",n);case"bottom-right":return this.positionPoint(r.getBottomRight(),"100%","100%",n);case"bottom":return this.positionPoint(r.getBottomCenter(),"50%","100%",n);case"bottom-left":return this.positionPoint(r.getBottomLeft(),0,"100%",n);case"left":return this.positionPoint(r.getLeftMiddle(),0,"50%",n);case"top-left":return this.positionPoint(r.getTopLeft(),0,0,n);default:return this}}positionPoint(e,t,n,r={}){const{padding:i}=r,o=__rest$a(r,["padding"]),a=normalizeSides(i),s=Rectangle.fromSize(this.getClientSize()),l=s.clone().moveAndExpand({x:a.left,y:a.top,width:-a.right-a.left,height:-a.top-a.bottom});(t=normalizePercentage(t,Math.max(0,l.width)))<0&&(t=l.width+t),(n=normalizePercentage(n,Math.max(0,l.height)))<0&&(n=l.height+n);const c=l.getTopLeft().translate(t,n),u=s.getCenter().diff(c),h=this.zoom(),d=u.scale(1/h,1/h),f=Point.create(e).translate(d);return this.centerPoint(f.x,f.y,o)}zoom(e,t){if(null==e)return this.sx;let n,r;t=t||{};const i=this.getClientSize(),o=this.clientToLocalPoint(i.width/2,i.height/2);let a=e,s=e;if(t.absolute||(a+=this.sx,s+=this.sy),t.scaleGrid&&(a=Math.round(a/t.scaleGrid)*t.scaleGrid,s=Math.round(s/t.scaleGrid)*t.scaleGrid),t.maxScale&&(a=Math.min(t.maxScale,a),s=Math.min(t.maxScale,s)),t.minScale&&(a=Math.max(t.minScale,a),s=Math.max(t.minScale,s)),a=this.graph.transform.clampScale(a),s=this.graph.transform.clampScale(s),t.center){const e=a/this.sx,i=s/this.sy;n=t.center.x-(t.center.x-o.x)/e,r=t.center.y-(t.center.y-o.y)/i}else n=o.x,r=o.y;return this.beforeManipulation(),this.graph.transform.scale(a,s),this.centerPoint(n,r),this.afterManipulation(),this}zoomToRect(e,t={}){const n=Rectangle.create(e),r=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:r.options.x,y:r.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),r.transform.scaleContentToFitImpl(t,!1);const i=n.getCenter();return this.centerPoint(i.x,i.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,n){let r,i;"object"==typeof e&&(n=t,t=e.y,e=e.x),null==n&&(n={});const o=this.sx,a=Math.max(n.scale||o,1e-6),s=this.getClientSize(),l=new Point(e,t),c=this.clientToLocalPoint(s.width/2,s.height/2);if(o===a){const e=c.diff(l).scale(o,o).round();r=`translate(${e.x}px,${e.y}px)`}else{const e=a/(o-a)*l.distance(c),t=c.clone().move(l,e),n=this.localToBackgroundPoint(t).round();r=`scale(${a/o})`,i=`${n.x}px ${n.y}px`}const u=n.onTransitionEnd;return this.$container.addClass(Util$2.transitionClassName),this.$content.off(Util$2.transitionEventName).on(Util$2.transitionEventName,(n=>{this.syncTransition(a,{x:e,y:t}),"function"==typeof u&&call(u,this,n.originalEvent)})).css({transform:r,transformOrigin:i,transition:"transform",transitionDuration:n.duration||"1s",transitionDelay:n.delay,transitionTimingFunction:n.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return this.$container.removeClass(Util$2.transitionClassName),this.$content.off(Util$2.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const n=Rectangle.create(e),r=t.maxScale||1/0,i=t.minScale||Number.MIN_VALUE,o=t.scaleGrid||null,a=t.visibility||1,s=t.center?Point.create(t.center):n.getCenter(),l=this.getClientSize(),c=l.width*a,u=l.height*a;let h=new Rectangle(s.x-c/2,s.y-u/2,c,u).getMaxUniformScaleToFit(n,s);return h=Math.min(h,r),o&&(h=Math.floor(h/o)*o),h=Math.max(i,h),this.transitionToPoint(s,Object.assign({scale:h},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),n=t.clientX-this.clientX,r=t.clientY-this.clientY;this.container.scrollTop-=r,this.container.scrollLeft-=n,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e:e})}clientToLocalPoint(e,t){let n="object"==typeof e?e.x:e,r="object"==typeof e?e.y:t;const i=this.graph.matrix();return n+=this.container.scrollLeft-this.padding.left-i.e,r+=this.container.scrollTop-this.padding.top-i.f,new Point(n/i.a,r/i.d)}localToBackgroundPoint(e,t){const n="object"==typeof e?Point.create(e):new Point(e,t),r=this.graph.matrix(),i=this.padding;return transformPoint(n,r).translate(i.left,i.top)}resize(e,t){let n=null!=e?e:this.container.offsetWidth,r=null!=t?t:this.container.offsetHeight;"number"==typeof n&&(n=Math.round(n)),"number"==typeof r&&(r=Math.round(r)),this.options.width=n,this.options.height=r,this.$container.css({width:n,height:r}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const n=10,r=this.container,i=r.getBoundingClientRect();let o=0,a=0;return e<=i.left+n&&(o=-10),t<=i.top+n&&(a=-10),e>=i.right-n&&(o=n),t>=i.bottom-n&&(a=n),0!==o&&(r.scrollLeft+=o),0!==a&&(r.scrollTop+=a),{scrollerX:o,scrollerY:a}}addPadding(e,t,n,r){let i=this.getPadding();this.padding={left:Math.round(i.left+(e||0)),top:Math.round(i.top+(n||0)),bottom:Math.round(i.bottom+(r||0)),right:Math.round(i.right+(t||0))},i=this.padding,this.$content.css({width:i.left+this.graph.options.width+i.right,height:i.top+this.graph.options.height+i.bottom});const o=this.graph.container;return o.style.left=`${this.padding.left}px`,o.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return normalizeSides("function"==typeof e?call(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),n=transformRectangle({x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},e.inverse());return n.x-=(this.padding.left||0)/this.sx,n.y-=(this.padding.top||0)/this.sy,n}isCellVisible(e,t={}){const n=e.getBBox(),r=this.getVisibleArea();return t.strict?r.containsRect(n):r.isIntersectWithRect(n)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return this.$container.css("overflow","hidden"),this}unlock(){return this.$container.css("overflow","scroll"),this}onRemove(){this.stopListening()}dispose(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}function notify(e,t,n,r={}){if(n){const i=n.graph,o=i.view.normalizeEvent(t),a=i.snapToGrid(o.clientX,o.clientY);n.notify(e,Object.assign({e:o,view:n,node:n.cell,cell:n.cell,x:a.x,y:a.y},r))}}__decorate$j([View.dispose()],Scroller.prototype,"dispose",null),Scroller2=Scroller||(Scroller={}),Scroller2.Background=class extends BackgroundManager{constructor(e){super(e.graph),this.scroller=e,e.options.background&&this.draw(e.options.background)}get elem(){return this.scroller.background}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(e){this.scroller.options.background=e}},function(e){e.containerClass="graph-scroller",e.panningClass=`${e.containerClass}-panning`,e.pannableClass=`${e.containerClass}-pannable`,e.pagedClass=`${e.containerClass}-paged`,e.contentClass=`${e.containerClass}-content`,e.backgroundClass=`${e.containerClass}-background`,e.transitionClassName="transition-in-progress",e.transitionEventName="transitionend.graph-scroller-transition",e.defaultOptions={padding(){const e=this.getClientSize(),t=Math.max(this.options.minVisibleWidth||0,1)||1,n=Math.max(this.options.minVisibleHeight||0,1)||1,r=Math.max(e.width-t,0),i=Math.max(e.height-n,0);return{left:r,top:i,right:r,bottom:i}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0},e.getOptions=function(t){const n=merge$1({},e.defaultOptions,t);return null==n.pageWidth&&(n.pageWidth=t.graph.options.width),null==n.pageHeight&&(n.pageHeight=t.graph.options.height),n}}(Util$2||(Util$2={}));var __decorate$i=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Private$3,Private$2;class Selection extends View{constructor(e){super(),this.options=merge$1({},Private$3.defaultOptions,e),this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new Collection([],{comparator:Private$3.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.initHandles(),this.startListening()}get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(Private$3.classNames.box)}get $boxes(){return this.$container.children(`.${this.boxClassName}`)}get handleOptions(){return this.options}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes({async:!1})}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:n,pointerEvents:r}=this.options,{ui:i,selection:o,translateBy:a,snapped:s}=t,l=!(!0===n&&"none"!==r||this.translating||o),c=i&&a&&e.id===a;if(l&&(c||s)){this.translating=!0;const n=e.position(),r=e.previous("position"),i=n.x-r.x,o=n.y-r.y;0===i&&0===o||this.translateSelectedNodes(i,o,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const n=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(n,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const n=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(n,Object.assign(Object.assign({},t),{ui:!0})),this}const n=this.cells,r=this.filter(Array.isArray(e)?e:[e]),i={},o={};n.forEach((e=>i[e.id]=e)),r.forEach((e=>o[e.id]=e));const a=[],s=[];return r.forEach((e=>{i[e.id]||a.push(e)})),n.forEach((e=>{o[e.id]||s.push(e)})),s.length&&this.unselect(s,Object.assign(Object.assign({},t),{ui:!0})),a.length&&this.select(a,Object.assign(Object.assign({},t),{ui:!0})),0===s.length&&0===a.length&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(!1===e.batch?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){let t,n;e=this.normalizeEvent(e),this.clean();const r=this.graph.container;if(null!=e.offsetX&&null!=e.offsetY&&r.contains(e.target))t=e.offsetX,n=e.offsetY;else{const i=this.$(r).offset(),o=r.scrollLeft,a=r.scrollTop;t=e.clientX-i.left+window.pageXOffset+o,n=e.clientY-i.top+window.pageYOffset+a}this.$container.css({top:n,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:n,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Private$3.documentEvents,e.data)}filter(e){const t=this.options.filter;return Array.isArray(t)?e.filter((e=>!t.includes(e)&&!t.includes(e.shape))):"function"==typeof t?e.filter((e=>call(t,this.graph,e))):e}stopSelecting(e){const t=this.graph,n=this.getEventData(e);switch(n.action){case"selecting":{let e=this.$container.width(),n=this.$container.height();const r=this.$container.offset(),i=t.pageToLocal(r.left,r.top),o=t.transform.getScale();e/=o.sx,n/=o.sy;const a=new Rectangle(i.x,i.y,e,n),s=this.getCellViewsInArea(a).map((e=>e.cell));this.reset(s,{batch:!0}),this.hideRubberband();break}case"translating":{const r=t.snapToGrid(e.clientX,e.clientY);if(!this.options.following){const e=n;this.updateSelectedNodesPosition({dx:e.clientX-e.originX,dy:e.clientY-e.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,r.x,r.y);break}default:this.clean()}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const n=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:n});const r=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,r.x,r.y),this.delegateDocumentEvents(Private$3.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getSelectionOffset(e,t){let n=e.x-t.clientX,r=e.y-t.clientY;const i=this.graph.hook.getRestrictArea();if(i){const o=this.collection.toArray(),a=Cell.getCellsBBox(o,{deep:!0})||Rectangle.create(),s=i.x-a.x,l=i.y-a.y,c=i.x+i.width-(a.x+a.width),u=i.y+i.height-(a.y+a.height);if(n<s&&(n=s),r<l&&(r=l),c<n&&(n=c),u<r&&(r=u),!this.options.following){const i=e.x-t.originX,o=e.y-t.originY;n=i<=s||i>=c?0:n,r=o<=l||o>=u?0:r}}return{dx:n,dy:r}}updateSelectedNodesPosition(e){const{dx:t,dy:n}=e;if(t||n)if(this.translateSelectedNodes(t,n),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const e=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+="+t*e.sx,top:"+="+n*e.sy})}}autoScrollGraph(e,t){const n=this.graph.scroller.widget;return n?n.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),n=this.getEventData(t);switch(n.action){case"selecting":{const e=n;!0!==e.moving&&(this.$container.appendTo(this.graph.container),this.showRubberband(),e.moving=!0);const{scrollerX:r,scrollerY:i}=this.autoScrollGraph(t.clientX,t.clientY);e.scrollerX+=r,e.scrollerY+=i;const o=t.clientX-e.clientX+e.scrollerX,a=t.clientY-e.clientY+e.scrollerY,s=parseInt(this.$container.css("left"),10),l=parseInt(this.$container.css("top"),10);this.$container.css({left:o<0?e.offsetX+o:s,top:a<0?e.offsetY+a:l,width:Math.abs(o),height:Math.abs(a)});break}case"translating":{const r=this.graph.snapToGrid(t.clientX,t.clientY),i=n,o=this.getSelectionOffset(r,i);this.options.following?this.updateSelectedNodesPosition(o):this.updateContainerPosition(o),o.dx&&(i.clientX=r.x),o.dy&&(i.clientY=r.y),this.notifyBoxEvent("box:mousemove",e,r.x,r.y);break}}this.boxesUpdated=!1}translateSelectedNodes(e,t,n,r){const i={},o=[];if(n&&(i[n.id]=!0),this.collection.toArray().forEach((e=>{e.getDescendants({deep:!0}).forEach((e=>{i[e.id]=!0}))})),r&&r.translateBy){const e=this.graph.getCellById(r.translateBy);e&&(i[e.id]=!0,e.getDescendants({deep:!0}).forEach((e=>{i[e.id]=!0})),o.push(e))}this.collection.toArray().forEach((n=>{if(!i[n.id]){const a=Object.assign(Object.assign({},r),{selection:this.cid,exclude:o});n.translate(e,t,a),this.graph.model.getConnectedEdges(n).forEach((n=>{i[n.id]||(n.translate(e,t,a),i[n.id]=!0)}))}}))}getCellViewsInArea(e){const t=this.graph,n={strict:this.options.strict};let r=[];return this.options.rubberNode&&(r=this.options.useCellGeometry?r.concat(t.model.getNodesInArea(e,n).map((e=>t.renderer.findViewByCell(e))).filter((e=>null!=e))):r.concat(t.renderer.findViewsInArea(e,n))),this.options.rubberEdge&&(r=this.options.useCellGeometry?r.concat(t.model.getEdgesInArea(e,n).map((e=>t.renderer.findViewByCell(e))).filter((e=>null!=e))):r.concat(t.renderer.findEdgeViewsInArea(e,n))),r}notifyBoxEvent(e,t,n,r){const i=this.getEventData(t).activeView;this.trigger(e,{e:t,view:i,x:n,y:r,cell:i.cell})}getSelectedClassName(e){return this.prefixClassName((e.isNode()?"node":"edge")+"-selected")}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find(`[data-cell-id="${e.id}"]`).remove(),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach((e=>this.removeCellUnSelectedClassName(e))),this.hide(),this.$boxes.remove(),this.boxCount=0}hide(){this.$container.removeClass(this.prefixClassName(Private$3.classNames.rubberband)).removeClass(this.prefixClassName(Private$3.classNames.selected))}showRubberband(){this.$container.addClass(this.prefixClassName(Private$3.classNames.rubberband))}hideRubberband(){this.$container.removeClass(this.prefixClassName(Private$3.classNames.rubberband))}showSelected(){this.$container.removeAttr("style").addClass(this.prefixClassName(Private$3.classNames.selected))}createContainer(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(Private$3.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(Private$3.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(Private$3.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}updateContainerPosition(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:`+=${e.dx}`,top:`+=${e.dy}`})}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter((e=>this.canShowSelectionBox(e))).forEach((n=>{const r=this.graph.renderer.findViewByCell(n);if(r){const n=r.getBBox({useCellGeometry:this.options.useCellGeometry});e.x=Math.min(e.x,n.x),e.y=Math.min(e.y,n.y),t.x=Math.max(t.x,n.x+n.width),t.y=Math.max(t.y,n.y+n.height)}})),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}).attr("data-selection-length",this.collection.length);const n=this.options.content;if(n)if("function"==typeof n){const e=call(n,this.graph,this,this.$selectionContent[0]);e&&this.$selectionContent.html(e)}else this.$selectionContent.html(n);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&!0===this.options.showNodeSelectionBox||e.isEdge()&&!0===this.options.showEdgeSelectionBox}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const n=t.getBBox({useCellGeometry:this.options.useCellGeometry}),r=this.boxClassName;this.$("<div/>").addClass(r).addClass(`${r}-${e.isNode()?"node":"edge"}`).attr("data-cell-id",e.id).css({position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(e={}){this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}confirmUpdate(){return this.boxCount&&(this.hide(),this.$boxes.each(((e,t)=>{const n=this.$(t).remove().attr("data-cell-id"),r=this.collection.get(n);r&&this.createSelectionBox(r)})),this.updateContainer()),0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const e=this.collection.get(t);if(e)return this.graph.renderer.findViewByCell(e)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach((e=>{this.listenCellRemoveEvent(e),this.createSelectionBox(e)})),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:n}){e.forEach((e=>{this.trigger("cell:selected",{cell:e,options:n}),this.graph.trigger("cell:selected",{cell:e,options:n}),e.isNode()?(this.trigger("node:selected",{cell:e,options:n,node:e}),this.graph.trigger("node:selected",{cell:e,options:n,node:e})):e.isEdge()&&(this.trigger("edge:selected",{cell:e,options:n,edge:e}),this.graph.trigger("edge:selected",{cell:e,options:n,edge:e}))})),t.forEach((e=>{this.trigger("cell:unselected",{cell:e,options:n}),this.graph.trigger("cell:unselected",{cell:e,options:n}),e.isNode()?(this.trigger("node:unselected",{cell:e,options:n,node:e}),this.graph.trigger("node:unselected",{cell:e,options:n,node:e})):e.isEdge()&&(this.trigger("edge:unselected",{cell:e,options:n,edge:e}),this.graph.trigger("edge:unselected",{cell:e,options:n,edge:e}))}));const r={added:e,removed:t,options:n,selected:this.cells.filter((e=>!!this.graph.getCellById(e.id)))};this.trigger("selection:changed",r),this.graph.trigger("selection:changed",r)}deleteSelectedCells(){const e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}startRotate({e:e}){const t=this.collection.toArray(),n=Cell.getCellsBBox(t).getCenter(),r=this.graph.snapToGrid(e.clientX,e.clientY),i=t.reduce(((e,t)=>(e[t.id]=Angle.normalize(t.getAngle()),e)),{});this.setEventData(e,{center:n,angles:i,start:r.theta(n)})}doRotate({e:e}){const t=this.getEventData(e),n=this.graph.options.rotating.grid,r="function"==typeof n?call(n,this.graph,null):n,i=this.graph.snapToGrid(e.clientX,e.clientY),o=t.start-i.theta(t.center);t.rotated||(t.rotated=!0),Math.abs(o)>.001&&(this.collection.toArray().forEach((e=>{const n=Util$4.snapToGrid(t.angles[e.id]+o,r||15);e.rotate(n,{absolute:!0,center:t.center,selection:this.cid})})),this.updateSelectionBoxes())}stopRotate({e:e}){const t=this.getEventData(e);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach((t=>{notify("node:rotated",e,this.graph.findViewByCell(t))})))}startResize({e:e}){const t=this.graph.getGridSize(),n=this.collection.toArray(),r=Cell.getCellsBBox(n),i=n.map((e=>e.getBBox())),o=i.reduce(((e,t)=>t.width<e?t.width:e),1/0),a=i.reduce(((e,t)=>t.height<e?t.height:e),1/0);this.setEventData(e,{bbox:r,cells:this.graph.model.getSubGraph(n),minWidth:t*r.width/o,minHeight:t*r.height/a})}doResize({e:e,dx:t,dy:n}){const r=this.eventData(e),i=r.bbox,o=i.width,a=i.height,s=Math.max(o+t,r.minWidth),l=Math.max(a+n,r.minHeight);r.resized||(r.resized=!0),(Math.abs(o-s)>.001||Math.abs(a-l)>.001)&&(this.graph.model.resizeCells(s,l,r.cells,{selection:this.cid}),i.width=s,i.height=l,this.updateSelectionBoxes())}stopResize({e:e}){const t=this.eventData(e);t.resized&&(t.resized=!1,this.collection.toArray().forEach((t=>{notify("node:resized",e,this.graph.findViewByCell(t))})))}dispose(){this.clean(),this.remove()}}__decorate$i([View.dispose()],Selection.prototype,"dispose",null),applyMixins(Selection,Handle),function(e){const t="widget-selection";e.classNames={root:t,inner:`${t}-inner`,box:`${t}-box`,content:`${t}-content`,rubberband:`${t}-rubberband`,selected:`${t}-selected`},e.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},e.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:e=>template('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:e.length}),handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]},e.depthComparator=function(e){return e.getAncestors().length}}(Private$3||(Private$3={}));class Transform extends Widget{get node(){return this.cell}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}init(e){this.options=Object.assign(Object.assign({},Private$2.defaultOptions),e),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}renderHandles(){this.container=document.createElement("div"),this.$container=this.$(this.container);const e=this.$("<div/>").prop("draggable",!1),t=e.clone().addClass(this.rotateClassName),n=Private$2.POSITIONS.map((t=>e.clone().addClass(this.resizeClassName).attr("data-position",t)));this.empty(),this.$container.append(n,t)}render(){return this.renderHandles(),this.view.addClass(Private$2.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;const n=Angle.normalize(this.node.getAngle()),r=0!==n?`rotate(${n}deg)`:"";return this.$container.css({transform:r,width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}remove(){return this.view.removeClass(Private$2.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const e=Angle.normalize(this.node.getAngle()),t=Math.floor(e*(Private$2.DIRECTIONS.length/360));if(t!==this.prevShift){const e=Private$2.DIRECTIONS.slice(t).concat(Private$2.DIRECTIONS.slice(0,t)),n=e=>`${this.containerClassName}-cursor-${e}`;this.$container.find(`.${this.resizeClassName}`).removeClass(Private$2.DIRECTIONS.map((e=>n(e))).join(" ")).each(((t,r)=>{this.$(r).addClass(n(e[t]))})),this.prevShift=t}}getTrueDirection(e){const t=Angle.normalize(this.node.getAngle());let n=Private$2.POSITIONS.indexOf(e);return n+=Math.floor(t*(Private$2.POSITIONS.length/360)),n%=Private$2.POSITIONS.length,Private$2.POSITIONS[n]}toValidResizeDirection(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}startResizing(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const t=this.$(e.target).attr("data-position"),n=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),notify("node:resize:mousedown",e,n)}prepareResizing(e,t){const n=this.getTrueDirection(t);let r=0,i=0;t.split("-").forEach((e=>{r={left:-1,right:1}[e]||r,i={top:-1,bottom:1}[e]||i}));const o=this.toValidResizeDirection(t),a={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[o],s=Angle.normalize(this.node.getAngle());this.setEventData(e,{selector:a,direction:o,trueDirection:n,relativeDirection:t,angle:s,resizeX:r,resizeY:i,action:"resizing"})}startRotating(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const t=this.graph.findViewByCell(this.node),n=this.node.getBBox().getCenter(),r=this.normalizeEvent(e),i=this.graph.snapToGrid(r.clientX,r.clientY);this.setEventData(e,{center:n,action:"rotating",angle:Angle.normalize(this.node.getAngle()),start:Point.create(i).theta(n)}),this.startAction(e),notify("node:rotate:mousedown",e,t)}onMouseMove(e){const t=this.graph.findViewByCell(this.node);let n=this.getEventData(e);if(n.action){const r=this.normalizeEvent(e);let i=r.clientX,o=r.clientY;const a=this.graph.scroller.widget,s=this.options.restrictedResizing;if(!0===s||"number"==typeof s){const e=!0===s?0:s,t=a?Math.max(e,8):e,n=this.graph.container.getBoundingClientRect();i=clamp$3(i,n.left+t,n.right-t),o=clamp$3(o,n.top+t,n.bottom-t)}else this.options.autoScrollOnResizing&&a&&a.autoScroll(i,o);const l=this.graph.snapToGrid(i,o),c=this.graph.getGridSize(),u=this.node,h=this.options;if("resizing"===n.action){n.resized||(t&&(t.addClass("node-resizing"),notify("node:resize",e,t)),n.resized=!0);const r=u.getBBox(),i=Point.create(l).rotate(n.angle,r.getCenter()).diff(r[n.selector]);let o=n.resizeX?i.x*n.resizeX:r.width,a=n.resizeY?i.y*n.resizeY:r.height;const s=o,d=a;if(o=Util$4.snapToGrid(o,c),a=Util$4.snapToGrid(a,c),o=Math.max(o,h.minWidth||c),a=Math.max(a,h.minHeight||c),o=Math.min(o,h.maxWidth||1/0),a=Math.min(a,h.maxHeight||1/0),h.preserveAspectRatio){const e=r.width*a/r.height,t=r.height*o/r.width;o<e?a=t:o=e}const f=n.relativeDirection;if(h.allowReverse&&(s<=-o||d<=-a)){let t;"left"===f?s<=-o&&(t="right"):"right"===f?s<=-o&&(t="left"):"top"===f?d<=-a&&(t="bottom"):"bottom"===f?d<=-a&&(t="top"):"top-left"===f?s<=-o&&d<=-a?t="bottom-right":s<=-o?t="top-right":d<=-a&&(t="bottom-left"):"top-right"===f?s<=-o&&d<=-a?t="bottom-left":s<=-o?t="top-left":d<=-a&&(t="bottom-right"):"bottom-left"===f?s<=-o&&d<=-a?t="top-right":s<=-o?t="bottom-right":d<=-a&&(t="top-left"):"bottom-right"===f&&(s<=-o&&d<=-a?t="top-left":s<=-o?t="bottom-left":d<=-a&&(t="top-right"));const n=t;this.stopHandle();const r=this.$container.find(`.${this.resizeClassName}[data-position="${n}"]`);this.startHandle(r[0]),this.prepareResizing(e,n),this.onMouseMove(e)}if(r.width!==o||r.height!==a){const r={ui:!0,direction:n.direction,relativeDirection:n.relativeDirection,trueDirection:n.trueDirection,minWidth:h.minWidth,minHeight:h.minHeight,maxWidth:h.maxWidth,maxHeight:h.maxHeight,preserveAspectRatio:!0===h.preserveAspectRatio};u.resize(o,a,r),notify("node:resizing",e,t)}notify("node:resize:mousemove",e,t)}else if("rotating"===n.action){n.rotated||(t&&(t.addClass("node-rotating"),notify("node:rotate",e,t)),n.rotated=!0);const r=u.getAngle(),i=n.start-Point.create(l).theta(n.center);let o=n.angle+i;h.rotateGrid&&(o=Util$4.snapToGrid(o,h.rotateGrid)),o=Angle.normalize(o),r!==o&&(u.rotate(o,{absolute:!0}),notify("node:rotating",e,t)),notify("node:rotate:mousemove",e,t)}}}onMouseUp(e){const t=this.graph.findViewByCell(this.node),n=this.getEventData(e);n.action&&(this.stopAction(e),this.model.stopBatch("resizing"===n.action?"resize":"rotate",{cid:this.cid}),"resizing"===n.action?notify("node:resize:mouseup",e,t):"rotating"===n.action&&notify("node:rotate:mouseup",e,t))}startHandle(e){if(this.handle=e||null,this.$container.addClass(`${this.containerClassName}-active`),e){this.$(e).addClass(`${this.containerClassName}-active-handle`);const t=e.getAttribute("data-position");if(t){const e=Private$2.DIRECTIONS[Private$2.POSITIONS.indexOf(t)];this.$container.addClass(`${this.containerClassName}-cursor-${e}`)}}}stopHandle(){if(this.$container.removeClass(`${this.containerClassName}-active`),this.handle){this.$(this.handle).removeClass(`${this.containerClassName}-active-handle`);const e=this.handle.getAttribute("data-position");if(e){const t=Private$2.DIRECTIONS[Private$2.POSITIONS.indexOf(e)];this.$container.removeClass(`${this.containerClassName}-cursor-${t}`)}this.handle=null}}startAction(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Private$2.documentEvents,e.data)}stopAction(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.graph.findViewByCell(this.node),n=this.getEventData(e);t&&(t.removeClass(`node-${n.action}`),"resizing"===n.action&&n.resized?notify("node:resized",e,t):"rotating"===n.action&&n.rotated&&notify("node:rotated",e,t))}}!function(e){e.NODE_CLS="has-widget-transform",e.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],e.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],e.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},e.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}}(Private$2||(Private$2={}));var __rest$9=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Options,Options2;(Options||(Options={})).parseOptionGroup=function(e,t,n){const r={};return Object.keys(n||{}).forEach((i=>{const o=n[i];r[i]="function"==typeof o?o.call(e,t):o})),r},Options2=Options||(Options={}),Options2.get=function(e){const{grid:t,panning:n,selecting:r,embedding:i,snapline:o,resizing:a,rotating:s,knob:l,clipboard:c,history:u,scroller:h,minimap:d,keyboard:f,mousewheel:p}=e,g=__rest$9(e,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),m=e.container;if(null==m)throw new Error("Ensure the container of the graph is specified and valid");null==g.width&&(g.width=m.clientWidth),null==g.height&&(g.height=m.clientHeight);const v=merge$1({},Options2.defaults,g),y={size:10,visible:!1};return v.grid="number"==typeof t?{size:t,visible:!1}:"boolean"==typeof t?Object.assign(Object.assign({},y),{visible:t}):Object.assign(Object.assign({},y),t),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach((t=>{const n=e[t];"boolean"==typeof n?v[t].enabled=n:v[t]=Object.assign(Object.assign({},v[t]),n)})),v.background&&v.scroller.enabled&&null==v.scroller.background&&(v.scroller.background=v.background,delete v.background),v},(Options||(Options={})).defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Util$4.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Util$4.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:({type:e,sourceView:t,targetView:n})=>null!=("target"===e?n:t),createEdge:()=>new Edge$3},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:()=>!1};var __rest$8=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class DefsManager extends Base$2{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return null!=this.svg.getElementById(e)}filter(e){let t=e.id;const n=e.name;if(t||(t=`filter-${n}-${this.cid}-${hashcode(JSON.stringify(e))}`),!this.isDefined(t)){const r=Filter.registry.get(n);if(null==r)return Filter.registry.onNotFound(n);const i=r(e.args||{}),o=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});Vector$2.create(Markup.sanitize(i),o).appendTo(this.defs)}return t}gradient(e){let t=e.id;const n=e.type;if(t||(t=`gradient-${n}-${this.cid}-${hashcode(JSON.stringify(e))}`),!this.isDefined(t)){const r=`<${n}>${e.stops.map((e=>{const t=null!=e.opacity&&Number.isFinite(e.opacity)?e.opacity:1;return`<stop offset="${e.offset}" stop-color="${e.color}" stop-opacity="${t}"/>`})).join("")}</${n}>`,i=Object.assign({id:t},e.attrs);Vector$2.create(r,i).appendTo(this.defs)}return t}marker(e){const{id:t,refX:n,refY:r,markerUnits:i,markerOrient:o,tagName:a,children:s}=e,l=__rest$8(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let c=t;if(c||(c=`marker-${this.cid}-${hashcode(JSON.stringify(e))}`),!this.isDefined(c)){"path"!==a&&delete l.d;const e=Vector$2.create("marker",{refX:n,refY:r,id:c,overflow:"visible",orient:null!=o?o:"auto",markerUnits:i||"userSpaceOnUse"},s?s.map((e=>{var{tagName:t}=e,n=__rest$8(e,["tagName"]);return Vector$2.create(`${t}`||"path",kebablizeAttrs(Object.assign(Object.assign({},l),n)))})):[Vector$2.create(a||"path",kebablizeAttrs(l))]);this.defs.appendChild(e.node)}return c}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}var __decorate$h=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$7=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class GridManager extends Base$2{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const n=this.graph.matrix(),r=this.getInstance(),i=Array.isArray(e)?e:[e];this.patterns.forEach(((e,o)=>{const a=`pattern_${o}`,s=n.a||1,l=n.d||1,{update:c,markup:u}=e,h=__rest$7(e,["update","markup"]),d=Object.assign(Object.assign(Object.assign({},h),i[o]),{sx:s,sy:l,ox:n.e||0,oy:n.f||0,width:t*s,height:t*l});r.has(a)||r.add(a,Vector$2.create("pattern",{id:a,patternUnits:"userSpaceOnUse"},Vector$2.createVectors(u)).node);const f=r.get(a);"function"==typeof c&&c(f.childNodes[0],d);let p=d.ox%d.width;p<0&&(p+=d.width);let g=d.oy%d.height;g<0&&(g+=d.height),attr(f,{x:p,y:g,width:d.width,height:d.height})}));const o=(new XMLSerializer).serializeToString(r.root),a=`url(data:image/svg+xml;base64,${btoa(o)})`;this.elem.style.backgroundImage=a}getInstance(){return this.instance||(this.instance=new Grid$3),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(null==t)return[Object.assign(Object.assign({},Grid$3.presets.dot),e.args)];const n=Grid$3.registry.get(t);if(n){let t=e.args||[];return Array.isArray(t)||(t=[t]),Array.isArray(n)?n.map(((e,n)=>Object.assign(Object.assign({},e),t[n]))):[Object.assign(Object.assign({},n),t[0])]}return Grid$3.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}__decorate$h([Base$2.dispose()],GridManager.prototype,"dispose",null);class CoordManager extends Base$2{getClientMatrix(){return createSVGMatrix(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new Point(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return("number"==typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){return transformPoint(Point.create(e,t),this.graph.matrix())}localToClientPoint(e,t){return transformPoint(Point.create(e,t),this.getClientMatrix())}localToPagePoint(e,t){return("number"==typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,n,r){return transformRectangle(Rectangle.create(e,t,n,r),this.graph.matrix())}localToClientRect(e,t,n,r){return transformRectangle(Rectangle.create(e,t,n,r),this.getClientMatrix())}localToPageRect(e,t,n,r){return("number"==typeof e?this.localToGraphRect(e,t,n,r):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){return transformPoint(Point.create(e,t),this.graph.matrix().inverse())}clientToLocalPoint(e,t){return transformPoint(Point.create(e,t),this.getClientMatrix().inverse())}clientToGraphPoint(e,t){return transformPoint(Point.create(e,t),this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const n=Point.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(n)}graphToLocalRect(e,t,n,r){return transformRectangle(Rectangle.create(e,t,n,r),this.graph.matrix().inverse())}clientToLocalRect(e,t,n,r){return transformRectangle(Rectangle.create(e,t,n,r),this.getClientMatrix().inverse())}clientToGraphRect(e,t,n,r){return transformRectangle(Rectangle.create(e,t,n,r),this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,n,r){const i=Rectangle.create(e,t,n,r),o=this.getPageOffset();return i.x-=o.x,i.y-=o.y,this.graphToLocalRect(i)}}var __decorate$g=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},ModifierKey;class SnaplineManager extends Base$2{constructor(){super(...arguments),this.widget=this.graph.hook.createSnapline()}dispose(){this.widget.dispose()}}__decorate$g([Base$2.dispose()],SnaplineManager.prototype,"dispose",null),function(e){function t(e){const t=[],n=[];return Array.isArray(e)?t.push(...e):e.split("|").forEach((e=>{-1===e.indexOf("&")?t.push(e):n.push(...e.split("&"))})),{or:t,and:n}}e.parse=t,e.equals=function(e,n){if(null!=e&&null!=n){const r=t(e),i=t(n),o=r.or.sort(),a=i.or.sort(),s=r.and.sort(),l=i.and.sort(),c=(e,t)=>e.length===t.length&&(0===e.length||e.every(((e,n)=>e===t[n])));return c(o,a)&&c(s,l)}return null==e&&null==n},e.isMatch=function(e,n,r){if(null==n||Array.isArray(n)&&0===n.length)return!r||!0!==e.altKey&&!0!==e.ctrlKey&&!0!==e.metaKey&&!0!==e.shiftKey;const{or:i,and:o}=t(n),a=t=>{const n=`${t.toLowerCase()}Key`;return!0===e[n]};return i.some((e=>a(e)))&&o.every((e=>a(e)))}}(ModifierKey||(ModifierKey={}));var __decorate$f=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class ScrollerManager extends Base$2{get widgetOptions(){return this.options.scroller}get pannable(){return!!this.widgetOptions&&("object"==typeof this.widgetOptions.pannable?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable)}init(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}startListening(){let e=[];const t=this.widgetOptions.pannable;e="object"==typeof t?t.eventTypes||[]:["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.widgetOptions.pannable;e="object"==typeof t?t.eventTypes||[]:["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",(()=>this.updateClassName(!1))))}preparePanning({e:e}){this.widget&&(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",(()=>this.updateClassName(!1))))}allowPanning(e,t){return this.widget&&this.pannable&&ModifierKey.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}updateClassName(e){if(null==this.widget)return;const t=this.widget.container,n=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(addClass(t,n),t.dataset.panning=(!!e).toString()):removeClass(t,n)}enablePanning(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}lock(){this.widget&&this.widget.lock()}unlock(){this.widget&&this.widget.unlock()}update(){this.widget&&this.widget.update()}enableAutoResize(){this.widget&&this.widget.enableAutoResize()}disableAutoResize(){this.widget&&this.widget.disableAutoResize()}resize(e,t){this.widget&&this.widget.resize(e,t)}dispose(){this.widget&&this.widget.dispose(),this.stopListening()}}__decorate$f([Base$2.dispose()],ScrollerManager.prototype,"dispose",null);var __decorate$e=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$6=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};class ClipboardManager extends Base$2{get commonOptions(){const e=this.instanceOptions;return __rest$6(e,["enabled"])}get instanceOptions(){return this.options.clipboard}get cells(){return this.widget.cells}get disabled(){return!0!==this.instanceOptions.enabled}init(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}enable(){this.disabled&&(this.instanceOptions.enabled=!0)}disable(){this.disabled||(this.instanceOptions.enabled=!1)}copy(e,t={}){this.disabled||(this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}cut(e,t={}){this.disabled||(this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t)),this.graph.trigger("clipboard:changed",{cells:e}))}paste(e={},t=this.graph){return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}clean(e){this.disabled&&!e||(this.widget.clean(),this.graph.trigger("clipboard:changed",{cells:[]}))}isEmpty(){return this.widget.isEmpty()}dispose(){this.clean(!0)}}__decorate$e([Base$2.dispose()],ClipboardManager.prototype,"dispose",null);var __decorate$d=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class HighlightManager extends Base$2{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:n={}}){const r=this.resolveHighlighter(n);if(!r)return;const i=this.getHighlighterId(t,r);if(!this.highlights[i]){const n=r.highlighter;n.highlight(e,t,Object.assign({},r.args)),this.highlights[i]={cellView:e,magnet:t,highlighter:n,args:r.args}}}onCellUnhighlight({magnet:e,options:t={}}){const n=this.resolveHighlighter(t);if(!n)return;const r=this.getHighlighterId(e,n);this.unhighlight(r)}resolveHighlighter(e){const t=this.options;let n=e.highlighter;if(null==n){const r=e.type;n=r&&t.highlighting[r]||t.highlighting.default}if(null==n)return null;const r="string"==typeof n?{name:n}:n,i=r.name,o=Highlighter.registry.get(i);return null==o?Highlighter.registry.onNotFound(i):(Highlighter.check(i,o),{name:i,highlighter:o,args:r.args||{}})}getHighlighterId(e,t){return ensureId(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach((e=>this.unhighlight(e))),this.stopListening()}}__decorate$d([HighlightManager.dispose()],HighlightManager.prototype,"dispose",null);var __decorate$c=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class TransformManager extends Base$2{constructor(){super(...arguments),this.widgets=new Map}get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get isSelectionEnabled(){return!0===this.options.selecting.enabled}init(){this.startListening(),this.resize()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.dispose(),this.widgets.delete(e)}}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),createSVGMatrix(this.viewportMatrix)}setMatrix(e){const t=createSVGMatrix(e),n=matrixToTransformString(t);this.viewport.setAttribute("transform",n),this.viewportMatrix=t,this.viewportTransformString=n}resize(e,t){let n=void 0===e?this.options.width:e,r=void 0===t?this.options.height:t;this.options.width=n,this.options.height=r,"number"==typeof n&&(n=Math.round(n)),"number"==typeof r&&(r=Math.round(r)),this.container.style.width=null==n?"":`${n}px`,this.container.style.height=null==r?"":`${r}px`;const i=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},i)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return isNumber$2(e)||(e=this.container.clientWidth),isNumber$2(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return matrixToScale(this.getMatrix())}scale(e,t=e,n=0,r=0,i={}){if(e=this.clampScale(e),t=this.clampScale(t),n||r){const i=this.getTranslation(),o=i.tx-n*(e-1),a=i.ty-r*(t-1);o===i.tx&&a===i.ty||this.translate(o,a)}const o=this.getMatrix();return o.a=e,o.d=t,this.setMatrix(o),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:n,oy:r},i)),this}clampScale(e){const t=this.graph.options.scaling;return clamp$3(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let n=e,r=e;const i=this.getScale(),o=this.getComputedSize();let a=o.width/2,s=o.height/2;if(t.absolute||(n+=i.sx,r+=i.sy),t.scaleGrid&&(n=Math.round(n/t.scaleGrid)*t.scaleGrid,r=Math.round(r/t.scaleGrid)*t.scaleGrid),t.maxScale&&(n=Math.min(t.maxScale,n),r=Math.min(t.maxScale,r)),t.minScale&&(n=Math.max(t.minScale,n),r=Math.max(t.minScale,r)),t.center&&(a=t.center.x,s=t.center.y),n=this.clampScale(n),r=this.clampScale(r),a||s){const e=this.getTranslation(),o=a-(a-e.tx)*(n/i.sx),l=s-(s-e.ty)*(r/i.sy);o===e.tx&&l===e.ty||this.translate(o,l,{ui:t.ui})}return this.scale(n,r,0,0,{ui:t.ui}),this}getRotation(){return matrixToRotation(this.getMatrix())}rotate(e,t,n){if(null==t||null==n){const e=getBBox$2(this.graph.view.stage);t=e.width/2,n=e.height/2}const r=this.getMatrix().translate(t,n).rotate(e).translate(-t,-n);return this.setMatrix(r),this}getTranslation(){return matrixToTranslation(this.getMatrix())}translate(e,t,n={}){const r=this.getMatrix();r.e=e||0,r.f=t||0,this.setMatrix(r);const i=this.getTranslation();return this.options.x=i.tx,this.options.y=i.ty,this.graph.trigger("translate",Object.assign(Object.assign({},i),n)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,n,r){if("object"==typeof e){const i=e;e=i.gridWidth||1,t=i.gridHeight||1,n=i.padding||0,r=i}else e=e||1,t=t||1,n=n||0,null==r&&(r={});const i=normalizeSides(n),o=r.border||0,a=r.contentArea?Rectangle.create(r.contentArea):this.getContentArea(r);o>0&&a.inflate(o);const s=this.getScale(),l=this.getTranslation(),c=s.sx,u=s.sy;a.x*=c,a.y*=u,a.width*=c,a.height*=u;let h=Math.max(Math.ceil((a.width+a.x)/e),1)*e,d=Math.max(Math.ceil((a.height+a.y)/t),1)*t,f=0,p=0;("negative"===r.allowNewOrigin&&a.x<0||"positive"===r.allowNewOrigin&&a.x>=0||"any"===r.allowNewOrigin)&&(f=Math.ceil(-a.x/e)*e,f+=i.left,h+=f),("negative"===r.allowNewOrigin&&a.y<0||"positive"===r.allowNewOrigin&&a.y>=0||"any"===r.allowNewOrigin)&&(p=Math.ceil(-a.y/t)*t,p+=i.top,d+=p),h+=i.right,d+=i.bottom,h=Math.max(h,r.minWidth||0),d=Math.max(d,r.minHeight||0),h=Math.min(h,r.maxWidth||Number.MAX_SAFE_INTEGER),d=Math.min(d,r.maxHeight||Number.MAX_SAFE_INTEGER);const g=this.getComputedSize(),m=h!==g.width||d!==g.height;return(f!==l.tx||p!==l.ty)&&this.translate(f,p),m&&this.resize(h,d),new Rectangle(-f/c,-p/u,h/c,d/u)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let n,r;if(e.contentArea){const t=e.contentArea;n=this.graph.localToGraph(t),r=Point.create(t)}else n=this.getContentBBox(e),r=this.graph.graphToLocal(n);if(!n.width||!n.height)return;const i=normalizeSides(e.padding),o=e.minScale||0,a=e.maxScale||Number.MAX_SAFE_INTEGER,s=e.minScaleX||o,l=e.maxScaleX||a,c=e.minScaleY||o,u=e.maxScaleY||a;let h;if(e.viewportArea)h=e.viewportArea;else{const e=this.getComputedSize(),t=this.getTranslation();h={x:t.tx,y:t.ty,width:e.width,height:e.height}}h=Rectangle.create(h).moveAndExpand({x:i.left,y:i.top,width:-i.left-i.right,height:-i.top-i.bottom});const d=this.getScale();let f=h.width/n.width*d.sx,p=h.height/n.height*d.sy;!1!==e.preserveAspectRatio&&(f=p=Math.min(f,p));const g=e.scaleGrid;if(g&&(f=g*Math.floor(f/g),p=g*Math.floor(p/g)),f=clamp$3(f,s,l),p=clamp$3(p,c,u),this.scale(f,p),t){const e=this.options,t=h.x-r.x*f-e.x,n=h.y-r.y*p-e.y;this.translate(t,n)}}getContentArea(e={}){return e.useCellGeometry?this.model.getAllCellsBBox()||new Rectangle:getBBox$2(this.graph.view.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=Rectangle.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const n=Rectangle.create(e),r=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:r.options.x,y:r.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const i=n.getCenter();return this.centerPoint(i.x,i.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const n=this.getComputedSize(),r=this.getScale(),i=this.getTranslation(),o=n.width/2,a=n.height/2;t="number"==typeof t?t:a,e=o-(e="number"==typeof e?e:o)*r.sx,t=a-t*r.sy,i.tx===e&&i.ty===t||this.translate(e,t)}centerContent(e){const t=this.graph.getContentArea(e).getCenter();this.centerPoint(t.x,t.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,n){const r=this.getComputedSize();(t=normalizePercentage(t,Math.max(0,r.width)))<0&&(t=r.width+t),(n=normalizePercentage(n,Math.max(0,r.height)))<0&&(n=r.height+n);const i=this.getTranslation(),o=this.getScale(),a=t-e.x*o.sx,s=n-e.y*o.sy;i.tx===a&&i.ty===s||this.translate(a,s)}positionRect(e,t){const n=Rectangle.create(e);switch(t){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}positionCell(e,t){const n=e.getBBox();return this.positionRect(n,t)}positionContent(e,t){const n=this.graph.getContentArea(t);return this.positionRect(n,e)}dispose(){this.widgets.forEach((e=>e.dispose())),this.widgets.clear(),this.stopListening()}}__decorate$c([TransformManager.dispose()],TransformManager.prototype,"dispose",null);var __decorate$b=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class SelectionManager extends Base$2{constructor(){super(...arguments),this.movedMap=new WeakMap,this.unselectMap=new WeakMap}get widgetOptions(){return this.options.selecting}get rubberbandDisabled(){return!0!==this.widgetOptions.enabled||!0!==this.widgetOptions.rubberband}get disabled(){return!0!==this.widgetOptions.enabled}get length(){return this.widget.length}get cells(){return this.widget.cells}init(){this.widget=this.graph.hook.createSelection(),this.startListening()}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:e}){(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&ModifierKey.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}allowMultipleSelection(e){return this.isMultiple()&&ModifierKey.isMatch(e,this.widgetOptions.multipleSelectionModifiers)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e:e,cell:t}){const n=this.widgetOptions;let r=this.disabled;!r&&this.movedMap.has(t)&&(r=!1===n.selectCellOnMoved,r||(r=!1===n.selectNodeOnMoved&&t.isNode()),r||(r=!1===n.selectEdgeOnMoved&&t.isEdge())),r||(this.allowMultipleSelection(e)?this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t):this.reset(t)),this.movedMap.delete(t)}onBoxMouseDown({e:e,cell:t}){this.disabled||this.allowMultipleSelection(e)&&(this.unselect(t),this.unselectMap.set(t,!0))}isEmpty(){return this.length<=0}isSelected(e){return this.widget.isSelected(e)}getCells(e){return(Array.isArray(e)?e:[e]).map((e=>"string"==typeof e?this.graph.getCellById(e):e)).filter((e=>null!=e))}select(e,t={}){const n=this.getCells(e);return n.length&&(this.isMultiple()?this.widget.select(n,t):this.reset(n.slice(0,1),t)),this}unselect(e,t={}){return this.widget.unselect(this.getCells(e),t),this}reset(e,t={}){return this.widget.reset(e?this.getCells(e):[],t),this}clean(e={}){return this.widget.clean(e),this}enable(){return this.disabled&&(this.widgetOptions.enabled=!0),this}disable(){return this.disabled||(this.widgetOptions.enabled=!1),this}startRubberband(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}enableRubberband(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}isMultiple(){return!1!==this.widgetOptions.multiple}enableMultiple(){return this.widgetOptions.multiple=!0,this}disableMultiple(){return this.widgetOptions.multiple=!1,this}setModifiers(e){return this.widgetOptions.modifiers=e,this}setContent(e){return this.widget.setContent(e),this}setFilter(e){return this.widget.setFilter(e),this}dispose(){this.stopListening(),this.widget.dispose()}}__decorate$b([Base$2.dispose()],SelectionManager.prototype,"dispose",null);var __decorate$a=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$5=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Util$1;class HistoryManager extends Basecoat{constructor(e){super(),this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.handlers=[],this.graph=e.graph,this.model=e.graph.model,this.options=Util$1.getOptions(e),this.validator=new HistoryManager.Validator({history:this,cancelInvalid:this.options.cancelInvalid}),this.clean(),this.startListening()}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}undo(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}redo(e={}){if(!this.disabled){const t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}cancel(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}clean(e={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}validate(e,...t){return this.validator.validate(e,...t),this}dispose(){this.validator.dispose(),this.clean(),this.stopListening()}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach(((e,t)=>{this.handlers[t]=this.addCommand.bind(this,e),this.model.on(e,this.handlers[t])})),this.validator.on("invalid",(e=>this.trigger("invalid",e)))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach(((e,t)=>{this.model.off(e,this.handlers[t])})),this.handlers.length=0),this.validator.off("invalid")}createCommand(e){return{batch:!!e&&e.batch,data:{}}}revertCommand(e,t){this.freezed=!0;const n=Array.isArray(e)?Util$1.sortBatchCommands(e):[e];for(let r=n.length-1;r>=0;r-=1){const e=n[r],i=Object.assign(Object.assign({},t),pick$2(e.options,this.options.revertOptionsList||[]));this.executeCommand(e,!0,i)}this.freezed=!1}applyCommand(e,t){this.freezed=!0;const n=Array.isArray(e)?Util$1.sortBatchCommands(e):[e];for(let r=0;r<n.length;r+=1){const e=n[r],i=Object.assign(Object.assign({},t),pick$2(e.options,this.options.applyOptionsList||[]));this.executeCommand(e,!1,i)}this.freezed=!1}executeCommand(e,t,n){const r=this.model,i=r.getCell(e.data.id),o=e.event;if(Util$1.isAddEvent(o)&&t||Util$1.isRemoveEvent(o)&&!t)i&&i.remove(n);else if(Util$1.isAddEvent(o)&&!t||Util$1.isRemoveEvent(o)&&t){const t=e.data;t.node?r.addNode(t.props,n):t.edge&&r.addEdge(t.props,n)}else if(Util$1.isChangeEvent(o)){const r=e.data,o=r.key;if(o&&i){const e=t?r.prev[o]:r.next[o];i.prop(o,e,n)}}else{const r=this.options.executeCommand;r&&call(r,this,e,t,n)}}addCommand(e,t){if(this.freezed||this.disabled)return;const n=t,r=n.options||{};if(r.dryrun)return;if(Util$1.isAddEvent(e)&&this.options.ignoreAdd||Util$1.isRemoveEvent(e)&&this.options.ignoreRemove||Util$1.isChangeEvent(e)&&this.options.ignoreChange)return;const i=this.options.beforeAddCommand;if(null!=i&&!1===call(i,this,e,t))return;"cell:change:*"===e&&(e=`cell:change:${n.key}`);const o=n.cell,a=Model.isModel(o);let s;if(this.batchCommands){s=this.batchCommands[Math.max(this.lastBatchIndex,0)];const t=a&&!s.modelChange||s.data.id!==o.id,n=s.event!==e;if(this.lastBatchIndex>=0&&(t||n)){const t=this.batchCommands.findIndex((t=>(a&&t.modelChange||t.data.id===o.id)&&t.event===e));t<0||Util$1.isAddEvent(e)||Util$1.isRemoveEvent(e)?s=this.createCommand({batch:!0}):(s=this.batchCommands[t],this.batchCommands.splice(t,1)),this.batchCommands.push(s),this.lastBatchIndex=this.batchCommands.length-1}}else s=this.createCommand({batch:!1});if(Util$1.isAddEvent(e)||Util$1.isRemoveEvent(e)){const t=s.data;return s.event=e,s.options=r,t.id=o.id,t.props=cloneDeep(o.toJSON()),o.isEdge()?t.edge=!0:o.isNode()&&(t.node=!0),this.push(s,r)}if(Util$1.isChangeEvent(e)){const n=t.key,i=s.data;return s.batch&&s.event||(s.event=e,s.options=r,i.key=n,null==i.prev&&(i.prev={}),i.prev[n]=clone$a(o.previous(n)),a?s.modelChange=!0:i.id=o.id),null==i.next&&(i.next={}),i.next[n]=clone$a(o.prop(n)),this.push(s,r)}const l=this.options.afterAddCommand;l&&call(l,this,e,t,s),this.push(s,r)}initBatchCommand(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.consolidateCommands(),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(e){let t=e.slice();const n=[];for(;t.length>0;){const e=t.shift(),r=e.event,i=e.data.id;if(null!=r&&(null!=i||e.modelChange)){if(Util$1.isAddEvent(r)){const e=t.findIndex((e=>Util$1.isRemoveEvent(e.event)&&e.data.id===i));if(e>=0){t=t.filter(((t,n)=>e<n||t.data.id!==i));continue}}else if(Util$1.isRemoveEvent(r)){const e=t.findIndex((e=>Util$1.isAddEvent(e.event)&&e.data.id===i));if(e>=0){t.splice(e,1);continue}}else if(Util$1.isChangeEvent(r)){const t=e.data;if(isEqual$2(t.prev,t.next))continue}n.push(e)}}return n}notify(e,t,n){const r=null==t?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:r,options:n}),this.emit("change",{cmds:r,options:n})}push(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.consolidateCommands(),this.notify("add",e,t))}consolidateCommands(){var e;const t=this.undoStack[this.undoStack.length-1],n=this.undoStack[this.undoStack.length-2];if(!Array.isArray(t))return;const r=new Set(t.map((e=>e.event)));if(2!==r.size||!r.has("cell:change:parent")||!r.has("cell:change:children"))return;if(!t.every((e=>{var t;return e.batch&&(null===(t=e.options)||void 0===t?void 0:t.ui)})))return;if(!Array.isArray(n)||1!==n.length)return;const i=n[0];"cell:change:position"===i.event&&(null===(e=i.options)||void 0===e?void 0:e.ui)&&(n.push(...t),this.undoStack.pop())}}__decorate$a([Basecoat.dispose()],HistoryManager.prototype,"dispose",null),function(e){class t extends Basecoat{constructor(e){super(),this.map={},this.command=e.history,this.cancelInvalid=!1!==e.cancelInvalid,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:e}){return Array.isArray(e)?e.every((e=>this.isValidCommand(e))):this.isValidCommand(e)}isValidCommand(e){if(e.options&&!1===e.options.validation)return!0;const t=e.event&&this.map[e.event]||[];let n=null;return t.forEach((t=>{let r=0;const i=o=>{const a=t[r];r+=1;try{if(!a)return void(n=o);a(o,e,i)}catch(s){i(s)}};i(n)})),!n||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:n}),!1)}validate(e,...t){const n=Array.isArray(e)?e:e.split(/\s+/);return t.forEach((e=>{if("function"!=typeof e)throw new Error(`${n.join(" ")} requires callback functions.`)})),n.forEach((e=>{null==this.map[e]&&(this.map[e]=[]),this.map[e].push(t)})),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}__decorate$a([Basecoat.dispose()],t.prototype,"dispose",null),e.Validator=t}(HistoryManager||(HistoryManager={})),function(e){e.isAddEvent=function(e){return"cell:added"===e},e.isRemoveEvent=function(e){return"cell:removed"===e},e.isChangeEvent=function(e){return null!=e&&e.startsWith("cell:change:")},e.getOptions=function(t){const n=__rest$5(t,["graph"]),r=["cell:added","cell:removed","cell:change:*"],i=["batch:start","batch:stop"],o=t.eventNames?t.eventNames.filter((t=>!(e.isChangeEvent(t)||r.includes(t)||i.includes(t)))):r;return Object.assign(Object.assign({},n),{eventNames:o,applyOptionsList:t.applyOptionsList||["propertyPath"],revertOptionsList:t.revertOptionsList||["propertyPath"]})},e.sortBatchCommands=function(t){const n=[];for(let r=0,i=t.length;r<i;r+=1){const i=t[r];let o=null;if(e.isAddEvent(i.event)){const e=i.data.id;for(let n=0;n<r;n+=1)if(t[n].data.id===e){o=n;break}}null!==o?n.splice(o,0,i):n.push(i)}return n}}(Util$1||(Util$1={}));var __decorate$9=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class MiniMapManager extends Base$2{get widgetOptions(){return this.options.minimap}init(){this.widget=this.graph.hook.createMiniMap()}dispose(){this.widget&&this.widget.dispose()}}__decorate$9([Base$2.dispose()],MiniMapManager.prototype,"dispose",null);var mousetrap={exports:{}},module2;module2=mousetrap,function(e,t,n){if(e){for(var r,i={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},o={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},a={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},s={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},l=1;l<20;++l)i[111+l]="f"+l;for(l=0;l<=9;++l)i[l+96]=l.toString();g.prototype.bind=function(e,t,n){var r=this;return e=e instanceof Array?e:[e],r._bindMultiple.call(r,e,t,n),r},g.prototype.unbind=function(e,t){return this.bind.call(this,e,(function(){}),t)},g.prototype.trigger=function(e,t){var n=this;return n._directMap[e+":"+t]&&n._directMap[e+":"+t]({},e),n},g.prototype.reset=function(){var e=this;return e._callbacks={},e._directMap={},e},g.prototype.stopCallback=function(e,t){if((" "+t.className+" ").indexOf(" mousetrap ")>-1)return!1;if(p(t,this.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var n=e.composedPath()[0];n!==e.target&&(t=n)}return"INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable},g.prototype.handleKey=function(){var e=this;return e._handleKey.apply(e,arguments)},g.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);r=null},g.init=function(){var e=g(t);for(var n in e)"_"!==n.charAt(0)&&(g[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n))},g.init(),e.Mousetrap=g,module2.exports&&(module2.exports=g)}function c(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function u(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return i[e.which]?i[e.which]:o[e.which]?o[e.which]:String.fromCharCode(e.which).toLowerCase()}function h(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function d(e,t,n){return n||(n=function(){if(!r)for(var e in r={},i)e>95&&e<112||i.hasOwnProperty(e)&&(r[i[e]]=e);return r}()[e]?"keydown":"keypress"),"keypress"==n&&t.length&&(n="keydown"),n}function f(e,t){var n,r,i,o=[];for(n=function(e){return"+"===e?["+"]:(e=e.replace(/\+{2}/g,"+plus")).split("+")}(e),i=0;i<n.length;++i)r=n[i],s[r]&&(r=s[r]),t&&"keypress"!=t&&a[r]&&(r=a[r],o.push("shift")),h(r)&&o.push(r);return{key:r,modifiers:o,action:t=d(r,o,t)}}function p(e,n){return null!==e&&e!==t&&(e===n||p(e.parentNode,n))}function g(e){var n=this;if(e=e||t,!(n instanceof g))return new g(e);n.target=e,n._callbacks={},n._directMap={};var r,i={},o=!1,a=!1,s=!1;function l(e){e=e||{};var t,n=!1;for(t in i)e[t]?n=!0:i[t]=0;n||(s=!1)}function d(e,t,r,o,a,s){var l,c,u,d,f=[],p=r.type;if(!n._callbacks[e])return[];for("keyup"==p&&h(e)&&(t=[e]),l=0;l<n._callbacks[e].length;++l)if(c=n._callbacks[e][l],(o||!c.seq||i[c.seq]==c.level)&&p==c.action&&("keypress"==p&&!r.metaKey&&!r.ctrlKey||(u=t,d=c.modifiers,u.sort().join(",")===d.sort().join(",")))){var g=!o&&c.combo==a,m=o&&c.seq==o&&c.level==s;(g||m)&&n._callbacks[e].splice(l,1),f.push(c)}return f}function p(e,t,r,i){n.stopCallback(t,t.target||t.srcElement,r,i)||!1===e(t,r)&&(function(e){e.preventDefault?e.preventDefault():e.returnValue=!1}(t),function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}(t))}function m(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=u(e);t&&("keyup"!=e.type||o!==t?n.handleKey(t,function(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}(e),e):o=!1)}function v(e,t,n,a){function c(t){return function(){s=t,++i[e],clearTimeout(r),r=setTimeout(l,1e3)}}function h(t){p(n,t,e),"keyup"!==a&&(o=u(t)),setTimeout(l,10)}i[e]=0;for(var d=0;d<t.length;++d){var g=d+1===t.length?h:c(a||f(t[d+1]).action);y(t[d],g,a,e,d)}}function y(e,t,r,i,o){n._directMap[e+":"+r]=t;var a,s=(e=e.replace(/\s+/g," ")).split(" ");s.length>1?v(e,s,t,r):(a=f(e,r),n._callbacks[a.key]=n._callbacks[a.key]||[],d(a.key,a.modifiers,{type:a.action},i,e,o),n._callbacks[a.key][i?"unshift":"push"]({callback:t,modifiers:a.modifiers,action:a.action,seq:i,level:o,combo:e}))}n._handleKey=function(e,t,n){var r,i=d(e,t,n),o={},c=0,u=!1;for(r=0;r<i.length;++r)i[r].seq&&(c=Math.max(c,i[r].level));for(r=0;r<i.length;++r)if(i[r].seq){if(i[r].level!=c)continue;u=!0,o[i[r].seq]=1,p(i[r].callback,n,i[r].combo,i[r].seq)}else u||p(i[r].callback,n,i[r].combo);var f="keypress"==n.type&&a;n.type!=s||h(e)||f||l(o),a=u&&"keydown"==n.type},n._bindMultiple=function(e,t,n){for(var r=0;r<e.length;++r)y(e[r],t,n)},c(e,"keypress",m),c(e,"keydown",m),c(e,"keyup",m)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null);const Mousetrap=mousetrap.exports;var __decorate$8=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class Keyboard extends Disposable{constructor(e){super(),this.options=e;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,e.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=Keyboard.createMousetrap(this)}get graph(){return this.options.graph}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(e,t,n){this.mousetrap.bind(this.getKeys(e),t,n)}off(e,t){this.mousetrap.unbind(this.getKeys(e),t)}focus(e){if(this.isInputEvent(e.e))return;this.target.focus({preventScroll:!0})}getKeys(e){return(Array.isArray(e)?e:[e]).map((e=>this.formatkey(e)))}formatkey(e){const t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),n=this.options.format;return n?call(n,this.graph,t):t}isGraphEvent(e){const t=e.srcElement||e.target,n=e.currentTarget;return!!t&&(t===this.target||n===this.target||t===document.body||contains$1(this.container,t))}isInputEvent(e){var t;const n=e.target,r=null===(t=null==n?void 0:n.tagName)||void 0===t?void 0:t.toLowerCase();return["input","textarea"].includes(r)}isEnabledForEvent(e){const t=!this.disabled&&this.isGraphEvent(e),n=this.isInputEvent(e);if(t){const t=e.keyCode||e.which;if(n&&(8===t||46===t))return!1;if(this.options.guard)return call(this.options.guard,this.graph,e)}return t}dispose(){this.mousetrap.reset()}}__decorate$8([Disposable.dispose()],Keyboard.prototype,"dispose",null),(Keyboard||(Keyboard={})).createMousetrap=function(e){const t=new Mousetrap(e.target),n=t.stopCallback;return t.stopCallback=(r,i,o)=>!e.isEnabledForEvent(r)||!!n&&n.call(t,r,i,o),t};var __decorate$7=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class MouseWheel extends Disposable{constructor(e){super(),this.options=e,this.cumulatedFactor=1;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,this.target=this.options.global?document:this.container,this.mousewheelHandle=new MouseWheelHandle(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.options.enabled&&this.enable(!0)}get graph(){return this.options.graph}get disabled(){return!0!==this.options.enabled}enable(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=e.originalEvent||e,n=this.options.guard;return(null==n||n.call(this.graph,t))&&ModifierKey.isMatch(t,this.options.modifiers)}onMouseWheel(e){const t=e.originalEvent||e,n=this.options.guard;if((null==n||n.call(this.graph,t))&&ModifierKey.isMatch(t,this.options.modifiers)){const t=this.options.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx);e.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*t*20)/20/this.currentScale:this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:this.cumulatedFactor=Math.round(this.currentScale*(1/t)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const n=this.graph.scroller.widget,r=this.currentScale;let i=this.graph.transform.clampScale(r*this.cumulatedFactor);if(i=clamp$3(i,this.options.minScale||Number.MIN_SAFE_INTEGER,this.options.maxScale||Number.MAX_SAFE_INTEGER),i!==r)if(n)if(this.options.zoomAtMousePosition){const e=this.graph.coord.clientToLocalPoint(this.startPos);n.zoom(i,{absolute:!0,center:e.clone()})}else n.zoom(i,{absolute:!0});else if(this.options.zoomAtMousePosition){const e=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(i,{absolute:!0,center:e.clone(),ui:!0})}else this.graph.transform.zoom(i,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}__decorate$7([Disposable.dispose()],MouseWheel.prototype,"dispose",null);var __decorate$6=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class PrintManager extends Base$2{show(e={}){const t=Object.assign(Object.assign({},PrintManager.defaultOptions),e),n=this.createPrintPages(t);t.ready(n,(e=>this.showPrintWindow(e,t)),{sheetSize:this.getSheetSize(t)})}get className(){return this.view.prefixClassName("graph-print")}showPrintWindow(e,t){if(e){const n=JQuery(document.body),r=JQuery(this.view.container),i=this.view.prefixClassName("graph-printing");n.addClass(i);const o=r.children().detach();e.forEach((e=>{e.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo(n)}));let a=!1;const s=()=>{a||(a=!0,n.removeClass(i),e.forEach((e=>e.remove())),r.append(o),JQuery(`#${this.styleSheetId}`).remove(),this.graph.trigger("after:print",t),JQuery(window).off("afterprint",s))};JQuery(window).one("afterprint",s),setTimeout(s,200),window.print()}}createPrintPage(e,t){this.graph.trigger("before:print",t);const n=JQuery("<div/>").addClass(this.className),r=JQuery("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&n.addClass(`${this.className}-size-${t.size}`);const i=Vector$2.create(this.view.svg).clone(),o=i.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`);r.append(i.node);const a=this.getSheetSize(t),s=this.graph.transform.getGraphArea(),l=this.graph.transform.getScale(),c=this.graph.translate(),u=createSVGMatrix().translate(c.tx/l.sx,c.ty/l.sy),h=this.getPageInfo(s,e,a),d=h.scale,f=h.bbox;return r.css({left:0,top:0}),i.attr({width:f.width*d,height:f.height*d,style:"position:relative",viewBox:[f.x,f.y,f.width,f.height].join(" ")}),o.attr("transform",matrixToTransformString(u)),n.append(r),n.addClass(`${this.className}-preview`),{$page:n,sheetSize:a}}createPrintPages(e){let t;const n=this.getPrintArea(e),r=[];if(e.page){const i=this.getPageSize(n,e.page);this.getPageAreas(n,i).forEach((n=>{t=this.createPrintPage(n,e),r.push(t.$page)}))}else t=this.createPrintPage(n,e),r.push(t.$page);if(t){const n={width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight};this.updatePrintStyle(n,e)}return r}get styleSheetId(){return this.view.prefixClassName("graph-print-style")}updatePrintStyle(e,t){const n=Object.keys(e).reduce(((t,n)=>`${t} ${n}:${e[n]};`),""),r=normalizeSides(t.margin),i=t.marginUnit||"",o=t.sheetUnit||"",a=`\n      @media print {\n        .${this.className}.${this.className}-ready {\n          ${n}\n        }\n\n        @page {\n          margin:\n          ${[r.top+i,r.right+i,r.bottom+i,r.left+i].join(" ")};\n          size: ${t.sheet.width+o} ${t.sheet.height+o};\n\n        .${this.className}.${this.className}-preview {\n          ${n}\n        }\n      }`,s=this.styleSheetId,l=JQuery(`#${s}`);l.length?l.html(a):JQuery("head").append(`'<style type="text/css" id="${s}">${a}</style>'`)}getPrintArea(e){let t=e.area;if(!t){const n=normalizeSides(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom})}return t}getPageSize(e,t){if("object"==typeof t){const n=t,r={width:n.width,height:n.height};return null==r.width&&(r.width=Math.ceil(e.width/(n.columns||1))),null==r.height&&(r.height=Math.ceil(e.height/(n.rows||1))),r}return{width:e.width,height:e.height}}getPageAreas(e,t){const n=[],r=t.width,i=t.height;for(let o=0,a=0;o<e.height&&a<200;o+=i,a+=1)for(let t=0,s=0;t<e.width&&s<200;t+=r,s+=1)n.push(new Rectangle(e.x+t,e.y+o,r,i));return n}getSheetSize(e){const t=e.sheet,n=normalizeSides(e.margin),r=e.marginUnit||"",i=e.sheetUnit||"",o=`calc(${t.width}${i} - ${n.left+n.right}${r})`,a=`calc(${t.height}${i} - ${n.top+n.bottom}${r})`,s=Unit.measure(o,a);return{cssWidth:o,cssHeight:a,width:s.width,height:s.height}}getPageInfo(e,t,n){const r=new Rectangle(t.x-e.x,t.y-e.y,t.width,t.height),i=r.width/r.height,o=n.width/n.height;return{bbox:r,scale:o<i?n.width/r.width:n.height/r.height,fitHorizontal:o<i}}dispose(){}}__decorate$6([Base$2.dispose()],PrintManager.prototype,"dispose",null),(PrintManager||(PrintManager={})).defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:(e,t)=>t(e)};class FormatManager extends Base$2{toSVG(e,t={}){this.graph.trigger("before:export",t);const n=this.view.svg,r=Vector$2.create(n).clone();let i=r.node;const o=r.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),a=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),s=t.preserveDimensions;if(s){const e="boolean"==typeof s?a:s;r.attr({width:e.width,height:e.height})}if(r.removeAttribute("style").attr("viewBox",[a.x,a.y,a.width,a.height].join(" ")),o.removeAttribute("transform"),!1!==t.copyStyles){const e=n.ownerDocument,t=Array.from(n.querySelectorAll("*")),r=Array.from(i.querySelectorAll("*")),o=e.styleSheets.length,a=[];for(let n=o-1;n>=0;n-=1)a[n]=e.styleSheets[n],e.styleSheets[n].disabled=!0;const s={};t.forEach(((e,t)=>{const n=window.getComputedStyle(e,null),r={};Object.keys(n).forEach((e=>{r[e]=n.getPropertyValue(e)})),s[t]=r})),o!==e.styleSheets.length&&a.forEach(((t,n)=>{e.styleSheets[n]=t}));for(let n=0;n<o;n+=1)e.styleSheets[n].disabled=!1;const l={};t.forEach(((e,t)=>{const n=window.getComputedStyle(e,null),r=s[t],i={};Object.keys(n).forEach((e=>{isNumeric(e)||n.getPropertyValue(e)===r[e]||(i[e]=n.getPropertyValue(e))})),l[t]=i})),r.forEach(((e,t)=>{JQuery(e).css(l[t])}))}const l=t.stylesheet;if("string"==typeof l){const e=n.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(l);r.prepend(Vector$2.create("style",{type:"text/css"},[e]))}const c=()=>{const n=t.beforeSerialize;if("function"==typeof n){const e=call(n,this.graph,i);e instanceof SVGSVGElement&&(i=e)}const r=(new XMLSerializer).serializeToString(i).replace(/&nbsp;/g,"");this.graph.trigger("after:export",t),e(r)};if(t.serializeImages){const e=r.find("image").map((e=>new Promise((t=>{const n=e.attr("xlink:href")||e.attr("href");DataUri.imageToDataUri(n,((n,r)=>{!n&&r&&e.attr("xlink:href",r),t()}))}))));Promise.all(e).then(c)}else c()}toDataURL(e,t){let n=t.viewBox||this.graph.getContentBBox();const r=normalizeSides(t.padding);t.width&&t.height&&(r.left+r.right>=t.width&&(r.left=r.right=0),r.top+r.bottom>=t.height&&(r.top=r.bottom=0));const i=new Rectangle(-r.left,-r.top,r.left+r.right,r.top+r.bottom);if(t.width&&t.height){const e=n.width+r.left+r.right,o=n.height+r.top+r.bottom;i.scale(e/t.width,o/t.height)}n=Rectangle.create(n).moveAndExpand(i);const o="number"==typeof t.width&&"number"==typeof t.height?{width:t.width,height:t.height}:n;let a=t.ratio?parseFloat(t.ratio):1;Number.isFinite(a)&&0!==a||(a=1);const s={width:Math.max(Math.round(o.width*a),1),height:Math.max(Math.round(o.height*a),1)};{const e=document.createElement("canvas"),t=e.getContext("2d");e.width=s.width,e.height=s.height;const n=s.width-1,r=s.height-1;t.fillStyle="rgb(1,1,1)",t.fillRect(n,r,1,1);const i=t.getImageData(n,r,1,1).data;if(1!==i[0]||1!==i[1]||1!==i[2])throw new Error("size exceeded")}const l=new Image;l.onload=()=>{const n=document.createElement("canvas");n.width=s.width,n.height=s.height;const r=n.getContext("2d");r.fillStyle=t.backgroundColor||"white",r.fillRect(0,0,s.width,s.height);try{r.drawImage(l,0,0,s.width,s.height);const i=n.toDataURL(t.type,t.quality);e(i)}catch(i){}},this.toSVG((e=>{l.src=`data:image/svg+xml,${encodeURIComponent(e)}`}),Object.assign(Object.assign({},t),{viewBox:n,serializeImages:!0,preserveDimensions:Object.assign({},s)}))}toPNG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}toJPEG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}class KnobManager extends Base$2{constructor(){super(...arguments),this.widgets=new Map}get isSelectionEnabled(){return!0===this.options.selecting.enabled}init(){this.startListening()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.forEach((e=>e.dispose())),this.widgets.delete(e)}}}var __decorate$5=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class PanningManager extends Base$2{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new MouseWheelHandle(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;e&&(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e:e}){(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&ModifierKey.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),n=t.clientX-this.clientX,r=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;const i=this.graph.transform.getTranslation(),o=i.tx+n,a=i.ty+r;this.graph.transform.translate(o,a,{ui:!0})}stopPanning(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(addClass(e,t),removeClass(e,n)):(removeClass(e,t),addClass(e,n)):(removeClass(e,t),removeClass(e,n))}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,n){e.ctrlKey||this.graph.translateBy(-t,-n)}autoPanning(e,t){const n=10,r=this.graph.getGraphArea();let i=0,o=0;e<=r.left+n&&(i=-10),t<=r.top+n&&(o=-10),e>=r.right-n&&(i=n),t>=r.bottom-n&&(o=n),0===i&&0===o||this.graph.translateBy(-i,-o)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}__decorate$5([Base$2.dispose()],PanningManager.prototype,"dispose",null);var __decorate$4=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};class SizeManager extends Base$2{hasScroller(){return null!=this.graph.scroller.widget}getContainer(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}init(){const e=this.options.autoResize;if(e){const t="boolean"==typeof e?this.getContainer():e;SizeSensor.bind(t,(()=>{const e=this.getContainer(),t=e.offsetWidth,n=e.offsetHeight;this.resize(t,n)}))}}resize(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}resizeGraph(e,t){this.graph.transform.resize(e,t)}resizeScroller(e,t){this.graph.scroller.resize(e,t)}resizePage(e,t){const n=this.graph.scroller.widget;n&&n.updatePageSize(e,t)}dispose(){SizeSensor.clear(this.getContainer())}}__decorate$4([Base$2.dispose()],SizeManager.prototype,"dispose",null);var __decorate$3=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},__rest$4=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Decorator,Decorator2;Decorator2=Decorator||(Decorator={}),Decorator2.hook=function(e,t){return(n,r,i)=>{const o=i.value,a=t||r;i.value=function(...t){const n=this.options[a];if(null!=n){this.getNativeValue=o.bind(this,...t);const r=call(n,this.graph,...t);if(this.getNativeValue=null,null!=r||!0===e&&null===r)return r}return o.call(this,...t)}}},Decorator2.after=function(e){return(t,n,r)=>{const i=r.value,o=e||n;r.value=function(...e){let t=i.call(this,...e);const n=this.options[o];return null!=n&&(t=call(n,this.graph,...e)&&t),t}}};class Hook extends Base$2{createModel(){if(this.options.model)return this.options.model;const e=new Model;return e.graph=this.graph,e}createView(){return new GraphView(this.graph)}createRenderer(){return new Renderer(this.graph)}createDefsManager(){return new DefsManager(this.graph)}createGridManager(){return new GridManager(this.graph)}createCoordManager(){return new CoordManager(this.graph)}createKnobManager(){return new KnobManager(this.graph)}createTransform(e,t){const n=this.getTransformOptions(e);return n.resizable||n.rotatable?new Transform(Object.assign(Object.assign({node:e,graph:this.graph},n),t)):(n.clearAll&&Transform.removeInstances(this.graph),null)}createKnob(e,t){const n=Options.parseOptionGroup(this.graph,e,this.options.knob),r=Object.assign(Object.assign({},n),t);r.clearAll&&Knob.removeInstances(this.graph),r.clearAll=!1;const i=e.prop("knob"),o=[];return(Array.isArray(i)?i:[i]).forEach(((t,i)=>{t&&!1!==t.enabled&&("function"==typeof t.enabled&&!1===t.enabled.call(this.graph,e)||n.enabled&&o.push(new Knob(Object.assign({node:e,index:i,graph:this.graph},r))))})),o}getTransformOptions(e){const t=Options.parseOptionGroup(this.graph,e,this.options.resizing),n=Options.parseOptionGroup(this.graph,e,this.options.rotating),r=Options.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},r),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:null!=t.restrict?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:n.enabled,rotateGrid:n.grid})}createTransformManager(){return new TransformManager(this.graph)}createHighlightManager(){return new HighlightManager(this.graph)}createBackgroundManager(){return new BackgroundManager(this.graph)}createClipboard(){return new Clipboard}createClipboardManager(){return new ClipboardManager(this.graph)}createSnapline(){return new Snapline(Object.assign({graph:this.graph},this.options.snapline))}createSnaplineManager(){return new SnaplineManager(this.graph)}createSelection(){return new Selection(Object.assign({graph:this.graph},this.options.selecting))}createSelectionManager(){return new SelectionManager(this.graph)}allowRubberband(e){return!0}createHistoryManager(){return new HistoryManager(Object.assign({graph:this.graph},this.options.history))}createScroller(){return this.options.scroller.enabled?new Scroller(Object.assign({graph:this.graph},this.options.scroller)):null}createScrollerManager(){return new ScrollerManager(this.graph)}allowPanning(e){return!0}createMiniMap(){const e=this.options.minimap,{enabled:t}=e,n=__rest$4(e,["enabled"]);return t?new MiniMap$1(Object.assign({graph:this.graph},n)):null}createMiniMapManager(){return new MiniMapManager(this.graph)}createKeyboard(){return new Keyboard(Object.assign({graph:this.graph},this.options.keyboard))}createMouseWheel(){return new MouseWheel(Object.assign({graph:this.graph},this.options.mousewheel))}createPrintManager(){return new PrintManager(this.graph)}createFormatManager(){return new FormatManager(this.graph)}createPanningManager(){return new PanningManager(this.graph)}createSizeManager(){return new SizeManager(this.graph)}allowConnectToBlank(e){const t=this.options.connecting,n=null!=t.allowBlank?t.allowBlank:t.dangling;if("function"!=typeof n)return!!n;const r=this.graph.findViewByCell(e),i=e.getSourceCell(),o=e.getTargetCell(),a=this.graph.findViewByCell(i),s=this.graph.findViewByCell(o);return call(n,this.graph,{edge:e,edgeView:r,sourceCell:i,targetCell:o,sourceView:a,targetView:s,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:r.sourceMagnet,targetMagnet:r.targetMagnet})}validateEdge(e,t,n){if(!this.allowConnectToBlank(e)){const t=e.getSourceCellId(),n=e.getTargetCellId();if(!t||!n)return!1}const r=this.options.connecting.validateEdge;return!r||call(r,this.graph,{edge:e,type:t,previous:n})}validateMagnet(e,t,n){if("passive"!==t.getAttribute("magnet")){const r=this.options.connecting.validateMagnet;return!r||call(r,this.graph,{e:n,magnet:t,view:e,cell:e.cell})}return!1}getDefaultEdge(e,t){let n;const r=this.options.connecting.createEdge;return r&&(n=call(r,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),null==n&&(n=new Edge$3),n}validateConnection(e,t,n,r,i,o,a){const s=this.options.connecting,l=s.allowLoop,c=s.allowNode,u=s.allowEdge,h=s.allowPort,d=null!=s.allowMulti?s.allowMulti:s.multi,f=s.validateConnection,p=o?o.cell:null,g="target"===i?n:e,m="target"===i?r:t;let v=!0;const y=s=>{const l="source"===i?a?a.port:null:p?p.getSourcePortId():null,c="target"===i?a?a.port:null:p?p.getTargetPortId():null;return call(s,this.graph,{edge:p,edgeView:o,sourceView:e,targetView:n,sourcePort:l,targetPort:c,sourceMagnet:t,targetMagnet:r,sourceCell:e?e.cell:null,targetCell:n?n.cell:null,type:i})};if(null!=l&&("boolean"==typeof l?l||e!==n||(v=!1):v=y(l)),v&&null!=h&&("boolean"==typeof h?!h&&m&&(v=!1):v=y(h)),v&&null!=u&&("boolean"==typeof u?!u&&EdgeView.isEdgeView(g)&&(v=!1):v=y(u)),v&&null!=c&&null==m&&("boolean"==typeof c?!c&&NodeView.isNodeView(g)&&(v=!1):v=y(c)),v&&null!=d&&o){const e=o.cell,t="source"===i?a:e.getSource(),n="target"===i?a:e.getTarget(),r=a?this.graph.getCellById(a.cell):null;if(t&&n&&t.cell&&n.cell&&r)if("function"==typeof d)v=y(d);else{const e=this.model.getConnectedEdges(r,{outgoing:"source"===i,incoming:"target"===i});if(e.length)if("withPort"===d){e.some((e=>{const r=e.getSource(),i=e.getTarget();return r&&i&&r.cell===t.cell&&i.cell===n.cell&&null!=r.port&&r.port===t.port&&null!=i.port&&i.port===n.port}))&&(v=!1)}else if(!d){e.some((e=>{const r=e.getSource(),i=e.getTarget();return r&&i&&r.cell===t.cell&&i.cell===n.cell}))&&(v=!1)}}}return v&&null!=f&&(v=y(f)),v}getRestrictArea(e){const t=this.options.translating.restrict,n="function"==typeof t?call(t,this.graph,e):t;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}onViewUpdated(e,t,n){t&Renderer.FLAG_INSERT||n.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,n)}onViewPostponed(e,t,n){return this.graph.renderer.forcePostponedViewUpdate(e,t)}getCellView(e){return null}createCellView(e){const t={graph:this.graph},n=this.getCellView(e);if(n)return new n(e,t);const r=e.view;if(null!=r&&"string"==typeof r){const n=CellView.registry.get(r);return n?new n(e,t):CellView.registry.onNotFound(r)}return e.isNode()?new NodeView(e,t):e.isEdge()?new EdgeView(e,t):null}getHTMLComponent(e){let t=e.getHTML();return"string"==typeof t&&(t=HTML.componentRegistry.get(t)||t),isPlainObject$2(t)&&(t=t.render),"function"==typeof t?call(t,this.graph,e):t}shouldUpdateHTMLComponent(e){let t=e.getHTML();if("string"==typeof t&&(t=HTML.componentRegistry.get(t)||t),isPlainObject$2(t)){const n=t.shouldComponentUpdate;return"function"==typeof n?call(n,this.graph,e):!!n}return!1}onEdgeLabelRendered(e){}onPortRendered(e){}onToolItemCreated(e){}}__decorate$3([Decorator.hook()],Hook.prototype,"createModel",null),__decorate$3([Decorator.hook()],Hook.prototype,"createView",null),__decorate$3([Decorator.hook()],Hook.prototype,"createRenderer",null),__decorate$3([Decorator.hook()],Hook.prototype,"createDefsManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createGridManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createCoordManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createKnobManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createTransform",null),__decorate$3([Decorator.hook()],Hook.prototype,"createKnob",null),__decorate$3([Decorator.hook()],Hook.prototype,"createTransformManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createHighlightManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createBackgroundManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createClipboard",null),__decorate$3([Decorator.hook()],Hook.prototype,"createClipboardManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createSnapline",null),__decorate$3([Decorator.hook()],Hook.prototype,"createSnaplineManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createSelection",null),__decorate$3([Decorator.hook()],Hook.prototype,"createSelectionManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"allowRubberband",null),__decorate$3([Decorator.hook()],Hook.prototype,"createHistoryManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createScroller",null),__decorate$3([Decorator.hook()],Hook.prototype,"createScrollerManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"allowPanning",null),__decorate$3([Decorator.hook()],Hook.prototype,"createMiniMap",null),__decorate$3([Decorator.hook()],Hook.prototype,"createMiniMapManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createKeyboard",null),__decorate$3([Decorator.hook()],Hook.prototype,"createMouseWheel",null),__decorate$3([Decorator.hook()],Hook.prototype,"createPrintManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createFormatManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createPanningManager",null),__decorate$3([Decorator.hook()],Hook.prototype,"createSizeManager",null),__decorate$3([Decorator.after()],Hook.prototype,"onViewUpdated",null),__decorate$3([Decorator.after()],Hook.prototype,"onViewPostponed",null),__decorate$3([Decorator.hook()],Hook.prototype,"getCellView",null),__decorate$3([Decorator.hook(!0)],Hook.prototype,"createCellView",null),__decorate$3([Decorator.hook()],Hook.prototype,"getHTMLComponent",null),__decorate$3([Decorator.hook()],Hook.prototype,"shouldUpdateHTMLComponent",null),__decorate$3([Decorator.hook()],Hook.prototype,"onEdgeLabelRendered",null),__decorate$3([Decorator.hook()],Hook.prototype,"onPortRendered",null),__decorate$3([Decorator.hook()],Hook.prototype,"onToolItemCreated",null);var __decorate$2=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Graph2,Storage,Private$1;class Graph$5 extends Basecoat{constructor(e){super(),this.options=Options.get(e),this.css=new CSSManager(this),this.hook=new Hook(this),this.view=this.hook.createView(),this.defs=this.hook.createDefsManager(),this.coord=this.hook.createCoordManager(),this.transform=this.hook.createTransformManager(),this.knob=this.hook.createKnobManager(),this.highlight=this.hook.createHighlightManager(),this.grid=this.hook.createGridManager(),this.background=this.hook.createBackgroundManager(),this.model=this.hook.createModel(),this.renderer=this.hook.createRenderer(),this.clipboard=this.hook.createClipboardManager(),this.snapline=this.hook.createSnaplineManager(),this.selection=this.hook.createSelectionManager(),this.history=this.hook.createHistoryManager(),this.scroller=this.hook.createScrollerManager(),this.minimap=this.hook.createMiniMapManager(),this.keyboard=this.hook.createKeyboard(),this.mousewheel=this.hook.createMouseWheel(),this.print=this.hook.createPrintManager(),this.format=this.hook.createFormatManager(),this.panning=this.hook.createPanningManager(),this.size=this.hook.createSizeManager()}get container(){return this.view.container}get[Symbol.toStringTag](){return Graph$5.toStringTag}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map((e=>Node$4.isNode(e)?e:this.createNode(e))),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map((e=>Edge$4.isEdge(e)?e:this.createEdge(e))),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCell(e){return this.model.getCell(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,n={}){return this.model.isNeighbor(e,t,n)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,n={}){return this.model.isSuccessor(e,t,n)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,n={}){return this.model.isPredecessor(e,t,n)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,n,r,i){return this.model.getNodesInArea(e,t,n,r,i)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,n={}){return this.model.search(e,t,n),this}getShortestPath(e,t,n={}){return this.model.getShortestPath(e,t,n)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,n){const r="string"==typeof e?e:"update",i="string"==typeof e?t:e,o="function"==typeof t?n:t;this.startBatch(r,o);const a=i();return this.stopBatch(r,o),a}updateCellId(e,t){return this.model.updateCellId(e,t)}isFrozen(){return this.renderer.isFrozen()}freeze(e={}){return this.renderer.freeze(e),this}unfreeze(e={}){return this.renderer.unfreeze(e),this}isAsync(){return this.renderer.isAsync()}setAsync(e){return this.renderer.setAsync(e),this}findView(e){return Cell.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return Rectangle.isRectangleLike(e)?this.findViewsInArea(e):Point.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){const n="number"==typeof e?{x:e,y:t}:e;return this.renderer.findViewsFromPoint(n)}findViewsInArea(e,t,n,r,i){const o="number"==typeof e?{x:e,y:t,width:n,height:r}:e,a="number"==typeof e?i:t;return this.renderer.findViewsInArea(o,a)}isViewMounted(e){return this.renderer.isViewMounted(e)}getMountedViews(){return this.renderer.getMountedViews()}getUnmountedViews(){return this.renderer.getUnmountedViews()}matrix(e){return void 0===e?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){return this.size.resize(e,t),this}resizeGraph(e,t){return this.size.resizeGraph(e,t),this}resizeScroller(e,t){return this.size.resizeScroller(e,t),this}resizePage(e,t){return this.size.resizePage(e,t),this}scale(e,t=e,n=0,r=0){return void 0===e?this.transform.getScale():(this.transform.scale(e,t,n,r),this)}zoom(e,t){const n=this.scroller.widget;if(n){if(void 0===e)return n.zoom();n.zoom(e,t)}else{if(void 0===e)return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const n=this.scroller.widget;return n?n.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const n=this.scroller.widget;return n?n.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,n){return void 0===e?this.transform.getRotation():(this.transform.rotate(e,t,n),this)}translate(e,t){return void 0===e?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const n=this.translate(),r=n.tx+e,i=n.ty+t;return this.translate(r,i)}getArea(){return this.transform.getGraphArea()}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,n,r){return this.transform.fitToContent(e,t,n,r)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,n){const r=this.scroller.widget;return r?r.centerPoint(e,t,n):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const n=this.scroller.widget;return n?n.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,n,r={}){const i=this.scroller.widget;return i?i.positionPoint(e,t,n,r):this.transform.positionPoint(e,t,n),this}positionRect(e,t,n){const r=this.scroller.widget;return r?r.positionRect(e,t,n):this.transform.positionRect(e,t),this}positionCell(e,t,n){const r=this.scroller.widget;return r?r.positionCell(e,t,n):this.transform.positionCell(e,t),this}positionContent(e,t){const n=this.scroller.widget;return n?n.positionContent(e,t):this.transform.positionContent(e,t),this}getClientMatrix(){return this.coord.getClientMatrix()}getClientOffset(){return this.coord.getClientOffset()}getPageOffset(){return this.coord.getPageOffset()}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.pageToLocalRect(e,t,n,r):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.localToPageRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.localToPageRect(e,t,n,r):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.clientToLocalRect(e,t,n,r):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.localToClientRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.localToClientRect(e,t,n,r):this.coord.localToClientPoint(e,t)}localToGraph(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.localToGraphRect(e,t,n,r):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.graphToLocalRect(e,t,n,r):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,n,r){return Rectangle.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof r?this.coord.clientToGraphRect(e,t,n,r):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const n=this.scroller.widget;return null==n||null!=this.options.background&&t?this.background.draw(e):n.backgroundManager.draw(e),this}clearBackground(e){const t=this.scroller.widget;return null==t||null!=this.options.background&&e?this.background.clear():t.backgroundManager.clear(),this}isClipboardEnabled(){return!this.clipboard.disabled}enableClipboard(){return this.clipboard.enable(),this}disableClipboard(){return this.clipboard.disable(),this}toggleClipboard(e){return null!=e?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}isClipboardEmpty(){return this.clipboard.isEmpty()}getCellsInClipboard(){return this.clipboard.cells}cleanClipboard(){return this.clipboard.clean(),this}copy(e,t={}){return this.clipboard.copy(e,t),this}cut(e,t={}){return this.clipboard.cut(e,t),this}paste(e={},t=this){return this.clipboard.paste(e,t)}isHistoryEnabled(){return!this.history.disabled}enableHistory(){return this.history.enable(),this}disableHistory(){return this.history.disable(),this}toggleHistory(e){return null!=e?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}undo(e={}){return this.history.undo(e),this}undoAndCancel(e={}){return this.history.cancel(e),this}redo(e={}){return this.history.redo(e),this}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}cleanHistory(e={}){this.history.clean(e)}isKeyboardEnabled(){return!this.keyboard.disabled}enableKeyboard(){return this.keyboard.enable(),this}disableKeyboard(){return this.keyboard.disable(),this}toggleKeyboard(e){return null!=e?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}bindKey(e,t,n){return this.keyboard.on(e,t,n),this}unbindKey(e,t){return this.keyboard.off(e,t),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}enablePanning(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}disablePanning(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.lock()}unlockScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.unlock()}updateScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.update()}getScrollbarPosition(){return this.scroller.widget.scrollbarPosition()}setScrollbarPosition(e,t,n){return this.scroller.widget.scrollbarPosition(e,t,n),this}scrollToPoint(e,t,n){return this.scroller.widget.scrollToPoint(e,t,n),this}scrollToContent(e){return this.scroller.widget.scrollToContent(e),this}scrollToCell(e,t){return this.scroller.widget.scrollToCell(e,t),this}transitionToPoint(e,t,n){return this.scroller.widget.transitionToPoint(e,t,n),this}transitionToRect(e,t={}){return this.scroller.widget.transitionToRect(e,t),this}isSelectionEnabled(){return!this.selection.disabled}enableSelection(){return this.selection.enable(),this}disableSelection(){return this.selection.disable(),this}toggleSelection(e){return null!=e?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}isMultipleSelection(){return this.selection.isMultiple()}enableMultipleSelection(){return this.selection.enableMultiple(),this}disableMultipleSelection(){return this.selection.disableMultiple(),this}toggleMultipleSelection(e){return null!=e?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return!1!==this.selection.widget.options.movable}enableSelectionMovable(){return this.selection.widget.options.movable=!0,this}disableSelectionMovable(){return this.selection.widget.options.movable=!1,this}toggleSelectionMovable(e){return null!=e?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.selection.rubberbandDisabled}enableRubberband(){return this.selection.enableRubberband(),this}disableRubberband(){return this.selection.disableRubberband(),this}toggleRubberband(e){return null!=e?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return!0===this.selection.widget.options.strict}enableStrictRubberband(){return this.selection.widget.options.strict=!0,this}disableStrictRubberband(){return this.selection.widget.options.strict=!1,this}toggleStrictRubberband(e){return null!=e?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.selection.setModifiers(e)}setSelectionFilter(e){return this.selection.setFilter(e),this}setSelectionDisplayContent(e){return this.selection.setContent(e),this}isSelectionEmpty(){return this.selection.isEmpty()}cleanSelection(e){return this.selection.clean(e),this}resetSelection(e,t){return this.selection.reset(e,t),this}getSelectedCells(){return this.selection.cells}getSelectedCellCount(){return this.selection.length}isSelected(e){return this.selection.isSelected(e)}select(e,t){return this.selection.select(e,t),this}unselect(e,t){return this.selection.unselect(e,t),this}isSnaplineEnabled(){return!this.snapline.widget.disabled}enableSnapline(){return this.snapline.widget.enable(),this}disableSnapline(){return this.snapline.widget.disable(),this}toggleSnapline(e){if(null==e)return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this;e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline())}hideSnapline(){return this.snapline.widget.hide(),this}setSnaplineFilter(e){return this.snapline.widget.setFilter(e),this}isSnaplineOnResizingEnabled(){return!0===this.snapline.widget.options.resizing}enableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!0,this}disableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!1,this}toggleSnaplineOnResizing(e){return null!=e?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}isSharpSnapline(){return!0===this.snapline.widget.options.sharp}enableSharpSnapline(){return this.snapline.widget.options.sharp=!0,this}disableSharpSnapline(){return this.snapline.widget.options.sharp=!1,this}toggleSharpSnapline(e){return null!=e?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}getSnaplineTolerance(){return this.snapline.widget.options.tolerance}setSnaplineTolerance(e){return this.snapline.widget.options.tolerance=e,this}removeTools(){return this.emit("tools:remove"),this}hideTools(){return this.emit("tools:hide"),this}showTools(){return this.emit("tools:show"),this}toSVG(e,t={}){this.format.toSVG(e,t)}toDataURL(e,t){this.format.toDataURL(e,t)}toPNG(e,t={}){this.format.toPNG(e,t)}toJPEG(e,t={}){this.format.toJPEG(e,t)}printPreview(e){this.print.show(e)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"lockScroller",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"unlockScroller",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"updateScroller",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"getScrollbarPosition",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"setScrollbarPosition",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"scrollToPoint",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"scrollToContent",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"scrollToCell",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"transitionToPoint",null),__decorate$2([Decorator$1.checkScroller()],Graph$5.prototype,"transitionToRect",null),__decorate$2([Basecoat.dispose()],Graph$5.prototype,"dispose",null),Graph2=Graph$5||(Graph$5={}),Graph2.View=GraphView,Graph2.Hook=Hook,Graph2.Renderer=Renderer,Graph2.Keyboard=Keyboard,Graph2.MouseWheel=MouseWheel,Graph2.BaseManager=Base$2,Graph2.DefsManager=DefsManager,Graph2.GridManager=GridManager,Graph2.CoordManager=CoordManager,Graph2.PrintManager=PrintManager,Graph2.FormatManager=FormatManager,Graph2.MiniMapManager=MiniMapManager,Graph2.HistoryManager=HistoryManager,Graph2.SnaplineManager=SnaplineManager,Graph2.ScrollerManager=ScrollerManager,Graph2.ClipboardManager=ClipboardManager,Graph2.TransformManager=TransformManager,Graph2.HighlightManager=HighlightManager,Graph2.BackgroundManager=BackgroundManager,Graph2.SelectionManager=SelectionManager,function(e){e.toStringTag=`X6.${e.name}`,e.isGraph=function(t){if(null==t)return!1;if(t instanceof e)return!0;const n=t[Symbol.toStringTag],r=t;return(null==n||n===e.toStringTag)&&null!=r.hook&&null!=r.view&&null!=r.model}}(Graph$5||(Graph$5={})),function(e){e.render=function(t,n){const r=t instanceof HTMLElement?new e({container:t}):new e(t);return null!=n&&r.fromJSON(n),r}}(Graph$5||(Graph$5={})),function(e){e.registerNode=Node$4.registry.register,e.registerEdge=Edge$4.registry.register,e.registerView=CellView.registry.register,e.registerAttr=Attr.registry.register,e.registerGrid=Grid$3.registry.register,e.registerFilter=Filter.registry.register,e.registerNodeTool=NodeTool.registry.register,e.registerEdgeTool=EdgeTool.registry.register,e.registerBackground=Background.registry.register,e.registerHighlighter=Highlighter.registry.register,e.registerPortLayout=PortLayout.registry.register,e.registerPortLabelLayout=PortLabelLayout.registry.register,e.registerMarker=Marker$5.registry.register,e.registerRouter=Router.registry.register,e.registerConnector=Connector.registry.register,e.registerAnchor=NodeAnchor.registry.register,e.registerEdgeAnchor=EdgeAnchor.registry.register,e.registerConnectionPoint=ConnectionPoint.registry.register,e.registerConnectionStrategy=ConnectionStrategy.registry.register,e.registerHTMLComponent=HTML.componentRegistry.register}(Graph$5||(Graph$5={})),function(e){e.unregisterNode=Node$4.registry.unregister,e.unregisterEdge=Edge$4.registry.unregister,e.unregisterView=CellView.registry.unregister,e.unregisterAttr=Attr.registry.unregister,e.unregisterGrid=Grid$3.registry.unregister,e.unregisterFilter=Filter.registry.unregister,e.unregisterNodeTool=NodeTool.registry.unregister,e.unregisterEdgeTool=EdgeTool.registry.unregister,e.unregisterBackground=Background.registry.unregister,e.unregisterHighlighter=Highlighter.registry.unregister,e.unregisterPortLayout=PortLayout.registry.unregister,e.unregisterPortLabelLayout=PortLabelLayout.registry.unregister,e.unregisterMarker=Marker$5.registry.unregister,e.unregisterRouter=Router.registry.unregister,e.unregisterConnector=Connector.registry.unregister,e.unregisterAnchor=NodeAnchor.registry.unregister,e.unregisterEdgeAnchor=EdgeAnchor.registry.unregister,e.unregisterConnectionPoint=ConnectionPoint.registry.unregister,e.unregisterConnectionStrategy=ConnectionStrategy.registry.unregister,e.unregisterHTMLComponent=HTML.componentRegistry.unregister}(Graph$5||(Graph$5={}));class Clipboard{constructor(){this.cells=[]}copy(e,t,n={}){this.options=Object.assign({},n);const r=(Model.isModel(t)?t:t.model).cloneSubGraph(e,n);this.cells=sortBy$2(Object.keys(r).map((e=>r[e])),(e=>e.isEdge()?2:1)),this.serialize(n)}cut(e,t,n={}){this.copy(e,t,n);(Graph$5.isGraph(t)?t.model:t).batchUpdate("cut",(()=>{e.forEach((e=>e.remove()))}))}paste(e,t={}){const n=Object.assign(Object.assign({},this.options),t),{offset:r,edgeProps:i,nodeProps:o}=n;let a=20,s=20;r&&(a="number"==typeof r?r:r.dx,s="number"==typeof r?r:r.dy),this.deserialize(n);const l=this.cells;l.forEach((e=>{e.model=null,e.removeProp("zIndex"),(a||s)&&e.translate(a,s),o&&e.isNode()&&e.prop(o),i&&e.isEdge()&&e.prop(i)}));const c=Graph$5.isGraph(e)?e.model:e;return c.batchUpdate("paste",(()=>{c.addCells(this.cells)})),this.copy(l,e,t),l}serialize(e){!1!==e.useLocalStorage&&Storage.save(this.cells)}deserialize(e){if(e.useLocalStorage){const e=Storage.fetch();e&&(this.cells=e)}}isEmpty(){return this.cells.length<=0}clean(){this.options={},this.cells=[],Storage.clean()}}!function(e){const t=`${Config.prefixCls}.clipboard.cells`;e.save=function(e){if(window.localStorage){const n=e.map((e=>e.toJSON()));localStorage.setItem(t,JSON.stringify(n))}},e.fetch=function(){if(window.localStorage){const e=localStorage.getItem(t),n=e?JSON.parse(e):[];if(n)return Model.fromJSON(n)}},e.clean=function(){window.localStorage&&localStorage.removeItem(t)}}(Storage||(Storage={}));class NodePreset{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get node(){return this.cell}getPresets(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox(e){if(this.options.useCellGeometry){return e.cell.getBBox()}return e.getBBox()},content(e){const t=template("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),n=e.cell,r=n.getBBox();return t({x:Math.floor(r.x),y:Math.floor(r.y),width:Math.floor(r.width),height:Math.floor(r.height),angle:Math.floor(n.getAngle())})},magnet:e=>e.container,tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}removeCell(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}startLink({x:e,y:t}){this.halo.startBatch();const n=this.graph,r=this.createEdgeConnectedToSource();r.setTarget({x:e,y:t}),this.model.addEdge(r,{validation:!1,halo:this.halo.cid,async:!1}),n.view.undelegateEvents(),this.edgeView=n.renderer.findViewByCell(r),this.edgeView.prepareArrowheadDragging("target",{x:e,y:t,fallbackAction:"remove"})}createEdgeConnectedToSource(){const e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),n=this.graph.hook.getDefaultEdge(this.view,e);return n.setSource(t),n}getMagnet(e,t){const n=this.options.magnet;if("function"==typeof n){const r=call(n,this.halo,e,t);if(r instanceof SVGElement)return r}throw new Error("`magnet()` has to return an SVGElement")}getEdgeTerminal(e,t){const n={cell:e.cell.id};if(t!==e.container){const r=t.getAttribute("port");r?n.port=r:n.selector=e.getSelector(t)}return n}doLink({e:e,x:t,y:n}){this.edgeView&&this.edgeView.onMouseMove(e,t,n)}stopLink({e:e,x:t,y:n}){const r=this.edgeView;if(r){r.onMouseUp(e,t,n);const i=r.cell;i.hasLoop()&&this.makeLoopEdge(i),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:i}),this.edgeView=null}this.graph.view.delegateEvents()}makeLoopEdge(e){let t=null,n=null;const r=this.options.loopEdgeWidth,i=this.graph.options,o=new Rectangle(0,0,i.width,i.height),a=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some((e=>{let i=null,s=0,l=0;switch(e){case"top":i=new Point(a.x+a.width/2,a.y-r),s=r/2;break;case"bottom":i=new Point(a.x+a.width/2,a.y+a.height+r),s=r/2;break;case"left":i=new Point(a.x-r,a.y+a.height/2),l=r/2;break;case"right":i=new Point(a.x+a.width+r,a.y+a.height/2),l=r/2}return!!i&&(t=i.translate(-s,-l),n=i.translate(s,l),o.containsPoint(t)&&o.containsPoint(n))}))&&t&&n&&e.setVertices([t,n])}startResize({e:e}){this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(Angle.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),notify("node:resize",e,this.view)}doResize({e:e,dx:t,dy:n}){const r=this.node.getSize(),i=Math.max(r.width+(this.flip?t:n),1),o=Math.max(r.height+(this.flip?n:t),1);this.node.resize(i,o,{absolute:!0}),notify("node:resizing",e,this.view)}stopResize({e:e}){this.view.removeClass("node-resizing"),notify("node:resized",e,this.view),this.halo.stopBatch()}startClone({e:e,x:t,y:n}){this.halo.startBatch();const r=this.options.clone(this.cell,{clone:!0});if(!Cell.isCell(r))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(r,t,n),this.model.addCell(r,{halo:this.halo.cid,async:!1});const i=this.graph.renderer.findViewByCell(r);i.onMouseDown(e,t,n),this.halo.setEventData(e,{cloneView:i})}centerNodeAtCursor(e,t,n){const r=e.getBBox().getCenter(),i=t-r.x,o=n-r.y;e.translate(i,o)}doClone({e:e,x:t,y:n}){const r=this.halo.getEventData(e).cloneView;r&&r.onMouseMove(e,t,n)}stopClone({e:e,x:t,y:n}){const r=this.halo.getEventData(e).cloneView;r&&r.onMouseUp(e,t,n),this.halo.stopBatch()}startFork({e:e,x:t,y:n}){this.halo.startBatch();const r=this.options.clone(this.cell,{fork:!0});if(!Cell.isCell(r))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(r,t,n),this.model.addCell(r,{halo:this.halo.cid,async:!1});const i=this.createEdgeConnectedToSource(),o=this.graph.renderer.findViewByCell(r),a=this.getMagnet(o,"target"),s=this.getEdgeTerminal(o,a);i.setTarget(s),this.model.addEdge(i,{halo:this.halo.cid,async:!1}),o.onMouseDown(e,t,n),this.halo.setEventData(e,{cloneView:o})}doFork({e:e,x:t,y:n}){const r=this.halo.getEventData(e).cloneView;r&&r.onMouseMove(e,t,n)}stopFork({e:e,x:t,y:n}){const r=this.halo.getEventData(e).cloneView;r&&r.onMouseUp(e,t,n),this.halo.stopBatch()}startRotate({e:e,x:t,y:n}){this.halo.startBatch();const r=this.node.getBBox().getCenter(),i=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce(((e,t)=>(t.isNode()&&e.push(t),e)),i),this.halo.setEventData(e,{center:r,nodes:i,rotateStartAngles:i.map((e=>e.getAngle())),clientStartAngle:new Point(t,n).theta(r)}),i.forEach((t=>{const n=this.graph.findViewByCell(t);n&&(n.addClass("node-rotating"),notify("node:rotate",e,n))}))}doRotate({e:e,x:t,y:n}){const r=this.halo.getEventData(e),i=r.clientStartAngle-new Point(t,n).theta(r.center);r.nodes.forEach(((t,n)=>{const o=r.rotateStartAngles[n],a=Util$4.snapToGrid(o+i,this.options.rotateGrid);t.rotate(a,{absolute:!0,center:r.center,halo:this.halo.cid}),notify("node:rotating",e,this.graph.findViewByCell(t))}))}stopRotate({e:e}){this.halo.getEventData(e).nodes.forEach((t=>{const n=this.graph.findViewByCell(t);n.removeClass("node-rotating"),notify("node:rotated",e,n)})),this.halo.stopBatch()}unlink(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}class EdgePreset{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get edge(){return this.cell}getPresets(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:e=>e.graph.localToGraph(e.getPointAtRatio(.5)),tinyThreshold:-1,smallThreshold:-1}}removeEdge(){this.cell.remove()}directionSwap(){const e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}}class Halo extends Widget{get type(){return this.options.type||"surround"}get handleOptions(){return this.options}init(e){this.options=merge$1(Halo.defaultOptions,this.cell.isNode()?new NodePreset(this).getPresets():this.cell.isEdge()?new EdgePreset(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}startListening(){const e=this.model,t=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),super.startListening()}stopListening(){const e=this.model,t=this.graph,n=this.view.cell;this.undelegateEvents(),n.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),super.stopListening()}render(){const e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(Private$1.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass(`${t}-handles`).appendTo(this.container),this.$content=this.$("<div/>").addClass(`${t}-content`).appendTo(this.container),this.$container.appendTo(this.graph.container),this}remove(){return this.stopBatch(),this.view.removeClass(Private$1.NODE_CLS),super.remove()}update(){if(this.isRendered()){this.updateContent();const e=this.getBBox(),t=this.options.tinyThreshold||0,n=this.options.smallThreshold||0;this.$handleContainer.toggleClass(`${this.handleClassName}-tiny`,e.width<t&&e.height<t);const r=`${this.handleClassName}-small`;this.$handleContainer.toggleClass(r,!this.$handleContainer.hasClass(r)&&e.width<n&&e.height<n),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),"surround"!==this.type&&"toolbar"!==this.type||this.hasHandle("fork")&&this.toggleFork()}}updateContent(){const e=this.options.content;if("function"==typeof e){const t=call(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}getBBox(){const e=this.view,t=this.options.bbox,n="function"==typeof t?call(t,this,e):t;return Rectangle.create(Object.assign({x:0,y:0,width:1,height:1},n))}removeCell(){this.cell.remove()}toggleFork(){const e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),n=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!n),t.remove()}toggleUnlink(){const e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}startBatch(){this.model.startBatch("halo",{halo:this.cid})}stopBatch(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}(Halo||(Halo={})).defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:e=>e.clone().removeZIndex()},Object.getOwnPropertyNames(Handle.prototype).forEach((e=>{"constructor"!==e&&Object.defineProperty(Halo.prototype,e,Object.getOwnPropertyDescriptor(Handle.prototype,e))})),(Private$1||(Private$1={})).NODE_CLS="has-widget-halo";var __decorate$1=globalThis&&globalThis.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},Dnd2,GridLayout$1,GridLayout2,ClassNames,Private;class Dnd extends View{constructor(e){super(),this.options=Object.assign(Object.assign({},Dnd.defaults),e),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName("widget-dnd")),this.draggingGraph=new Graph$5(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),this.$container.append(this.draggingGraph.container)}get targetScroller(){const e=this.options.target;return Graph$5.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return Graph$5.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}get snapline(){return this.targetGraph.snapline.widget}start(e,t){const n=t;n.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=e,this.prepareDragging(e,n.clientX,n.clientY);const r=this.updateNodePosition(n.clientX,n.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:n,node:e,cell:e,view:this.draggingView,x:r.x,y:r.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(Dnd.documentEvents,n.data)}isSnaplineEnabled(){return this.snapline&&!this.snapline.disabled}prepareDragging(e,t,n){const r=this.draggingGraph,i=r.model,o=this.options.getDragNode(e,{sourceNode:e,draggingGraph:r,targetGraph:this.targetGraph});o.position(0,0);let a=5;if(this.isSnaplineEnabled()&&(a+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const e=this.targetGraph.transform.getScale();r.scale(e.sx,e.sy),a*=Math.max(e.sx,e.sy)}else r.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),i.resetCells([o]);const s=r.findViewByCell(o);s.undelegateEvents(),s.cell.off("changed"),r.fitToContent({padding:a,allowNewOrigin:"any"});const l=s.getBBox();this.geometryBBox=s.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(l.getTopLeft()),this.draggingNode=o,this.draggingView=s,this.draggingBBox=o.getBBox(),this.padding=a,this.originOffset=this.updateGraphPosition(t,n)}updateGraphPosition(e,t){const n=document.body.scrollTop||document.documentElement.scrollTop,r=this.delta,i=this.geometryBBox,o=this.padding||5,a={left:e-r.x-i.width/2-o,top:t-r.y-i.height/2-o+n};return this.draggingGraph&&this.$container.offset(a),a}updateNodePosition(e,t){const n=this.targetGraph.clientToLocal(e,t),r=this.draggingBBox;return n.x-=r.width/2,n.y-=r.height/2,this.draggingNode.position(n.x,n.y),n}snap({cell:e,current:t,options:n}){const r=e;if(n.snapped){const e=this.draggingBBox;r.position(e.x+n.tx,e.y+n.ty,{silent:!0}),this.draggingView.translate(),r.position(t.x,t.y,{silent:!0}),this.snapOffset={x:n.tx,y:n.ty}}else this.snapOffset=null}onDragging(e){const t=this.draggingView;if(t){e.preventDefault();const n=this.normalizeEvent(e),r=n.clientX,i=n.clientY;this.updateGraphPosition(r,i);const o=this.updateNodePosition(r,i),a=this.targetGraph.options.embedding.enabled,s=(a||this.isSnaplineEnabled())&&this.isInsideValidArea({x:r,y:i});if(a){t.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const e=t.getEventData(n);s?t.processEmbedding(n,e):t.clearEmbedding(e),this.candidateEmbedView=e.candidateEmbedView}this.isSnaplineEnabled()&&(s?this.snapline.snapOnMoving({e:n,view:t,x:o.x,y:o.y}):this.snapline.hide())}}onDragEnd(e){const t=this.draggingNode;if(t){const n=this.normalizeEvent(e),r=this.draggingView,i=this.draggingBBox,o=this.snapOffset;let a=i.x,s=i.y;o&&(a+=o.x,s+=o.y),t.position(a,s,{silent:!0});const l=this.drop(t,{x:n.clientX,y:n.clientY}),c=e=>{e?(this.onDropped(t),this.targetGraph.options.embedding.enabled&&r&&(r.setEventData(n,{cell:e,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),r.finalizeEmbedding(n,r.getEventData(n)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};isAsync(l)?(this.undelegateDocumentEvents(),l.then(c)):c(l)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}onDropInvalid(){const e=this.draggingNode;if(e){const t=this.options.animation;if(t){const n="object"==typeof t&&t.duration||150,r="object"==typeof t&&t.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,n,r,(()=>this.onDropped(e)))}else this.onDropped(e)}}isInsideValidArea(e){let t,n=null;const r=this.targetGraph,i=this.targetScroller;this.options.dndContainer&&(n=this.getDropArea(this.options.dndContainer));const o=n&&n.containsPoint(e);if(i)if(i.options.autoResize)t=this.getDropArea(i.container);else{const e=this.getDropArea(i.container);t=this.getDropArea(r.container).intersectsWithRect(e)}else t=this.getDropArea(r.container);return!o&&t&&t.containsPoint(e)}getDropArea(e){const t=this.$(e),n=t.offset(),r=document.body.scrollTop||document.documentElement.scrollTop,i=document.body.scrollLeft||document.documentElement.scrollLeft;return Rectangle.create({x:n.left+parseInt(t.css("border-left-width"),10)-i,y:n.top+parseInt(t.css("border-top-width"),10)-r,width:t.innerWidth(),height:t.innerHeight()})}drop(e,t){if(this.isInsideValidArea(t)){const n=this.targetGraph,r=n.model,i=n.clientToLocal(t),o=this.sourceNode,a=this.options.getDropNode(e,{sourceNode:o,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),s=a.getBBox();i.x+=s.x-s.width/2,i.y+=s.y-s.height/2;const l=this.snapOffset?1:n.getGridSize();a.position(Util$4.snapToGrid(i.x,l),Util$4.snapToGrid(i.y,l)),a.removeZIndex();const c=this.options.validateNode,u=!c||c(a,{sourceNode:o,draggingNode:e,droppingNode:a,targetGraph:n,draggingGraph:this.draggingGraph});return"boolean"==typeof u?u?(r.addCell(a,{stencil:this.cid}),a):null:toDeferredBoolean(u).then((e=>e?(r.addCell(a,{stencil:this.cid}),a):null))}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove()}}function grid$2(e,t={}){const n=Model.isModel(e)?e:(new Model).resetCells(e,{sort:!1,dryrun:!0}),r=n.getNodes(),i=t.columns||1,o=Math.ceil(r.length/i),a=t.dx||0,s=t.dy||0,l=!1!==t.center,c=!0===t.resizeToFit,u=t.marginX||0,h=t.marginY||0,d=[];let f=t.columnWidth;if("compact"===f)for(let y=0;y<i;y+=1){const e=GridLayout$1.getNodesInColumn(r,y,i);d.push(GridLayout$1.getMaxDim(e,"width")+a)}else{null!=f&&"auto"!==f||(f=GridLayout$1.getMaxDim(r,"width")+a);for(let e=0;e<i;e+=1)d.push(f)}const p=GridLayout$1.accumulate(d,u),g=[];let m=t.rowHeight;if("compact"===m)for(let y=0;y<o;y+=1){const e=GridLayout$1.getNodesInRow(r,y,i);g.push(GridLayout$1.getMaxDim(e,"height")+s)}else{null!=m&&"auto"!==m||(m=GridLayout$1.getMaxDim(r,"height")+s);for(let e=0;e<o;e+=1)g.push(m)}const v=GridLayout$1.accumulate(g,h);n.startBatch("layout"),r.forEach(((e,n)=>{const r=n%i,o=Math.floor(n/i),u=d[r],h=g[o];let f=0,m=0,y=e.getSize();if(c){let n=u-2*a,r=h-2*s;const i=y.height*(y.width?n/y.width:1),o=y.width*(y.height?r/y.height:1);h<i?n=o:r=i,y={width:n,height:r},e.setSize(y,t)}l&&(f=(u-y.width)/2,m=(h-y.height)/2),e.position(p[r]+a+f,v[o]+s+m,t)})),n.stopBatch("layout")}__decorate$1([View.dispose()],Dnd.prototype,"dispose",null),Dnd2=Dnd||(Dnd={}),Dnd2.defaults={animation:!1,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()},Dnd2.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"},GridLayout2=GridLayout$1||(GridLayout$1={}),GridLayout2.getMaxDim=function(e,t){return e.reduce(((e,n)=>Math.max(n.getSize()[t],e)),0)},GridLayout2.getNodesInRow=function(e,t,n){const r=[];for(let i=n*t,o=i+n;i<o;i+=1)r.push(e[i]);return r},GridLayout2.getNodesInColumn=function(e,t,n){const r=[];for(let i=t,o=e.length;i<o;i+=n)r.push(e[i]);return r},GridLayout2.accumulate=function(e,t){return e.reduce(((e,t,n)=>(e.push(e[n]+t),e)),[t||0])};class Stencil extends View{constructor(e){if(super(),this.graphs={},this.$groups={},this.options=Object.assign(Object.assign({},Stencil.defaultOptions),e),this.dnd=new Dnd(this.options),this.onSearch=debounce$2(this.onSearch,200),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(ClassNames.base)).attr("data-not-found-text",this.options.notFoundText||"No matches found"),this.options.collapsable=e.collapsable&&e.groups&&e.groups.some((e=>!1!==e.collapsable)),this.options.collapsable){this.$container.addClass("collapsable");e.groups&&e.groups.every((e=>e.collapsed||!1===e.collapsable))&&this.$container.addClass("collapsed")}this.$("<div/>").addClass(this.prefixClassName(ClassNames.title)).html(this.options.title).appendTo(this.$container),e.search&&this.$container.addClass("searchable").append(this.renderSearch()),this.$content=this.$("<div/>").addClass(this.prefixClassName(ClassNames.content)).appendTo(this.$container);const t=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach((n=>{const r=this.$("<div/>").addClass(this.prefixClassName(ClassNames.group)).attr("data-name",n.name);(null==n.collapsable&&e.collapsable||!1!==n.collapsable)&&r.addClass("collapsable"),r.toggleClass("collapsed",!0===n.collapsed);const i=this.$("<h3/>").addClass(this.prefixClassName(ClassNames.groupTitle)).html(n.title||n.name),o=this.$("<div/>").addClass(this.prefixClassName(ClassNames.groupContent)),a=n.graphOptions,s=new Graph$5(Object.assign(Object.assign(Object.assign({},t),a),{container:document.createElement("div"),model:t.model||new Model,width:n.graphWidth||e.stencilGraphWidth,height:n.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));o.append(s.container),r.append(i,o).appendTo(this.$content),this.$groups[n.name]=r,this.graphs[n.name]=s}));else{const n=new Graph$5(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new Model,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.$content.append(n.container),this.graphs[Private.defaultGroupName]=n}return this.startListening(),this}get targetScroller(){const e=this.options.target;return Graph$5.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return Graph$5.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}renderSearch(){return this.$("<div/>").addClass(this.prefixClassName(ClassNames.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(ClassNames.searchText)))}startListening(){const e=this.prefixClassName(ClassNames.title),t=this.prefixClassName(ClassNames.searchText),n=this.prefixClassName(ClassNames.groupTitle);this.delegateEvents({[`click .${e}`]:"onTitleClick",[`touchstart .${e}`]:"onTitleClick",[`click .${n}`]:"onGroupTitleClick",[`touchstart .${n}`]:"onGroupTitleClick",[`input .${t}`]:"onSearch",[`focusin .${t}`]:"onSearchFocusIn",[`focusout .${t}`]:"onSearchFocusOut"}),Object.keys(this.graphs).forEach((e=>{this.graphs[e].on("cell:mousedown",this.onDragStart,this)}))}stopListening(){this.undelegateEvents(),Object.keys(this.graphs).forEach((e=>{this.graphs[e].off("cell:mousedown",this.onDragStart,this)}))}load(e,t){return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach((t=>{e[t]&&this.loadGroup(e[t],t)})),this}loadGroup(e,t){const n=this.getModel(t);if(n){const t=e.map((e=>Node$4.isNode(e)?e:Node$4.create(e)));n.resetCells(t)}const r=this.getGroup(t);let i=this.options.stencilGraphHeight;r&&null!=r.graphHeight&&(i=r.graphHeight);const o=r&&r.layout||this.options.layout;if(o&&n&&call(o,this,n,r),!i){const e=this.getGraph(t);e.fitToContent({minWidth:e.options.width,gridHeight:1,padding:r&&r.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(e){const{e:t,node:n}=e;this.dnd.start(n,t)}filter(e,t){const n=Object.keys(this.graphs).reduce(((n,r)=>{const i=this.graphs[r],o=r===Private.defaultGroupName?null:r,a=i.model.getNodes().filter((n=>{let r=!1;r="function"==typeof t?call(t,this,n,e,o,this):"boolean"==typeof t?t:this.isCellMatched(n,e,t,e.toLowerCase()!==e);const a=i.renderer.findViewByCell(n);return a&&a.$(a.container).toggleClass("unmatched",!r),r})),s=a.length>0,l=this.options,c=new Model;return c.resetCells(a),l.layout&&call(l.layout,this,c,this.getGroup(r)),this.$groups[r]&&this.$groups[r].toggleClass("unmatched",!s),i.fitToContent({gridWidth:1,gridHeight:1,padding:l.stencilGraphPadding||10}),n||s}),!1);this.$container.toggleClass("not-found",!n)}isCellMatched(e,t,n,r){return!t||!n||Object.keys(n).some((i=>{if("*"===i||e.shape===i){const o=n[i];if("boolean"==typeof o)return o;return(Array.isArray(o)?o:[o]).some((n=>{let i=e.getPropByPath(n);return null!=i&&(i=`${i}`,r||(i=i.toLowerCase()),i.indexOf(t)>=0)}))}return!1}))}onSearch(e){this.filter(e.target.value,this.options.search)}onSearchFocusIn(){this.$container.addClass("is-focused")}onSearchFocusOut(){this.$container.removeClass("is-focused")}onTitleClick(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(e){const t=this.$(e.target).closest(`.${this.prefixClassName(ClassNames.group)}`);this.toggleGroup(t.attr("data-name")||"");const n=Object.keys(this.$groups).every((e=>{const t=this.getGroup(e),n=this.$groups[e];return t&&!1===t.collapsable||n.hasClass("collapsed")}));this.$container.toggleClass("collapsed",n)}getModel(e){const t=this.getGraph(e);return t?t.model:null}getGraph(e){return this.graphs[e||Private.defaultGroupName]}getGroup(e){const t=this.options.groups;return null!=e&&t&&t.length?t.find((t=>t.name===e)):null}toggleGroup(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}collapseGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}expandGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}isGroupCollapsable(e){return this.$groups[e].hasClass("collapsable")}isGroupCollapsed(e){const t=this.$groups[e];return t&&t.hasClass("collapsed")}collapseGroups(){return Object.keys(this.$groups).forEach((e=>this.collapseGroup(e))),this}expandGroups(){return Object.keys(this.$groups).forEach((e=>this.expandGroup(e))),this}resizeGroup(e,t){const n=this.graphs[e];return n&&n.resize(t.width,t.height),this}onRemove(){Object.keys(this.graphs).forEach((e=>{this.graphs[e].view.remove(),delete this.graphs[e]})),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}(Stencil||(Stencil={})).defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(e,t){const n={columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10};grid$2(e,Object.assign(Object.assign(Object.assign({},n),this.options.layoutOptions),t?t.layoutOptions:{}))}},Dnd.defaults),function(e){e.base="widget-stencil",e.title=`${e.base}-title`,e.search=`${e.base}-search`,e.searchText=`${e.search}-text`,e.content=`${e.base}-content`,e.group=`${e.base}-group`,e.groupTitle=`${e.group}-title`,e.groupContent=`${e.group}-content`}(ClassNames||(ClassNames={})),(Private||(Private={})).defaultGroupName="__default__";var insertCss$1={exports:{}},containers=[],styleElements=[],usage="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function insertCss(e,t){if(t=t||{},void 0===e)throw new Error(usage);var n,r=!0===t.prepend?"prepend":"append",i=void 0!==t.container?t.container:document.querySelector("head"),o=containers.indexOf(i);return-1===o&&(o=containers.push(i)-1,styleElements[o]={}),void 0!==styleElements[o]&&void 0!==styleElements[o][r]?n=styleElements[o][r]:(n=styleElements[o][r]=createStyleElement(),"prepend"===r?i.insertBefore(n,i.childNodes[0]):i.appendChild(n)),65279===e.charCodeAt(0)&&(e=e.substr(1,e.length)),n.styleSheet?n.styleSheet.cssText+=e:n.textContent+=e,n}function createStyleElement(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}insertCss$1.exports=insertCss,insertCss$1.exports.insertCss=insertCss;var mqtt_min={exports:{}};mqtt_min.exports=function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof commonjsRequire&&commonjsRequire;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){return i(t[a][1][e]||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof commonjsRequire&&commonjsRequire,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){(function(n,r){(function(){const i=e("events").EventEmitter,o=e("./store"),a=e("./topic-alias-recv"),s=e("./topic-alias-send"),l=e("mqtt-packet"),c=e("./default-message-id-provider"),u=e("readable-stream").Writable,h=e("inherits"),d=e("reinterval"),f=e("rfdc/default"),p=e("./validations"),g=e("xtend"),m=e("debug")("mqttjs:client"),v=n?n.nextTick:function(e){setTimeout(e,0)},y=r.setImmediate||function(e){v(e)},b={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:3e4,clean:!0,resubscribe:!0},x=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],w={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};function _(e,t){let n;t.properties&&(n=t.properties.topicAlias);let r=t.topic.toString();if(0===r.length){if(void 0===n)return new Error("Unregistered Topic Alias");if(void 0===(r=e.topicAliasSend.getTopicByAlias(n)))return new Error("Unregistered Topic Alias");t.topic=r}n&&delete t.properties.topicAlias}function C(e,t,n){m("sendPacket :: packet: %O",t),m("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),m("sendPacket :: writing to stream");const r=l.writeToStream(t,e.stream,e.options);m("sendPacket :: writeToStream result %s",r),!r&&n&&n!==S?(m("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",n)):n&&(m("sendPacket :: invoking cb"),n())}function $(e,t,n,r){m("storeAndSend :: store packet with cmd %s to outgoingStore",t.cmd);let i,o=t;if("publish"===o.cmd&&(o=f(t),i=_(e,o)))return n&&n(i);e.outgoingStore.put(o,(function(i){if(i)return n&&n(i);r(),C(e,t,n)}))}function S(e){m("nop ::",e)}function E(e,t){let n;const r=this;if(!(this instanceof E))return new E(e,t);for(n in this.options=t||{},b)void 0===this.options[n]?this.options[n]=b[n]:this.options[n]=t[n];m("MqttClient :: options.protocol",t.protocol),m("MqttClient :: options.protocolVersion",t.protocolVersion),m("MqttClient :: options.username",t.username),m("MqttClient :: options.keepalive",t.keepalive),m("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),m("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),m("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum),this.options.clientId="string"==typeof t.clientId?t.clientId:"mqttjs_"+Math.random().toString(16).substr(2,8),m("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.messageIdProvider=void 0===this.options.messageIdProvider?new c:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new o,this.incomingStore=t.incomingStore||new o,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,t.topicAliasMaximum>0&&(t.topicAliasMaximum>65535?m("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new a(t.topicAliasMaximum)),this.on("connect",(function(){const e=this.queue;m("connect :: sending queued packets"),function t(){const n=e.shift();m("deliver :: entry %o",n);let i=null;if(!n)return void r._resubscribe();i=n.packet,m("deliver :: call _sendPacket for %o",i);let o=!0;i.messageId&&0!==i.messageId&&(r.messageIdProvider.register(i.messageId)||(o=!1)),o?r._sendPacket(i,(function(e){n.cb&&n.cb(e),t()})):(m("messageId: %d has already used. The message is skipped and removed.",i.messageId),t())}()})),this.on("close",(function(){m("close :: connected set to `false`"),this.connected=!1,m("close :: clearing connackTimer"),clearTimeout(this.connackTimer),m("close :: clearing ping timer"),null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),m("close :: calling _setupReconnect"),this._setupReconnect()})),i.call(this),m("MqttClient :: setting up stream"),this._setupStream()}h(E,i),E.prototype._setupStream=function(){const e=this,t=new u,n=l.parser(this.options);let r=null;const i=[];function o(){if(i.length)v(a);else{const e=r;r=null,e()}}function a(){m("work :: getting next packet in queue");const t=i.shift();if(t)m("work :: packet pulled from queue"),e._handlePacket(t,o);else{m("work :: no packets in queue");const e=r;r=null,m("work :: done flag is %s",!!e),e&&e()}}m("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),m("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",(function(e){m("parser :: on packet push to packets array."),i.push(e)})),t._write=function(e,t,i){r=i,m("writable stream :: parsing buffer"),n.parse(e),a()},m("_setupStream :: pipe stream to writable stream"),this.stream.pipe(t),this.stream.on("error",(function(t){m("streamErrorHandler :: error",t.message),x.includes(t.code)?(m("streamErrorHandler :: emitting error"),e.emit("error",t)):S(t)})),this.stream.on("close",(function(){var t;m("(%s)stream :: on close",e.options.clientId),(t=e.outgoing)&&(m("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(t).forEach((function(e){t[e].volatile&&"function"==typeof t[e].cb&&(t[e].cb(new Error("Connection closed")),delete t[e])}))),m("stream: emit close to MqttClient"),e.emit("close")})),m("_setupStream: sending packet `connect`");const s=Object.create(this.options);if(s.cmd="connect",this.topicAliasRecv&&(s.properties||(s.properties={}),this.topicAliasRecv&&(s.properties.topicAliasMaximum=this.topicAliasRecv.max)),C(this,s),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return e.end((()=>this.emit("error",new Error("Packet has no Authentication Method")))),this;this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket&&C(this,g({cmd:"auth",reasonCode:0},this.options.authPacket))}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout((function(){m("!!connectTimeout hit!! Calling _cleanUp with force `true`"),e._cleanUp(!0)}),this.options.connectTimeout)},E.prototype._handlePacket=function(e,t){const n=this.options;if(5===n.protocolVersion&&n.properties&&n.properties.maximumPacketSize&&n.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(m("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"auth":this._handleAuth(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t()}},E.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e&&e!==S?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},E.prototype.publish=function(e,t,n,r){m("publish :: message `%s` to topic `%s`",t,e);const i=this.options;if("function"==typeof n&&(r=n,n=null),n=g({qos:0,retain:!1,dup:!1},n),this._checkDisconnecting(r))return this;const o=this,a=function(){let a=0;if((1===n.qos||2===n.qos)&&null===(a=o._nextId()))return m("No messageId left"),!1;const s={cmd:"publish",topic:e,payload:t,qos:n.qos,retain:n.retain,messageId:a,dup:n.dup};switch(5===i.protocolVersion&&(s.properties=n.properties),m("publish :: qos",n.qos),n.qos){case 1:case 2:o.outgoing[s.messageId]={volatile:!1,cb:r||S},m("MqttClient:publish: packet cmd: %s",s.cmd),o._sendPacket(s,void 0,n.cbStorePut);break;default:m("MqttClient:publish: packet cmd: %s",s.cmd),o._sendPacket(s,r,n.cbStorePut)}return!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!a())&&this._storeProcessingQueue.push({invoke:a,cbStorePut:n.cbStorePut,callback:r}),this},E.prototype.subscribe=function(){const e=this,t=new Array(arguments.length);for(let h=0;h<arguments.length;h++)t[h]=arguments[h];const n=[];let r=t.shift();const i=r.resubscribe;let o=t.pop()||S,a=t.pop();const s=this.options.protocolVersion;delete r.resubscribe,"string"==typeof r&&(r=[r]),"function"!=typeof o&&(a=o,o=S);const l=p.validateTopics(r);if(null!==l)return y(o,new Error("Invalid topic "+l)),this;if(this._checkDisconnecting(o))return m("subscribe: discconecting true"),this;const c={qos:0};if(5===s&&(c.nl=!1,c.rap=!1,c.rh=0),a=g(c,a),Array.isArray(r)?r.forEach((function(t){if(m("subscribe: array topic %s",t),!Object.prototype.hasOwnProperty.call(e._resubscribeTopics,t)||e._resubscribeTopics[t].qos<a.qos||i){const e={topic:t,qos:a.qos};5===s&&(e.nl=a.nl,e.rap=a.rap,e.rh=a.rh,e.properties=a.properties),m("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),n.push(e)}})):Object.keys(r).forEach((function(t){if(m("subscribe: object topic %s",t),!Object.prototype.hasOwnProperty.call(e._resubscribeTopics,t)||e._resubscribeTopics[t].qos<r[t].qos||i){const e={topic:t,qos:r[t].qos};5===s&&(e.nl=r[t].nl,e.rap=r[t].rap,e.rh=r[t].rh,e.properties=a.properties),m("subscribe: pushing `%s` to subs list",e),n.push(e)}})),!n.length)return o(null,[]),this;const u=function(){const t=e._nextId();if(null===t)return m("No messageId left"),!1;const r={cmd:"subscribe",subscriptions:n,qos:1,retain:!1,dup:!1,messageId:t};if(a.properties&&(r.properties=a.properties),e.options.resubscribe){m("subscribe :: resubscribe true");const t=[];n.forEach((function(n){if(e.options.reconnectPeriod>0){const r={qos:n.qos};5===s&&(r.nl=n.nl||!1,r.rap=n.rap||!1,r.rh=n.rh||0,r.properties=n.properties),e._resubscribeTopics[n.topic]=r,t.push(n.topic)}})),e.messageIdToTopic[r.messageId]=t}return e.outgoing[r.messageId]={volatile:!0,cb:function(e,t){if(!e){const e=t.granted;for(let t=0;t<e.length;t+=1)n[t].qos=e[t]}o(e,n)}},m("subscribe :: call _sendPacket"),e._sendPacket(r),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!u())&&this._storeProcessingQueue.push({invoke:u,callback:o}),this},E.prototype.unsubscribe=function(){const e=this,t=new Array(arguments.length);for(let s=0;s<arguments.length;s++)t[s]=arguments[s];let n=t.shift(),r=t.pop()||S,i=t.pop();"string"==typeof n&&(n=[n]),"function"!=typeof r&&(i=r,r=S);const o=p.validateTopics(n);if(null!==o)return y(r,new Error("Invalid topic "+o)),this;if(e._checkDisconnecting(r))return this;const a=function(){const t=e._nextId();if(null===t)return m("No messageId left"),!1;const o={cmd:"unsubscribe",qos:1,messageId:t};return"string"==typeof n?o.unsubscriptions=[n]:Array.isArray(n)&&(o.unsubscriptions=n),e.options.resubscribe&&o.unsubscriptions.forEach((function(t){delete e._resubscribeTopics[t]})),"object"==typeof i&&i.properties&&(o.properties=i.properties),e.outgoing[o.messageId]={volatile:!0,cb:r},m("unsubscribe: call _sendPacket"),e._sendPacket(o),!0};return(this._storeProcessing||this._storeProcessingQueue.length>0||!a())&&this._storeProcessingQueue.push({invoke:a,callback:r}),this},E.prototype.end=function(e,t,n){const r=this;function i(){m("end :: (%s) :: finish :: calling _cleanUp with force %s",r.options.clientId,e),r._cleanUp(e,(()=>{m("end :: finish :: calling process.nextTick on closeStores"),v(function(){m("end :: closeStores: closing incoming and outgoing stores"),r.disconnected=!0,r.incomingStore.close((function(e){r.outgoingStore.close((function(t){if(m("end :: closeStores: emitting end"),r.emit("end"),n){const r=e||t;m("end :: closeStores: invoking callback with args"),n(r)}}))})),r._deferredReconnect&&r._deferredReconnect()}.bind(r))}),t)}return m("end :: (%s)",this.options.clientId),null!=e&&"boolean"==typeof e||(n=t||S,t=e,e=!1,"object"!=typeof t&&(n=t,t=null,"function"!=typeof n&&(n=S))),"object"!=typeof t&&(n=t,t=null),m("end :: cb? %s",!!n),n=n||S,this.disconnecting?(n(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&Object.keys(this.outgoing).length>0?(m("end :: (%s) :: calling finish in 10ms once outgoing is empty",r.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,i,10))):(m("end :: (%s) :: immediately calling finish",r.options.clientId),i()),this)},E.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},(function(){t(new Error("Message removed"))})),this},E.prototype.reconnect=function(e){m("client reconnect");const t=this,n=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new o,t.outgoingStore=t.options.outgoingStore||new o,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=n:n(),this},E.prototype._reconnect=function(){m("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end((()=>{this._setupStream()})),m("client already connected. disconnecting first.")):(m("_reconnect: calling _setupStream"),this._setupStream())},E.prototype._setupReconnect=function(){const e=this;!e.disconnecting&&!e.reconnectTimer&&e.options.reconnectPeriod>0?(this.reconnecting||(m("_setupReconnect :: emit `offline` state"),this.emit("offline"),m("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),m("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval((function(){m("reconnectTimer :: reconnect triggered!"),e._reconnect()}),e.options.reconnectPeriod)):m("_setupReconnect :: doing nothing...")},E.prototype._clearReconnect=function(){m("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},E.prototype._cleanUp=function(e,t){const n=arguments[2];if(t&&(m("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),m("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&(r=this.outgoing)&&(m("flush: queue exists? %b",!!r),Object.keys(r).forEach((function(e){"function"==typeof r[e].cb&&(r[e].cb(new Error("Connection closed")),delete r[e])}))),m("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const e=g({cmd:"disconnect"},n);m("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,y.bind(null,this.stream.end.bind(this.stream)))}var r;this.disconnecting||(m("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(m("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(m("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},E.prototype._sendPacket=function(e,t,n){m("_sendPacket :: (%s) ::  start",this.options.clientId),n=n||S,t=t||S;const r=function(e,t){if(5===e.options.protocolVersion&&"publish"===t.cmd){let n;t.properties&&(n=t.properties.topicAlias);const r=t.topic.toString();if(e.topicAliasSend)if(n){if(0!==r.length&&(m("applyTopicAlias :: register topic: %s - alias: %d",r,n),!e.topicAliasSend.put(r,n)))return m("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,n),new Error("Sending Topic Alias out of range")}else 0!==r.length&&(e.options.autoAssignTopicAlias?(n=e.topicAliasSend.getAliasByTopic(r))?(t.topic="",t.properties={...t.properties,topicAlias:n},m("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",r,n)):(n=e.topicAliasSend.getLruAlias(),e.topicAliasSend.put(r,n),t.properties={...t.properties,topicAlias:n},m("applyTopicAlias :: auto assign topic: %s - alias: %d",r,n)):e.options.autoUseTopicAlias&&(n=e.topicAliasSend.getAliasByTopic(r))&&(t.topic="",t.properties={...t.properties,topicAlias:n},m("applyTopicAlias :: auto use topic: %s - alias: %d",r,n)));else if(n)return m("applyTopicAlias :: error out of range. topic: %s - alias: %d",r,n),new Error("Sending Topic Alias out of range")}}(this,e);if(r)t(r);else{if(!this.connected)return"auth"===e.cmd?(this._shiftPingInterval(),void C(this,e,t)):(m("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,n));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void $(this,e,t,n);default:return void C(this,e,t)}switch(e.qos){case 2:case 1:$(this,e,t,n);break;default:C(this,e,t)}m("_sendPacket :: (%s) ::  end",this.options.clientId)}},E.prototype._storePacket=function(e,t,n){m("_storePacket :: packet: %o",e),m("_storePacket :: cb? %s",!!t),n=n||S;let r=e;if("publish"===r.cmd){const n=_(this,r=f(e));if(n)return t&&t(n)}0===(r.qos||0)&&this.queueQoSZero||"publish"!==r.cmd?this.queue.push({packet:r,cb:t}):r.qos>0?(t=this.outgoing[r.messageId]?this.outgoing[r.messageId].cb:null,this.outgoingStore.put(r,(function(e){if(e)return t&&t(e);n()}))):t&&t(new Error("No connection to broker"))},E.prototype._setupPingTimer=function(){m("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=d((function(){e._checkPing()}),1e3*this.options.keepalive))},E.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},E.prototype._checkPing=function(){m("_checkPing :: checking ping..."),this.pingResp?(m("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(m("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},E.prototype._handlePingresp=function(){this.pingResp=!0},E.prototype._handleConnack=function(e){m("_handleConnack");const t=this.options,n=5===t.protocolVersion?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(e.properties.topicAliasMaximum>65535)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));e.properties.topicAliasMaximum>0&&(this.topicAliasSend=new s(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(t.properties||(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(0===n)this.reconnecting=!1,this._onConnect(e);else if(n>0){const e=new Error("Connection refused: "+w[n]);e.code=n,this.emit("error",e)}},E.prototype._handleAuth=function(e){const t=this.options.protocolVersion,n=5===t?e.reasonCode:e.returnCode;if(5!==t){const e=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+t);return e.code=n,void this.emit("error",e)}const r=this;this.handleAuth(e,(function(e,t){if(e)r.emit("error",e);else if(24===n)r.reconnecting=!1,r._sendPacket(t);else{const t=new Error("Connection refused: "+w[n]);e.code=n,r.emit("error",t)}}))},E.prototype.handleAuth=function(e,t){t()},E.prototype._handlePublish=function(e,t){m("_handlePublish: packet %o",e),t=void 0!==t?t:S;let n=e.topic.toString();const r=e.payload,i=e.qos,o=e.messageId,a=this,s=this.options,l=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let t;if(e.properties&&(t=e.properties.topicAlias),void 0!==t)if(0===n.length){if(!(t>0&&t<=65535))return m("_handlePublish :: topic alias out of range. alias: %d",t),void this.emit("error",new Error("Received Topic Alias is out of range"));{const e=this.topicAliasRecv.getTopicByAlias(t);if(!e)return m("_handlePublish :: unregistered topic alias. alias: %d",t),void this.emit("error",new Error("Received unregistered Topic Alias"));m("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",n=e,t)}}else{if(!this.topicAliasRecv.put(n,t))return m("_handlePublish :: topic alias out of range. alias: %d",t),void this.emit("error",new Error("Received Topic Alias is out of range"));m("_handlePublish :: registered topic: %s - alias: %d",n,t)}}switch(m("_handlePublish: qos %d",i),i){case 2:s.customHandleAcks(n,r,e,(function(n,r){return n instanceof Error||(r=n,n=null),n?a.emit("error",n):-1===l.indexOf(r)?a.emit("error",new Error("Wrong reason code for pubrec")):void(r?a._sendPacket({cmd:"pubrec",messageId:o,reasonCode:r},t):a.incomingStore.put(e,(function(){a._sendPacket({cmd:"pubrec",messageId:o},t)})))}));break;case 1:s.customHandleAcks(n,r,e,(function(i,s){return i instanceof Error||(s=i,i=null),i?a.emit("error",i):-1===l.indexOf(s)?a.emit("error",new Error("Wrong reason code for puback")):(s||a.emit("message",n,r,e),void a.handleMessage(e,(function(e){if(e)return t&&t(e);a._sendPacket({cmd:"puback",messageId:o,reasonCode:s},t)})))}));break;case 0:this.emit("message",n,r,e),this.handleMessage(e,t);break;default:m("_handlePublish: unknown QoS. Doing nothing.")}},E.prototype.handleMessage=function(e,t){t()},E.prototype._handleAck=function(e){const t=e.messageId,n=e.cmd;let r=null;const i=this.outgoing[t]?this.outgoing[t].cb:null,o=this;let a;if(i){switch(m("_handleAck :: packet type",n),n){case"pubcomp":case"puback":{const n=e.reasonCode;n&&n>0&&16!==n&&((a=new Error("Publish error: "+w[n])).code=n,i(a,e)),delete this.outgoing[t],this.outgoingStore.del(e,i),this.messageIdProvider.deallocate(t),this._invokeStoreProcessingQueue();break}case"pubrec":{r={cmd:"pubrel",qos:2,messageId:t};const n=e.reasonCode;n&&n>0&&16!==n?((a=new Error("Publish error: "+w[n])).code=n,i(a,e)):this._sendPacket(r);break}case"suback":delete this.outgoing[t],this.messageIdProvider.deallocate(t);for(let n=0;n<e.granted.length;n++)if(0!=(128&e.granted[n])){const e=this.messageIdToTopic[t];e&&e.forEach((function(e){delete o._resubscribeTopics[e]}))}this._invokeStoreProcessingQueue(),i(null,e);break;case"unsuback":delete this.outgoing[t],this.messageIdProvider.deallocate(t),this._invokeStoreProcessingQueue(),i(null);break;default:o.emit("error",new Error("unrecognized packet type"))}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")}else m("_handleAck :: Server sent an ack in error. Ignoring.")},E.prototype._handlePubrel=function(e,t){m("handling pubrel packet"),t=void 0!==t?t:S;const n=this,r={cmd:"pubcomp",messageId:e.messageId};n.incomingStore.get(e,(function(e,i){e?n._sendPacket(r,t):(n.emit("message",i.topic,i.payload,i),n.handleMessage(i,(function(e){if(e)return t(e);n.incomingStore.del(i,S),n._sendPacket(r,t)})))}))},E.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},E.prototype._nextId=function(){return this.messageIdProvider.allocate()},E.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},E.prototype._resubscribe=function(){m("_resubscribe");const e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&e.length>0)if(this.options.resubscribe)if(5===this.options.protocolVersion){m("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){const n={};n[e[t]]=this._resubscribeTopics[e[t]],n.resubscribe=!0,this.subscribe(n,{properties:n[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);else this._resubscribeTopics={};this._firstConnection=!1},E.prototype._onConnect=function(e){if(this.disconnected)return void this.emit("connect",e);const t=this;this.connackPacket=e,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,function n(){let r=t.outgoingStore.createStream();function i(){t._storeProcessing=!1,t._packetIdsDuringStoreProcessing={}}function o(){r.destroy(),r=null,t._flushStoreProcessingQueue(),i()}t.once("close",o),r.on("error",(function(e){i(),t._flushStoreProcessingQueue(),t.removeListener("close",o),t.emit("error",e)})),r.on("end",(function(){let r=!0;for(const e in t._packetIdsDuringStoreProcessing)if(!t._packetIdsDuringStoreProcessing[e]){r=!1;break}r?(i(),t.removeListener("close",o),t._invokeAllStoreProcessingQueue(),t.emit("connect",e)):n()})),function e(){if(!r)return;t._storeProcessing=!0;const n=r.read(1);let i;n?t._packetIdsDuringStoreProcessing[n.messageId]?e():t.disconnecting||t.reconnectTimer?r.destroy&&r.destroy():(i=t.outgoing[n.messageId]?t.outgoing[n.messageId].cb:null,t.outgoing[n.messageId]={volatile:!1,cb:function(t,n){i&&i(t,n),e()}},t._packetIdsDuringStoreProcessing[n.messageId]=!0,t.messageIdProvider.register(n.messageId)?t._sendPacket(n):m("messageId: %d has already used.",n.messageId)):r.once("readable",e)}()}()},E.prototype._invokeStoreProcessingQueue=function(){if(this._storeProcessingQueue.length>0){const e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1},E.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},E.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},t.exports=E}).call(this)}).call(this,e("_process"),void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./default-message-id-provider":7,"./store":8,"./topic-alias-recv":9,"./topic-alias-send":10,"./validations":11,_process:50,debug:18,events:22,inherits:24,"mqtt-packet":40,"readable-stream":69,reinterval:70,"rfdc/default":71,xtend:81}],2:[function(e,t,n){const{Buffer:r}=e("buffer"),i=e("readable-stream").Transform,o=e("duplexify");let a,s,l,c=!1;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";var u;(u=t).hostname||(u.hostname="localhost"),u.path||(u.path="/"),u.wsOptions||(u.wsOptions={});const h=function(e,t){const n="alis"===e.protocol?"wss":"ws";let r=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(r=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}(t,e);return(a=t.my).connectSocket({url:h,protocols:n}),s=function(){const e=new i;return e._write=function(e,t,n){a.sendSocketMessage({data:e.buffer,success:function(){n()},fail:function(){n(new Error)}})},e._flush=function(e){a.closeSocket({success:function(){e()}})},e}(),l=o.obj(),c||(c=!0,a.onSocketOpen((function(){l.setReadable(s),l.setWritable(s),l.emit("connect")})),a.onSocketMessage((function(e){if("string"==typeof e.data){const t=r.from(e.data,"base64");s.push(t)}else{const t=new FileReader;t.addEventListener("load",(function(){let e=t.result;e=e instanceof ArrayBuffer?r.from(e):r.from(e,"utf8"),s.push(e)})),t.readAsArrayBuffer(e.data)}})),a.onSocketClose((function(){l.end(),l.destroy()})),a.onSocketError((function(e){l.destroy(e)}))),l}},{buffer:17,duplexify:20,"readable-stream":69}],3:[function(e,t,n){const r=e("net"),i=e("debug")("mqttjs:tcp");t.exports=function(e,t){t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";const n=t.port,o=t.hostname;return i("port %d and host %s",n,o),r.createConnection(n,o)}},{debug:18,net:16}],4:[function(e,t,n){const r=e("tls"),i=e("net"),o=e("debug")("mqttjs:tls");t.exports=function(e,t){t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===i.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,o("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const n=r.connect(t);function a(r){t.rejectUnauthorized&&e.emit("error",r),n.end()}return n.on("secureConnect",(function(){t.rejectUnauthorized&&!n.authorized?n.emit("error",new Error("TLS not authorized")):n.removeListener("error",a)})),n.on("error",a),n}},{debug:18,net:16,tls:16}],5:[function(e,t,n){(function(n){(function(){const{Buffer:r}=e("buffer"),i=e("ws"),o=e("debug")("mqttjs:ws"),a=e("duplexify"),s=e("readable-stream").Transform,l=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],c=void 0!==n&&"browser"===n.title||"function"==typeof __webpack_require__;function u(e,t){let n=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(n=e.transformWsUrl(n,e,t)),n}function h(e){const t=e;return e.hostname||(t.hostname="localhost"),e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),c||"wss"!==e.protocol||l.forEach((function(n){Object.prototype.hasOwnProperty.call(e,n)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,n)&&(t.wsOptions[n]=e[n])})),t}t.exports=c?function(e,t){let n;o("browserStreamBuilder");const i=function(e){const t=h(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=e.port)}return void 0===t.objectMode&&(t.objectMode=!(!0===t.binary||void 0===t.binary)),t}(t).browserBufferSize||524288,l=t.browserBufferTimeout||1e3,c=!t.objectMode,d=function(e,t){const n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",r=u(t,e),i=new WebSocket(r,[n]);return i.binaryType="arraybuffer",i}(e,t),f=function(e,t,n){const r=new s({objectModeMode:e.objectMode});return r._write=t,r._flush=n,r}(t,(function e(t,n,o){d.bufferedAmount>i&&setTimeout(e,l,t,n,o),c&&"string"==typeof t&&(t=r.from(t,"utf8"));try{d.send(t)}catch(a){return o(a)}o()}),(function(e){d.close(),e()}));t.objectMode||(f._writev=b),f.on("close",(()=>{d.close()}));const p=void 0!==d.addEventListener;function g(){n.setReadable(f),n.setWritable(f),n.emit("connect")}function m(){n.end(),n.destroy()}function v(e){n.destroy(e)}function y(e){let t=e.data;t=t instanceof ArrayBuffer?r.from(t):r.from(t,"utf8"),f.push(t)}function b(e,t){const n=new Array(e.length);for(let i=0;i<e.length;i++)"string"==typeof e[i].chunk?n[i]=r.from(e[i],"utf8"):n[i]=e[i].chunk;this._write(r.concat(n),"binary",t)}return d.readyState===d.OPEN?n=f:(n=n=a(void 0,void 0,t),t.objectMode||(n._writev=b),p?d.addEventListener("open",g):d.onopen=g),n.socket=d,p?(d.addEventListener("close",m),d.addEventListener("error",v),d.addEventListener("message",y)):(d.onclose=m,d.onerror=v,d.onmessage=y),n}:function(e,t){o("streamBuilder");const n=h(t),r=u(n,e),a=function(e,t,n){o("createWebSocket"),o("protocol: "+n.protocolId+" "+n.protocolVersion);const r="MQIsdp"===n.protocolId&&3===n.protocolVersion?"mqttv3.1":"mqtt";return o("creating new Websocket for url: "+t+" and protocol: "+r),new i(t,[r],n.wsOptions)}(0,r,n),s=i.createWebSocketStream(a,n.wsOptions);return s.url=r,a.on("close",(()=>{s.destroy()})),s}}).call(this)}).call(this,e("_process"))},{_process:50,buffer:17,debug:18,duplexify:20,"readable-stream":69,ws:80}],6:[function(e,t,n){const{Buffer:r}=e("buffer"),i=e("readable-stream").Transform,o=e("duplexify");let a,s,l;t.exports=function(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const n="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";var c;(c=t).hostname||(c.hostname="localhost"),c.path||(c.path="/"),c.wsOptions||(c.wsOptions={});const u=function(e,t){const n="wxs"===e.protocol?"wss":"ws";let r=n+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(r=n+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}(t,e);a=wx.connectSocket({url:u,protocols:[n]}),s=function(){const e=new i;return e._write=function(e,t,n){a.send({data:e.buffer,success:function(){n()},fail:function(e){n(new Error(e))}})},e._flush=function(e){a.close({success:function(){e()}})},e}(),(l=o.obj())._destroy=function(e,t){a.close({success:function(){t&&t(e)}})};const h=l.destroy;return l.destroy=function(){l.destroy=h;const e=this;setTimeout((function(){a.close({fail:function(){e._destroy(new Error)}})}),0)}.bind(l),a.onOpen((function(){l.setReadable(s),l.setWritable(s),l.emit("connect")})),a.onMessage((function(e){let t=e.data;t=t instanceof ArrayBuffer?r.from(t):r.from(t,"utf8"),s.push(t)})),a.onClose((function(){l.end(),l.destroy()})),a.onError((function(e){l.destroy(new Error(e.errMsg))})),l}},{buffer:17,duplexify:20,"readable-stream":69}],7:[function(e,t,n){function r(){if(!(this instanceof r))return new r;this.nextId=Math.max(1,Math.floor(65535*Math.random()))}r.prototype.allocate=function(){const e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},r.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},r.prototype.register=function(e){return!0},r.prototype.deallocate=function(e){},r.prototype.clear=function(){},t.exports=r},{}],8:[function(e,t,n){const r=e("xtend"),i=e("readable-stream").Readable,o={objectMode:!0},a={clean:!0};function s(e){if(!(this instanceof s))return new s(e);this.options=e||{},this.options=r(a,e),this._inflights=new Map}s.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},s.prototype.createStream=function(){const e=new i(o),t=[];let n=!1,r=0;return this._inflights.forEach((function(e,n){t.push(e)})),e._read=function(){!n&&r<t.length?this.push(t[r++]):this.push(null)},e.destroy=function(){if(n)return;const e=this;n=!0,setTimeout((function(){e.emit("close")}),0)},e},s.prototype.del=function(e,t){return(e=this._inflights.get(e.messageId))?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},s.prototype.get=function(e,t){return(e=this._inflights.get(e.messageId))?t(null,e):t&&t(new Error("missing packet")),this},s.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=s},{"readable-stream":69,xtend:81}],9:[function(e,t,n){function r(e){if(!(this instanceof r))return new r(e);this.aliasToTopic={},this.max=e}r.prototype.put=function(e,t){return!(0===t||t>this.max||(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,0))},r.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]},r.prototype.clear=function(){this.aliasToTopic={}},t.exports=r},{}],10:[function(e,t,n){const r=e("lru-cache"),i=e("number-allocator").NumberAllocator;function o(e){if(!(this instanceof o))return new o(e);e>0&&(this.aliasToTopic=new r({max:e}),this.topicToAlias={},this.numberAllocator=new i(1,e),this.max=e,this.length=0)}o.prototype.put=function(e,t){if(0===t||t>this.max)return!1;const n=this.aliasToTopic.get(t);return n&&delete this.topicToAlias[n],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.length,!0},o.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)},o.prototype.getAliasByTopic=function(e){const t=this.topicToAlias[e];return void 0!==t&&this.aliasToTopic.get(t),t},o.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},o.prototype.getLruAlias=function(){return this.numberAllocator.firstVacant()||this.aliasToTopic.keys()[this.aliasToTopic.length-1]},t.exports=o},{"lru-cache":37,"number-allocator":46}],11:[function(e,t,n){function r(e){const t=e.split("/");for(let n=0;n<t.length;n++)if("+"!==t[n]){if("#"===t[n])return n===t.length-1;if(-1!==t[n].indexOf("+")||-1!==t[n].indexOf("#"))return!1}return!0}t.exports={validateTopics:function(e){if(0===e.length)return"empty_topic_list";for(let t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}}},{}],12:[function(e,t,n){(function(n){(function(){const r=e("../client"),i=e("../store"),o=e("url"),a=e("xtend"),s=e("debug")("mqttjs"),l={};function c(e,t){if(s("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){const n=o.parse(e,!0);if(null!=n.port&&(n.port=Number(n.port)),null===(t=a(n,t)).protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(function(e){let t;e.auth&&((t=e.auth.match(/^(.+):(.+)$/))?(e.username=t[1],e.password=t[2]):e.username=e.auth)}(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key){if(!t.protocol)throw new Error("Missing secure protocol key");if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error('Unknown protocol for secure connection: "'+t.protocol+'"!')}}if(!l[t.protocol]){const e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter((function(t,n){return(!e||n%2!=0)&&"function"==typeof l[t]}))[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);const n=new r((function(e){return t.servers&&(e._reconnectCount&&e._reconnectCount!==t.servers.length||(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),s("calling streambuilder for",t.protocol),l[t.protocol](e,t)}),t);return n.on("error",(function(){})),n}void 0!==n&&"browser"!==n.title||"function"!=typeof __webpack_require__?(l.mqtt=e("./tcp"),l.tcp=e("./tcp"),l.ssl=e("./tls"),l.tls=e("./tls"),l.mqtts=e("./tls")):(l.wx=e("./wx"),l.wxs=e("./wx"),l.ali=e("./ali"),l.alis=e("./ali")),l.ws=e("./ws"),l.wss=e("./ws"),t.exports=c,t.exports.connect=c,t.exports.MqttClient=r,t.exports.Store=i}).call(this)}).call(this,e("_process"))},{"../client":1,"../store":8,"./ali":2,"./tcp":3,"./tls":4,"./ws":5,"./wx":6,_process:50,debug:18,url:76,xtend:81}],13:[function(e,t,n){n.byteLength=function(e){var t=c(e),n=t[0],r=t[1];return 3*(n+r)/4-r},n.toByteArray=function(e){var t,n,r,a=c(e),s=a[0],l=a[1],u=new o(3*(s+(r=l))/4-r),h=0,d=l>0?s-4:s;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],u[h++]=t>>16&255,u[h++]=t>>8&255,u[h++]=255&t;return 2===l&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,u[h++]=255&t),1===l&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,u[h++]=t>>8&255,u[h++]=255&t),u},n.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(u(e,a,a+16383>s?s:a+16383));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function u(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},{}],14:[function(e,t,n){const{Buffer:r}=e("buffer"),i=Symbol.for("BufferList");function o(e){if(!(this instanceof o))return new o(e);o._init.call(this,e)}o._init=function(e){Object.defineProperty(this,i,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},o.prototype._new=function(e){return new o(e)},o.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let n=0;n<this._bufs.length;n++){const r=t+this._bufs[n].length;if(e<r||n===this._bufs.length-1)return[n,e-t];t=r}},o.prototype._reverseOffset=function(e){const t=e[0];let n=e[1];for(let r=0;r<t;r++)n+=this._bufs[r].length;return n},o.prototype.get=function(e){if(e>this.length||e<0)return;const t=this._offset(e);return this._bufs[t[0]][t[1]]},o.prototype.slice=function(e,t){return"number"==typeof e&&e<0&&(e+=this.length),"number"==typeof t&&t<0&&(t+=this.length),this.copy(null,0,e,t)},o.prototype.copy=function(e,t,n,i){if(("number"!=typeof n||n<0)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return e||r.alloc(0);if(i<=0)return e||r.alloc(0);const o=!!e,a=this._offset(n),s=i-n;let l=s,c=o&&t||0,u=a[1];if(0===n&&i===this.length){if(!o)return 1===this._bufs.length?this._bufs[0]:r.concat(this._bufs,this.length);for(let t=0;t<this._bufs.length;t++)this._bufs[t].copy(e,c),c+=this._bufs[t].length;return e}if(l<=this._bufs[a[0]].length-u)return o?this._bufs[a[0]].copy(e,t,u,u+l):this._bufs[a[0]].slice(u,u+l);o||(e=r.allocUnsafe(s));for(let r=a[0];r<this._bufs.length;r++){const t=this._bufs[r].length-u;if(!(l>t)){this._bufs[r].copy(e,c,u,u+l),c+=t;break}this._bufs[r].copy(e,c,u),c+=t,l-=t,u&&(u=0)}return e.length>c?e.slice(0,c):e},o.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"!=typeof t?this.length:t,e<0&&(e+=this.length),t<0&&(t+=this.length),e===t)return this._new();const n=this._offset(e),r=this._offset(t),i=this._bufs.slice(n[0],r[0]+1);return 0===r[1]?i.pop():i[i.length-1]=i[i.length-1].slice(0,r[1]),0!==n[1]&&(i[0]=i[0].slice(n[1])),this._new(i)},o.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},o.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||e<=0)return this;for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},o.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},o.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(r.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(r.from(e));return this},o.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},o.prototype.indexOf=function(e,t,n){if(void 0===n&&"string"==typeof t&&(n=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if("number"==typeof e?e=r.from([e]):"string"==typeof e?e=r.from(e,n):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=r.from(e.buffer,e.byteOffset,e.byteLength):r.isBuffer(e)||(e=r.from(e)),t=Number(t||0),isNaN(t)&&(t=0),t<0&&(t=this.length+t),t<0&&(t=0),0===e.length)return t>this.length?this.length:t;const i=this._offset(t);let o=i[0],a=i[1];for(;o<this._bufs.length;o++){const t=this._bufs[o];for(;a<t.length;)if(t.length-a>=e.length){const n=t.indexOf(e,a);if(-1!==n)return this._reverseOffset([o,n]);a=t.length-e.length+1}else{const t=this._reverseOffset([o,a]);if(this._match(t,e))return t;a++}a=0}return-1},o.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let n=0;n<t.length;n++)if(this.get(e+n)!==t[n])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)!function(t){o.prototype[t]=null===e[t]?function(e,n){return this.slice(e,e+n)[t](0,n)}:function(n=0){return this.slice(n,n+e[t])[t](0)}}(t)}(),o.prototype._isBufferList=function(e){return e instanceof o||o.isBufferList(e)},o.isBufferList=function(e){return null!=e&&e[i]},t.exports=o},{buffer:17}],15:[function(e,t,n){const r=e("readable-stream").Duplex,i=e("inherits"),o=e("./BufferList");function a(e){if(!(this instanceof a))return new a(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",(function(e){e.on("error",t)})),this.on("unpipe",(function(e){e.removeListener("error",t)})),e=null}o._init.call(this,e),r.call(this)}i(a,r),Object.assign(a.prototype,o.prototype),a.prototype._new=function(e){return new a(e)},a.prototype._write=function(e,t,n){this._appendBuffer(e),"function"==typeof n&&n()},a.prototype._read=function(e){if(!this.length)return this.push(null);e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)},a.prototype.end=function(e){r.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},a.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},a.prototype._isBufferList=function(e){return e instanceof a||e instanceof o||a.isBufferList(e)},a.isBufferList=o.isBufferList,t.exports=a,t.exports.BufferListStream=a,t.exports.BufferList=o},{"./BufferList":14,inherits:24,"readable-stream":69}],16:[function(e,t,n){},{}],17:[function(e,t,n){(function(t){(function(){var t=e("base64-js"),r=e("ieee754");n.Buffer=a,n.SlowBuffer=function(e){return+e!=e&&(e=0),a.alloc(+e)},n.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return t.__proto__=a.prototype,t}function a(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|d(e,t),r=o(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}(e,t);if(ArrayBuffer.isView(e))return u(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer))return function(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return(r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n)).__proto__=a.prototype,r}(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|h(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||F(e.length)?o(0):u(e):"Buffer"===e.type&&Array.isArray(e.data)?u(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return l(e),o(e<0?0:0|h(e))}function u(e){for(var t=e.length<0?0:0|h(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function h(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function d(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return L(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return R(e).length;default:if(i)return r?-1:L(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function p(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),F(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var u=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(c(e,o+d)!==c(t,d)){h=!1;break}if(h)return o}return-1}function m(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(F(s))return a;e[n+a]=s}return a}function v(e,t,n,r){return B(L(t,e.length-n),e,n,r)}function y(e,t,n,r){return B(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function b(e,t,n,r){return y(e,t,n,r)}function x(e,t,n,r){return B(R(t),e,n,r)}function w(e,t,n,r){return B(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function _(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function C(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,l,c=e[i],u=null,h=c>239?4:c>223?3:c>191?2:1;if(i+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&c)<<6|63&o)>127&&(u=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(u=l)}null===u?(u=65533,h=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=h}return function(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}(r)}n.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||console.error,Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,a.alloc=function(e,t,n){return i=t,a=n,l(r=e),r<=0?o(r):void 0!==i?"string"==typeof a?o(r).fill(i,a):o(r).fill(i):o(r);var r,i,a},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(j(o,Uint8Array)&&(o=a.from(o)),!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=d,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)f(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):function(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return S(this,t,n);case"latin1":case"binary":return E(this,t,n);case"base64":return _(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(j(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),l=Math.min(o,s),c=this.slice(r,i),u=e.slice(t,n),h=0;h<l;++h)if(c[h]!==u[h]){o=c[h],s=u[h];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return p(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return p(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return m(this,e,t,n);case"utf8":case"utf-8":return v(this,e,t,n);case"ascii":return y(this,e,t,n);case"latin1":case"binary":return b(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;function S(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function E(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function A(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=D(e[o]);return i}function M(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function T(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function P(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(e,t,n,i,o){return t=+t,n>>>=0,o||P(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function N(e,t,n,i,o){return t=+t,n>>>=0,o||P(e,0,n,8),r.write(e,t,n,i,52,8),n+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=a.prototype,r},a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||k(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||k(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||k(e,4,this.length),r.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||k(e,8,this.length),r.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||T(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);T(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||T(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeFloatLE=function(e,t,n){return O(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return O(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var o=i-1;o>=0;--o)e[o+t]=this[o+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),l=s.length;if(0===l)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%l]}return this};var I=/[^+/0-9A-Za-z-_]/g;function D(e){return e<16?"0"+e.toString(16):e.toString(16)}function L(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function R(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(I,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function B(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function F(e){return e!=e}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":13,buffer:17,ieee754:23}],18:[function(e,t,n){(function(r){(function(){n.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const n="color: "+this.color;e.splice(1,0,n,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(e=>{"%%"!==e&&"%c"===e&&(i=++r)})),e.splice(i,0,n)},n.save=function(e){try{e?n.storage.setItem("debug",e):n.storage.removeItem("debug")}catch(t){}},n.load=function(){let e;try{e=n.storage.getItem("debug")}catch(t){}return!e&&void 0!==r&&"env"in r&&(e=r.env.DEBUG),e},n.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},n.storage=function(){try{return localStorage}catch(e){}}(),n.destroy=(()=>{let e=!1;return()=>{e||(e=!0)}})(),n.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],n.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(n);const{formatters:i}=t.exports;i.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}}).call(this)}).call(this,e("_process"))},{"./common":19,_process:50}],19:[function(e,t,n){t.exports=function(t){function n(e){let t,i,o,a=null;function s(...e){if(!s.enabled)return;const r=s,i=Number(new Date),o=i-(t||i);r.diff=o,r.prev=t,r.curr=i,t=i,e[0]=n.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,((t,i)=>{if("%%"===t)return"%";a++;const o=n.formatters[i];if("function"==typeof o){const n=e[a];t=o.call(r,n),e.splice(a,1),a--}return t})),n.formatArgs.call(r,e),(r.log||n.log).apply(r,e)}return s.namespace=e,s.useColors=n.useColors(),s.color=n.selectColor(e),s.extend=r,s.destroy=n.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==n.namespaces&&(i=n.namespaces,o=n.enabled(e)),o),set:e=>{a=e}}),"function"==typeof n.init&&n.init(s),s}function r(e,t){const r=n(this.namespace+(void 0===t?":":t)+e);return r.log=this.log,r}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return n.debug=n,n.default=n,n.coerce=function(e){return e instanceof Error?e.stack||e.message:e},n.disable=function(){const e=[...n.names.map(i),...n.skips.map(i).map((e=>"-"+e))].join(",");return n.enable(""),e},n.enable=function(e){let t;n.save(e),n.namespaces=e,n.names=[],n.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(t=0;t<i;t++)r[t]&&("-"===(e=r[t].replace(/\*/g,".*?"))[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))},n.enabled=function(e){if("*"===e[e.length-1])return!0;let t,r;for(t=0,r=n.skips.length;t<r;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;t<r;t++)if(n.names[t].test(e))return!0;return!1},n.humanize=e("ms"),n.destroy=function(){},Object.keys(t).forEach((e=>{n[e]=t[e]})),n.names=[],n.skips=[],n.formatters={},n.selectColor=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return n.colors[Math.abs(t)%n.colors.length]},n.enable(n.load()),n}},{ms:45}],20:[function(e,t,n){(function(n,r){(function(){var i=e("readable-stream"),o=e("end-of-stream"),a=e("inherits"),s=e("stream-shift"),l=r.from&&r.from!==Uint8Array.from?r.from([0]):new r([0]),c=function(e,t){e._corked?e.once("uncork",t):t()},u=function(e,t){return function(n){var r,i;n?(r=e,i="premature close"===n.message?null:n,r._autoDestroy&&r.destroy(i)):t&&!e._ended&&e.end()}},h=function(){},d=function(e,t,n){if(!(this instanceof d))return new d(e,t,n);i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!n||!1!==n.autoDestroy,this._forwardDestroy=!n||!1!==n.destroy,this._forwardEnd=!n||!1!==n.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)};a(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1==++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)e&&e.destroy&&e.destroy();else if(null!==e&&!1!==e){var t=this,r=o(e,{writable:!0,readable:!1},u(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&n.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=function(){t._writable.removeListener("drain",i),r()},this.uncork()}else this.end()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)e&&e.destroy&&e.destroy();else{if(null===e||!1===e)return this.push(null),void this.resume();var t,n=this,r=o(e,{writable:!1,readable:!0},u(this)),a=function(){n._forward()},s=function(){n.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:(t=e,new i.Readable({objectMode:!0,highWaterMark:16}).wrap(t)),this._readable2.on("readable",a),this._readable2.on("end",s),this._unread=function(){n._readable2.removeListener("readable",a),n._readable2.removeListener("end",s),r()},this._forward()}},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){var e;for(this._forwarding=!0;this._drained&&null!==(e=s(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e,t){if(t||(t=h),this.destroyed)return t(null);this.destroyed=!0;var r=this;n.nextTick((function(){r._destroy(e),t(null)}))},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){if(!this.destroyed)return this._corked?c(this,this._write.bind(this,e,t,n)):e===l?this._finish(n):this._writable?void(!1===this._writable.write(e)?this._ondrain=n:this.destroyed||n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),c(this,(function(){var n,r;r=function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),c(t,e)},(n=t._forwardEnd&&t._writable)?n._writableState&&n._writableState.finished?r():n._writableState?n.end(r):(n.end(),r()):r()}))},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this._writableState.destroyed||this.write(l),i.Writable.prototype.end.call(this,n))},t.exports=d}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:50,buffer:17,"end-of-stream":21,inherits:24,"readable-stream":69,"stream-shift":74}],21:[function(e,t,n){(function(n){(function(){var r=e("once"),i=function(){},o=function(e,t,a){if("function"==typeof t)return o(e,null,t);t||(t={}),a=r(a||i);var s,l=e._writableState,c=e._readableState,u=t.readable||!1!==t.readable&&e.readable,h=t.writable||!1!==t.writable&&e.writable,d=!1,f=function(){e.writable||p()},p=function(){h=!1,u||a.call(e)},g=function(){u=!1,h||a.call(e)},m=function(t){a.call(e,t?new Error("exited with error code: "+t):null)},v=function(t){a.call(e,t)},y=function(){n.nextTick(b)},b=function(){if(!d)return(!u||c&&c.ended&&!c.destroyed)&&(!h||l&&l.ended&&!l.destroyed)?void 0:a.call(e,new Error("premature close"))},x=function(){e.req.on("finish",p)};return(s=e).setHeader&&"function"==typeof s.abort?(e.on("complete",p),e.on("abort",y),e.req?x():e.on("request",x)):h&&!l&&(e.on("end",f),e.on("close",f)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",m),e.on("end",g),e.on("finish",p),!1!==t.error&&e.on("error",v),e.on("close",y),function(){d=!0,e.removeListener("complete",p),e.removeListener("abort",y),e.removeListener("request",x),e.req&&e.req.removeListener("finish",p),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("exit",m),e.removeListener("end",g),e.removeListener("error",v),e.removeListener("close",y)}};t.exports=o}).call(this)}).call(this,e("_process"))},{_process:50,once:48}],22:[function(e,t,n){var r=Object.create||function(e){var t=function(){};return t.prototype=e,new t},i=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return n},o=Function.prototype.bind||function(e){var t=this;return function(){return t.apply(e,arguments)}};function a(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=r(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}t.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._maxListeners=void 0;var s,l=10;try{var c={};Object.defineProperty&&Object.defineProperty(c,"x",{value:0}),s=0===c.x}catch(v){s=!1}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var o,a,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((a=e._events)?(a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]):(a=e._events=r(null),e._eventsCount=0),s){if("function"==typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&(o=u(e))&&o>0&&s.length>o){s.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(t)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=s.length,"object"==typeof console&&console.warn}}else s=a[t]=n,++e._eventsCount;return e}function d(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];this.listener.apply(this.target,e)}}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=o.call(d,r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(!r)return[];var i=r[t];return i?"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):m(i,i.length):[]}function g(e){var t=this._events;if(t){var n=t[e];if("function"==typeof n)return 1;if(n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}s?Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||e!=e)throw new TypeError('"defaultMaxListeners" must be a positive number');l=e}}):a.defaultMaxListeners=l,a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){var t,n,r,i,o,a,s="error"===e;if(a=this._events)s=s&&null==a.error;else if(!s)return!1;if(s){if(arguments.length>1&&(t=arguments[1]),t instanceof Error)throw t;var l=new Error('Unhandled "error" event. ('+t+")");throw l.context=t,l}if(!(n=a[e]))return!1;var c="function"==typeof n;switch(r=arguments.length){case 1:!function(e,t,n){if(t)e.call(n);else for(var r=e.length,i=m(e,r),o=0;o<r;++o)i[o].call(n)}(n,c,this);break;case 2:!function(e,t,n,r){if(t)e.call(n,r);else for(var i=e.length,o=m(e,i),a=0;a<i;++a)o[a].call(n,r)}(n,c,this,arguments[1]);break;case 3:!function(e,t,n,r,i){if(t)e.call(n,r,i);else for(var o=e.length,a=m(e,o),s=0;s<o;++s)a[s].call(n,r,i)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(e,t,n,r,i,o){if(t)e.call(n,r,i,o);else for(var a=e.length,s=m(e,a),l=0;l<a;++l)s[l].call(n,r,i,o)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(i=new Array(r-1),o=1;o<r;o++)i[o-1]=arguments[o];!function(e,t,n,r){if(t)e.apply(n,r);else for(var i=e.length,o=m(e,i),a=0;a<i;++a)o[a].apply(n,r)}(n,c,this,i)}return!0},a.prototype.addListener=function(e,t){return h(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return h(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.on(e,f(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');return this.prependListener(e,f(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,o,a,s;if("function"!=typeof t)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=r(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){s=n[a].listener,o=a;break}if(o<0)return this;0===o?n.shift():function(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}(n,o),1===n.length&&(i[e]=n[0]),i.removeListener&&this.emit("removeListener",e,s||t)}return this},a.prototype.removeAllListeners=function(e){var t,n,o;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=r(null),this._eventsCount=0):n[e]&&(0==--this._eventsCount?this._events=r(null):delete n[e]),this;if(0===arguments.length){var a,s=i(n);for(o=0;o<s.length;++o)"removeListener"!==(a=s[o])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=r(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(t)for(o=t.length-1;o>=0;o--)this.removeListener(e,t[o]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):g.call(e,t)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],23:[function(e,t,n){n.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?i-1:0,d=n?-1:1,f=e[t+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=c}return(f?-1:1)*a*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var a,s,l,c=8*o-i-1,u=(1<<c)-1,h=u>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+f]=255&a,f+=p,a/=256,c-=8);e[n+f-p]|=128*g}},{}],24:[function(e,t,n){"function"==typeof Object.create?t.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},{}],25:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=e,this.value=t}return e.prototype.rotateLeft=function(){var e=this.parent,t=this.brother,n=this.leftChild,r=this.rightChild;if(!r)throw new Error("unknown error");var i=r.leftChild,o=r.rightChild;return e&&(e.leftChild===this?e.leftChild=r:e.rightChild===this&&(e.rightChild=r)),r.parent=e,r.brother=t,r.leftChild=this,r.rightChild=o,t&&(t.brother=r),this.parent=r,this.brother=o,this.leftChild=n,this.rightChild=i,o&&(o.parent=r,o.brother=this),n&&(n.parent=this,n.brother=i),i&&(i.parent=this,i.brother=n),r},e.prototype.rotateRight=function(){var e=this.parent,t=this.brother,n=this.leftChild;if(!n)throw new Error("unknown error");var r=this.rightChild,i=n.leftChild,o=n.rightChild;return e&&(e.leftChild===this?e.leftChild=n:e.rightChild===this&&(e.rightChild=n)),n.parent=e,n.brother=t,n.leftChild=i,n.rightChild=this,t&&(t.brother=n),i&&(i.parent=n,i.brother=this),this.parent=n,this.brother=i,this.leftChild=o,this.rightChild=r,o&&(o.parent=this,o.brother=r),r&&(r.parent=this,r.brother=o),n},e.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},e.TreeNodeColorType={red:!0,black:!1},e}();Object.freeze(r),n.default=r},{}],26:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function i(e){var t=this;void 0===e&&(e=[]);var n=[],o=0,a=0,s=0,l=0,c=0,u=0;this.size=function(){return u},this.empty=function(){return 0===u},this.clear=function(){o=s=a=l=c=u=0,d.call(this,i.bucketSize),u=0},this.front=function(){return n[o][a]},this.back=function(){return n[s][l]},this.forEach=function(e){if(!this.empty()){var t=0;if(o!==s){for(c=a;c<i.bucketSize;++c)e(n[o][c],t++);for(c=o+1;c<s;++c)for(var r=0;r<i.bucketSize;++r)e(n[c][r],t++);for(c=0;c<=l;++c)e(n[s][c],t++)}else for(var c=a;c<=l;++c)e(n[o][c],t++)}};var h=function(e){var t=o*i.bucketSize+a,n=t+e,r=s*i.bucketSize+l;if(n<t||n>r)throw new Error("pos should more than 0 and less than queue's size");return{curNodeBucketIndex:Math.floor(n/i.bucketSize),curNodePointerIndex:n%i.bucketSize}};this.getElementByPos=function(e){var t=h(e),r=t.curNodeBucketIndex,i=t.curNodePointerIndex;return n[r][i]},this.eraseElementByPos=function(e){var t=this;if(e<0||e>u)throw new Error("pos should more than 0 and less than queue's size");if(0===e)this.popFront();else if(e===this.size())this.popBack();else{for(var n=[],r=e+1;r<u;++r)n.push(this.getElementByPos(r));this.cut(e),this.popBack(),n.forEach((function(e){return t.pushBack(e)}))}},this.eraseElementByValue=function(e){if(!this.empty()){var t=[];this.forEach((function(n){n!==e&&t.push(n)}));for(var n=t.length,r=0;r<n;++r)this.setElementByPos(r,t[r]);this.cut(n-1)}};var d=function(e){for(var t=[],r=e*i.sigma,h=Math.max(Math.ceil(r/i.bucketSize),2),d=0;d<h;++d)t.push(new Array(i.bucketSize));var f=Math.ceil(e/i.bucketSize),p=Math.floor(h/2)-Math.floor(f/2),g=p,m=0;if(this.size())for(d=0;d<f;++d){for(var v=0;v<i.bucketSize;++v)if(t[p+d][v]=this.front(),this.popFront(),this.empty()){g=p+d,m=v;break}if(this.empty())break}n=t,o=p,a=0,s=g,l=m,c=h,u=e};this.pushBack=function(e){this.empty()||(s===c-1&&l===i.bucketSize-1&&d.call(this,this.size()),l<i.bucketSize-1?++l:s<c-1&&(++s,l=0)),++u,n[s][l]=e},this.popBack=function(){this.empty()||(1!==this.size()&&(l>0?--l:o<s&&(--s,l=i.bucketSize-1)),u>0&&--u)},this.setElementByPos=function(e,t){var r=h(e),i=r.curNodeBucketIndex,o=r.curNodePointerIndex;n[i][o]=t},this.insert=function(e,t,n){var r=this;if(void 0===n&&(n=1),0===e)for(;n--;)this.pushFront(t);else if(e===this.size())for(;n--;)this.pushBack(t);else{for(var i=[],o=e;o<u;++o)i.push(this.getElementByPos(o));for(this.cut(e-1),o=0;o<n;++o)this.pushBack(t);i.forEach((function(e){return r.pushBack(e)}))}},this.find=function(e){if(o===s){for(var t=a;t<=l;++t)if(n[o][t]===e)return!0;return!1}for(t=a;t<i.bucketSize;++t)if(n[o][t]===e)return!0;for(t=o+1;t<s;++t)for(var r=0;r<i.bucketSize;++r)if(n[t][r]===e)return!0;for(t=0;t<=l;++t)if(n[s][t]===e)return!0;return!1},this.reverse=function(){for(var e=0,t=u-1;e<t;){var n=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,n),++e,--t}},this.unique=function(){if(!this.empty()){var e=[],t=this.front();this.forEach((function(n,r){0!==r&&n===t||(e.push(n),t=n)}));for(var n=0;n<u;++n)this.setElementByPos(n,e[n]);this.cut(e.length-1)}},this.sort=function(e){var t=[];this.forEach((function(e){t.push(e)})),t.sort(e);for(var n=0;n<u;++n)this.setElementByPos(n,t[n])},this.pushFront=function(e){this.empty()||(0===o&&0===a&&d.call(this,this.size()),a>0?--a:o>0&&(--o,a=i.bucketSize-1)),++u,n[o][a]=e},this.popFront=function(){this.empty()||(1!==this.size()&&(a<i.bucketSize-1?++a:o<s&&(++o,a=0)),u>0&&--u)},this.shrinkToFit=function(){var e=this,t=[];this.forEach((function(e){t.push(e)}));var r=t.length;n=[];for(var o=Math.ceil(r/i.bucketSize),a=0;a<o;++a)n.push(new Array(i.bucketSize));this.clear(),t.forEach((function(t){return e.pushBack(t)}))},this.cut=function(e){if(e<0)this.clear();else{var t=h(e),n=t.curNodeBucketIndex,r=t.curNodePointerIndex;s=n,l=r,u=e+1}},this[Symbol.iterator]=function(){return function(){var e,t;return r(this,(function(r){switch(r.label){case 0:if(0===u)return[2];if(o!==s)return[3,5];t=a,r.label=1;case 1:return t<=l?[4,n[o][t]]:[3,4];case 2:r.sent(),r.label=3;case 3:return++t,[3,1];case 4:return[2];case 5:t=a,r.label=6;case 6:return t<i.bucketSize?[4,n[o][t]]:[3,9];case 7:r.sent(),r.label=8;case 8:return++t,[3,6];case 9:t=o+1,r.label=10;case 10:if(!(t<s))return[3,15];e=0,r.label=11;case 11:return e<i.bucketSize?[4,n[t][e]]:[3,14];case 12:r.sent(),r.label=13;case 13:return++e,[3,11];case 14:return++t,[3,10];case 15:t=0,r.label=16;case 16:return t<=l?[4,n[s][t]]:[3,19];case 17:r.sent(),r.label=18;case 18:return++t,[3,16];case 19:return[2]}}))}()},function(){var r=i.bucketSize;e.size?r=e.size():e.length&&(r=e.length);var a=r*i.sigma;c=Math.ceil(a/i.bucketSize),c=Math.max(c,3);for(var l=0;l<c;++l)n.push(new Array(i.bucketSize));var u=Math.ceil(r/i.bucketSize);o=Math.floor(c/2)-Math.floor(u/2),s=o,e.forEach((function(e){return t.pushBack(e)}))}(),Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0}),i.sigma=3,i.bucketSize=5e3,Object.freeze(i),n.default=i},{}],27:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../LinkList/LinkList"),a=e("../Map/Map");function s(e,t,n){var l=this;if(void 0===e&&(e=[]),void 0===t&&(t=s.initSize),n=n||function(e){var t,n,r=0,o="";if("number"==typeof e)r=((r=Math.floor(e))<<5)-r,r&=r;else{o="string"!=typeof e?JSON.stringify(e):e;try{for(var a=i(o),s=a.next();!s.done;s=a.next())r=(r<<5)-r+s.value.charCodeAt(0),r&=r}catch(l){t={error:l}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}return r^r>>>16},0!=(t&t-1))throw new Error("initBucketNum must be 2 to the power of n");var c=0,u=[],h=Math.max(s.initSize,Math.min(s.maxSize,t));this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){c=0,h=t,u=[]},this.forEach=function(e){var t=0;u.forEach((function(n){n.forEach((function(n){e(n,t++)}))}))},this.setElement=function(e,t){var r,l;if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=t){var d=n(e)&h-1;if(u[d]){var f=u[d].size();if(u[d]instanceof o.default){try{for(var p=i(u[d]),g=p.next();!g.done;g=p.next()){var m=g.value;if(m.key===e)return void(m.value=t)}}catch(y){r={error:y}}finally{try{g&&!g.done&&(l=p.return)&&l.call(p)}finally{if(r)throw r.error}}u[d].pushBack({key:e,value:t}),u[d].size()>=s.treeifyThreshold&&(u[d]=new a.default(u[d]))}else u[d].setElement(e,t);var v=u[d].size();c+=v-f}else++c,u[d]=new o.default([{key:e,value:t}]);c>h*s.sigma&&function(e){if(!(e>=s.maxSize)){h=2*e;var t=[];u.forEach((function(r,i){if(!r.empty()){if(r instanceof o.default&&1===r.size()){var l=r.front(),c=l.key,d=l.value;t[n(c)&h-1]=new o.default([{key:c,value:d}])}else if(r instanceof a.default){var f=new o.default,p=new o.default;r.forEach((function(t){0==(n(t.key)&e)?f.pushBack(t):p.pushBack(t)})),f.size()>s.untreeifyThreshold?t[i]=new a.default(f):f.size()&&(t[i]=f),p.size()>s.untreeifyThreshold?t[i+e]=new a.default(p):p.size()&&(t[i+e]=p)}else{var g=new o.default,m=new o.default;r.forEach((function(t){0==(n(t.key)&e)?g.pushBack(t):m.pushBack(t)})),g.size()&&(t[i]=g),m.size()&&(t[i+e]=m)}u[i].clear()}})),u=t}}.call(this,h)}else this.eraseElementByKey(e)},this.getElementByKey=function(e){var t,r,o=n(e)&h-1;if(u[o]){if(u[o]instanceof a.default)return u[o].getElementByKey(e);try{for(var s=i(u[o]),l=s.next();!l.done;l=s.next()){var c=l.value;if(c.key===e)return c.value}}catch(d){t={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}}},this.eraseElementByKey=function(e){var t,r,l=n(e)&h-1;if(u[l]){var d=u[l].size();if(u[l]instanceof a.default)u[l].eraseElementByKey(e),u[l].size()<=s.untreeifyThreshold&&(u[l]=new o.default(u[l]));else{var f=-1;try{for(var p=i(u[l]),g=p.next();!g.done;g=p.next())if(++f,g.value.key===e){u[l].eraseElementByPos(f);break}}catch(v){t={error:v}}finally{try{g&&!g.done&&(r=p.return)&&r.call(p)}finally{if(t)throw t.error}}}var m=u[l].size();c+=m-d}},this.find=function(e){var t,r,o=n(e)&h-1;if(!u[o])return!1;if(u[o]instanceof a.default)return u[o].find(e);try{for(var s=i(u[o]),l=s.next();!l.done;l=s.next())if(l.value.key===e)return!0}catch(c){t={error:c}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return!1},this[Symbol.iterator]=function(){return function(){var e,t,n,o,a,s;return r(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<h))return[3,10];for(;e<h&&!u[e];)++e;if(e>=h)return[3,10];r.label=2;case 2:r.trys.push([2,7,8,9]),a=void 0,t=i(u[e]),n=t.next(),r.label=3;case 3:return n.done?[3,6]:[4,n.value];case 4:r.sent(),r.label=5;case 5:return n=t.next(),[3,3];case 6:return[3,9];case 7:return o=r.sent(),a={error:o},[3,9];case 8:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(a)throw a.error}return[7];case 9:return++e,[3,1];case 10:return[2]}}))}()},e.forEach((function(e){var t=e.key,n=e.value;return l.setElement(t,n)})),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),n.default=s},{"../LinkList/LinkList":29,"../Map/Map":30}],28:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Set/Set"),a=e("../LinkList/LinkList");function s(e,t,n){var l=this;if(void 0===e&&(e=[]),void 0===t&&(t=s.initSize),n=n||function(e){var t=0,n="";if("number"==typeof e)t=((t=Math.floor(e))<<5)-t,t&=t;else{n="string"!=typeof e?JSON.stringify(e):e;for(var r=0;r<n.length;r++)t=(t<<5)-t+n.charCodeAt(r),t&=t}return t^t>>>16},0!=(t&t-1))throw new Error("initBucketNum must be 2 to the power of n");var c=0,u=[],h=Math.max(s.initSize,Math.min(s.maxSize,t));this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){c=0,h=t,u=[]},this.forEach=function(e){var t=0;u.forEach((function(n){n.forEach((function(n){e(n,t++)}))}))},this.insert=function(e){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var t=n(e)&h-1;if(u[t]){var r=u[t].size();if(u[t]instanceof a.default){if(u[t].find(e))return;u[t].pushBack(e),u[t].size()>=s.treeifyThreshold&&(u[t]=new o.default(u[t]))}else u[t].insert(e);var i=u[t].size();c+=i-r}else u[t]=new a.default([e]),++c;c>h*s.sigma&&function(e){if(!(e>=s.maxSize)){h=2*e;var t=[];u.forEach((function(r,i){if(!r.empty()){if(r instanceof a.default&&1===r.size()){var l=r.front();if(void 0===l)throw new Error("unknown error");t[n(l)&h-1]=new a.default([l])}else if(r instanceof o.default){var c=new a.default,d=new a.default;r.forEach((function(t){0==(n(t)&e)?c.pushBack(t):d.pushBack(t)})),c.size()>s.untreeifyThreshold?t[i]=new o.default(c):c.size()&&(t[i]=c),d.size()>s.untreeifyThreshold?t[i+e]=new o.default(d):d.size()&&(t[i+e]=d)}else{var f=new a.default,p=new a.default;r.forEach((function(t){0==(n(t)&e)?f.pushBack(t):p.pushBack(t)})),f.size()&&(t[i]=f),p.size()&&(t[i+e]=p)}u[i].clear()}})),u=t}}.call(this,h)},this.eraseElementByValue=function(e){var t=n(e)&h-1;if(u[t]){var r=u[t].size();u[t].eraseElementByValue(e),u[t]instanceof o.default&&u[t].size()<=s.untreeifyThreshold&&(u[t]=new a.default(u[t]));var i=u[t].size();c+=i-r}},this.find=function(e){var t=n(e)&h-1;return!!u[t]&&u[t].find(e)},this[Symbol.iterator]=function(){return function(){var e,t,n,o,a,s;return r(this,(function(r){switch(r.label){case 0:e=0,r.label=1;case 1:if(!(e<h))return[3,10];for(;e<h&&!u[e];)++e;if(e>=h)return[3,10];r.label=2;case 2:r.trys.push([2,7,8,9]),a=void 0,t=i(u[e]),n=t.next(),r.label=3;case 3:return n.done?[3,6]:[4,n.value];case 4:r.sent(),r.label=5;case 5:return n=t.next(),[3,3];case 6:return[3,9];case 7:return o=r.sent(),a={error:o},[3,9];case 8:try{n&&!n.done&&(s=t.return)&&s.call(t)}finally{if(a)throw a.error}return[7];case 9:return++e,[3,1];case 10:return[2]}}))}()},e.forEach((function(e){return l.insert(e)})),Object.freeze(this)}s.initSize=16,s.maxSize=1<<30,s.sigma=.75,s.treeifyThreshold=8,s.untreeifyThreshold=6,s.minTreeifySize=64,Object.freeze(s),n.default=s},{"../LinkList/LinkList":29,"../Set/Set":33}],29:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};Object.defineProperty(n,"__esModule",{value:!0});var i=function(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e};function o(e){var t=this;void 0===e&&(e=[]);var n=0,o=void 0,a=void 0;this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){o=a=void 0,n=0},this.front=function(){return null==o?void 0:o.value},this.back=function(){return null==a?void 0:a.value},this.forEach=function(e){for(var t=o,n=0;t;){if(void 0===t.value)throw new Error("unknown error");e(t.value,n++),t=t.next}},this.getElementByPos=function(e){if(e<0||e>=n)throw new Error("pos must more then 0 and less then the list length");for(var t=o;e--&&t;)t=t.next;if(!t||void 0===t.value)throw new Error("unknown error");return t.value},this.eraseElementByPos=function(e){if(e<0||e>=n)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.popFront();else if(e===n-1)this.popBack();else{for(var t=o;e--;){if(!(null==t?void 0:t.next))throw new Error("unknown error");t=t.next}if(!t||!t.pre||!t.next)throw new Error("unknown error");var r=t.pre,i=t.next;i.pre=r,r.next=i,n>0&&--n}},this.eraseElementByValue=function(e){for(;o&&o.value===e;)this.popFront();for(;a&&a.value===e;)this.popBack();if(o)for(var t=o;t;){if(t.value===e){var r=t.pre,i=t.next;i&&(i.pre=r),r&&(r.next=i),n>0&&--n}t=t.next}},this.pushBack=function(e){if(null==e)throw new Error("you can't push null or undefined here");++n;var t=new i(e);a?(a.next=t,t.pre=a,a=t):o=a=t},this.popBack=function(){a&&(n>0&&--n,a&&(o===a?o=a=void 0:(a=a.pre)&&(a.next=void 0)))},this.setElementByPos=function(e,t){if(null==t)throw new Error("you can't set null or undefined here");if(e<0||e>=n)throw new Error("pos must more then 0 and less then the list length");for(var r=o;e--;){if(!r)throw new Error("unknown error");r=r.next}r&&(r.value=t)},this.insert=function(e,t,r){if(void 0===r&&(r=1),null==t)throw new Error("you can't insert null or undefined here");if(e<0||e>n)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(r<0)throw new Error("insert size must more than 0");if(0===e)for(;r--;)this.pushFront(t);else if(e===n)for(;r--;)this.pushBack(t);else{for(var a=o,s=1;s<e;++s){if(!(null==a?void 0:a.next))throw new Error("unknown error");a=null==a?void 0:a.next}if(!a)throw new Error("unknown error");var l=a.next;for(n+=r;r--;)a.next=new i(t),a.next.pre=a,a=a.next;a.next=l,l&&(l.pre=a)}},this.find=function(e){for(var t=o;t;){if(t.value===e)return!0;t=t.next}return!1},this.reverse=function(){for(var e=o,t=a,r=0;e&&t&&2*r<n;){var i=e.value;e.value=t.value,t.value=i,e=e.next,t=t.pre,++r}},this.unique=function(){for(var e=o;e;){for(var t=e;t&&t.next&&t.value===t.next.value;)t=t.next,n>0&&--n;e.next=t.next,e.next&&(e.next.pre=e),e=e.next}},this.sort=function(e){var t=[];this.forEach((function(e){t.push(e)})),t.sort(e);var n=o;t.forEach((function(e){n&&(n.value=e,n=n.next)}))},this.pushFront=function(e){if(null==e)throw new Error("you can't push null or undefined here");++n;var t=new i(e);o?(t.next=o,o.pre=t,o=t):o=a=t},this.popFront=function(){o&&(n>0&&--n,o&&(o===a?o=a=void 0:(o=o.next)&&(o.pre=void 0)))},this.merge=function(e){var t=this,r=o;e.forEach((function(e){for(;r&&void 0!==r.value&&r.value<=e;)r=r.next;if(void 0===r)t.pushBack(e),r=a;else if(r===o)t.pushFront(e),r=o;else{++n;var s=r.pre;s&&(s.next=new i(e),s.next.pre=s,s.next.next=r,r&&(r.pre=s.next))}}))},this[Symbol.iterator]=function(){return function(){var e;return r(this,(function(t){switch(t.label){case 0:e=o,t.label=1;case 1:if(void 0===e)return[3,3];if(!e.value)throw new Error("unknown error");return[4,e.value];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2]}}))}()},e.forEach((function(e){return t.pushBack(e)})),Object.freeze(this)}Object.freeze(o),n.default=o},{}],30:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Base/TreeNode");function a(e,t){var n=this;void 0===e&&(e=[]),t=t||function(e,t){return e<t?-1:e>t?1:0};var a=0,s=new o.default;s.color=o.default.TreeNodeColorType.black,this.size=function(){return a},this.empty=function(){return 0===a},this.clear=function(){a=0,s.key=s.value=void 0,s.leftChild=s.rightChild=s.brother=void 0};var l=function(e){if(!e||void 0===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},c=function(e){if(!e||void 0===e.key)throw new Error("unknown error");return e.rightChild?c(e.rightChild):e};this.front=function(){if(!this.empty()){var e=l(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.back=function(){if(!this.empty()){var e=c(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.forEach=function(e){var t,n,r=0;try{for(var o=i(this),a=o.next();!a.done;a=o.next())e(a.value,r++)}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},this.getElementByPos=function(e){var t,n;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var r=0;try{for(var o=i(this),a=o.next();!a.done;a=o.next()){var s=a.value;if(r===e)return s;++r}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}throw new Error("unknown Error")};var u=function(e,n){if(e&&void 0!==e.key&&void 0!==e.value){var r=t(e.key,n);return 0===r?{key:e.key,value:e.value}:r<0?u(e.rightChild,n):u(e.leftChild,n)||{key:e.key,value:e.value}}};this.lowerBound=function(e){return u(s,e)};var h=function(e,n){if(e&&void 0!==e.key&&void 0!==e.value)return t(e.key,n)<=0?h(e.rightChild,n):h(e.leftChild,n)||{key:e.key,value:e.value}};this.upperBound=function(e){return h(s,e)};var d=function(e,n){if(e&&void 0!==e.key&&void 0!==e.value){var r=t(e.key,n);return 0===r?{key:e.key,value:e.value}:r>0?d(e.leftChild,n):d(e.rightChild,n)||{key:e.key,value:e.value}}};this.reverseLowerBound=function(e){return d(s,e)};var f=function(e,n){if(e&&void 0!==e.key&&void 0!==e.value)return t(e.key,n)>=0?f(e.leftChild,n):f(e.rightChild,n)||{key:e.key,value:e.value}};this.reverseUpperBound=function(e){return f(s,e)};var p=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color!==o.default.TreeNodeColorType.red){var n=e.brother;if(!n)throw new Error("unknown error");if(e===t.leftChild)if(n.color===o.default.TreeNodeColorType.red){n.color=o.default.TreeNodeColorType.black,t.color=o.default.TreeNodeColorType.red;var r=t.rotateLeft();s===t&&(s=r),p(e)}else n.color===o.default.TreeNodeColorType.black&&(n.rightChild&&n.rightChild.color===o.default.TreeNodeColorType.red?(n.color=t.color,t.color=o.default.TreeNodeColorType.black,n.rightChild&&(n.rightChild.color=o.default.TreeNodeColorType.black),r=t.rotateLeft(),s===t&&(s=r),e.color=o.default.TreeNodeColorType.black):n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||!n.leftChild||n.leftChild.color!==o.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||(n.color=o.default.TreeNodeColorType.red,p(t)):(n.color=o.default.TreeNodeColorType.red,n.leftChild&&(n.leftChild.color=o.default.TreeNodeColorType.black),r=n.rotateRight(),s===n&&(s=r),p(e)));else e===t.rightChild&&(n.color===o.default.TreeNodeColorType.red?(n.color=o.default.TreeNodeColorType.black,t.color=o.default.TreeNodeColorType.red,r=t.rotateRight(),s===t&&(s=r),p(e)):n.color===o.default.TreeNodeColorType.black&&(n.leftChild&&n.leftChild.color===o.default.TreeNodeColorType.red?(n.color=t.color,t.color=o.default.TreeNodeColorType.black,n.leftChild&&(n.leftChild.color=o.default.TreeNodeColorType.black),r=t.rotateRight(),s===t&&(s=r),e.color=o.default.TreeNodeColorType.black):n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||!n.rightChild||n.rightChild.color!==o.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||(n.color=o.default.TreeNodeColorType.red,p(t)):(n.color=o.default.TreeNodeColorType.red,n.rightChild&&(n.rightChild.color=o.default.TreeNodeColorType.black),r=n.rotateLeft(),s===n&&(s=r),p(e))))}else e.color=o.default.TreeNodeColorType.black},g=function(e){for(var t=e;t.leftChild||t.rightChild;){if(t.rightChild){t=l(t.rightChild);var n=e.key;e.key=t.key,t.key=n;var r=e.value;e.value=t.value,t.value=r,e=t}t.leftChild&&(t=c(t.leftChild),n=e.key,e.key=t.key,t.key=n,r=e.value,e.value=t.value,t.value=r,e=t)}p(t),t&&t.remove(),--a,s.color=o.default.TreeNodeColorType.black},m=function(e,t){return!(!e||void 0===e.key)&&(!!m(e.leftChild,t)||!!t(e)||m(e.rightChild,t))};this.eraseElementByPos=function(e){if(e<0||e>=a)throw new Error("pos must more than 0 and less than set's size");var t=0;m(s,(function(n){return e===t?(g(n),!0):(++t,!1)}))},this.eraseElementByKey=function(e){if(!this.empty()){var n=b(s,e);void 0!==n&&void 0!==n.key&&0===t(n.key,e)&&g(n)}};var v=function(e,n){if(!e||void 0===e.key)throw new Error("unknown error");var r=t(n,e.key);return r<0?e.leftChild?v(e.leftChild,n):(e.leftChild=new o.default,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):r>0?e.rightChild?v(e.rightChild,n):(e.rightChild=new o.default,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},y=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==o.default.TreeNodeColorType.black&&t.color===o.default.TreeNodeColorType.red){var n=t.brother,r=t.parent;if(!r)throw new Error("unknown error");if(n&&n.color===o.default.TreeNodeColorType.red)n.color=t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,y(r);else if(!n||n.color===o.default.TreeNodeColorType.black)if(t===r.leftChild)if(e===t.leftChild){t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red;var i=r.rotateRight();r===s&&(s=i)}else e===t.rightChild&&(i=t.rotateLeft(),r===s&&(s=i),y(t));else t===r.rightChild&&(e===t.leftChild?(i=t.rotateRight(),r===s&&(s=i),y(t)):e===t.rightChild&&(t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,i=r.rotateLeft(),r===s&&(s=i)))}};this.setElement=function(e,n){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null!=n){if(this.empty())return++a,s.key=e,s.value=n,void(s.color=o.default.TreeNodeColorType.black);var r=v(s,e);void 0===r.key||0!==t(r.key,e)?(++a,r.key=e,r.value=n,y(r),s.color=o.default.TreeNodeColorType.black):r.value=n}else this.eraseElementByKey(e)};var b=function(e,n){if(e&&void 0!==e.key){var r=t(n,e.key);return r<0?b(e.leftChild,n):r>0?b(e.rightChild,n):e}};this.find=function(e){return!!b(s,e)},this.getElementByKey=function(e){var t=b(s,e);if(void 0===(null==t?void 0:t.key)||void 0===(null==t?void 0:t.value))throw new Error("unknown error");return t.value},this.union=function(e){var t=this;e.forEach((function(e){var n=e.key,r=e.value;return t.setElement(n,r)}))},this.getHeight=function(){if(this.empty())return 0;var e=function(t){return t?Math.max(e(t.leftChild),e(t.rightChild))+1:1};return e(s)};var x=function(e){return r(this,(function(t){switch(t.label){case 0:return e&&void 0!==e.key&&void 0!==e.value?[5,i(x(e.leftChild))]:[2];case 1:return t.sent(),[4,{key:e.key,value:e.value}];case 2:return t.sent(),[5,i(x(e.rightChild))];case 3:return t.sent(),[2]}}))};this[Symbol.iterator]=function(){return x(s)},e.forEach((function(e){var t=e.key,r=e.value;return n.setElement(t,r)})),Object.freeze(this)}Object.freeze(a),n.default=a},{"../Base/TreeNode":25}],31:[function(e,t,n){function r(e,t){void 0===e&&(e=[]),t=t||function(e,t){return e>t?-1:e<t?1:0};var n=[];e.forEach((function(e){return n.push(e)}));var r=n.length,i=function(e,t){if(e<0||e>=r)throw new Error("unknown error");if(t<0||t>=r)throw new Error("unknown error");var i=n[e];n[e]=n[t],n[t]=i},o=function(e){if(e<0||e>=r)throw new Error("unknown error");var o=2*e+1,a=2*e+2;o<r&&t(n[e],n[o])>0&&i(e,o),a<r&&t(n[e],n[a])>0&&i(e,a)};!function(){for(var e=Math.floor((r-1)/2);e>=0;--e)for(var o=e,a=2*o+1;a<r;){var s=a+1,l=a;if(s<r&&t(n[a],n[s])>0&&(l=s),t(n[o],n[l])<=0)break;i(o,l),a=2*(o=l)+1}}(),this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,n.length=0},this.push=function(e){if(n.push(e),1!=++r)for(var i=r-1;i>0;){var a=Math.floor((i-1)/2);if(t(n[a],e)<=0)break;o(a),i=a}},this.pop=function(){if(!this.empty())if(1!==this.size()){var e=n[r-1];--r;for(var i=0;i<this.size();){var o=2*i+1,a=2*i+2;if(o>=this.size())break;var s=o;if(a<this.size()&&t(n[o],n[a])>0&&(s=a),t(n[s],e)>=0)break;n[i]=n[s],i=s}n[i]=e}else--r},this.top=function(){return n[0]},Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0}),Object.freeze(r),n.default=r},{}],32:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var r=e("../LinkList/LinkList");function i(e){void 0===e&&(e=[]);var t=new r.default(e);this.size=function(){return t.size()},this.empty=function(){return t.empty()},this.clear=function(){t.clear()},this.push=function(e){t.pushBack(e)},this.pop=function(){t.popFront()},this.front=function(){return t.front()},Object.freeze(this)}Object.freeze(i),n.default=i},{"../LinkList/LinkList":29}],33:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Base/TreeNode");function a(e,t){var n=this;void 0===e&&(e=[]),t=t||function(e,t){return e<t?-1:e>t?1:0};var a=0,s=new o.default;s.color=o.default.TreeNodeColorType.black,this.size=function(){return a},this.empty=function(){return 0===a},this.clear=function(){a=0,s.key=void 0,s.leftChild=s.rightChild=s.brother=s.parent=void 0,s.color=o.default.TreeNodeColorType.black};var l=function(e){if(!e||void 0===e.key)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},c=function(e){if(!e||void 0===e.key)throw new Error("unknown error");return e.rightChild?c(e.rightChild):e};this.front=function(){if(!this.empty())return l(s).key},this.back=function(){if(!this.empty())return c(s).key},this.forEach=function(e){var t,n,r=0;try{for(var o=i(this),a=o.next();!a.done;a=o.next())e(a.value,r++)}catch(s){t={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},this.getElementByPos=function(e){var t,n;if(e<0||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var r=0;try{for(var o=i(this),a=o.next();!a.done;a=o.next()){var s=a.value;if(r===e)return s;++r}}catch(l){t={error:l}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}throw new Error("unknown error")};var u=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color!==o.default.TreeNodeColorType.red){var n=e.brother;if(!n)throw new Error("unknown error");if(e===t.leftChild)if(n.color===o.default.TreeNodeColorType.red){n.color=o.default.TreeNodeColorType.black,t.color=o.default.TreeNodeColorType.red;var r=t.rotateLeft();s===t&&(s=r),u(e)}else n.color===o.default.TreeNodeColorType.black&&(n.rightChild&&n.rightChild.color===o.default.TreeNodeColorType.red?(n.color=t.color,t.color=o.default.TreeNodeColorType.black,n.rightChild&&(n.rightChild.color=o.default.TreeNodeColorType.black),r=t.rotateLeft(),s===t&&(s=r),e.color=o.default.TreeNodeColorType.black):n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||!n.leftChild||n.leftChild.color!==o.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||(n.color=o.default.TreeNodeColorType.red,u(t)):(n.color=o.default.TreeNodeColorType.red,n.leftChild&&(n.leftChild.color=o.default.TreeNodeColorType.black),r=n.rotateRight(),s===n&&(s=r),u(e)));else e===t.rightChild&&(n.color===o.default.TreeNodeColorType.red?(n.color=o.default.TreeNodeColorType.black,t.color=o.default.TreeNodeColorType.red,r=t.rotateRight(),s===t&&(s=r),u(e)):n.color===o.default.TreeNodeColorType.black&&(n.leftChild&&n.leftChild.color===o.default.TreeNodeColorType.red?(n.color=t.color,t.color=o.default.TreeNodeColorType.black,n.leftChild&&(n.leftChild.color=o.default.TreeNodeColorType.black),r=t.rotateRight(),s===t&&(s=r),e.color=o.default.TreeNodeColorType.black):n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||!n.rightChild||n.rightChild.color!==o.default.TreeNodeColorType.red?n.leftChild&&n.leftChild.color!==o.default.TreeNodeColorType.black||n.rightChild&&n.rightChild.color!==o.default.TreeNodeColorType.black||(n.color=o.default.TreeNodeColorType.red,u(t)):(n.color=o.default.TreeNodeColorType.red,n.rightChild&&(n.rightChild.color=o.default.TreeNodeColorType.black),r=n.rotateLeft(),s===n&&(s=r),u(e))))}else e.color=o.default.TreeNodeColorType.black},h=function(e){for(var t=e;t.leftChild||t.rightChild;){if(t.rightChild){t=l(t.rightChild);var n=e.key;e.key=t.key,t.key=n,e=t}t.leftChild&&(t=c(t.leftChild),n=e.key,e.key=t.key,t.key=n,e=t)}u(t),t&&t.remove(),--a,s.color=o.default.TreeNodeColorType.black},d=function(e,t){return!(!e||void 0===e.key)&&(!!d(e.leftChild,t)||!!t(e)||d(e.rightChild,t))};this.eraseElementByPos=function(e){if(e<0||e>=a)throw new Error("pos must more than 0 and less than set's size");var t=0;d(s,(function(n){return e===t?(h(n),!0):(++t,!1)}))},this.eraseElementByValue=function(e){if(!this.empty()){var n=g(s,e);void 0!==n&&void 0!==n.key&&0===t(n.key,e)&&h(n)}};var f=function(e,n){if(!e||void 0===e.key)throw new Error("unknown error");var r=t(n,e.key);return r<0?e.leftChild?f(e.leftChild,n):(e.leftChild=new o.default,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild):r>0?e.rightChild?f(e.rightChild,n):(e.rightChild=new o.default,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},p=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==o.default.TreeNodeColorType.black&&t.color===o.default.TreeNodeColorType.red){var n=t.brother,r=t.parent;if(!r)throw new Error("unknown error");if(n&&n.color===o.default.TreeNodeColorType.red)n.color=t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,p(r);else if(!n||n.color===o.default.TreeNodeColorType.black)if(t===r.leftChild)if(e===t.leftChild){t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red;var i=r.rotateRight();r===s&&(s=i)}else e===t.rightChild&&(i=t.rotateLeft(),r===s&&(s=i),p(t));else t===r.rightChild&&(e===t.leftChild?(i=t.rotateRight(),r===s&&(s=i),p(t)):e===t.rightChild&&(t.color=o.default.TreeNodeColorType.black,r.color=o.default.TreeNodeColorType.red,i=r.rotateLeft(),r===s&&(s=i)))}};this.insert=function(e){if(null==e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++a,s.key=e,void(s.color=o.default.TreeNodeColorType.black);var n=f(s,e);void 0!==n.key&&0===t(n.key,e)||(++a,n.key=e,p(n),s.color=o.default.TreeNodeColorType.black)};var g=function(e,n){if(e&&void 0!==e.key){var r=t(n,e.key);return r<0?g(e.leftChild,n):r>0?g(e.rightChild,n):e}};this.find=function(e){var n=g(s,e);return void 0!==n&&void 0!==n.key&&0===t(n.key,e)};var m=function(e,n){if(e&&void 0!==e.key){var r=t(e.key,n);if(0===r)return e.key;if(r<0)return m(e.rightChild,n);var i=m(e.leftChild,n);return void 0!==i?i:e.key}};this.lowerBound=function(e){return m(s,e)};var v=function(e,n){if(e&&void 0!==e.key){if(t(e.key,n)<=0)return v(e.rightChild,n);var r=v(e.leftChild,n);return void 0!==r?r:e.key}};this.upperBound=function(e){return v(s,e)};var y=function(e,n){if(e&&void 0!==e.key){var r=t(e.key,n);if(0===r)return e.key;if(r>0)return y(e.leftChild,n);var i=y(e.rightChild,n);return void 0!==i?i:e.key}};this.reverseLowerBound=function(e){return y(s,e)};var b=function(e,n){if(e&&void 0!==e.key){if(t(e.key,n)>=0)return b(e.leftChild,n);var r=b(e.rightChild,n);return void 0!==r?r:e.key}};this.reverseUpperBound=function(e){return b(s,e)},this.union=function(e){var t=this;e.forEach((function(e){return t.insert(e)}))},this.getHeight=function(){if(this.empty())return 0;var e=function(t){return t?Math.max(e(t.leftChild),e(t.rightChild))+1:1};return e(s)};var x=function(e){return r(this,(function(t){switch(t.label){case 0:return e&&void 0!==e.key?[5,i(x(e.leftChild))]:[2];case 1:return t.sent(),[4,e.key];case 2:return t.sent(),[5,i(x(e.rightChild))];case 3:return t.sent(),[2]}}))};this[Symbol.iterator]=function(){return x(s)},e.forEach((function(e){return n.insert(e)})),Object.freeze(this)}Object.freeze(a),n.default=a},{"../Base/TreeNode":25}],34:[function(e,t,n){function r(e){var t=this;void 0===e&&(e=[]);var n=0,r=[];this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,r.length=0},this.push=function(e){r.push(e),++n},this.pop=function(){r.pop(),n>0&&--n},this.top=function(){return r[n-1]},e.forEach((function(e){return t.push(e)})),Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0}),Object.freeze(r),n.default=r},{}],35:[function(e,t,n){var r=this&&this.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},a=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function s(e){var t=this;void 0===e&&(e=[]);var n=0,s=[];this.size=function(){return n},this.empty=function(){return 0===n},this.clear=function(){n=0,s.length=0},this.front=function(){if(!this.empty())return s[0]},this.back=function(){if(!this.empty())return s[n-1]},this.forEach=function(e){s.forEach(e)},this.getElementByPos=function(e){if(e<0||e>=n)throw new Error("pos must more than 0 and less than vector's size");return s[e]},this.eraseElementByPos=function(e){if(e<0||e>=n)throw new Error("pos must more than 0 and less than vector's size");for(var t=e;t<n-1;++t)s[t]=s[t+1];this.popBack()},this.eraseElementByValue=function(e){var t=[];this.forEach((function(n){n!==e&&t.push(n)})),t.forEach((function(e,t){s[t]=e}));for(var r=t.length;n>r;)this.popBack()},this.pushBack=function(e){s.push(e),++n},this.popBack=function(){s.pop(),n>0&&--n},this.setElementByPos=function(e,t){if(e<0||e>=n)throw new Error("pos must more than 0 and less than vector's size");s[e]=t},this.insert=function(e,t,r){if(void 0===r&&(r=1),e<0||e>n)throw new Error("pos must more than 0 and less than or equal to vector's size");s.splice.apply(s,o([e,0],i(new Array(r).fill(t)),!1)),n+=r},this.find=function(e){return s.includes(e)},this.reverse=function(){s.reverse()},this.unique=function(){var e,t=[];this.forEach((function(n,r){0!==r&&n===e||(t.push(n),e=n)})),t.forEach((function(e,t){s[t]=e}));for(var r=t.length;n>r;)this.popBack()},this.sort=function(e){s.sort(e)},this[Symbol.iterator]=function(){return function(){return r(this,(function(e){switch(e.label){case 0:return[5,a(s)];case 1:return[2,e.sent()]}}))}()},e.forEach((function(e){return t.pushBack(e)})),Object.freeze(this)}Object.defineProperty(n,"__esModule",{value:!0}),Object.freeze(s),n.default=s},{}],36:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HashMap=n.HashSet=n.Map=n.Set=n.PriorityQueue=n.Deque=n.LinkList=n.Queue=n.Stack=n.Vector=void 0;var r=e("./Vector/Vector");n.Vector=r.default;var i=e("./Stack/Stack");n.Stack=i.default;var o=e("./Queue/Queue");n.Queue=o.default;var a=e("./LinkList/LinkList");n.LinkList=a.default;var s=e("./Deque/Deque");n.Deque=s.default;var l=e("./PriorityQueue/PriorityQueue");n.PriorityQueue=l.default;var c=e("./Set/Set");n.Set=c.default;var u=e("./Map/Map");n.Map=u.default;var h=e("./HashSet/HashSet");n.HashSet=h.default;var d=e("./HashMap/HashMap");n.HashMap=d.default},{"./Deque/Deque":26,"./HashMap/HashMap":27,"./HashSet/HashSet":28,"./LinkList/LinkList":29,"./Map/Map":30,"./PriorityQueue/PriorityQueue":31,"./Queue/Queue":32,"./Set/Set":33,"./Stack/Stack":34,"./Vector/Vector":35}],37:[function(e,t,n){const r=e("yallist"),i=Symbol("max"),o=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),u=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1,g=(e,t,n)=>{const r=e[d].get(t);if(r){const t=r.value;if(m(e,t)){if(y(e,r),!e[s])return}else n&&(e[f]&&(r.value.now=Date.now()),e[h].unshiftNode(r));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[l]&&n>e[l]},v=e=>{if(e[o]>e[i])for(let t=e[h].tail;e[o]>e[i]&&null!==t;){const n=t.prev;y(e,t),t=n}},y=(e,t)=>{if(t){const n=t.value;e[c]&&e[c](n.key,n.value),e[o]-=n.length,e[d].delete(n.key),e[h].removeNode(t)}};class b{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const x=(e,t,n,r)=>{let i=n.value;m(e,i)&&(y(e,n),e[s]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};t.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[i]=e.max||1/0;const t=e.length||p;if(this[a]="function"!=typeof t?p:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[i]=e||1/0,v(this)}get max(){return this[i]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[a]&&(this[a]=e,this[o]=0,this[h].forEach((e=>{e.length=this[a](e.value,e.key),this[o]+=e.length}))),v(this)}get lengthCalculator(){return this[a]}get length(){return this[o]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let n=this[h].tail;null!==n;){const r=n.prev;x(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[h].head;null!==n;){const r=n.next;x(this,e,n,t),n=r}}keys(){return this[h].toArray().map((e=>e.key))}values(){return this[h].toArray().map((e=>e.value))}reset(){this[c]&&this[h]&&this[h].length&&this[h].forEach((e=>this[c](e.key,e.value))),this[d]=new Map,this[h]=new r,this[o]=0}dump(){return this[h].map((e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[h]}set(e,t,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,s=this[a](t,e);if(this[d].has(e)){if(s>this[i])return y(this,this[d].get(e)),!1;const a=this[d].get(e).value;return this[c]&&(this[u]||this[c](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[o]+=s-a.length,a.length=s,this.get(e),v(this),!0}const f=new b(e,t,s,r,n);return f.length>this[i]?(this[c]&&this[c](e,t),!1):(this[o]+=f.length,this[h].unshift(f),this[d].set(e,this[h].head),v(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[h].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[d].forEach(((e,t)=>g(this,t,!1)))}}},{yallist:83}],38:[function(e,t,n){(function(e){(function(){const n=t.exports;n.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},n.codes={};for(const e in n.types){const t=n.types[e];n.codes[t]=e}n.CMD_SHIFT=4,n.CMD_MASK=240,n.DUP_MASK=8,n.QOS_MASK=3,n.QOS_SHIFT=1,n.RETAIN_MASK=1,n.VARBYTEINT_MASK=127,n.VARBYTEINT_FIN_MASK=128,n.VARBYTEINT_MAX=268435455,n.SESSIONPRESENT_MASK=1,n.SESSIONPRESENT_HEADER=e.from([n.SESSIONPRESENT_MASK]),n.CONNACK_HEADER=e.from([n.codes.connack<<n.CMD_SHIFT]),n.USERNAME_MASK=128,n.PASSWORD_MASK=64,n.WILL_RETAIN_MASK=32,n.WILL_QOS_MASK=24,n.WILL_QOS_SHIFT=3,n.WILL_FLAG_MASK=4,n.CLEAN_SESSION_MASK=2,n.CONNECT_HEADER=e.from([n.codes.connect<<n.CMD_SHIFT]),n.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},n.propertiesCodes={};for(const e in n.properties){const t=n.properties[e];n.propertiesCodes[t]=e}function r(t){return[0,1,2].map((r=>[0,1].map((i=>[0,1].map((o=>{const a=e.alloc(1);return a.writeUInt8(n.codes[t]<<n.CMD_SHIFT|(i?n.DUP_MASK:0)|r<<n.QOS_SHIFT|o,0,!0),a}))))))}n.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},n.PUBLISH_HEADER=r("publish"),n.SUBSCRIBE_HEADER=r("subscribe"),n.SUBSCRIBE_OPTIONS_QOS_MASK=3,n.SUBSCRIBE_OPTIONS_NL_MASK=1,n.SUBSCRIBE_OPTIONS_NL_SHIFT=2,n.SUBSCRIBE_OPTIONS_RAP_MASK=1,n.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,n.SUBSCRIBE_OPTIONS_RH_MASK=3,n.SUBSCRIBE_OPTIONS_RH_SHIFT=4,n.SUBSCRIBE_OPTIONS_RH=[0,16,32],n.SUBSCRIBE_OPTIONS_NL=4,n.SUBSCRIBE_OPTIONS_RAP=8,n.SUBSCRIBE_OPTIONS_QOS=[0,1,2],n.UNSUBSCRIBE_HEADER=r("unsubscribe"),n.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},n.SUBACK_HEADER=e.from([n.codes.suback<<n.CMD_SHIFT]),n.VERSION3=e.from([3]),n.VERSION4=e.from([4]),n.VERSION5=e.from([5]),n.VERSION131=e.from([131]),n.VERSION132=e.from([132]),n.QOS=[0,1,2].map((t=>e.from([t]))),n.EMPTY={pingreq:e.from([n.codes.pingreq<<4,0]),pingresp:e.from([n.codes.pingresp<<4,0]),disconnect:e.from([n.codes.disconnect<<4,0])}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],39:[function(e,t,n){(function(n){(function(){const r=e("./writeToStream"),i=e("events");class o extends i{constructor(){super(),this._array=new Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=new Array(this._array.length),r=this._array;let i,o=0;for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?t[i]=r[i].length:t[i]=n.byteLength(r[i]),e+=t[i];const a=n.allocUnsafe(e);for(i=0;i<r.length&&void 0!==r[i];i++)"string"!=typeof r[i]?(r[i].copy(a,o),o+=t[i]):(a.write(r[i],o),o+=t[i]);return a}}t.exports=function(e,t){const n=new o;return r(e,n,t),n.concat()}}).call(this)}).call(this,e("buffer").Buffer)},{"./writeToStream":44,buffer:17,events:22}],40:[function(e,t,n){n.parser=e("./parser").parser,n.generate=e("./generate"),n.writeToStream=e("./writeToStream")},{"./generate":39,"./parser":43,"./writeToStream":44}],41:[function(e,t,n){(function(e){(function(){const n=65536,r={},i=e.isBuffer(e.from([1,2]).subarray(0,1));function o(t){const n=e.allocUnsafe(2);return n.writeUInt8(t>>8,0),n.writeUInt8(255&t,1),n}t.exports={cache:r,generateCache:function(){for(let e=0;e<n;e++)r[e]=o(e)},generateNumber:o,genBufVariableByteInt:function(t){let n=0,r=0;const o=e.allocUnsafe(4);do{n=t%128|0,(t=t/128|0)>0&&(n|=128),o.writeUInt8(n,r++)}while(t>0&&r<4);return t>0&&(r=0),i?o.subarray(0,r):o.slice(0,r)},generate4ByteBuffer:function(t){const n=e.allocUnsafe(4);return n.writeUInt32BE(t,0),n}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],42:[function(e,t,n){t.exports=class{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],43:[function(e,t,n){const r=e("bl"),i=e("events"),o=e("./packet"),a=e("./constants"),s=e("debug")("mqtt-packet:parser");class l extends i{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof l?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):(new l).parser(e)}_resetState(){s("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new o,this.error=null,this._list=r(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),s("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||this._list.length>0)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,s("parse: state complete. _stateCounter is now: %d",this._stateCounter),s("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return s("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=a.types[e>>a.CMD_SHIFT],this.packet.retain=0!=(e&a.RETAIN_MASK),this.packet.qos=e>>a.QOS_SHIFT&a.QOS_MASK,this.packet.dup=0!=(e&a.DUP_MASK),s("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),s("_parseLength %d",e.value),!!e}_parsePayload(){s("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"))}e=!0}return s("_parsePayload complete result: %s",e),e}_parseConnect(){let e,t,n,r;s("_parseConnect");const i={},o=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(o.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(o.protocolVersion=this._list.readUInt8(this._pos),o.protocolVersion>=128&&(o.bridgeMode=!0,o.protocolVersion=o.protocolVersion-128),3!==o.protocolVersion&&4!==o.protocolVersion&&5!==o.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(i.username=this._list.readUInt8(this._pos)&a.USERNAME_MASK,i.password=this._list.readUInt8(this._pos)&a.PASSWORD_MASK,i.will=this._list.readUInt8(this._pos)&a.WILL_FLAG_MASK,i.will&&(o.will={},o.will.retain=0!=(this._list.readUInt8(this._pos)&a.WILL_RETAIN_MASK),o.will.qos=(this._list.readUInt8(this._pos)&a.WILL_QOS_MASK)>>a.WILL_QOS_SHIFT),o.clean=0!=(this._list.readUInt8(this._pos)&a.CLEAN_SESSION_MASK),this._pos++,o.keepalive=this._parseNum(),-1===o.keepalive)return this._emitError(new Error("Packet too short"));if(5===o.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(o.properties=e)}const c=this._parseString();if(null===c)return this._emitError(new Error("Packet too short"));if(o.clientId=c,s("_parseConnect: packet.clientId: %s",o.clientId),i.will){if(5===o.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(o.will.properties=e)}if(null===(e=this._parseString()))return this._emitError(new Error("Cannot parse will topic"));if(o.will.topic=e,s("_parseConnect: packet.will.topic: %s",o.will.topic),null===(t=this._parseBuffer()))return this._emitError(new Error("Cannot parse will payload"));o.will.payload=t,s("_parseConnect: packet.will.paylaod: %s",o.will.payload)}if(i.username){if(null===(r=this._parseString()))return this._emitError(new Error("Cannot parse username"));o.username=r,s("_parseConnect: packet.username: %s",o.username)}if(i.password){if(null===(n=this._parseBuffer()))return this._emitError(new Error("Cannot parse password"));o.password=n}return this.settings=o,s("_parseConnect: complete"),o}_parseConnack(){s("_parseConnack");const e=this.packet;if(this._list.length<1)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&a.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)this._list.length>=2?e.reasonCode=this._list.readUInt8(this._pos++):e.reasonCode=0;else{if(this._list.length<2)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}s("_parseConnack: complete")}_parsePublish(){s("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(e.qos>0)||this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),s("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){s("_parseSubscribe");const e=this.packet;let t,n,r,i,o,l,c;if(1!==e.qos)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<e.length;){if(null===(t=this._parseString()))return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));r=(n=this._parseByte())&a.SUBSCRIBE_OPTIONS_QOS_MASK,l=0!=(n>>a.SUBSCRIBE_OPTIONS_NL_SHIFT&a.SUBSCRIBE_OPTIONS_NL_MASK),o=0!=(n>>a.SUBSCRIBE_OPTIONS_RAP_SHIFT&a.SUBSCRIBE_OPTIONS_RAP_MASK),i=n>>a.SUBSCRIBE_OPTIONS_RH_SHIFT&a.SUBSCRIBE_OPTIONS_RH_MASK,c={topic:t,qos:r},5===this.settings.protocolVersion?(c.nl=l,c.rap=o,c.rh=i):this.settings.bridgeMode&&(c.rh=0,c.rap=!0,c.nl=!0),s("_parseSubscribe: push subscription `%s` to subscription",c),e.subscriptions.push(c)}}}_parseSuback(){s("_parseSuback");const e=this.packet;if(this.packet.granted=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){s("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<e.length;){const t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));s("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){s("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){s("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(e.length>2?(e.reasonCode=this._parseByte(),s("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,e.length>3)){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return!0}_parseDisconnect(){const e=this.packet;if(s("_parseDisconnect"),5===this.settings.protocolVersion){this._list.length>0?e.reasonCode=this._parseByte():e.reasonCode=0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return s("_parseDisconnect result: true"),!0}_parseAuth(){s("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),s("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return e.messageId=this._parseNum(),null===e.messageId?(this._emitError(new Error("Cannot parse messageId")),!1):(s("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(e){const t=this._parseNum(),n=t+this._pos;if(-1===t||n>this._list.length||n>this.packet.length)return null;const r=this._list.toString("utf8",this._pos,n);return this._pos+=t,s("_parseString: result: %s",r),r}_parseStringPair(){return s("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;const n=this._list.slice(this._pos,t);return this._pos+=e,s("_parseBuffer: result: %o",n),n}_parseNum(){if(this._list.length-this._pos<2)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,s("_parseNum: result: %s",e),e}_parse4ByteNum(){if(this._list.length-this._pos<4)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,s("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){s("_parseVarByteNum");let t,n=0,r=1,i=0,o=!1;const l=this._pos?this._pos:0;for(;n<4&&l+n<this._list.length;){if(i+=r*((t=this._list.readUInt8(l+n++))&a.VARBYTEINT_MASK),r*=128,0==(t&a.VARBYTEINT_FIN_MASK)){o=!0;break}if(this._list.length<=n)break}return!o&&4===n&&this._list.length>=n&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=n),s("_parseVarByteNum: result: %o",o=!!o&&(e?{bytes:n,value:i}:i)),o}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),s("_parseByte: result: %o",e),e}_parseByType(e){switch(s("_parseByType: type: %s",e),e){case"byte":return 0!==this._parseByte();case"int8":return this._parseByte();case"int16":return this._parseNum();case"int32":return this._parse4ByteNum();case"var":return this._parseVarByteNum();case"string":return this._parseString();case"pair":return this._parseStringPair();case"binary":return this._parseBuffer()}}_parseProperties(){s("_parseProperties");const e=this._parseVarByteNum(),t=this._pos+e,n={};for(;this._pos<t;){const e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;const t=a.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"!==t)n[t]?(Array.isArray(n[t])||(n[t]=[n[t]]),n[t].push(this._parseByType(a.propertiesTypes[t]))):n[t]=this._parseByType(a.propertiesTypes[t]);else{n[t]||(n[t]=Object.create(null));const e=this._parseByType(a.propertiesTypes[t]);if(n[t][e.name])if(Array.isArray(n[t][e.name]))n[t][e.name].push(e.value);else{const r=n[t][e.name];n[t][e.name]=[r],n[t][e.name].push(e.value)}else n[t][e.name]=e.value}}return n}_newPacket(){return s("_newPacket"),this.packet&&(this._list.consume(this.packet.length),s("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),s("_newPacket: new packet"),this.packet=new o,this._pos=0,!0}_emitError(e){s("_emitError"),this.error=e,this.emit("error",e)}}t.exports=l},{"./constants":38,"./packet":42,bl:15,debug:18,events:22}],44:[function(e,t,n){(function(n){(function(){const r=e("./constants"),i=n.allocUnsafe(0),o=n.from([0]),a=e("./numbers"),s=e("process-nextick-args").nextTick,l=e("debug")("mqtt-packet:writeToStream"),c=a.cache,u=a.generateNumber,h=a.generateCache,d=a.genBufVariableByteInt,f=a.generate4ByteBuffer;let p=_,g=!0;function m(e,t,a){switch(l("generate called"),t.cork&&(t.cork(),s(v,t)),g&&(g=!1,h()),l("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return function(e,t,i){const o=e||{},a=o.protocolId||"MQTT";let s=o.protocolVersion||4;const l=o.will;let c=o.clean;const u=o.keepalive||0,h=o.clientId||"",d=o.username,f=o.password,g=o.properties;void 0===c&&(c=!0);let m=0;if(!a||"string"!=typeof a&&!n.isBuffer(a))return t.emit("error",new Error("Invalid protocolId")),!1;if(m+=a.length+2,3!==s&&4!==s&&5!==s)return t.emit("error",new Error("Invalid protocol version")),!1;if(m+=1,("string"==typeof h||n.isBuffer(h))&&(h||s>=4)&&(h||c))m+=n.byteLength(h)+2;else{if(s<4)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(1*c==0)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof u||u<0||u>65535||u%1!=0)return t.emit("error",new Error("Invalid keepalive")),!1;if(m+=2,m+=1,5===s){var v=S(t,g);if(!v)return!1;m+=v.length}if(l){if("object"!=typeof l)return t.emit("error",new Error("Invalid will")),!1;if(!l.topic||"string"!=typeof l.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(m+=n.byteLength(l.topic)+2,m+=2,l.payload){if(!(l.payload.length>=0))return t.emit("error",new Error("Invalid will payload")),!1;"string"==typeof l.payload?m+=n.byteLength(l.payload):m+=l.payload.length}var y={};if(5===s){if(!(y=S(t,l.properties)))return!1;m+=y.length}}let w=!1;if(null!=d){if(!T(d))return t.emit("error",new Error("Invalid username")),!1;w=!0,m+=n.byteLength(d)+2}if(null!=f){if(!w)return t.emit("error",new Error("Username is required to use password")),!1;if(!T(f))return t.emit("error",new Error("Invalid password")),!1;m+=k(f)+2}t.write(r.CONNECT_HEADER),b(t,m),$(t,a),o.bridgeMode&&(s+=128),t.write(131===s?r.VERSION131:132===s?r.VERSION132:4===s?r.VERSION4:5===s?r.VERSION5:r.VERSION3);let _=0;return _|=null!=d?r.USERNAME_MASK:0,_|=null!=f?r.PASSWORD_MASK:0,_|=l&&l.retain?r.WILL_RETAIN_MASK:0,_|=l&&l.qos?l.qos<<r.WILL_QOS_SHIFT:0,_|=l?r.WILL_FLAG_MASK:0,_|=c?r.CLEAN_SESSION_MASK:0,t.write(n.from([_])),p(t,u),5===s&&v.write(),$(t,h),l&&(5===s&&y.write(),x(t,l.topic),$(t,l.payload)),null!=d&&$(t,d),null!=f&&$(t,f),!0}(e,t);case"connack":return function(e,t,i){const a=i?i.protocolVersion:4,s=e||{},l=5===a?s.reasonCode:s.returnCode,c=s.properties;let u=2;if("number"!=typeof l)return t.emit("error",new Error("Invalid return code")),!1;let h=null;if(5===a){if(!(h=S(t,c)))return!1;u+=h.length}return t.write(r.CONNACK_HEADER),b(t,u),t.write(s.sessionPresent?r.SESSIONPRESENT_HEADER:o),t.write(n.from([l])),null!=h&&h.write(),!0}(e,t,a);case"publish":return function(e,t,o){l("publish: packet: %o",e);const a=o?o.protocolVersion:4,s=e||{},c=s.qos||0,u=s.retain?r.RETAIN_MASK:0,h=s.topic,d=s.payload||i,f=s.messageId,g=s.properties;let m=0;if("string"==typeof h)m+=n.byteLength(h)+2;else{if(!n.isBuffer(h))return t.emit("error",new Error("Invalid topic")),!1;m+=h.length+2}if(n.isBuffer(d)?m+=d.length:m+=n.byteLength(d),c&&"number"!=typeof f)return t.emit("error",new Error("Invalid messageId")),!1;c&&(m+=2);let v=null;if(5===a){if(!(v=S(t,g)))return!1;m+=v.length}return t.write(r.PUBLISH_HEADER[c][s.dup?1:0][u?1:0]),b(t,m),p(t,k(h)),t.write(h),c>0&&p(t,f),null!=v&&v.write(),l("publish: payload: %o",d),t.write(d)}(e,t,a);case"puback":case"pubrec":case"pubrel":case"pubcomp":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.cmd||"puback",l=a.messageId,c=a.dup&&"pubrel"===s?r.DUP_MASK:0;let u=0;const h=a.reasonCode,d=a.properties;let f=5===o?3:2;if("pubrel"===s&&(u=1),"number"!=typeof l)return t.emit("error",new Error("Invalid messageId")),!1;let g=null;if(5===o&&"object"==typeof d){if(!(g=E(t,d,i,f)))return!1;f+=g.length}return t.write(r.ACKS[s][u][c][0]),b(t,f),p(t,l),5===o&&t.write(n.from([h])),null!==g&&g.write(),!0}(e,t,a);case"subscribe":return function(e,t,i){l("subscribe: packet: ");const o=i?i.protocolVersion:4,a=e||{},s=a.dup?r.DUP_MASK:0,c=a.messageId,u=a.subscriptions,h=a.properties;let d=0;if("number"!=typeof c)return t.emit("error",new Error("Invalid messageId")),!1;d+=2;let f=null;if(5===o){if(!(f=S(t,h)))return!1;d+=f.length}if("object"!=typeof u||!u.length)return t.emit("error",new Error("Invalid subscriptions")),!1;for(let r=0;r<u.length;r+=1){const e=u[r].topic,i=u[r].qos;if("string"!=typeof e)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof i)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===o){if("boolean"!=typeof(u[r].nl||!1))return t.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;if("boolean"!=typeof(u[r].rap||!1))return t.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const e=u[r].rh||0;if("number"!=typeof e||e>2)return t.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}d+=n.byteLength(e)+2+1}l("subscribe: writing to stream: %o",r.SUBSCRIBE_HEADER),t.write(r.SUBSCRIBE_HEADER[1][s?1:0][0]),b(t,d),p(t,c),null!==f&&f.write();let g=!0;for(const l of u){const e=l.topic,i=l.qos,a=+l.nl,s=+l.rap,c=l.rh;let u;x(t,e),u=r.SUBSCRIBE_OPTIONS_QOS[i],5===o&&(u|=a?r.SUBSCRIBE_OPTIONS_NL:0,u|=s?r.SUBSCRIBE_OPTIONS_RAP:0,u|=c?r.SUBSCRIBE_OPTIONS_RH[c]:0),g=t.write(n.from([u]))}return g}(e,t,a);case"suback":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.granted,c=a.properties;let u=0;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;if(u+=2,"object"!=typeof l||!l.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(let n=0;n<l.length;n+=1){if("number"!=typeof l[n])return t.emit("error",new Error("Invalid qos vector")),!1;u+=1}let h=null;if(5===o){if(!(h=E(t,c,i,u)))return!1;u+=h.length}return t.write(r.SUBACK_HEADER),b(t,u),p(t,s),null!==h&&h.write(),t.write(n.from(l))}(e,t,a);case"unsubscribe":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.dup?r.DUP_MASK:0,c=a.unsubscriptions,u=a.properties;let h=0;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;if(h+=2,"object"!=typeof c||!c.length)return t.emit("error",new Error("Invalid unsubscriptions")),!1;for(let r=0;r<c.length;r+=1){if("string"!=typeof c[r])return t.emit("error",new Error("Invalid unsubscriptions")),!1;h+=n.byteLength(c[r])+2}let d=null;if(5===o){if(!(d=S(t,u)))return!1;h+=d.length}t.write(r.UNSUBSCRIBE_HEADER[1][l?1:0][0]),b(t,h),p(t,s),null!==d&&d.write();let f=!0;for(let n=0;n<c.length;n++)f=x(t,c[n]);return f}(e,t,a);case"unsuback":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.messageId,l=a.dup?r.DUP_MASK:0,c=a.granted,u=a.properties,h=a.cmd;let d=2;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;if(5===o){if("object"!=typeof c||!c.length)return t.emit("error",new Error("Invalid qos vector")),!1;for(let e=0;e<c.length;e+=1){if("number"!=typeof c[e])return t.emit("error",new Error("Invalid qos vector")),!1;d+=1}}let f=null;if(5===o){if(!(f=E(t,u,i,d)))return!1;d+=f.length}return t.write(r.ACKS[h][0][l][0]),b(t,d),p(t,s),null!==f&&f.write(),5===o&&t.write(n.from(c)),!0}(e,t,a);case"pingreq":case"pingresp":return c=e,t.write(r.EMPTY[c.cmd]);case"disconnect":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.reasonCode,l=a.properties;let c=5===o?1:0,u=null;if(5===o){if(!(u=E(t,l,i,c)))return!1;c+=u.length}return t.write(n.from([r.codes.disconnect<<4])),b(t,c),5===o&&t.write(n.from([s])),null!==u&&u.write(),!0}(e,t,a);case"auth":return function(e,t,i){const o=i?i.protocolVersion:4,a=e||{},s=a.reasonCode,l=a.properties;let c=5===o?1:0;5!==o&&t.emit("error",new Error("Invalid mqtt version for auth packet"));const u=E(t,l,i,c);return!!u&&(c+=u.length,t.write(n.from([r.codes.auth<<4])),b(t,c),t.write(n.from([s])),null!==u&&u.write(),!0)}(e,t,a);default:return t.emit("error",new Error("Unknown command")),!1}var c}function v(e){e.uncork()}Object.defineProperty(m,"cacheNumbers",{get:()=>p===_,set(e){e?(c&&0!==Object.keys(c).length||(g=!0),p=_):(g=!1,p=C)}});const y={};function b(e,t){if(t>r.VARBYTEINT_MAX)return e.emit("error",new Error(`Invalid variable byte integer: ${t}`)),!1;let n=y[t];return n||(n=d(t),t<16384&&(y[t]=n)),l("writeVarByteInt: writing to stream: %o",n),e.write(n)}function x(e,t){const r=n.byteLength(t);return p(e,r),l("writeString: %s",t),e.write(t,"utf8")}function w(e,t,n){x(e,t),x(e,n)}function _(e,t){return l("writeNumberCached: number: %d",t),l("writeNumberCached: %o",c[t]),e.write(c[t])}function C(e,t){const n=u(t);return l("writeNumberGenerated: %o",n),e.write(n)}function $(e,t){"string"==typeof t?x(e,t):t?(p(e,t.length),e.write(t)):p(e,0)}function S(e,t){if("object"!=typeof t||null!=t.length)return{length:1,write(){M(e,{},0)}};let i=0;function o(t,i){let o=0;switch(r.propertiesTypes[t]){case"byte":if("boolean"!=typeof i)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=2;break;case"int8":if("number"!=typeof i||i<0||i>255)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=2;break;case"binary":if(i&&null===i)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=1+n.byteLength(i)+2;break;case"int16":if("number"!=typeof i||i<0||i>65535)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=3;break;case"int32":if("number"!=typeof i||i<0||i>4294967295)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=5;break;case"var":if("number"!=typeof i||i<0||i>268435455)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=1+n.byteLength(d(i));break;case"string":if("string"!=typeof i)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=3+n.byteLength(i.toString());break;case"pair":if("object"!=typeof i)return e.emit("error",new Error(`Invalid ${t}: ${i}`)),!1;o+=Object.getOwnPropertyNames(i).reduce(((e,t)=>{const r=i[t];return Array.isArray(r)?e+=r.reduce(((e,r)=>e+(3+n.byteLength(t.toString())+2+n.byteLength(r.toString()))),0):e+=3+n.byteLength(t.toString())+2+n.byteLength(i[t].toString()),e}),0);break;default:return e.emit("error",new Error(`Invalid property ${t}: ${i}`)),!1}return o}if(t)for(const n in t){let e=0,r=0;const a=t[n];if(Array.isArray(a))for(let t=0;t<a.length;t++){if(!(r=o(n,a[t])))return!1;e+=r}else{if(!(r=o(n,a)))return!1;e=r}if(!e)return!1;i+=e}return{length:n.byteLength(d(i))+i,write(){M(e,t,i)}}}function E(e,t,n,r){const i=["reasonString","userProperties"],o=n&&n.properties&&n.properties.maximumPacketSize?n.properties.maximumPacketSize:0;let a=S(e,t);if(o)for(;r+a.length>o;){const n=i.shift();if(!n||!t[n])return!1;delete t[n],a=S(e,t)}return a}function A(e,t,i){switch(r.propertiesTypes[t]){case"byte":e.write(n.from([r.properties[t]])),e.write(n.from([+i]));break;case"int8":e.write(n.from([r.properties[t]])),e.write(n.from([i]));break;case"binary":e.write(n.from([r.properties[t]])),$(e,i);break;case"int16":e.write(n.from([r.properties[t]])),p(e,i);break;case"int32":e.write(n.from([r.properties[t]])),function(e,t){const n=f(t);l("write4ByteNumber: %o",n),e.write(n)}(e,i);break;case"var":e.write(n.from([r.properties[t]])),b(e,i);break;case"string":e.write(n.from([r.properties[t]])),x(e,i);break;case"pair":Object.getOwnPropertyNames(i).forEach((o=>{const a=i[o];Array.isArray(a)?a.forEach((i=>{e.write(n.from([r.properties[t]])),w(e,o.toString(),i.toString())})):(e.write(n.from([r.properties[t]])),w(e,o.toString(),a.toString()))}));break;default:return e.emit("error",new Error(`Invalid property ${t} value: ${i}`)),!1}}function M(e,t,n){b(e,n);for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&null!==t[r]){const n=t[r];if(Array.isArray(n))for(let t=0;t<n.length;t++)A(e,r,n[t]);else A(e,r,n)}}function k(e){return e?e instanceof n?e.length:n.byteLength(e):0}function T(e){return"string"==typeof e||e instanceof n}t.exports=m}).call(this)}).call(this,e("buffer").Buffer)},{"./constants":38,"./numbers":41,buffer:17,debug:18,"process-nextick-args":49}],45:[function(e,t,n){var r=1e3,i=60*r,o=60*i,a=24*o,s=7*a,l=365.25*a;function c(e,t,n,r){var i=t>=1.5*n;return Math.round(e/n)+" "+r+(i?"s":"")}t.exports=function(e,t){t=t||{};var n,u,h=typeof e;if("string"===h&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"weeks":case"week":case"w":return n*s;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*o;case"minutes":case"minute":case"mins":case"min":case"m":return n*i;case"seconds":case"second":case"secs":case"sec":case"s":return n*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}(e);if("number"===h&&isFinite(e))return t.long?(n=e,(u=Math.abs(n))>=a?c(n,u,a,"day"):u>=o?c(n,u,o,"hour"):u>=i?c(n,u,i,"minute"):u>=r?c(n,u,r,"second"):n+" ms"):function(e){var t=Math.abs(e);return t>=a?Math.round(e/a)+"d":t>=o?Math.round(e/o)+"h":t>=i?Math.round(e/i)+"m":t>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],46:[function(e,t,n){const r=e("./lib/number-allocator.js");t.exports.NumberAllocator=r},{"./lib/number-allocator.js":47}],47:[function(e,t,n){const r=e("js-sdsl").Set,i=e("debug")("number-allocator:trace"),o=e("debug")("number-allocator:error");function a(e,t){this.low=e,this.high=t}function s(e,t){if(!(this instanceof s))return new s(e,t);this.min=e,this.max=t,this.ss=new r([],((e,t)=>e.compare(t))),i("Create"),this.clear()}a.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},a.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},s.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},s.prototype.alloc=function(){if(0===this.ss.size())return i("alloc():empty"),null;const e=this.ss.front(),t=e.low;return t+1<=e.high?++e.low:this.ss.eraseElementByPos(0),i("alloc():"+t),t},s.prototype.use=function(e){const t=new a(e,e),n=this.ss.lowerBound(t);if(n){if(n.equals(t))return this.ss.eraseElementByValue(n),i("use():"+e),!0;if(n.low>e)return!1;if(n.low===e)return++n.low,i("use():"+e),!0;if(n.high===e)return--n.high,i("use():"+e),!0;const r=n.low;return n.low=e+1,this.ss.insert(new a(r,e-1)),i("use():"+e),!0}return i("use():failed"),!1},s.prototype.free=function(e){if(e<this.min||e>this.max)return void o("free():"+e+" is out of range");const t=new a(e,e),n=this.ss.lowerBound(t);if(n){if(n.low<=e&&e<=n.high)return void o("free():"+e+" has already been vacant");if(n===this.ss.front())e+1===n.low?--n.low:this.ss.insert(t);else{const r=this.ss.reverseLowerBound(t);r.high+1===e?e+1===n.low?(this.ss.eraseElementByValue(r),n.low=r.low):r.high=e:e+1===n.low?n.low=e:this.ss.insert(t)}}else{if(n===this.ss.front())return void this.ss.insert(t);const r=this.ss.reverseLowerBound(t);r.high+1===e?r.high=e:this.ss.insert(t)}i("free():"+e)},s.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new a(this.min,this.max))},s.prototype.intervalCount=function(){return this.ss.size()},s.prototype.dump=function(){for(const e of this.ss);},t.exports=s},{debug:18,"js-sdsl":36}],48:[function(e,t,n){var r=e("wrappy");function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},n=e.name||"Function wrapped with `once`";return t.onceError=n+" shouldn't be called more than once",t.called=!1,t}t.exports=r(i),t.exports.strict=r(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},{wrappy:79}],49:[function(e,t,n){(function(e){(function(){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this)}).call(this,e("_process"))},{_process:50}],50:[function(e,t,n){var r,i,o=t.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(n){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],h=!1,d=-1;function f(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!h){var e=l(f);h=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,h=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(n){return i.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new g(e,t)),1!==u.length||h||l(p)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],51:[function(e,t,n){(function(e){(function(){!function(r){var i="object"==typeof n&&n&&!n.nodeType&&n,o="object"==typeof t&&t&&!t.nodeType&&t,a="object"==typeof e&&e;a.global!==a&&a.window!==a&&a.self!==a||(r=a);var s,l,c=2147483647,u=36,h=1,d=26,f=38,p=700,g=72,m=128,v="-",y=/^xn--/,b=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=u-h,C=Math.floor,$=String.fromCharCode;function S(e){throw new RangeError(w[e])}function E(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function A(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+E((e=e.replace(x,".")).split("."),t).join(".")}function M(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function k(e){return E(e,(function(e){var t="";return e>65535&&(t+=$((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+$(e)})).join("")}function T(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function P(e,t,n){var r=0;for(e=n?C(e/p):e>>1,e+=C(e/t);e>_*d>>1;r+=u)e=C(e/_);return C(r+(_+1)*e/(e+f))}function O(e){var t,n,r,i,o,a,s,l,f,p,y,b=[],x=e.length,w=0,_=m,$=g;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&S("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<x;){for(o=w,a=1,s=u;i>=x&&S("invalid-input"),((l=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:u)>=u||l>C((c-w)/a))&&S("overflow"),w+=l*a,!(l<(f=s<=$?h:s>=$+d?d:s-$));s+=u)a>C(c/(p=u-f))&&S("overflow"),a*=p;$=P(w-o,t=b.length+1,0==o),C(w/t)>c-_&&S("overflow"),_+=C(w/t),w%=t,b.splice(w++,0,_)}return k(b)}function N(e){var t,n,r,i,o,a,s,l,f,p,y,b,x,w,_,E=[];for(b=(e=M(e)).length,t=m,n=0,o=g,a=0;a<b;++a)(y=e[a])<128&&E.push($(y));for(r=i=E.length,i&&E.push(v);r<b;){for(s=c,a=0;a<b;++a)(y=e[a])>=t&&y<s&&(s=y);for(s-t>C((c-n)/(x=r+1))&&S("overflow"),n+=(s-t)*x,t=s,a=0;a<b;++a)if((y=e[a])<t&&++n>c&&S("overflow"),y==t){for(l=n,f=u;!(l<(p=f<=o?h:f>=o+d?d:f-o));f+=u)_=l-p,w=u-p,E.push($(T(p+_%w,0))),l=C(_/w);E.push($(T(l,0))),o=P(n,x,r==i),n=0,++r}++n,++t}return E.join("")}if(s={version:"1.4.1",ucs2:{decode:M,encode:k},decode:O,encode:N,toASCII:function(e){return A(e,(function(e){return b.test(e)?"xn--"+N(e):e}))},toUnicode:function(e){return A(e,(function(e){return y.test(e)?O(e.slice(4).toLowerCase()):e}))}},i&&o)if(t.exports==i)o.exports=s;else for(l in s)s.hasOwnProperty(l)&&(i[l]=s[l]);else r.punycode=s}(this)}).call(this)}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],52:[function(e,t,n){function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var a={};if("string"!=typeof e||0===e.length)return a;var s=/\+/g;e=e.split(t);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var u=0;u<c;++u){var h,d,f,p,g=e[u].replace(s,"%20"),m=g.indexOf(n);m>=0?(h=g.substr(0,m),d=g.substr(m+1)):(h=g,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),r(a,f)?i(a[f])?a[f].push(p):a[f]=[a[f],p]:a[f]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],53:[function(e,t,n){var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?o(a(e),(function(a){var s=encodeURIComponent(r(a))+n;return i(e[a])?o(e[a],(function(e){return s+encodeURIComponent(r(e))})).join(t):s+encodeURIComponent(r(e[a]))})).join(t):s?encodeURIComponent(r(s))+n+encodeURIComponent(r(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],54:[function(e,t,n){n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":52,"./encode":53}],55:[function(e,t,n){var r={};function i(e,t,n){n||(n=Error);var i=function(e){var n,r;function i(n,r,i){return e.call(this,(o=n,a=r,s=i,"string"==typeof t?t:t(o,a,s)))||this;var o,a,s}return r=e,(n=i).prototype=Object.create(r.prototype),n.prototype.constructor=n,n.__proto__=r,i}(n);i.prototype.name=n.name,i.prototype.code=e,r[e]=i}function o(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}i("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),i("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,i,a,s,l,c;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(r="must not be",t=t.replace(/^not /,"")):r="must be",s=e,l=" argument",(void 0===c||c>s.length)&&(c=s.length),s.substring(c-l.length,c)===l)a="The ".concat(e," ").concat(r," ").concat(o(t,"type"));else{var u=function(e,t,n){return"number"!=typeof n&&(n=0),!(n+t.length>e.length)&&-1!==e.indexOf(t,n)}(e,".")?"property":"argument";a='The "'.concat(e,'" ').concat(u," ").concat(r," ").concat(o(t,"type"))}return a+". Received type ".concat(typeof n)}),TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=r},{}],56:[function(e,t,n){(function(n){(function(){var r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=c;var i=e("./_stream_readable"),o=e("./_stream_writable");e("inherits")(c,i);for(var a=r(o.prototype),s=0;s<a.length;s++){var l=a[s];c.prototype[l]||(c.prototype[l]=o.prototype[l])}function c(e){if(!(this instanceof c))return new c(e);i.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",u)))}function u(){this._writableState.ended||n.nextTick(h,this)}function h(e){e.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(c.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(c.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":58,"./_stream_writable":60,_process:50,inherits:24}],57:[function(e,t,n){t.exports=i;var r=e("./_stream_transform");function i(e){if(!(this instanceof i))return new i(e);r.call(this,e)}e("inherits")(i,r),i.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":59,inherits:24}],58:[function(e,t,n){(function(n,r){(function(){var i;t.exports=S,S.ReadableState=$,e("events").EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=e("./internal/streams/stream"),l=e("buffer").Buffer,c=r.Uint8Array||function(){},u=e("util");o=u&&u.debuglog?u.debuglog("stream"):function(){};var h,d,f,p=e("./internal/streams/buffer_list"),g=e("./internal/streams/destroy"),m=e("./internal/streams/state").getHighWaterMark,v=e("../errors").codes,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,x=v.ERR_METHOD_NOT_IMPLEMENTED,w=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;e("inherits")(S,s);var _=g.errorOrDestroy,C=["error","close","destroy","pause","resume"];function $(t,n,r){i=i||e("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof i),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=m(this,t,"readableHighWaterMark",r),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(h||(h=e("string_decoder/").StringDecoder),this.decoder=new h(t.encoding),this.encoding=t.encoding)}function S(t){if(i=i||e("./_stream_duplex"),!(this instanceof S))return new S(t);var n=this instanceof i;this._readableState=new $(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),s.call(this)}function E(e,t,n,r,i){o("readableAddChunk",t);var a,s,u,h,d,f=e._readableState;if(null===t)f.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?T(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}(e,f);else if(i||(s=f,d=u=t,l.isBuffer(d)||d instanceof c||"string"==typeof u||void 0===u||s.objectMode||(h=new y("chunk",["string","Buffer","Uint8Array"],u)),a=h),a)_(e,a);else if(f.objectMode||t&&t.length>0)if("string"==typeof t||f.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),r)f.endEmitted?_(e,new w):A(e,f,t,!0);else if(f.ended)_(e,new b);else{if(f.destroyed)return!1;f.reading=!1,f.decoder&&!n?(t=f.decoder.write(t),f.objectMode||0!==t.length?A(e,f,t,!1):O(e,f)):A(e,f,t,!1)}else r||(f.reading=!1,O(e,f));return!f.ended&&(f.length<f.highWaterMark||0===f.length)}function A(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&T(e)),O(e,t)}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),S.prototype.destroy=g.destroy,S.prototype._undestroy=g.undestroy,S.prototype._destroy=function(e,t){t(e)},S.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=l.from(e,t),t=""),n=!0),E(this,e,t,!1,n)},S.prototype.unshift=function(e){return E(this,e,null,!0,!1)},S.prototype.isPaused=function(){return!1===this._readableState.flowing},S.prototype.setEncoding=function(t){h||(h=e("string_decoder/").StringDecoder);var n=new h(t);this._readableState.decoder=n,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,i="";null!==r;)i+=n.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var M=1073741824;function k(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=((n=e)>=M?n=M:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0));var n}function T(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,R(e)}function O(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(o("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function D(e){o("readable nexttick read 0"),e.read(0)}function L(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),R(e),t.flowing&&!t.reading&&e.read(0)}function R(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function j(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(F,t,e))}function F(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function G(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}S.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?j(this):T(this),null;if(0===(e=k(e,t))&&t.ended)return 0===t.length&&j(this),null;var r,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=k(n,t))),null===(r=e>0?B(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&j(this)),null!==r&&this.emit("data",r),r},S.prototype._read=function(e){_(this,new x("_read()"))},S.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,o("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===n.stdout||e===n.stderr?v:c;function l(t,n){o("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,o("cleanup"),e.removeListener("close",g),e.removeListener("finish",m),e.removeListener("drain",h),e.removeListener("error",p),e.removeListener("unpipe",l),r.removeListener("end",c),r.removeListener("end",v),r.removeListener("data",f),d=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function c(){o("onend"),e.end()}i.endEmitted?n.nextTick(s):r.once("end",s),e.on("unpipe",l);var u,h=(u=r,function(){var e=u._readableState;o("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(u,"data")&&(e.flowing=!0,R(u))});e.on("drain",h);var d=!1;function f(t){o("ondata");var n=e.write(t);o("dest.write",n),!1===n&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==G(i.pipes,e))&&!d&&(o("false write response, pause",i.awaitDrain),i.awaitDrain++),r.pause())}function p(t){o("onerror",t),v(),e.removeListener("error",p),0===a(e,"error")&&_(e,t)}function g(){e.removeListener("finish",m),v()}function m(){o("onfinish"),e.removeListener("close",g),v()}function v(){o("unpipe"),r.unpipe(e)}return r.on("data",f),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(e,"error",p),e.once("close",g),e.once("finish",m),e.emit("pipe",r),i.flowing||(o("pipe resume"),r.resume()),e},S.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=G(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},S.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,o("on readable",i.length,i.reading),i.length?T(this):i.reading||n.nextTick(D,this))),r},S.prototype.addListener=S.prototype.on,S.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},S.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},S.prototype.resume=function(){var e,t,r=this._readableState;return r.flowing||(o("resume"),r.flowing=!r.readableListening,e=this,(t=r).resumeScheduled||(t.resumeScheduled=!0,n.nextTick(L,e,t))),r.paused=!1,this},S.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},S.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),n.decoder&&(i=n.decoder.write(i)),(!n.objectMode||null!=i)&&(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<C.length;a++)e.on(C[a],this.emit.bind(this,C[a]));return this._read=function(t){o("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(S.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=e("./internal/streams/async_iterator")),d(this)}),Object.defineProperty(S.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(S.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(S.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),S._fromList=B,Object.defineProperty(S.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(S.from=function(t,n){return void 0===f&&(f=e("./internal/streams/from")),f(S,t,n)})}).call(this)}).call(this,e("_process"),void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/async_iterator":61,"./internal/streams/buffer_list":62,"./internal/streams/destroy":63,"./internal/streams/from":65,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,events:22,inherits:24,"string_decoder/":75,util:16}],59:[function(e,t,n){t.exports=c;var r=e("../errors").codes,i=r.ERR_METHOD_NOT_IMPLEMENTED,o=r.ERR_MULTIPLE_CALLBACK,a=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=r.ERR_TRANSFORM_WITH_LENGTH_0,l=e("./_stream_duplex");function c(e){if(!(this instanceof c))return new c(e);l.call(this,e),this._transformState={afterTransform:function(e,t){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(null===r)return this.emit("error",new o);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),r(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",u)}function u(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?h(this,null,null):this._flush((function(t,n){h(e,t,n)}))}function h(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}e("inherits")(c,l),c.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},c.prototype._transform=function(e,t,n){n(new i("_transform()"))},c.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},c.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},c.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},{"../errors":55,"./_stream_duplex":56,inherits:24}],60:[function(e,t,n){(function(n,r){(function(){function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}(t,e)}}var o;t.exports=S,S.WritableState=$;var a,s={deprecate:e("util-deprecate")},l=e("./internal/streams/stream"),c=e("buffer").Buffer,u=r.Uint8Array||function(){},h=e("./internal/streams/destroy"),d=e("./internal/streams/state").getHighWaterMark,f=e("../errors").codes,p=f.ERR_INVALID_ARG_TYPE,g=f.ERR_METHOD_NOT_IMPLEMENTED,m=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,x=f.ERR_STREAM_WRITE_AFTER_END,w=f.ERR_UNKNOWN_ENCODING,_=h.errorOrDestroy;function C(){}function $(t,r,a){o=o||e("./_stream_duplex"),t=t||{},"boolean"!=typeof a&&(a=r instanceof o),this.objectMode=!!t.objectMode,a&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===t.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r,i=e._writableState,o=i.sync,a=i.writecb;if("function"!=typeof a)throw new m;if((r=i).writing=!1,r.writecb=null,r.length-=r.writelen,r.writelen=0,t)!function(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(P,e,t),e._writableState.errorEmitted=!0,_(e,i)):(o(i),e._writableState.errorEmitted=!0,_(e,i),P(e,t))}(e,i,o,t,a);else{var s=k(i)||e.destroyed;s||i.corked||i.bufferProcessing||!i.bufferedRequest||M(e,i),o?n.nextTick(A,e,i,s,a):A(e,i,s,a)}}(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function S(t){var n=this instanceof(o=o||e("./_stream_duplex"));if(!n&&!a.call(S,this))return new S(t);this._writableState=new $(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),l.call(this)}function E(e,t,n,r,i,o,a){t.writelen=r,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function A(e,t,n,r){var i,o;n||(i=e,0===(o=t).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),t.pendingcb--,r(),P(e,t)}function M(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),a=t.corkedRequestsFree;a.entry=n;for(var s=0,l=!0;n;)o[s]=n,n.isBuf||(l=!1),n=n.next,s+=1;o.allBuffers=l,E(e,t,!0,t.length,o,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var c=n.chunk,u=n.encoding,h=n.callback;if(E(e,t,!1,t.objectMode?1:c.length,c,u,h),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function k(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function T(e,t){e._final((function(n){t.pendingcb--,n&&_(e,n),t.prefinished=!0,e.emit("prefinish"),P(e,t)}))}function P(e,t){var r,i,o=k(t);if(o&&(r=e,(i=t).prefinished||i.finalCalled||("function"!=typeof r._final||i.destroyed?(i.prefinished=!0,r.emit("prefinish")):(i.pendingcb++,i.finalCalled=!0,n.nextTick(T,r,i))),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var a=e._readableState;(!a||a.autoDestroy&&a.endEmitted)&&e.destroy()}return o}e("inherits")(S,l),$.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty($.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===S&&e&&e._writableState instanceof $}})):a=function(e){return e instanceof this},S.prototype.pipe=function(){_(this,new v)},S.prototype.write=function(e,t,r){var i,o,a=this._writableState,s=!1,l=!a.objectMode&&(i=e,c.isBuffer(i)||i instanceof u);return l&&!c.isBuffer(e)&&(o=e,e=c.from(o)),"function"==typeof t&&(r=t,t=null),l?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof r&&(r=C),a.ending?function(e,t){var r=new x;_(e,r),n.nextTick(t,r)}(this,r):(l||function(e,t,r,i){var o;return null===r?o=new b:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(_(e,o),n.nextTick(i,o),!1)}(this,a,e,r))&&(a.pendingcb++,s=function(e,t,n,r,i,o){if(!n){var a=(l=r,u=i,(s=t).objectMode||!1===s.decodeStrings||"string"!=typeof l||(l=c.from(l,u)),l);r!==a&&(n=!0,i="buffer",r=a)}var s,l,u,h=t.objectMode?1:r.length;t.length+=h;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var f=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},f?f.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else E(e,t,!1,h,r,i,o);return d}(this,a,l,e,t,r)),s},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||M(this,e))},S.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new w(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),S.prototype._write=function(e,t,n){n(new g("_write()"))},S.prototype._writev=null,S.prototype.end=function(e,t,r){var i,o,a,s=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),s.corked&&(s.corked=1,this.uncork()),s.ending||(i=this,a=r,(o=s).ending=!0,P(i,o),a&&(o.finished?n.nextTick(a):i.once("finish",a)),o.ended=!0,i.writable=!1),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),S.prototype.destroy=h.destroy,S.prototype._undestroy=h.undestroy,S.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":55,"./_stream_duplex":56,"./internal/streams/destroy":63,"./internal/streams/state":67,"./internal/streams/stream":68,_process:50,buffer:17,inherits:24,"util-deprecate":78}],61:[function(e,t,n){(function(n){(function(){var r;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=e("./end-of-stream"),a=Symbol("lastResolve"),s=Symbol("lastReject"),l=Symbol("error"),c=Symbol("ended"),u=Symbol("lastPromise"),h=Symbol("handlePromise"),d=Symbol("stream");function f(e,t){return{value:e,done:t}}function p(e){var t=e[a];if(null!==t){var n=e[d].read();null!==n&&(e[u]=null,e[a]=null,e[s]=null,t(f(n,!1)))}}var g=Object.getPrototypeOf((function(){})),m=Object.setPrototypeOf((i(r={get stream(){return this[d]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[c])return Promise.resolve(f(void 0,!0));if(this[d].destroyed)return new Promise((function(t,r){n.nextTick((function(){e[l]?r(e[l]):t(f(void 0,!0))}))}));var r,i,o,a=this[u];if(a)r=new Promise((i=a,o=this,function(e,t){i.then((function(){o[c]?e(f(void 0,!0)):o[h](e,t)}),t)}));else{var s=this[d].read();if(null!==s)return Promise.resolve(f(s,!1));r=new Promise(this[h])}return this[u]=r,r}},Symbol.asyncIterator,(function(){return this})),i(r,"return",(function(){var e=this;return new Promise((function(t,n){e[d].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),r),g);t.exports=function(e){var t,r=Object.create(m,(i(t={},d,{value:e,writable:!0}),i(t,a,{value:null,writable:!0}),i(t,s,{value:null,writable:!0}),i(t,l,{value:null,writable:!0}),i(t,c,{value:e._readableState.endEmitted,writable:!0}),i(t,h,{value:function(e,t){var n=r[d].read();n?(r[u]=null,r[a]=null,r[s]=null,e(f(n,!1))):(r[a]=e,r[s]=t)},writable:!0}),t));return r[u]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[s];return null!==t&&(r[u]=null,r[a]=null,r[s]=null,t(e)),void(r[l]=e)}var n=r[a];null!==n&&(r[u]=null,r[a]=null,r[s]=null,n(f(void 0,!0))),r[c]=!0})),e.on("readable",function(e){n.nextTick(p,e)}.bind(null,r)),r}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":64,_process:50}],62:[function(e,t,n){function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=e("buffer").Buffer,s=e("util").inspect,l=s&&s.custom||"inspect";t.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t;return(t=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return a.alloc(0);for(var t,n,r,i=a.allocUnsafe(e>>>0),o=this.head,s=0;o;)t=o.data,n=i,r=s,a.prototype.copy.call(t,n,r),s+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,r=t.data;for(e-=r.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?r+=i:r+=i.slice(0,e),0==(e-=o)){o===i.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++n}return this.length-=n,r}},{key:"_getBuffer",value:function(e){var t=a.allocUnsafe(e),n=this.head,r=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var i=n.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++r,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(o));break}++r}return this.length-=r,t}},{key:l,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}])&&o(e.prototype,t),e}()},{buffer:17,util:16}],63:[function(e,t,n){(function(e){(function(){function n(e,t){i(e,t),r(e)}function r(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function i(e,t){e.emit("error",t)}t.exports={destroy:function(t,o){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(o?o(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(i,this,t)):e.nextTick(i,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!o&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(r,a):(a._writableState.errorEmitted=!0,e.nextTick(n,a,t)):e.nextTick(n,a,t):o?(e.nextTick(r,a),o(t)):e.nextTick(r,a)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,r=e._writableState;n&&n.autoDestroy||r&&r.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:50}],64:[function(e,t,n){var r=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function i(){}t.exports=function e(t,n,o){if("function"==typeof n)return e(t,null,n);var a,s;n||(n={}),a=o||i,s=!1,o=function(){if(!s){s=!0;for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.apply(this,t)}};var l=n.readable||!1!==n.readable&&t.readable,c=n.writable||!1!==n.writable&&t.writable,u=function(){t.writable||d()},h=t._writableState&&t._writableState.finished,d=function(){c=!1,h=!0,l||o.call(t)},f=t._readableState&&t._readableState.endEmitted,p=function(){l=!1,f=!0,c||o.call(t)},g=function(e){o.call(t,e)},m=function(){var e;return l&&!f?(t._readableState&&t._readableState.ended||(e=new r),o.call(t,e)):c&&!h?(t._writableState&&t._writableState.ended||(e=new r),o.call(t,e)):void 0},v=function(){t.req.on("finish",d)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",d),t.on("abort",m),t.req?v():t.on("request",v)):c&&!t._writableState&&(t.on("end",u),t.on("close",u)),t.on("end",p),t.on("finish",d),!1!==n.error&&t.on("error",g),t.on("close",m),function(){t.removeListener("complete",d),t.removeListener("abort",m),t.removeListener("request",v),t.req&&t.req.removeListener("finish",d),t.removeListener("end",u),t.removeListener("close",u),t.removeListener("finish",d),t.removeListener("end",p),t.removeListener("error",g),t.removeListener("close",m)}}},{"../../../errors":55}],65:[function(e,t,n){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],66:[function(e,t,n){var r,i=e("../../../errors").codes,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e){e()}function c(e,t){return e.pipe(t)}t.exports=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var u,h,d=(h=n).length?"function"!=typeof h[h.length-1]?s:h.pop():s;if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new o("streams");var f=n.map((function(t,i){var o=i<n.length-1;return function(t,n,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;t.on("close",(function(){s=!0})),void 0===r&&(r=e("./end-of-stream")),r(t,{readable:n,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var l=!1;return function(e){if(!s&&!l)return l=!0,(n=t).setHeader&&"function"==typeof n.abort?t.abort():"function"==typeof t.destroy?t.destroy():void o(e||new a("pipe"));var n}}(t,o,i>0,(function(e){u||(u=e),e&&f.forEach(l),o||(f.forEach(l),d(u))}))}));return n.reduce(c)}},{"../../../errors":55,"./end-of-stream":64}],67:[function(e,t,n){var r=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var o,a,s,l=(a=i,s=n,null!=(o=t).highWaterMark?o.highWaterMark:a?o[s]:null);if(null!=l){if(!isFinite(l)||Math.floor(l)!==l||l<0)throw new r(i?n:"highWaterMark",l);return Math.floor(l)}return e.objectMode?16:16384}}},{"../../../errors":55}],68:[function(e,t,n){t.exports=e("events").EventEmitter},{events:22}],69:[function(e,t,n){(n=t.exports=e("./lib/_stream_readable.js")).Stream=n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),n.finished=e("./lib/internal/streams/end-of-stream.js"),n.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":56,"./lib/_stream_passthrough.js":57,"./lib/_stream_readable.js":58,"./lib/_stream_transform.js":59,"./lib/_stream_writable.js":60,"./lib/internal/streams/end-of-stream.js":64,"./lib/internal/streams/pipeline.js":66}],70:[function(e,t,n){t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(arguments.length>0){e=new Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new function(e,t,n){var r=this;this._callback=e,this._args=n,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=r._interval),r._interval&&clearInterval(r._interval),r._interval=setInterval(r._callback,e,r._args)},this.clear=function(){r._interval&&(clearInterval(r._interval),r._interval=void 0)},this.destroy=function(){r._interval&&clearInterval(r._interval),r._callback=void 0,r._interval=void 0,r._args=void 0}}(arguments[0],arguments[1],e)}},{}],71:[function(e,t,n){t.exports=e("./index.js")()},{"./index.js":72}],72:[function(e,t,n){(function(e){(function(){function n(t){return t instanceof e?e.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}t.exports=function(e){return(e=e||{}).circles?function(e){var t=[],r=[];return e.proto?function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return i(o,e);if(o instanceof Map)return new Map(i(Array.from(o),e));if(o instanceof Set)return new Set(i(Array.from(o),e));var a={};for(var s in t.push(o),r.push(a),o){var l=o[s];if("object"!=typeof l||null===l)a[s]=l;else if(l instanceof Date)a[s]=new Date(l);else if(l instanceof Map)a[s]=new Map(i(Array.from(l),e));else if(l instanceof Set)a[s]=new Set(i(Array.from(l),e));else if(ArrayBuffer.isView(l))a[s]=n(l);else{var c=t.indexOf(l);a[s]=-1!==c?r[c]:e(l)}}return t.pop(),r.pop(),a}:function e(o){if("object"!=typeof o||null===o)return o;if(o instanceof Date)return new Date(o);if(Array.isArray(o))return i(o,e);if(o instanceof Map)return new Map(i(Array.from(o),e));if(o instanceof Set)return new Set(i(Array.from(o),e));var a={};for(var s in t.push(o),r.push(a),o)if(!1!==Object.hasOwnProperty.call(o,s)){var l=o[s];if("object"!=typeof l||null===l)a[s]=l;else if(l instanceof Date)a[s]=new Date(l);else if(l instanceof Map)a[s]=new Map(i(Array.from(l),e));else if(l instanceof Set)a[s]=new Set(i(Array.from(l),e));else if(ArrayBuffer.isView(l))a[s]=n(l);else{var c=t.indexOf(l);a[s]=-1!==c?r[c]:e(l)}}return t.pop(),r.pop(),a};function i(e,i){for(var o=Object.keys(e),a=new Array(o.length),s=0;s<o.length;s++){var l=o[s],c=e[l];if("object"!=typeof c||null===c)a[l]=c;else if(c instanceof Date)a[l]=new Date(c);else if(ArrayBuffer.isView(c))a[l]=n(c);else{var u=t.indexOf(c);a[l]=-1!==u?r[u]:i(c)}}return a}}(e):e.proto?function e(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return t(r,e);if(r instanceof Map)return new Map(t(Array.from(r),e));if(r instanceof Set)return new Set(t(Array.from(r),e));var i={};for(var o in r){var a=r[o];"object"!=typeof a||null===a?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),e)):a instanceof Set?i[o]=new Set(t(Array.from(a),e)):ArrayBuffer.isView(a)?i[o]=n(a):i[o]=e(a)}return i}:function e(r){if("object"!=typeof r||null===r)return r;if(r instanceof Date)return new Date(r);if(Array.isArray(r))return t(r,e);if(r instanceof Map)return new Map(t(Array.from(r),e));if(r instanceof Set)return new Set(t(Array.from(r),e));var i={};for(var o in r)if(!1!==Object.hasOwnProperty.call(r,o)){var a=r[o];"object"!=typeof a||null===a?i[o]=a:a instanceof Date?i[o]=new Date(a):a instanceof Map?i[o]=new Map(t(Array.from(a),e)):a instanceof Set?i[o]=new Set(t(Array.from(a),e)):ArrayBuffer.isView(a)?i[o]=n(a):i[o]=e(a)}return i};function t(e,t){for(var r=Object.keys(e),i=new Array(r.length),o=0;o<r.length;o++){var a=r[o],s=e[a];"object"!=typeof s||null===s?i[a]=s:s instanceof Date?i[a]=new Date(s):ArrayBuffer.isView(s)?i[a]=n(s):i[a]=t(s)}return i}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:17}],73:[function(e,t,n){var r=e("buffer"),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,n),n.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},{buffer:17}],74:[function(e,t,n){t.exports=function(e){var t,n=e._readableState;return n?n.objectMode||"number"==typeof e._duplexState?e.read():e.read((t=n).buffer.length?t.buffer.head?t.buffer.head.data.length:t.buffer[0].length:t.length):null}},{}],75:[function(e,t,n){var r=e("safe-buffer").Buffer,i=r.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(r.isEncoding===i||!i(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=l,this.end=c,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=h,t=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function l(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function d(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}n.StringDecoder=o,o.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},o.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},o.prototype.text=function(e,t){var n=function(e,t,n){var r=t.length-1;if(r<n)return 0;var i=a(t[r]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(e.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(t[r]))>=0?(i>0&&(2===i?i=0:e.lastNeed=i-3),i):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var r=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},o.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":73}],76:[function(e,t,n){var r=e("punycode"),i=e("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}n.parse=b,n.resolve=function(e,t){return b(e,!1,!0).resolve(t)},n.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},n.format=function(e){return i.isString(e)&&(e=b(e)),e instanceof o?e.format():o.prototype.format.call(e)},n.Url=o;var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(c),h=["%","/","?",";","#"].concat(u),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",c=e.split(s);c[0]=c[0].replace(/\\/g,"/");var b=e=c.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var x=l.exec(b);if(x)return this.path=b,this.href=b,this.pathname=x[1],x[2]?(this.search=x[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var w=a.exec(b);if(w){var _=(w=w[0]).toLowerCase();this.protocol=_,b=b.substr(w.length)}if(n||w||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var C="//"===b.substr(0,2);!C||w&&m[w]||(b=b.substr(2),this.slashes=!0)}if(!m[w]&&(C||w&&!v[w])){for(var $,S,E=-1,A=0;A<d.length;A++)-1!==(M=b.indexOf(d[A]))&&(-1===E||M<E)&&(E=M);for(-1!==(S=-1===E?b.lastIndexOf("@"):b.lastIndexOf("@",E))&&($=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent($)),E=-1,A=0;A<h.length;A++){var M;-1!==(M=b.indexOf(h[A]))&&(-1===E||M<E)&&(E=M)}-1===E&&(E=b.length),this.host=b.slice(0,E),b=b.slice(E),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var T=this.hostname.split(/\./),P=(A=0,T.length);A<P;A++){var O=T[A];if(O&&!O.match(f)){for(var N="",I=0,D=O.length;I<D;I++)O.charCodeAt(I)>127?N+="x":N+=O[I];if(!N.match(f)){var L=T.slice(0,A),R=T.slice(A+1),B=O.match(p);B&&(L.push(B[1]),R.unshift(B[2])),R.length&&(b="/"+R.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),k||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+j,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!g[_])for(A=0,P=u.length;A<P;A++){var G=u[A];if(-1!==b.indexOf(G)){var V=encodeURIComponent(G);V===G&&(V=escape(G)),b=b.split(G).join(V)}}var z=b.indexOf("#");-1!==z&&(this.hash=b.substr(z),b=b.slice(0,z));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),v[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var U=this.search||"";this.path=j+U}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||v[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),c=0;c<l.length;c++){var u=l[c];"protocol"!==u&&(n[u]=e[u])}return v[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!v[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var g=n.pathname||"",y=n.search||"";n.path=g+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),x=e.host||e.pathname&&"/"===e.pathname.charAt(0),w=x||b||n.host&&e.pathname,_=w,C=n.pathname&&n.pathname.split("/")||[],$=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!v[n.protocol]);if($&&(n.hostname="",n.port=null,n.host&&(""===C[0]?C[0]=n.host:C.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),w=w&&(""===p[0]||""===C[0])),x)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,C=p;else if(p.length)C||(C=[]),C.pop(),C=C.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search))return $&&(n.hostname=n.host=C.shift(),(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n;if(!C.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=C.slice(-1)[0],E=(n.host||e.host||C.length>1)&&("."===S||".."===S)||""===S,A=0,M=C.length;M>=0;M--)"."===(S=C[M])?C.splice(M,1):".."===S?(C.splice(M,1),A++):A&&(C.splice(M,1),A--);if(!w&&!_)for(;A--;A)C.unshift("..");!w||""===C[0]||C[0]&&"/"===C[0].charAt(0)||C.unshift(""),E&&"/"!==C.join("/").substr(-1)&&C.push("");var k,T=""===C[0]||C[0]&&"/"===C[0].charAt(0);return $&&(n.hostname=n.host=T?"":C.length?C.shift():"",(k=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=k.shift(),n.host=n.hostname=k.shift())),(w=w||n.host&&C.length)&&!T&&C.unshift(""),C.length?n.pathname=C.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":77,punycode:51,querystring:54}],77:[function(e,t,n){t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],78:[function(e,t,n){(function(e){(function(){function n(t){try{if(!e.localStorage)return!1}catch(r){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(e,t){if(n("noDeprecation"))return e;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation"),r=!0}return e.apply(this,arguments)}}}).call(this)}).call(this,void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(e,t,n){t.exports=function e(t,n){if(t&&n)return e(t)(n);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){r[e]=t[e]})),r;function r(){for(var e=new Array(arguments.length),n=0;n<e.length;n++)e[n]=arguments[n];var r=t.apply(this,e),i=e[e.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach((function(e){r[e]=i[e]})),r}}},{}],80:[function(e,t,n){t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],81:[function(e,t,n){t.exports=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e};var r=Object.prototype.hasOwnProperty},{}],82:[function(e,t,n){t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],83:[function(e,t,n){function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,i=arguments.length;n<i;n++)t.push(arguments[n]);return t}function i(e,t,n){var r=t===e.head?new s(n,null,t,e):new s(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function o(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,n,r){if(!(this instanceof s))return new s(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},r.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},r.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},r.prototype.map=function(e,t){t=t||this;for(var n=new r,i=this.head;null!==i;)n.push(e.call(t,i.value,this)),i=i.next;return n},r.prototype.mapReverse=function(e,t){t=t||this;for(var n=new r,i=this.tail;null!==i;)n.push(e.call(t,i.value,this)),i=i.prev;return n},r.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},r.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},r.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},r.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},r.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=0,o=this.head;null!==o&&i<e;i++)o=o.next;for(;null!==o&&i<t;i++,o=o.next)n.push(o.value);return n},r.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new r;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var i=this.length,o=this.tail;null!==o&&i>t;i--)o=o.prev;for(;null!==o&&i>e;i--,o=o.prev)n.push(o.value);return n},r.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,o=this.head;null!==o&&r<e;r++)o=o.next;var a=[];for(r=0;o&&r<t;r++)a.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),r=0;r<n.length;r++)o=i(this,o,n[r]);return a},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{e("./iterator.js")(r)}catch(l){}},{"./iterator.js":82}]},{},[12])(12);const data$3=[{error_correction_data:{user_input:"",text_correct:"",error_info:"[]"},visual_reference_resolution_data:{resolved:"{}",user_input:"",image:""},intent_classification_data:{user_input:"",label3:"",PROB_2:"0.0006",label1:"",label2:"",PROB_1:"0.9986",label4:"",PROB_4:"0.0003",PROB_3:"0.0005"},answer_by_data:{answer:"",path:"",question:""},textual_reference_resolution_data:{text_result:"",lastResponse:"",user_input:"",ref_info:""},task_identification_data:{task_elements:"{u'position': {u'': [u'']}, u'human': {u'': [u'$T100']}}",task_type:"",command:""},multiple_rounds_of_dialogue_data:{user_input:"",ambigutity:"",response:""},abstract_data:{abstract_question:"",question:""}},{error_correction_data:{user_input:"",text_correct:"",error_info:"[]"},visual_reference_resolution_data:{resolved:"",user_input:"",image:""},intent_classification_data:{user_input:"",label3:"",PROB_2:"0.0",label1:"",label2:"",PROB_1:"1.0",label4:"",PROB_4:"0.0",PROB_3:"0.0"},answer_by_data:{answer:"{u'status': u'running', u'label': {u'answerby': u'milvus_fqa', u'time_consuming': 0.221639, u'response': u''}}",path:"{u'': {u'status': u'running', u'label': {u'time_consuming': 0.052466, u'response': None}}, u'milvus_faq': {u'status': u'success', u'label': {u'similarity': 0.9898558855056763, u'time_consuming': 0.067712, u'similar_problem': u'', u'response': u'', u'similar_problem_Id': 6950}}, u'()': {u'status': u'running', u'label': {u'time_consuming': 0.00103, u'response': None}}, u'rasa': {u'status': u'running', u'label': {u'time_consuming': 0.221639, u'response': None}}, u'': {u'status': u'stopped'}}",question:""},textual_reference_resolution_data:{text_result:"",lastResponse:"",user_input:"",ref_info:""},task_identification_data:{task_elements:"",task_type:"",command:""},multiple_rounds_of_dialogue_data:{user_input:"",ambigutity:"",response:""},abstract_data:{abstract_question:"",question:""}},{error_correction_data:{user_input:"",text_correct:"",error_info:"[[4, u'', u'', u'0.9696']]"},visual_reference_resolution_data:{resolved:"{}",user_input:"",image:""},intent_classification_data:{user_input:"",label3:"",PROB_2:"0.0005",label1:"",label2:"",PROB_1:"0.9987",label4:"",PROB_4:"0.0002",PROB_3:"0.0005"},answer_by_data:{answer:"",path:"",question:""},textual_reference_resolution_data:{text_result:"",lastResponse:"",user_input:"",ref_info:""},task_identification_data:{task_elements:"{u'position': {u'': [u'']}, u'human': {u'': [u'$T100']}}",task_type:"",command:""},multiple_rounds_of_dialogue_data:{user_input:"",ambigutity:"",response:""},abstract_data:{abstract_question:"",question:""}}],options={Name:"reason_engine_test",connectTimeout:4e4,clientId:"",username:"",password:"",cleanSession:!1,keepAlive:60};new TextDecoder;const useMQTT=(e,t)=>{const n=ref$1({});mqtt_min.exports.connect(e,options);let r=0;return onMounted((()=>{setInterval((()=>{n.value=data$3[r],2==r?r=0:r++}),3e3)})),{msg:n}};class VueShape extends Node$4{}!function(e){function t(e){const t=[],n=Markup.getForeignObjectMarkup();return e?t.push({tagName:e,selector:"body"},n):t.push(n),t}e.config({view:"vue-shape-view",markup:t(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(e){if(null==e.markup){const n=e.primer;if(n){e.markup=t(n);let r={};switch(n){case"circle":r={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":r={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}e.attrs=merge$1({},{body:Object.assign({refWidth:null,refHeight:null},r)},e.attrs||{})}}return e}}),Node$4.registry.register("vue-shape",e,!0)}(VueShape||(VueShape={}));var __rest$3=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};const shapeMaps={};function register$1(e){const{shape:t,component:n,inherit:r}=e,i=__rest$3(e,["shape","component","inherit"]);if(!t)throw new Error("should specify shape in config");shapeMaps[t]={component:n},Graph$5.registerNode(t,Object.assign({inherit:r||"vue-shape"},i),!0)}let active=!1;const items=reactive({});function connect$1(e,t,n,r){if(active){const{Teleport:i,markRaw:o}=Vue;items[e]=o(defineComponent({render:()=>h$1(i,{to:n},[h$1(t)]),provide:()=>({getNode:()=>r})}))}}function disconnect(e){active&&delete items[e]}function isActive(){return active}function getTeleport(){active=!0;const{Fragment:e}=Vue;return defineComponent({setup:()=>()=>h$1(e,{},Object.keys(items).map((e=>h$1(items[e]))))})}class VueShapeView extends NodeView{getComponentContainer(){return this.selectors.foContent}confirmUpdate(e){const t=super.confirmUpdate(e);return this.handleAction(t,VueShapeView.action,(()=>{this.renderVueComponent()}))}targetId(){return`${this.graph.view.cid}:${this.cell.id}`}renderVueComponent(){this.unmountVueComponent();const e=this.getComponentContainer(),t=this.cell;if(e){const{component:n}=shapeMaps[t.shape];n&&(isActive()?connect$1(this.targetId(),n,e,t):(this.vm=createApp({render:()=>h$1(n),provide:()=>({getNode:()=>t})}),this.vm.mount(e)))}}unmountVueComponent(){const e=this.getComponentContainer();return this.vm&&(this.vm.unmount(),this.vm=null),e.innerHTML="",e}onMouseDown(e,t,n){const r=e.target;if("input"===r.tagName.toLowerCase()){const e=r.getAttribute("type");if(null==e||["text","password","number","email","search","tel","url"].includes(e))return}super.onMouseDown(e,t,n)}unmount(){return isActive()&&disconnect(this.targetId()),this.unmountVueComponent(),super.unmount(),this}}var VueShapeView2;VueShapeView2=VueShapeView||(VueShapeView={}),VueShapeView2.action="vue",VueShapeView2.config({bootstrap:[VueShapeView2.action],actions:{component:VueShapeView2.action}}),NodeView.registry.register("vue-shape-view",VueShapeView2,!0);const subWidth=3840,subHeight=2160,padding=30,leftNode=1300,rightNode2=(subHeight-2*padding)/2-padding/2,answer={label:{response:"",answerby:"",time_consuming:0},status:""},path$1=[{label:{moduleName:"rasa"},status:""},{label:{moduleName:"()"},status:""},{label:{moduleName:""},status:""},{label:{moduleName:"milvus_faq"},status:""},{label:{moduleName:"FAQ"},status:""},{label:{moduleName:""},status:""},{label:{moduleName:""},status:""}],question={status:"",label:{user_input:""}},data$2={answer:answer,path:path$1,question:question},Legend_vue_vue_type_style_index_0_scoped_4abbc5a1_lang="",_export_sfc=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},_sfc_main$5={},_withScopeId$2=e=>(pushScopeId("data-v-4abbc5a1"),e=e(),popScopeId(),e),_hoisted_1$3={class:"legind"},_hoisted_2$2=_withScopeId$2((()=>createBaseVNode("ul",null,[createBaseVNode("li",null,[createBaseVNode("div",{class:"running"}),createBaseVNode("span",null,"")]),createBaseVNode("li",null,[createBaseVNode("div",{class:"fail"}),createBaseVNode("span",null,"")]),createBaseVNode("li",null,[createBaseVNode("div",{class:"success"}),createBaseVNode("span",null,"")]),createBaseVNode("li",null,[createBaseVNode("div",{class:"idle"}),createBaseVNode("span",null,"")])],-1))),_hoisted_3$2=[_hoisted_2$2];function _sfc_render$2(e,t,n,r,i,o){return openBlock(),createElementBlock("div",_hoisted_1$3,_hoisted_3$2)}const Legend$2=_export_sfc(_sfc_main$5,[["render",_sfc_render$2],["__scopeId","data-v-4abbc5a1"]]);function mitt(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}const events=mitt(),alert_vue_vue_type_style_index_0_scoped_5369832e_lang="";let timer$2=null;const _sfc_main$4={data:()=>({left:0,top:0,content:"",show:!1}),watch:{show:function(e,t){e&&(timer$2=setTimeout((()=>{this.show=!1,clearTimeout(timer$2),timer$2=null}),1e4))}},mounted(){events.on("printMessage",this.changeAlertStatus)},beforeMount(){events.off("printMessage")},methods:{changeAlertStatus(e){const t=e.target;this.content=t.innerText,this.left=e.pageX,this.top=e.pageY,this.show=!0},close(){clearTimeout(timer$2),timer$2=null,this.show=!1}}};function _sfc_render$1(e,t,n,r,i,o){return openBlock(),createBlock(Teleport,{to:"#app"},[withDirectives(createBaseVNode("div",{onClick:t[0]||(t[0]=(...e)=>o.close&&o.close(...e)),class:"alert_warpe",style:normalizeStyle({top:`${i.top}px`,left:`${i.left}px`})},[createBaseVNode("p",null,toDisplayString(i.content),1)],4),[[vShow,i.show]])])}const alert=_export_sfc(_sfc_main$4,[["render",_sfc_render$1],["__scopeId","data-v-5369832e"]]),node_vue_vue_type_style_index_0_scoped_735a32d8_lang="",_sfc_main$3=defineComponent({name:"ProgressNode",inject:["getNode"],data:()=>({data:data$2,leftNode:leftNode,rightNode2:rightNode2,subWidth:subWidth,setIntervals:[],show:!1}),components:{Legend:Legend$2,alert:alert},mounted(){const e=this.getNode(),t=["rasa","()","","","FAQ","milvus_faq",""];e.on("change:data",(({current:e})=>{if(this.clear(),"answer_by_data"==e.node.name){const n=e.node.value.answer_by_data,r=/u'/g,i=/'/g,o=/None/g,a={};if(""!=n.question?a.question=n.question:a.question=data$2.question,""!=n.path){const e=n.path.replace(r,"'").replace(i,'"').replace(o,'""');a.path=JSON.parse(e)}else a.path=data$2.path;if(""!=n.answer){const e=n.answer.replace(r,"'").replace(i,'"').replace(o,'""');a.answer=JSON.parse(e)}else a.answer=data$2.answer;"object"==typeof a.path&&(a.path=Object.keys(a.path).map((e=>{const t={moduleName:e};let n=Object.assign(t,a.path[e].label);return{...a.path[e],label:n}})));const s=a.path.map((e=>e.label.moduleName));t.forEach((e=>{s.indexOf(e)<0&&a.path.push({status:"running",label:{moduleName:e}})})),this.data=a}}));const n=[...document.getElementsByClassName("slide"),...document.getElementsByClassName("node_text")];this.doms=n.map((e=>{e.onclick=e=>{this.bindClick(e)}}))},beforeUpdate(){this.clear()},updated(){[...document.getElementsByClassName("slide"),...document.getElementsByClassName("node_text")].forEach((e=>{e.onclick=e=>{this.bindClick(e),this.doms.push({name:!0})}}))},watch:{data:{hander(){this.$nextTick((()=>{}))},deep:!0}},methods:{changColorStatus(e){switch(e){case"running":return"rgba(56, 167, 231, 1)";case"stopped":return"rgba(60, 62, 60, 1)";case"success":return"rgba(99, 196, 88, 1)";default:return""}},getWidth:e=>20*(e+="").length+"px",updateNode(){[...document.getElementsByClassName("slide"),...document.getElementsByClassName("node_text")].forEach((e=>{if(e.parentNode.offsetWidth<e.offsetWidth){e.style.marginLeft=e.parentNode.offsetWidth+"px";let t=setInterval((()=>{let t=getComputedStyle(e);const n=parseInt(t.marginLeft);n<=-e.parentNode.offsetWidth&&n<=-e.offsetWidth?e.style.marginLeft=e.parentNode.offsetWidth+"px":e.style.marginLeft=n-1+"px"}),20);this.setIntervals.push(t)}else"node_text"==e.className?(e.parentNode.style.display="flex",e.style.marginLeft="0px",e.parentNode.style.justifyContent="center"):e.style.marginLeft="0px"}))},clear(){0!=this.setIntervals.length&&(this.setIntervals.forEach((e=>{clearInterval(e)})),this.setIntervals=[])},bindClick(e){this.$refs.alert.changeAlertStatus(e)}}}),_withScopeId$1=e=>(pushScopeId("data-v-735a32d8"),e=e(),popScopeId(),e),_hoisted_1$2={class:"aswer"},_hoisted_2$1={class:"requstion"},_hoisted_3$1={class:"item text-slide-wraper"},_hoisted_4$1={class:"slide"},_hoisted_5={class:"path"},_hoisted_6={class:"text-slide-wraper"},_hoisted_7=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_8={class:"text-slide"},_hoisted_9={class:"slide"},_hoisted_10=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_11={class:"text-slide"},_hoisted_12={class:"slide"},_hoisted_13=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_14={class:"text-slide"},_hoisted_15={class:"slide"},_hoisted_16=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_17={class:"text-slide"},_hoisted_18={class:"slide"},_hoisted_19=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_20={class:"text-slide"},_hoisted_21={class:"slide"},_hoisted_22=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_23={class:"text-slide"},_hoisted_24={class:"slide"},_hoisted_25=_withScopeId$1((()=>createBaseVNode("div",null,"Id:",-1))),_hoisted_26={class:"text-slide"},_hoisted_27={class:"slide"},_hoisted_28=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_29={class:"text-slide"},_hoisted_30={class:"slide"},_hoisted_31=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_32={class:"text-slide"},_hoisted_33={class:"slide"},_hoisted_34=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_35={class:"text-slide"},_hoisted_36={class:"slide"},_hoisted_37=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_38={class:"text-slide"},_hoisted_39={class:"slide"},_hoisted_40=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_41={class:"text-slide"},_hoisted_42={class:"slide"},_hoisted_43=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_44={class:"text-slide"},_hoisted_45={class:"slide"},_hoisted_46=_withScopeId$1((()=>createBaseVNode("div",null,":",-1))),_hoisted_47={class:"text-slide"},_hoisted_48={class:"slide"},_hoisted_49={class:"respones"},_hoisted_50={class:"text-slide-wraper"},_hoisted_51=_withScopeId$1((()=>createBaseVNode("div",{style:{width:"35%"}},":",-1))),_hoisted_52={class:"text-slide"},_hoisted_53={class:"slide"},_hoisted_54={class:"text-slide-wraper"},_hoisted_55=_withScopeId$1((()=>createBaseVNode("div",{style:{width:"35%"}},":",-1))),_hoisted_56={class:"text-slide"},_hoisted_57={class:"slide"},_hoisted_58={class:"text-slide-wraper"},_hoisted_59=_withScopeId$1((()=>createBaseVNode("div",{style:{width:"35%"}},":",-1))),_hoisted_60={class:"text-slide"},_hoisted_61={class:"slide"};function _sfc_render(e,t,n,r,i,o){var a,s,l,c,u,h,d,f,p,g,m,v,y;const b=resolveComponent("P"),x=resolveComponent("Legend"),w=resolveComponent("alert");return openBlock(),createElementBlock("div",{style:normalizeStyle([{position:"relative"},{width:e.subWidth-e.leftNode+"px",height:`${e.rightNode2}px`}])},[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("p",_hoisted_3$1,[createBaseVNode("span",_hoisted_4$1,toDisplayString((null==(l=null==(s=null==(a=e.data)?void 0:a.question)?void 0:s.label)?void 0:l.user_input)||(null==(c=e.data)?void 0:c.question)),1)])]),createBaseVNode("ul",_hoisted_5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(null==(u=e.data)?void 0:u.path,(t=>{var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v;return openBlock(),createElementBlock(Fragment,null,[""!==(null==t?void 0:t.label)?(openBlock(),createElementBlock("li",{key:0,class:"item",style:normalizeStyle({backgroundColor:e.changColorStatus(null==t?void 0:t.status)})},[createBaseVNode("p",_hoisted_6,[_hoisted_7,createBaseVNode("div",_hoisted_8,[createBaseVNode("span",_hoisted_9,toDisplayString(null==(n=t.label)?void 0:n.moduleName),1)])]),(null==(r=t.label)?void 0:r.name)?(openBlock(),createBlock(b,{key:0,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_10,createBaseVNode("div",_hoisted_11,[createBaseVNode("span",_hoisted_12,toDisplayString(null==(e=t.label)?void 0:e.name),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(i=t.label)?void 0:i.Extract_instance)?(openBlock(),createBlock(b,{key:1,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_13,createBaseVNode("div",_hoisted_14,[createBaseVNode("span",_hoisted_15,toDisplayString(null==(e=t.label)?void 0:e.Extract_instance),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(o=t.label)?void 0:o.respones)?(openBlock(),createBlock(b,{key:2,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_16,createBaseVNode("div",_hoisted_17,[createBaseVNode("span",_hoisted_18,toDisplayString(null==(e=t.label)?void 0:e.respones),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(a=t.label)?void 0:a.time_consuming)?(openBlock(),createBlock(b,{key:3,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_19,createBaseVNode("div",_hoisted_20,[createBaseVNode("span",_hoisted_21,toDisplayString(null==(e=t.label)?void 0:e.time_consuming),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(s=t.label)?void 0:s.similar_problem)?(openBlock(),createBlock(b,{key:4,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_22,createBaseVNode("div",_hoisted_23,[createBaseVNode("span",_hoisted_24,toDisplayString(null==(e=t.label)?void 0:e.similar_problem),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(l=t.label)?void 0:l.similar_problem_Id)?(openBlock(),createBlock(b,{key:5,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_25,createBaseVNode("div",_hoisted_26,[createBaseVNode("span",_hoisted_27,toDisplayString(null==(e=t.label)?void 0:e.similar_problem_Id),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(c=t.label)?void 0:c.similarity)?(openBlock(),createBlock(b,{key:6,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_28,createBaseVNode("div",_hoisted_29,[createBaseVNode("span",_hoisted_30,toDisplayString(null==(e=t.label)?void 0:e.similarity),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(u=t.label)?void 0:u.original_sentence)?(openBlock(),createBlock(b,{key:7,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_31,createBaseVNode("div",_hoisted_32,[createBaseVNode("span",_hoisted_33,toDisplayString(null==(e=t.label)?void 0:e.original_sentence),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(h=t.label)?void 0:h.abstract_question)?(openBlock(),createBlock(b,{key:8,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_34,createBaseVNode("div",_hoisted_35,[createBaseVNode("span",_hoisted_36,toDisplayString(null==(e=t.label)?void 0:e.abstract_question),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(d=t.label)?void 0:d.paragraph)?(openBlock(),createBlock(b,{key:9,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_37,createBaseVNode("div",_hoisted_38,[createBaseVNode("span",_hoisted_39,toDisplayString(null==(e=t.label)?void 0:e.paragraph),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(p=null==(f=t.label)?void 0:f.response)?void 0:p.ask)?(openBlock(),createBlock(b,{key:10,class:"text-slide-wraper"},{default:withCtx((()=>{var e,n;return[_hoisted_40,createBaseVNode("div",_hoisted_41,[createBaseVNode("span",_hoisted_42,toDisplayString(null==(n=null==(e=t.label)?void 0:e.response)?void 0:n.ask),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(m=null==(g=t.label)?void 0:g.response)?void 0:m.answer)?(openBlock(),createBlock(b,{key:11,class:"text-slide-wraper"},{default:withCtx((()=>{var e,n;return[_hoisted_43,createBaseVNode("div",_hoisted_44,[createBaseVNode("span",_hoisted_45,toDisplayString(null==(n=null==(e=t.label)?void 0:e.response)?void 0:n.answer),1)])]})),_:2},1024)):createCommentVNode("",!0),(null==(v=t.label)?void 0:v.answer)?(openBlock(),createBlock(b,{key:12,class:"text-slide-wraper"},{default:withCtx((()=>{var e;return[_hoisted_46,createBaseVNode("div",_hoisted_47,[createBaseVNode("span",_hoisted_48,toDisplayString(null==(e=t.label)?void 0:e.summary_question),1)])]})),_:2},1024)):createCommentVNode("",!0)],4)):createCommentVNode("",!0)],64)})),256))]),createBaseVNode("div",_hoisted_49,[createBaseVNode("div",{class:"item",style:normalizeStyle({backgroundColor:e.changColorStatus(null==(d=null==(h=e.data)?void 0:h.question)?void 0:d.status)})},[createBaseVNode("p",_hoisted_50,[_hoisted_51,createBaseVNode("div",_hoisted_52,[createBaseVNode("span",_hoisted_53,toDisplayString(null==(p=null==(f=e.data)?void 0:f.answer)?void 0:p.label.answerby),1)])]),createBaseVNode("p",_hoisted_54,[_hoisted_55,createBaseVNode("div",_hoisted_56,[createBaseVNode("span",_hoisted_57,toDisplayString(null==(m=null==(g=e.data)?void 0:g.answer)?void 0:m.label.response),1)])]),createBaseVNode("p",_hoisted_58,[_hoisted_59,createBaseVNode("div",_hoisted_60,[createBaseVNode("span",_hoisted_61,toDisplayString(null==(y=null==(v=e.data)?void 0:v.answer)?void 0:y.label.time_consuming),1)])])],4)])]),createVNode(x),createVNode(w,{ref:"alert"},null,512)],4)}const node=_export_sfc(_sfc_main$3,[["render",_sfc_render],["__scopeId","data-v-735a32d8"]]);var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends$x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign$h=function(){return __assign$h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$h.apply(this,arguments)};function __rest$2(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function __decorate(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function __param(e,t){return function(n,r){t(n,r,e)}}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter$2(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e11){o(e11)}}function s(e){try{l(r.throw(e))}catch(e11){o(e11)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function __generator$2(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e11){s=[6,e11],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}var __createBinding$3=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function __exportStar(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||__createBinding$3(t,e,n)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function __spreadArray$4(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=i[e](t)).value instanceof __await?Promise.resolve(n.value.v).then(l,c):u(o[0][2],n)}catch(e11){u(o[0][3],e11)}var n}function l(e){s("next",e)}function c(e){s("throw",e)}function u(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function __asyncDelegator(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:__await(e[r](t)),done:"return"===r}:i?i(t):t}:i}}function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,i){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,i,(t=e[n](t)).done,t.value)}))}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var __setModuleDefault$3=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function __importStar$3(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$3(t,e,n);return __setModuleDefault$3(t,e),t}function __importDefault$e(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function __classPrivateFieldSet(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}const tslib_es6=Object.freeze(Object.defineProperty({__proto__:null,__extends:__extends$x,get __assign(){return __assign$h},__rest:__rest$2,__decorate:__decorate,__param:__param,__metadata:__metadata,__awaiter:__awaiter$2,__generator:__generator$2,__createBinding:__createBinding$3,__exportStar:__exportStar,__values:__values,__read:__read,__spread:__spread,__spreadArrays:__spreadArrays,__spreadArray:__spreadArray$4,__await:__await,__asyncGenerator:__asyncGenerator,__asyncDelegator:__asyncDelegator,__asyncValues:__asyncValues,__makeTemplateObject:__makeTemplateObject,__importStar:__importStar$3,__importDefault:__importDefault$e,__classPrivateFieldGet:__classPrivateFieldGet,__classPrivateFieldSet:__classPrivateFieldSet,__classPrivateFieldIn:__classPrivateFieldIn},Symbol.toStringTag,{value:"Module"}));var isArrayLike=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)},contains=function(e,t){return!!isArrayLike(e)&&e.indexOf(t)>-1},filter=function(e,t){if(!isArrayLike(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];t(i,r)&&n.push(i)}return n},difference=function(e,t){return void 0===t&&(t=[]),filter(e,(function(e){return!contains(t,e)}))},toString$3={}.toString,isType=function(e,t){return toString$3.call(e)==="[object "+t+"]"};const isFunction$1=function(e){return isType(e,"Function")};var isNil=function(e){return null==e};const isArray$1=function(e){return Array.isArray?Array.isArray(e):isType(e,"Array")},isObject=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t};function each(e,t){if(e)if(isArray$1(e))for(var n=0,r=e.length;n<r&&!1!==t(e[n],n);n++);else if(isObject(e))for(var i in e)if(e.hasOwnProperty(i)&&!1===t(e[i],i))break}var keys=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return each(e,(function(n,r){isFunction$1(e)&&"prototype"===r||t.push(r)})),t};function isMatch(e,t){var n=keys(t),r=n.length;if(isNil(e))return!r;for(var i=0;i<r;i+=1){var o=n[i];if(t[o]!==e[o]||!(o in e))return!1}return!0}var isObjectLike$4=function(e){return"object"==typeof e&&null!==e},isPlainObject$1=function(e){if(!isObjectLike$4(e)||!isType(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t};function find$1(e,t){if(!isArray$1(e))return null;var n;if(isFunction$1(t)&&(n=t),isPlainObject$1(t)&&(n=function(e){return isMatch(e,t)}),n)for(var r=0;r<e.length;r+=1)if(n(e[r]))return e[r];return null}function findIndex(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}var firstValue=function(e,t){for(var n=null,r=0;r<e.length;r++){var i=e[r][t];if(!isNil(i)){n=isArray$1(i)?i[0]:i;break}}return n},flatten=function(e){if(!isArray$1(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t},flattenDeep=function(e,t){if(void 0===t&&(t=[]),isArray$1(e))for(var n=0;n<e.length;n+=1)flattenDeep(e[n],t);else t.push(e);return t};const max$6=function(e){if(isArray$1(e))return e.reduce((function(e,t){return Math.max(e,t)}),e[0])},min$5=function(e){if(isArray$1(e))return e.reduce((function(e,t){return Math.min(e,t)}),e[0])};var getRange=function(e){var t=e.filter((function(e){return!isNaN(e)}));if(!t.length)return{min:0,max:0};if(isArray$1(e[0])){for(var n=[],r=0;r<e.length;r++)n=n.concat(e[r]);t=n}var i=max$6(t);return{min:min$5(t),max:i}},arrPrototype=Array.prototype,splice$1=arrPrototype.splice,indexOf$1=arrPrototype.indexOf,pull=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var i=t[r],o=-1;(o=indexOf$1.call(e,i))>-1;)splice$1.call(e,o,1);return e},splice=Array.prototype.splice,pullAt=function(e,t){if(!isArrayLike(e))return[];for(var n=e?t.length:0,r=n-1;n--;){var i=void 0,o=t[n];n!==r&&o===i||(i=o,splice.call(e,o,1))}return e},reduce=function(e,t,n){if(!isArray$1(e)&&!isPlainObject$1(e))return e;var r=n;return each(e,(function(e,n){r=t(r,e,n)})),r},remove=function(e,t){var n=[];if(!isArrayLike(e))return n;for(var r=-1,i=[],o=e.length;++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return pullAt(e,i),n};const isString$1=function(e){return isType(e,"String")};function sortBy(e,t){var n;if(isFunction$1(t))n=function(e,n){return t(e)-t(n)};else{var r=[];isString$1(t)?r.push(t):isArray$1(t)&&(r=t),n=function(e,t){for(var n=0;n<r.length;n+=1){var i=r[n];if(e[i]>t[i])return 1;if(e[i]<t[i])return-1}return 0}}return e.sort(n),e}function uniq(e,t){void 0===t&&(t=new Map);var n=[];if(Array.isArray(e))for(var r=0,i=e.length;r<i;r++){var o=e[r];t.has(o)||(n.push(o),t.set(o,!0))}return n}var union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return uniq([].concat.apply([],e))};const valuesOfKey=function(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i][t];if(!isNil(o)){isArray$1(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];r[s]||(n.push(s),r[s]=!0)}}}return n};function head(e){if(isArrayLike(e))return e[0]}function last(e){if(isArrayLike(e)){return e[e.length-1]}}function startsWith(e,t){return!(!isArray$1(e)&&!isString$1(e))&&e[0]===t}function endsWith(e,t){return!(!isArray$1(e)&&!isString$1(e))&&e[e.length-1]===t}var every=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0},some=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1},hasOwnProperty$5=Object.prototype.hasOwnProperty;function groupBy(e,t){if(!t||!isArray$1(e))return{};for(var n,r={},i=isFunction$1(t)?t:function(e){return e[t]},o=0;o<e.length;o++){var a=e[o];n=i(a),hasOwnProperty$5.call(r,n)?r[n].push(a):r[n]=[a]}return r}function groupToMap(e,t){if(!t)return{0:e};if(!isFunction$1(t)){var n=isArray$1(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return groupBy(e,t)}const group=function(e,t){if(!t)return[e];var n=groupToMap(e,t),r=[];for(var i in n)r.push(n[i]);return r};function getWrapBehavior(e,t){return e["_wrap_"+t]}function wrapBehavior(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var n=function(n){e[t](n)};return e["_wrap_"+t]=n,n}var numColorCache={};function numberToColor(e){var t=numColorCache[e];if(!t){for(var n=e.toString(16),r=n.length;r<6;r++)n="0"+n;t="#"+n,numColorCache[e]=t}return t}function parseRadius$2(e){var t=0,n=0,r=0,i=0;return isArray$1(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var clamp$1=function(e,t,n){return e<t?t:e>n?n:e},fixedBase=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))},isNumber$1=function(e){return isType(e,"Number")},isDecimal=function(e){return isNumber$1(e)&&e%1!=0},isEven=function(e){return isNumber$1(e)&&e%2==0},isInteger=Number.isInteger?Number.isInteger:function(e){return isNumber$1(e)&&e%1==0},isNegative=function(e){return isNumber$1(e)&&e<0},PRECISION=1e-5;function isNumberEqual$1(e,t,n){return void 0===n&&(n=PRECISION),Math.abs(e-t)<n}var isOdd=function(e){return isNumber$1(e)&&e%2!=0},isPositive=function(e){return isNumber$1(e)&&e>0};const maxBy=function(e,t){if(isArray$1(e)){for(var n,r=-1/0,i=0;i<e.length;i++){var o=e[i],a=isFunction$1(t)?t(o):o[t];a>r&&(n=o,r=a)}return n}},minBy=function(e,t){if(isArray$1(e)){for(var n,r=1/0,i=0;i<e.length;i++){var o=e[i],a=isFunction$1(t)?t(o):o[t];a<r&&(n=o,r=a)}return n}};var mod$1=function(e,t){return(e%t+t)%t},DEGREE=180/Math.PI,toDegree=function(e){return DEGREE*e};const parseInt$1=parseInt;var RADIAN=Math.PI/180,toRadian$1=function(e){return RADIAN*e};const has=function(e,t){return e.hasOwnProperty(t)};var values=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return each(e,(function(n,r){isFunction$1(e)&&"prototype"===r||t.push(n)})),t};const hasValue=function(e,t){return contains(values(e),t)},toString$2=function(e){return isNil(e)?"":e.toString()};var lowerCase=function(e){return toString$2(e).toLowerCase()},lowerFirst=function(e){var t=toString$2(e);return t.charAt(0).toLowerCase()+t.substring(1)};function substitute$1(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}var upperCase=function(e){return toString$2(e).toUpperCase()},upperFirst=function(e){var t=toString$2(e);return t.charAt(0).toUpperCase()+t.substring(1)},toString$1={}.toString,getType=function(e){return toString$1.call(e).replace(/^\[object /,"").replace(/]$/,"")},isArguments=function(e){return isType(e,"Arguments")},isBoolean=function(e){return isType(e,"Boolean")},isDate=function(e){return isType(e,"Date")},isError=function(e){return isType(e,"Error")};function isFinite$1(e){return isNumber$1(e)&&isFinite(e)}var isNull=function(e){return null===e},objectProto$3=Object.prototype,isPrototype=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$3)},isRegExp=function(e){return isType(e,"RegExp")},isUndefined=function(e){return void 0===e},isElement=function(e){return e instanceof Element||e instanceof HTMLDocument};function requestAnimationFrame$1(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}function cancelAnimationFrame$1(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}function _mix(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}function mix(e,t,n,r){return t&&_mix(e,t),n&&_mix(e,n),r&&_mix(e,r),e}var augment=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=1;r<e.length;r++){var i=e[r];isFunction$1(i)&&(i=i.prototype),mix(n.prototype,i)}},clone$9=function(e){if("object"!=typeof e||null===e)return e;var t;if(isArray$1(e)){t=[];for(var n=0,r=e.length;n<r;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=clone$9(e[n]):t[n]=e[n]}else for(var i in t={},e)"object"==typeof e[i]&&null!=e[i]?t[i]=clone$9(e[i]):t[i]=e[i];return t};function debounce(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}const memoize=function(e,t){if(!isFunction$1(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n};var MAX_MIX_LEVEL=5;function _deepMix(e,t,n,r){for(var i in n=n||0,r=r||MAX_MIX_LEVEL,t)if(t.hasOwnProperty(i)){var o=t[i];null!==o&&isPlainObject$1(o)?(isPlainObject$1(e[i])||(e[i]={}),n<r?_deepMix(e[i],o,n+1,r):e[i]=t[i]):isArray$1(o)?(e[i]=[],e[i]=e[i].concat(o)):void 0!==o&&(e[i]=o)}}var deepMix=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)_deepMix(e,t[r]);return e},extend$1=function(e,t,n,r){isFunction$1(t)||(n=t,t=e,e=function(){});var i=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var r=new n;return r.constructor=t,r},o=i(t.prototype,e);return e.prototype=mix(o,e.prototype),e.superclass=i(t.prototype,t),mix(o,n),mix(e,r),e},indexOf=function(e,t){if(!isArrayLike(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var r=-1,i=0;i<e.length;i++)if(e[i]===t){r=i;break}return r},hasOwnProperty$4=Object.prototype.hasOwnProperty;function isEmpty(e){if(isNil(e))return!0;if(isArrayLike(e))return!e.length;var t=getType(e);if("Map"===t||"Set"===t)return!e.size;if(isPrototype(e))return!Object.keys(e).length;for(var n in e)if(hasOwnProperty$4.call(e,n))return!1;return!0}var isEqual$1=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(isString$1(e)||isString$1(t))return!1;if(isArrayLike(e)||isArrayLike(t)){if(e.length!==t.length)return!1;for(var n=!0,r=0;r<e.length&&(n=isEqual$1(e[r],t[r]));r++);return n}if(isObjectLike$4(e)||isObjectLike$4(t)){var i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(n=!0,r=0;r<i.length&&(n=isEqual$1(e[i[r]],t[i[r]]));r++);return n}return!1};const isEqualWith=function(e,t,n){return isFunction$1(n)?!!n(e,t):isEqual$1(e,t)};var map$3=function(e,t){if(!isArrayLike(e))return e;for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t(i,r))}return n},identity$7=function(e){return e};const mapValues=function(e,t){void 0===t&&(t=identity$7);var n={};return isObject(e)&&!isNil(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n},get$1=function(e,t,n){for(var r=0,i=isString$1(t)?t.split("."):t;e&&r<i.length;)e=e[i[r++]];return void 0===e||r<i.length?n:e},set$a=function(e,t,n){var r=e,i=isString$1(t)?t.split("."):t;return i.forEach((function(e,t){t<i.length-1?(isObject(r[e])||(r[e]=isNumber$1(i[t+1])?[]:{}),r=r[e]):r[e]=n})),e};var hasOwnProperty$3=Object.prototype.hasOwnProperty;const pick=function(e,t){if(null===e||!isPlainObject$1(e))return{};var n={};return each(t,(function(t){hasOwnProperty$3.call(e,t)&&(n[t]=e[t])})),n},omit=function(e,t){return reduce(e,(function(e,n,r){return t.includes(r)||(e[r]=n),e}),{})},throttle=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c},toArray=function(e){return isArrayLike(e)?Array.prototype.slice.call(e):[]};var map$2={};const uniqueId$3=function(e){return map$2[e=e||"g"]?map$2[e]+=1:map$2[e]=1,e+map$2[e]},noop$1=function(){},identity$6=function(e){return e};function size(e){return isNil(e)?0:isArrayLike(e)?e.length:Object.keys(e).length}var ctx$1;const measureTextWidth=memoize((function(e,t){void 0===t&&(t={});var n=t.fontSize,r=t.fontFamily,i=t.fontWeight,o=t.fontStyle,a=t.fontVariant;return ctx$1||(ctx$1=document.createElement("canvas").getContext("2d")),ctx$1.font=[o,a,i,n+"px",r].join(" "),ctx$1.measureText(isString$1(e)?e:"").width}),(function(e,t){return void 0===t&&(t={}),__spreadArrays([e],values(t)).join("")})),getEllipsisText=function(e,t,n,r){void 0===r&&(r="...");var i,o,a=measureTextWidth(r,n),s=isString$1(e)?e:toString$2(e),l=t,c=[];if(measureTextWidth(e,n)<=t)return e;for(;i=s.substr(0,16),!((o=measureTextWidth(i,n))+a>l&&o>l);)if(c.push(i),l-=o,!(s=s.substr(16)))return c.join("");for(;i=s.substr(0,1),!((o=measureTextWidth(i,n))+a>l);)if(c.push(i),l-=o,!(s=s.substr(1)))return c.join("");return""+c.join("")+r};var default_1=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();const esm$1=Object.freeze(Object.defineProperty({__proto__:null,contains:contains,includes:contains,difference:difference,find:find$1,findIndex:findIndex,firstValue:firstValue,flatten:flatten,flattenDeep:flattenDeep,getRange:getRange,pull:pull,pullAt:pullAt,reduce:reduce,remove:remove,sortBy:sortBy,union:union,uniq:uniq,valuesOfKey:valuesOfKey,head:head,last:last,startsWith:startsWith,endsWith:endsWith,filter:filter,every:every,some:some,group:group,groupBy:groupBy,groupToMap:groupToMap,getWrapBehavior:getWrapBehavior,wrapBehavior:wrapBehavior,number2color:numberToColor,parseRadius:parseRadius$2,clamp:clamp$1,fixedBase:fixedBase,isDecimal:isDecimal,isEven:isEven,isInteger:isInteger,isNegative:isNegative,isNumberEqual:isNumberEqual$1,isOdd:isOdd,isPositive:isPositive,max:max$6,maxBy:maxBy,min:min$5,minBy:minBy,mod:mod$1,toDegree:toDegree,toInteger:parseInt$1,toRadian:toRadian$1,forIn:each,has:has,hasKey:has,hasValue:hasValue,keys:keys,isMatch:isMatch,values:values,lowerCase:lowerCase,lowerFirst:lowerFirst,substitute:substitute$1,upperCase:upperCase,upperFirst:upperFirst,getType:getType,isArguments:isArguments,isArray:isArray$1,isArrayLike:isArrayLike,isBoolean:isBoolean,isDate:isDate,isError:isError,isFunction:isFunction$1,isFinite:isFinite$1,isNil:isNil,isNull:isNull,isNumber:isNumber$1,isObject:isObject,isObjectLike:isObjectLike$4,isPlainObject:isPlainObject$1,isPrototype:isPrototype,isRegExp:isRegExp,isString:isString$1,isType:isType,isUndefined:isUndefined,isElement:isElement,requestAnimationFrame:requestAnimationFrame$1,clearAnimationFrame:cancelAnimationFrame$1,augment:augment,clone:clone$9,debounce:debounce,memoize:memoize,deepMix:deepMix,each:each,extend:extend$1,indexOf:indexOf,isEmpty:isEmpty,isEqual:isEqual$1,isEqualWith:isEqualWith,map:map$3,mapValues:mapValues,mix:mix,assign:mix,get:get$1,set:set$a,pick:pick,omit:omit,throttle:throttle,toArray:toArray,toString:toString$2,uniqueId:uniqueId$3,noop:noop$1,identity:identity$6,size:size,measureTextWidth:measureTextWidth,getEllipsisText:getEllipsisText,Cache:default_1},Symbol.toStringTag,{value:"Module"})),behaviorOption={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,n=this.events;this.graph=e,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!0),each(n,(function(t,n){e.on(n,t)})),document.addEventListener("visibilitychange",(function(){t.keydown=!1}))},unbind:function(e){var t=this.events,n=e.get("canvas").get("draggable");"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||e.get("canvas").set("draggable",!1),each(t,(function(t,n){e.off(n,t)})),e.get("canvas").set("draggable",n)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}};var Behavior=function(){function e(){}return e.registerBehavior=function(t,n){if(!n)throw new Error("please specify handler for this behavior: ".concat(t));var r=clone$9(behaviorOption);Object.assign(r,n);var i=function(e){var t=this;Object.assign(this,this.getDefaultCfg(),e);var n=this.getEvents();this.events=null;var r={};n&&(each(n,(function(e,n){r[n]=wrapBehavior(t,e)})),this.events=r)};i.prototype=r,e.types[t]=i},e.hasBehavior=function(t){return!!e.types[t]},e.getBehavior=function(t){return e.types[t]},e.types={},e}(),WILDCARD$1="*",EventEmitter=function(){function e(){this._events={}}return e.prototype.on=function(e,t,n){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!n}),this},e.prototype.once=function(e,t){return this.on(e,t,!0)},e.prototype.emit=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this._events[e]||[],o=this._events[WILDCARD$1]||[],a=function(r){for(var i=r.length,o=0;o<i;o++)if(r[o]){var a=r[o],s=a.callback;a.once&&(r.splice(o,1),0===r.length&&delete t._events[e],i--,o--),s.apply(t,n)}};a(i),a(o)},e.prototype.off=function(e,t){if(e)if(t){for(var n=this._events[e]||[],r=n.length,i=0;i<r;i++)n[i].callback===t&&(n.splice(i,1),r--,i--);0===n.length&&delete this._events[e]}else delete this._events[e];else this._events={};return this},e.prototype.getEvents=function(){return this._events},e}(),EPSILON$1=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random;function setMatrixArrayType(e){ARRAY_TYPE=e}var degree$3=Math.PI/180;function toRadian(e){return e*degree$3}function equals$9(e,t){return Math.abs(e-t)<=EPSILON$1*Math.max(1,Math.abs(e),Math.abs(t))}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});const common=Object.freeze(Object.defineProperty({__proto__:null,EPSILON:EPSILON$1,get ARRAY_TYPE(){return ARRAY_TYPE},RANDOM:RANDOM,setMatrixArrayType:setMatrixArrayType,toRadian:toRadian,equals:equals$9},Symbol.toStringTag,{value:"Module"}));function create$8(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function clone$8(e){var t=new ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function copy$8(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function identity$5(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function fromValues$8(e,t,n,r){var i=new ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function set$9(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function transpose$2(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function invert$6(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(a=1/a,e[0]=o*a,e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function adjoint$2(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function determinant$4(e){return e[0]*e[3]-e[2]*e[1]}function multiply$8(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*s+o*l,e[1]=i*s+a*l,e[2]=r*c+o*u,e[3]=i*c+a*u,e}function rotate$6(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+o*s,e[1]=i*l+a*s,e[2]=r*-s+o*l,e[3]=i*-s+a*l,e}function scale$9(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*s,e[2]=o*l,e[3]=a*l,e}function fromRotation$4(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e}function fromScaling$3(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function str$8(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function frob$3(e){return Math.hypot(e[0],e[1],e[2],e[3])}function LDU(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function add$9(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function subtract$6(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function exactEquals$8(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function equals$8(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(c))}function multiplyScalar$3(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function multiplyScalarAndAdd$3(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}var mul$8=multiply$8,sub$6=subtract$6;const mat2=Object.freeze(Object.defineProperty({__proto__:null,create:create$8,clone:clone$8,copy:copy$8,identity:identity$5,fromValues:fromValues$8,set:set$9,transpose:transpose$2,invert:invert$6,adjoint:adjoint$2,determinant:determinant$4,multiply:multiply$8,rotate:rotate$6,scale:scale$9,fromRotation:fromRotation$4,fromScaling:fromScaling$3,str:str$8,frob:frob$3,LDU:LDU,add:add$9,subtract:subtract$6,exactEquals:exactEquals$8,equals:equals$8,multiplyScalar:multiplyScalar$3,multiplyScalarAndAdd:multiplyScalarAndAdd$3,mul:mul$8,sub:sub$6},Symbol.toStringTag,{value:"Module"}));function create$7(){var e=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function clone$7(e){var t=new ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function copy$7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function identity$4(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function fromValues$7(e,t,n,r,i,o){var a=new ARRAY_TYPE(6);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function set$8(e,t,n,r,i,o,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e}function invert$5(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=n*o-r*i;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-i*l,e[3]=n*l,e[4]=(i*s-o*a)*l,e[5]=(r*a-n*s)*l,e):null}function determinant$3(e){return e[0]*e[3]-e[1]*e[2]}function multiply$7(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1],h=n[2],d=n[3],f=n[4],p=n[5];return e[0]=r*c+o*u,e[1]=i*c+a*u,e[2]=r*h+o*d,e[3]=i*h+a*d,e[4]=r*f+o*p+s,e[5]=i*f+a*p+l,e}function rotate$5(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=Math.sin(n),u=Math.cos(n);return e[0]=r*u+o*c,e[1]=i*u+a*c,e[2]=r*-c+o*u,e[3]=i*-c+a*u,e[4]=s,e[5]=l,e}function scale$8(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r*c,e[1]=i*c,e[2]=o*u,e[3]=a*u,e[4]=s,e[5]=l,e}function translate$4(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=n[0],u=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=r*c+o*u+s,e[5]=i*c+a*u+l,e}function fromRotation$3(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=-n,e[3]=r,e[4]=0,e[5]=0,e}function fromScaling$2(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function fromTranslation$3(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function str$7(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function frob$2(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function add$8(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function subtract$5(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function multiplyScalar$2(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function multiplyScalarAndAdd$2(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function exactEquals$7(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function equals$7(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=t[0],c=t[1],u=t[2],h=t[3],d=t[4],f=t[5];return Math.abs(n-l)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-c)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-u)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(o-h)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(a-d)<=EPSILON$1*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(s-f)<=EPSILON$1*Math.max(1,Math.abs(s),Math.abs(f))}var mul$7=multiply$7,sub$5=subtract$5;const mat2d=Object.freeze(Object.defineProperty({__proto__:null,create:create$7,clone:clone$7,copy:copy$7,identity:identity$4,fromValues:fromValues$7,set:set$8,invert:invert$5,determinant:determinant$3,multiply:multiply$7,rotate:rotate$5,scale:scale$8,translate:translate$4,fromRotation:fromRotation$3,fromScaling:fromScaling$2,fromTranslation:fromTranslation$3,str:str$7,frob:frob$2,add:add$8,subtract:subtract$5,multiplyScalar:multiplyScalar$2,multiplyScalarAndAdd:multiplyScalarAndAdd$2,exactEquals:exactEquals$7,equals:equals$7,mul:mul$7,sub:sub$5},Symbol.toStringTag,{value:"Module"}));function create$6(){var e=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fromMat4$1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function clone$6(e){var t=new ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function copy$6(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fromValues$6(e,t,n,r,i,o,a,s,l){var c=new ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=s,c[8]=l,c}function set$7(e,t,n,r,i,o,a,s,l,c){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e}function identity$3(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function transpose$1(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function invert$4(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,d=-u*o+s*l,f=c*o-a*l,p=n*h+r*d+i*f;return p?(p=1/p,e[0]=h*p,e[1]=(-u*r+i*c)*p,e[2]=(s*r-i*a)*p,e[3]=d*p,e[4]=(u*n-i*l)*p,e[5]=(-s*n+i*o)*p,e[6]=f*p,e[7]=(-c*n+r*l)*p,e[8]=(a*n-r*o)*p,e):null}function adjoint$1(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=i*c-r*u,e[2]=r*s-i*a,e[3]=s*l-o*u,e[4]=n*u-i*l,e[5]=i*o-n*s,e[6]=o*c-a*l,e[7]=r*l-n*c,e[8]=n*a-r*o,e}function determinant$2(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*(c*o-a*l)+n*(-c*i+a*s)+r*(l*i-o*s)}function multiply$6(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],f=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],b=n[7],x=n[8];return e[0]=d*r+f*a+p*c,e[1]=d*i+f*s+p*u,e[2]=d*o+f*l+p*h,e[3]=g*r+m*a+v*c,e[4]=g*i+m*s+v*u,e[5]=g*o+m*l+v*h,e[6]=y*r+b*a+x*c,e[7]=y*i+b*s+x*u,e[8]=y*o+b*l+x*h,e}function translate$3(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=n[0],f=n[1];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=d*r+f*a+c,e[7]=d*i+f*s+u,e[8]=d*o+f*l+h,e}function rotate$4(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(n),f=Math.cos(n);return e[0]=f*r+d*a,e[1]=f*i+d*s,e[2]=f*o+d*l,e[3]=f*a-d*r,e[4]=f*s-d*i,e[5]=f*l-d*o,e[6]=c,e[7]=u,e[8]=h,e}function scale$7(e,t,n){var r=n[0],i=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fromTranslation$2(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function fromRotation$2(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fromScaling$1(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fromMat2d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function fromQuat$1(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,g=o*a,m=o*s,v=o*l;return e[0]=1-h-p,e[3]=u-v,e[6]=d+m,e[1]=u+v,e[4]=1-c-p,e[7]=f-g,e[2]=d-m,e[5]=f+g,e[8]=1-c-h,e}function normalFromMat4(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,x=n*c-o*a,w=r*l-i*s,_=r*c-o*s,C=i*c-o*l,$=u*g-h*p,S=u*m-d*p,E=u*v-f*p,A=h*m-d*g,M=h*v-f*g,k=d*v-f*m,T=y*k-b*M+x*A+w*E-_*S+C*$;return T?(T=1/T,e[0]=(s*k-l*M+c*A)*T,e[1]=(l*E-a*k-c*S)*T,e[2]=(a*M-s*E+c*$)*T,e[3]=(i*M-r*k-o*A)*T,e[4]=(n*k-i*E+o*S)*T,e[5]=(r*E-n*M-o*$)*T,e[6]=(g*C-m*_+v*w)*T,e[7]=(m*x-p*C-v*b)*T,e[8]=(p*_-g*x+v*y)*T,e):null}function projection(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function str$6(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function frob$1(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function add$7(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function subtract$4(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function multiplyScalar$1(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function multiplyScalarAndAdd$1(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function exactEquals$6(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function equals$6(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=t[0],d=t[1],f=t[2],p=t[3],g=t[4],m=t[5],v=t[6],y=t[7],b=t[8];return Math.abs(n-h)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-p)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=EPSILON$1*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-m)<=EPSILON$1*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(l-v)<=EPSILON$1*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-y)<=EPSILON$1*Math.max(1,Math.abs(c),Math.abs(y))&&Math.abs(u-b)<=EPSILON$1*Math.max(1,Math.abs(u),Math.abs(b))}var mul$6=multiply$6,sub$4=subtract$4;const mat3=Object.freeze(Object.defineProperty({__proto__:null,create:create$6,fromMat4:fromMat4$1,clone:clone$6,copy:copy$6,fromValues:fromValues$6,set:set$7,identity:identity$3,transpose:transpose$1,invert:invert$4,adjoint:adjoint$1,determinant:determinant$2,multiply:multiply$6,translate:translate$3,rotate:rotate$4,scale:scale$7,fromTranslation:fromTranslation$2,fromRotation:fromRotation$2,fromScaling:fromScaling$1,fromMat2d:fromMat2d,fromQuat:fromQuat$1,normalFromMat4:normalFromMat4,projection:projection,str:str$6,frob:frob$1,add:add$7,subtract:subtract$4,multiplyScalar:multiplyScalar$1,multiplyScalarAndAdd:multiplyScalarAndAdd$1,exactEquals:exactEquals$6,equals:equals$6,mul:mul$6,sub:sub$4},Symbol.toStringTag,{value:"Module"}));function create$5(){var e=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function clone$5(e){var t=new ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function copy$5(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fromValues$5(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,g){var m=new ARRAY_TYPE(16);return m[0]=e,m[1]=t,m[2]=n,m[3]=r,m[4]=i,m[5]=o,m[6]=a,m[7]=s,m[8]=l,m[9]=c,m[10]=u,m[11]=h,m[12]=d,m[13]=f,m[14]=p,m[15]=g,m}function set$6(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,g,m){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=g,e[15]=m,e}function identity$2(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function invert$3(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15],y=n*s-r*a,b=n*l-i*a,x=n*c-o*a,w=r*l-i*s,_=r*c-o*s,C=i*c-o*l,$=u*g-h*p,S=u*m-d*p,E=u*v-f*p,A=h*m-d*g,M=h*v-f*g,k=d*v-f*m,T=y*k-b*M+x*A+w*E-_*S+C*$;return T?(T=1/T,e[0]=(s*k-l*M+c*A)*T,e[1]=(i*M-r*k-o*A)*T,e[2]=(g*C-m*_+v*w)*T,e[3]=(d*_-h*C-f*w)*T,e[4]=(l*E-a*k-c*S)*T,e[5]=(n*k-i*E+o*S)*T,e[6]=(m*x-p*C-v*b)*T,e[7]=(u*C-d*x+f*b)*T,e[8]=(a*M-s*E+c*$)*T,e[9]=(r*E-n*M-o*$)*T,e[10]=(p*_-g*x+v*y)*T,e[11]=(h*x-u*_-f*y)*T,e[12]=(s*S-a*A-l*$)*T,e[13]=(n*A-r*S+i*$)*T,e[14]=(g*b-p*w-m*y)*T,e[15]=(u*w-h*b+d*y)*T,e):null}function adjoint(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],g=t[13],m=t[14],v=t[15];return e[0]=s*(d*v-f*m)-h*(l*v-c*m)+g*(l*f-c*d),e[1]=-(r*(d*v-f*m)-h*(i*v-o*m)+g*(i*f-o*d)),e[2]=r*(l*v-c*m)-s*(i*v-o*m)+g*(i*c-o*l),e[3]=-(r*(l*f-c*d)-s*(i*f-o*d)+h*(i*c-o*l)),e[4]=-(a*(d*v-f*m)-u*(l*v-c*m)+p*(l*f-c*d)),e[5]=n*(d*v-f*m)-u*(i*v-o*m)+p*(i*f-o*d),e[6]=-(n*(l*v-c*m)-a*(i*v-o*m)+p*(i*c-o*l)),e[7]=n*(l*f-c*d)-a*(i*f-o*d)+u*(i*c-o*l),e[8]=a*(h*v-f*g)-u*(s*v-c*g)+p*(s*f-c*h),e[9]=-(n*(h*v-f*g)-u*(r*v-o*g)+p*(r*f-o*h)),e[10]=n*(s*v-c*g)-a*(r*v-o*g)+p*(r*c-o*s),e[11]=-(n*(s*f-c*h)-a*(r*f-o*h)+u*(r*c-o*s)),e[12]=-(a*(h*m-d*g)-u*(s*m-l*g)+p*(s*d-l*h)),e[13]=n*(h*m-d*g)-u*(r*m-i*g)+p*(r*d-i*h),e[14]=-(n*(s*m-l*g)-a*(r*m-i*g)+p*(r*l-i*s)),e[15]=n*(s*d-l*h)-a*(r*d-i*h)+u*(r*l-i*s),e}function determinant$1(e){var t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],g=e[14],m=e[15];return(t*a-n*o)*(h*m-d*g)-(t*s-r*o)*(u*m-d*p)+(t*l-i*o)*(u*g-h*p)+(n*s-r*a)*(c*m-d*f)-(n*l-i*a)*(c*g-h*f)+(r*l-i*s)*(c*p-u*f)}function multiply$5(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],g=t[12],m=t[13],v=t[14],y=t[15],b=n[0],x=n[1],w=n[2],_=n[3];return e[0]=b*r+x*s+w*h+_*g,e[1]=b*i+x*l+w*d+_*m,e[2]=b*o+x*c+w*f+_*v,e[3]=b*a+x*u+w*p+_*y,b=n[4],x=n[5],w=n[6],_=n[7],e[4]=b*r+x*s+w*h+_*g,e[5]=b*i+x*l+w*d+_*m,e[6]=b*o+x*c+w*f+_*v,e[7]=b*a+x*u+w*p+_*y,b=n[8],x=n[9],w=n[10],_=n[11],e[8]=b*r+x*s+w*h+_*g,e[9]=b*i+x*l+w*d+_*m,e[10]=b*o+x*c+w*f+_*v,e[11]=b*a+x*u+w*p+_*y,b=n[12],x=n[13],w=n[14],_=n[15],e[12]=b*r+x*s+w*h+_*g,e[13]=b*i+x*l+w*d+_*m,e[14]=b*o+x*c+w*f+_*v,e[15]=b*a+x*u+w*p+_*y,e}function translate$2(e,t,n){var r,i,o,a,s,l,c,u,h,d,f,p,g=n[0],m=n[1],v=n[2];return t===e?(e[12]=t[0]*g+t[4]*m+t[8]*v+t[12],e[13]=t[1]*g+t[5]*m+t[9]*v+t[13],e[14]=t[2]*g+t[6]*m+t[10]*v+t[14],e[15]=t[3]*g+t[7]*m+t[11]*v+t[15]):(r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=r*g+s*m+h*v+t[12],e[13]=i*g+l*m+d*v+t[13],e[14]=o*g+c*m+f*v+t[14],e[15]=a*g+u*m+p*v+t[15]),e}function scale$6(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate$3(e,t,n,r){var i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x,w,_,C,$,S,E,A,M=r[0],k=r[1],T=r[2],P=Math.hypot(M,k,T);return P<EPSILON$1?null:(M*=P=1/P,k*=P,T*=P,i=Math.sin(n),a=1-(o=Math.cos(n)),s=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],f=t[6],p=t[7],g=t[8],m=t[9],v=t[10],y=t[11],b=M*M*a+o,x=k*M*a+T*i,w=T*M*a-k*i,_=M*k*a-T*i,C=k*k*a+o,$=T*k*a+M*i,S=M*T*a+k*i,E=k*T*a-M*i,A=T*T*a+o,e[0]=s*b+h*x+g*w,e[1]=l*b+d*x+m*w,e[2]=c*b+f*x+v*w,e[3]=u*b+p*x+y*w,e[4]=s*_+h*C+g*$,e[5]=l*_+d*C+m*$,e[6]=c*_+f*C+v*$,e[7]=u*_+p*C+y*$,e[8]=s*S+h*E+g*A,e[9]=l*S+d*E+m*A,e[10]=c*S+f*E+v*A,e[11]=u*S+p*E+y*A,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function rotateX$3(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+u*r,e[6]=s*i+h*r,e[7]=l*i+d*r,e[8]=c*i-o*r,e[9]=u*i-a*r,e[10]=h*i-s*r,e[11]=d*i-l*r,e}function rotateY$3(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-u*r,e[2]=s*i-h*r,e[3]=l*i-d*r,e[8]=o*r+c*i,e[9]=a*r+u*i,e[10]=s*r+h*i,e[11]=l*r+d*i,e}function rotateZ$3(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+u*r,e[2]=s*i+h*r,e[3]=l*i+d*r,e[4]=c*i-o*r,e[5]=u*i-a*r,e[6]=h*i-s*r,e[7]=d*i-l*r,e}function fromTranslation$1(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotation$1(e,t,n){var r,i,o,a=n[0],s=n[1],l=n[2],c=Math.hypot(a,s,l);return c<EPSILON$1?null:(a*=c=1/c,s*=c,l*=c,r=Math.sin(t),o=1-(i=Math.cos(t)),e[0]=a*a*o+i,e[1]=s*a*o+l*r,e[2]=l*a*o-s*r,e[3]=0,e[4]=a*s*o-l*r,e[5]=s*s*o+i,e[6]=l*s*o+a*r,e[7]=0,e[8]=a*l*o+s*r,e[9]=s*l*o-a*r,e[10]=l*l*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function fromXRotation(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromYRotation(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromZRotation(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotationTranslation$1(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=r+r,l=i+i,c=o+o,u=r*s,h=r*l,d=r*c,f=i*l,p=i*c,g=o*c,m=a*s,v=a*l,y=a*c;return e[0]=1-(f+g),e[1]=h+y,e[2]=d-v,e[3]=0,e[4]=h-y,e[5]=1-(u+g),e[6]=p+m,e[7]=0,e[8]=d+v,e[9]=p-m,e[10]=1-(u+f),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fromQuat2(e,t){var n=new ARRAY_TYPE(3),r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=r*r+i*i+o*o+a*a;return h>0?(n[0]=2*(s*a+u*r+l*o-c*i)/h,n[1]=2*(l*a+u*i+c*r-s*o)/h,n[2]=2*(c*a+u*o+s*i-l*r)/h):(n[0]=2*(s*a+u*r+l*o-c*i),n[1]=2*(l*a+u*i+c*r-s*o),n[2]=2*(c*a+u*o+s*i-l*r)),fromRotationTranslation$1(e,t,n),e}function getTranslation$1(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){var n=t[0],r=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,c,u),e}function getRotation(e,t){var n=new ARRAY_TYPE(3);getScaling(n,t);var r=1/n[0],i=1/n[1],o=1/n[2],a=t[0]*r,s=t[1]*i,l=t[2]*o,c=t[4]*r,u=t[5]*i,h=t[6]*o,d=t[8]*r,f=t[9]*i,p=t[10]*o,g=a+u+p,m=0;return g>0?(m=2*Math.sqrt(g+1),e[3]=.25*m,e[0]=(h-f)/m,e[1]=(d-l)/m,e[2]=(s-c)/m):a>u&&a>p?(m=2*Math.sqrt(1+a-u-p),e[3]=(h-f)/m,e[0]=.25*m,e[1]=(s+c)/m,e[2]=(d+l)/m):u>p?(m=2*Math.sqrt(1+u-a-p),e[3]=(d-l)/m,e[0]=(s+c)/m,e[1]=.25*m,e[2]=(h+f)/m):(m=2*Math.sqrt(1+p-a-u),e[3]=(s-c)/m,e[0]=(d+l)/m,e[1]=(h+f)/m,e[2]=.25*m),e}function fromRotationTranslationScale(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3],l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,f=i*u,p=o*c,g=o*u,m=a*u,v=s*l,y=s*c,b=s*u,x=r[0],w=r[1],_=r[2];return e[0]=(1-(p+m))*x,e[1]=(d+b)*x,e[2]=(f-y)*x,e[3]=0,e[4]=(d-b)*w,e[5]=(1-(h+m))*w,e[6]=(g+v)*w,e[7]=0,e[8]=(f+y)*_,e[9]=(g-v)*_,e[10]=(1-(h+p))*_,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fromRotationTranslationScaleOrigin(e,t,n,r,i){var o=t[0],a=t[1],s=t[2],l=t[3],c=o+o,u=a+a,h=s+s,d=o*c,f=o*u,p=o*h,g=a*u,m=a*h,v=s*h,y=l*c,b=l*u,x=l*h,w=r[0],_=r[1],C=r[2],$=i[0],S=i[1],E=i[2],A=(1-(g+v))*w,M=(f+x)*w,k=(p-b)*w,T=(f-x)*_,P=(1-(d+v))*_,O=(m+y)*_,N=(p+b)*C,I=(m-y)*C,D=(1-(d+g))*C;return e[0]=A,e[1]=M,e[2]=k,e[3]=0,e[4]=T,e[5]=P,e[6]=O,e[7]=0,e[8]=N,e[9]=I,e[10]=D,e[11]=0,e[12]=n[0]+$-(A*$+T*S+N*E),e[13]=n[1]+S-(M*$+P*S+I*E),e[14]=n[2]+E-(k*$+O*S+D*E),e[15]=1,e}function fromQuat(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,l=i+i,c=n*a,u=r*a,h=r*s,d=i*a,f=i*s,p=i*l,g=o*a,m=o*s,v=o*l;return e[0]=1-h-p,e[1]=u+v,e[2]=d-m,e[3]=0,e[4]=u-v,e[5]=1-c-p,e[6]=f+g,e[7]=0,e[8]=d+m,e[9]=f-g,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function frustum(e,t,n,r,i,o,a){var s=1/(n-t),l=1/(i-r),c=1/(o-a);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(i+r)*l,e[10]=(a+o)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*c,e[15]=0,e}function perspectiveNO(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=(i+r)*o,e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e}var perspective=perspectiveNO;function perspectiveZO(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(o=1/(r-i),e[10]=i*o,e[14]=i*r*o):(e[10]=-1,e[14]=-r),e}function perspectiveFromFieldOfView(e,t,n,r){var i=Math.tan(t.upDegrees*Math.PI/180),o=Math.tan(t.downDegrees*Math.PI/180),a=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(a+s),c=2/(i+o);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(a-s)*l*.5,e[9]=(i-o)*c*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function orthoNO(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(a+o)*c,e[15]=1,e}var ortho=orthoNO;function orthoZO(e,t,n,r,i,o,a){var s=1/(t-n),l=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=o*c,e[15]=1,e}function lookAt(e,t,n,r){var i,o,a,s,l,c,u,h,d,f,p=t[0],g=t[1],m=t[2],v=r[0],y=r[1],b=r[2],x=n[0],w=n[1],_=n[2];return Math.abs(p-x)<EPSILON$1&&Math.abs(g-w)<EPSILON$1&&Math.abs(m-_)<EPSILON$1?identity$2(e):(u=p-x,h=g-w,d=m-_,i=y*(d*=f=1/Math.hypot(u,h,d))-b*(h*=f),o=b*(u*=f)-v*d,a=v*h-y*u,(f=Math.hypot(i,o,a))?(i*=f=1/f,o*=f,a*=f):(i=0,o=0,a=0),s=h*a-d*o,l=d*i-u*a,c=u*o-h*i,(f=Math.hypot(s,l,c))?(s*=f=1/f,l*=f,c*=f):(s=0,l=0,c=0),e[0]=i,e[1]=s,e[2]=u,e[3]=0,e[4]=o,e[5]=l,e[6]=h,e[7]=0,e[8]=a,e[9]=c,e[10]=d,e[11]=0,e[12]=-(i*p+o*g+a*m),e[13]=-(s*p+l*g+c*m),e[14]=-(u*p+h*g+d*m),e[15]=1,e)}function targetTo(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=r[0],l=r[1],c=r[2],u=i-n[0],h=o-n[1],d=a-n[2],f=u*u+h*h+d*d;f>0&&(u*=f=1/Math.sqrt(f),h*=f,d*=f);var p=l*d-c*h,g=c*u-s*d,m=s*h-l*u;return(f=p*p+g*g+m*m)>0&&(p*=f=1/Math.sqrt(f),g*=f,m*=f),e[0]=p,e[1]=g,e[2]=m,e[3]=0,e[4]=h*m-d*g,e[5]=d*p-u*m,e[6]=u*g-h*p,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=i,e[13]=o,e[14]=a,e[15]=1,e}function str$5(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function frob(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function add$6(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function subtract$3(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function multiplyScalarAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function exactEquals$5(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function equals$5(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=t[0],b=t[1],x=t[2],w=t[3],_=t[4],C=t[5],$=t[6],S=t[7],E=t[8],A=t[9],M=t[10],k=t[11],T=t[12],P=t[13],O=t[14],N=t[15];return Math.abs(n-y)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-b)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(i-x)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(o-w)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-_)<=EPSILON$1*Math.max(1,Math.abs(a),Math.abs(_))&&Math.abs(s-C)<=EPSILON$1*Math.max(1,Math.abs(s),Math.abs(C))&&Math.abs(l-$)<=EPSILON$1*Math.max(1,Math.abs(l),Math.abs($))&&Math.abs(c-S)<=EPSILON$1*Math.max(1,Math.abs(c),Math.abs(S))&&Math.abs(u-E)<=EPSILON$1*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(h-A)<=EPSILON$1*Math.max(1,Math.abs(h),Math.abs(A))&&Math.abs(d-M)<=EPSILON$1*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(f-k)<=EPSILON$1*Math.max(1,Math.abs(f),Math.abs(k))&&Math.abs(p-T)<=EPSILON$1*Math.max(1,Math.abs(p),Math.abs(T))&&Math.abs(g-P)<=EPSILON$1*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(m-O)<=EPSILON$1*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(v-N)<=EPSILON$1*Math.max(1,Math.abs(v),Math.abs(N))}var mul$5=multiply$5,sub$3=subtract$3;const mat4=Object.freeze(Object.defineProperty({__proto__:null,create:create$5,clone:clone$5,copy:copy$5,fromValues:fromValues$5,set:set$6,identity:identity$2,transpose:transpose,invert:invert$3,adjoint:adjoint,determinant:determinant$1,multiply:multiply$5,translate:translate$2,scale:scale$6,rotate:rotate$3,rotateX:rotateX$3,rotateY:rotateY$3,rotateZ:rotateZ$3,fromTranslation:fromTranslation$1,fromScaling:fromScaling,fromRotation:fromRotation$1,fromXRotation:fromXRotation,fromYRotation:fromYRotation,fromZRotation:fromZRotation,fromRotationTranslation:fromRotationTranslation$1,fromQuat2:fromQuat2,getTranslation:getTranslation$1,getScaling:getScaling,getRotation:getRotation,fromRotationTranslationScale:fromRotationTranslationScale,fromRotationTranslationScaleOrigin:fromRotationTranslationScaleOrigin,fromQuat:fromQuat,frustum:frustum,perspectiveNO:perspectiveNO,perspective:perspective,perspectiveZO:perspectiveZO,perspectiveFromFieldOfView:perspectiveFromFieldOfView,orthoNO:orthoNO,ortho:ortho,orthoZO:orthoZO,lookAt:lookAt,targetTo:targetTo,str:str$5,frob:frob,add:add$6,subtract:subtract$3,multiplyScalar:multiplyScalar,multiplyScalarAndAdd:multiplyScalarAndAdd,exactEquals:exactEquals$5,equals:equals$5,mul:mul$5,sub:sub$3},Symbol.toStringTag,{value:"Module"}));function create$4(){var e=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function clone$4(e){var t=new ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function length$5(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function fromValues$4(e,t,n){var r=new ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function copy$4(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function set$5(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function add$5(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function subtract$2(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function multiply$4(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function divide$2(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function ceil$2(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function floor$2(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function min$4(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function max$5(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function round$3(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function scale$5(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function scaleAndAdd$2(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function distance$7(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return Math.hypot(n,r,i)}function squaredDistance$2(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2];return n*n+r*r+i*i}function squaredLength$4(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function negate$2(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function inverse$3(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function normalize$5(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function dot$4(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross$3(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2];return e[0]=i*l-o*s,e[1]=o*a-r*l,e[2]=r*s-i*a,e}function lerp$5(e,t,n,r){var i=t[0],o=t[1],a=t[2];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e}function hermite(e,t,n,r,i,o){var a=o*o,s=a*(2*o-3)+1,l=a*(o-2)+o,c=a*(o-1),u=a*(3-2*o);return e[0]=t[0]*s+n[0]*l+r[0]*c+i[0]*u,e[1]=t[1]*s+n[1]*l+r[1]*c+i[1]*u,e[2]=t[2]*s+n[2]*l+r[2]*c+i[2]*u,e}function bezier(e,t,n,r,i,o){var a=1-o,s=a*a,l=o*o,c=s*a,u=3*o*s,h=3*l*a,d=l*o;return e[0]=t[0]*c+n[0]*u+r[0]*h+i[0]*d,e[1]=t[1]*c+n[1]*u+r[1]*h+i[1]*d,e[2]=t[2]*c+n[2]*u+r[2]*h+i[2]*d,e}function random$4(e,t){t=t||1;var n=2*RANDOM()*Math.PI,r=2*RANDOM()-1,i=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=r*t,e}function transformMat4$2(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function transformMat3$1(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e}function transformQuat$1(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=i*c-o*l,h=o*s-r*c,d=r*l-i*s,f=i*d-o*h,p=o*u-r*d,g=r*h-i*u,m=2*a;return u*=m,h*=m,d*=m,f*=2,p*=2,g*=2,e[0]=s+u+f,e[1]=l+h+p,e[2]=c+d+g,e}function rotateX$2(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function rotateY$2(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function rotateZ$2(e,t,n,r){var i=[],o=[];return i[0]=t[0]-n[0],i[1]=t[1]-n[1],i[2]=t[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],e[0]=o[0]+n[0],e[1]=o[1]+n[1],e[2]=o[2]+n[2],e}function angle$1(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(n*n+r*r+i*i)*Math.sqrt(o*o+a*a+s*s),c=l&&dot$4(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function zero$3(e){return e[0]=0,e[1]=0,e[2]=0,e}function str$4(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function exactEquals$4(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function equals$4(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(s))}var sub$2=subtract$2,mul$4=multiply$4,div$2=divide$2,dist$2=distance$7,sqrDist$2=squaredDistance$2,len$4=length$5,sqrLen$4=squaredLength$4,forEach$2=(vec=create$4(),function(e,t,n,r,i,o){var a,s;for(t||(t=3),n||(n=0),s=r?Math.min(r*t+n,e.length):e.length,a=n;a<s;a+=t)vec[0]=e[a],vec[1]=e[a+1],vec[2]=e[a+2],i(vec,vec,o),e[a]=vec[0],e[a+1]=vec[1],e[a+2]=vec[2];return e}),vec;const vec3=Object.freeze(Object.defineProperty({__proto__:null,create:create$4,clone:clone$4,length:length$5,fromValues:fromValues$4,copy:copy$4,set:set$5,add:add$5,subtract:subtract$2,multiply:multiply$4,divide:divide$2,ceil:ceil$2,floor:floor$2,min:min$4,max:max$5,round:round$3,scale:scale$5,scaleAndAdd:scaleAndAdd$2,distance:distance$7,squaredDistance:squaredDistance$2,squaredLength:squaredLength$4,negate:negate$2,inverse:inverse$3,normalize:normalize$5,dot:dot$4,cross:cross$3,lerp:lerp$5,hermite:hermite,bezier:bezier,random:random$4,transformMat4:transformMat4$2,transformMat3:transformMat3$1,transformQuat:transformQuat$1,rotateX:rotateX$2,rotateY:rotateY$2,rotateZ:rotateZ$2,angle:angle$1,zero:zero$3,str:str$4,exactEquals:exactEquals$4,equals:equals$4,sub:sub$2,mul:mul$4,div:div$2,dist:dist$2,sqrDist:sqrDist$2,len:len$4,sqrLen:sqrLen$4,forEach:forEach$2},Symbol.toStringTag,{value:"Module"}));function create$3(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function clone$3(e){var t=new ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fromValues$3(e,t,n,r){var i=new ARRAY_TYPE(4);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i}function copy$3(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function set$4(e,t,n,r,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e}function add$4(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function subtract$1(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function multiply$3(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function divide$1(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function ceil$1(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function floor$1(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function min$3(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e[3]=Math.min(t[3],n[3]),e}function max$4(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e[3]=Math.max(t[3],n[3]),e}function round$2(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function scale$4(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function scaleAndAdd$1(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function distance$6(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return Math.hypot(n,r,i,o)}function squaredDistance$1(e,t){var n=t[0]-e[0],r=t[1]-e[1],i=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+i*i+o*o}function length$4(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)}function squaredLength$3(e){var t=e[0],n=e[1],r=e[2],i=e[3];return t*t+n*n+r*r+i*i}function negate$1(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function inverse$2(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function normalize$4(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function dot$3(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function cross$2(e,t,n,r){var i=n[0]*r[1]-n[1]*r[0],o=n[0]*r[2]-n[2]*r[0],a=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],l=n[1]*r[3]-n[3]*r[1],c=n[2]*r[3]-n[3]*r[2],u=t[0],h=t[1],d=t[2],f=t[3];return e[0]=h*c-d*l+f*s,e[1]=-u*c+d*a-f*o,e[2]=u*l-h*a+f*i,e[3]=-u*s+h*o-d*i,e}function lerp$4(e,t,n,r){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e[2]=a+r*(n[2]-a),e[3]=s+r*(n[3]-s),e}function random$3(e,t){var n,r,i,o,a,s;t=t||1;do{a=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(a>=1);do{s=(i=2*RANDOM()-1)*i+(o=2*RANDOM()-1)*o}while(s>=1);var l=Math.sqrt((1-a)/s);return e[0]=t*n,e[1]=t*r,e[2]=t*i*l,e[3]=t*o*l,e}function transformMat4$1(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function transformQuat(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*r+s*o-l*i,h=c*i+l*r-a*o,d=c*o+a*i-s*r,f=-a*r-s*i-l*o;return e[0]=u*c+f*-a+h*-l-d*-s,e[1]=h*c+f*-s+d*-a-u*-l,e[2]=d*c+f*-l+u*-s-h*-a,e[3]=t[3],e}function zero$2(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function str$3(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function exactEquals$3(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function equals$3(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3];return Math.abs(n-a)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-s)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-l)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(o-c)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(c))}var sub$1=subtract$1,mul$3=multiply$3,div$1=divide$1,dist$1=distance$6,sqrDist$1=squaredDistance$1,len$3=length$4,sqrLen$3=squaredLength$3,forEach$1=function(){var e=create$3();return function(t,n,r,i,o,a){var s,l;for(n||(n=4),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}}();const vec4=Object.freeze(Object.defineProperty({__proto__:null,create:create$3,clone:clone$3,fromValues:fromValues$3,copy:copy$3,set:set$4,add:add$4,subtract:subtract$1,multiply:multiply$3,divide:divide$1,ceil:ceil$1,floor:floor$1,min:min$3,max:max$4,round:round$2,scale:scale$4,scaleAndAdd:scaleAndAdd$1,distance:distance$6,squaredDistance:squaredDistance$1,length:length$4,squaredLength:squaredLength$3,negate:negate$1,inverse:inverse$2,normalize:normalize$4,dot:dot$3,cross:cross$2,lerp:lerp$4,random:random$3,transformMat4:transformMat4$1,transformQuat:transformQuat,zero:zero$2,str:str$3,exactEquals:exactEquals$3,equals:equals$3,sub:sub$1,mul:mul$3,div:div$1,dist:dist$1,sqrDist:sqrDist$1,len:len$3,sqrLen:sqrLen$3,forEach:forEach$1},Symbol.toStringTag,{value:"Module"}));function create$2(){var e=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function identity$1(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function setAxisAngle(e,t,n){n*=.5;var r=Math.sin(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(n),e}function getAxisAngle(e,t){var n=2*Math.acos(t[3]),r=Math.sin(n/2);return r>EPSILON$1?(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r):(e[0]=1,e[1]=0,e[2]=0),n}function getAngle$1(e,t){var n=dot$2(e,t);return Math.acos(2*n*n-1)}function multiply$2(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-r*c,e[2]=o*u+a*c+r*l-i*s,e[3]=a*u-r*s-i*l-o*c,e}function rotateX$1(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-r*s,e}function rotateY$1(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l-o*s,e[1]=i*l+a*s,e[2]=o*l+r*s,e[3]=a*l-i*s,e}function rotateZ$1(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+i*s,e[1]=i*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function calculateW(e,t){var n=t[0],r=t[1],i=t[2];return e[0]=n,e[1]=r,e[2]=i,e[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),e}function exp(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=Math.exp(o),l=a>0?s*Math.sin(a)/a:0;return e[0]=n*l,e[1]=r*l,e[2]=i*l,e[3]=s*Math.cos(a),e}function ln$2(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=Math.sqrt(n*n+r*r+i*i),s=a>0?Math.atan2(a,o)/a:0;return e[0]=n*s,e[1]=r*s,e[2]=i*s,e[3]=.5*Math.log(n*n+r*r+i*i+o*o),e}function pow(e,t,n){return ln$2(e,t),scale$3(e,e,n),exp(e,e),e}function slerp(e,t,n,r){var i,o,a,s,l,c=t[0],u=t[1],h=t[2],d=t[3],f=n[0],p=n[1],g=n[2],m=n[3];return(o=c*f+u*p+h*g+d*m)<0&&(o=-o,f=-f,p=-p,g=-g,m=-m),1-o>EPSILON$1?(i=Math.acos(o),a=Math.sin(i),s=Math.sin((1-r)*i)/a,l=Math.sin(r*i)/a):(s=1-r,l=r),e[0]=s*c+l*f,e[1]=s*u+l*p,e[2]=s*h+l*g,e[3]=s*d+l*m,e}function random$2(e){var t=RANDOM(),n=RANDOM(),r=RANDOM(),i=Math.sqrt(1-t),o=Math.sqrt(t);return e[0]=i*Math.sin(2*Math.PI*n),e[1]=i*Math.cos(2*Math.PI*n),e[2]=o*Math.sin(2*Math.PI*r),e[3]=o*Math.cos(2*Math.PI*r),e}function invert$2(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o,s=a?1/a:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-i*s,e[3]=o*s,e}function conjugate$1(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function fromMat3(e,t){var n,r=t[0]+t[4]+t[8];if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*o+o]-t[3*a+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*o+a]-t[3*a+o])*n,e[o]=(t[3*o+i]+t[3*i+o])*n,e[a]=(t[3*a+i]+t[3*i+a])*n}return e}function fromEuler(e,t,n,r){var i=.5*Math.PI/180;t*=i,n*=i,r*=i;var o=Math.sin(t),a=Math.cos(t),s=Math.sin(n),l=Math.cos(n),c=Math.sin(r),u=Math.cos(r);return e[0]=o*l*u-a*s*c,e[1]=a*s*u+o*l*c,e[2]=a*l*c-o*s*u,e[3]=a*l*u+o*s*c,e}function str$2(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var clone$2=clone$3,fromValues$2=fromValues$3,copy$2=copy$3,set$3=set$4,add$3=add$4,mul$2=multiply$2,scale$3=scale$4,dot$2=dot$3,lerp$3=lerp$4,length$3=length$4,len$2=length$3,squaredLength$2=squaredLength$3,sqrLen$2=squaredLength$2,normalize$3=normalize$4,exactEquals$2=exactEquals$3,equals$2=equals$3,rotationTo=(tmpvec3=create$4(),xUnitVec3=fromValues$4(1,0,0),yUnitVec3=fromValues$4(0,1,0),function(e,t,n){var r=dot$4(t,n);return r<-.999999?(cross$3(tmpvec3,xUnitVec3,t),len$4(tmpvec3)<1e-6&&cross$3(tmpvec3,yUnitVec3,t),normalize$5(tmpvec3,tmpvec3),setAxisAngle(e,tmpvec3,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(cross$3(tmpvec3,t,n),e[0]=tmpvec3[0],e[1]=tmpvec3[1],e[2]=tmpvec3[2],e[3]=1+r,normalize$3(e,e))}),tmpvec3,xUnitVec3,yUnitVec3,sqlerp=(temp1=create$2(),temp2=create$2(),function(e,t,n,r,i,o){return slerp(temp1,t,i,o),slerp(temp2,n,r,o),slerp(e,temp1,temp2,2*o*(1-o)),e}),temp1,temp2,setAxes=(matr=create$6(),function(e,t,n,r){return matr[0]=n[0],matr[3]=n[1],matr[6]=n[2],matr[1]=r[0],matr[4]=r[1],matr[7]=r[2],matr[2]=-t[0],matr[5]=-t[1],matr[8]=-t[2],normalize$3(e,fromMat3(e,matr))}),matr;const quat=Object.freeze(Object.defineProperty({__proto__:null,create:create$2,identity:identity$1,setAxisAngle:setAxisAngle,getAxisAngle:getAxisAngle,getAngle:getAngle$1,multiply:multiply$2,rotateX:rotateX$1,rotateY:rotateY$1,rotateZ:rotateZ$1,calculateW:calculateW,exp:exp,ln:ln$2,pow:pow,slerp:slerp,random:random$2,invert:invert$2,conjugate:conjugate$1,fromMat3:fromMat3,fromEuler:fromEuler,str:str$2,clone:clone$2,fromValues:fromValues$2,copy:copy$2,set:set$3,add:add$3,mul:mul$2,scale:scale$3,dot:dot$2,lerp:lerp$3,length:length$3,len:len$2,squaredLength:squaredLength$2,sqrLen:sqrLen$2,normalize:normalize$3,exactEquals:exactEquals$2,equals:equals$2,rotationTo:rotationTo,sqlerp:sqlerp,setAxes:setAxes},Symbol.toStringTag,{value:"Module"}));function create$1(){var e=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function clone$1(e){var t=new ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function fromValues$1(e,t,n,r,i,o,a,s){var l=new ARRAY_TYPE(8);return l[0]=e,l[1]=t,l[2]=n,l[3]=r,l[4]=i,l[5]=o,l[6]=a,l[7]=s,l}function fromRotationTranslationValues(e,t,n,r,i,o,a){var s=new ARRAY_TYPE(8);s[0]=e,s[1]=t,s[2]=n,s[3]=r;var l=.5*i,c=.5*o,u=.5*a;return s[4]=l*r+c*n-u*t,s[5]=c*r+u*e-l*n,s[6]=u*r+l*t-c*e,s[7]=-l*e-c*t-u*n,s}function fromRotationTranslation(e,t,n){var r=.5*n[0],i=.5*n[1],o=.5*n[2],a=t[0],s=t[1],l=t[2],c=t[3];return e[0]=a,e[1]=s,e[2]=l,e[3]=c,e[4]=r*c+i*l-o*s,e[5]=i*c+o*a-r*l,e[6]=o*c+r*s-i*a,e[7]=-r*a-i*s-o*l,e}function fromTranslation(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function fromRotation(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function fromMat4(e,t){var n=create$2();getRotation(n,t);var r=new ARRAY_TYPE(3);return getTranslation$1(r,t),fromRotationTranslation(e,n,r),e}function copy$1(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function identity(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function set$2(e,t,n,r,i,o,a,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=i,e[4]=o,e[5]=a,e[6]=s,e[7]=l,e}var getReal=copy$2;function getDual(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var setReal=copy$2;function setDual(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function getTranslation(e,t){var n=t[4],r=t[5],i=t[6],o=t[7],a=-t[0],s=-t[1],l=-t[2],c=t[3];return e[0]=2*(n*c+o*a+r*l-i*s),e[1]=2*(r*c+o*s+i*a-n*l),e[2]=2*(i*c+o*l+n*s-r*a),e}function translate$1(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=.5*n[0],l=.5*n[1],c=.5*n[2],u=t[4],h=t[5],d=t[6],f=t[7];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=a*s+i*c-o*l+u,e[5]=a*l+o*s-r*c+h,e[6]=a*c+r*l-i*s+d,e[7]=-r*s-i*l-o*c+f,e}function rotateX(e,t,n){var r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=s*a+u*r+l*o-c*i,d=l*a+u*i+c*r-s*o,f=c*a+u*o+s*i-l*r,p=u*a-s*r-l*i-c*o;return rotateX$1(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e}function rotateY(e,t,n){var r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=s*a+u*r+l*o-c*i,d=l*a+u*i+c*r-s*o,f=c*a+u*o+s*i-l*r,p=u*a-s*r-l*i-c*o;return rotateY$1(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e}function rotateZ(e,t,n){var r=-t[0],i=-t[1],o=-t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=s*a+u*r+l*o-c*i,d=l*a+u*i+c*r-s*o,f=c*a+u*o+s*i-l*r,p=u*a-s*r-l*i-c*o;return rotateZ$1(e,t,n),r=e[0],i=e[1],o=e[2],a=e[3],e[4]=h*a+p*r+d*o-f*i,e[5]=d*a+p*i+f*r-h*o,e[6]=f*a+p*o+h*i-d*r,e[7]=p*a-h*r-d*i-f*o,e}function rotateByQuatAppend(e,t,n){var r=n[0],i=n[1],o=n[2],a=n[3],s=t[0],l=t[1],c=t[2],u=t[3];return e[0]=s*a+u*r+l*o-c*i,e[1]=l*a+u*i+c*r-s*o,e[2]=c*a+u*o+s*i-l*r,e[3]=u*a-s*r-l*i-c*o,s=t[4],l=t[5],c=t[6],u=t[7],e[4]=s*a+u*r+l*o-c*i,e[5]=l*a+u*i+c*r-s*o,e[6]=c*a+u*o+s*i-l*r,e[7]=u*a-s*r-l*i-c*o,e}function rotateByQuatPrepend(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[0],l=n[1],c=n[2],u=n[3];return e[0]=r*u+a*s+i*c-o*l,e[1]=i*u+a*l+o*s-r*c,e[2]=o*u+a*c+r*l-i*s,e[3]=a*u-r*s-i*l-o*c,s=n[4],l=n[5],c=n[6],u=n[7],e[4]=r*u+a*s+i*c-o*l,e[5]=i*u+a*l+o*s-r*c,e[6]=o*u+a*c+r*l-i*s,e[7]=a*u-r*s-i*l-o*c,e}function rotateAroundAxis(e,t,n,r){if(Math.abs(r)<EPSILON$1)return copy$1(e,t);var i=Math.hypot(n[0],n[1],n[2]);r*=.5;var o=Math.sin(r),a=o*n[0]/i,s=o*n[1]/i,l=o*n[2]/i,c=Math.cos(r),u=t[0],h=t[1],d=t[2],f=t[3];e[0]=u*c+f*a+h*l-d*s,e[1]=h*c+f*s+d*a-u*l,e[2]=d*c+f*l+u*s-h*a,e[3]=f*c-u*a-h*s-d*l;var p=t[4],g=t[5],m=t[6],v=t[7];return e[4]=p*c+v*a+g*l-m*s,e[5]=g*c+v*s+m*a-p*l,e[6]=m*c+v*l+p*s-g*a,e[7]=v*c-p*a-g*s-m*l,e}function add$2(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function multiply$1(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=n[4],l=n[5],c=n[6],u=n[7],h=t[4],d=t[5],f=t[6],p=t[7],g=n[0],m=n[1],v=n[2],y=n[3];return e[0]=r*y+a*g+i*v-o*m,e[1]=i*y+a*m+o*g-r*v,e[2]=o*y+a*v+r*m-i*g,e[3]=a*y-r*g-i*m-o*v,e[4]=r*u+a*s+i*c-o*l+h*y+p*g+d*v-f*m,e[5]=i*u+a*l+o*s-r*c+d*y+p*m+f*g-h*v,e[6]=o*u+a*c+r*l-i*s+f*y+p*v+h*m-d*g,e[7]=a*u-r*s-i*l-o*c+p*y-h*g-d*m-f*v,e}var mul$1=multiply$1;function scale$2(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}var dot$1=dot$2;function lerp$2(e,t,n,r){var i=1-r;return dot$1(t,n)<0&&(r=-r),e[0]=t[0]*i+n[0]*r,e[1]=t[1]*i+n[1]*r,e[2]=t[2]*i+n[2]*r,e[3]=t[3]*i+n[3]*r,e[4]=t[4]*i+n[4]*r,e[5]=t[5]*i+n[5]*r,e[6]=t[6]*i+n[6]*r,e[7]=t[7]*i+n[7]*r,e}function invert$1(e,t){var n=squaredLength$1(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function conjugate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var length$2=length$3,len$1=length$2,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1;function normalize$2(e,t){var n=squaredLength$1(t);if(n>0){n=Math.sqrt(n);var r=t[0]/n,i=t[1]/n,o=t[2]/n,a=t[3]/n,s=t[4],l=t[5],c=t[6],u=t[7],h=r*s+i*l+o*c+a*u;e[0]=r,e[1]=i,e[2]=o,e[3]=a,e[4]=(s-r*h)/n,e[5]=(l-i*h)/n,e[6]=(c-o*h)/n,e[7]=(u-a*h)/n}return e}function str$1(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function exactEquals$1(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function equals$1(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=t[0],h=t[1],d=t[2],f=t[3],p=t[4],g=t[5],m=t[6],v=t[7];return Math.abs(n-u)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-h)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-d)<=EPSILON$1*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-f)<=EPSILON$1*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-p)<=EPSILON$1*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-g)<=EPSILON$1*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(l-m)<=EPSILON$1*Math.max(1,Math.abs(l),Math.abs(m))&&Math.abs(c-v)<=EPSILON$1*Math.max(1,Math.abs(c),Math.abs(v))}const quat2=Object.freeze(Object.defineProperty({__proto__:null,create:create$1,clone:clone$1,fromValues:fromValues$1,fromRotationTranslationValues:fromRotationTranslationValues,fromRotationTranslation:fromRotationTranslation,fromTranslation:fromTranslation,fromRotation:fromRotation,fromMat4:fromMat4,copy:copy$1,identity:identity,set:set$2,getReal:getReal,getDual:getDual,setReal:setReal,setDual:setDual,getTranslation:getTranslation,translate:translate$1,rotateX:rotateX,rotateY:rotateY,rotateZ:rotateZ,rotateByQuatAppend:rotateByQuatAppend,rotateByQuatPrepend:rotateByQuatPrepend,rotateAroundAxis:rotateAroundAxis,add:add$2,multiply:multiply$1,mul:mul$1,scale:scale$2,dot:dot$1,lerp:lerp$2,invert:invert$1,conjugate:conjugate,length:length$2,len:len$1,squaredLength:squaredLength$1,sqrLen:sqrLen$1,normalize:normalize$2,str:str$1,exactEquals:exactEquals$1,equals:equals$1},Symbol.toStringTag,{value:"Module"}));function create(){var e=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function clone(e){var t=new ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function fromValues(e,t){var n=new ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function copy(e,t){return e[0]=t[0],e[1]=t[1],e}function set$1(e,t,n){return e[0]=t,e[1]=n,e}function add$1(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function multiply(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function divide(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function ceil(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function floor(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function min$2(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function max$3(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}function round$1(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function scale$1(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function scaleAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function distance$5(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.hypot(n,r)}function squaredDistance(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function length$1(e){var t=e[0],n=e[1];return Math.hypot(t,n)}function squaredLength(e){var t=e[0],n=e[1];return t*t+n*n}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}function inverse$1(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function normalize$1(e,t){var n=t[0],r=t[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]}function cross$1(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function lerp$1(e,t,n,r){var i=t[0],o=t[1];return e[0]=i+r*(n[0]-i),e[1]=o+r*(n[1]-o),e}function random$1(e,t){t=t||1;var n=2*RANDOM()*Math.PI;return e[0]=Math.cos(n)*t,e[1]=Math.sin(n)*t,e}function transformMat2(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i,e[1]=n[1]*r+n[3]*i,e}function transformMat2d(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}function transformMat3(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[3]*i+n[6],e[1]=n[1]*r+n[4]*i+n[7],e}function transformMat4(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e}function rotate$2(e,t,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=Math.sin(r),s=Math.cos(r);return e[0]=i*s-o*a+n[0],e[1]=i*a+o*s+n[1],e}function angle(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Math.sqrt(n*n+r*r)*Math.sqrt(i*i+o*o),s=a&&(n*i+r*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function zero$1(e){return e[0]=0,e[1]=0,e}function str(e){return"vec2("+e[0]+", "+e[1]+")"}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]}function equals(e,t){var n=e[0],r=e[1],i=t[0],o=t[1];return Math.abs(n-i)<=EPSILON$1*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=EPSILON$1*Math.max(1,Math.abs(r),Math.abs(o))}var len=length$1,sub=subtract,mul=multiply,div=divide,dist=distance$5,sqrDist=squaredDistance,sqrLen=squaredLength,forEach=function(){var e=create();return function(t,n,r,i,o,a){var s,l;for(n||(n=2),r||(r=0),l=i?Math.min(i*n+r,t.length):t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}}();const vec2=Object.freeze(Object.defineProperty({__proto__:null,create:create,clone:clone,fromValues:fromValues,copy:copy,set:set$1,add:add$1,subtract:subtract,multiply:multiply,divide:divide,ceil:ceil,floor:floor,min:min$2,max:max$3,round:round$1,scale:scale$1,scaleAndAdd:scaleAndAdd,distance:distance$5,squaredDistance:squaredDistance,length:length$1,squaredLength:squaredLength,negate:negate,inverse:inverse$1,normalize:normalize$1,dot:dot,cross:cross$1,lerp:lerp$1,random:random$1,transformMat2:transformMat2,transformMat2d:transformMat2d,transformMat3:transformMat3,transformMat4:transformMat4,rotate:rotate$2,angle:angle,zero:zero$1,str:str,exactEquals:exactEquals,equals:equals,len:len,sub:sub,mul:mul,div:div,dist:dist,sqrDist:sqrDist,sqrLen:sqrLen,forEach:forEach},Symbol.toStringTag,{value:"Module"})),esm=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:common,mat2:mat2,mat2d:mat2d,mat3:mat3,mat4:mat4,quat:quat,quat2:quat2,vec2:vec2,vec3:vec3,vec4:vec4},Symbol.toStringTag,{value:"Module"}));function leftTranslate$1(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return fromTranslation$2(r,n),multiply$6(e,r,t)}function leftRotate$1(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return fromRotation$2(r,n),multiply$6(e,r,t)}function leftScale$1(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return fromScaling$1(r,n),multiply$6(e,r,t)}function leftMultiply$1(e,t,n){return multiply$6(e,n,t)}function transform$d(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":leftTranslate$1(n,n,[o[1],o[2]]);break;case"s":leftScale$1(n,n,[o[1],o[2]]);break;case"r":leftRotate$1(n,n,o[1]);break;case"m":leftMultiply$1(n,n,o[1])}}return n}var adjMatrix$1=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,t||(i[s][a]=1))})),i},defaultComparator$1=function(e,t){return e===t},LinkedListNode$1=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}(),LinkedList$1=function(){function e(e){void 0===e&&(e=defaultComparator$1),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new LinkedListNode$1(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new LinkedListNode$1(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),Queue$1=function(){function e(){this.linkedList=new LinkedList$1}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}(),getNeighbors$1=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));if("target"===n){return r.filter((function(t){return t.source===e})).map((function(e){return e.target}))}if("source"===n){return r.filter((function(t){return t.target===e})).map((function(e){return e.source}))}return r.map((function(t){return t.source===e?t.target:t.source}))},getOutEdgesNodeId$1=function(e,t){return t.filter((function(t){return t.source===e}))},getEdgesByNodeId$1=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))},uniqueId$2=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};function initCallbacks$3(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}var breadthFirstSearch$1=function(e,t,n,r){void 0===r&&(r=!0);var i=initCallbacks$3(n),o=new Queue$1,a=e.edges,s=void 0===a?[]:a;o.enqueue(t);for(var l="",c=function(){var e=o.dequeue();i.enter({current:e,previous:l}),getNeighbors$1(e,s,r?"target":void 0).forEach((function(t){i.allowTraversal({previous:l,current:e,next:t})&&o.enqueue(t)})),i.leave({current:e,previous:l}),l=e};!o.isEmpty();)c()},detectConnectedComponents$1=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function e(t){s.push(t),a[t.id]=!0;for(var r=getNeighbors$1(t.id,i),o=function(t){var i=r[t];if(!a[i]){var o=n.filter((function(e){return e.id===i}));o.length>0&&e(o[0])}},l=0;l<r.length;++l)o(l)},c=0;c<n.length;c++){var u=n[c];if(!a[u.id]){l(u);for(var h=[];s.length>0;)h.push(s.pop());o.push(h)}}return o},detectStrongConnectComponents$1=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},c=[],u=0,h=function e(t){s[t.id]=u,l[t.id]=u,u+=1,o.push(t),a[t.id]=!0;for(var r=getNeighbors$1(t.id,i,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),h=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[t.id]=Math.min(l[t.id],s[o]));else{var c=n.filter((function(e){return e.id===o}));c.length>0&&e(c[0]),l[t.id]=Math.min(l[t.id],l[o])}},d=0;d<r.length;d++)h(d);if(l[t.id]===s[t.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===t)break}f.length>0&&c.push(f)}},d=0,f=n;d<f.length;d++){var p=f[d];s[p.id]||0===s[p.id]||h(p)}return c};function getConnectedComponents$1(e,t){return t?detectStrongConnectComponents$1(e):detectConnectedComponents$1(e)}var degree$2=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t},getInDegree$1=function(e,t){return degree$2(e)[t]?degree$2(e)[t].inDegree:0},getOutDegree$1=function(e,t){return degree$2(e)[t]?degree$2(e)[t].outDegree:0};function initCallbacks$2(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}function depthFirstSearchRecursive$1(e,t,n,r){r.enter({current:t,previous:n});var i=e.edges;getNeighbors$1(t,void 0===i?[]:i,"target").forEach((function(i){r.allowTraversal({previous:n,current:t,next:i})&&depthFirstSearchRecursive$1(e,i,t,r)})),r.leave({current:t,previous:n})}function depthFirstSearch$1(e,t,n){depthFirstSearchRecursive$1(e,t,"",initCallbacks$2(n))}var detectDirectedCycle$2=function(e){var t=null,n=e.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(e){i[e.id]=e}));for(var s={enter:function(e){var n=e.current,a=e.previous;if(o[n]){t={};for(var s=n,l=a;l!==n;)t[s]=l,s=l,l=r[l];t[s]=l}else o[n]=n,delete i[n],r[n]=a},leave:function(e){var t=e.current;a[t]=t,delete o[t]},allowTraversal:function(e){var n=e.next;return!t&&!a[n]}};Object.keys(i).length;){depthFirstSearch$1(e,Object.keys(i)[0],s)}return t},detectAllUndirectedCycle$1=function(e,t,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=getConnectedComponents$1(e,!1);a<s.length;a++){var l=s[a];if(l.length)for(var c=l[0],u=c.id,h=[c],d=((r={})[u]=c,r),f=((i={})[u]=new Set,i);h.length>0;)for(var p=h.pop(),g=p.id,m=getNeighbors$1(g,e.edges),v=function(r){var i,a=m[r],s=e.nodes.find((function(e){return e.id===a}));if(a===g)o.push(((i={})[a]=p,i));else if(a in f){if(!f[g].has(s)){for(var l=!0,c=[s,p],u=d[g];f[a].size&&!f[a].has(u)&&(c.push(u),u!==d[u.id]);)u=d[u.id];if(c.push(u),t&&n?(l=!1,c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!0)):t&&!n&&c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!1),l){for(var v={},y=1;y<c.length;y+=1)v[c[y-1].id]=c[y];c.length&&(v[c[c.length-1].id]=c[0]),o.push(v)}f[a].add(p)}}else d[a]=p,h.push(s),f[a]=new Set([p])},y=0;y<m.length;y+=1)v(y)}return o},detectAllDirectedCycle$1=function(e,t,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},l={},c=function e(l,c,u){var h=!1;if(t&&!1===n&&t.indexOf(l.id)>-1)return h;r.push(l),i.add(l);for(var d=u[l.id],f=0;f<d.length;f+=1){if((m=s[d[f]])===c){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),h=!0}else i.has(m)||e(m,c,u)&&(h=!0)}if(h)!function(e){for(var t=[e];t.length>0;){var n=t.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(e){t.push(e)})),o[n.id].clear())}}(l);else for(f=0;f<d.length;f+=1){var m=s[d[f]];o[m.id].has(l)||o[m.id].add(l)}return r.pop(),h},u=e.nodes,h=void 0===u?[]:u,d=0;d<h.length;d+=1){var f=h[d],p=f.id;l[p]=d,s[d]=f}if(t&&n){var g=function(e){var n=t[e];l[h[e].id]=l[n],l[n]=0,s[0]=h.find((function(e){return e.id===n})),s[l[h[e].id]]=h[e]};for(d=0;d<t.length;d++)g(d)}for(var m=function(r){for(var i,o,s=1/0,c=0;c<r.length;c+=1)for(var u=r[c],h=0;h<u.length;h++){var d=l[u[h].id];d<s&&(s=d,o=c)}var f=r[o],p=[];for(c=0;c<f.length;c+=1){var g=f[c];p[g.id]=[];for(var m=0,v=getNeighbors$1(g.id,e.edges,"target").filter((function(e){return f.map((function(e){return e.id})).indexOf(e)>-1}));m<v.length;m++){var y=v[m];y!==g.id||!1===n&&t.indexOf(g.id)>-1?p[g.id].push(l[y]):a.push(((i={})[g.id]=g,i))}}return{component:f,adjList:p,minIdx:s}},v=0;v<h.length;){var y=h.filter((function(e){return l[e.id]>=v})),b=detectStrongConnectComponents$1({nodes:y,edges:e.edges}).filter((function(e){return e.length>1}));if(0===b.length)break;var x=m(b),w=x.minIdx,_=x.adjList,C=x.component;if(!(C.length>1))break;C.forEach((function(e){o[e.id]=new Set}));var $=s[w];if(t&&n&&-1===t.indexOf($.id))return a;c($,$,_),v=w+1}return a},detectAllCycles$1=function(e,t,n,r){return void 0===r&&(r=!0),t?detectAllDirectedCycle$1(e,n,r):detectAllUndirectedCycle$1(e,n,r)},minVertex$1=function(e,t,n){for(var r,i=1/0,o=0;o<t.length;o++){var a=t[o].id;!n[a]&&e[a]<=i&&(i=e[a],r=t[o])}return r},dijkstra$3=function(e,t,n,r){var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l={},c={},u={};o.forEach((function(e,n){var r=e.id;c[r]=1/0,r===t&&(c[r]=0)}));for(var h=o.length,d=function(e){var t=minVertex$1(c,o,l),i=t.id;if(l[i]=!0,c[i]===1/0)return"continue";(n?getOutEdgesNodeId$1(i,s):getEdgesByNodeId$1(i,s)).forEach((function(e){var n=e.target,o=e.source,a=n===i?o:n,s=r&&e[r]?e[r]:1;c[a]>c[t.id]+s?(c[a]=c[t.id]+s,u[a]=[t.id]):c[a]===c[t.id]+s&&u[a].push(t.id)}))},f=0;f<h;f++)d();u[t]=[t];var p={};for(var g in c)c[g]!==1/0&&findAllPaths$1(t,g,u,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}};function findAllPaths$1(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var i=[],o=0,a=n[t];o<a.length;o++){var s=findAllPaths$1(e,a[o],n,r);if(!s)return;for(var l=0,c=s;l<c.length;l++){var u=c[l];isArray$1(u)?i.push(__spreadArray$4(__spreadArray$4([],u,!0),[t],!1)):i.push([u,t])}}return r[t]=i,r[t]}var findShortestPath$1=function(e,t,n,r,i){var o=dijkstra$3(e,t,r,i),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}},findAllPath$1=function(e,t,n,r){var i;if(t===n)return[[t]];var o=e.edges,a=void 0===o?[]:o,s=[t],l=((i={})[t]=!0,i),c=[],u=[],h=r?getNeighbors$1(t,a,"target"):getNeighbors$1(t,a);for(c.push(h);s.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),l[f]=!0,h=r?getNeighbors$1(f,a,"target"):getNeighbors$1(f,a),c.push(h.filter((function(e){return!l[e]})))),s[s.length-1]===n){var p=s.map((function(e){return e}));u.push(p);g=s.pop();l[g]=!1,c.pop()}}else{var g=s.pop();l[g]=!1,c.pop()}}return u},floydWarshall$4=function(e,t){for(var n=adjMatrix$1(e,t),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},labelPropagation$2=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l={},c={};o.forEach((function(e,t){var n=uniqueId$2();e.clusterId=n,l[n]={id:n,nodes:[e]},c[e.id]={node:e,idx:t}}));var u=adjMatrix$1(e,t),h={};u.forEach((function(e,t){var n=o[t].id;h[n]={},e.forEach((function(e,t){if(e){var r=o[t].id;h[n][r]=e}}))}));for(var d=0,f=function(){var e=!1;if(o.forEach((function(t){var n={};Object.keys(h[t.id]).forEach((function(e){var r=h[t.id][e],i=c[e].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],i=[e]):r===n[e]&&i.push(e)})),1!==i.length||i[0]!==t.clusterId){var o=i.indexOf(t.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){e=!0;var a=l[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var u=Math.floor(Math.random()*i.length),d=l[i[u]];d.nodes.push(t),t.clusterId=d.id}}})),!e)return"break";d++};d<r;){if("break"===f())break}Object.keys(l).forEach((function(e){var t=l[e];t.nodes&&t.nodes.length||delete l[e]}));var p=[],g={};s.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=c[t].node.clusterId,a=c[r].node.clusterId,s="".concat(o,"---").concat(a);if(g[s])g[s].weight+=i,g[s].count++;else{var l={source:o,target:a,weight:i,count:1};g[s]=l,p.push(l)}}));var m=[];return Object.keys(l).forEach((function(e){m.push(l[e])})),{clusters:m,clusterEdges:p}},Vector$1=function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new e(i)}},e.prototype.subtract=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new e(i)}},e.prototype.avg=function(t){var n=[];if(0!==t)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return r}},e.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(r)}},e.prototype.normalize=function(){var t=[],n=clone$9(this.arr);n.sort((function(e,t){return e-t}));var r=n[n.length-1],i=n[0];for(var o in this.arr)t[o]=(this.arr[o]-i)/(r-i);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*e.arr[i];return r}},e.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},e}(),getAllProperties$1=function(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach((function(e){void 0===t&&n.push(e),void 0!==e[t]&&n.push(e[t])})),n},DistanceType$1;(DistanceType$1||(DistanceType$1={})).EuclideanDistance="euclideanDistance";var getAllKeyValueMap$1=function(e,t,n){var r=[];(null==t?void 0:t.length)?r=t:(e.forEach((function(e){r=r.concat(Object.keys(e))})),r=uniq(r));var i={};return r.forEach((function(t){var r=[];e.forEach((function(e){void 0!==e[t]&&""!==e[t]&&r.push(e[t])})),r.length&&!(null==n?void 0:n.includes(t))&&(i[t]=uniq(r))})),i},oneHot$1=function(e,t,n){var r=getAllKeyValueMap$1(e,t,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(e){return e.every((function(e){return"number"==typeof e}))}));return e.forEach((function(e,t){var n=[];Object.keys(r).forEach((function(t){var i=e[t],a=r[t],s=a.findIndex((function(e){return i===e})),l=[];if(o)l.push(i);else for(var c=0;c<a.length;c++)c===s?l.push(1):l.push(0);n=n.concat(l)})),i[t]=n})),i},getDistance$1=function(e,t,n,r){void 0===n&&(n=DistanceType$1.EuclideanDistance);var i=0;if(n===DistanceType$1.EuclideanDistance)i=new Vector$1(e).euclideanDistance(new Vector$1(t));return i},getModularity$1=function(e,t,n,r){for(var i=t.length,o=2*r,a=0,s=0;s<i;s++)for(var l=e[s].clusterId,c=0;c<i;c++){if(l===e[c].clusterId)a+=(t[s][c]||0)-(n[s]||0)*(n[c]||0)/o}return a*=1/o},getInertialModularity$1=function(e,t){void 0===e&&(e=[]);for(var n=e.length,r=new Vector$1([]),i=0;i<n;i++)r=r.add(new Vector$1(t[i]));var o=r.avg(n);o.normalize();var a=0;for(i=0;i<n;i++){a+=(l=new Vector$1(t[i])).squareEuclideanDistance(o)}var s=[];e.forEach((function(){s.push([])}));for(i=0;i<n;i++){var l=new Vector$1(t[i]);e[i].clusterInertial=0;for(var c=0;c<n;c++)if(i!==c){var u=new Vector$1(t[c]);s[i][c]=l.squareEuclideanDistance(u),e[i].clusterInertial+=s[i][c]}else s[i][c]=0}var h=0,d=2*n*a;for(i=0;i<n;i++){var f=e[i].clusterId;for(c=0;c<n;c++){var p=e[c].clusterId;if(i!==c&&f===p)h+=e[i].clusterInertial*e[c].clusterInertial/Math.pow(d,2)-s[i][c]/d}}return Number(h.toFixed(4))},louvain$2=function(e,t,n,r,i,o,a,s,l){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===l&&(l=1);var c=e.nodes,u=void 0===c?[]:c,h=e.edges,d=void 0===h?[]:h,f=[];if(i){u.forEach((function(e,t){e.properties=e.properties||{},e.originIndex=t}));var p=[];u.every((function(e){return e.hasOwnProperty("nodeType")}))&&(p=Array.from(new Set(u.map((function(e){return e.nodeType})))),u.forEach((function(e){e.properties.nodeType=p.findIndex((function(t){return t===e.nodeType}))})));var g=getAllProperties$1(u,o);f=oneHot$1(g,a,s)}var m=1,v={},y={};u.forEach((function(e,t){var n=String(m++);e.clusterId=n,v[n]={id:n,nodes:[e]},y[e.id]={node:e,idx:t}}));var b=adjMatrix$1(e,t),x=[],w={},_=0;b.forEach((function(e,t){var n=0,r=u[t].id;w[r]={},e.forEach((function(e,t){if(e){n+=e;var i=u[t].id;w[r][i]=e,_+=e}})),x.push(n)})),_/=2;for(var C=1/0,$=1/0,S=0,E=[],A={};;){C=i&&u.every((function(e){return e.hasOwnProperty("properties")}))?getModularity$1(u,b,x,_)+getInertialModularity$1(u,f)*l:getModularity$1(u,b,x,_),0===S&&($=C,E=u,A=v);var M=C>0&&C>$&&C-$<r;if(C>$&&(E=u.map((function(e){return{node:e,clusterId:e.clusterId}})),A=clone$9(v),$=C),M||S>100)break;S++,Object.keys(v).forEach((function(e){var t=0;d.forEach((function(r){var i=r.source,o=r.target,a=y[i].node.clusterId,s=y[o].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=r[n]||1)})),v[e].sumTot=t})),u.forEach((function(e,t){var r,o=v[e.clusterId],a=0,s=x[t]/(2*_),c=0,u=o.nodes;u.forEach((function(e){var n=y[e.id].idx;c+=b[t][n]||0}));var h=c-o.sumTot*s,p=u.filter((function(t){return t.id!==e.id}));p.forEach((function(e,t){f[e.originIndex]}));var g=getInertialModularity$1(p,f)*l,m=w[e.id];if(Object.keys(m).forEach((function(n){var o=y[n].node.clusterId;if(o!==e.clusterId){var c=v[o],u=c.nodes;if(u&&u.length){var d=0;u.forEach((function(e){var n=y[e.id].idx;d+=b[t][n]||0}));var p=d-c.sumTot*s,m=u.concat([e]);m.forEach((function(e,t){f[e.originIndex]}));var x=getInertialModularity$1(m,f)*l,w=p-h;i&&(w=p+x-(h+g)),w>a&&(a=w,r=c)}}})),a>0){r.nodes.push(e);var C=e.clusterId;e.clusterId=r.id;var $=o.nodes.indexOf(e);o.nodes.splice($,1);var S=0,E=0;d.forEach((function(e){var t=e.source,i=e.target,o=y[t].node.clusterId,a=y[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(S+=e[n]||1),(o===C&&a!==C||a===C&&o!==C)&&(E+=e[n]||1)})),r.sumTot=S,o.sumTot=E}}))}var k={},T=0;Object.keys(A).forEach((function(e){var t=A[e];if(t.nodes&&t.nodes.length){var n=String(T+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),A[n]=t,k[e]=n,delete A[e],T++)}else delete A[e]})),E.forEach((function(e){var t=e.node,n=e.clusterId;t&&(t.clusterId=n,t.clusterId&&k[t.clusterId]&&(t.clusterId=k[t.clusterId]))}));var P=[],O={};d.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=y[t].node.clusterId,a=y[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(O[s])O[s].weight+=i,O[s].count++;else{var l={source:o,target:a,weight:i,count:1};O[s]=l,P.push(l)}}}));var N=[];return Object.keys(A).forEach((function(e){N.push(A[e])})),{clusters:N,clusterEdges:P}},iLouvain=function(e,t,n,r,i,o,a,s){return void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=void 0),void 0===o&&(o=[]),void 0===a&&(a=["id"]),void 0===s&&(s=1),louvain$2(e,t,n,r,!0,i,o,a,s)},kCore=function(e,t){var n;void 0===t&&(t=1);for(var r=clone$9(e),i=r.nodes,o=void 0===i?[]:i,a=r.edges,s=void 0===a?[]:a,l=function(){var e=degree$2({nodes:o,edges:s}),r=Object.keys(e);r.sort((function(t,n){var r,i;return(null===(r=e[t])||void 0===r?void 0:r.degree)-(null===(i=e[n])||void 0===i?void 0:i.degree)}));var i=r[0];if(!o.length||(null===(n=e[i])||void 0===n?void 0:n.degree)>=t)return"break";var a=o.findIndex((function(e){return e.id===i}));o.splice(a,1),s=s.filter((function(e){return!(e.source===i||e.target===i)}))};;){if("break"===l())break}return{nodes:o,edges:s}},getCentroid=function(e,t,n){var r=[];if(e===DistanceType$1.EuclideanDistance)r=t[n];else r=[];return r},kMeans=function(e,t,n,r,i,o){void 0===t&&(t=3),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=["id"]),void 0===o&&(o=DistanceType$1.EuclideanDistance);var a=e.nodes,s=void 0===a?[]:a,l=e.edges,c=void 0===l?[]:l,u={clusters:[{id:"0",nodes:s}],clusterEdges:[]};if(o===DistanceType$1.EuclideanDistance&&!s.every((function(e){return e.hasOwnProperty(n)})))return u;var h=[],d=[];if(o===DistanceType$1.EuclideanDistance&&(h=getAllProperties$1(s,n),d=oneHot$1(h,r,i)),!d.length)return u;for(var f=uniq(d.map((function(e){return e.join("")}))),p=Math.min(t,s.length,f.length),g=0;g<s.length;g++)s[g].originIndex=g;var m=[],v=[],y=[];for(g=0;g<p;g++)if(0===g){var b=Math.floor(Math.random()*s.length);if(o===DistanceType$1.EuclideanDistance)m[g]=d[b];else m[g]=[];v.push(b),y[g]=[s[b]],s[b].clusterId=String(g)}else{for(var x=-1/0,w=0,_=function(e){if(!v.includes(e)){for(var t=0,n=0;n<m.length;n++){var r=0;if(o===DistanceType$1.EuclideanDistance)r=getDistance$1(d[s[e].originIndex],m[n],o);t+=r}var i=t/m.length;i>x&&!m.find((function(t){return isEqual$1(t,getCentroid(o,d,s[e].originIndex))}))&&(x=i,w=e)}},C=0;C<s.length;C++)_(C);m[g]=getCentroid(o,d,w),v.push(w),y[g]=[s[w]],s[w].clusterId=String(g)}for(var $=0;;){for(g=0;g<s.length;g++){var S=0,E=1/0;if(0!==$||!v.includes(g)){for(var A=0;A<m.length;A++){var M=0;if(o===DistanceType$1.EuclideanDistance)M=getDistance$1(d[g],m[A],o);M<E&&(E=M,S=A)}if(void 0!==s[g].clusterId)for(var k=y[Number(s[g].clusterId)].length-1;k>=0;k--)y[Number(s[g].clusterId)][k].id===s[g].id&&y[Number(s[g].clusterId)].splice(k,1);s[g].clusterId=String(S),y[S].push(s[g])}}var T=!1;for(g=0;g<y.length;g++){var P=y[g],O=new Vector$1([]);for(A=0;A<P.length;A++)O=O.add(new Vector$1(d[P[A].originIndex]));var N=O.avg(P.length);N.equal(new Vector$1(m[g]))||(T=!0,m[g]=N.getArr())}if($++,s.every((function(e){return void 0!==e.clusterId}))&&T||$>=1e3)break}var I=[],D={};return c.forEach((function(e){var t,n,r=e.source,i=e.target,o=null===(t=s.find((function(e){return e.id===r})))||void 0===t?void 0:t.clusterId,a=null===(n=s.find((function(e){return e.id===i})))||void 0===n?void 0:n.clusterId,l="".concat(o,"---").concat(a);if(D[l])D[l].count++;else{var c={source:o,target:a,count:1};D[l]=c,I.push(c)}})),{clusters:y,clusterEdges:I}},cosineSimilarity=function(e,t){var n=new Vector$1(t),r=n.norm2(),i=new Vector$1(e),o=i.norm2(),a=n.dot(i),s=r*o;return s?a/s:0},nodesCosineSimilarity=function(e,t,n,r,i){void 0===e&&(e=[]),void 0===n&&(n=void 0),void 0===r&&(r=[]),void 0===i&&(i=[]);var o=clone$9(e.filter((function(e){return e.id!==t.id}))),a=e.findIndex((function(e){return e.id===t.id})),s=getAllProperties$1(e,n),l=oneHot$1(s,r,i),c=l[a],u=[];return o.forEach((function(e,n){if(e.id!==t.id){var r=l[n],i=cosineSimilarity(r,c);u.push(i),e.cosineSimilarity=i}})),o.sort((function(e,t){return t.cosineSimilarity-e.cosineSimilarity})),{allCosineSimilarity:u,similarNodes:o}},UnionFind$1=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}(),defaultCompare$1=function(e,t){return e-t},MinBinaryHeap$1=function(){function e(e){void 0===e&&(e=defaultCompare$1),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}(),primMST$1=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],l=new Set;l.add(s);var c=new MinBinaryHeap$1((function(e,n){return t?e.weight-n.weight:0}));for(getEdgesByNodeId$1(s.id,a).forEach((function(e){c.insert(e)}));!c.isEmpty();){var u=c.delMin(),h=u.source,d=u.target;l.has(h)&&l.has(d)||(n.push(u),l.has(h)||(l.add(h),getEdgesByNodeId$1(h,a).forEach((function(e){c.insert(e)}))),l.has(d)||(l.add(d),getEdgesByNodeId$1(d,a).forEach((function(e){c.insert(e)}))))}return n},kruskalMST$1=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(e){return e}));t&&s.sort((function(e,t){return e.weight-t.weight}));for(var l=new UnionFind$1(i.map((function(e){return e.id})));s.length>0;){var c=s.shift(),u=c.source,h=c.target;l.connected(u,h)||(n.push(c),l.union(u,h))}return n},minimumSpanningTree$1=function(e,t,n){return n?{prim:primMST$1,kruskal:kruskalMST$1}[n](e,t):kruskalMST$1(e,t)},pageRank$2=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=e.nodes,l=void 0===s?[]:s,c=e.edges,u=void 0===c?[]:c,h=l.length,d={},f={},p=0;p<h;++p){d[m=(w=l[p]).id]=1/h,f[m]=1/h}for(var g=degree$2(e);a>0&&i>t;){o=0;for(p=0;p<h;++p){var m=(w=l[p]).id;if(r=0,0===g[w.id].inDegree)d[m]=0;else{for(var v=getNeighbors$1(m,u,"source"),y=0;y<v.length;++y){var b=v[y],x=g[b].outDegree;x>0&&(r+=f[b]/x)}d[m]=n*r,o+=d[m]}}o=(1-o)/h,i=0;for(p=0;p<h;++p){var w;r=d[m=(w=l[p]).id]+o,i+=Math.abs(r-f[m]),f[m]=r}a-=1}return f},VACANT_EDGE_ID$1=-1,VACANT_NODE_ID$1=-1,VACANT_EDGE_LABEL$1="-1",VACANT_NODE_LABEL$1="-1",VACANT_GRAPH_ID$1=-1,Edge$2=function(e,t,n,r){void 0===e&&(e=VACANT_EDGE_ID$1),void 0===t&&(t=VACANT_NODE_ID$1),void 0===n&&(n=VACANT_NODE_ID$1),void 0===r&&(r=VACANT_EDGE_LABEL$1),this.id=e,this.from=t,this.to=n,this.label=r},Node$3=function(){function e(e,t){void 0===e&&(e=VACANT_NODE_ID$1),void 0===t&&(t=VACANT_NODE_LABEL$1),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}(),Graph$4=function(){function e(e,t,n){void 0===e&&(e=VACANT_NODE_ID$1),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new Node$3(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new Edge$2(e,t,n,r);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Edge$2(e,n,t,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},e}(),DFSedge$1=function(){function e(e,t,n,r,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||VACANT_NODE_LABEL$1,edgeLabel:r||VACANT_EDGE_LABEL$1,nodeLabel2:i||VACANT_NODE_LABEL$1}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),DFScode$1=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new DFSedge$1(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=VACANT_GRAPH_ID$1),void 0===t&&(t=!1);var n=new Graph$4(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,i=e.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==VACANT_NODE_LABEL$1&&n.addNode(t,o),s!==VACANT_NODE_LABEL$1&&n.addNode(r,s),o!==VACANT_NODE_LABEL$1&&s!==o&&n.addEdge(void 0,t,r,a)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(void 0===e||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),History$1=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),GSpan$1=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,i=e.minNodeNum,o=void 0===i?1:i,a=e.maxNodeNum,s=void 0===a?4:a,l=e.top,c=void 0===l?10:l,u=e.directed,h=void 0!==u&&u,d=e.verbose,f=void 0!==d&&d;this.graphs=t,this.dfsCode=new DFScode$1,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===t.from)if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=l.label)return l}else if(t.label<l.label||t.label===l.label&&i[t.to].label<=i[n.to].label)return l}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],o=t.to,a=e.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var c=a[l],u=e.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&i.push(c)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],o=e.nodeMap,a=o[t.to].label,s=o[t.from].edges,l=s.length,c=0;c<l;c++){var u=s[c],h=o[u.to].label;t.to===u.to||n>h||r.hasNode(o[u.to])||(t.label<u.label||t.label===u.label&&a<=h)&&i.push(u)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;t?(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose,1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(VACANT_GRAPH_ID$1,n),i=r.nodeMap,o=new DFScode$1,a={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=i[e.to],o="".concat(t.label,"-").concat(e.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new DFSedge$1(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var l=o.buildRmpath(),c=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=o.dfsEdgeList[l[0]].toNode,h={},d=!1,f=0,p=n?-1:0,g=function(t){if(d)return"break";s.forEach((function(n){var i=new History$1(n),a=e.findBackwardEdge(r,i.edges[l[t]],i.edges[l[0]],i);a&&(h[a.label]||(h[a.label]={projected:[],edgeLabel:a.label}),h[a.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=o.dfsEdgeList[l[t]].fromNode,d=!0)}))},m=l.length-1;m>p;m--){if("break"===g(m))break}if(d){var v=e.findMinLabel(h);o.dfsEdgeList.push(new DFSedge$1(u,f,VACANT_NODE_LABEL$1,v.edgeLabel,VACANT_NODE_LABEL$1));var y=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(h[v.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(t){var n=new History$1(t),o=e.findForwardPureEdges(r,n.edges[l[0]],c,n);o.length>0&&(d=!0,x=u,o.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var w=l.length,_=function(t){if(d)return"break";var n=l[t];s.forEach((function(t){var a=new History$1(t),s=e.findForwardRmpathEdges(r,a.edges[n],c,a);s.length>0&&(d=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(m=0;m<w;m++){if("break"===_(m))break}if(!d)return!0;var C=e.findMinLabel(b);o.dfsEdgeList.push(new DFSedge$1(x,u+1,VACANT_NODE_LABEL$1,C.edgeLabel,C.nodeLabel2));var $=o.dfsEdgeList.length-1;return t.dfsEdgeList[$]===o.dfsEdgeList[$]&&a(b["".concat(C.edgeLabel,"-").concat(C.nodeLabel2)].projected)}(a[l].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push(clone$9(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};e.forEach((function(e){for(var l=t.graphs[e.graphId],c=l.nodeMap,u=new History$1(e),h=r.length-1;h>=0;h--){var d=t.findBackwardEdge(l,u.edges[r[h]],u.edges[r[0]],u);if(d){var f="".concat(t.dfsCode.dfsEdgeList[r[h]].fromNode,"-").concat(d.label);s[f]||(s[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[h]].fromNode,edgeLabel:d.label}),s[f].projected.push({graphId:e.graphId,edge:d,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(l,u.edges[r[0]],o,u).forEach((function(t){var n="".concat(i,"-").concat(t.label,"-").concat(c[t.to].label);a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:t.label,nodeLabel2:c[t.to].label}),a[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(l,u.edges[r[n]],o,u).forEach((function(i){var o="".concat(t.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(c[i.to].label);a[o]||(a[o]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:c[i.to].label}),a[o].projected.push({graphId:e.graphId,edge:i,preNode:e})}))};for(h=0;h<r.length;h++)p(h)}})),Object.keys(s).forEach((function(e){var n=s[e],r=n.toNodeId,o=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new DFSedge$1(i,r,"-1",o,"-1")),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var n=a[e],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new DFSedge$1(r,i+1,VACANT_NODE_LABEL$1,o,s)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={};return Object.keys(e).forEach((function(n){var r=e[n],s=r.nodeMap;r.nodes.forEach((function(e,r){var l=e.label,c="".concat(n,"-").concat(l);if(!a[c]){var u=i[l]||0;u++,i[l]=u}a[c]={graphKey:n,label:l},e.edges.forEach((function(e){var n=l,r=s[e.to].label;if(!t&&n>r){var i=r;r=n,n=i}var a=e.label,c="".concat(n,"-").concat(a,"-").concat(r);if(!o[c]){var u=o[c]||0;u++,o[c]=u}}))}))})),Object.keys(i).forEach((function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){e.findForwardRootEdges(i,t).forEach((function(e){var i=o[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new DFSedge$1(0,1,o,a,s)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()}))}},e}(),formatGraphs$1=function(e,t,n,r){var i={};return Object.keys(e).forEach((function(o,a){var s=e[o],l=new Graph$4(a,!0,t),c={};s.nodes.forEach((function(e,t){l.addNode(t,e[n]),c[e.id]=t})),s.edges.forEach((function(e,t){var n=c[e.source],i=c[e.target];l.addEdge(-1,n,i,e[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i},toGraphDatas$1=function(e,t,n){var r=[];return e.forEach((function(e){var i={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;i.nodes.push(((n={id:"".concat(e.id)})[t]=e.label,n))})),e.edges.forEach((function(e){var t;i.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[n]=e.label,t))})),r.push(i)})),r},DEFAULT_LABEL_NAME$1="cluster",gSpan$2=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,i=e.nodeLabelProp,o=void 0===i?DEFAULT_LABEL_NAME$1:i,a=e.edgeLabelProp,s=void 0===a?DEFAULT_LABEL_NAME$1:a,l=formatGraphs$1(t,r,o,s),c=e.minSupport,u=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,f=e.top,p=new GSpan$1({graphs:l,minSupport:c,maxNodeNum:u,minNodeNum:h,top:f,verbose:d,directed:r});return p.run(),toGraphDatas$1(p.frequentSubgraphs,o,s)},findKNeighborUnits$1=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=e.nodes;return t.forEach((function(e,t){i.push(findKNeighborUnit$1(o,e,t,n,r))})),i},findKNeighborUnit$1=function(e,t,n,r,i){var o=[n],a=[],s={};return t.forEach((function(t,l){if(t<=i&&n!==l){o.push(l),a.push(e[l]);var c=e[l][r];s[c]?(s[c].count++,s[c].dists.push(t)):s[c]={count:1,dists:[t]}}})),Object.keys(s).forEach((function(e){s[e].dists=s[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},findNodePairsRandomly$1=function(e,t,n,r,i){var o=Math.ceil(n/t),a={},s=0;return r.forEach((function(e,r){for(var l=0,c=0,u=e.nodeIdxs,h=e.neighborNum-1;l<o;){for(var d=u[1+Math.floor(Math.random()*h)],f=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},l++,++s>=n))return a;if(++c>2*t)break}l<o&&(o=(o+(o-l))/(t-r-1))})),a},getIntersectNeighborInducedGraph$1=function(e,t,n,r){var i=n.nodes;return r||(r={}),Object.keys(e).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=e[o],c=null===(a=t[l.start])||void 0===a?void 0:a.nodeIdxs,u=null===(s=t[l.end])||void 0===s?void 0:s.nodeIdxs;if(c&&u){var h=new Set(u),d=c.filter((function(e){return h.has(e)}));if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var m=i[d[g]];r[o].nodes.push(m),f[m.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[o].edges.push(e)}))}}}})),r},getMatchedCount$1=function(e,t,n,r){var i,o,a={};e.nodes.forEach((function(e){a[e.id]=e}));var s=0;return!(null===(i=null==t?void 0:t.edges)||void 0===i?void 0:i.length)||(null===(o=null==t?void 0:t.nodes)||void 0===o?void 0:o.length)<2?0:(e.edges.forEach((function(e){var i=a[e.source][n],o=a[e.target][n],l=null==t?void 0:t.nodes[0][n],c=null==t?void 0:t.nodes[1][n],u=null==t?void 0:t.edges[0][r];e[r]===u&&(i===l&&o===c||i===c&&o===l)&&s++})),s)},findRepresentStructure$1=function(e,t,n){for(var r=1/0,i=0,o=function(t){var n=e[t],o=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];o.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var s=0,l=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,l.push(t);var r=0,i=e.length;e.graphs.forEach((function(t,i){var o=n[t];e.graphs.forEach((function(e,t){i!==t&&(r+=Math.abs(o-n[e]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var c=0;l.forEach((function(e,t){l.forEach((function(n,r){t!==r&&(c+=Math.abs(e-n))})),c/=l.length*(l.length-1)/2}));var u=c-s;r<u&&(r=u,i=t)},a=0;a<t;a++)o(a);return{structure:n[i],structureCountMap:e[i]}},getNodeMaps$1=function(e,t){var n={},r={};return e.forEach((function(e,i){n[e.id]={idx:i,node:e,degree:0,inDegree:0,outDegree:0};var o=e[t];r[o]||(r[o]=[]),r[o].push(e)})),{nodeMap:n,nodeLabelMap:r}},getEdgeMaps$1=function(e,t,n){var r={},i={};return e.forEach((function(e,o){r["".concat(uniqueId$2)]={idx:o,edge:e};var a=e[t];i[a]||(i[a]=[]),i[a].push(e);var s=n[e.source];s&&(s.degree++,s.outDegree++);var l=n[e.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},getSpmMap$1=function(e,t,n){var r=t.length,i={};return t.forEach((function(t,o){for(var a=n?0:o+1,s=e[o].id,l=a;l<r;l++)if(o!==l){var c=e[l].id,u=t[l];i["".concat(s,"-").concat(c)]=u,n||(i["".concat(c,"-").concat(s)]=u)}})),i},getNDSDist$1=function(e,t,n,r,i,o,a,s,l,c,u){var h,d="".concat(t.id,"-").concat(n.id);if(c&&c[d])return c[d];var f=u?u[d]:void 0;if(!f){var p=((h={})[d]={start:r[t.id].idx,end:r[n.id].idx,distance:i},h);f=(u=getIntersectNeighborInducedGraph$1(p,o,e,u))[d]}return getMatchedCount$1(f,a,s,l)},stashPatternNodeLabelDegreeMap$1=function(e,t,n,r){var i,o,a,s=null===(i=e[t])||void 0===i?void 0:i.degree,l=null===(o=e[t])||void 0===o?void 0:o.inDegree,c=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,l=1/0,c=1/0,r[t].forEach((function(e){var t=n[e.id].degree;s>t&&(s=t);var r=n[e.id].inDegree;l>r&&(l=r);var i=n[e.id].outDegree;c>i&&(c=i)})),e[t]={degree:s,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}},GADDI$1=function(e,t,n,r,i,o,a){var s;if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var l=e.nodes.length;if(l){var c=floydWarshall$4(e,n),u=floydWarshall$4(t,n),h=getSpmMap$1(e.nodes,c,n),d=getSpmMap$1(t.nodes,u,n),f=getNodeMaps$1(e.nodes,o),p=f.nodeMap,g=f.nodeLabelMap,m=getNodeMaps$1(t.nodes,o),v=m.nodeMap,y=m.nodeLabelMap;getEdgeMaps$1(e.edges,a,p);var b=getEdgeMaps$1(t.edges,a,v).edgeLabelMap,x=[];null==u||u.forEach((function(e){x=x.concat(e)})),i||(i=Math.max.apply(Math,__spreadArray$4(__spreadArray$4([],x,!1),[2],!1))),r||(r=i);var w=findKNeighborUnits$1(e,c,o,r),_=findKNeighborUnits$1(t,u,o,r),C=Math.min(100,l*(l-1)/2),$=findNodePairsRandomly$1(r,l,C,w,c),S=getIntersectNeighborInducedGraph$1($,w,e),E=gSpan$2({graphs:S,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n}).slice(0,10),A=E.length,M=[];E.forEach((function(e,t){M[t]={},Object.keys(S).forEach((function(n){var r=S[n],i=getMatchedCount$1(r,e,o,a);M[t][n]=i}))}));var k=findRepresentStructure$1(M,A,E),T=k.structure,P=k.structureCountMap,O=t.nodes[0],N=[],I=null===(s=t.nodes[0])||void 0===s?void 0:s[o],D=-1/0;t.nodes.forEach((function(e){var t=e[o],n=g[t];(null==n?void 0:n.length)>D&&(D=n.length,N=n,I=t,O=e)}));var L={},R={},B={},j={},F={},G={};Object.keys(y).forEach((function(r,i){F[r]=[],n&&(G[r]=[]);var s=y[r],l={};s.forEach((function(e){var t=d["".concat(O.id,"-").concat(e.id)];if(t&&F[r].push(t),l["".concat(O.id,"-").concat(e.id)]={start:0,end:v[e.id].idx,distance:t},n){var i=d["".concat(e.id,"-").concat(O.id)];i&&G[r].push(i)}})),F[r]=F[r].sort((function(e,t){return e-t})),n&&(G[r]=G[r].sort((function(e,t){return e-t}))),R=getIntersectNeighborInducedGraph$1(l,_,t,R);var c=[];if(Object.keys(l).forEach((function(e){if(B[e])c.push(B[e]);else{var t=R[e];B[e]=getMatchedCount$1(t,T,o,a),c.push(B[e])}})),c=c.sort((function(e,t){return t-e})),j["".concat(O.id,"-").concat(r)]=c,r!==I)for(var u=function(t){var n=N[t],i=w[p[n.id].idx],s=i.nodeLabelCountMap[r],l=y[r].length;if(!s||s.count<l)return N.splice(t,1),"continue";for(var u=!1,d=0;d<l;d++)if(s.dists[d]>F[r][d]){u=!0;break}if(u)return N.splice(t,1),"continue";var f={};i.neighbors.forEach((function(e){var t=h["".concat(n.id,"-").concat(e.id)];f["".concat(n.id,"-").concat(e.id)]={start:p[n.id].idx,end:p[e.id].idx,distance:t}})),S=getIntersectNeighborInducedGraph$1(f,w,e,S);var g=[];Object.keys(f).forEach((function(e){if(P[e])g.push(P[e]);else{var t=S[e];P[e]=getMatchedCount$1(t,T,o,a),g.push(P[e])}})),g=g.sort((function(e,t){return t-e}));var m=!1;for(d=0;d<l;d++)if(g[d]<c[d]){m=!0;break}return m?(N.splice(t,1),"continue"):void 0},f=((null==N?void 0:N.length)||0)-1;f>=0;f--)u(f)}));var V=[];null==N||N.forEach((function(r){for(var s=p[r.id].idx,l=findKNeighborUnit$1(e.nodes,c[s],s,o,i).neighbors,u=!1,d=l.length-1;d>=0;d--){if(l.length+1<t.nodes.length)return void(u=!0);var f=l[d],g=f[o];if(y[g]&&y[g].length)if(F[g]&&F[g].length){var m="".concat(r.id,"-").concat(f.id),b=h[m],x=F[g].length-1;if(b>F[g][x])l.splice(d,1);else{if(n){var _="".concat(f.id,"-").concat(r.id),C=h[_];if(x=G[g].length-1,C>G[g][x]){l.splice(d,1);continue}}var $=P[m]?P[m]:getNDSDist$1(e,r,f,p,b,w,T,o,a,P,S),E="".concat(O.id,"-").concat(g);if($<j[E][j[E].length-1])l.splice(d,1);else{var A=stashPatternNodeLabelDegreeMap$1(L,g,v,y),M=A.minPatternNodeLabelDegree;A.minPatternNodeLabelInDegree,A.minPatternNodeLabelOutDegree,p[f.id].degree<M&&l.splice(d,1)}}}else l.splice(d,1);else l.splice(d,1)}u||V.push({nodes:[r].concat(l)})}));var z=dijkstra$3(t,O.id,!1).length,H={};n?(Object.keys(z).forEach((function(e){var t=v[e].node[o];H[t]?H[t].push(z[e]):H[t]=[z[e]]})),Object.keys(H).forEach((function(e){H[e].sort((function(e,t){return e-t}))}))):H=F;for(var U=function(r){var i=V[r],s=i.nodes[0],l={},c={};i.nodes.forEach((function(e,t){c[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[o];l[n]?l[n]++:l[n]=1}));var u=[],h={};e.edges.forEach((function(e){c[e.source]&&c[e.target]&&(u.push(e),h[e[a]]?h[e[a]]++:h[e[a]]=1,c[e.source].degree++,c[e.target].degree++,c[e.source].outDegree++,c[e.target].inDegree++)}));for(var d=Object.keys(b).length,f=!1,g=0;g<d;g++){var m=Object.keys(b)[g];if(!h[m]||h[m]<b[m].length){f=!0;break}}if(f)return V.splice(r,1),"continue";var x=u.length;if(x<t.edges.length)return V.splice(r,1),"break";var w=!1,_=function(e){var t=u[e],r=t[a],i=b[r];if(!i||!i.length)return h[r]--,i&&h[r]<i.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue");var s=c[t.source].node[o],l=c[t.target].node[o],d=!1;return i.forEach((function(e){var t=v[e.source].node,r=v[e.target].node;t[o]===s&&r[o]===l&&(d=!0),n||t[o]!==l||r[o]!==s||(d=!0)})),d?void 0:(h[r]--,i&&h[r]<i.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue"))};for(g=x-1;g>=0;g--){if("break"===_(g))break}if(w)return V.splice(r,1),"continue";i.edges=u;var C=dijkstra$3(i,i.nodes[0].id,!1).length;if(Object.keys(C).reverse().forEach((function(e){if(e!==i.nodes[0].id&&!w){if(C[e]===1/0){var t=c[e].node[o];if(l[t]--,l[t]<y[t].length)return void(w=!0);var n=i.nodes.indexOf(c[e].node);return i.nodes.splice(n,1),void(c[e]=void 0)}var r=p[e].node[o];if(!H[r]||!H[r].length||C[e]>H[r][H[r].length-1]){t=c[e].node[o];if(l[t]--,l[t]<y[t].length)return void(w=!0);n=i.nodes.indexOf(c[e].node);i.nodes.splice(n,1),c[e]=void 0}}})),w)return V.splice(r,1),"continue";for(var $=!0,S=0;$&&!w;){if($=!1,n?c[s.id].degree<v[O.id].degree||c[s.id].inDegree<v[O.id].inDegree||c[s.id].outDegree<v[O.id].outDegree:c[s.id].degree<v[O.id].degree){w=!0;break}if(l[s[o]]<y[s[o]].length){w=!0;break}for(var E=i.nodes.length-1;E>=0;E--){var A=i.nodes[E],M=c[A.id].degree,k=c[A.id].inDegree,T=c[A.id].outDegree,P=A[o],N=stashPatternNodeLabelDegreeMap$1(L,P,v,y),I=N.minPatternNodeLabelDegree,D=N.minPatternNodeLabelInDegree,R=N.minPatternNodeLabelOutDegree;if(n?M<I||k<D||T<R:M<I){if(l[A[o]]--,l[A[o]]<y[A[o]].length){w=!0;break}i.nodes.splice(E,1),c[A.id]=void 0,$=!0}}if(w||!$&&0!==S)break;for(var B=(x=u.length)-1;B>=0;B--){var j=u[B];if(!c[j.source]||!c[j.target]){u.splice(B,1);var F=j[a];if(h[F]--,c[j.source]&&(c[j.source].degree--,c[j.source].outDegree--),c[j.target]&&(c[j.target].degree--,c[j.target].inDegree--),b[F]&&h[F]<b[F].length){w=!0;break}$=!0}}S++}return w||w||i.nodes.length<t.nodes.length||u.length<t.edges.length?(V.splice(r,1),"continue"):void 0},W=V.length-1;W>=0;W--){if("break"===U(W))break}var q=V.length,Y=function(e){var t=V[e],n={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=V[e],r={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(i=!1)})),i&&V.splice(e,1)},i=q-1;i>e;i--)r(i);q=V.length};for(W=0;W<=q-1;W++)Y(W);return V}}},Stack=function(){function e(e){void 0===e&&(e=10),this.linkedList=new LinkedList$1,this.maxStep=e}return Object.defineProperty(e.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},e.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},e.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},e.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toArray=function(){return this.linkedList.toArray().map((function(e){return e.value}))},e.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},e}(),detectDirectedCycle$1=detectDirectedCycle$2;const index$5={getAdjMatrix:adjMatrix$1,breadthFirstSearch:breadthFirstSearch$1,connectedComponent:getConnectedComponents$1,getDegree:degree$2,getInDegree:getInDegree$1,getOutDegree:getOutDegree$1,detectCycle:detectDirectedCycle$2,detectDirectedCycle:detectDirectedCycle$1,detectAllCycles:detectAllCycles$1,detectAllDirectedCycle:detectAllDirectedCycle$1,detectAllUndirectedCycle:detectAllUndirectedCycle$1,depthFirstSearch:depthFirstSearch$1,dijkstra:dijkstra$3,findAllPath:findAllPath$1,findShortestPath:findShortestPath$1,floydWarshall:floydWarshall$4,labelPropagation:labelPropagation$2,louvain:louvain$2,iLouvain:iLouvain,kCore:kCore,kMeans:kMeans,cosineSimilarity:cosineSimilarity,nodesCosineSimilarity:nodesCosineSimilarity,minimumSpanningTree:minimumSpanningTree$1,pageRank:pageRank$2,getNeighbors:getNeighbors$1,Stack:Stack,GADDI:GADDI$1},AlgorithmSync=Object.freeze(Object.defineProperty({__proto__:null,getAdjMatrix:adjMatrix$1,breadthFirstSearch:breadthFirstSearch$1,connectedComponent:getConnectedComponents$1,getDegree:degree$2,getInDegree:getInDegree$1,getOutDegree:getOutDegree$1,detectCycle:detectDirectedCycle$2,detectDirectedCycle:detectDirectedCycle$1,detectAllCycles:detectAllCycles$1,detectAllDirectedCycle:detectAllDirectedCycle$1,detectAllUndirectedCycle:detectAllUndirectedCycle$1,depthFirstSearch:depthFirstSearch$1,dijkstra:dijkstra$3,findAllPath:findAllPath$1,findShortestPath:findShortestPath$1,floydWarshall:floydWarshall$4,labelPropagation:labelPropagation$2,louvain:louvain$2,iLouvain:iLouvain,kCore:kCore,kMeans:kMeans,cosineSimilarity:cosineSimilarity,nodesCosineSimilarity:nodesCosineSimilarity,minimumSpanningTree:minimumSpanningTree$1,pageRank:pageRank$2,getNeighbors:getNeighbors$1,Stack:Stack,GADDI:GADDI$1,default:index$5},Symbol.toStringTag,{value:"Module"}));var transform$c=transform$d,compare=function(e){return function(t,n){return t[e]-n[e]}},isBetween=function(e,t,n){return e>=t&&e<=n},getLineIntersect=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=t.x-e.x,s=t.y-e.y,l=r.x-n.x,c=r.y-n.y,u=a*c-s*l,h=1/u;if(u*u>1e-4*(a*a+s*s)*(l*l+c*c)){var d=(i*c-o*l)*h,f=(i*s-o*a)*h;return isBetween(d,0,1)&&isBetween(f,0,1)?{x:e.x+d*a,y:e.y+d*s}:null}return null},getRectIntersectByPoint=function(e,t){var n=e.x,r=e.y,i=e.width,o=e.height,a=[],s={x:n+i/2,y:r+o/2};a.push({x:n,y:r}),a.push({x:n+i,y:r}),a.push({x:n+i,y:r+o}),a.push({x:n,y:r+o}),a.push({x:n,y:r});for(var l=null,c=1;c<a.length&&!(l=getLineIntersect(a[c-1],a[c],s,t));c++);return l},getCircleIntersectByPoint=function(e,t){var n=e.x,r=e.y,i=e.r,o=t.x-n,a=t.y-r;if(o*o+a*a<i*i)return null;var s=Math.atan(a/o);return{x:n+Math.abs(i*Math.cos(s))*Math.sign(o),y:r+Math.abs(i*Math.sin(s))*Math.sign(a)}},getEllipseIntersectByPoint=function(e,t){var n=e.rx,r=e.ry,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=Math.atan2(s/r,a/n);return l<0&&(l+=2*Math.PI),{x:i+n*Math.cos(l),y:o+r*Math.sin(l)}},applyMatrix$1=function(e,t,n){void 0===n&&(n=1);var r=[e.x,e.y,n];return t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]),transformMat3$1(r,r,t),{x:r[0],y:r[1]}},invertMatrix=function(e,t,n){void 0===n&&(n=1),t&&!isNaN(t[0])||(t=[1,0,0,0,1,0,0,0,1]);var r=invert$4([1,0,0,0,1,0,0,0,1],t);r||(r=[1,0,0,0,1,0,0,0,1]);var i=[e.x,e.y,n];return transformMat3$1(i,i,r),{x:i[0],y:i[1]}},getCircleCenterByPoints=function(e,t,n){var r=e.x-t.x,i=e.y-t.y,o=e.x-n.x,a=e.y-n.y,s=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,l=(e.x*e.x-n.x*n.x-n.y*n.y+e.y*e.y)/2,c=i*o-r*a;return{x:-(a*s-i*l)/c,y:-(r*l-o*s)/c}},distance$4=function(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)},scaleMatrix=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.forEach((function(e){r.push(e*t)})),n.push(r)})),n},floydWarshall$3=function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var i=0;i<n;i+=1)r===i?t[r][i]=0:0!==e[r][i]&&e[r][i]?t[r][i]=e[r][i]:t[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)t[r][i]>t[r][o]+t[o][i]&&(t[r][i]=t[r][o]+t[o][i]);return t},getAdjMatrix=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];i[a][s]=1,t||(i[s][a]=1)})),i},translate=function(e,t){e.translate(t.x,t.y)},move=function(e,t,n,r){void 0===r&&(r={duration:500});var i=e.getMatrix();i||(i=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),a=t.x-o.minX,s=t.y-o.minY;if(n){var l=a*i[0],c=s*i[4],u=0,h=0,d=0,f=0;e.animate((function(e){return i=transform$c(i,[["t",(d=l*e)-u,(f=c*e)-h]]),u=d,h=f,{matrix:i}}),r)}else{var p=transform$c(i,[["t",a,s]]);e.setMatrix(p)}},scale=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=t;isArray$1(t)||(r=[t,t]),isArray$1(t)&&1===t.length&&(r=[t[0],t[0]]),n=transform$c(n,[["s",r[0],r[1]]]),e.setMatrix(n)},rotate$1=function(e,t){var n=e.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),n=transform$c(n,[["r",t]]),e.setMatrix(n)},getDegree=function(e,t,n){for(var r=[],i=0;i<e;i++)r[i]=0;return n.forEach((function(e){e.source&&(r[t[e.source]]+=1),e.target&&(r[t[e.target]]+=1)})),r};function onSegment$1(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}var isPointInPolygon=function(e,t,n){var r=!1,i=e.length;function o(e){return Math.abs(e)<1e-6?0:e<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=e[a],l=e[(a+1)%i];if(onSegment$1(s,l,[t,n]))return!0;o(s[1]-n)>0!=o(l[1]-n)>0&&o(t-(n-s[1])*(s[0]-l[0])/(s[1]-l[1])-s[0])<0&&(r=!r)}return r},intersectBBox=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},lineIntersectPolygon=function(e,t){var n=!1;return each(e,(function(e){if(getLineIntersect(e.from,e.to,t.from,t.to))return n=!0,!1})),n},isPolygonsIntersect$1=function(e,t){var n=function(e){var t=e.map((function(e){return e[0]})),n=e.map((function(e){return e[1]}));return{minX:Math.min.apply(null,t),maxX:Math.max.apply(null,t),minY:Math.min.apply(null,n),maxY:Math.max.apply(null,n)}},r=function(e){for(var t=[],n=e.length,r=0;r<n-1;r++){var i=e[r],o=e[r+1];t.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(t.length>1){var a=e[0],s=e[n-1];t.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return t};if(e.length<2||t.length<2)return!1;var i=n(e),o=n(t);if(!intersectBBox(i,o))return!1;var a=!1;if(each(t,(function(t){if(isPointInPolygon(e,t[0],t[1]))return a=!0,!1})),a)return!0;if(each(e,(function(e){if(isPointInPolygon(t,e[0],e[1]))return a=!0,!1})),a)return!0;var s=r(e),l=r(t),c=!1;return each(l,(function(e){if(lineIntersectPolygon(s,e))return c=!0,!1})),c},Line$4=function(){function e(e,t,n,r){this.x1=e,this.y1=t,this.x2=n,this.y2=r}return e.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),n=Math.max(this.x1,this.x2),r=Math.max(this.y1,this.y2);return{x:e,y:t,minX:e,minY:t,maxX:n,maxY:r,width:n-e,height:r-t}},e}(),getBBoxBoundLine=function(e,t){return{top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]}[t]},fractionAlongLineA=function(e,t){var n=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),r=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),i=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(i){var o=n/i,a=r/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},itemIntersectByLine=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),i=0,o=[],a=0;a<4;a++){var s=getBBoxBoundLine(r,n[a]),l=s[0],c=s[1],u=s[2],h=s[3];o[a]=getLineIntersect({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:l,y:c},{x:u,y:h}),o[a]&&(i+=1)}return[o,i]},fractionToLine=function(e,t){for(var n=["top","left","bottom","right"],r=e.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=getBBoxBoundLine(r,n[a]),l=s[0],c=s[1],u=s[2],h=s[3],d=fractionAlongLineA(t,new Line$4(l,c,u,h));(d=Math.abs(d-.5))>=0&&d<=1&&(o+=1,i=d<i?d:i)}return 0===o?-1:i},getPointsCenter=function(e){var t=0,n=0;if(e.length>0){for(var r=0,i=e;r<i.length;r++){var o=i[r];t+=o.x,n+=o.y}t/=e.length,n/=e.length}return{x:t,y:n}},squareDist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},pointLineSquareDist=function(e,t){var n,r=t.x1,i=t.y1,o=t.x2-r,a=t.y2-i,s=e.x-r,l=e.y-i,c=s*o+l*a;n=c<=0||(c=(s=o-s)*o+(l=a-l)*a)<=0?0:c*c/(o*o+a*a);var u=s*s+l*l-n;return u<0&&(u=0),u},isPointsOverlap=function(e,t,n){return void 0===n&&(n=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},pointRectSquareDist=function(e,t){var n=e.x<t.x,r=e.x>t.x+t.width,i=e.y>t.y+t.height,o=e.y<t.y;if(!(n||r||i||o))return 0;if(i&&!n&&!r)return Math.pow(t.y+t.height-e.y,2);if(o&&!n&&!r)return Math.pow(e.y-t.y,2);if(n&&!i&&!o)return Math.pow(t.x-e.x,2);if(r&&!i&&!o)return Math.pow(t.x+t.width-e.x,2);var a=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),s=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return a*a+s*s},pointLineDistance$1=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=t.x,s=t.y,l=[i-n,o-r];if(exactEquals(l,[0,0]))return NaN;var c=[-l[1],l[0]];normalize$1(c,c);var u=[a-n,s-r];return Math.abs(dot(u,c))},lerp=function(e,t,n){return e+(t-e)*n},lerpArray=function(e,t,n){for(var r=Math.min(e.length,t.length),i=new Array(r),o=0;o<r;o++)i[o]=lerp(e[o],t[o],n);return i};const MathUtil=Object.freeze(Object.defineProperty({__proto__:null,compare:compare,getLineIntersect:getLineIntersect,getRectIntersectByPoint:getRectIntersectByPoint,getCircleIntersectByPoint:getCircleIntersectByPoint,getEllipseIntersectByPoint:getEllipseIntersectByPoint,applyMatrix:applyMatrix$1,invertMatrix:invertMatrix,getCircleCenterByPoints:getCircleCenterByPoints,distance:distance$4,scaleMatrix:scaleMatrix,floydWarshall:floydWarshall$3,getAdjMatrix:getAdjMatrix,translate:translate,move:move,scale:scale,rotate:rotate$1,getDegree:getDegree,isPointInPolygon:isPointInPolygon,intersectBBox:intersectBBox,isPolygonsIntersect:isPolygonsIntersect$1,Line:Line$4,getBBoxBoundLine:getBBoxBoundLine,itemIntersectByLine:itemIntersectByLine,fractionToLine:fractionToLine,getPointsCenter:getPointsCenter,squareDist:squareDist,pointLineSquareDist:pointLineSquareDist,isPointsOverlap:isPointsOverlap,pointRectSquareDist:pointRectSquareDist,pointLineDistance:pointLineDistance$1,lerp:lerp,lerpArray:lerpArray},Symbol.toStringTag,{value:"Module"}));var subjectColor$1="rgb(95, 149, 255)",backColor$1="rgb(255, 255, 255)",textColor$1="rgb(0, 0, 0)",activeFill="rgb(247, 250, 255)",nodeMainFill="rgb(239, 244, 255)",comboFill="rgb(253, 253, 253)",disabledFill="rgb(250, 250, 250)",edgeMainStroke="rgb(224, 224, 224)",edgeInactiveStroke="rgb(234, 234, 234)",edgeDisablesStroke="rgb(245, 245, 245)",inactiveStroke="rgb(191, 213, 255)",highlightStroke="#4572d9",highlightFill="rgb(223, 234, 255)",colorSet$1={mainStroke:subjectColor$1,mainFill:nodeMainFill,activeStroke:subjectColor$1,activeFill:activeFill,inactiveStroke:inactiveStroke,inactiveFill:activeFill,selectedStroke:subjectColor$1,selectedFill:backColor$1,highlightStroke:highlightStroke,highlightFill:highlightFill,disableStroke:edgeMainStroke,disableFill:disabledFill,edgeMainStroke:edgeMainStroke,edgeActiveStroke:subjectColor$1,edgeInactiveStroke:edgeInactiveStroke,edgeSelectedStroke:subjectColor$1,edgeHighlightStroke:subjectColor$1,edgeDisableStroke:edgeDisablesStroke,comboMainStroke:edgeMainStroke,comboMainFill:comboFill,comboActiveStroke:subjectColor$1,comboActiveFill:activeFill,comboInactiveStroke:edgeMainStroke,comboInactiveFill:comboFill,comboSelectedStroke:subjectColor$1,comboSelectedFill:comboFill,comboHighlightStroke:highlightStroke,comboHighlightFill:comboFill,comboDisableStroke:edgeInactiveStroke,comboDisableFill:disabledFill};const Global$1={version:"0.8.2",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:colorSet$1.mainStroke,fill:nodeMainFill},size:20,color:colorSet$1.mainStroke,linkPoints:{size:8,lineWidth:1,fill:colorSet$1.activeFill,stroke:colorSet$1.activeStroke}},nodeStateStyles:{active:{fill:colorSet$1.activeFill,stroke:colorSet$1.activeStroke,lineWidth:2,shadowColor:colorSet$1.mainStroke,shadowBlur:10},selected:{fill:colorSet$1.selectedFill,stroke:colorSet$1.selectedStroke,lineWidth:4,shadowColor:colorSet$1.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:colorSet$1.highlightFill,stroke:colorSet$1.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:colorSet$1.inactiveFill,stroke:colorSet$1.inactiveStroke,lineWidth:1},disable:{fill:colorSet$1.disableFill,stroke:colorSet$1.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:textColor$1,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:colorSet$1.edgeMainStroke,lineAppendWidth:2},color:colorSet$1.edgeMainStroke},edgeStateStyles:{active:{stroke:colorSet$1.edgeActiveStroke,lineWidth:1},selected:{stroke:colorSet$1.edgeSelectedStroke,lineWidth:2,shadowColor:colorSet$1.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$1.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$1.edgeInactiveStroke,lineWidth:1},disable:{stroke:colorSet$1.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:textColor$1,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:colorSet$1.comboMainFill,lineWidth:1,stroke:colorSet$1.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:colorSet$1.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:colorSet$1.comboActiveStroke,lineWidth:1,fill:colorSet$1.comboActiveFill},selected:{stroke:colorSet$1.comboSelectedStroke,lineWidth:2,fill:colorSet$1.comboSelectedFill,shadowColor:colorSet$1.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet$1.comboHighlightStroke,lineWidth:2,fill:colorSet$1.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet$1.comboInactiveStroke,fill:colorSet$1.comboInactiveFill,lineWidth:1},disable:{stroke:colorSet$1.comboDisableStroke,fill:colorSet$1.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:"undefined"!=typeof window&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},letterAspectRatio={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875};var PI$1=Math.PI,sin$1=Math.sin,cos$1=Math.cos,SELF_LINK_SIN=sin$1(PI$1/8),SELF_LINK_COS=cos$1(PI$1/8),getBBox$1=function(e,t){var n=e.getBBox(),r={x:n.minX,y:n.minY},i={x:n.maxX,y:n.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),r=applyMatrix$1(r,o),i=applyMatrix$1(i,o)}var a=r.x,s=r.y,l=i.x,c=i.y;return{x:a,y:s,minX:a,minY:s,maxX:l,maxY:c,width:l-a,height:c-s}},getLoopCfgs=function(e){var t=e.sourceNode||e.targetNode,n=t.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var r=t.getKeyShape(),i=r.getBBox(),o=e.loopCfg||{},a=o.dist||2*Math.max(i.width,i.height),s=o.position||Global$1.defaultLoopPosition,l=[n[6],n[7]],c=[e.startPoint.x,e.startPoint.y],u=[e.endPoint.x,e.endPoint.y],h=i.height/2,d=i.width/2,f=h,p=h,g=f*SELF_LINK_SIN,m=f*SELF_LINK_COS,v=p*SELF_LINK_SIN,y=p*SELF_LINK_COS,b=r.get("type"),x=Math.min(h/2,d/2),w=Math.min(h,d),_=(null==o?void 0:o.pointPadding)?Math.min(w,null==o?void 0:o.pointPadding):x;if(c[0]===u[0]&&c[1]===u[1]){switch(s){case"top":"circle"===b?(c=[l[0]-g,l[1]-m],u=[l[0]+v,l[1]-y]):(c=[l[0]-_,l[1]-h],u=[l[0]+_,l[1]-h]);break;case"top-right":f=h,p=d,"circle"===b?(c=[l[0]+(g=f*SELF_LINK_SIN),l[1]-(m=f*SELF_LINK_COS)],u=[l[0]+(y=p*SELF_LINK_COS),l[1]-(v=p*SELF_LINK_SIN)]):(c=[l[0]+d-_,l[1]-h],u=[l[0]+d,l[1]-h+_]);break;case"right":f=d,p=d,"circle"===b?(c=[l[0]+(m=f*SELF_LINK_COS),l[1]-(g=f*SELF_LINK_SIN)],u=[l[0]+(y=p*SELF_LINK_COS),l[1]+(v=p*SELF_LINK_SIN)]):(c=[l[0]+d,l[1]-_],u=[l[0]+d,l[1]+_]);break;case"bottom-right":f=d,p=h,"circle"===b?(c=[l[0]+(m=f*SELF_LINK_COS),l[1]+(g=f*SELF_LINK_SIN)],u=[l[0]+(v=p*SELF_LINK_SIN),l[1]+(y=p*SELF_LINK_COS)]):(c=[l[0]+d,l[1]+h-_],u=[l[0]+d-_,l[1]+h]);break;case"bottom":f=h,p=h,"circle"===b?(c=[l[0]+(g=f*SELF_LINK_SIN),l[1]+(m=f*SELF_LINK_COS)],u=[l[0]-(v=p*SELF_LINK_SIN),l[1]+(y=p*SELF_LINK_COS)]):(c=[l[0]-_,l[1]+h],u=[l[0]+_,l[1]+h]);break;case"bottom-left":f=h,p=d,"circle"===b?(c=[l[0]-(g=f*SELF_LINK_SIN),l[1]+(m=f*SELF_LINK_COS)],u=[l[0]-(y=p*SELF_LINK_COS),l[1]+(v=p*SELF_LINK_SIN)]):(c=[l[0]-d,l[1]+h-_],u=[l[0]-d+_,l[1]+h]);break;case"left":f=d,p=d,"circle"===b?(c=[l[0]-(m=f*SELF_LINK_COS),l[1]+(g=f*SELF_LINK_SIN)],u=[l[0]-(y=p*SELF_LINK_COS),l[1]-(v=p*SELF_LINK_SIN)]):(c=[l[0]-d,l[1]-_],u=[l[0]-d,l[1]+_]);break;case"top-left":f=d,p=h,"circle"===b?(c=[l[0]-(m=f*SELF_LINK_COS),l[1]-(g=f*SELF_LINK_SIN)],u=[l[0]-(v=p*SELF_LINK_SIN),l[1]-(y=p*SELF_LINK_COS)]):(c=[l[0]-d+_,l[1]-h],u=[l[0]-d,l[1]-h+_]);break;default:c=[l[0]-(g=(f=d)*SELF_LINK_SIN),l[1]-(m=f*SELF_LINK_COS)],u=[l[0]+(v=(p=d)*SELF_LINK_SIN),l[1]-(y=p*SELF_LINK_COS)]}if(!1===o.clockwise){var C=[c[0],c[1]];c=[u[0],u[1]],u=[C[0],C[1]]}}var $=[c[0]-l[0],c[1]-l[1]],S=(f+a)/f,E=(p+a)/p;!1===o.clockwise&&(S=(p+a)/p,E=(f+a)/f);var A=scale$1([0,0],$,S),M=[l[0]+A[0],l[1]+A[1]],k=scale$1([0,0],[u[0]-l[0],u[1]-l[1]],E),T=[l[0]+k[0],l[1]+k[1]];return e.startPoint={x:c[0],y:c[1]},e.endPoint={x:u[0],y:u[1]},e.controlPoints=[{x:M[0],y:M[1]},{x:T[0],y:T[1]}],e},getLabelPosition=function(e,t,n,r,i){var o=1e-4,a=[],s=null==e?void 0:e.getPoint(t);if(!s)return{x:0,y:0,angle:0};if(t<o)a=e.getStartTangent().reverse();else if(t>.9999)a=e.getEndTangent();else{var l=null==e?void 0:e.getPoint(t+o);a.push([s.x,s.y]),a.push([l.x,l.y])}var c=Math.atan2(a[1][1]-a[0][1],a[1][0]-a[0][0]);if(c<0&&(c+=2*PI$1),n&&(s.x+=cos$1(c)*n,s.y+=sin$1(c)*n),r){var u=c-PI$1/2;c>.5*PI$1&&c<1.5*PI$1&&(u-=PI$1),s.x+=cos$1(u)*r,s.y+=sin$1(u)*r}var h={x:s.x,y:s.y,angle:c};return i?(c>.5*PI$1&&c<1.5*PI$1&&(c-=PI$1),__assign$h({rotate:c},h)):h},traverse=function e(t,n,r,i){if(!1===i(t,n,r))return!1;if(t&&t.children)for(var o=t.children.length-1;o>=0;o--)if(!e(t.children[o],t,o,i))return!1;return!0},traverseUp=function e(t,n,r,i){if(t&&t.children)for(var o=t.children.length-1;o>=0;o--)if(!e(t.children[o],t,o,i))return;return!1!==i(t,n,r)},traverseTree$2=function(e,t){"function"==typeof t&&traverse(e,null,-1,t)},traverseTreeUp=function(e,t){"function"==typeof t&&traverseUp(e,null,-1,t)},getLetterWidth=function(e,t){return t*(letterAspectRatio[e]||1)},getTextSize=function(e,t){var n=0,r=new RegExp("[-]+");return e.split("").forEach((function(e){r.test(e)?n+=t:n+=getLetterWidth(e,t)})),[n,t]},truncateLabelByLength=function(e,t){return"number"!=typeof t||t<=0||t>=e.length?e:e.substring(0,t)+"..."},plainCombosToTrees=function(e,t){var n=[],r={},i={};e.forEach((function(e){i[e.id]=e})),e.forEach((function(e,t){var o=clone$9(e);o.itemType="combo",o.children=void 0,(o.parentId===o.id||o.parentId&&!i[o.parentId])&&delete o.parentId;var a=r[o.id];if(a){if(o.children=a.children,r[o.id]=o,!(a=o).parentId)return void n.push(a);var s=r[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var l={id:a.parentId,children:[a]};r[a.parentId]=l,r[o.id]=o}}else if(isString$1(e.parentId)){var c=r[e.parentId];if(c)c.children?c.children.push(o):c.children=[o],r[o.id]=o;else{var u={id:e.parentId,children:[o]};r[u.id]=u,r[o.id]=o}}else n.push(o),r[o.id]=o}));var o={};(t||[]).forEach((function(e){o[e.id]=e;var t=r[e.comboId];if(t){var n={id:e.id,comboId:e.comboId};t.children?t.children.push(n):t.children=[n],n.itemType="node",r[e.id]=n}}));var a=0;return n.forEach((function(e){e.depth=a+10,traverseTree$2(e,(function(e){var t,n=r[e.id].itemType;t="node"===n?r[e.comboId]:r[e.parentId],e.depth=t&&"node"===n?a+1:a+10,a<e.depth&&(a=e.depth);var i=o[e.id];return i&&(i.depth=e.depth),!0}))})),n},reconstructTree=function(e,t,n){var r,i,o=e,a={root:{children:e}},s=!1,l="root";(e||[]).forEach((function(e){if(!s)return e.id===t?(i=e,"combo"===e.itemType?i.parentId=n:i.comboId=n,void(s=!0)):void traverseTree$2(e,(function(e){var r;return a[e.id]={children:(null==e?void 0:e.children)||[]},o=null===(r=a[e.parentId||e.comboId||"root"])||void 0===r?void 0:r.children,!e||!e.removed&&t!==e.id||!o||(l=e.parentId||e.comboId||"root",i=e,"combo"===e.itemType?i.parentId=n:i.comboId=n,s=!0,!1)}))}));var c=(o=null===(r=a[l])||void 0===r?void 0:r.children)?o.indexOf(i):-1;if(c>-1&&o.splice(c,1),s||(i={id:t,itemType:"node",comboId:n},a[t]={children:void 0}),t){var u=!1;if(n){var h=0;(e||[]).forEach((function(e){u||traverseTree$2(e,(function(e){return n!==e.id||(u=!0,e.children?e.children.push(i):e.children=[i],h=e.depth,"node"===i.itemType?i.depth=h+2:i.depth=h+1,!1)}))}))}else n&&u||"node"===i.itemType||e.push(i);var d=i.depth;traverseTree$2(i,(function(e){return"node"===e.itemType?d+=2:d+=1,e.depth=d,!0}))}return e},getComboBBox=function(e,t,n){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||0===e.length){var i=(null==n?void 0:n.getModel())||{},o=i.x,a=i.y,s=i.fixSize,l=i.collapsed,c=i.fixCollapseSize,u=l?c:s,h=isArray$1(u)?u:[u,u],d=h[0],f=h[1],p=[d/2,f/2];return{minX:o-p[0],minY:a-p[1],maxX:o+p[0],maxY:a+p[1],x:o,y:a,width:d,height:f}}return e.forEach((function(e){var n=t.findById(e.id);if(n&&n.isVisible()){n.set("bboxCanvasCache",void 0);var i=n.getCanvasBBox();i.x&&r.minX>i.minX&&(r.minX=i.minX),i.y&&r.minY>i.minY&&(r.minY=i.minY),i.x&&r.maxX<i.maxX&&(r.maxX=i.maxX),i.y&&r.maxY<i.maxY&&(r.maxY=i.maxY)}})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,"circle"===(null==n?void 0:n.getKeyShape().get("type"))&&(r.width=Math.hypot(r.height,r.width),r.height=r.width),Object.keys(r).forEach((function(e){r[e]!==1/0&&r[e]!==-1/0||(r[e]=void 0)})),r},shouldRefreshEdge=function(e){var t=isNumber$1(e.x)||isNumber$1(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||isNumber$1(e.style.r)||isNumber$1(e.style.width)||isNumber$1(e.style.height)||isNumber$1(e.style.rx)||isNumber$1(e.style.ry)),t},cloneBesidesImg=function(e){var t={};return Object.keys(e).forEach((function(n){var r=e[n];if(isObject(r)&&!isArray$1(r)){var i={};Object.keys(r).forEach((function(e){var t=r[e];("img"!==e||isString$1(t))&&(i[e]=clone$9(t))})),t[n]=i}else t[n]=clone$9(r)})),t},getAnimateCfgWithCallback=function(e){var t,n=e.animateCfg,r=e.callback;if(n)if(t=clone$9(n),n.callback){var i=n.callback;t.callback=function(){r(),i()}}else t.callback=r;else t={duration:500,callback:r};return t};const GraphicUtil=Object.freeze(Object.defineProperty({__proto__:null,getBBox:getBBox$1,getLoopCfgs:getLoopCfgs,getLabelPosition:getLabelPosition,traverseTree:traverseTree$2,traverseTreeUp:traverseTreeUp,getLetterWidth:getLetterWidth,getTextSize:getTextSize,truncateLabelByLength:truncateLabelByLength,plainCombosToTrees:plainCombosToTrees,reconstructTree:reconstructTree,getComboBBox:getComboBBox,shouldRefreshEdge:shouldRefreshEdge,cloneBesidesImg:cloneBesidesImg,getAnimateCfgWithCallback:getAnimateCfgWithCallback},Symbol.toStringTag,{value:"Module"}));var dataValidation=function(e){if(!e)return!1;var t=e.nodes,n=e.edges,r=e.combos,i=void 0===r?[]:r;if(!t&&!n){var o=!0;return traverseTree$2(e,(function(e){return!!isString$1(e.id)||(o=!1,!1)})),o}if((t||[]).find((function(e){return!isString$1(e.id)})))return!1;var a=(t||[]).map((function(e){return e.id})),s=null==i?void 0:i.map((function(e){return e.id})),l=__spreadArray$4(__spreadArray$4([],a,!0),s,!0);return!(n||[]).find((function(e){return!l.includes(e.source)||!l.includes(e.target)}))},singleDataValidation=function(e,t){if("node"===e||"combo"===e){if(t.id&&!isString$1(t.id))return!1}else if(!("edge"!==e||t.source&&t.target))return!1;return!0},ModeController=function(){function e(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return e.prototype.formatModes=function(){each(this.modes,(function(e){each(e,(function(t,n){isString$1(t)&&(e[n]={type:t})}))}))},e.prototype.setBehaviors=function(e){var t,n=this.graph,r=this.modes[e],i=[];each(r||[],(function(e){var r=Behavior.getBehavior(e.type||e);r&&(t=new r(e))&&(t.bind(n),i.push(t))})),this.currentBehaves=i},e.mergeBehaviors=function(e,t){return each(t,(function(t){e.indexOf(t)<0&&(isString$1(t)&&(t={type:t}),e.push(t))})),e},e.filterBehaviors=function(e,t){var n=[];return e.forEach((function(e){var r="";r=isString$1(e)?e:e.type,t.indexOf(r)<0&&n.push(e)})),n},e.prototype.setMode=function(e){var t=this.modes,n=this.graph,r=e;t[r]&&(n.emit("beforemodechange",{mode:e}),each(this.currentBehaves,(function(e){e.delegate&&e.delegate.remove(),e.unbind(n)})),this.setBehaviors(r),n.emit("aftermodechange",{mode:e}),this.mode=e)},e.prototype.getMode=function(){return this.mode},e.prototype.manipulateBehaviors=function(t,n,r){var i,o=this;if(i=isArray$1(t)?t:[t],isArray$1(n))return each(n,(function(t){o.modes[t]?o.modes[t]=r?e.mergeBehaviors(o.modes[t]||[],i):e.filterBehaviors(o.modes[t]||[],i):r&&(o.modes[t]=i)})),this;var a=n;return n||(a=this.mode),this.modes[a]||r&&(this.modes[a]=i),this.modes[a]=r?e.mergeBehaviors(this.modes[a]||[],i):e.filterBehaviors(this.modes[a]||[],i),this.formatModes(),this.setMode(this.mode),this},e.prototype.updateBehavior=function(e,t,n){isString$1(e)&&(e={type:e});var r=[];if(n&&n!==this.mode&&"default"!==n){if(!(r=this.modes[n])||!r.length)return this;var i=r.length;for(a=0;a<i;a++){if((s=r[a]).type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),r[a]=s,this}}else{if(!(r=this.currentBehaves)||!r.length)return this;for(var o=r.length,a=0;a<o;a++){var s;if((s=r[a]).type===e.type)return s.updateCfg(t),this}}return this},e.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},e}(),SPACES$1="\t\n\v\f\r \u2028\u2029",PATH_COMMAND$1=new RegExp("([a-z])["+SPACES$1+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES$1+"]*,?["+SPACES$1+"]*)+)","ig"),PATH_VALUES$1=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES$1+"]*,?["+SPACES$1+"]*","ig"),parsePathString$1=function(e){if(!e)return null;if(isArray$1(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(PATH_COMMAND$1,(function(r,i,o){var a=[],s=i.toLowerCase();if(o.replace(PATH_VALUES$1,(function(e,t){t&&a.push(+t)})),"m"===s&&a.length>2&&(n.push([i].concat(a.splice(0,2))),s="l",i="m"===i?"l":"L"),"o"===s&&1===a.length&&n.push([i,a[0]]),"r"===s)n.push([i].concat(a));else for(;a.length>=t[s]&&(n.push([i].concat(a.splice(0,t[s]))),t[s]););return e})),n},catmullRomToBezier=function(e,t){for(var n=[],r=0,i=e.length;i-2*!t>r;r+=2){var o=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4===r?o[3]={x:+e[0],y:+e[1]}:i-2===r&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4===r?o[3]=o[2]:r||(o[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n},ellipsePath=function(e,t,n,r,i){var o=[];if(null===i&&null===r&&(r=n),e=+e,t=+t,n=+n,r=+r,null!==i){var a=Math.PI/180,s=e+n*Math.cos(-r*a),l=e+n*Math.cos(-i*a);o=[["M",s,t+n*Math.sin(-r*a)],["A",n,n,0,+(i-r>180),0,l,t+n*Math.sin(-i*a)]]}else o=[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return o},pathToAbsolute$1=function(e){if(!(e=parsePathString$1(e))||!e.length)return[["M",0,0]];var t,n,r=[],i=0,o=0,a=0,s=0,l=0;"M"===e[0][0]&&(a=i=+e[0][1],s=o=+e[0][2],l++,r[0]=["M",i,o]);for(var c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),u=void 0,h=void 0,d=l,f=e.length;d<f;d++){if(r.push(u=[]),(t=(h=e[d])[0])!==t.toUpperCase())switch(u[0]=t.toUpperCase(),u[0]){case"A":u[1]=h[1],u[2]=h[2],u[3]=h[3],u[4]=h[4],u[5]=h[5],u[6]=+h[6]+i,u[7]=+h[7]+o;break;case"V":u[1]=+h[1]+o;break;case"H":u[1]=+h[1]+i;break;case"R":for(var p=2,g=(n=[i,o].concat(h.slice(1))).length;p<g;p++)n[p]=+n[p]+i,n[++p]=+n[p]+o;r.pop(),r=r.concat(catmullRomToBezier(n,c));break;case"O":r.pop(),(n=ellipsePath(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(ellipsePath(i,o,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));break;case"M":a=+h[1]+i,s=+h[2]+o;break;default:for(p=1,g=h.length;p<g;p++)u[p]=+h[p]+(p%2?i:o)}else if("R"===t)n=[i,o].concat(h.slice(1)),r.pop(),r=r.concat(catmullRomToBezier(n,c)),u=["R"].concat(h.slice(-2));else if("O"===t)r.pop(),(n=ellipsePath(i,o,h[1],h[2])).push(n[0]),r=r.concat(n);else if("U"===t)r.pop(),r=r.concat(ellipsePath(i,o,h[1],h[2],h[3])),u=["U"].concat(r[r.length-1].slice(-2));else for(var m=0,v=h.length;m<v;m++)u[m]=h[m];if("O"!==(t=t.toUpperCase()))switch(u[0]){case"Z":i=+a,o=+s;break;case"H":i=u[1];break;case"V":o=u[1];break;case"M":a=u[u.length-2],s=u[u.length-1];break;default:i=u[u.length-2],o=u[u.length-1]}}return r},l2c=function(e,t,n,r){return[e,t,n,r,n,r]},q2c=function(e,t,n,r,i,o){var a=1/3,s=2/3;return[a*e+s*n,a*t+s*r,a*i+s*n,a*o+s*r,i,o]},a2c=function(e,t,n,r,i,o,a,s,l,c){n===r&&(n+=1);var u,h,d,f,p,g=120*Math.PI/180,m=Math.PI/180*(+i||0),v=[],y=function(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}};if(c)h=c[0],d=c[1],f=c[2],p=c[3];else{e=(u=y(e,t,-m)).x,t=u.y,s=(u=y(s,l,-m)).x,l=u.y,e===s&&t===l&&(s+=1,l+=1);var b=(e-s)/2,x=(t-l)/2,w=b*b/(n*n)+x*x/(r*r);w>1&&(n*=w=Math.sqrt(w),r*=w);var _=n*n,C=r*r,$=(o===a?-1:1)*Math.sqrt(Math.abs((_*C-_*x*x-C*b*b)/(_*x*x+C*b*b)));f=$*n*x/r+(e+s)/2,p=$*-r*b/n+(t+l)/2,h=Math.asin(((t-p)/r).toFixed(9)),d=Math.asin(((l-p)/r).toFixed(9)),h=e<f?Math.PI-h:h,d=s<f?Math.PI-d:d,h<0&&(h=2*Math.PI+h),d<0&&(d=2*Math.PI+d),a&&h>d&&(h-=2*Math.PI),!a&&d>h&&(d-=2*Math.PI)}var S=d-h;if(Math.abs(S)>g){var E=d,A=s,M=l;d=h+g*(a&&d>h?1:-1),s=f+n*Math.cos(d),l=p+r*Math.sin(d),v=a2c(s,l,n,r,i,0,a,A,M,[d,E,f,p])}S=d-h;var k=Math.cos(h),T=Math.sin(h),P=Math.cos(d),O=Math.sin(d),N=Math.tan(S/4),I=4/3*n*N,D=4/3*r*N,L=[e,t],R=[e+I*T,t-D*k],B=[s+I*O,l-D*P],j=[s,l];if(R[0]=2*L[0]-R[0],R[1]=2*L[1]-R[1],c)return[R,B,j].concat(v);for(var F=[],G=0,V=(v=[R,B,j].concat(v).join().split(",")).length;G<V;G++)F[G]=G%2?y(v[G-1],v[G],m).y:y(v[G],v[G+1],m).x;return F},pathToCurve=function(e,t){var n,r=pathToAbsolute$1(e),i=t&&pathToAbsolute$1(t),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],l=[],c="",u="",h=function(e,t,n){var r,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(a2c.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*t.x-t.bx,i=2*t.y-t.by):(r=t.x,i=t.y),e=["C",r,i].concat(e.slice(1));break;case"T":"Q"===n||"T"===n?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(q2c(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(q2c(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(l2c(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(l2c(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(l2c(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(l2c(t.x,t.y,t.X,t.Y))}return e},d=function(e,t){if(e[t].length>7){e[t].shift();for(var o=e[t];o.length;)s[t]="A",i&&(l[t]="A"),e.splice(t++,0,["C"].concat(o.splice(0,6)));e.splice(t,1),n=Math.max(r.length,i&&i.length||0)}},f=function(e,t,o,a,s){e&&t&&"M"===e[s][0]&&"M"!==t[s][0]&&(t.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=e[s][1],o.y=e[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var p=0;p<n;p++){r[p]&&(c=r[p][0]),"C"!==c&&(s[p]=c,p&&(u=s[p-1])),r[p]=h(r[p],o,u),"A"!==s[p]&&"C"===c&&(s[p]="C"),d(r,p),i&&(i[p]&&(c=i[p][0]),"C"!==c&&(l[p]=c,p&&(u=l[p-1])),i[p]=h(i[p],a,u),"A"!==l[p]&&"C"===c&&(l[p]="C"),d(i,p)),f(r,i,o,a,p),f(i,r,a,o,p);var g=r[p],m=i&&i[p],v=g.length,y=i&&m.length;o.x=g[v-2],o.y=g[v-1],o.bx=parseFloat(g[v-4])||o.x,o.by=parseFloat(g[v-3])||o.y,a.bx=i&&(parseFloat(m[y-4])||a.x),a.by=i&&(parseFloat(m[y-3])||a.y),a.x=i&&m[y-2],a.y=i&&m[y-1]}return i?[r,i]:r},p2s=/,?([a-z]),?/gi,parsePathArray=function(e){return e.join(",").replace(p2s,"$1")},base3=function(e,t,n,r,i){return e*(e*(-3*t+9*n-9*r+3*i)+6*t-12*n+6*r)-3*t+3*n},bezlen=function(e,t,n,r,i,o,a,s,l){null===l&&(l=1);for(var c=(l=l>1?1:l<0?0:l)/2,u=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,f=0;f<12;f++){var p=c*u[f]+c,g=base3(p,e,n,i,a),m=base3(p,t,r,o,s),v=g*g+m*m;d+=h[f]*Math.sqrt(v)}return c*d},curveDim=function(e,t,n,r,i,o,a,s){for(var l,c,u,h,d=[],f=[[],[]],p=0;p<2;++p)if(0===p?(c=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*a,u=3*n-3*e):(c=6*t-12*r+6*o,l=-3*t+9*r-9*o+3*s,u=3*r-3*t),Math.abs(l)<1e-12){if(Math.abs(c)<1e-12)continue;(h=-u/c)>0&&h<1&&d.push(h)}else{var g=c*c-4*u*l,m=Math.sqrt(g);if(!(g<0)){var v=(-c+m)/(2*l);v>0&&v<1&&d.push(v);var y=(-c-m)/(2*l);y>0&&y<1&&d.push(y)}}for(var b,x=d.length,w=x;x--;)b=1-(h=d[x]),f[0][x]=b*b*b*e+3*b*b*h*n+3*b*h*h*i+h*h*h*a,f[1][x]=b*b*b*t+3*b*b*h*r+3*b*h*h*o+h*h*h*s;return f[0][w]=e,f[1][w]=t,f[0][w+1]=a,f[1][w+1]=s,f[0].length=f[1].length=w+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},intersect=function(e,t,n,r,i,o,a,s){if(!(Math.max(e,n)<Math.min(i,a)||Math.min(e,n)>Math.max(i,a)||Math.max(t,r)<Math.min(o,s)||Math.min(t,r)>Math.max(o,s))){var l=(e-n)*(o-s)-(t-r)*(i-a);if(l){var c=((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,u=((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l,h=+c.toFixed(2),d=+u.toFixed(2);if(!(h<+Math.min(e,n).toFixed(2)||h>+Math.max(e,n).toFixed(2)||h<+Math.min(i,a).toFixed(2)||h>+Math.max(i,a).toFixed(2)||d<+Math.min(t,r).toFixed(2)||d>+Math.max(t,r).toFixed(2)||d<+Math.min(o,s).toFixed(2)||d>+Math.max(o,s).toFixed(2)))return{x:c,y:u}}}},isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height},rectPath=function(e,t,n,r,i){if(i)return[["M",+e+ +i,t],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]];return o.parsePathArray=parsePathArray,o},box=function(e,t,n,r){return null===e&&(e=t=n=r=0),null===t&&(t=e.y,n=e.width,r=e.height,e=e.x),{x:e,y:t,width:n,w:n,height:r,h:r,x2:e+n,y2:t+r,cx:e+n/2,cy:t+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:rectPath(e,t,n,r),vb:[e,t,n,r].join(" ")}},isBBoxIntersect=function(e,t){return e=box(e),t=box(t),isPointInsideBBox(t,e.x,e.y)||isPointInsideBBox(t,e.x2,e.y)||isPointInsideBBox(t,e.x,e.y2)||isPointInsideBBox(t,e.x2,e.y2)||isPointInsideBBox(e,t.x,t.y)||isPointInsideBBox(e,t.x2,t.y)||isPointInsideBBox(e,t.x,t.y2)||isPointInsideBBox(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},bezierBBox=function(e,t,n,r,i,o,a,s){isArray$1(e)||(e=[e,t,n,r,i,o,a,s]);var l=curveDim.apply(null,e);return box(l.min.x,l.min.y,l.max.x-l.min.x,l.max.y-l.min.y)},findDotsAtSegment=function(e,t,n,r,i,o,a,s,l){var c=1-l,u=Math.pow(c,3),h=Math.pow(c,2),d=l*l,f=d*l,p=e+2*l*(n-e)+d*(i-2*n+e),g=t+2*l*(r-t)+d*(o-2*r+t),m=n+2*l*(i-n)+d*(a-2*i+n),v=r+2*l*(o-r)+d*(s-2*o+r);return{x:u*e+3*h*l*n+3*c*l*l*i+f*a,y:u*t+3*h*l*r+3*c*l*l*o+f*s,m:{x:p,y:g},n:{x:m,y:v},start:{x:c*e+l*n,y:c*t+l*r},end:{x:c*i+l*a,y:c*o+l*s},alpha:90-180*Math.atan2(p-m,g-v)/Math.PI}},interHelper=function(e,t,n){var r=bezierBBox(e),i=bezierBBox(t);if(!isBBoxIntersect(r,i))return n?0:[];for(var o=~~(bezlen.apply(0,e)/8),a=~~(bezlen.apply(0,t)/8),s=[],l=[],c={},u=n?0:[],h=0;h<o+1;h++){var d=findDotsAtSegment.apply(0,e.concat(h/o));s.push({x:d.x,y:d.y,t:h/o})}for(h=0;h<a+1;h++){d=findDotsAtSegment.apply(0,t.concat(h/a));l.push({x:d.x,y:d.y,t:h/a})}for(h=0;h<o;h++)for(var f=0;f<a;f++){var p=s[h],g=s[h+1],m=l[f],v=l[f+1],y=Math.abs(g.x-p.x)<.001?"y":"x",b=Math.abs(v.x-m.x)<.001?"y":"x",x=intersect(p.x,p.y,g.x,g.y,m.x,m.y,v.x,v.y);if(x){if(c[x.x.toFixed(4)]===x.y.toFixed(4))continue;c[x.x.toFixed(4)]=x.y.toFixed(4);var w=p.t+Math.abs((x[y]-p[y])/(g[y]-p[y]))*(g.t-p.t),_=m.t+Math.abs((x[b]-m[b])/(v[b]-m[b]))*(v.t-m.t);w>=0&&w<=1&&_>=0&&_<=1&&(n?u+=1:u.push({x:x.x,y:x.y,t1:w,t2:_}))}}return u},interPathHelper=function(e,t,n){var r,i,o,a,s,l,c,u,h,d;e=pathToCurve(e),t=pathToCurve(t);for(var f=n?0:[],p=0,g=e.length;p<g;p++){var m=e[p];if("M"===m[0])r=s=m[1],i=l=m[2];else{"C"===m[0]?(h=[r,i].concat(m.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,s,l,s,l],r=s,i=l);for(var v=0,y=t.length;v<y;v++){var b=t[v];if("M"===b[0])o=c=b[1],a=u=b[2];else{"C"===b[0]?(d=[o,a].concat(b.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,c,u,c,u],o=c,a=u);var x=interHelper(h,d,n);if(n)f+=x;else{for(var w=0,_=x.length;w<_;w++)x[w].segment1=p,x[w].segment2=v,x[w].bez1=h,x[w].bez2=d;f=f.concat(x)}}}}}return f},intersection=function(e,t){return interPathHelper(e,t)};function decasteljau(e,t){var n=[],r=[];return e.length&&function e(t,i){if(1===t.length)n.push(t[0]),r.push(t[0]);else{for(var o=[],a=0;a<t.length-1;a++)0===a&&n.push(t[0]),a===t.length-2&&r.push(t[a+1]),o[a]=[(1-i)*t[a][0]+i*t[a+1][0],(1-i)*t[a][1]+i*t[a+1][1]];e(o,i)}}(e,t),{left:n,right:r.reverse()}}function splitCurve(e,t,n){var r=[[e[1],e[2]]];n=n||2;var i=[];"A"===t[0]?(r.push(t[6]),r.push(t[7])):"C"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]]),r.push([t[5],t[6]])):"S"===t[0]||"Q"===t[0]?(r.push([t[1],t[2]]),r.push([t[3],t[4]])):r.push([t[1],t[2]]);for(var o=r,a=1/n,s=0;s<n-1;s++){var l=decasteljau(o,a/(1-a*s));i.push(l.left),o=l.right}return i.push(o),i.map((function(e){var t=[];return 4===e.length&&(t.push("C"),t=t.concat(e[2])),e.length>=3&&(3===e.length&&t.push("Q"),t=t.concat(e[1])),2===e.length&&t.push("L"),t=t.concat(e[e.length-1])}))}var splitSegment=function(e,t,n){if(1===n)return[[].concat(e)];var r=[];if("L"===t[0]||"C"===t[0]||"Q"===t[0])r=r.concat(splitCurve(e,t,n));else{var i=[].concat(e);"M"===i[0]&&(i[0]="L");for(var o=0;o<=n-1;o++)r.push(i)}return r},fillPath=function(e,t){if(1===e.length)return e;var n=e.length-1,r=t.length-1,i=n/r,o=[];if(1===e.length&&"M"===e[0][0]){for(var a=0;a<r-n;a++)e.push(e[0]);return e}for(a=0;a<r;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var l=o.reduce((function(t,r,i){return i===n?t.concat(e[n]):t.concat(splitSegment(e[i],e[i+1],r))}),[]);return l.unshift(e[0]),"Z"!==t[r]&&"z"!==t[r]||l.push("Z"),l},isEqual=function(e,t){if(e.length!==t.length)return!1;var n=!0;return each(e,(function(e,r){if(e!==t[r])return n=!1,!1})),n};function getMinDiff(e,t,n){var r=null,i=n;return t<i&&(i=t,r="add"),e<i&&(i=e,r="del"),{type:r,min:i}}var levenshteinDistance=function(e,t){var n,r,i=e.length,o=t.length,a=0;if(0===i||0===o)return null;for(var s=[],l=0;l<=i;l++)s[l]=[],s[l][0]={min:l};for(var c=0;c<=o;c++)s[0][c]={min:c};for(l=1;l<=i;l++){n=e[l-1];for(c=1;c<=o;c++){r=t[c-1],a=isEqual(n,r)?0:1;var u=s[l-1][c].min+1,h=s[l][c-1].min+1,d=s[l-1][c-1].min+a;s[l][c]=getMinDiff(u,h,d)}}return s},fillPathByDiff=function(e,t){var n=levenshteinDistance(e,t),r=e.length,i=t.length,o=[],a=1,s=1;if(n[r][i].min!==r){for(var l=1;l<=r;l++){var c=n[l][l].min;s=l;for(var u=a;u<=i;u++)n[l][u].min<c&&(c=n[l][u].min,s=u);a=s,n[l][a].type&&o.push({index:l-1,type:n[l][a].type})}for(l=o.length-1;l>=0;l--)a=o[l].index,"add"===o[l].type?e.splice(a,0,[].concat(e[a])):e.splice(a,1)}var h=i-(r=e.length);if(r<i)for(l=0;l<h;l++)"z"===e[r-1][0]||"Z"===e[r-1][0]?e.splice(r-2,0,e[r-2]):e.push(e[r-1]),r+=1;return e};function _splitPoints(e,t,n){for(var r,i=[].concat(e),o=1/(n+1),a=_getSegmentPoints(t)[0],s=1;s<=n;s++)o*=s,0===(r=Math.floor(e.length*o))?i.unshift([a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]):i.splice(r,0,[a[0]*o+e[r][0]*(1-o),a[1]*o+e[r][1]*(1-o)]);return i}function _getSegmentPoints(e){var t=[];switch(e[0]){case"M":case"L":case"T":t.push([e[1],e[2]]);break;case"A":t.push([e[6],e[7]]);break;case"Q":case"S":t.push([e[3],e[4]]),t.push([e[1],e[2]]);break;case"C":t.push([e[5],e[6]]),t.push([e[1],e[2]]),t.push([e[3],e[4]]);break;case"H":case"V":t.push([e[1],e[1]])}return t}var formatPath=function(e,t){if(e.length<=1)return e;for(var n,r=0;r<t.length;r++)if(e[r][0]!==t[r][0])switch(n=_getSegmentPoints(e[r]),t[r][0]){case"M":e[r]=["M"].concat(n[0]);break;case"L":e[r]=["L"].concat(n[0]);break;case"A":e[r]=[].concat(t[r]),e[r][6]=n[0][0],e[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=_splitPoints(n,e[r-1],1)}e[r]=["Q"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"T":e[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){e[r]=t[r];break}n=_splitPoints(n,e[r-1],2)}e[r]=["C"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;case"S":if(n.length<2){if(!(r>0)){e[r]=t[r];break}n=_splitPoints(n,e[r-1],1)}e[r]=["S"].concat(n.reduce((function(e,t){return e.concat(t)}),[]));break;default:e[r]=t[r]}return e};const PathUtil$2=Object.freeze(Object.defineProperty({__proto__:null,catmullRomToBezier:catmullRomToBezier,fillPath:fillPath,fillPathByDiff:fillPathByDiff,formatPath:formatPath,intersection:intersection,parsePathArray:parsePathArray,parsePathString:parsePathString$1,pathToAbsolute:pathToAbsolute$1,pathToCurve:pathToCurve,rectPath:rectPath},Symbol.toStringTag,{value:"Module"}));var GraphEvent=function(){function e(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return e.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e.prototype.toString=function(){return"[Event (type="+this.type+")]"},e.prototype.save=function(){},e.prototype.restore=function(){},e}();function removeFromArray(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}var isBrowser="undefined"!=typeof window&&void 0!==window.document;function isParent(e,t){if(e.isCanvas())return!0;for(var n=t.getParent(),r=!1;n;){if(n===e){r=!0;break}n=n.getParent()}return r}function isAllowCapture(e){return e.cfg.visible&&e.cfg.capture}var Base$1=function(e){function t(t){var n=e.call(this)||this;n.destroyed=!1;var r=n.getDefaultCfg();return n.cfg=mix(r,t),n}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.get=function(e){return this.cfg[e]},t.prototype.set=function(e,t){this.cfg[e]=t},t.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},t}(EventEmitter),__spreadArray$3=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},BrowserInfo=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},NodeInfo=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform},SearchBotDeviceInfo=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},BotInfo=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},ReactNativeInfo=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(e){return e?parseUserAgent(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new ReactNativeInfo:"undefined"!=typeof navigator?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(e){return""!==e&&userAgentRules.reduce((function(t,n){var r=n[0],i=n[1];if(t)return t;var o=i.exec(e);return!!o&&[r,o]}),!1)}function parseUserAgent(e){var t=matchUserAgent(e);if(!t)return null;var n=t[0],r=t[1];if("searchbot"===n)return new BotInfo;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<REQUIRED_VERSION_PARTS&&(i=__spreadArray$3(__spreadArray$3([],i,!0),createVersionParts(REQUIRED_VERSION_PARTS-i.length),!0)):i=[];var o=i.join("."),a=detectOS(e),s=SEARCHBOT_OS_REGEX.exec(e);return s&&s[1]?new SearchBotDeviceInfo(n,o,a,s[1]):new BrowserInfo(n,o,a)}function detectOS(e){for(var t=0,n=operatingSystemRules.length;t<n;t++){var r=operatingSystemRules[t],i=r[0];if(r[1].exec(e))return i}return null}function getNodeVersion(){return"undefined"!=typeof process&&process.version?new NodeInfo(process.version.slice(1)):null}function createVersionParts(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}function multiplyMatrix(e,t){var n=[],r=e[0],i=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=t[0],f=t[1],p=t[2],g=t[3],m=t[4],v=t[5],y=t[6],b=t[7],x=t[8];return n[0]=d*r+f*a+p*c,n[1]=d*i+f*s+p*u,n[2]=d*o+f*l+p*h,n[3]=g*r+m*a+v*c,n[4]=g*i+m*s+v*u,n[5]=g*o+m*l+v*h,n[6]=y*r+b*a+x*c,n[7]=y*i+b*s+x*u,n[8]=y*o+b*l+x*h,n}function multiplyVec2(e,t){var n=[],r=t[0],i=t[1];return n[0]=e[0]*r+e[3]*i+e[6],n[1]=e[1]*r+e[4]*i+e[7],n}function invert(e){var t=[],n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*a-s*c,d=-u*o+s*l,f=c*o-a*l,p=n*h+r*d+i*f;return p?(p=1/p,t[0]=h*p,t[1]=(-u*r+i*c)*p,t[2]=(s*r-i*a)*p,t[3]=d*p,t[4]=(u*n-i*l)*p,t[5]=(-s*n+i*o)*p,t[6]=f*p,t[7]=(-c*n+r*l)*p,t[8]=(a*n-r*o)*p,t):null}var transform$b=transform$d,MATRIX="matrix",CLONE_CFGS=["zIndex","capture","visible","type"],RESERVED_PORPS=["repeat"],DELEGATION_SPLIT=":",WILDCARD="*";function _cloneArrayAttr(e){for(var t=[],n=0;n<e.length;n++)isArray$1(e[n])?t.push([].concat(e[n])):t.push(e[n]);return t}function getFormatFromAttrs(e,t){var n={},r=t.attrs;for(var i in e)n[i]=r[i];return n}function getFormatToAttrs(e,t){var n={},r=t.attr();return each(e,(function(e,t){-1!==RESERVED_PORPS.indexOf(t)||isEqual$1(r[t],e)||(n[t]=e)})),n}function checkExistedAttrs(e,t){if(t.onFrame)return e;var n=t.startTime,r=t.delay,i=t.duration,o=Object.prototype.hasOwnProperty;return each(e,(function(e){n+r<e.startTime+e.delay+e.duration&&i>e.delay&&each(t.toAttrs,(function(t,n){o.call(e.toAttrs,n)&&(delete e.toAttrs[n],delete e.fromAttrs[n])}))})),e}var Element$1=function(e){function t(t){var n=e.call(this,t)||this;n.attrs={};var r=n.getDefaultAttrs();return mix(r,t.attrs),n.attrs=r,n.initAttrs(r),n.initAnimate(),n}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},t.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},t.prototype.onCanvasChange=function(e){},t.prototype.initAttrs=function(e){},t.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},t.prototype.isGroup=function(){return!1},t.prototype.getParent=function(){return this.get("parent")},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.attr=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0],i=t[1];if(!r)return this.attrs;if(isObject(r)){for(var o in r)this.setAttr(o,r[o]);return this.afterAttrsChange(r),this}return 2===t.length?(this.setAttr(r,i),this.afterAttrsChange(((e={})[r]=i,e)),this):this.attrs[r]},t.prototype.isClipped=function(e,t){var n=this.getClip();return n&&!n.isHit(e,t)},t.prototype.setAttr=function(e,t){var n=this.attrs[e];n!==t&&(this.attrs[e]=t,this.onAttrChange(e,t,n))},t.prototype.onAttrChange=function(e,t,n){"matrix"===e&&this.set("totalMatrix",null)},t.prototype.afterAttrsChange=function(e){if(this.cfg.isClipShape){var t=this.cfg.applyTo;t&&t.onCanvasChange("clip")}else this.onCanvasChange("attr")},t.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},t.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},t.prototype.setZIndex=function(e){this.set("zIndex",e);var t=this.getParent();return t&&t.sort(),this},t.prototype.toFront=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.push(this),this.onCanvasChange("zIndex")}},t.prototype.toBack=function(){var e=this.getParent();if(e){var t=e.getChildren();this.get("el");var n=t.indexOf(this);t.splice(n,1),t.unshift(this),this.onCanvasChange("zIndex")}},t.prototype.remove=function(e){void 0===e&&(e=!0);var t=this.getParent();t?(removeFromArray(t.getChildren(),this),t.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),e&&this.destroy()},t.prototype.resetMatrix=function(){this.attr(MATRIX,this.getDefaultMatrix()),this.onCanvasChange("matrix")},t.prototype.getMatrix=function(){return this.attr(MATRIX)},t.prototype.setMatrix=function(e){this.attr(MATRIX,e),this.onCanvasChange("matrix")},t.prototype.getTotalMatrix=function(){var e=this.cfg.totalMatrix;if(!e){var t=this.attr("matrix"),n=this.cfg.parentMatrix;e=n&&t?multiplyMatrix(n,t):t||n,this.set("totalMatrix",e)}return e},t.prototype.applyMatrix=function(e){var t=this.attr("matrix"),n=null;n=e&&t?multiplyMatrix(e,t):t||e,this.set("totalMatrix",n),this.set("parentMatrix",e)},t.prototype.getDefaultMatrix=function(){return null},t.prototype.applyToMatrix=function(e){var t=this.attr("matrix");return t?multiplyVec2(t,e):e},t.prototype.invertFromMatrix=function(e){var t=this.attr("matrix");if(t){var n=invert(t);if(n)return multiplyVec2(n,e)}return e},t.prototype.setClip=function(e){var t=this.getCanvas(),n=null;if(e){var r=this.getShapeBase()[upperFirst(e.type)];r&&(n=new r({type:e.type,isClipShape:!0,applyTo:this,attrs:e.attrs,canvas:t}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},t.prototype.getClip=function(){var e=this.cfg.clipShape;return e||null},t.prototype.clone=function(){var e=this,t=this.attrs,n={};each(t,(function(e,r){isArray$1(t[r])?n[r]=_cloneArrayAttr(t[r]):n[r]=t[r]}));var r=new(0,this.constructor)({attrs:n});return each(CLONE_CFGS,(function(t){r.set(t,e.get(t))})),r},t.prototype.destroy=function(){this.destroyed||(this.attrs={},e.prototype.destroy.call(this))},t.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},t.prototype.animate=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.get("timeline")||this.get("canvas")){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var r=this.get("animations")||[];n.timer||n.initTimer();var i,o,a,s,l,c=e[0],u=e[1],h=e[2],d=void 0===h?"easeLinear":h,f=e[3],p=void 0===f?noop$1:f,g=e[4],m=void 0===g?0:g;isFunction$1(c)?(i=c,c={}):isObject(c)&&c.onFrame&&(i=c.onFrame,o=c.repeat),isObject(u)?(u=(l=u).duration,d=l.easing||"easeLinear",m=l.delay||0,o=l.repeat||o||!1,p=l.callback||noop$1,a=l.pauseCallback||noop$1,s=l.resumeCallback||noop$1):(isNumber$1(p)&&(m=p,p=null),isFunction$1(d)?(p=d,d="easeLinear"):d=d||"easeLinear");var v=getFormatToAttrs(c,this),y={fromAttrs:getFormatFromAttrs(v,this),toAttrs:v,duration:u,easing:d,repeat:o,callback:p,pauseCallback:a,resumeCallback:s,delay:m,startTime:n.getTime(),id:uniqueId$3(),onFrame:i,pathFormatted:!1};r.length>0?r=checkExistedAttrs(r,y):n.addAnimator(this),r.push(y),this.set("animations",r),this.set("_pause",{isPaused:!1})}},t.prototype.stopAnimate=function(e){var t=this;void 0===e&&(e=!0),each(this.get("animations"),(function(n){e&&(n.onFrame?t.attr(n.onFrame(1)):t.attr(n.toAttrs)),n.callback&&n.callback()})),this.set("animating",!1),this.set("animations",[])},t.prototype.pauseAnimate=function(){var e=this.get("timeline"),t=this.get("animations"),n=e.getTime();return each(t,(function(e){e._paused=!0,e._pauseTime=n,e.pauseCallback&&e.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:n}),this},t.prototype.resumeAnimate=function(){var e=this.get("timeline").getTime(),t=this.get("animations"),n=this.get("_pause").pauseTime;return each(t,(function(t){t.startTime=t.startTime+(e-n),t._paused=!1,t._pauseTime=null,t.resumeCallback&&t.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",t),this},t.prototype.emitDelegation=function(e,t){var n,r=this,i=t.propagationPath;this.getEvents(),"mouseenter"===e?n=t.fromShape:"mouseleave"===e&&(n=t.toShape);for(var o=function(e){var o=i[e],s=o.get("name");if(s){if((o.isGroup()||o.isCanvas&&o.isCanvas())&&n&&isParent(o,n))return"break";isArray$1(s)?each(s,(function(e){r.emitDelegateEvent(o,e,t)})):a.emitDelegateEvent(o,s,t)}},a=this,s=0;s<i.length;s++){if("break"===o(s))break}},t.prototype.emitDelegateEvent=function(e,t,n){var r=this.getEvents(),i=t+DELEGATION_SPLIT+n.type;(r[i]||r[WILDCARD])&&(n.name=i,n.currentTarget=e,n.delegateTarget=this,n.delegateObject=e.get("delegateObject"),this.emit(i,n))},t.prototype.translate=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0);var n=this.getMatrix(),r=transform$b(n,[["t",e,t]]);return this.setMatrix(r),this},t.prototype.move=function(e,t){var n=this.attr("x")||0,r=this.attr("y")||0;return this.translate(e-n,t-r),this},t.prototype.moveTo=function(e,t){return this.move(e,t)},t.prototype.scale=function(e,t){var n=this.getMatrix(),r=transform$b(n,[["s",e,t||e]]);return this.setMatrix(r),this},t.prototype.rotate=function(e){var t=this.getMatrix(),n=transform$b(t,[["r",e]]);return this.setMatrix(n),this},t.prototype.rotateAtStart=function(e){var t=this.attr(),n=t.x,r=t.y,i=this.getMatrix(),o=transform$b(i,[["t",-n,-r],["r",e],["t",n,r]]);return this.setMatrix(o),this},t.prototype.rotateAtPoint=function(e,t,n){var r=this.getMatrix(),i=transform$b(r,[["t",-e,-t],["r",n],["t",e,t]]);return this.setMatrix(i),this},t}(Base$1),SHAPE_MAP={},INDEX="_INDEX";function setCanvas(e,t){if(e.set("canvas",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){setCanvas(e,t)}))}}function setTimeline(e,t){if(e.set("timeline",t),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){setTimeline(e,t)}))}}function removeChild(e,t,n){void 0===n&&(n=!0),n?t.destroy():(t.set("parent",null),t.set("canvas",null)),removeFromArray(e.getChildren(),t)}function getComparer(e){return function(t,n){var r=e(t,n);return 0===r?t[INDEX]-n[INDEX]:r}}var Container=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.isCanvas=function(){return!1},t.prototype.getBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(each(a,(function(e){var t=e.getBBox();i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),e=min$5(i),t=max$6(i),n=min$5(o),r=max$6(o)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getCanvasBBox=function(){var e=1/0,t=-1/0,n=1/0,r=-1/0,i=[],o=[],a=this.getChildren().filter((function(e){return e.get("visible")&&(!e.isGroup()||e.isGroup()&&e.getChildren().length>0)}));return a.length>0?(each(a,(function(e){var t=e.getCanvasBBox();i.push(t.minX,t.maxX),o.push(t.minY,t.maxY)})),e=min$5(i),t=max$6(i),n=min$5(o),r=max$6(o)):(e=0,t=0,n=0,r=0),{x:e,y:n,minX:e,minY:n,maxX:t,maxY:r,width:t-e,height:r-n}},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.children=[],t},t.prototype.onAttrChange=function(t,n,r){if(e.prototype.onAttrChange.call(this,t,n,r),"matrix"===t){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},t.prototype.applyMatrix=function(t){var n=this.getTotalMatrix();e.prototype.applyMatrix.call(this,t);var r=this.getTotalMatrix();r!==n&&this._applyChildrenMarix(r)},t.prototype._applyChildrenMarix=function(e){each(this.getChildren(),(function(t){t.applyMatrix(e)}))},t.prototype.addShape=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],r=e[1];isObject(n)?r=n:r.type=n;var i=SHAPE_MAP[r.type];i||(i=upperFirst(r.type),SHAPE_MAP[r.type]=i);var o=this.getShapeBase(),a=new o[i](r);return this.add(a),a},t.prototype.addGroup=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n,r=e[0],i=e[1];if(isFunction$1(r))n=new r(i||{parent:this});else{var o=r||{},a=this.getGroupBase();n=new a(o)}return this.add(n),n},t.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},t.prototype.getShape=function(e,t,n){if(!isAllowCapture(this))return null;var r,i=this.getChildren();if(this.isCanvas())r=this._findShape(i,e,t,n);else{var o=[e,t,1];o=this.invertFromMatrix(o),this.isClipped(o[0],o[1])||(r=this._findShape(i,o[0],o[1],n))}return r},t.prototype._findShape=function(e,t,n,r){for(var i=null,o=e.length-1;o>=0;o--){var a=e[o];if(isAllowCapture(a)&&(a.isGroup()?i=a.getShape(t,n,r):a.isHit(t,n)&&(i=a)),i)break}return i},t.prototype.add=function(e){var t=this.getCanvas(),n=this.getChildren(),r=this.get("timeline"),i=e.getParent();i&&removeChild(i,e,!1),e.set("parent",this),t&&setCanvas(e,t),r&&setTimeline(e,r),n.push(e),e.onCanvasChange("add"),this._applyElementMatrix(e)},t.prototype._applyElementMatrix=function(e){var t=this.getTotalMatrix();t&&e.applyMatrix(t)},t.prototype.getChildren=function(){return this.get("children")},t.prototype.sort=function(){var e=this.getChildren();each(e,(function(e,t){return e[INDEX]=t,e})),e.sort(getComparer((function(e,t){return e.get("zIndex")-t.get("zIndex")}))),this.onCanvasChange("sort")},t.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var e=this.getChildren(),t=e.length-1;t>=0;t--)e[t].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},t.prototype.destroy=function(){this.get("destroyed")||(this.clear(),e.prototype.destroy.call(this))},t.prototype.getFirst=function(){return this.getChildByIndex(0)},t.prototype.getLast=function(){var e=this.getChildren();return this.getChildByIndex(e.length-1)},t.prototype.getChildByIndex=function(e){return this.getChildren()[e]},t.prototype.getCount=function(){return this.getChildren().length},t.prototype.contain=function(e){return this.getChildren().indexOf(e)>-1},t.prototype.removeChild=function(e,t){void 0===t&&(t=!0),this.contain(e)&&e.remove(t)},t.prototype.findAll=function(e){var t=[];return each(this.getChildren(),(function(n){e(n)&&t.push(n),n.isGroup()&&(t=t.concat(n.findAll(e)))})),t},t.prototype.find=function(e){var t=null;return each(this.getChildren(),(function(n){if(e(n)?t=n:n.isGroup()&&(t=n.find(e)),t)return!1})),t},t.prototype.findById=function(e){return this.find((function(t){return t.get("id")===e}))},t.prototype.findByClassName=function(e){return this.find((function(t){return t.get("className")===e}))},t.prototype.findAllByName=function(e){return this.findAll((function(t){return t.get("name")===e}))},t}(Element$1),frame$1=0,timeout$1=0,interval$1=0,pokeDelay$1=1e3,taskHead$1,taskTail$1,clockLast$1=0,clockNow$1=0,clockSkew$1=0,clock$1="object"==typeof performance&&performance.now?performance:Date,setFrame$1="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now$1(){return clockNow$1||(setFrame$1(clearNow$1),clockNow$1=clock$1.now()+clockSkew$1)}function clearNow$1(){clockNow$1=0}function Timer$1(){this._call=this._time=this._next=null}function timer$1(e,t,n){var r=new Timer$1;return r.restart(e,t,n),r}function timerFlush$1(){now$1(),++frame$1;for(var e,t=taskHead$1;t;)(e=clockNow$1-t._time)>=0&&t._call.call(null,e),t=t._next;--frame$1}function wake$1(){clockNow$1=(clockLast$1=clock$1.now())+clockSkew$1,frame$1=timeout$1=0;try{timerFlush$1()}finally{frame$1=0,nap$1(),clockNow$1=0}}function poke$1(){var e=clock$1.now(),t=e-clockLast$1;t>pokeDelay$1&&(clockSkew$1-=t,clockLast$1=e)}function nap$1(){for(var e,t,n=taskHead$1,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:taskHead$1=t);taskTail$1=e,sleep$1(r)}function sleep$1(e){frame$1||(timeout$1&&(timeout$1=clearTimeout(timeout$1)),e-clockNow$1>24?(e<1/0&&(timeout$1=setTimeout(wake$1,e-clock$1.now()-clockSkew$1)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast$1=clock$1.now(),interval$1=setInterval(poke$1,pokeDelay$1)),frame$1=1,setFrame$1(wake$1)))}function define(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function extend(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Color$1(){}Timer$1.prototype=timer$1.prototype={constructor:Timer$1,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?now$1():+n)+(null==t?0:+t),this._next||taskTail$1===this||(taskTail$1?taskTail$1._next=this:taskHead$1=this,taskTail$1=this),this._call=e,this._time=n,sleep$1()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep$1())}};var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color$1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=reHex.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?rgbn(t):3===n?new Rgb(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rgba(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rgba(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=reRgbInteger.exec(e))?new Rgb(t[1],t[2],t[3],1):(t=reRgbPercent.exec(e))?new Rgb(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=reRgbaInteger.exec(e))?rgba(t[1],t[2],t[3],t[4]):(t=reRgbaPercent.exec(e))?rgba(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=reHslPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,1):(t=reHslaPercent.exec(e))?hsla(t[1],t[2]/100,t[3]/100,t[4]):named.hasOwnProperty(e)?rgbn(named[e]):"transparent"===e?new Rgb(NaN,NaN,NaN,0):null}function rgbn(e){return new Rgb(e>>16&255,e>>8&255,255&e,1)}function rgba(e,t,n,r){return r<=0&&(e=t=n=NaN),new Rgb(e,t,n,r)}function rgbConvert(e){return e instanceof Color$1||(e=color$1(e)),e?new Rgb((e=e.rgb()).r,e.g,e.b,e.opacity):new Rgb}function rgb$1(e,t,n,r){return 1===arguments.length?rgbConvert(e):new Rgb(e,t,n,null==r?1:r)}function Rgb(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex(255*(isNaN(this.opacity)?1:this.opacity))}`}function rgb_formatRgb(){const e=clampa(this.opacity);return`${1===e?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${1===e?")":`, ${e})`}`}function clampa(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function clampi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hex(e){return((e=clampi(e))<16?"0":"")+e.toString(16)}function hsla(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hsl(e,t,n,r)}function hslConvert(e){if(e instanceof Hsl)return new Hsl(e.h,e.s,e.l,e.opacity);if(e instanceof Color$1||(e=color$1(e)),!e)return new Hsl;if(e instanceof Hsl)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Hsl(a,s,l,e.opacity)}function hsl(e,t,n,r){return 1===arguments.length?hslConvert(e):new Hsl(e,t,n,null==r?1:r)}function Hsl(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function clamph(e){return(e=(e||0)%360)<0?e+360:e}function clampt(e){return Math.max(0,Math.min(1,e||0))}function hsl2rgb(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}define(Color$1,color$1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb}),define(Rgb,rgb$1,extend(Color$1,{brighter(e){return e=null==e?brighter:Math.pow(brighter,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?darker:Math.pow(darker,e),new Rgb(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb})),define(Hsl,hsl,extend(Color$1,{brighter(e){return e=null==e?brighter:Math.pow(brighter,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?darker:Math.pow(darker,e),new Hsl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Rgb(hsl2rgb(e>=240?e-240:e+120,i,r),hsl2rgb(e,i,r),hsl2rgb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=clampa(this.opacity);return`${1===e?"hsl(":"hsla("}${clamph(this.h)}, ${100*clampt(this.s)}%, ${100*clampt(this.l)}%${1===e?")":`, ${e})`}`}}));const constant$2=e=>()=>e;function linear$2(e,t){return function(n){return e+n*t}}function exponential(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function gamma(e){return 1==(e=+e)?nogamma:function(t,n){return n-t?exponential(t,n,e):constant$2(isNaN(t)?n:t)}}function nogamma(e,t){var n=t-e;return n?linear$2(e,n):constant$2(isNaN(e)?t:e)}const rgb=function e(t){var n=gamma(t);function r(e,t){var r=n((e=rgb$1(e)).r,(t=rgb$1(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=nogamma(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function numberArray(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function isNumberArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function interpolateArray(e,t){return(isNumberArray(t)?numberArray:genericArray)(e,t)}function genericArray(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=interpolate(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function date(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function number$1(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function object$1(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=interpolate(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(e){return function(){return e}}function one(e){return function(t){return e(t)+""}}function string$1(e,t){var n,r,i,o=reA.lastIndex=reB.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=reA.exec(e))&&(r=reB.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:number$1(n,r)})),o=reB.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?one(l[0].x):zero(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function interpolate(e,t){var n,r=typeof t;return null==t||"boolean"===r?constant$2(t):("number"===r?number$1:"string"===r?(n=color$1(t))?(t=n,rgb):string$1:t instanceof color$1?rgb:t instanceof Date?date:isNumberArray(t)?numberArray:Array.isArray(t)?genericArray:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?object$1:number$1)(e,t)}function linear$1(e){return+e}function quadIn(e){return e*e}function quadOut(e){return e*(2-e)}function quadInOut(e){return((e*=2)<=1?e*e:--e*(2-e)+1)/2}function cubicIn(e){return e*e*e}function cubicOut(e){return--e*e*e+1}function cubicInOut(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var exponent=3,polyIn=function e(t){function n(e){return Math.pow(e,t)}return t=+t,n.exponent=e,n}(exponent),polyOut=function e(t){function n(e){return 1-Math.pow(1-e,t)}return t=+t,n.exponent=e,n}(exponent),polyInOut=function e(t){function n(e){return((e*=2)<=1?Math.pow(e,t):2-Math.pow(2-e,t))/2}return t=+t,n.exponent=e,n}(exponent),pi$2=Math.PI,halfPi=pi$2/2;function sinIn(e){return 1==+e?1:1-Math.cos(e*halfPi)}function sinOut(e){return Math.sin(e*halfPi)}function sinInOut(e){return(1-Math.cos(pi$2*e))/2}function tpmt(e){return 1.0009775171065494*(Math.pow(2,-10*e)-.0009765625)}function expIn(e){return tpmt(1-+e)}function expOut(e){return 1-tpmt(e)}function expInOut(e){return((e*=2)<=1?tpmt(1-e):2-tpmt(e-1))/2}function circleIn(e){return 1-Math.sqrt(1-e*e)}function circleOut(e){return Math.sqrt(1- --e*e)}function circleInOut(e){return((e*=2)<=1?1-Math.sqrt(1-e*e):Math.sqrt(1-(e-=2)*e)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(e){return 1-bounceOut(1-e)}function bounceOut(e){return(e=+e)<b1?b0*e*e:e<b3?b0*(e-=b2)*e+b4:e<b6?b0*(e-=b5)*e+b7:b0*(e-=b8)*e+b9}function bounceInOut(e){return((e*=2)<=1?1-bounceOut(1-e):bounceOut(e-1)+1)/2}var overshoot=1.70158,backIn=function e(t){function n(e){return(e=+e)*e*(t*(e-1)+e)}return t=+t,n.overshoot=e,n}(overshoot),backOut=function e(t){function n(e){return--e*e*((e+1)*t+e)+1}return t=+t,n.overshoot=e,n}(overshoot),backInOut=function e(t){function n(e){return((e*=2)<1?e*e*((t+1)*e-t):(e-=2)*e*((t+1)*e+t)+2)/2}return t=+t,n.overshoot=e,n}(overshoot),tau=2*Math.PI,amplitude=1,period=.3,elasticIn=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau);function i(e){return t*tpmt(- --e)*Math.sin((r-e)/n)}return i.amplitude=function(t){return e(t,n*tau)},i.period=function(n){return e(t,n)},i}(amplitude,period),elasticOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau);function i(e){return 1-t*tpmt(e=+e)*Math.sin((e+r)/n)}return i.amplitude=function(t){return e(t,n*tau)},i.period=function(n){return e(t,n)},i}(amplitude,period),elasticInOut=function e(t,n){var r=Math.asin(1/(t=Math.max(1,t)))*(n/=tau);function i(e){return((e=2*e-1)<0?t*tpmt(-e)*Math.sin((r-e)/n):2-t*tpmt(e)*Math.sin((r+e)/n))/2}return i.amplitude=function(t){return e(t,n*tau)},i.period=function(n){return e(t,n)},i}(amplitude,period);const d3Ease=Object.freeze(Object.defineProperty({__proto__:null,easeLinear:linear$1,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadOut:quadOut,easeQuadInOut:quadInOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicOut:cubicOut,easeCubicInOut:cubicInOut,easePoly:polyInOut,easePolyIn:polyIn,easePolyOut:polyOut,easePolyInOut:polyInOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinOut:sinOut,easeSinInOut:sinInOut,easeExp:expInOut,easeExpIn:expIn,easeExpOut:expOut,easeExpInOut:expInOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleOut:circleOut,easeCircleInOut:circleInOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceOut:bounceOut,easeBounceInOut:bounceInOut,easeBack:backInOut,easeBackIn:backIn,easeBackOut:backOut,easeBackInOut:backInOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticOut:elasticOut,easeElasticInOut:elasticInOut},Symbol.toStringTag,{value:"Module"}));var EASING_MAP={};function getEasing(e){return EASING_MAP[e.toLowerCase()]||d3Ease[e]}var isColorProp=function(e){return["fill","stroke","fillStyle","strokeStyle"].includes(e)},isGradientColor=function(e){return/^[r,R,L,l]{1}[\s]*\(/.test(e)},IDENTITY_MATRIX=[1,0,0,0,1,0,0,0,1];function _update(e,t,n){var r={},i=t.fromAttrs,o=t.toAttrs;if(!e.destroyed){var a;for(var s in o)if(!isEqual$1(i[s],o[s]))if("path"===s){var l=o[s],c=i[s];l.length>c.length?(l=parsePathString$1(o[s]),c=parsePathString$1(i[s]),c=fillPathByDiff(c,l),c=formatPath(c,l),t.fromAttrs.path=c,t.toAttrs.path=l):t.pathFormatted||(l=parsePathString$1(o[s]),c=parsePathString$1(i[s]),c=formatPath(c,l),t.fromAttrs.path=c,t.toAttrs.path=l,t.pathFormatted=!0),r[s]=[];for(var u=0;u<l.length;u++){for(var h=l[u],d=c[u],f=[],p=0;p<h.length;p++)isNumber$1(h[p])&&d&&isNumber$1(d[p])?(a=interpolate(d[p],h[p]),f.push(a(n))):f.push(h[p]);r[s].push(f)}}else if("matrix"===s){var g=interpolateArray(i[s]||IDENTITY_MATRIX,o[s]||IDENTITY_MATRIX)(n);r[s]=g}else isColorProp(s)&&isGradientColor(o[s])?r[s]=o[s]:isFunction$1(o[s])||(a=interpolate(i[s],o[s]),r[s]=a(n));e.attr(r)}}function update(e,t,n){var r,i=t.startTime;if(n<i+t.delay||t._paused)return!1;var o=t.duration,a=getEasing(t.easing);if(n=n-i-t.delay,t.repeat)r=a(r=n%o/o);else{if(!((r=n/o)<1))return t.onFrame?e.attr(t.onFrame(1)):e.attr(t.toAttrs),!0;r=a(r)}if(t.onFrame){var s=t.onFrame(r);e.attr(s)}else _update(e,t,r);return!1}var Timeline=function(){function e(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return e.prototype.initTimer=function(){var e,t,n,r=this;this.timer=timer$1((function(i){if(r.current=i,r.animators.length>0){for(var o=r.animators.length-1;o>=0;o--)if((e=r.animators[o]).destroyed)r.removeAnimator(o);else{if(!e.isAnimatePaused())for(var a=(t=e.get("animations")).length-1;a>=0;a--)n=t[a],update(e,n,i)&&(t.splice(a,1),!1,n.callback&&n.callback());0===t.length&&r.removeAnimator(o)}r.canvas.get("autoDraw")||r.canvas.draw()}}))},e.prototype.addAnimator=function(e){this.animators.push(e)},e.prototype.removeAnimator=function(e){this.animators.splice(e,1)},e.prototype.isAnimating=function(){return!!this.animators.length},e.prototype.stop=function(){this.timer&&this.timer.stop()},e.prototype.stopAllAnimations=function(e){void 0===e&&(e=!0),this.animators.forEach((function(t){t.stopAnimate(e)})),this.animators=[],this.canvas.draw()},e.prototype.getTime=function(){return this.current},e}(),CLICK_OFFSET=40,LEFT_BTN_CODE=0,EVENTS=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function emitTargetEvent(e,t,n){n.name=t,n.target=e,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}function bubbleEvent(e,t,n){if(n.bubbles){var r=void 0,i=!1;if("mouseenter"===t?(r=n.fromShape,i=!0):"mouseleave"===t&&(i=!0,r=n.toShape),e.isCanvas()&&i)return;if(r&&isParent(e,r))return void(n.bubbles=!1);n.name=t,n.currentTarget=e,n.delegateTarget=e,e.emit(t,n)}}var EventController$2=function(){function e(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(e){var n=e.type;t._triggerEvent(n,e)},this._onDocumentMove=function(e){if(t.canvas.get("el")!==e.target&&(t.dragging||t.currentShape)){var n=t._getPointInfo(e);t.dragging&&t._emitEvent("drag",e,n,t.draggingShape)}},this._onDocumentMouseUp=function(e){if(t.canvas.get("el")!==e.target&&t.dragging){var n=t._getPointInfo(e);t.draggingShape&&t._emitEvent("drop",e,n,null),t._emitEvent("dragend",e,n,t.draggingShape),t._afterDrag(t.draggingShape,n,e)}},this.canvas=e.canvas}return e.prototype.init=function(){this._bindEvents()},e.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");each(EVENTS,(function(n){t.addEventListener(n,e._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");each(EVENTS,(function(n){t.removeEventListener(n,e._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},e.prototype._getEventObj=function(e,t,n,r,i,o){var a=new GraphEvent(e,t);return a.fromShape=i,a.toShape=o,a.x=n.x,a.y=n.y,a.clientX=n.clientX,a.clientY=n.clientY,a.propagationPath.push(r),a},e.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},e.prototype._getPointInfo=function(e){var t=this.canvas,n=t.getClientByEvent(e),r=t.getPointByEvent(e);return{x:r.x,y:r.y,clientX:n.x,clientY:n.y}},e.prototype._triggerEvent=function(e,t){var n=this._getPointInfo(t),r=this._getShape(n,t),i=this["_on"+e],o=!1;if(i)i.call(this,n,r,t);else{var a=this.currentShape;"mouseenter"===e||"dragenter"===e||"mouseover"===e?(this._emitEvent(e,t,n,null,null,r),r&&this._emitEvent(e,t,n,r,null,r),"mouseenter"===e&&this.draggingShape&&this._emitEvent("dragenter",t,n,null)):"mouseleave"===e||"dragleave"===e||"mouseout"===e?(o=!0,a&&this._emitEvent(e,t,n,a,a,null),this._emitEvent(e,t,n,null,a,null),"mouseleave"===e&&this.draggingShape&&this._emitEvent("dragleave",t,n,null)):this._emitEvent(e,t,n,r,null,null)}if(o||(this.currentShape=r),r&&!r.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=r.attr("cursor")||s.get("cursor")}},e.prototype._onmousedown=function(e,t,n){n.button===LEFT_BTN_CODE&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=n.timeStamp),this._emitEvent("mousedown",n,e,t,null,null)},e.prototype._emitMouseoverEvents=function(e,t,n,r){var i=this.canvas.get("el");n!==r&&(n&&(this._emitEvent("mouseout",e,t,n,n,r),this._emitEvent("mouseleave",e,t,n,n,r),r&&!r.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),r&&(this._emitEvent("mouseover",e,t,r,n,r),this._emitEvent("mouseenter",e,t,r,n,r)))},e.prototype._emitDragoverEvents=function(e,t,n,r,i){r?(r!==n&&(n&&this._emitEvent("dragleave",e,t,n,n,r),this._emitEvent("dragenter",e,t,r,n,r)),i||this._emitEvent("dragover",e,t,r)):n&&this._emitEvent("dragleave",e,t,n,n,r),i&&this._emitEvent("dragover",e,t,r)},e.prototype._afterDrag=function(e,t,n){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var r=this._getShape(t,n);r!==e&&this._emitMouseoverEvents(n,t,e,r),this.currentShape=r},e.prototype._onmouseup=function(e,t,n){if(n.button===LEFT_BTN_CODE){var r=this.draggingShape;this.dragging?(r&&this._emitEvent("drop",n,e,t),this._emitEvent("dragend",n,e,r),this._afterDrag(r,e,n)):(this._emitEvent("mouseup",n,e,t),t===this.mousedownShape&&this._emitEvent("click",n,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},e.prototype._ondragover=function(e,t,n){n.preventDefault();var r=this.currentShape;this._emitDragoverEvents(n,e,r,t,!0)},e.prototype._onmousemove=function(e,t,n){var r=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(n,e,i,t,!1),this._emitEvent("drag",n,e,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,l=n.timeStamp-this.mousedownTimeStamp,c=a.clientX-e.clientX,u=a.clientY-e.clientY;l>120||c*c+u*u>CLICK_OFFSET?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",n,e,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&r.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",n,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)):(this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t))}else this._emitMouseoverEvents(n,e,i,t),this._emitEvent("mousemove",n,e,t)}},e.prototype._emitEvent=function(e,t,n,r,i,o){var a=this._getEventObj(e,t,n,r,i,o);if(r){a.shape=r,emitTargetEvent(r,e,a);for(var s=r.getParent();s;)s.emitDelegation(e,a),a.propagationStopped||bubbleEvent(s,e,a),a.propagationPath.push(s),s=s.getParent()}else{emitTargetEvent(this.canvas,e,a)}},e.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},e}(),PX_SUFFIX="px",browser=detect(),isFirefox=browser&&"firefox"===browser.name,Canvas$2=function(e){function t(t){var n=e.call(this,t)||this;return n.initContainer(),n.initDom(),n.initEvents(),n.initTimeline(),n}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},t.prototype.initContainer=function(){var e=this.get("container");isString$1(e)&&(e=document.getElementById(e),this.set("container",e))},t.prototype.initDom=function(){var e=this.createDom();this.set("el",e),this.get("container").appendChild(e),this.setDOMSize(this.get("width"),this.get("height"))},t.prototype.initEvents=function(){var e=new EventController$2({canvas:this});e.init(),this.set("eventController",e)},t.prototype.initTimeline=function(){var e=new Timeline(this);this.set("timeline",e)},t.prototype.setDOMSize=function(e,t){var n=this.get("el");isBrowser&&(n.style.width=e+PX_SUFFIX,n.style.height=t+PX_SUFFIX)},t.prototype.changeSize=function(e,t){this.setDOMSize(e,t),this.set("width",e),this.set("height",t),this.onCanvasChange("changeSize")},t.prototype.getRenderer=function(){return this.get("renderer")},t.prototype.getCursor=function(){return this.get("cursor")},t.prototype.setCursor=function(e){this.set("cursor",e);var t=this.get("el");isBrowser&&t&&(t.style.cursor=e)},t.prototype.getPointByEvent=function(e){if(this.get("supportCSSTransform")){if(isFirefox&&!isNil(e.layerX)&&e.layerX!==e.offsetX)return{x:e.layerX,y:e.layerY};if(!isNil(e.offsetX))return{x:e.offsetX,y:e.offsetY}}var t=this.getClientByEvent(e),n=t.x,r=t.y;return this.getPointByClient(n,r)},t.prototype.getClientByEvent=function(e){var t=e;return e.touches&&(t="touchend"===e.type?e.changedTouches[0]:e.touches[0]),{x:t.clientX,y:t.clientY}},t.prototype.getPointByClient=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e-n.left,y:t-n.top}},t.prototype.getClientByPoint=function(e,t){var n=this.get("el").getBoundingClientRect();return{x:e+n.left,y:t+n.top}},t.prototype.draw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.parentNode.removeChild(e)},t.prototype.clearEvents=function(){this.get("eventController").destroy()},t.prototype.isCanvas=function(){return!0},t.prototype.getParent=function(){return null},t.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),e.prototype.destroy.call(this))},t}(Container),AbstractGroup=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.isGroup=function(){return!0},t.prototype.isEntityGroup=function(){return!1},t.prototype.clone=function(){for(var t=e.prototype.clone.call(this),n=this.getChildren(),r=0;r<n.length;r++){var i=n[r];t.add(i.clone())}return t},t}(Container),AbstractShape=function(e){function t(t){return e.call(this,t)||this}return __extends$x(t,e),t.prototype._isInBBox=function(e,t){var n=this.getBBox();return n.minX<=e&&n.maxX>=e&&n.minY<=t&&n.maxY>=t},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},t.prototype.getBBox=function(){var e=this.cfg.bbox;return e||(e=this.calculateBBox(),this.set("bbox",e)),e},t.prototype.getCanvasBBox=function(){var e=this.cfg.canvasBBox;return e||(e=this.calculateCanvasBBox(),this.set("canvasBBox",e)),e},t.prototype.applyMatrix=function(t){e.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},t.prototype.calculateCanvasBBox=function(){var e=this.getBBox(),t=this.getTotalMatrix(),n=e.minX,r=e.minY,i=e.maxX,o=e.maxY;if(t){var a=multiplyVec2(t,[e.minX,e.minY]),s=multiplyVec2(t,[e.maxX,e.minY]),l=multiplyVec2(t,[e.minX,e.maxY]),c=multiplyVec2(t,[e.maxX,e.maxY]);n=Math.min(a[0],s[0],l[0],c[0]),i=Math.max(a[0],s[0],l[0],c[0]),r=Math.min(a[1],s[1],l[1],c[1]),o=Math.max(a[1],s[1],l[1],c[1])}var u=this.attrs;if(u.shadowColor){var h=u.shadowBlur,d=void 0===h?0:h,f=u.shadowOffsetX,p=void 0===f?0:f,g=u.shadowOffsetY,m=void 0===g?0:g,v=n-d+p,y=i+d+p,b=r-d+m,x=o+d+m;n=Math.min(n,v),i=Math.max(i,y),r=Math.min(r,b),o=Math.max(o,x)}return{x:n,y:r,minX:n,minY:r,maxX:i,maxY:o,width:i-n,height:o-r}},t.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},t.prototype.isClipShape=function(){return this.get("isClipShape")},t.prototype.isInShape=function(e,t){return!1},t.prototype.isOnlyHitBox=function(){return!1},t.prototype.isHit=function(e,t){var n=this.get("startArrowShape"),r=this.get("endArrowShape"),i=[e,t,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(n&&n.isHit(o,a))return!0;if(r&&r.isHit(o,a))return!0}return!1},t}(Element$1),cache$1=new Map;function register(e,t){cache$1.set(e,t)}function getMethod(e){return cache$1.get(e)}function rect(e){var t=e.attr();return{x:t.x,y:t.y,width:t.width,height:t.height}}function circle(e){var t=e.attr(),n=t.x,r=t.y,i=t.r;return{x:n-i,y:r-i,width:2*i,height:2*i}}function distance$3(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function isNumberEqual(e,t){return Math.abs(e-t)<.001}function getBBoxByArray(e,t){var n=min$5(e),r=min$5(t);return{x:n,y:r,width:max$6(e)-n,height:max$6(t)-r}}function piMod(e){return(e+2*Math.PI)%(2*Math.PI)}const LineUtil={box:function(e,t,n,r){return getBBoxByArray([e,n],[t,r])},length:function(e,t,n,r){return distance$3(e,t,n,r)},pointAt:function(e,t,n,r,i){return{x:(1-i)*e+i*n,y:(1-i)*t+i*r}},pointDistance:function(e,t,n,r,i,o){var a=(n-e)*(i-e)+(r-t)*(o-t);return a<0?distance$3(e,t,i,o):a>(n-e)*(n-e)+(r-t)*(r-t)?distance$3(n,r,i,o):this.pointToLine(e,t,n,r,i,o)},pointToLine:function(e,t,n,r,i,o){var a=[n-e,r-t];if(exactEquals(a,[0,0]))return Math.sqrt((i-e)*(i-e)+(o-t)*(o-t));var s=[-a[1],a[0]];normalize$1(s,s);var l=[i-e,o-t];return Math.abs(dot(l,s))},tangentAngle:function(e,t,n,r){return Math.atan2(r-t,n-e)}};var EPSILON=1e-4;function nearestPoint(e,t,n,r,i,o){var a,s=1/0,l=[n,r],c=20;o&&o>200&&(c=o/10);for(var u=1/c,h=u/10,d=0;d<=c;d++){var f=d*u,p=[i.apply(null,e.concat([f])),i.apply(null,t.concat([f]))];(y=distance$3(l[0],l[1],p[0],p[1]))<s&&(a=f,s=y)}if(0===a)return{x:e[0],y:t[0]};if(1===a){var g=e.length;return{x:e[g-1],y:t[g-1]}}s=1/0;for(d=0;d<32&&!(h<EPSILON);d++){var m=a-h,v=a+h,y=(p=[i.apply(null,e.concat([m])),i.apply(null,t.concat([m]))],distance$3(l[0],l[1],p[0],p[1]));if(m>=0&&y<s)a=m,s=y;else{var b=[i.apply(null,e.concat([v])),i.apply(null,t.concat([v]))],x=distance$3(l[0],l[1],b[0],b[1]);v<=1&&x<s?(a=v,s=x):h*=.5}}return{x:i.apply(null,e.concat([a])),y:i.apply(null,t.concat([a]))}}function snapLength(e,t){for(var n=0,r=e.length,i=0;i<r;i++){n+=distance$3(e[i],t[i],e[(i+1)%r],t[(i+1)%r])}return n/2}function quadraticAt(e,t,n,r){var i=1-r;return i*i*e+2*r*i*t+r*r*n}function extrema$1(e,t,n){var r=e+n-2*t;if(isNumberEqual(r,0))return[.5];var i=(e-t)/r;return i<=1&&i>=0?[i]:[]}function derivativeAt$1(e,t,n,r){return 2*(1-r)*(t-e)+2*r*(n-t)}function divideQuadratic(e,t,n,r,i,o,a){var s=quadraticAt(e,n,i,a),l=quadraticAt(t,r,o,a),c=LineUtil.pointAt(e,t,n,r,a),u=LineUtil.pointAt(n,r,i,o,a);return[[e,t,c.x,c.y,s,l],[s,l,u.x,u.y,i,o]]}function quadraticLength(e,t,n,r,i,o,a){if(0===a)return(distance$3(e,t,n,r)+distance$3(n,r,i,o)+distance$3(e,t,i,o))/2;var s=divideQuadratic(e,t,n,r,i,o,.5),l=s[0],c=s[1];return l.push(a-1),c.push(a-1),quadraticLength.apply(null,l)+quadraticLength.apply(null,c)}const QuadUtil={box:function(e,t,n,r,i,o){var a=extrema$1(e,n,i)[0],s=extrema$1(t,r,o)[0],l=[e,i],c=[t,o];return void 0!==a&&l.push(quadraticAt(e,n,i,a)),void 0!==s&&c.push(quadraticAt(t,r,o,s)),getBBoxByArray(l,c)},length:function(e,t,n,r,i,o){return quadraticLength(e,t,n,r,i,o,3)},nearestPoint:function(e,t,n,r,i,o,a,s){return nearestPoint([e,n,i],[t,r,o],a,s,quadraticAt)},pointDistance:function(e,t,n,r,i,o,a,s){var l=this.nearestPoint(e,t,n,r,i,o,a,s);return distance$3(l.x,l.y,a,s)},interpolationAt:quadraticAt,pointAt:function(e,t,n,r,i,o,a){return{x:quadraticAt(e,n,i,a),y:quadraticAt(t,r,o,a)}},divide:function(e,t,n,r,i,o,a){return divideQuadratic(e,t,n,r,i,o,a)},tangentAngle:function(e,t,n,r,i,o,a){var s=derivativeAt$1(e,n,i,a),l=derivativeAt$1(t,r,o,a);return piMod(Math.atan2(l,s))}};function cubicAt(e,t,n,r,i){var o=1-i;return o*o*o*e+3*t*i*o*o+3*n*i*i*o+r*i*i*i}function derivativeAt(e,t,n,r,i){var o=1-i;return 3*(o*o*(t-e)+2*o*i*(n-t)+i*i*(r-n))}function extrema(e,t,n,r){var i,o,a,s=-3*e+9*t-9*n+3*r,l=6*e-12*t+6*n,c=3*t-3*e,u=[];if(isNumberEqual(s,0))isNumberEqual(l,0)||(i=-c/l)>=0&&i<=1&&u.push(i);else{var h=l*l-4*s*c;isNumberEqual(h,0)?u.push(-l/(2*s)):h>0&&(o=(-l-(a=Math.sqrt(h)))/(2*s),(i=(-l+a)/(2*s))>=0&&i<=1&&u.push(i),o>=0&&o<=1&&u.push(o))}return u}function divideCubic(e,t,n,r,i,o,a,s,l){var c=cubicAt(e,n,i,a,l),u=cubicAt(t,r,o,s,l),h=LineUtil.pointAt(e,t,n,r,l),d=LineUtil.pointAt(n,r,i,o,l),f=LineUtil.pointAt(i,o,a,s,l),p=LineUtil.pointAt(h.x,h.y,d.x,d.y,l),g=LineUtil.pointAt(d.x,d.y,f.x,f.y,l);return[[e,t,h.x,h.y,p.x,p.y,c,u],[c,u,g.x,g.y,f.x,f.y,a,s]]}function cubicLength(e,t,n,r,i,o,a,s,l){if(0===l)return snapLength([e,n,i,a],[t,r,o,s]);var c=divideCubic(e,t,n,r,i,o,a,s,.5),u=c[0],h=c[1];return u.push(l-1),h.push(l-1),cubicLength.apply(null,u)+cubicLength.apply(null,h)}const CubicUtil={extrema:extrema,box:function(e,t,n,r,i,o,a,s){for(var l=[e,a],c=[t,s],u=extrema(e,n,i,a),h=extrema(t,r,o,s),d=0;d<u.length;d++)l.push(cubicAt(e,n,i,a,u[d]));for(d=0;d<h.length;d++)c.push(cubicAt(t,r,o,s,h[d]));return getBBoxByArray(l,c)},length:function(e,t,n,r,i,o,a,s){return cubicLength(e,t,n,r,i,o,a,s,3)},nearestPoint:function(e,t,n,r,i,o,a,s,l,c,u){return nearestPoint([e,n,i,a],[t,r,o,s],l,c,cubicAt,u)},pointDistance:function(e,t,n,r,i,o,a,s,l,c,u){var h=this.nearestPoint(e,t,n,r,i,o,a,s,l,c,u);return distance$3(h.x,h.y,l,c)},interpolationAt:cubicAt,pointAt:function(e,t,n,r,i,o,a,s,l){return{x:cubicAt(e,n,i,a,l),y:cubicAt(t,r,o,s,l)}},divide:function(e,t,n,r,i,o,a,s,l){return divideCubic(e,t,n,r,i,o,a,s,l)},tangentAngle:function(e,t,n,r,i,o,a,s,l){var c=derivativeAt(e,n,i,a,l),u=derivativeAt(t,r,o,s,l);return piMod(Math.atan2(u,c))}};function copysign(e,t){var n=Math.abs(e);return t>0?n:-1*n}const ellipse$1={box:function(e,t,n,r){return{x:e-n,y:t-r,width:2*n,height:2*r}},length:function(e,t,n,r){return Math.PI*(3*(n+r)-Math.sqrt((3*n+r)*(n+3*r)))},nearestPoint:function(e,t,n,r,i,o){var a=n,s=r;if(0===a||0===s)return{x:e,y:t};for(var l,c,u=i-e,h=o-t,d=Math.abs(u),f=Math.abs(h),p=a*a,g=s*s,m=Math.PI/4,v=0;v<4;v++){l=a*Math.cos(m),c=s*Math.sin(m);var y=(p-g)*Math.pow(Math.cos(m),3)/a,b=(g-p)*Math.pow(Math.sin(m),3)/s,x=l-y,w=c-b,_=d-y,C=f-b,$=Math.hypot(w,x),S=Math.hypot(C,_);m+=$*Math.asin((x*C-w*_)/($*S))/Math.sqrt(p+g-l*l-c*c),m=Math.min(Math.PI/2,Math.max(0,m))}return{x:e+copysign(l,u),y:t+copysign(c,h)}},pointDistance:function(e,t,n,r,i,o){var a=this.nearestPoint(e,t,n,r,i,o);return distance$3(a.x,a.y,i,o)},pointAt:function(e,t,n,r,i){var o=2*Math.PI*i;return{x:e+n*Math.cos(o),y:t+r*Math.sin(o)}},tangentAngle:function(e,t,n,r,i){var o=2*Math.PI*i;return piMod(Math.atan2(r*Math.cos(o),-n*Math.sin(o)))}};function derivativeXAt(e,t,n,r,i,o,a,s){return-1*n*Math.cos(i)*Math.sin(s)-r*Math.sin(i)*Math.cos(s)}function derivativeYAt(e,t,n,r,i,o,a,s){return-1*n*Math.sin(i)*Math.sin(s)+r*Math.cos(i)*Math.cos(s)}function xExtrema(e,t,n){return Math.atan(-t/e*Math.tan(n))}function yExtrema(e,t,n){return Math.atan(t/(e*Math.tan(n)))}function xAt(e,t,n,r,i,o){return n*Math.cos(i)*Math.cos(o)-r*Math.sin(i)*Math.sin(o)+e}function yAt(e,t,n,r,i,o){return n*Math.sin(i)*Math.cos(o)+r*Math.cos(i)*Math.sin(o)+t}function getAngle(e,t,n,r){return(Math.atan2(r*e,n*t)+2*Math.PI)%(2*Math.PI)}function getPoint(e,t,n){return{x:e*Math.cos(n),y:t*Math.sin(n)}}function rotate(e,t,n){var r=Math.cos(n),i=Math.sin(n);return[e*r-t*i,e*i+t*r]}const EllipseArcUtil={box:function(e,t,n,r,i,o,a){for(var s=xExtrema(n,r,i),l=1/0,c=-1/0,u=[o,a],h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var d=s+h;o<a?o<d&&d<a&&u.push(d):a<d&&d<o&&u.push(d)}for(h=0;h<u.length;h++){var f=xAt(e,t,n,r,i,u[h]);f<l&&(l=f),f>c&&(c=f)}var p=yExtrema(n,r,i),g=1/0,m=-1/0,v=[o,a];for(h=2*-Math.PI;h<=2*Math.PI;h+=Math.PI){var y=p+h;o<a?o<y&&y<a&&v.push(y):a<y&&y<o&&v.push(y)}for(h=0;h<v.length;h++){var b=yAt(e,t,n,r,i,v[h]);b<g&&(g=b),b>m&&(m=b)}return{x:l,y:g,width:c-l,height:m-g}},length:function(e,t,n,r,i,o,a){},nearestPoint:function(e,t,n,r,i,o,a,s,l){var c=rotate(s-e,l-t,-i),u=c[0],h=c[1],d=ellipse$1.nearestPoint(0,0,n,r,u,h),f=getAngle(n,r,d.x,d.y);f<o?d=getPoint(n,r,o):f>a&&(d=getPoint(n,r,a));var p=rotate(d.x,d.y,i);return{x:p[0]+e,y:p[1]+t}},pointDistance:function(e,t,n,r,i,o,a,s,l){var c=this.nearestPoint(e,t,n,r,s,l);return distance$3(c.x,c.y,s,l)},pointAt:function(e,t,n,r,i,o,a,s){var l=(a-o)*s+o;return{x:xAt(e,t,n,r,i,l),y:yAt(e,t,n,r,i,l)}},tangentAngle:function(e,t,n,r,i,o,a,s){var l=(a-o)*s+o,c=derivativeXAt(e,t,n,r,i,o,a,l),u=derivativeYAt(e,t,n,r,i,o,a,l);return piMod(Math.atan2(u,c))}};function analyzePoints(e){for(var t=0,n=[],r=0;r<e.length-1;r++){var i=e[r],o=e[r+1],a=distance$3(i[0],i[1],o[0],o[1]),s={from:i,to:o,length:a};n.push(s),t+=a}return{segments:n,totalLength:t}}function lengthOfSegment(e){if(e.length<2)return 0;for(var t=0,n=0;n<e.length-1;n++){var r=e[n],i=e[n+1];t+=distance$3(r[0],r[1],i[0],i[1])}return t}function pointAtSegments(e,t){if(t>1||t<0||e.length<2)return null;var n=analyzePoints(e),r=n.segments,i=n.totalLength;if(0===i)return{x:e[0][0],y:e[0][1]};for(var o=0,a=null,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,h=l.length/i;if(t>=o&&t<=o+h){var d=(t-o)/h;a=LineUtil.pointAt(c[0],c[1],u[0],u[1],d);break}o+=h}return a}function angleAtSegments(e,t){if(t>1||t<0||e.length<2)return 0;for(var n=analyzePoints(e),r=n.segments,i=n.totalLength,o=0,a=0,s=0;s<r.length;s++){var l=r[s],c=l.from,u=l.to,h=l.length/i;if(t>=o&&t<=o+h){a=Math.atan2(u[1]-c[1],u[0]-c[0]);break}o+=h}return a}function distanceAtSegment(e,t,n){for(var r=1/0,i=0;i<e.length-1;i++){var o=e[i],a=e[i+1],s=LineUtil.pointDistance(o[0],o[1],a[0],a[1],t,n);s<r&&(r=s)}return r}const PolylineUtil={box:function(e){for(var t=[],n=[],r=0;r<e.length;r++){var i=e[r];t.push(i[0]),n.push(i[1])}return getBBoxByArray(t,n)},length:function(e){return lengthOfSegment(e)},pointAt:function(e,t){return pointAtSegments(e,t)},pointDistance:function(e,t,n){return distanceAtSegment(e,t,n)},tangentAngle:function(e,t){return angleAtSegments(e,t)}};function mergeBBox$1(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function mergeArrowBBox(e,t){var n=e.get("startArrowShape"),r=e.get("endArrowShape");return n&&(t=mergeBBox$1(t,n.getCanvasBBox())),r&&(t=mergeBBox$1(t,r.getCanvasBBox())),t}function polyline(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}var a=getBBoxByArray(n,r),s=a.x,l=a.y,c={minX:s,minY:l,maxX:s+a.width,maxY:l+a.height};return{x:(c=mergeArrowBBox(e,c)).minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function polygon(e){for(var t=e.attr().points,n=[],r=[],i=0;i<t.length;i++){var o=t[i];n.push(o[0]),r.push(o[1])}return getBBoxByArray(n,r)}var offScreenCtx=null;function getOffScreenContext(){if(!offScreenCtx){var e=document.createElement("canvas");e.width=1,e.height=1,offScreenCtx=e.getContext("2d")}return offScreenCtx}function getTextHeight(e,t,n){var r=1;return isString$1(e)&&(r=e.split("\n").length),r>1?t*r+getLineSpaceing(t,n)*(r-1):t}function getLineSpaceing(e,t){return t?t-e:.14*e}function getTextWidth(e,t){var n=getOffScreenContext(),r=0;if(isNil(e)||""===e)return r;(n.save(),n.font=t,isString$1(e)&&e.includes("\n"))?each(e.split("\n"),(function(e){var t=n.measureText(e).width;r<t&&(r=t)})):r=n.measureText(e).width;return n.restore(),r}function assembleFont(e){var t=e.fontSize,n=e.fontFamily,r=e.fontWeight;return[e.fontStyle,e.fontVariant,r,t+"px",n].join(" ").trim()}function text(e){var t=e.attr(),n=t.x,r=t.y,i=t.text,o=t.fontSize,a=t.lineHeight,s=t.font;s||(s=assembleFont(t));var l,c=getTextWidth(i,s);if(c){var u=t.textAlign,h=t.textBaseline,d=getTextHeight(i,o,a),f={x:n,y:r-d};u&&("end"===u||"right"===u?f.x-=c:"center"===u&&(f.x-=c/2)),h&&("top"===h?f.y+=d:"middle"===h&&(f.y+=d/2)),l={x:f.x,y:f.y,width:c,height:d}}else l={x:n,y:r,width:0,height:0};return l}var regexTags=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,regexDot=/[^\s\,]+/gi;function parsePath(e){var t=e||[];return isArray$1(t)?t:isString$1(t)?(each(t=t.match(regexTags),(function(e,n){if((e=e.match(regexDot))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,(function(t,n){isNaN(t)||(e[n]=+t)})),t[n]=e})),t):void 0}function smoothBezier(e,t,n,r){var i,o,a,s,l,c,u,h=[],d=!!r;if(d){a=r[0],s=r[1];for(var f=0,p=e.length;f<p;f+=1){a=min$2([0,0],a,m=e[f]),s=max$3([0,0],s,m)}}f=0;for(var g=e.length;f<g;f+=1){var m=e[f];if(0!==f||n)if(f!==g-1||n){i=e[[f?f-1:g-1,f-1][n?0:1]],o=e[n?(f+1)%g:f+1];var v=[0,0];v=scale$1(v=sub(v,o,i),v,t);var y=distance$5(m,i),b=distance$5(m,o),x=y+b;0!==x&&(y/=x,b/=x);var w=scale$1([0,0],v,-y),_=scale$1([0,0],v,b);c=add$1([0,0],m,w),l=min$2([0,0],l=add$1([0,0],m,_),max$3([0,0],o,m)),l=max$3([0,0],l,min$2([0,0],o,m)),c=min$2([0,0],c=add$1([0,0],m,w=scale$1([0,0],w=sub([0,0],l,m),-y/b)),max$3([0,0],i,m)),c=max$3([0,0],c,min$2([0,0],i,m)),l=add$1([0,0],m,_=scale$1([0,0],_=sub([0,0],m,c),b/y)),d&&(c=min$2([0,0],c=max$3([0,0],c,a),s),l=min$2([0,0],l=max$3([0,0],l,a),s)),h.push(u),h.push(c),u=l}else c=m,h.push(u),h.push(c);else u=m}return n&&h.push(h.shift()),h}function catmullRom2Bezier(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=[[0,0],[1,1]]);for(var r=!!t,i=[],o=0,a=e.length;o<a;o+=2)i.push([e[o],e[o+1]]);var s,l,c,u=smoothBezier(i,.4,r,n),h=i.length,d=[];for(o=0;o<h-1;o+=1)s=u[2*o],l=u[2*o+1],c=i[o+1],d.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]]);return r&&(s=u[h],l=u[h+1],c=i[0],d.push(["C",s[0],s[1],l[0],l[1],c[0],c[1]])),d}var SPACES="\t\n\v\f\r \u2028\u2029",PATH_COMMAND=new RegExp("([a-z])["+SPACES+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+SPACES+"]*,?["+SPACES+"]*)+)","ig"),PATH_VALUES=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+SPACES+"]*,?["+SPACES+"]*","ig");function parsePathString(e){if(!e)return null;if(isArray$1(e))return e;var t={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(e).replace(PATH_COMMAND,(function(e,r,i){var o=[],a=r.toLowerCase();if(i.replace(PATH_VALUES,(function(e,t){t&&o.push(+t)})),"m"===a&&o.length>2&&(n.push([r].concat(o.splice(0,2))),a="l",r="m"===r?"l":"L"),"o"===a&&1===o.length&&n.push([r,o[0]]),"r"===a)n.push([r].concat(o));else for(;o.length>=t[a]&&(n.push([r].concat(o.splice(0,t[a]))),t[a]););return""})),n}var REGEX_MD=/[a-z]/;function toSymmetry$1(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function pathToAbsolute(e){var t=parsePathString(e);if(!t||!t.length)return[["M",0,0]];for(var n=!1,r=0;r<t.length;r++){var i=t[r][0];if(REGEX_MD.test(i)||["V","H","T","S"].indexOf(i)>=0){n=!0;break}}if(!n)return t;var o=[],a=0,s=0,l=0,c=0,u=0,h=t[0];"M"!==h[0]&&"m"!==h[0]||(l=a=+h[1],c=s=+h[2],u++,o[0]=["M",a,s]);r=u;for(var d=t.length;r<d;r++){var f=t[r],p=o[r-1],g=[],m=(i=f[0]).toUpperCase();if(i!==m)switch(g[0]=m,m){case"A":g[1]=f[1],g[2]=f[2],g[3]=f[3],g[4]=f[4],g[5]=f[5],g[6]=+f[6]+a,g[7]=+f[7]+s;break;case"V":g[1]=+f[1]+s;break;case"H":g[1]=+f[1]+a;break;case"M":l=+f[1]+a,c=+f[2]+s,g[1]=l,g[2]=c;break;default:for(var v=1,y=f.length;v<y;v++)g[v]=+f[v]+(v%2?a:s)}else g=t[r];switch(m){case"Z":a=+l,s=+c;break;case"H":g=["L",a=g[1],s];break;case"V":g=["L",a,s=g[1]];break;case"T":a=g[1],s=g[2];var b=toSymmetry$1([p[1],p[2]],[p[3],p[4]]);g=["Q",b[0],b[1],a,s];break;case"S":a=g[g.length-2],s=g[g.length-1];var x=p.length,w=toSymmetry$1([p[x-4],p[x-3]],[p[x-2],p[x-1]]);g=["C",w[0],w[1],g[1],g[2],a,s];break;case"M":l=g[g.length-2],c=g[g.length-1];break;default:a=g[g.length-2],s=g[g.length-1]}o.push(g)}return o}function vMag$1(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function vRatio$1(e,t){return vMag$1(e)*vMag$1(t)?(e[0]*t[0]+e[1]*t[1])/(vMag$1(e)*vMag$1(t)):1}function vAngle$1(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(vRatio$1(e,t))}function isSamePoint$1(e,t){return e[0]===t[0]&&e[1]===t[1]}function getArcParams$1(e,t){var n=t[1],r=t[2],i=mod$1(toRadian$1(t[3]),2*Math.PI),o=t[4],a=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var m=r?g*n*d/r:0,v=n?g*-r*h/n:0,y=(s+c)/2+Math.cos(i)*m-Math.sin(i)*v,b=(l+u)/2+Math.sin(i)*m+Math.cos(i)*v,x=[(h-m)/n,(d-v)/r],w=[(-1*h-m)/n,(-1*d-v)/r],_=vAngle$1([1,0],x),C=vAngle$1(x,w);return vRatio$1(x,w)<=-1&&(C=Math.PI),vRatio$1(x,w)>=1&&(C=0),0===a&&C>0&&(C-=2*Math.PI),1===a&&C<0&&(C+=2*Math.PI),{cx:y,cy:b,rx:isSamePoint$1(e,[c,u])?0:n,ry:isSamePoint$1(e,[c,u])?0:r,startAngle:_,endAngle:_+C,xRotation:i,arcFlag:o,sweepFlag:a}}function toSymmetry(e,t){return[t[0]+(t[0]-e[0]),t[1]+(t[1]-e[1])]}function getSegments(e){for(var t=[],n=null,r=null,i=null,o=0,a=(e=parsePath(e)).length,s=0;s<a;s++){var l=e[s];r=e[s+1];var c=l[0],u={command:c,prePoint:n,params:l,startTangent:null,endTangent:null};switch(c){case"M":i=[l[1],l[2]],o=s;break;case"A":var h=getArcParams$1(n,l);u.arcParams=h}if("Z"===c)n=i,r=e[o+1];else{var d=l.length;n=[l[d-2],l[d-1]]}r&&"Z"===r[0]&&(r=e[o],t[o]&&(t[o].prePoint=n)),u.currentPoint=n,t[o]&&isSamePoint$1(n,t[o].currentPoint)&&(t[o].prePoint=u.prePoint);var f=r?[r[r.length-2],r[r.length-1]]:null;u.nextPoint=f;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]];else if("Q"===c){var g=[l[1],l[2]];u.startTangent=[p[0]-g[0],p[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]}else if("T"===c){g=toSymmetry((y=t[s-1]).currentPoint,p);"Q"===y.command?(u.command="Q",u.startTangent=[p[0]-g[0],p[1]-g[1]],u.endTangent=[n[0]-g[0],n[1]-g[1]]):(u.command="TL",u.startTangent=[p[0]-n[0],p[1]-n[1]],u.endTangent=[n[0]-p[0],n[1]-p[1]])}else if("C"===c){var m=[l[1],l[2]],v=[l[3],l[4]];u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]],0===u.startTangent[0]&&0===u.startTangent[1]&&(u.startTangent=[m[0]-v[0],m[1]-v[1]]),0===u.endTangent[0]&&0===u.endTangent[1]&&(u.endTangent=[v[0]-m[0],v[1]-m[1]])}else if("S"===c){var y;m=toSymmetry((y=t[s-1]).currentPoint,p),v=[l[1],l[2]];"C"===y.command?(u.command="C",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]]):(u.command="SQ",u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[n[0]-v[0],n[1]-v[1]])}else if("A"===c){var b=.001,x=u.arcParams||{},w=x.cx,_=void 0===w?0:w,C=x.cy,$=void 0===C?0:C,S=x.rx,E=void 0===S?0:S,A=x.ry,M=void 0===A?0:A,k=x.sweepFlag,T=void 0===k?0:k,P=x.startAngle,O=void 0===P?0:P,N=x.endAngle,I=void 0===N?0:N;0===T&&(b*=-1);var D=E*Math.cos(O-b)+_,L=M*Math.sin(O-b)+$;u.startTangent=[D-i[0],L-i[1]];var R=E*Math.cos(O+I+b)+_,B=M*Math.sin(O+I-b)+$;u.endTangent=[p[0]-R,p[1]-B]}t.push(u)}return t}function getPathBox(e,t){for(var n=[],r=[],i=[],o=0;o<e.length;o++){var a=(g=e[o]).currentPoint,s=g.params,l=g.prePoint,c=void 0;switch(g.command){case"Q":c=QuadUtil.box(l[0],l[1],s[1],s[2],s[3],s[4]);break;case"C":c=CubicUtil.box(l[0],l[1],s[1],s[2],s[3],s[4],s[5],s[6]);break;case"A":var u=g.arcParams;c=EllipseArcUtil.box(u.cx,u.cy,u.rx,u.ry,u.xRotation,u.startAngle,u.endAngle);break;default:n.push(a[0]),r.push(a[1])}c&&(g.box=c,n.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),t&&("L"===g.command||"M"===g.command)&&g.prePoint&&g.nextPoint&&i.push(g)}n=n.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0})),r=r.filter((function(e){return!Number.isNaN(e)&&e!==1/0&&e!==-1/0}));var h=min$5(n),d=min$5(r),f=max$6(n),p=max$6(r);if(0===i.length)return{x:h,y:d,width:f-h,height:p-d};for(o=0;o<i.length;o++){var g;(a=(g=i[o]).currentPoint)[0]===h?h-=getExtraFromSegmentWithAngle(g,t).xExtra:a[0]===f&&(f+=getExtraFromSegmentWithAngle(g,t).xExtra),a[1]===d?d-=getExtraFromSegmentWithAngle(g,t).yExtra:a[1]===p&&(p+=getExtraFromSegmentWithAngle(g,t).yExtra)}return{x:h,y:d,width:f-h,height:p-d}}function getExtraFromSegmentWithAngle(e,t){var n=e.prePoint,r=e.currentPoint,i=e.nextPoint,o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),a=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),s=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),l=Math.acos((o+a-s)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!l||0===Math.sin(l)||isNumberEqual$1(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-r[1],i[0]-r[0])),u=Math.abs(Math.atan2(i[0]-r[0],i[1]-r[1]));return c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u,{xExtra:Math.cos(l/2-c)*(t/2*(1/Math.sin(l/2)))-t/2||0,yExtra:Math.cos(u-l/2)*(t/2*(1/Math.sin(l/2)))-t/2||0}}function path(e){var t=e.attr(),n=t.path,r=t.stroke?t.lineWidth:0,i=getPathBox(e.get("segments")||getSegments(n),r),o=i.x,a=i.y,s={minX:o,minY:a,maxX:o+i.width,maxY:a+i.height};return{x:(s=mergeArrowBBox(e,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}function line(e){var t=e.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a={minX:Math.min(n,i),maxX:Math.max(n,i),minY:Math.min(r,o),maxY:Math.max(r,o)};return{x:(a=mergeArrowBBox(e,a)).minX,y:a.minY,width:a.maxX-a.minX,height:a.maxY-a.minY}}function ellipse(e){var t=e.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;return{x:n-i,y:r-o,width:2*i,height:2*o}}register("rect",rect),register("image",rect),register("circle",circle),register("marker",circle),register("polyline",polyline),register("polygon",polygon),register("text",text),register("path",path),register("line",line),register("ellipse",ellipse);var G6GraphEvent=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.item=n.item,r.canvasX=n.canvasX,r.canvasY=n.canvasY,r.wheelDelta=n.wheelDelta,r.detail=n.detail,r}return __extends$x(t,e),t}(GraphEvent),uniqueId$1=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},formatPadding=function(e){if(isArray$1(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if(isNumber$1(e))return[e,e,e,e];if(isString$1(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},cloneEvent$2=function(e){var t=new G6GraphEvent(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},isViewportChanged$1=function(e){if(!e)return!1;for(var t=[1,0,0,0,1,0,0,0,1],n=0;n<9;n++)if(e[n]!==t[n])return!0;return!1},isNaN$2=function(e){return Number.isNaN(Number(e))},calculationItemsBBox$1=function(e){for(var t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++){var a=e[o].getBBox(),s=a.minX,l=a.minY,c=a.maxX,u=a.maxY;s<t&&(t=s),l<r&&(r=l),c>n&&(n=c),u>i&&(i=u)}return{x:Math.floor(t),y:Math.floor(r),width:Math.ceil(n)-Math.floor(t),height:Math.ceil(i)-Math.floor(r),minX:t,minY:r,maxX:n,maxY:i}},processParallelEdges=function(e,t,n,r,i){void 0===t&&(t=15),void 0===n&&(n="quadratic"),void 0===r&&(r=void 0),void 0===i&&(i=void 0);for(var o=e.length,a=2*t,s=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],l={},c=[],u={},h=0;h<o;h++){var d=e[h],f=d.source,p=d.target,g="".concat(f,"-").concat(p);if(!c[h]){l[g]||(l[g]=[]),c[h]=!0,l[g].push(d);for(var m=0;m<o;m++)if(h!==m){var v=e[m],y=v.source,b=v.target;c[m]||(f===b&&p===y?(l[g].push(v),c[m]=!0,u["".concat(y,"|").concat(b,"|").concat(l[g].length-1)]=!0):f===y&&p===b&&(l[g].push(v),c[m]=!0))}}}for(var x in l)for(var w=l[x],_=w.length,C=0;C<_;C++){var $=w[C];if($.source!==$.target)if(1===_&&r&&$.source!==$.target)$.type=r;else{$.type=n;var S=(C%2==0?1:-1)*(u["".concat($.source,"|").concat($.target,"|").concat(C)]?-1:1);$.curveOffset=_%2==1?S*Math.ceil(C/2)*a:S*(Math.floor(C/2)*a+t)}else i&&($.type=i),$.loopCfg={position:s[C%8],dist:20*Math.floor(C/8)+50}}return e};const BaseUtil=Object.freeze(Object.defineProperty({__proto__:null,uniqueId:uniqueId$1,formatPadding:formatPadding,cloneEvent:cloneEvent$2,isViewportChanged:isViewportChanged$1,isNaN:isNaN$2,calculationItemsBBox:calculationItemsBBox$1,processParallelEdges:processParallelEdges},Symbol.toStringTag,{value:"Module"}));var ext={};const require$$0$6=getAugmentedNamespace(esm);Object.defineProperty(ext,"__esModule",{value:!0});var gl_matrix_1=require$$0$6;function leftTranslate(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromTranslation(r,n),gl_matrix_1.mat3.multiply(e,r,t)}function leftRotate(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromRotation(r,n),gl_matrix_1.mat3.multiply(e,r,t)}function leftScale(e,t,n){var r=[0,0,0,0,0,0,0,0,0];return gl_matrix_1.mat3.fromScaling(r,n),gl_matrix_1.mat3.multiply(e,r,t)}function leftMultiply(e,t,n){return gl_matrix_1.mat3.multiply(e,n,t)}function transform$a(e,t){for(var n=e?[].concat(e):[1,0,0,0,1,0,0,0,1],r=0,i=t.length;r<i;r++){var o=t[r];switch(o[0]){case"t":leftTranslate(n,n,[o[1],o[2]]);break;case"s":leftScale(n,n,[o[1],o[2]]);break;case"r":leftRotate(n,n,o[1]);break;case"m":leftMultiply(n,n,o[1])}}return n}ext.leftTranslate=leftTranslate,ext.leftRotate=leftRotate,ext.leftScale=leftScale;var transform_1=ext.transform=transform$a;function direction(e,t){return e[0]*t[1]-t[0]*e[1]}function angleTo(e,t,n){var r=gl_matrix_1.vec2.angle(e,t),i=direction(e,t)>=0;return n?i?2*Math.PI-r:r:i?r:2*Math.PI-r}function vertical(e,t,n){return n?(e[0]=t[1],e[1]=-1*t[0]):(e[0]=-1*t[1],e[1]=t[0]),e}ext.direction=direction,ext.angleTo=angleTo,ext.vertical=vertical;var ViewController=function(){function e(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return e.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,n=this.graph.get("width"),r=t.get("height");return{x:(n-e[1]-e[3])/2+e[3],y:(r-e[0]-e[2])/2+e[0]}},e.prototype.fitCenter=function(e,t){var n,r=this.graph,i=r.get("group"),o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var a=1/0,s=1/0,l=-1/0,c=-1/0;o.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y;a>n&&(a=n),s>r&&(s=r),l<n&&(l=n),c<r&&(c=r)}));var u=i.getMatrix()||[1,0,0,0,1,0,0,0,1],h=applyMatrix$1({x:a,y:s},u),d=h.x,f=h.y,p=applyMatrix$1({x:l,y:c},u),g=p.x,m=p.y;n={minX:d,maxX:g,minY:f,maxY:m,width:g-d,height:m-f,x:d,y:f}}else n=i.getCanvasBBox();if(0!==n.width&&0!==n.height){var v=this.getViewCenter(),y=n.x+n.width/2,b=n.y+n.height/2;r.translate(v.x-y,v.y-b,e,t)}},e.prototype.animatedFitView=function(e,t,n,r,i,o,a,s){var l=this.graph;n=n||{duration:500,easing:"easeCubic"};var c=r.x+i.x-o.x-r.minX,u=r.y+i.y-o.y-r.minY;if(!isNaN$2(c)&&!isNaN$2(u)){var h=transform_1([1,0,0,0,1,0,0,0,1],[["t",c,u]]);if(s){var d=l.get("minZoom"),f=l.get("maxZoom"),p=a;d&&a<d?p=d:f&&a>f&&(p=f);var g=transform_1(h,[["t",-i.x,-i.y],["s",p,p],["t",i.x,i.y]]),m=getAnimateCfgWithCallback({animateCfg:n,callback:function(){e.setMatrix(g),l.emit("viewportchange",{action:"translate",matrix:h}),l.emit("viewportchange",{action:"zoom",matrix:g})}});e.stopAnimate(),e.setMatrix(t),e.animate((function(e){return{matrix:lerpArray(t,g,e)}}),m)}else{var v=getAnimateCfgWithCallback({animateCfg:n,callback:function(){l.emit("viewportchange",{action:"translate",matrix:h})}});e.animate((function(e){return{matrix:lerpArray(t,h,e)}}),v)}}},e.prototype.fitView=function(e,t){var n,r=this.graph,i=this.getFormatPadding(),o=r.get("width"),a=r.get("height"),s=r.get("group"),l=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var u=1/0,h=1/0,d=-1/0,f=-1/0;c.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y;u>n&&(u=n),h>r&&(h=r),d<n&&(d=n),f<r&&(f=r)})),n={minX:u,maxX:d,minY:h,maxY:f,width:d-u,height:f-h,x:u,y:h}}else n=s.getCanvasBBox();if(0!==n.width&&0!==n.height){var p=this.getViewCenter(),g={x:n.x+n.width/2,y:n.y+n.height/2},m=(o-i[1]-i[3])/n.width,v=(a-i[0]-i[2])/n.height,y=m;if(m>v&&(y=v),e)this.animatedFitView(s,l,t,n,p,g,y,!0);else{var b=p.x-g.x,x=p.y-g.y;if(isNaN$2(b)||isNaN$2(x))return;r.translate(b,x),r.zoom(y,p)}}},e.prototype.fitViewByRules=function(e,t,n){var r,i=e.onlyOutOfViewPort,o=void 0!==i&&i,a=e.direction,s=void 0===a?"both":a,l=e.ratioRule,c=void 0===l?"min":l,u=this.graph,h=this.getFormatPadding(),d=u.get("width"),f=u.get("height"),p=u.get("group"),g=p.getMatrix()||[1,0,0,0,1,0,0,0,1];p.resetMatrix();var m=u.getNodes();if(m.length>u.get("optimizeThreshold")){var v=1/0,y=1/0,b=-1/0,x=-1/0;m.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y;v>n&&(v=n),y>r&&(y=r),b<n&&(b=n),x<r&&(x=r)})),r={minX:v,maxX:b,minY:y,maxY:x,width:b-v,height:x-y,x:v,y:y}}else r=p.getCanvasBBox();if(0!==r.width&&0!==r.height){var w,_=this.getViewCenter(),C={x:r.x+r.width/2,y:r.y+r.height/2},$=(d-h[1]-h[3])/r.width,S=(f-h[0]-h[2])/r.height;if(w="x"===s?$:"y"===s?S:"max"===c?Math.max($,S):Math.min($,S),o&&(w=w<1?w:1),t)this.animatedFitView(p,g,n,r,_,C,w,!0);else{var E=u.getZoom()*w,A=u.get("minZoom");E<A&&(E=A),u.translate(_.x-C.x,_.y-C.y),u.zoomTo(E,_)}}},e.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return formatPadding(e)},e.prototype.focusPoint=function(e,t,n){var r=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),t){var s=(o.x-e.x)*a[0],l=(o.y-e.y)*a[4],c=0,u=0,h=0,d=0;this.graph.get("canvas").animate((function(e){h=s*e,d=l*e,r.graph.translate(h-c,d-u),c=h,u=d}),__assign$h({},n))}else this.graph.translate((o.x-e.x)*a[0],(o.y-e.y)*a[4])},e.prototype.getPointByCanvas=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),invertMatrix({x:e,y:t},n)},e.prototype.getPointByClient=function(e,t){var n=this.graph.get("canvas").getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},e.prototype.getClientByPoint=function(e,t){var n=this.graph.get("canvas"),r=this.getCanvasByPoint(e,t),i=n.getClientByPoint(r.x,r.y);return{x:i.x,y:i.y}},e.prototype.getCanvasByPoint=function(e,t){var n=this.graph.get("group").getMatrix();return n||(n=[1,0,0,0,1,0,0,0,1]),applyMatrix$1({x:e,y:t},n)},e.prototype.focus=function(e,t,n){if(isString$1(e)&&(e=this.graph.findById(e)),e){var r=0,i=0;if(e.getType&&"edge"===e.getType()){var o=e.getSource().get("group").getMatrix(),a=e.getTarget().get("group").getMatrix();o&&a?(r=(o[6]+a[6])/2,i=(o[7]+a[7])/2):(o||a)&&(r=o?o[6]:a[6],i=o?o[7]:a[7])}else{var s=e.get("group").getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),r=s[6],i=s[7]}this.focusPoint({x:r,y:i},t,n)}},e.prototype.focusItems=function(e,t,n,r){if(e.length){var i=this.graph,o=this.getFormatPadding(),a=i.get("width"),s=i.get("height"),l=i.get("group"),c=l.getMatrix()||[1,0,0,0,1,0,0,0,1];l.resetMatrix();for(var u={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},h=0,d=e;h<d.length;h++){var f=d[h].getBBox();f.minX<u.minX&&(u.minX=f.minX),f.minY<u.minY&&(u.minY=f.minY),f.maxX>u.maxX&&(u.maxX=f.maxX),f.maxY>u.maxY&&(u.maxY=f.maxY)}if(u.x=u.minX,u.y=u.minY,u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,0!==u.width&&0!==u.height){var p=this.getViewCenter(),g={x:u.x+u.width/2,y:u.y+u.height/2},m=(a-o[1]-o[3])/u.width,v=(s-o[0]-o[2])/u.height,y=m;m>v&&(y=v),n?this.animatedFitView(l,c,r,u,p,g,y,t):(i.translate(p.x-g.x,p.y-g.y),t&&i.zoom(y,p))}}},e.prototype.changeSize=function(e,t){var n=this.graph;if(!isNumber$1(e)||!isNumber$1(t))throw Error("invalid canvas width & height, please make sure width & height type is number");n.set({width:e,height:t}),n.get("canvas").changeSize(e,t),n.get("plugins").forEach((function(e){e.get("gridContainer")&&e.positionInit()}))},e.prototype.destroy=function(){this.graph=null,this.destroyed=!1},e}();function _typeof$8(e){return(_typeof$8="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function looseJSONParse(e){if("string"!=typeof e)return e;var t=function(e){if("string"!=typeof e)return e;try{return JSON.parse(e.trim())}catch(e11){return e.trim()}},n=t(e);if("string"!=typeof n)return n;for(var r=function(e){return e[e.length-1]},i=e.trim(),o=[],a=[],s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some((function(e){return r(a)===e}))},l=null,c=0,u="";c<i.length;){var h=i[c],d=s('"',"'");if(d||h.trim()){var f="\\"===i[c-1],p=s("}"),g=s("]"),m=s(","),v=r(o);if(d)if(r(a)!==h||f)u+=h;else{a.pop();var y=t(u);v.push(y),l=y,u=""}else if(g&&","===h)u&&(v.push(t(u)),u="");else if(p&&":"===h)a.push(","),u&&(v.push(u),u="");else if(m&&","===h)u&&(v.push(t(u)),u=""),a.pop();else if("}"===h&&(p||m)){u&&(v.push(t(u)),u=""),m&&a.pop();for(var b={},x=1;x<v.length;x+=2)b[v[x-1]]=v[x];o.pop(),o.length&&r(o).push(b),a.pop(),l=b}else"]"===h&&g?(u&&(v.push(t(u)),u=""),o.pop(),o.length&&r(o).push(v),a.pop(),l=v):"{"===h?(o.push([]),a.push("}")):"["===h?(o.push([]),a.push("]")):'"'===h?a.push('"'):"'"===h?a.push("'"):u+=h;c+=1}else c+=1}return l||u}var keyConvert=function(e){return e.split("-").reduce((function(e,t){return e+t.charAt(0).toUpperCase()+t.slice(1)}))},xmlDataRenderer=function(e){return function(t){for(var n=e.length,r=[],i=0,o="";i<n;)if("{"===e[i]&&"{"===e[i+1])r.push(o),o="",i+=2;else if("}"===e[i]&&"}"===e[i+1]){if(r.length){var a=r.pop();o=get$1(t,o,a.endsWith("=")?'"{'.concat(o,'}"'):o),r.push(a+o)}i+=2,o=""}else o+=e[i],i+=1;return r.push(o),r.map((function(e,t){return r[t-1]&&r[t-1].endsWith("=")?'"{'.concat(e,'}"'):e})).join("")}};function parseXML(e,t){var n={},r=e.getAttributeNames&&e.getAttributeNames()||[],i=e.children&&Array.from(e.children).map((function(e){return parseXML(e,t)})),o={},a=e.tagName?e.tagName.toLowerCase():"group";return"text"===a&&(n.text=e.innerText),o.type=a,"img"===a&&(o.type="image"),Array.from(r).forEach((function(t){var r=keyConvert(t),i=e.getAttribute(t);try{if("style"===r||"attrs"===r){var a=looseJSONParse(i);n=__assign$h(__assign$h({},n),a)}else o[r]=looseJSONParse(i)}catch(e11){if("style"===r)throw e11;o[r]=i}})),o.attrs=n,t&&t.style&&o.name&&"object"===_typeof$8(t.style[o.name])&&(o.attrs=__assign$h(__assign$h({},o.attrs),t.style[o.name])),t&&t.style&&o.keyshape&&(o.attrs=__assign$h(__assign$h({},o.attrs),t.style)),i.length&&(o.children=i),o}function getBBox(e,t,n){var r,i,o=e.attrs,a=void 0===o?{}:o,s={x:t.x||0,y:t.y||0,width:n.width||0,height:n.height||0};switch(e.type){case"maker":case"circle":a.r&&(i=2*a.r,r=2*a.r);break;case"text":a.text&&(i=getTextSize(a.text,a.fontSize||12)[0],r=16,s.y+=r,s.height=r,s.width=i,e.attrs=__assign$h({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(r=a.height)}return r>=0&&(s.height=r),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}function generateTarget(e,t){var n;void 0===t&&(t={x:0,y:0});var r=__assign$h({x:0,y:0,width:0,height:0},t);if(null===(n=e.children)||void 0===n?void 0:n.length){var i=e.attrs,o=void 0===i?{}:i,a=o.marginTop,s=__assign$h({},t);a&&(s.y+=a);for(var l=0;l<e.children.length;l++){e.children[l].attrs.key="".concat(o.key||"root"," -").concat(l," ");var c=generateTarget(e.children[l],s);if(c.bbox){var u=c.bbox;"inline"===c.attrs.next?s.x+=c.bbox.width:s.y+=c.bbox.height,u.width+u.x>r.width&&(r.width=u.width+u.x),u.height+u.y>r.height&&(r.height=u.height+u.y)}}}return e.bbox=getBBox(e,t,r),e.attrs=__assign$h(__assign$h({},e.attrs),e.bbox),e}function compareTwoTarget(e,t){var n,r,i,o,a=(e||{}).type,s=((null==t?void 0:t.attrs)||{}).key;if(s&&e&&(e.attrs.key=s),!e&&t)return{action:"delete",val:t,type:a,key:s};if(e&&!t)return{action:"add",val:e,type:a};if(!e&&!t)return{action:"same",type:a};var l=[];if((null===(n=e.children)||void 0===n?void 0:n.length)>0||(null===(r=t.children)||void 0===r?void 0:r.length)>0)for(var c=Math.max(null===(i=e.children)||void 0===i?void 0:i.length,null===(o=t.children)||void 0===o?void 0:o.length),u=t.children||[],h=e.children||[],d=0;d<c;d+=1)l.push(compareTwoTarget(h[d],u[d]));var f=Object.keys(t.attrs),p=Object.keys(e.attrs);return t.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:t,key:s,children:l}:f.filter((function(e){return"children"!==e})).some((function(n){return e.attrs[n]!==t.attrs[n]||!p.includes(n)}))?{action:"change",val:e,children:l,type:a,key:s}:{action:"same",children:l,type:a,key:s}}function createNodeFromXML(e){var t={},n=function(t){var n="function"==typeof e?e(t):e,r=xmlDataRenderer(n)(t),i=document.createElement("div");i.innerHTML=r;var o=generateTarget(parseXML(i.children[0],t));return i.remove(),o};return{draw:function(e,r){var i=n(e),o=r;return function e(t){var n=t.attrs,i=void 0===n?{}:n,a=t.bbox,s=t.type,l=t.children,c=__rest$2(t,["attrs","bbox","type","children"]);if("group"!==t.type){var u=r.addShape(t.type,__assign$h({attrs:i,origin:{bbox:a,type:s,children:l}},c));t.keyshape&&(o=u)}t.children&&t.children.forEach((function(t){return e(t)}))}(i),t[e.id]=[i],o},update:function(e,r){t[e.id]||(t[e.id]=[]);var i=r.getContainer(),o=i.get("children"),a=n(e),s=compareTwoTarget(a,t[e.id].pop()),l=function e(t){var n;"group"!==t.type&&i.addShape(t.type,{attrs:t.attrs}),(null===(n=t.children)||void 0===n?void 0:n.length)&&t.children.map((function(t){return e(t)}))},c=function e(t){var n,r=o.find((function(e){return e.attrs.key===t.attrs.key}));r&&i.removeChild(r),(null===(n=t.children)||void 0===n?void 0:n.length)&&t.children.map((function(t){return e(t)}))};!function e(t){var n=t.key;if("group"!==t.type){var i=o.find((function(e){return e.attrs.key===n}));switch(t.action){case"change":if(i){var a=t.val.keyshape?r.getOriginStyle():{};i.attr(__assign$h(__assign$h({},a),t.val.attrs))}break;case"add":l(t.val);break;case"delete":c(t.val);break;case"restructure":c(t.formerTarget),l(t.nowTarget)}}t.children&&t.children.forEach((function(t){return e(t)}))}(s),t[e.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var cache={};function ucfirst(e){return cache[e]||(cache[e]=upperFirst(e)),cache[e]}var ShapeFactoryBase={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this;return t[e]||t[t.defaultShapeType]||t["simple-circle"]},draw:function(e,t,n){var r=this.getShape(e);n.shapeMap={};var i=r.draw(t,n);return r.afterDraw&&r.afterDraw(t,n,i),i},baseUpdate:function(e,t,n,r){var i,o,a=this.getShape(e);a.update&&(a.mergeStyle=null===(i=a.getOptions)||void 0===i?void 0:i.call(a,t,r),null===(o=a.update)||void 0===o||o.call(a,t,n,r)),a.afterUpdate&&a.afterUpdate(t,n)},setState:function(e,t,n,r){this.getShape(e).setState(t,n,r)},shouldUpdate:function(e){return!!this.getShape(e).update},getControlPoints:function(e,t){return this.getShape(e).getControlPoints(t)},getAnchorPoints:function(e,t){return this.getShape(e).getAnchorPoints(t)}},ShapeFramework={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints;return e.anchorPoints||t}},Shape$2=function(){function e(){}return e.registerFactory=function(t,n){var r=ucfirst(t),i=__assign$h(__assign$h({},ShapeFactoryBase),n);return e[r]=i,i.className=r,i},e.getFactory=function(t){return e[ucfirst(t)]},e.registerNode=function(t,n,r){var i,o=e.Node;if("string"==typeof n||"function"==typeof n){var a=createNodeFromXML(n);i=__assign$h(__assign$h({},o.getShape("single-node")),a)}else if(n.jsx){a=createNodeFromXML(n.jsx);i=__assign$h(__assign$h(__assign$h({},o.getShape("single-node")),a),n)}else{o.getShape(r);var s=r?o.getShape(r):ShapeFramework;i=__assign$h(__assign$h({},s),n)}return i.type=t,i.itemType="node",o[t]=i,i},e.registerEdge=function(t,n,r){var i=e.Edge,o=r?i.getShape(r):ShapeFramework,a=__assign$h(__assign$h({},o),n);return a.type=t,a.itemType="edge",i[t]=a,a},e.registerCombo=function(t,n,r){var i=e.Combo,o=r?i.getShape(r):ShapeFramework,a=__assign$h(__assign$h({},o),n);return a.type=t,a.itemType="combo",i[t]=a,a},e}();Shape$2.registerFactory("node",{defaultShapeType:"circle"}),Shape$2.registerFactory("edge",{defaultShapeType:"line"}),Shape$2.registerFactory("combo",{defaultShapeType:"circle"});var CACHE_BBOX$2="bboxCache",CACHE_CANVAS_BBOX$1="bboxCanvasCache",ItemBase=function(){function e(e){this._cfg={},this.destroyed=!1,this.optimize=!1;this._cfg=Object.assign({id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]},this.getDefaultCfg(),e);var t=this.get("model"),n=t.id,r=this.get("type");void 0===n?n=uniqueId$1(r):"string"!=typeof n&&(n=String(n)),this.get("model").id=n,this.set("id",n);var i=e.group;i&&(i.set("item",this),i.set("id",n)),this.init(),this.draw();var o=t.shape||t.type||("edge"===r?"line":"circle"),a=this.get("shapeFactory");if(a&&a[o]){var s=a[o].options;if(s&&s.stateStyles){var l=this.get("styles")||t.stateStyles;l=deepMix({},s.stateStyles,l),this.set("styles",l)}}}return e.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=getBBox$1(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),n=getBBox$1(e,t);return n.x=n.minX,n.y=n.minY,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),n=e.get("group"),r=e.get("model");n.clear();var i=r.visible;if(void 0===i||i||e.changeVisibility(i),t){e.updatePosition(r);var o=e.getShapeCfg(r),a=o.type,s=t.draw(a,o,n);s&&(e.set("keyShape",s),s.set("isKeyShape",!0),s.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",a),this.restoreStates(t,a)}},e.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),n=this.getKeyShape(),r=this,i=n.get("name");if(this.get("originStyle")){var o=this.get("originStyle");i&&!o[i]&&(o[i]={});var a=this.getCurrentStatesStyle(),s=function(e){var n=t[e],s=n.get("name"),l=n.attr();if(s&&s!==i){var c=a[s];o[s]||(o[s]={}),c?Object.keys(l).forEach((function(e){var t=l[e];t!==c[e]&&(o[s][e]=t)})):o[s]="image"!==n.get("type")?clone$9(l):r.getShapeStyleByName(s)}else{var u=n.attr(),h={};Object.keys(a).forEach((function(e){var t=a[e];e!==i&&isPlainObject$1(t)||(h[e]=t)})),Object.keys(u).forEach((function(e){var t=u[e];h[e]!==t&&(i?o[i][e]=t:o[e]=t)}))}};for(c=0;c<t.length;c++)s(c);delete o.path,delete o.matrix,delete o.x,delete o.y,o[i]&&(delete o[i].x,delete o[i].y,delete o[i].matrix,delete o[i].path),r.set("originStyle",o)}else{for(var l={},c=0;c<t.length;c++){var u=t[c],h=u.get("type"),d=u.get("name");if(d&&d!==i)l[d]="image"!==h?clone$9(u.attr()):r.getShapeStyleByName(d),"text"===h&&l[d]&&(delete l[d].x,delete l[d].y,delete l[d].matrix);else{var f=r.getShapeStyleByName();if(delete f.path,delete f.matrix,i)if(d)l[i]=f;else{var p=uniqueId$1("shape");u.set("name",p),e.shapeMap[p]=u,l[p]="image"!==h?clone$9(u.attr()):r.getShapeStyleByName(d)}else Object.assign(l,f)}}r.set("originStyle",l)}},e.prototype.restoreStates=function(e,t){var n=this;each(n.get("states"),(function(r){e.setState(t,r,!0,n)}))},e.prototype.init=function(){var e=Shape$2.getFactory(this.get("type"));this.set("shapeFactory",e)},e.prototype.get=function(e){return this._cfg[e]},e.prototype.set=function(e,t){isPlainObject$1(e)?this._cfg=__assign$h(__assign$h({},this._cfg),e):this._cfg[e]=t},e.prototype.getDefaultCfg=function(){return{}},e.prototype.clearCache=function(){this.set(CACHE_BBOX$2,null),this.set(CACHE_CANVAS_BBOX$1,null)},e.prototype.beforeDraw=function(){},e.prototype.afterDraw=function(){},e.prototype.afterUpdate=function(){},e.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},e.prototype.getShapeStyleByName=function(e){var t,n=this.get("group");if(t=e?n.shapeMap[e]:this.getKeyShape()){var r={};return each(t.attr(),(function(e,t){("img"!==t||isString$1(e))&&(r[t]=e)})),r}return{}},e.prototype.getShapeCfg=function(e,t){var n=this.get("styles");if(n){var r=e;return r.style=__assign$h(__assign$h({},n),e.style),r}return e},e.prototype.getStateStyle=function(e){var t=this.get("styles");return t&&t[e]},e.prototype.getOriginStyle=function(){return this.get("originStyle")},e.prototype.getCurrentStatesStyle=function(){var e=this,t={},n=e.getStates();return n&&n.length?(each(e.getStates(),(function(n){t=Object.assign(t,e.getStateStyle(n))})),t):this.get("originStyle")},e.prototype.setState=function(e,t){var n=this.get("states"),r=this.get("shapeFactory"),i=e,o=e;isString$1(t)&&(i="".concat(e,":").concat(t),o="".concat(e,":"));var a=n;if(isBoolean(t)){var s=n.indexOf(o);if(t){if(s>-1)return;n.push(i)}else s>-1&&n.splice(s,1)}else if(isString$1(t)){var l=n.filter((function(e){return e.includes(o)}));l.length>0&&this.clearStates(l),(a=a.filter((function(e){return!e.includes(o)}))).push(i),this.set("states",a)}if(r){var c=this.get("model").type;r.setState(c,e,t,this)}},e.prototype.clearStates=function(e){var t=this,n=t.getStates(),r=t.get("shapeFactory"),i=t.get("model").type;e||(e=n),isString$1(e)&&(e=[e]);var o=n.filter((function(t){return-1===e.indexOf(t)}));t.set("states",o),e.forEach((function(e){r.setState(i,e,!1,t)}))},e.prototype.setOptimize=function(e){this.optimize=e},e.prototype.getContainer=function(){return this.get("group")},e.prototype.getKeyShape=function(){return this.get("keyShape")},e.prototype.getModel=function(){return this.get("model")},e.prototype.getType=function(){return this.get("type")},e.prototype.getID=function(){return this.get("id")},e.prototype.isItem=function(){return!0},e.prototype.getStates=function(){return this.get("states")},e.prototype.hasState=function(e){return this.getStates().indexOf(e)>=0},e.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},e.prototype.getUpdateType=function(e){},e.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model");if("move"===t)this.updatePosition(e);else{var r=n.visible,i=e.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o={x:n.x,y:n.y};e.x=isNaN(+e.x)?n.x:+e.x,e.y=isNaN(+e.y)?n.y:+e.y;var a=this.get("styles");if(e.stateStyles)mix(a,e.stateStyles),delete e.stateStyles;Object.assign(n,e),o.x===e.x&&o.y===e.y||this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},e.prototype.updateShape=function(e){var t=this.get("shapeFactory"),n=this.get("model"),r=n.type;if(t.shouldUpdate(r)&&r===this.get("currentShape")){var i=this.getShapeCfg(n,e);t.baseUpdate(r,i,this,e),"move"!==e&&this.setOriginStyle()}else this.draw();this.restoreStates(t,r)},e.prototype.updatePosition=function(e){var t=this.get("model"),n=isNaN(+e.x)?+t.x:+e.x,r=isNaN(+e.y)?+t.y:+e.y,i=this.get("group");if(isNaN(n)||isNaN(r))return!1;t.x=n,t.y=r;var o=i.getMatrix();return(!o||o[6]!==n||o[7]!==r)&&(i.resetMatrix(),translate(i,{x:n,y:r}),this.clearCache(),!0)},e.prototype.getBBox=function(){var e=this.get(CACHE_BBOX$2);return e||(e=this.calculateBBox(),this.set(CACHE_BBOX$2,e)),e},e.prototype.getCanvasBBox=function(){var e=this.get(CACHE_CANVAS_BBOX$1);return e||(e=this.calculateCanvasBBox(),this.set(CACHE_CANVAS_BBOX$1,e)),e},e.prototype.toFront=function(){this.get("group").toFront()},e.prototype.toBack=function(){this.get("group").toBack()},e.prototype.show=function(){this.changeVisibility(!0)},e.prototype.hide=function(){this.changeVisibility(!1)},e.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},e.prototype.isVisible=function(){return this.get("visible")},e.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},e.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},e}(),END_MAP={source:"start",target:"end"},ITEM_NAME_SUFFIX="Node",POINT_NAME_SUFFIX="Point",ANCHOR_NAME_SUFFIX="Anchor",Edge$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},t.prototype.setEnd=function(e,t){var n=END_MAP[e]+POINT_NAME_SUFFIX,r=e+ITEM_NAME_SUFFIX,i=this.get(r);i&&!i.destroyed&&i.removeEdge(this),isPlainObject$1(t)?(this.set(n,t),this.set(r,null)):t&&(t.addEdge(this),this.set(r,t),this.set(n,null))},t.prototype.getLinkPoint=function(e,t,n){var r=END_MAP[e]+POINT_NAME_SUFFIX,i=e+ITEM_NAME_SUFFIX,o=this.get(r);if(!o){var a=this.get(i),s=e+ANCHOR_NAME_SUFFIX,l=this.getPrePoint(e,n),c=t[s];isNil(c)||(o=a.getLinkPointByAnchor(c)),o=o||a.getLinkPoint(l),isNil(o.index)||this.set("".concat(e,"AnchorIndex"),o.index)}return o},t.prototype.getPrePoint=function(e,t){if(t&&t.length)return t["source"===e?0:t.length-1];var n="source"===e?"target":"source";return this.getEndPoint(n)},t.prototype.getEndPoint=function(e){var t=e+ITEM_NAME_SUFFIX,n=END_MAP[e]+POINT_NAME_SUFFIX,r=this.get(t);return r&&!r.destroyed?r.get("model"):this.get(n)},t.prototype.getControlPointsByCenter=function(e){var t=this.getEndPoint("source"),n=this.getEndPoint("target"),r=this.get("shapeFactory"),i=e.type;return r.getControlPoints(i,{startPoint:t,endPoint:n})},t.prototype.getEndCenter=function(e){var t=e+ITEM_NAME_SUFFIX,n=END_MAP[e]+POINT_NAME_SUFFIX,r=this.get(t);if(r){var i=r.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(n)},t.prototype.init=function(){e.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},t.prototype.getShapeCfg=function(t,n){var r=this,i=r.get("linkCenter"),o=(null==n?void 0:n.includes("move"))?t:e.prototype.getShapeCfg.call(this,t);if(i)o.startPoint=r.getEndCenter("source"),o.endPoint=r.getEndCenter("target");else{var a=o.controlPoints||r.getControlPointsByCenter(o);o.startPoint=r.getLinkPoint("source",t,a),o.endPoint=r.getLinkPoint("target",t,a)}return o.sourceNode=r.get("sourceNode"),o.targetNode=r.get("targetNode"),o},t.prototype.getModel=function(){var e=this.get("model"),t=this.get("source".concat(ITEM_NAME_SUFFIX)),n=this.get("target".concat(ITEM_NAME_SUFFIX));return t?delete e["source".concat(ITEM_NAME_SUFFIX)]:e.source=this.get("start".concat(POINT_NAME_SUFFIX)),n?delete e["target".concat(ITEM_NAME_SUFFIX)]:e.target=this.get("end".concat(POINT_NAME_SUFFIX)),isString$1(e.source)||isPlainObject$1(e.source)||(e.source=e.source.getID()),isString$1(e.target)||isPlainObject$1(e.target)||(e.target=e.target.getID()),e},t.prototype.setSource=function(e){this.setEnd("source",e),this.set("source",e)},t.prototype.setTarget=function(e){this.setEnd("target",e),this.set("target",e)},t.prototype.getSource=function(){return this.get("source")},t.prototype.getTarget=function(){return this.get("target")},t.prototype.updatePosition=function(){return!1},t.prototype.update=function(e,t){void 0===t&&(t=void 0);var n=this.get("model"),r=n.visible,i=e.visible;r!==i&&void 0!==i&&this.changeVisibility(i);var o=this.get("source"),a=this.get("target");if(o&&!o.destroyed&&a&&!a.destroyed){var s=this.get("styles");if(e.stateStyles)mix(s,e.stateStyles),delete e.stateStyles;Object.assign(n,e),this.updateShape(t),this.afterUpdate(),this.clearCache()}},t.prototype.destroy=function(){var t=this.get("source".concat(ITEM_NAME_SUFFIX)),n=this.get("target".concat(ITEM_NAME_SUFFIX));t&&!t.destroyed&&t.removeEdge(this),n&&!n.destroyed&&n.removeEdge(this),e.prototype.destroy.call(this)},t}(ItemBase),CACHE_ANCHOR_POINTS$1="anchorPointsCache",CACHE_BBOX$1="bboxCache",Node$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getNearestPoint=function(e,t){for(var n=0,r=e[0],i=distance$4(e[0],t),o=0;o<e.length;o++){var a=e[o],s=distance$4(a,t);s<i&&(r=a,i=s,n=o)}return r.anchorIndex=n,r},t.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getInEdges=function(){var e=this;return this.get("edges").filter((function(t){return t.get("target")===e}))},t.prototype.getOutEdges=function(){var e=this;return this.get("edges").filter((function(t){return t.get("source")===e}))},t.prototype.getNeighbors=function(e){var t=this,n=this.get("edges");if("target"===e){return n.filter((function(e){return e.getSource()===t})).map((function(e){return e.getTarget()}))}if("source"===e){return n.filter((function(e){return e.getTarget()===t})).map((function(e){return e.getSource()}))}return n.map((function(e){return e.getSource()===t?e.getTarget():e.getSource()}))},t.prototype.getLinkPointByAnchor=function(e){return this.getAnchorPoints()[e]},t.prototype.getLinkPoint=function(e){var t,n,r=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(t=o.centerX||(o.maxX+o.minX)/2,n=o.centerY||(o.maxY+o.minY)/2):(t=o.centerX,n=o.centerY);var a,s=this.getAnchorPoints();switch(r){case"circle":a=getCircleIntersectByPoint({x:t,y:n,r:o.width/2},e);break;case"ellipse":a=getEllipseIntersectByPoint({x:t,y:n,rx:o.width/2,ry:o.height/2},e);break;default:a=getRectIntersectByPoint(o,e)}var l=a;return s.length&&(l||(l=e),l=this.getNearestPoint(s,l)),l||(l={x:t,y:n}),l},t.prototype.getAnchorPoints=function(){var e=this.get(CACHE_ANCHOR_POINTS$1);if(!e){e=[];var t=this.get("shapeFactory"),n=this.getBBox(),r=this.get("model"),i=this.getShapeCfg(r),o=r.type;each(t.getAnchorPoints(o,i)||[],(function(t,r){var i={x:n.minX+t[0]*n.width,y:n.minY+t[1]*n.height,anchorIndex:r};e.push(i)})),this.set(CACHE_ANCHOR_POINTS$1,e)}return e},t.prototype.addEdge=function(e){this.get("edges").push(e)},t.prototype.lock=function(){this.set("locked",!0)},t.prototype.unlock=function(){this.set("locked",!1)},t.prototype.hasLocked=function(){return this.get("locked")},t.prototype.removeEdge=function(e){var t=this.getEdges(),n=t.indexOf(e);n>-1&&t.splice(n,1)},t.prototype.clearCache=function(){this.set(CACHE_BBOX$1,null),this.set(CACHE_ANCHOR_POINTS$1,null)},t.prototype.getUpdateType=function(e){var t,n,r,i,o;if(e){var a=!isNil(e.x),s=!isNil(e.y),l=Object.keys(e);return 1===l.length&&(a||s)||2===l.length&&a&&s?"move":isNumber$1(e.x)||isNumber$1(e.y)||e.type||e.anchorPoints||e.size||(null==e?void 0:e.style)&&((null===(t=null==e?void 0:e.style)||void 0===t?void 0:t.r)||(null===(n=null==e?void 0:e.style)||void 0===n?void 0:n.width)||(null===(r=null==e?void 0:e.style)||void 0===r?void 0:r.height)||(null===(i=null==e?void 0:e.style)||void 0===i?void 0:i.rx)||(null===(o=null==e?void 0:e.style)||void 0===o?void 0:o.ry))?"bbox|label":l.includes("label")||l.includes("labelCfg")?"style|label":"style"}},t.prototype.setState=function(t,n){var r=this;this.optimize?e.prototype.setState.call(this,t,n):this.runWithBBoxAffected((function(){return e.prototype.setState.call(r,t,n)}))},t.prototype.clearStates=function(t){var n=this;this.optimize?e.prototype.clearStates.call(this,t):this.runWithBBoxAffected((function(){return e.prototype.clearStates.call(n,t)}))},t.prototype.runWithBBoxAffected=function(e){var t=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),r={};Object.keys(this.getKeyShape().attr()).forEach((function(e){t.includes(e)&&(r[e]=n[e])})),e();for(var i=this.getKeyShape().attr(),o=0;o<t.length;o++){var a=t[o];if(i[a]!==r[a]){this.clearCache(),this.getEdges().forEach((function(e){return e.refresh()}));break}}},t}(ItemBase),CACHE_BBOX="bboxCache",CACHE_CANVAS_BBOX="bboxCanvasCache",CACHE_SIZE="sizeCache",CACHE_ANCHOR_POINTS="anchorPointsCache",Combo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},t.prototype.getShapeCfg=function(e){var t=this.get("styles"),n=this.get("bbox");if(t&&n){var r=e,i={r:n.width/2||Global$1.defaultCombo.size[0]/2,width:n.width||Global$1.defaultCombo.size[0],height:n.height||Global$1.defaultCombo.size[1]};r.style=__assign$h(__assign$h(__assign$h({},t),e.style),i);var o=e.padding||Global$1.defaultCombo.padding;return isNumber$1(o)?(i.r+=o,i.width+=2*o,i.height+=2*o):(i.r=i.r+Math.max.apply(Math,o),i.width+=o[1]+o[3]||2*o[1],i.height+=o[0]+o[2]||2*o[0]),this.set(CACHE_SIZE,i),r}return e},t.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var e=this.get("keyShape"),t=this.get("group"),n=getBBox$1(e,t);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var r=this.get(CACHE_SIZE),i=this.get(CACHE_BBOX)||{},o=i.x,a=i.x;if(r)r.width=Math.max(r.width,n.width),r.height=Math.max(r.height,n.height),"circle"===e.get("type")?(n.width=2*r.r,n.height=2*r.r):(n.width=r.width,n.height=r.height),n.minX=n.centerX-n.width/2,n.minY=n.centerY-n.height/2,n.maxX=n.centerX+n.width/2,n.maxY=n.centerY+n.height/2;else n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;return n.x=n.minX,n.y=n.minY,n.x===o&&n.y===a||this.set(CACHE_ANCHOR_POINTS,null),n}},t.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.addChild=function(e){switch(e.getType()){case"node":this.addNode(e);break;case"combo":this.addCombo(e);break;default:return!1}return!0},t.prototype.addCombo=function(e){return this.get("combos").push(e),!0},t.prototype.addNode=function(e){return this.get("nodes").push(e),!0},t.prototype.removeChild=function(e){switch(e.getType()){case"node":this.removeNode(e);break;case"combo":this.removeCombo(e);break;default:return!1}return!0},t.prototype.removeCombo=function(e){if(e){var t=this.getCombos(),n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)}},t.prototype.removeNode=function(e){if(e){var t=this.getNodes(),n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)}},t.prototype.getUpdateType=function(e){},t.prototype.getBBox=function(){return this.set(CACHE_CANVAS_BBOX,null),this.calculateCanvasBBox()},t.prototype.clearCache=function(){this.set(CACHE_BBOX,null),this.set(CACHE_CANVAS_BBOX,null),this.set(CACHE_ANCHOR_POINTS,null)},t.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),this.set(CACHE_SIZE,null),this.set("bbox",null),t.remove(),this._cfg=null,this.destroyed=!0}},t}(Node$2),NODE$1="node",EDGE="edge",VEDGE="vedge",COMBO="combo",CFG_PREFIX="default",MAPPER_SUFFIX="Mapper",STATE_SUFFIX="stateStyles",ItemController=function(){function e(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=throttle((function(e){var n=t.graph;if(n&&!n.get("destroyed")){var r=t.edgeToBeUpdateMap;if(r){var i=Object.values(r);i.length&&(i.forEach((function(e){var t=e.edge;if(t&&!t.destroyed){var n=t.getSource(),r=t.getTarget();n&&!n.destroyed&&r&&!r.destroyed&&t.refresh(e.updateType)}})),t.edgeToBeUpdateMap={})}}}),16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return e.prototype.addItem=function(e,t){var n=this.graph,r=e===VEDGE?EDGE:e,i=n.get("".concat(r,"Group"))||n.get("group"),o=upperFirst(r),a=null,s=n.get(r+upperFirst(STATE_SUFFIX))||{},l=n.get(CFG_PREFIX+o);t[STATE_SUFFIX]&&(s=t[STATE_SUFFIX]),l&&each(l,(function(e,n){isObject(e)&&!isArray$1(e)?t[n]=deepMix({},e,t[n]):isArray$1(e)?t[n]=t[n]||clone$9(l[n]):t[n]=t[n]||l[n]}));var c=n.get(r+MAPPER_SUFFIX);if(c){var u=c(t);u[STATE_SUFFIX]&&(s=u[STATE_SUFFIX],delete u[STATE_SUFFIX]),each(u,(function(e,n){isObject(e)&&!isArray$1(e)?t[n]=deepMix({},t[n],e):t[n]=u[n]||t[n]}))}if(n.emit("beforeadditem",{type:e,model:t}),e===EDGE||e===VEDGE){var h=void 0,d=void 0;if(h=t.source,d=t.target,h&&isString$1(h)&&(h=n.findById(h)),d&&isString$1(d)&&(d=n.findById(d)),!h||!d)return;h.getType&&"combo"===h.getType()&&(t.isComboEdge=!0),d.getType&&"combo"===d.getType()&&(t.isComboEdge=!0),a=new Edge$1({model:t,source:h,target:d,styles:s,linkCenter:n.get("linkCenter"),group:i.addGroup()})}else if(e===NODE$1)a=new Node$2({model:t,styles:s,group:i.addGroup()});else if(e===COMBO){var f=t.children,p=getComboBBox(f,n),g=void 0,m=void 0;if(isNaN(p.x)?isNaN(t.x)&&(g=100*Math.random()):g=p.x,isNaN(p.y)?isNaN(t.y)&&(m=100*Math.random()):m=p.y,isNaN(t.x)||isNaN(t.y))t.x=g,t.y=m;else{var v=t.x-g,y=t.y-m;this.updateComboSucceeds(t.id,v,y,f)}var b=i.addGroup();b.setZIndex(t.depth),a=new Combo({model:t,styles:s,animate:n.get("animate"),bbox:t.collapsed?getComboBBox([],n):p,group:b}),t.collapsed||"circle"!==a.getKeyShape().get("type")||(p.width=Math.hypot(p.height,p.width),p.height=p.width,a.set("bbox",p),a.refresh());var x=a.getModel();(f||[]).forEach((function(e){var t=n.findById(e.id);a.addChild(t),e.depth=x.depth+2}))}if(a)return a.setOptimize(n.getNodes().length>n.get("optimizeThreshold")),n.get("".concat(e,"s")).push(a),n.get("itemMap")[a.get("id")]=a,n.emit("afteradditem",{item:a,model:t}),a},e.prototype.updateItem=function(e,t){var n,r,i=this,o=this.graph;if(isString$1(e)&&(e=o.findById(e)),e&&!e.destroyed){var a="";e.getType&&(a=e.getType());var s=o.get(a+MAPPER_SUFFIX),l=e.getModel(),c=l.x,u=l.y,h=e.getUpdateType(t);if(s){var d=s(deepMix({},l,t)),f=deepMix({},l,d,t);d[STATE_SUFFIX]&&(e.set("styles",f[STATE_SUFFIX]),delete f[STATE_SUFFIX]),each(f,(function(e,n){t[n]=e}))}else each(t,(function(e,n){l[n]&&isObject(e)&&!isArray$1(e)&&(t[n]=__assign$h(__assign$h({},l[n]),t[n]))}));if(o.emit("beforeupdateitem",{item:e,cfg:t}),a===EDGE){if(t.source){var p=t.source;isString$1(p)&&(p=o.findById(p)),e.setSource(p)}if(t.target){var g=t.target;isString$1(g)&&(g=o.findById(g)),e.setTarget(g)}e.update(t)}else if(a===NODE$1){e.update(t,h);var m=e.getEdges();"move"===h?each(m,(function(e){i.edgeToBeUpdateMap[e.getID()]={edge:e,updateType:h},i.throttleRefresh()})):(null==h?void 0:h.includes("bbox"))&&each(m,(function(e){e.refresh(h)}))}else if(a===COMBO){if(e.update(t,h),!isNaN(t.x)||!isNaN(t.y)){var v=t.x-c||0,y=t.y-u||0;this.updateComboSucceeds(l.id,v,y)}var b=e.getEdges();if(((null==h?void 0:h.includes("bbox"))||"move"===h)&&a===COMBO){var x=e.get("shapeFactory"),w=l.type||"circle";(void 0===l.animate||void 0===t.animate?null===(r=null===(n=x[w])||void 0===n?void 0:n.options)||void 0===r?void 0:r.animate:l.animate||t.animate)?setTimeout((function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&each(b,(function(e){e&&!e.destroyed&&e.refresh()}))}}),201):each(b,(function(e){e.refresh()}))}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},e.prototype.updateCombo=function(e,t,n){var r,i,o=this,a=this.graph;if(isString$1(e)&&(e=a.findById(e)),e&&!e.destroyed){var s=e.getModel(),l=getComboBBox(t,a,e),c=l.x,u=l.y;e.set("bbox",l);var h=c,d=u;n?(h=isNaN(s.x)?c:s.x,d=isNaN(s.y)?u:s.y):(h=isNaN(c)?s.x:c,d=isNaN(u)?s.y:u),e.update({x:h,y:d});var f=e.get("shapeFactory"),p=s.type||"circle";(void 0===s.animate?null===(i=null===(r=f[p])||void 0===r?void 0:r.options)||void 0===i?void 0:i.animate:s.animate)?setTimeout((function(){if(e&&!e.destroyed){var t=e.getKeyShape();t&&!t.destroyed&&(e.getShapeCfg(s),o.updateComboEdges(e))}}),201):this.updateComboEdges(e)}},e.prototype.updateComboEdges=function(e){for(var t,n,r=e.getEdges()||[],i=0;i<r.length;i++){var o=r[i];(null==o?void 0:o.destroyed)||(null===(t=null==o?void 0:o.getSource())||void 0===t?void 0:t.destroyed)||(null===(n=null==o?void 0:o.getTarget())||void 0===n?void 0:n.destroyed)||o.refresh()}},e.prototype.collapseCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph;isString$1(e)&&(e=n.findById(e));var r=e.getChildren();r.nodes.forEach((function(e){n.hideItem(e,t)})),r.combos.forEach((function(e){n.hideItem(e,t)}))},e.prototype.updateComboSucceeds=function(e,t,n,r){var i=this;void 0===r&&(r=[]);var o=this.graph;if(t||n){var a=r;if(!(null==a?void 0:a.length)){var s=o.get("comboTrees");null==s||s.forEach((function(t){traverseTree$2(t,(function(t){return t.id!==e||(a=t.children,!1)}))}))}null==a||a.forEach((function(e){var r=o.findById(e.id);if(r){var a=r.getModel();i.updateItem(e.id,{x:(a.x||0)+t,y:(a.y||0)+n})}}))}},e.prototype.expandCombo=function(e,t){void 0===t&&(t=!0);var n=this.graph;isString$1(e)&&(e=n.findById(e));var r=e.getChildren(),i=new Set;r.nodes.forEach((function(e){n.showItem(e,t),e.getEdges().forEach((function(e){return i.add(e)}))})),r.combos.forEach((function(e){e.getModel().collapsed?e.show():n.showItem(e,t),e.getEdges().forEach((function(e){return i.add(e)}))})),i.forEach((function(e){return e.refresh()}))},e.prototype.removeItem=function(e){var t=this,n=this.graph;if(isString$1(e)&&(e=n.findById(e)),e&&!e.destroyed){var r=clone$9(e.getModel()),i="";e.getType&&(i=e.getType()),n.emit("beforeremoveitem",{item:r,type:i});var o=n.get("".concat(i,"s")),a=o.indexOf(e);if(a>-1&&o.splice(a,1),i===EDGE){var s=n.get("v".concat(i,"s")),l=s.indexOf(e);l>-1&&s.splice(l,1)}var c=e.get("id");delete n.get("itemMap")[c];var u=n.get("comboTrees"),h=e.get("id");if(i===NODE$1){var d=e.getModel().comboId;if(u&&d){var f=u,p=!1;u.forEach((function(e){p||traverseTree$2(e,(function(e){if(e.id===h&&f){var t=f.indexOf(e);return f.splice(t,1),p=!0,!1}return f=e.children,!0}))}))}for(var g=(b=e.getEdges()).length-1;g>=0;g--)n.removeItem(b[g],!1);d&&n.updateCombo(d)}else if(i===COMBO){var m,v=e.getModel().parentId,y=!1;(u||[]).forEach((function(e){y||traverseTree$2(e,(function(e){return e.id!==h||(m=e,y=!0,!1)}))})),m.removed=!0,m&&m.children&&m.children.forEach((function(e){t.removeItem(e.id)}));var b;for(g=(b=e.getEdges()).length;g>=0;g--)n.removeItem(b[g],!1);v&&n.updateCombo(v)}e.destroy(),n.emit("afterremoveitem",{item:r,type:i})}},e.prototype.setItemState=function(e,t,n){var r=this.graph,i=t;isString$1(n)&&(i="".concat(t,":").concat(n)),e.hasState(i)===n&&n||isString$1(n)&&e.hasState(i)||(r.emit("beforeitemstatechange",{item:e,state:i,enabled:n}),e.setState(t,n),r.autoPaint(),r.emit("afteritemstatechange",{item:e,state:i,enabled:n}))},e.prototype.priorityState=function(e,t){var n=this.graph,r=e;isString$1(e)&&(r=n.findById(e)),this.setItemState(r,t,!1),this.setItemState(r,t,!0)},e.prototype.clearItemStates=function(e,t){var n=this.graph;isString$1(e)&&(e=n.findById(e)),n.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),n.emit("afteritemstatesclear",{item:e,states:t})},e.prototype.refreshItem=function(e){var t=this.graph;isString$1(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},e.prototype.addCombos=function(e,t){var n=this,r=this.graph;(e||[]).forEach((function(e){traverseTreeUp(e,(function(e){var r;return t.forEach((function(t){t.id===e.id&&(t.children=e.children,t.depth=e.depth,r=t)})),r&&n.addItem("combo",r),!0}))}));var i=r.get("comboGroup");i&&i.sort()},e.prototype.changeItemVisibility=function(e,t){var n=this,r=this.graph;if(isString$1(e)&&(e=r.findById(e)),e){if(r.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===NODE$1)each(e.getEdges(),(function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&n.changeItemVisibility(e,t)}));else if(e.getType&&e.getType()===COMBO){var i=r.get("comboTrees"),o=e.get("id"),a=[],s=!1;(i||[]).forEach((function(e){s||e.children&&0!==e.children.length&&traverseTree$2(e,(function(e){return e.id!==o||(a=e.children,s=!0,!1)}))})),a&&(!t||t&&!e.getModel().collapsed)&&a.forEach((function(e){var i=r.findById(e.id);n.changeItemVisibility(i,t)})),each(e.getEdges(),(function(e){(!t||e.get("source").isVisible()&&e.get("target").isVisible())&&n.changeItemVisibility(e,t)}))}return r.emit("afteritemvisibilitychange",{item:e,visible:t}),e}},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),StateController=function(){function e(e){this.graph=e,this.destroyed=!1}return e.prototype.updateState=function(e,t,n){var r=this.graph.get("states"),i=t;isString$1(n)&&(i="".concat(t,":").concat(n)),r[i]||(r[i]=[]),n?r[i].push(e):r[i]=r[i].filter((function(t){return t!==e})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:r})},e.prototype.updateStates=function(e,t,n){var r=this.graph.get("states");(isString$1(t)?[t]:t).forEach((function(t){var i=t;r[i]||(r[i]=[]),isString$1(n)&&(i="".concat(t,":").concat(n)),n?r[i].push(e):r[i]=r[i].filter((function(t){return t!==e}))})),this.graph.set("states",r),this.graph.emit("graphstatechange",{states:t})},e.prototype.destroy=function(){this.graph=null,this.destroyed=!0},e}(),substitute=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){if("\\"===e.charAt(0))return e.slice(1);var r=t[n];return 0===r&&(r="0"),r||""})):e},getSpline=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i.x,a=i.y;t.push(o),t.push(a)}var s=catmullRom2Bezier(t);return s.unshift(["M",e[0].x,e[0].y]),s},getControlPoint=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i={x:(1-n)*e.x+n*t.x,y:(1-n)*e.y+n*t.y},o=[0,0];normalize$1(o,[t.x-e.x,t.y-e.y]),o&&(o[0]||o[1])||(o=[0,0]);var a=[-o[1]*r,o[0]*r];return i.x+=a[0],i.y+=a[1],i},pointsToPolygon=function(e,t){var n=e.length;if(!n)return"";for(var r="",i=0;i<n;i++){var o=e[i];r+=substitute(0===i?"M{x} {y}":"L{x} {y}",o)}return t&&(r+="Z"),r},pathToPoints$1=function(e){var t=[];return e.forEach((function(e){if("A"!==e[0])for(var n=1;n<e.length;n+=2)t.push([e[n],e[n+1]]);else{var r=e.length;t.push([e[r-2],e[r-1]])}})),t},getClosedSpline=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],n=e[1],r=e[e.length-1],i=e[e.length-2];e.unshift(r),e.unshift(i),e.push(t),e.push(n);for(var o=[],a=1;a<e.length-2;a+=1){var s=e[a-1].x,l=e[a-1].y,c=e[a].x,u=e[a].y,h=e[a+1].x,d=e[a+1].y,f=c+(h-s)/6,p=u+(d-l)/6,g=h-((a!==e.length-2?e[a+2].x:h)-c)/6,m=d-((a!==e.length-2?e[a+2].y:d)-u)/6;o.push(["C",f,p,g,m,h,d])}return o.unshift(["M",r.x,r.y]),o},vecScaleTo=function(e,t){return scale$1([0,0],normalize$1([0,0],e),t)},unitNormal=function(e,t){var n=[e[1]-t[1],t[0]-e[0]],r=Math.sqrt(n[0]*n[0]+n[1]*n[1]);if(0===r)throw new Error("p0 should not be equal to p1");return[n[0]/r,n[1]/r]},vecFrom=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function roundedHull(e,t){var n,r,i;if(!e||e.length<1)return"";if(1===e.length)return r=[(n=e)[0][0],n[0][1]-t],i=[n[0][0],n[0][1]+t],"M ".concat(r," A ").concat(t,",").concat(t,",0,0,0,").concat(i," A ").concat(t,",").concat(t,",0,0,0,").concat(r);if(2===e.length)return function(e){var n=scale$1([0,0],unitNormal(e[0],e[1]),t),r=scale$1([0,0],n,-1),i=add$1([0,0],e[0],n),o=add$1([0,0],e[1],n),a=add$1([0,0],e[1],r),s=add$1([0,0],e[0],r);return"M ".concat(i," L ").concat(o," A ").concat([t,t,"0,0,0",a].join(",")," L ").concat(s," A ").concat([t,t,"0,0,0",i].join(","))}(e);for(var o=new Array(e.length),a=0;a<o.length;++a){var s=0===a?e[e.length-1]:e[a-1],l=e[a],c=scale$1([0,0],unitNormal(s,l),t);o[a]=[add$1([0,0],s,c),add$1([0,0],l,c)]}var u="A ".concat([t,t,"0,0,0,"].join(","));return(o=o.map((function(e,t){var n="";return 0===t&&(n="M ".concat(o[o.length-1][1]," ")),n+="".concat(u+e[0]," L ").concat(e[1])}))).join(" ")}function paddedHull(e,t){var n,r,i,o=e.length;if(!e||o<1)return"";if(1===o)return r=[(n=e)[0][0],n[0][1]-t],i=[n[0][0],n[0][1]+t],"M ".concat(r," A ").concat([t,t,"0,0,0",i].join(",")," A ").concat([t,t,"0,0,0",r].join(","));if(2===o)return function(e){var n=vecFrom(e[0],e[1]),r=vecScaleTo(n,t),i=add$1([0,0],e[0],scale$1([0,0],r,-1)),o=add$1([0,0],e[1],r),a=1.2*t,s=vecScaleTo(normalize$1([0,0],n),a),l=scale$1([0,0],s,-1),c=add$1([0,0],i,l),u=add$1([0,0],o,l),h=add$1([0,0],i,s);return"M ".concat(i," C ").concat([c,u,o].join(",")," S ").concat([h,i].join(",")," Z")}(e);for(var a=e.map((function(t,n){var r=e[(n+1)%o];return{p:t,v:normalize$1([0,0],vecFrom(t,r))}})),s=0;s<a.length;++s){var l=normalize$1([0,0],add$1([0,0],a[s>0?s-1:o-1].v,scale$1([0,0],a[s].v,-1)));a[s].p=add$1([0,0],a[s].p,scale$1([0,0],l,t))}return a.map((function(e){var t=e.p;return{x:t[0],y:t[1]}}))}var getStarPath=function(e,t){for(var n=[],r=0;r<5;r++){var i=Math.cos((18+72*r)/180*Math.PI)*e,o=Math.sin((18+72*r)/180*Math.PI)*e,a=Math.cos((54+72*r)/180*Math.PI)*t,s=Math.sin((54+72*r)/180*Math.PI)*t;0===r?n.push(["M",i,-o]):n.push(["L",i,-o]),n.push(["L",a,-s])}return n.push(["Z"]),n};const PathUtil$1=Object.freeze(Object.defineProperty({__proto__:null,getSpline:getSpline,getControlPoint:getControlPoint,pointsToPolygon:pointsToPolygon,pathToPoints:pathToPoints$1,getClosedSpline:getClosedSpline,roundedHull:roundedHull,paddedHull:paddedHull,getStarPath:getStarPath},Symbol.toStringTag,{value:"Module"}));var cross=function(e,t,n){return(e.y-n.y)*(t.x-n.x)-(e.x-n.x)*(t.y-n.y)},genConvexHull=function(e){var t=e.map((function(e){return{x:e.getModel().x,y:e.getModel().y}}));if(t.sort((function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x})),1===t.length)return t;for(var n=[],r=0;r<t.length;r++){for(;n.length>=2&&cross(n[n.length-2],n[n.length-1],t[r])<=0;)n.pop();n.push(t[r])}var i=[];for(r=t.length-1;r>=0;r--){for(;i.length>=2&&cross(i[i.length-2],i[i.length-1],t[r])<=0;)i.pop();i.push(t[r])}return i.pop(),n.pop(),n.concat(i)},defaultOps={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function MarchingSquares(e,t,n){var r=!1,i=function(e,n){return t.cells[e+n*t.width]},o=function(e,t){var r=0;return i(e-1,t-1)>=n&&(r+=1),i(e,t-1)>n&&(r+=2),i(e-1,t)>n&&(r+=4),i(e,t)>n&&(r+=8),r},a=function(n,r){for(var i,a,s=n,l=r,c=0;c<t.width*t.height;c++){if(i=s,a=l,e.findIndex((function(e){return e.x===s&&e.y===l}))>-1){if(e[0].x===s&&e[0].y===l)return!0}else e.push({x:s,y:l});switch(o(s,l)){case-1:return!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:l--;break;case 9:1===i&&(0===a?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return!0}}};this.march=function(){for(var e=0;e<t.width&&!r;e+=1)for(var s=0;s<t.height&&!r;s+=1)i(e,s)>n&&15!==o(e,s)&&(r=a(e,s));return r}}var initGridCells=function(e,t,n){var r=Math.ceil(e/n),i=Math.ceil(t/n);return{cells:new Float32Array(Math.max(0,r*i)).fill(0),width:r,height:i}},pickBestNeighbor=function(e,t,n){var r=null,i=Number.POSITIVE_INFINITY;return t.forEach((function(t){var o={x:e.getModel().x,y:e.getModel().y},a={x:t.getModel().x,y:t.getModel().y},s=squareDist(o,a),l=new Line$4(o.x,o.y,a.x,a.y),c=n.reduce((function(e,t){return fractionToLine(t,l)>0?e+1:e}),0);s*Math.pow(c+1,2)<i&&(r=t,i=s*Math.pow(c+1,2))})),r},getIntersectItem=function(e,t){var n=Number.POSITIVE_INFINITY,r=null;return e.forEach((function(e){var i=fractionToLine(e,t);i>=0&&i<n&&(r=e,n=i)})),r},computeRoute=function(e,t,n,r){var i=[],o=[];o.push(e);for(var a=!0,s=0,l=function(e,t){var n=!1;return t.forEach((function(t){n||(isPointsOverlap(e,{x:t.x1,y:t.y1})||isPointsOverlap(e,{x:t.x2,y:t.y2}))&&(n=!0)})),n},c=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(isPointInPolygon(o,e.x,e.y))return!0}return!1};a&&s<n;){a=!1;for(var u=function(){var e=o.pop(),n=getIntersectItem(t,e);if(n){var u=itemIntersectByLine(n,e),h=u[0];if(2===u[1]){var d=function(s){for(var u=r,d=rerouteLine(n,u,h,s),f=l(d,o)||l(d,i),p=c(d,t);!f&&p&&u>=1;)d=rerouteLine(n,u/=1.5,h,s),f=l(d,o)||l(d,i),p=c(d,t);!d||f||s&&p||(o.push(new Line$4(e.x1,e.y1,d.x,d.y)),o.push(new Line$4(d.x,d.y,e.x2,e.y2)),a=!0)};d(!0),a||d(!1)}}a||i.push(e),s+=1};!a&&o.length;)u()}for(;o.length;)i.push(o.pop());return i};function getRoute(e,t,n,r,i){var o=pickBestNeighbor(e,n,t);if(null===o)return[];var a=new Line$4(e.getModel().x,e.getModel().y,o.getModel().x,o.getModel().y);return function(e){for(var n=[];e.length>0;){var r=e.pop();if(0===e.length){n.push(r);break}var i=e.pop(),o=new Line$4(r.x1,r.y1,i.x2,i.y2);getIntersectItem(t,o)?(n.push(r),e.push(i)):e.push(o)}return n}(computeRoute(a,t,r,i))}var genBubbleSet=function(e,t,n){var r=Object.assign(defaultOps,n),i=getPointsCenter(e.map((function(e){return{x:e.getModel().x,y:e.getModel().y}})));e=e.sort((function(e,t){return squareDist({x:e.getModel().x,y:e.getModel().y},i)-squareDist({x:t.getModel().x,y:t.getModel().y},i)}));var o=[],a=[];e.forEach((function(e){getRoute(e,t,o,r.maxRoutingIterations,r.morphBuffer).forEach((function(e){a.push(e)})),o.push(e)}));for(var s=getActiveRregion(e,a,r.nodeR0),l=initGridCells(s.width,s.height,r.pixelGroupSize),c=[],u=[],h=0;h<r.maxMarchingIterations;h++)if(fillPotentialArea(e,t,a,s,l,r),u=[],new MarchingSquares(c=[],l,r.threshold).march()){var d=c.map((function(e){return{x:Math.round(e.x*r.pixelGroupSize+s.minX),y:Math.round(e.y*r.pixelGroupSize+s.minY)}}));if(d){var f=d.length;if(r.skip>1)for(f=Math.floor(d.length/r.skip);f<3&&r.skip>1;)r.skip-=1,f=Math.floor(d.length/r.skip);for(var p=0,g=0;g<f;g+=1,p+=r.skip)u.push({x:d[p].x,y:d[p].y})}if(u&&function(){for(var t=0,n=e;t<n.length;t++){var r=n[t],i=u.map((function(e){return[e.x,e.y]}));if(!isPointInPolygon(i,r.getBBox().centerX,r.getBBox().centerY))return!1}return!0}())return u;if(r.threshold*=.9,h<=.5*r.maxMarchingIterations)r.memberInfluenceFactor*=1.2,r.edgeInfluenceFactor*=1.2;else{if(!(0!==r.nonMemberInfluenceFactor&&t.length>0))break;r.nonMemberInfluenceFactor*=.8}}return u};function getActiveRregion(e,t,n){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];e.forEach((function(e){i.push(e.getBBox())})),t.forEach((function(e){i.push(e.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];r.minX=(s.minX<r.minX?s.minX:r.minX)-n,r.minY=(s.minY<r.minY?s.minY:r.minY)-n,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+n,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+n}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function fillPotentialArea(e,t,n,r,i,o){function a(e,t){var n=Math.floor((e-t)/o.pixelGroupSize);return n<0?0:n}function s(e,t){return e*o.pixelGroupSize+t}var l=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),c=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),u=function(e,t){return[Math.min(a(e.minX,t+r.minX),i.width),Math.min(a(e.minY,t+r.minY),i.height),Math.min(a(e.maxX,-t+r.minX),i.width),Math.min(a(e.maxY,-t+r.minY),i.height)]},h=function(e,t){for(var n=e.getBBox(),a=u(n,o.nodeR1),l=a[0],c=a[1],h=a[2],d=a[3],f=c;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(t<0&&i[p+f*i.width]<=0)){var g=s(p,r.minX),m=s(f,r.minY),v=pointRectSquareDist({x:g,y:m},{x:n.minX,y:n.minY,width:n.width,height:n.height});if(v<Math.pow(o.nodeR1,2)){var y=Math.sqrt(v)-o.nodeR1;i.cells[p+f*i.width]+=t*y*y}}};o.nodeInfluenceFactor&&e.forEach((function(e){h(e,o.nodeInfluenceFactor/l)})),o.edgeInfluenceFactor&&n.forEach((function(e){!function(e,t){for(var n=e.getBBox(),a=u(n,o.edgeR1),l=a[0],c=a[1],h=a[2],d=a[3],f=c;f<d;f+=1)for(var p=l;p<h;p+=1)if(!(t<0&&i.cells[p+f*i.width]<=0)){var g=s(p,r.minX),m=s(f,r.minY),v=pointLineSquareDist({x:g,y:m},e);if(v<Math.pow(o.edgeR1,2)){var y=Math.sqrt(v)-o.edgeR1;i.cells[p+f*i.width]+=t*y*y}}}(e,o.edgeInfluenceFactor/c)})),o.negativeNodeInfluenceFactor&&t.forEach((function(e){h(e,o.negativeNodeInfluenceFactor/l)}))}function rerouteLine(e,t,n,r){var i=e.getBBox(),o=n[0],a=n[1],s=n[2],l=n[3],c={topLeft:{x:i.minX-t,y:i.minY-t},topRight:{x:i.maxX+t,y:i.minY-t},bottomLeft:{x:i.minX-t,y:i.maxY+t},bottomRight:{x:i.maxX+t,y:i.maxY+t}},u=i.height*i.width;function h(e,t){return i.width*(.5*(e.y-i.minY+(t.y-i.minY)))}if(a)return o?r?c.topLeft:c.bottomRight:s?r?c.bottomLeft:c.topRight:h(a,l)<.5*u?a.y>l.y?r?c.topLeft:c.bottomRight:r?c.topRight:c.bottomLeft:a.y<l.y?r?c.bottomLeft:c.topRight:r?c.bottomRight:c.topLeft;if(l){if(o)return r?c.topRight:c.bottomLeft;if(s)return r?c.bottomRight:c.topLeft}return h(o,s)<.5*u?o.x>s.x?r?c.topLeft:c.bottomRight:r?c.bottomLeft:c.topRight:o.x<s.x?r?c.topRight:c.bottomLeft:r?c.bottomRight:c.topLeft}var Hull=function(){function e(e,t){this.cfg=deepMix(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(t){return isString$1(t)?e.findById(t):t})),this.nonMembers=this.cfg.nonMembers.map((function(t){return isString$1(t)?e.findById(t):t})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return e.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},e.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},e.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(this.type="round-convex")},e.prototype.calcPath=function(e,t){var n,r,i;switch(this.type){case"round-convex":r=parsePathString(i=roundedHull((n=genConvexHull(e)).map((function(e){return[e.x,e.y]})),this.padding));break;case"smooth-convex":2===(n=genConvexHull(e)).length?r=parsePathString(i=roundedHull(n.map((function(e){return[e.x,e.y]})),this.padding)):n.length>2&&(i=paddedHull(n.map((function(e){return[e.x,e.y]})),this.padding),r=getClosedSpline(i));break;case"bubble":r=(n=genBubbleSet(e,t,this.cfg.bubbleCfg)).length>=2&&getClosedSpline(n)}return r},e.prototype.render=function(){this.group.addShape("path",{attrs:__assign$h({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},e.prototype.addMember=function(e){if(e){isString$1(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.addNonMember=function(e){if(e){isString$1(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},e.prototype.removeMember=function(e){if(e){isString$1(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1&&(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.removeNonMember=function(e){if(e){isString$1(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1&&(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0)}},e.prototype.updateData=function(e,t){var n=this;this.group.findById(this.id).remove(),e&&(this.members=e.map((function(e){return isString$1(e)?n.graph.findById(e):e}))),t&&(this.nonMembers=t.map((function(e){return isString$1(e)?n.graph.findById(e):e}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.updateStyle=function(e){this.group.findById(this.id).attr(__assign$h({},e))},e.prototype.updateCfg=function(e){var t=this;this.cfg=deepMix(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map((function(e){return isString$1(e)?t.graph.findById(e):e}))),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(e){return isString$1(e)?t.graph.findById(e):e}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},e.prototype.contain=function(e){var t,n,r=this,i=(t=isString$1(e)?this.graph.findById(e):e).getKeyShape();if("path"===t.get("type"))n=pathToPoints$1(i.attr("path"));else{var o=i.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map((function(e){var t=r.graph.getPointByCanvas(e[0],e[1]);return[t.x,t.y]})),isPolygonsIntersect$1(n,pathToPoints$1(this.path))},e.prototype.destroy=function(){this.group.remove(),this.cfg=null},e}(),transform$9=transform$d,NODE="node",AbstractGraph=function(e){function t(t){var n=e.call(this)||this;return n.sortCombos=debounce((function(){var e=n.get("comboSorted");if(n&&!n.destroyed&&!e){n.set("comboSorted",!0);var t=[],r={};(n.get("comboTrees")||[]).forEach((function(e){traverseTree$2(e,(function(e){return t[e.depth]?t[e.depth].push(e.id):t[e.depth]=[e.id],r[e.id]=e.depth,!0}))})),(n.getEdges().concat(n.get("vedges"))||[]).forEach((function(e){var n=e.getModel(),i=r[n.source]||0,o=r[n.target]||0,a=Math.max(i,o);t[a]?t[a].push(n.id):t[a]=[n.id]})),t.forEach((function(e){if(e&&e.length)for(var t=e.length-1;t>=0;t--){var r=n.findById(e[t]);r&&r.toFront()}}))}}),500,!1),n.cfg=deepMix(n.getDefaultCfg(),t),n.init(),n.animating=!1,n.destroyed=!1,n.cfg.enabledStack&&(n.undoStack=new Stack(n.cfg.maxStep),n.redoStack=new Stack(n.cfg.maxStep)),n}return __extends$x(t,e),t.prototype.init=function(){this.initCanvas();var e=new ViewController(this),t=new ModeController(this),n=new ItemController(this),r=new StateController(this);this.set({viewController:e,modeController:t,itemController:n,stateController:r}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},t.prototype.initGroups=function(){var e=this.get("canvas");if(e){var t=(e.get("el")||{}).id,n=void 0===t?"g6":t,r=e.addGroup({id:"".concat(n,"-root"),className:Global$1.rootContainerClassName});if(this.get("groupByTypes")){var i=r.addGroup({id:"".concat(n,"-edge"),className:Global$1.edgeContainerClassName}),o=r.addGroup({id:"".concat(n,"-node"),className:Global$1.nodeContainerClassName}),a=r.addGroup({id:"".concat(n,"-combo"),className:Global$1.comboContainerClassName});a.toBack(),this.set({nodeGroup:o,edgeGroup:i,comboGroup:a})}var s=r.addGroup({id:"".concat(n,"-delegate"),className:Global$1.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",r)}},t.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},t.prototype.set=function(e,t){return isPlainObject$1(e)?this.cfg=__assign$h(__assign$h({},this.cfg),e):this.cfg[e]=t,"enabledStack"!==e||!t||this.undoStack||this.redoStack||(this.undoStack=new Stack(this.cfg.maxStep),this.redoStack=new Stack(this.cfg.maxStep)),this},t.prototype.get=function(e){var t;return null===(t=this.cfg)||void 0===t?void 0:t[e]},t.prototype.getGroup=function(){return this.get("group")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.getMinZoom=function(){return this.get("minZoom")},t.prototype.setMinZoom=function(e){return this.set("minZoom",e)},t.prototype.getMaxZoom=function(){return this.get("maxZoom")},t.prototype.setMaxZoom=function(e){return this.set("maxZoom",e)},t.prototype.getWidth=function(){return this.get("width")},t.prototype.getHeight=function(){return this.get("height")},t.prototype.clearItemStates=function(e,t){isString$1(e)&&(e=this.findById(e));var n=this.get("itemController");t||(t=e.get("states")),n.clearItemStates(e,t),this.get("stateController").updateStates(e,t,!1)},t.prototype.node=function(e){"function"==typeof e&&this.set("nodeMapper",e)},t.prototype.edge=function(e){"function"==typeof e&&this.set("edgeMapper",e)},t.prototype.combo=function(e){"function"==typeof e&&this.set("comboMapper",e)},t.prototype.findById=function(e){return this.get("itemMap")[e]},t.prototype.find=function(e,t){var n;return each(this.get("".concat(e,"s")),(function(e,r){if(t(e,r))return n=e})),n},t.prototype.findAll=function(e,t){var n=[];return each(this.get("".concat(e,"s")),(function(e,r){t(e,r)&&n.push(e)})),n},t.prototype.findAllByState=function(e,t,n){return n?this.findAll(e,(function(e){return e.hasState(t)&&n(e)})):this.findAll(e,(function(e){return e.hasState(t)}))},t.prototype.translate=function(e,t,n,r){var i=this,o=this.get("group"),a=clone$9(o.getMatrix());if(a||(a=[1,0,0,0,1,0,0,0,1]),n){var s=getAnimateCfgWithCallback({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"translate",matrix:o.getMatrix()})}});move(o,{x:o.getCanvasBBox().x+e,y:o.getCanvasBBox().y+t},n,s||{duration:500,easing:"easeCubic"})}else a=transform$9(a,[["t",e,t]]),o.setMatrix(a),this.emit("viewportchange",{action:"translate",matrix:a}),this.autoPaint()},t.prototype.moveTo=function(e,t,n,r){var i=this.get("group");move(i,{x:e,y:t},n,r||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:i.getMatrix()})},t.prototype.fitView=function(e,t,n,r){e&&this.set("fitViewPadding",e);var i=this.get("viewController");t?i.fitViewByRules(t,n,r):i.fitView(n,r),this.autoPaint()},t.prototype.fitCenter=function(e,t){this.get("viewController").fitCenter(e,t),this.autoPaint()},t.prototype.addBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!0),this},t.prototype.removeBehaviors=function(e,t){return this.get("modeController").manipulateBehaviors(e,t,!1),this},t.prototype.updateBehavior=function(e,t,n){return this.get("modeController").updateBehavior(e,t,n),this},t.prototype.zoom=function(e,t,n,r){var i=this,o=this.get("group"),a=clone$9(o.getMatrix())||[1,0,0,0,1,0,0,0,1],s=this.get("minZoom"),l=this.get("maxZoom"),c=this.getZoom()||1,u=c*e,h=e,d=!1;if(s&&u<s?(h=s/c,d=!0):l&&u>l&&(h=l/c,d=!0),a=transform$9(a,t?[["t",-t.x,-t.y],["s",h,h],["t",t.x,t.y]]:[["s",h,h]]),n){var f=clone$9(o.getMatrix());f||(f=[1,0,0,0,1,0,0,0,1]);var p=f[0],g=p*h,m=getAnimateCfgWithCallback({animateCfg:r,callback:function(){return i.emit("viewportchange",{action:"zoom",matrix:o.getMatrix()})}});o.animate((function(e){if(1===e)f=a;else{var n=lerp(p,g,e)/f[0];f=transform$9(f,t?[["t",-t.x,-t.y],["s",n,n],["t",t.x,t.y]]:[["s",n,n]])}return{matrix:f}}),m)}else o.setMatrix(a),this.emit("viewportchange",{action:"zoom",matrix:a}),this.autoPaint();return!d},t.prototype.zoomTo=function(e,t,n,r){var i=e/this.getZoom();return this.zoom(i,t,n,r)},t.prototype.focusItem=function(e,t,n){var r=this.get("viewController"),i=!1;t?i=!0:void 0===t&&(i=this.get("animate"));var o={};n?o=n:void 0===n&&(o=this.get("animateCfg")),r.focus(e,i,o),this.autoPaint()},t.prototype.focusItems=function(e,t,n,r){this.get("viewController").focusItems(e,t,n,r)},t.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},t.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},t.prototype.getPointByClient=function(e,t){return this.get("viewController").getPointByClient(e,t)},t.prototype.getClientByPoint=function(e,t){return this.get("viewController").getClientByPoint(e,t)},t.prototype.getPointByCanvas=function(e,t){return this.get("viewController").getPointByCanvas(e,t)},t.prototype.getCanvasByPoint=function(e,t){return this.get("viewController").getCanvasByPoint(e,t)},t.prototype.getGraphCenterPoint=function(){var e=this.get("group").getCanvasBBox();return{x:(e.minX+e.maxX)/2,y:(e.minY+e.maxY)/2}},t.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},t.prototype.showItem=function(e,t){void 0===t&&(t=!0);var n=this.get("itemController").changeItemVisibility(e,!0);if(t&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!1}],o.nodes=[{id:r,visible:!0}];break;case"edge":i.nodes=[{id:r,visible:!1}],o.edges=[{id:r,visible:!0}];break;case"combo":i.nodes=[{id:r,visible:!1}],o.combos=[{id:r,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},t.prototype.hideItem=function(e,t){void 0===t&&(t=!0);var n=this.get("itemController").changeItemVisibility(e,!1);if(t&&this.get("enabledStack")){var r=n.getID(),i={},o={};switch(n.getType()){case"node":i.nodes=[{id:r,visible:!0}],o.nodes=[{id:r,visible:!1}];break;case"edge":i.nodes=[{id:r,visible:!0}],o.edges=[{id:r,visible:!1}];break;case"combo":i.nodes=[{id:r,visible:!0}],o.combos=[{id:r,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},t.prototype.refreshItem=function(e){this.get("itemController").refreshItem(e)},t.prototype.setAutoPaint=function(e){this.set("autoPaint",e),this.get("canvas").set("autoDraw",e)},t.prototype.remove=function(e,t){void 0===t&&(t=!0),this.removeItem(e,t)},t.prototype.removeItem=function(e,t){void 0===t&&(t=!0);var n=e;if(isString$1(e)&&(n=this.findById(e)),!n&&isString$1(e));else if(n){var r="";if(n.getType&&(r=n.getType()),t&&this.get("enabledStack")){var i=__assign$h(__assign$h({},n.getModel()),{itemType:r}),o={};switch(r){case"node":o.nodes=[i],o.edges=[];for(var a=n.getEdges(),s=a.length-1;s>=0;s--)o.edges.push(__assign$h(__assign$h({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if("node"===r)n.getModel().comboId&&this.updateComboTree(n,void 0,!1);if(this.get("itemController").removeItem(n),"combo"===r){var l=reconstructTree(this.get("comboTrees"));this.set("comboTrees",l)}}},t.prototype.innerAddItem=function(e,t,n){if(!singleDataValidation(e,t))return!1;if(!t.id||!this.findById(t.id)){var r,i=this.get("comboTrees")||[];if("combo"===e){var o=this.get("itemMap"),a=!1;if(i.forEach((function(i){a||traverseTreeUp(i,(function(i){if(t.parentId===i.id){a=!0;var s=__assign$h({id:t.id,depth:i.depth+2},t);i.children?i.children.push(s):i.children=[s],t.depth=s.depth,r=n.addItem(e,t)}var l=o[i.id];return a&&l&&l.getType&&"combo"===l.getType()&&n.updateCombo(l,i.children),!0}))})),!a){var s=__assign$h({id:t.id,depth:0},t);t.depth=s.depth,i.push(s),r=n.addItem(e,t)}this.set("comboTrees",i),t.collapsed&&(this.collapseCombo(r,!1),this.updateCombo(r))}else if("node"===e&&isString$1(t.comboId)&&i){var l;(l=this.findById(t.comboId))&&l.getType&&l.getType(),r=n.addItem(e,t);var c=this.get("itemMap"),u=!1,h=!1;i.forEach((function(e){h||u||traverseTreeUp(e,(function(e){if(e.id===t.id)return h=!0,!1;if(t.comboId===e.id&&!h){u=!0;var r=clone$9(t);r.itemType="node",e.children?e.children.push(r):e.children=[r],r.depth=e.depth+1}return u&&c[e.id].getType&&"combo"===c[e.id].getType()&&n.updateCombo(c[e.id],e.children),!0}))}))}else r=n.addItem(e,t);if("node"===e&&t.comboId||"combo"===e&&t.parentId)(l=this.findById(t.comboId||t.parentId))&&l.getType&&"combo"===l.getType()&&l.addChild(r);return r}},t.prototype.addItem=function(e,t,n,r){void 0===n&&(n=!0),void 0===r&&(r=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!r);var o=this.get("itemController"),a=this.innerAddItem(e,t,o);if(!1===a||!0===a)return a;var s=this.get("combos");if(s&&s.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var l=__assign$h(__assign$h({},a.getModel()),{itemType:e}),c={};switch(e){case"node":c.nodes=[l];break;case"edge":c.edges=[l];break;case"combo":c.combos=[l]}this.pushStack("add",{before:{},after:c})}return a},t.prototype.addItems=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t=!0),void 0===n&&(n=!0);var r=this.get("comboSorted");this.set("comboSorted",r&&!n);for(var i=this.get("itemController"),o=[],a=0;a<e.length;a++){"edge"!==(s=e[a]).type&&"vedge"!==s.type?o.push(this.innerAddItem(s.type,s.model,i)):o.push(void 0)}for(a=0;a<e.length;a++){var s;"edge"!==(s=e[a]).type&&"vedge"!==s.type||(o[a]=this.innerAddItem(s.type,s.model,i))}if(n){var l=this.get("combos");l&&l.length>0&&this.sortCombos()}if(this.autoPaint(),t&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]};for(a=0;a<e.length;a++){var u=e[a].type,h=o[a];if(h&&!0!==h){var d=__assign$h(__assign$h({},h.getModel()),{itemType:u});switch(u){case"node":c.nodes.push(d);break;case"edge":c.edges.push(d);break;case"combo":c.combos.push(d)}}}this.pushStack("addItems",{before:{},after:c})}return o},t.prototype.add=function(e,t,n,r){return void 0===n&&(n=!0),void 0===r&&(r=!0),this.addItem(e,t,n,r)},t.prototype.updateItem=function(e,t,n){var r=this;void 0===n&&(n=!0);var i,o=this.get("itemController");i=isString$1(e)?this.findById(e):e;var a,s=n&&this.get("enabledStack");s&&(a=clone$9(i.getModel()));var l="";i.getType&&(l=i.getType());var c=__spreadArray$4([],i.getStates(),!0);if("combo"===l&&each(c,(function(e){return r.setItemState(i,e,!1)})),o.updateItem(i,t),"combo"===l&&each(c,(function(e){return r.setItemState(i,e,!0)})),s){var u={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},d=__assign$h({id:a.id},t);switch(l){case"node":u.nodes.push(a),h.nodes.push(d);break;case"edge":u.edges.push(a),h.edges.push(d);break;case"combo":u.combos.push(a),h.combos.push(d)}this.pushStack("update",{before:u,after:h})}},t.prototype.update=function(e,t,n){void 0===n&&(n=!0),this.updateItem(e,t,n)},t.prototype.setItemState=function(e,t,n){isString$1(e)&&(e=this.findById(e)),this.get("itemController").setItemState(e,t,n),this.get("stateController").updateState(e,t,n)},t.prototype.priorityState=function(e,t){this.get("itemController").priorityState(e,t)},t.prototype.data=function(e){dataValidation(e),this.set("data",e)},t.prototype.render=function(){var e=this;this.set("comboSorted",!1);var t=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!t)throw new Error("data must be defined first");var n=t.nodes,r=void 0===n?[]:n,i=t.edges,o=void 0===i?[]:i,a=t.combos,s=void 0===a?[]:a;if(this.clear(!0),this.emit("beforerender"),e.addItems(r.map((function(e){return{type:"node",model:e}})),!1,!1),0!==(null==s?void 0:s.length)){var l=plainCombosToTrees(s,r);this.set("comboTrees",l),e.addCombos(s)}e.addItems(o.map((function(e){return{type:"edge",model:e}})),!1,!1);var c=e.get("animate");(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",!1);var u=e.get("layoutController");if(u){if(u.layout(h),this.destroyed)return}else h();function h(){(e.get("comboTrees")||[]).forEach((function(t){traverseTreeUp(t,(function(t){var n=e.findById(t.id);return"combo"===n.getType()&&t.collapsed&&(e.collapseCombo(t.id,!1),e.updateCombo(n)),!0}))})),e.get("fitView")?e.fitView():e.get("fitCenter")&&e.fitCenter(),e.autoPaint(),e.emit("afterrender"),(e.get("fitView")||e.get("fitCenter"))&&e.set("animate",c),setTimeout((function(){var t;null===(t=e.getCombos())||void 0===t||t.forEach((function(e){e.set("animate",!0)}))}),0)}this.get("groupByTypes")||(s&&0!==s.length?this.sortCombos():t.nodes&&t.edges&&t.nodes.length<t.edges.length?this.getNodes().forEach((function(e){e.toFront()})):this.getEdges().forEach((function(e){e.toBack()})))},t.prototype.read=function(e){this.data(e),this.render()},t.prototype.diffItems=function(e,t,n){var r,i=this,o=this.get("itemMap");each(n,(function(n){if(r=o[n.id]){if(i.get("animate")&&e===NODE){var a=r.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),r.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(r,n,!1)}else r=i.addItem(e,n,!1);r&&t["".concat(e,"s")].push(r)}))},t.prototype.changeData=function(e,t){var n,r=this;void 0===t&&(t=!0);var i=this,o=e||i.get("data");if(!dataValidation(o))return this;this.emit("beforechangedata"),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:i.save(),after:o}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map((function(e){return i.clearItemStates(e)})),this.getEdges().map((function(e){return i.clearItemStates(e)}));var a=this.get("canvas"),s=a.get("localRefresh");a.set("localRefresh",!1),i.get("data")||(i.data(o),i.render());var l=this.get("itemMap"),c={nodes:[],edges:[]},u=o.combos;if(u){var h=plainCombosToTrees(u,o.nodes);this.set("comboTrees",h)}else this.set("comboTrees",[]);this.diffItems("node",c,o.nodes),each(l,(function(e,t){l[t].getModel().depth=0,e.getType&&"edge"===e.getType()||(e.getType&&"combo"===e.getType()?(delete l[t],e.destroy()):c.nodes.indexOf(e)<0&&(delete l[t],i.remove(e,!1)))}));for(var d=this.getCombos(),f=d.length-1;f>=0;f--)d[f].destroyed&&d.splice(f,1);u&&(i.addCombos(u),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",c,o.edges),each(l,(function(e,t){(!e.getType||"node"!==e.getType()&&"combo"!==e.getType())&&c.edges.indexOf(e)<0&&(delete l[t],i.remove(e,!1))})),(this.get("comboTrees")||[]).forEach((function(e){traverseTreeUp(e,(function(e){return"combo"===r.findById(e.id).getType()&&e.collapsed&&r.collapseCombo(e.id,!1),!0}))})),this.set({nodes:c.nodes,edges:c.edges});var p=this.get("layoutController");return p&&(p.changeData((function(){setTimeout((function(){var e;null===(e=i.getCombos())||void 0===e||e.forEach((function(e){e.set("animate",!0)}))}),0)})),i.get("animate")&&!p.getLayoutType()?(i.positionsAnimate(),null===(n=i.getCombos())||void 0===n||n.forEach((function(e){return e.set("animate",!0)}))):i.autoPaint()),setTimeout((function(){a.set("localRefresh",s)}),16),this.set("data",o),this.emit("afterchangedata"),this},t.prototype.addCombos=function(e){var t=this.get("comboTrees");this.get("itemController").addCombos(t,e)},t.prototype.createCombo=function(e,t,n){var r=this;void 0===n&&(n=!0);var i=this.get("itemController");this.set("comboSorted",!1);var o,a="";if(e){if(isString$1(e))a=e,o={id:e};else{if(!(a=e.id))return;o=e}var s=n&&this.get("enabledStack"),l={nodes:[],combos:[]};s&&t.forEach((function(e){var t=r.findById(e),n=t.getType();if("node"===n||"combo"===n){var i=t.getModel();l["".concat(n,"s")].push({id:e,parentId:"node"===n?i.comboId:i.parentId})}}));var c=this.get("comboTrees"),u=new Set(t),h=new Map;c&&(c.forEach((function(e){traverseTreeUp(e,(function(e,t,n){if(u.has(e.id)){if(t){var o=r.findById(t.id),a=r.findById(e.id);t.children.splice(n,1),o.removeChild(a),i.updateCombo(o,t.children)}"combo"===e.itemType&&h.set(e.id,e)}return!0}))})),c=c.filter((function(e){return!u.has(e.id)})),this.set("comboTrees",c));var d={nodes:[],combos:[]},f=t.map((function(e){var t=r.findById(e),n=t.getModel(),i="";t.getType&&(i=t.getType());var o=h.get(e)||{id:t.getID(),itemType:i};return"combo"===i?(o.parentId=a,n.parentId=a):"node"===i&&(o.comboId=a,n.comboId=a),s&&d["".concat(i,"s")].push({id:n.id,parentId:a}),o}));o.children=f,this.addItem("combo",o,!1),this.set("comboSorted",!1),c&&(c.forEach((function(e){traverseTree$2(e,(function(e){return e.id!==a||(e.itemType="combo",e.children=f,!1)}))})),this.sortCombos()),s&&(d.combos.push(o),this.pushStack("createCombo",{before:l,after:d}))}},t.prototype.uncombo=function(e,t){var n,r,i=this;void 0===t&&(t=!0);var o=e;if(isString$1(e)&&(o=this.findById(e)),o&&(!o.getType||"combo"===o.getType())){var a=o.getModel(),s=o.getModel().parentId,l=this.get("comboTrees");l||(l=[]);var c,u=this.get("itemMap"),h=o.get("id"),d=[],f=this.get("combos"),p=this.findById(s),g=t&&this.get("enabledStack"),m={};if(g&&((m=clone$9(a)).children=[]),l.forEach((function(e){c||traverseTreeUp(e,(function(e){var t;if(e.id===h){c=e,o.getEdges().map((function(e){return e.getID()})).forEach((function(e){i.removeItem(e,!1)}));var n=f.indexOf(o);f.splice(n,1),delete u[h];var r=clone$9(o.getModel());o.destroy(),i.emit("afterremoveitem",{item:r,type:"combo"})}return!s||!c||e.id!==s||(p.removeCombo(o),-1!==(n=(d=e.children).indexOf(c))&&d.splice(n,1),null===(t=c.children)||void 0===t||t.forEach((function(e){var t=i.findById(e.id),n=t.getModel();t.getType&&"combo"===t.getType()?(e.parentId=s,delete e.comboId,n.parentId=s,delete n.comboId):t.getType&&"node"===t.getType()&&(e.comboId=s,n.comboId=s),p.addChild(t),d.push(e)})),i.updateCombo(p),!1)}))})),!s&&c){var v=l.indexOf(c);l.splice(v,1),null===(n=c.children)||void 0===n||n.forEach((function(e){e.parentId=void 0;var t=i.findById(e.id).getModel();delete t.parentId,delete t.comboId,"node"!==e.itemType&&l.push(e)}))}if(g){var y={nodes:[],combos:[]},b={nodes:[],combos:[]};null===(r=c.children)||void 0===r||r.forEach((function(e){var t=i.findById(e.id).getType();"node"!==t&&"combo"!==t||(y["".concat(t,"s")].push({id:e.id,parentId:h}),b["".concat(t,"s")].push({id:e.id,parentId:s}))})),y.combos.push(m),this.pushStack("uncombo",{before:y,after:b})}}},t.prototype.updateCombos=function(e){var t=this;void 0===e&&(e=!1);var n=this,r=this.get("comboTrees"),i=n.get("itemController"),o=n.get("itemMap");(r||[]).forEach((function(n){traverseTreeUp(n,(function(n){var r;if(!n)return!0;var a=o[n.id];if("combo"===(null===(r=null==a?void 0:a.getType)||void 0===r?void 0:r.call(a))){var s=__spreadArray$4([],a.getStates(),!0);each(s,(function(e){return t.setItemState(a,e,!1)})),i.updateCombo(a,n.children,e),each(s,(function(e){return t.setItemState(a,e,!0)}))}return!0}))})),n.sortCombos()},t.prototype.updateCombo=function(e){var t,n=this,r=e;if(isString$1(e)&&(r=this.findById(e)),r&&(!r.getType||"combo"===r.getType())){t=r.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(e){traverseTreeUp(e,(function(e){if(!e)return!0;var r=a[e.id];if(t===e.id&&r&&r.getType&&"combo"===r.getType()){var i=__spreadArray$4([],r.getStates(),!0);each(i,(function(e){r.getStateStyle(e)&&n.setItemState(r,e,!1)})),o.updateCombo(r,e.children),each(i,(function(e){r.getStateStyle(e)&&n.setItemState(r,e,!0)})),t&&(t=e.parentId)}return!0}))}))}},t.prototype.updateComboTree=function(e,t,n){void 0===n&&(n=!0);var r;this.set("comboSorted",!1);var i,o=(r=isString$1(e)?this.findById(e):e).getModel(),a=o.comboId||o.parentId,s="";if(r.getType&&(s=r.getType()),t&&"combo"===s){var l,c=this.get("comboTrees"),u=!0;if((c||[]).forEach((function(e){l||traverseTree$2(e,(function(e){if(!l)return e.id===r.getID()&&(l=e),!0}))})),traverseTree$2(l,(function(e){return e.id!==t||(u=!1,!1)})),!u)return}if(n&&this.get("enabledStack")){var h={},d={};"combo"===s?(h.combos=[{id:o.id,parentId:o.parentId}],d.combos=[{id:o.id,parentId:t}]):"node"===s&&(h.nodes=[{id:o.id,parentId:o.comboId}],d.nodes=[{id:o.id,parentId:t}]),this.pushStack("updateComboTree",{before:h,after:d})}if(o.parentId||o.comboId){var f=this.findById(o.parentId||o.comboId);f&&f.removeChild(r)}("combo"===s?o.parentId=t:"node"===s&&(o.comboId=t),t)&&((i=this.findById(t))&&i.addChild(r));a&&((i=this.findById(a))&&i.removeChild(r));var p=reconstructTree(this.get("comboTrees"),o.id,t);this.set("comboTrees",p),this.updateCombos()},t.prototype.save=function(){var e=[],t=[],n=[];return each(this.get("nodes"),(function(t){e.push(t.getModel())})),each(this.get("edges"),(function(e){t.push(e.getModel())})),each(this.get("combos"),(function(e){n.push(e.getModel())})),{nodes:e,edges:t,combos:n}},t.prototype.changeSize=function(e,t){return this.get("viewController").changeSize(e,t),this},t.prototype.refresh=function(){var e=this;if(e.emit("beforegraphrefresh"),e.get("animate"))e.positionsAnimate();else{var t=e.get("nodes"),n=e.get("edges"),r=e.get("edges");each(t,(function(e){e.refresh()})),each(n,(function(e){e.refresh()})),each(r,(function(e){e.refresh()}))}e.emit("aftergraphrefresh"),e.autoPaint()},t.prototype.getNodes=function(){return this.get("nodes")},t.prototype.getEdges=function(){return this.get("edges")},t.prototype.getCombos=function(){return this.get("combos")},t.prototype.getComboChildren=function(e){if(isString$1(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType()))return e.getChildren()},t.prototype.positionsAnimate=function(e){var t=this;t.emit("beforeanimate");var n=t.get("animateCfg"),r=n.onFrame,i=e?t.getNodes().concat(t.getCombos()):t.getNodes(),o=i.map((function(e){var t=e.getModel();return{id:t.id,x:t.x,y:t.y}}));t.stopAnimate();var a=t.get("canvas");t.animating=!0,a.animate((function(n){each(o,(function(e){var i=t.findById(e.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model"),s=i.getContainer().getMatrix();if(null==o&&(s&&(o={x:s[6],y:s[7]}),i.set("originAttrs",o||0)),r){var l=r(i,n,e,o||{x:0,y:0});i.set("model",Object.assign(a,l))}else o?(a.x=o.x+(e.x-o.x)*n,a.y=o.y+(e.y-o.y)*n):(a.x=e.x,a.y=e.y)}})),t.refreshPositions(e)}),{duration:n.duration,easing:n.easing,callback:function(){each(i,(function(e){e.set("originAttrs",null)})),n.callback&&n.callback(),t.emit("afteranimate"),t.animating=!1}})},t.prototype.refreshPositions=function(e){var t=this;t.emit("beforegraphrefreshposition");var n,r=t.get("nodes"),i=t.get("edges"),o=t.get("vedges"),a=t.get("combos"),s={},l=function(e){each(e,(function(e){n=e.getModel();var t=e.get("originAttrs");if(!t||n.x!==t.x||n.y!==t.y){var r=e.updatePosition({x:n.x,y:n.y});s[n.id]=r,n.comboId&&(s[n.comboId]=s[n.comboId]||r),n.parentId&&(s[n.parentId]=s[n.parentId]||r)}}))};l(a),l(r),a&&0!==a.length&&(e?(l(a),t.updateCombos()):t.updateCombos()),each(i,(function(e){var t=e.getSource().getModel(),n=e.getTarget();if(!isPlainObject$1(n)){var r=n.getModel();(s[t.id]||s[r.id]||e.getModel().isComboEdge)&&e.refresh()}})),each(o,(function(e){e.refresh()})),t.emit("aftergraphrefreshposition"),t.autoPaint()},t.prototype.stopAnimate=function(){this.isAnimating()&&this.get("canvas").stopAnimate()},t.prototype.isAnimating=function(){return this.animating},t.prototype.getZoom=function(){var e=this.get("group").getMatrix();return e?e[0]:1},t.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},t.prototype.setMode=function(e){return this.get("modeController").setMode(e),this},t.prototype.clear=function(e){var t;return void 0===e&&(e=!1),null===(t=this.get("canvas"))||void 0===t||t.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),e||this.emit("afterrender"),this},t.prototype.updateLayout=function(e,t,n,r){var i=this;void 0===e&&(e={}),void 0===r&&(r=!0);var o=this.get("layoutController");if(isString$1(e)&&(e={type:e}),t){var a=n;a||(a="begin"===t?{x:0,y:0}:{x:this.getWidth()/2,y:this.getHeight()/2}),a=this.getPointByCanvas(a.x,a.y);var s=["force","gForce","fruchterman","force2"];s.includes(e.type)||!e.type&&s.includes(null==o?void 0:o.layoutType)?e.center=[a.x,a.y]:this.once("afterlayout",(function(e){var n=i.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];a.x=a.x*n[0]+n[6],a.y=a.y*n[0]+n[7];var r=i.getGroup().getCanvasBBox(),o=r.minX,s=r.maxX,l=r.minY,c={x:(o+s)/2,y:(l+r.maxY)/2};"begin"===t&&(c.x=o,c.y=l),i.translate(a.x-c.x,a.y-c.y)}))}var l=__assign$h({},this.get("layout")),c={};Object.assign(c,l,e),e.pipes&&!e.type?delete c.type:!e.pipes&&c.type&&delete c.pipes,this.set("layout",c),o&&(o.isLayoutTypeSame(c)&&c.gpuEnabled===l.gpuEnabled?o.updateLayoutCfg(c):o.changeLayout(c),r&&this.get("enabledStack")&&this.pushStack("layout",{before:l,after:c}))},t.prototype.destroyLayout=function(){var e=this.get("layoutController");null==e||e.destroyLayout()},t.prototype.layout=function(){var e,t=this.get("layoutController"),n=this.get("layout");n&&t&&(n.workerEnabled?t.layout():(null===(e=t.layoutMethods)||void 0===e?void 0:e.length)?t.relayout(!0):t.layout())},t.prototype.collapseCombo=function(e,t){var n=this;if(void 0===t&&(t=!0),!this.destroyed&&(isString$1(e)&&(e=this.findById(e)),e)){this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var r=e.getModel();this.get("itemController").collapseCombo(e,t),r.collapsed=!0;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(e){s||traverseTree$2(e,(function(e){if(s&&e.depth<=r.depth)return!1;if(r.id===e.id&&(s=!0),s){var t=n.findById(e.id);t&&t.getType&&"combo"===t.getType()&&(o=(o=o.concat(t.getNodes())).concat(t.getCombos()))}return!0}))}));var l={};i.forEach((function(e){var t=e.getModel(),i=t.isVEdge,a=t.size,s=void 0===a?1:a;if(!e.isVisible()||i){var c,u=e.getSource(),h=e.getTarget(),d=null;if(u.getModel().id===r.id||o.includes(u)&&!o.includes(h)?(d=h,c=!1):(h.getModel().id===r.id||!o.includes(u)&&o.includes(h))&&(d=u,c=!0),d){if(i)return void n.removeItem(e,!1);for(var f=d.getModel();!d.isVisible();){var p=f.parentId,g=f.comboId,m=p||g;if(!(d=n.findById(m))||!m)return;f=d.getModel()}var v=f.id,y=c?{source:v,target:r.id,size:s,isVEdge:!0}:{source:r.id,target:v,size:s,isVEdge:!0},b="".concat(y.source,"-").concat(y.target);if(l[b])return void(l[b].size+=s);l[b]=y}}})),this.addItems(Object.values(l).map((function(e){return{type:"vedge",model:e}})),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:e})}},t.prototype.expandCombo=function(e,t){var n=this;if(void 0===t&&(t=!0),isString$1(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType())){this.emit("beforecollapseexpandcombo",{action:"expand",item:e});var r=e.getModel();this.get("itemController").expandCombo(e,t),r.collapsed=!1;var i=this.getEdges().concat(this.get("vedges")),o=[],a=this.get("comboTrees"),s=!1;(a||[]).forEach((function(e){s||traverseTree$2(e,(function(e){if(s&&e.depth<=r.depth)return!1;if(r.id===e.id&&(s=!0),s){var t=n.findById(e.id);t&&t.getType&&"combo"===t.getType()&&(o=(o=o.concat(t.getNodes())).concat(t.getCombos()))}return!0}))}));var l={};i.forEach((function(e){if(!e.isVisible()||e.getModel().isVEdge){var t,i=e.getSource(),a=e.getTarget(),s=i.get("id"),c=a.get("id"),u=null;if(s===r.id||o.includes(i)&&!o.includes(a)?(u=a,t=!1):c===r.id||!o.includes(i)&&o.includes(a)?(u=i,t=!0):o.includes(i)&&o.includes(a)&&i.isVisible()&&a.isVisible()&&e.show(),u){var h=e.getModel(),d=h.isVEdge,f=h.size,p=void 0===f?1:f;if(d)return void n.removeItem(e,!1);for(var g=u.getModel();!u.isVisible();){var m=g.parentId,v=g.comboId,y=m||v;if(!(u=n.findById(y))||!y)return;g=u.getModel()}for(var b=g.id,x=t?a:i,w=x.getModel();!x.isVisible();){var _=w.parentId,C=w.comboId,$=_||C;if(!(x=n.findById($))||!$)return;if(w.comboId===r.id||w.parentId===r.id)break;w=x.getModel()}var S=w.id;if(b){var E=t?{source:b,target:S,isVEdge:!0,size:p}:{source:S,target:b,isVEdge:!0,size:p},A="".concat(E.source,"-").concat(E.target);if(l[A])return void(l[A].size+=p);l[A]=E}}}})),this.addItems(Object.values(l).map((function(e){return{type:"vedge",model:e}})),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:e})}},t.prototype.collapseExpandCombo=function(e,t){if(void 0===t&&(t=!0),isString$1(e)&&(e=this.findById(e)),e&&(!e.getType||"combo"===e.getType())){for(var n=e.getModel(),r=this.findById(n.parentId);r;){var i=r.getModel();if(i.collapsed)return void(r=void 0);r=this.findById(i.parentId)}n.collapsed?this.expandCombo(e,t):this.collapseCombo(e,t),this.updateCombo(e)}},t.prototype.getNeighbors=function(e,t){var n=e;return isString$1(e)&&(n=this.findById(e)),n.getNeighbors(t)},t.prototype.getNodeDegree=function(e,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var r=e;isString$1(e)&&(r=this.findById(e));var i=this.get("degrees");i&&!n||(i=degree$2(this.save()),this.set("degrees",i));var o=i[r.getID()],a=0;if(!o)return 0;switch(t){case"in":a=o.inDegree;break;case"out":a=o.outDegree;break;case"all":a=o;break;default:a=o.degree}return a},t.prototype.getUndoStack=function(){return this.undoStack},t.prototype.getRedoStack=function(){return this.redoStack},t.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},t.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},t.prototype.pushStack=function(e,t,n){if(void 0===e&&(e="update"),void 0===n&&(n="undo"),this.get("enabledStack")){var r=t?clone$9(t):{before:{},after:clone$9(this.save())};"redo"===n?this.redoStack.push({action:e,data:r}):this.undoStack.push({action:e,data:r}),this.emit("stackchange",{action:e,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})}},t.prototype.getAdjMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix");return n&&e||(n=adjMatrix$1(this.save(),t),this.set("adjMatrix",n)),n},t.prototype.getShortestPathMatrix=function(e,t){void 0===e&&(e=!0),void 0===t&&(t=this.get("directed"));var n=this.get("adjMatrix"),r=this.get("shortestPathMatrix");return n&&e||(n=adjMatrix$1(this.save(),t),this.set("adjMatrix",n)),r&&e||(r=floydWarshall$4(this.save(),t),this.set("shortestPathMatrix",r)),r},t.prototype.on=function(t,n,r){return e.prototype.on.call(this,t,n,r)},t.prototype.destroy=function(){var e,t,n,r,i;this.clear(),this.clearStack(),null===(e=this.get("itemController"))||void 0===e||e.destroy(),null===(t=this.get("modeController"))||void 0===t||t.destroy(),null===(n=this.get("viewController"))||void 0===n||n.destroy(),null===(r=this.get("stateController"))||void 0===r||r.destroy(),null===(i=this.get("canvas"))||void 0===i||i.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},t.prototype.createHull=function(e){if(e.members&&!(e.members.length<1)){var t=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),t&&!t.get("destroyed")||((t=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",t)),n[e.id])return n[e.id];var r=t.addGroup({id:"".concat(e.id,"-container")}),i=new Hull(this,__assign$h(__assign$h({},e),{group:r}));return n[i.id]=i,i}},t.prototype.getHulls=function(){return this.get("hullMap")},t.prototype.getHullById=function(e){return this.get("hullMap")[e]},t.prototype.removeHull=function(e){var t,n;n=isString$1(e)?this.getHullById(e):e,null===(t=this.get("hullMap"))||void 0===t||delete t[n.id],n.destroy()},t.prototype.removeHulls=function(){var e=this.getHulls();e&&Object.keys(e).length&&(Object.keys(e).forEach((function(t){e[t].destroy()})),this.set("hullMap",{}))},t}(EventEmitter);function _typeof$7(e){return(_typeof$7="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var transform$8=transform$d,CLS_SHAPE_SUFFIX="-shape",CLS_LABEL_SUFFIX="-label",ARROWS=["startArrow","endArrow"],SHAPE_DEFAULT_ATTRS={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},PATH_SHAPE_DEFAULT_ATTRS={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},SHAPES_DEFAULT_ATTRS={edge:PATH_SHAPE_DEFAULT_ATTRS,node:SHAPE_DEFAULT_ATTRS,combo:SHAPE_DEFAULT_ATTRS},CLS_LABEL_BG_SUFFIX="-label-bg",shapeBase={options:{labelCfg:{style:{fontFamily:Global$1.windowFontFamily}},descriptionCfg:{style:{fontFamily:Global$1.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return"move"===t||(null==t?void 0:t.includes("bbox"))?e:deepMix({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var n=this.drawShape(e,t);if(n.set("className",this.itemType+CLS_SHAPE_SUFFIX),t.shapeMap[this.itemType+CLS_SHAPE_SUFFIX]=n,e.label){var r=this.drawLabel(e,t);r.set("className",this.itemType+CLS_LABEL_SUFFIX),t.shapeMap[this.itemType+CLS_LABEL_SUFFIX]=r}return n},afterDraw:function(e,t,n){},drawShape:function(e,t){return null},drawLabel:function(e,t){var n=(this.mergeStyle||this.getOptions(e)||{}).labelCfg||{},r=this.getLabelStyle(e,n,t),i=r.rotate;delete r.rotate;var o=t.addShape("text",{attrs:r,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=o,!isNaN(i)&&""!==i){var a=o.getBBox(),s=[1,0,0,0,1,0,0,0,1];if(r.rotateCenter)switch(r.rotateCenter){case"center":default:s=transform$8(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=transform$8(s,[["t",-r.x,-r.y],["r",i],["t",r.x,r.y]]);break;case"leftcenter":s=transform$8(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]])}else s=transform$8(s,[["t",-r.x,-r.y-a.height/2],["r",i],["t",r.x,r.y+a.height/2]]);o.setMatrix(s)}if(r.background){var l=this.drawLabelBg(e,t,o),c=this.itemType+CLS_LABEL_BG_SUFFIX;l.set("classname",c),t.shapeMap[c]=l,o.toFront()}return o},drawLabelBg:function(e,t,n){var r=mix({},this.options.labelCfg,e.labelCfg),i=this.getLabelBgStyleByPosition(n,r),o=t.addShape("rect",{name:"text-bg-shape",attrs:i,labelRelated:!0});return t.shapeMap["text-bg-shape"]=o,o},getLabelStyleByPosition:function(e,t,n){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,n){var r=this.getLabelStyleByPosition(e,t,n),i="".concat(this.itemType,"Label"),o=Global$1[i]?Global$1[i].style:null;return __assign$h(__assign$h(__assign$h({},o),r),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,n){this.updateShapeStyle(e,t,n),this.updateLabel(e,t,n)},updateShapeStyle:function(e,t,n){var r,i=t.getContainer(),o=t.getKeyShape(),a=mix({},o.attr(),e.style),s=function(e){var t,n=a[e];if(isPlainObject$1(n)){var s=(null===(r=i.shapeMap)||void 0===r?void 0:r[e])||i.find((function(t){return t.get("name")===e}));null==s||s.attr(n)}else o.attr(((t={})[e]=n,t))};for(var l in a)s(l)},updateLabel:function(e,t,n){var r,i;if(e.label||""===e.label){var o=t.getContainer(),a=(this.mergeStyle||this.getOptions({},n)||{}).labelCfg,s=void 0===a?{}:a,l=this.itemType+CLS_LABEL_SUFFIX,c=o.shapeMap[l]||o.find((function(e){return e.get("className")===l})),u=this.itemType+CLS_LABEL_BG_SUFFIX,h=o.shapeMap[u]||o.find((function(e){return e.get("className")===u}));if(c){(!n||"bbox|label"===n||"edge"===this.itemType&&"style"!==n)&&(s=deepMix(s,e.labelCfg));var d=this.getLabelStyleByPosition(e,s,o),f=null===(r=e.labelCfg)||void 0===r?void 0:r.style,p=__assign$h(__assign$h({},d),f),g=p.rotate;if(delete p.rotate,isNaN(g)||""===g)1!==(null===(i=c.getMatrix())||void 0===i?void 0:i[4])&&c.resetMatrix(),c.attr(p);else{var m=[1,0,0,0,1,0,0,0,1];m=transform$8(m,[["t",-p.x,-p.y],["r",g],["t",p.x,p.y]]),p.matrix=m,c.attr(p)}if(h)if(p.background){var v=this.getLabelBgStyleByPosition(c,s);h.attr(v)}else o.removeChild(h);else p.background&&((h=this.drawLabelBg(e,o,c)).set("classname",u),o.shapeMap[u]=h,c.toFront())}else{var y=this.drawLabel(e,o);y.set("className",l),o.shapeMap[l]=y}}},afterUpdate:function(e,t){},setState:function(e,t,n){var r,i,o,a=n.get("keyShape");if(a&&!a.destroyed){var s=n.getType(),l=isBoolean(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(l,n),u=n.getStateStyle(l);if(u||c){var h=mix({},u||c),d=n.getContainer(),f={x:1,y:1,cx:1,cy:1,matrix:1};if("combo"===s&&(f.r=1,f.width=1,f.height=1),t){var p=function(e){var t,n=h[e];if(isPlainObject$1(n)&&!ARROWS.includes(e)){var r=(null===(o=d.shapeMap)||void 0===o?void 0:o[e])||d.find((function(t){return t.get("name")===e}));null==r||r.attr(n)}else a.attr(((t={})[e]=n,t))};for(var g in h)p(g)}else{var m=cloneBesidesImg(n.getCurrentStatesStyle()),v=mix({},n.getModel().style,cloneBesidesImg(n.getOriginStyle())),y=a.get("name"),b=a.attr(),x={};Object.keys(b).forEach((function(e){if("img"!==e){var t=b[e];t&&"object"===_typeof$7(t)?x[e]=clone$9(t):x[e]=t}}));var w={},_=function(e){var t=h[e];if(isPlainObject$1(t)&&!ARROWS.includes(e)){var n=d.shapeMap[e]||d.find((function(t){return t.get("name")===e}));if(n){var r=cloneBesidesImg(n.attr());each(t,(function(t,i){if(e===y&&x[i]&&!f[i]){delete x[i];var o=v[e][i]||SHAPES_DEFAULT_ATTRS[s][i];a.attr(i,o)}else if(r[i]||0===r[i]){delete r[i];var l=v[e][i]||SHAPES_DEFAULT_ATTRS[s][i];n.attr(i,l)}})),w[e]=r}}else if(x[e]&&!f[e]){delete x[e];var i=v[e]||(v[y]?v[y][e]:void 0)||SHAPES_DEFAULT_ATTRS[s][e];a.attr(e,i)}};for(var C in h)_(C);for(var g in y?w[y]=x:mix(w,x),m)if(!f[g]){var $=m[g];isPlainObject$1($)&&!ARROWS.includes(g)||(y?(mix(v[y],((i={})[g]=$,i)),delete v[g]):mix(v,((r={})[g]=$,r)),delete m[g])}var S={};deepMix(S,v,w,m);var E=!1,A=function(e){var t,n,r=S[e];if(isPlainObject$1(r)&&!ARROWS.includes(e)){var i=d.shapeMap[e]||d.find((function(t){return t.get("name")===e}));i&&(("text"===i.get("type")||i.get("labelRelated"))&&(delete r.x,delete r.y,delete r.matrix),e===y&&("combo"===s&&(delete r.r,delete r.width,delete r.height),E=!0),i.attr(r))}else if(!E){var o=r||SHAPES_DEFAULT_ATTRS[s][e];"combo"===s?y||a.attr(((t={})[e]=o,t)):a.attr(((n={})[e]=o,n))}};for(var M in S)A(M)}}}},getStateStyle:function(e,t){var n=t.getModel(),r=t.getType(),i=this.getOptions(n),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,l=n.stateStyles?n.stateStyles[e]:o&&o[e];return"combo"===r?clone$9(l):mix({},s,l)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,n;return(null==e?void 0:e.anchorPoints)||(null===(t=this.getCustomConfig(e))||void 0===t?void 0:t.anchorPoints)||(null===(n=this.options)||void 0===n?void 0:n.anchorPoints)}},singleNode={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Global$1.nodeLabel.offset,getSize:function(e){var t,n=(null===(t=this.mergeStyle)||void 0===t?void 0:t.size)||e.size||this.getOptions({}).size||Global$1.defaultNode.size;return isArray$1(n)&&1===n.length&&(n=[n[0],n[0]]),isArray$1(n)||(n=[n,n]),n},getLabelStyleByPosition:function(e,t){var n=t.maxLength,r=e.label;n&&(r=truncateLabelByLength(r,n));var i=t.position||this.labelPosition;if("center"===i)return{x:0,y:0,text:r,textBaseline:"middle",textAlign:"center"};var o=t.offset;isNil(o)&&(o=this.offset);var a,s=this.getSize(e);switch(i){case"top":a={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":a={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":a={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:a={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"}}return a.text=r,a},getLabelBgStyleByPosition:function(e,t){var n;if(!e)return{};var r=null===(n=t.style)||void 0===n?void 0:n.background;if(!r)return{};var i=e.getBBox(),o=formatPadding(r.padding),a=i.width+o[1]+o[3],s=i.height+o[0]+o[2];return __assign$h(__assign$h({x:i.minX-o[3],y:i.minY-o[0]},r),{width:a,height:s})},drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e),i=t.addShape(n,{attrs:r,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=i,i},updateLinkPoints:function(e,t){var n,r=(this.mergeStyle||this.getOptions(e)).linkPoints,i=t.shapeMap["link-point-left"]||t.find((function(e){return"link-point-left"===e.get("className")})),o=t.shapeMap["link-point-right"]||t.find((function(e){return"link-point-right"===e.get("className")})),a=t.shapeMap["link-point-top"]||t.find((function(e){return"link-point-top"===e.get("className")})),s=t.shapeMap["link-point-bottom"]||t.find((function(e){return"link-point-bottom"===e.get("className")}));i&&(n=i.attr()),o&&!n&&(n=o.attr()),a&&!n&&(n=a.attr()),s&&!n&&(n=s.attr()),n||(n=r);var l=mix({},n,e.linkPoints),c=l.fill,u=l.stroke,h=l.lineWidth,d=l.size/2;d||(d=l.r);var f=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=f.left,g=f.right,m=f.top,v=f.bottom,y=this.getSize(e),b=y[0],x=y[1],w={r:d,fill:c,stroke:u,lineWidth:h};if(i)p||void 0===p?i.attr(__assign$h(__assign$h({},w),{x:-b/2,y:0})):(i.remove(),delete t.shapeMap["link-point-left"]);else if(p){var _="link-point-left";t.shapeMap[_]=t.addShape("circle",{attrs:__assign$h(__assign$h({},w),{x:-b/2,y:0}),className:_,name:_,isAnchorPoint:!0})}if(o)g||void 0===g||(o.remove(),delete t.shapeMap["link-point-right"]),o.attr(__assign$h(__assign$h({},w),{x:b/2,y:0}));else if(g){var C="link-point-right";t.shapeMap[C]=t.addShape("circle",{attrs:__assign$h(__assign$h({},w),{x:b/2,y:0}),className:C,name:C,isAnchorPoint:!0})}if(a)m||void 0===m||(a.remove(),delete t.shapeMap["link-point-top"]),a.attr(__assign$h(__assign$h({},w),{x:0,y:-x/2}));else if(m){var $="link-point-top";t.shapeMap[$]=t.addShape("circle",{attrs:__assign$h(__assign$h({},w),{x:0,y:-x/2}),className:$,name:$,isAnchorPoint:!0})}if(s)v||void 0===v?s.attr(__assign$h(__assign$h({},w),{x:0,y:x/2})):(s.remove(),delete t.shapeMap["link-point-bottom"]);else if(v){var S="link-point-bottom";t.shapeMap[S]=t.addShape("circle",{attrs:__assign$h(__assign$h({},w),{x:0,y:x/2}),className:S,name:S,isAnchorPoint:!0})}},updateShape:function(e,t,n,r,i){t.get("keyShape").attr(__assign$h({},n)),this.updateLabel(e,t,i),r&&this.updateIcon(e,t)},updateIcon:function(e,t){var n=this,r=t.getContainer(),i=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},a=o.show,s=o.text,l=r.shapeMap["".concat(this.type,"-icon")]||r.find((function(e){return e.get("name")==="".concat(n.type,"-icon")}));if(l)if(a||void 0===a){var c=mix({},l.attr(),i),u=c.width,h=void 0===u?20:u,d=c.height,f=void 0===d?20:d;("iconfont"===c.fontFamily||c.hasOwnProperty("text"))&&(h=0,f=0),l.attr(__assign$h(__assign$h({},c),{x:-h/2,y:-f/2}))}else l.remove(),delete r.shapeMap["".concat(this.type,"-icon")];else if(a){var p="".concat(this.type,"-icon");if(s)r.shapeMap[p]=r.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:p,name:p});else{h=i.width,f=i.height;r.shapeMap[p]=r.addShape("image",{attrs:__assign$h(__assign$h({},i),{x:-h/2,y:-f/2}),className:p,name:p})}var g=r.shapeMap["node-label"]||r.find((function(e){return"node-label"===e.get("name")}));g&&g.toFront()}}},singleNodeDef=__assign$h(__assign$h({},shapeBase),singleNode);Shape$2.registerNode("single-node",singleNodeDef);var CLS_SHAPE="edge-shape";function revertAlign(e){var t=e;return"start"===e?t="end":"end"===e&&(t="start"),t}var singleEdge={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Global$1.defaultEdge.size,style:{x:0,y:0,stroke:Global$1.defaultEdge.style.stroke,lineAppendWidth:Global$1.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Global$1.edgeLabel.style.fill,fontSize:Global$1.edgeLabel.style.fontSize,fontFamily:Global$1.windowFontFamily}},stateStyles:__assign$h({},Global$1.edgeStateStyles)},getPath:function(e){var t=[];return each(e,(function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t},getShapeStyle:function(e){var t=mix({},this.options.style,{stroke:e.color},e.style),n=e.size||Global$1.defaultEdge.size,r=(e=this.getPathPoints(e)).startPoint,i=e.endPoint,o=this.getControlPoints(e),a=[r];o&&(a=a.concat(o)),a.push(i);var s=this.getPath(a);return mix({},Global$1.defaultEdge.style,{stroke:Global$1.defaultEdge.color,lineWidth:n,path:s},t)},updateShapeStyle:function(e,t,n){var r,i=t.getContainer(),o=(null===(r=t.getKeyShape)||void 0===r?void 0:r.call(t))||i.shapeMap["edge-shape"],a=e.size,s=(e=this.getPathPoints(e)).startPoint,l=e.endPoint,c=this.getControlPoints(e),u=[s];c&&(u=u.concat(c)),u.push(l);var h=o.attr(),d=e.style||{};void 0===d.stroke&&(d.stroke=e.color);var f=e.sourceNode,p=e.targetNode,g={radius:d.radius};c||(g={source:f,target:p,offset:d.offset,radius:d.radius});var m=this.getPath(u,g),v={};"move"===n?v={path:m}:(h.endArrow&&!1===d.endArrow&&(e.style.endArrow={path:""}),h.startArrow&&!1===d.startArrow&&(e.style.startArrow={path:""}),void 0===(v=__assign$h({},e.style)).lineWidth&&(v.lineWdith=(isNumber$1(a)?a:null==a?void 0:a[0])||h.lineWidth),void 0===v.path&&(v.path=m),void 0===v.stroke&&(v.stroke=h.stroke||e.color)),o&&o.attr(v)},getLabelStyleByPosition:function(e,t,n){var r,i=t.position||this.labelPosition,o={},a=null==n?void 0:n.shapeMap[CLS_SHAPE];r="start"===i?0:"end"===i?1:.5;var s,l=t.refX||this.refX,c=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return o.x=e.startPoint.x+l,o.y=e.startPoint.y+c,o.text=e.label,o;s=isNil(t.autoRotate)?this.labelAutoRotate:t.autoRotate;var u=getLabelPosition(a,r,l,c,s);return o.x=u.x,o.y=u.y,o.rotate=u.rotate,o.textAlign=this._getTextAlign(i,u.angle),o.text=e.label,o},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var n=e.getBBox(),r=t.style&&t.style.background;if(!r)return{};var i=r.padding,o=n.width+i[1]+i[3],a=n.height+i[0]+i[2],s=__assign$h(__assign$h({},r),{width:o,height:a,x:n.minX-i[3],y:n.minY-i[0],matrix:[1,0,0,0,1,0,0,0,1]});return(isNil(t.autoRotate)?this.labelAutoRotate:t.autoRotate)&&(s.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),s},_getTextAlign:function(e,t){var n="center";return t?(t%=2*Math.PI,"center"!==e&&(n=t>=0&&t<=Math.PI/2||t>=1.5*Math.PI&&t<2*Math.PI?e:revertAlign(e)),n):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var n=this.getShapeStyle(e),r=t.addShape("path",{className:CLS_SHAPE,name:CLS_SHAPE,attrs:n});return t.shapeMap[CLS_SHAPE]=r,r},drawLabel:function(e,t){var n=this.options.labelCfg,r=deepMix({},n,e.labelCfg),i=this.getLabelStyle(e,r,t),o=i.rotate;delete i.rotate;var a=t.addShape("text",{attrs:i,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=a,isNaN(o)||""===o||a.rotateAtStart(o),i.background){var s=this.drawLabelBg(e,t,a,i,o),l=this.itemType+CLS_LABEL_BG_SUFFIX;s.set("classname",l),t.shapeMap[l]=s,a.toFront()}return a},drawLabelBg:function(e,t,n,r,i){var o=this.options.labelCfg,a=deepMix({},o,e.labelCfg),s=this.getLabelBgStyleByPosition(n,a),l=t.addShape("rect",{name:"text-bg-shape",attrs:s,labelRelated:!0});return t.shapeMap["text-bg-shape"]=l,l}},singleEdgeDef=__assign$h(__assign$h({},shapeBase),singleEdge);Shape$2.registerEdge("single-edge",singleEdgeDef),Shape$2.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Shape$2.registerEdge("spline",{getPath:function(e){return getSpline(e)}},"single-edge"),Shape$2.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t,n,r=e.startPoint,i=e.endPoint,o=(r.x+i.x)/2,a=(r.y+i.y)/2;if(void 0!==e.controlPoints){if(n=e.controlPoints[0],t=getCircleCenterByPoints(r,n,i),r.x<=i.x&&r.y>i.y?this.clockwise=t.x>n.x?0:1:r.x<=i.x&&r.y<i.y?this.clockwise=t.x>n.x?1:0:r.x>i.x&&r.y<=i.y?this.clockwise=t.y<n.y?0:1:this.clockwise=t.y<n.y?1:0,(n.x-r.x)/(n.y-r.y)==(i.x-r.x)/(i.y-r.y))return[]}else{void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),isArray$1(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-r.x,y:i.y-r.y},l=Math.atan2(s.y,s.x);n={x:e.curveOffset*Math.cos(-Math.PI/2+l)+o,y:e.curveOffset*Math.sin(-Math.PI/2+l)+a},t=getCircleCenterByPoints(r,n,i)}var c=distance$4(r,t);return[{x:c,y:c}]},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),2===e.length?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Shape$2.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var n=e.startPoint,r=e.endPoint;void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),isArray$1(this.curveOffset)&&(e.curveOffset=e.curveOffset[0]),isArray$1(this.curvePosition)&&(e.curvePosition=e.curveOffset[0]),t=[getControlPoint(n,r,e.curvePosition,e.curveOffset)]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Shape$2.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),isNumber$1(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),isNumber$1(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var n=e.startPoint,r=e.endPoint;t=[getControlPoint(n,r,e.curvePosition[0],e.curveOffset[0]),getControlPoint(n,r,e.curvePosition[1],e.curveOffset[1])]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Shape$2.registerEdge("cubic-vertical",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),isNumber$1(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),isNumber$1(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),isNumber$1(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=n.y-t.y,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x,y:t.y+r*this.curvePosition[0]+i[0]},{x:n.x,y:n.y-r*this.curvePosition[1]+i[1]}]}},"cubic"),Shape$2.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,n=e.endPoint;void 0===e.curvePosition&&(e.curvePosition=this.curvePosition),void 0===e.curveOffset&&(e.curveOffset=this.curveOffset),void 0===e.minCurveOffset&&(e.minCurveOffset=this.minCurveOffset),isNumber$1(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),isNumber$1(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),isNumber$1(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var r=n.x-t.x,i=[0,0];return e.curveOffset?i=e.curveOffset:Math.abs(r)<Math.abs(e.minCurveOffset[0])&&(i=e.minCurveOffset),[{x:t.x+r*this.curvePosition[0]+i[0],y:t.y},{x:n.x-r*this.curvePosition[1]+i[1],y:n.y}]}},"cubic"),Shape$2.registerEdge("loop",{getPathPoints:function(e){return getLoopCfgs(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var singleCombo={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Global$1.comboLabel.refX,refY:Global$1.comboLabel.refY,options:{style:{stroke:Global$1.defaultCombo.style.stroke,fill:Global$1.defaultCombo.style.fill,lineWidth:Global$1.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$1.comboLabel.style.fill,fontSize:Global$1.comboLabel.style.fontSize,fontFamily:Global$1.windowFontFamily}},stateStyles:__assign$h({},Global$1.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=clone$9(e.size||this.options.size||Global$1.defaultCombo.size);return isArray$1(t)&&1===t.length&&(t=[t[0],t[0]]),isArray$1(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;isArray$1(i)&&(i=Math.max.apply(Math,i));var o=t.refX,a=t.refY;isNil(o)&&(o=this.refX),isNil(a)&&(a=this.refY);var s,l=this.getSize(e),c=(Math.max(r.r,l[0]/2)||l[0]/2)+i;switch(n){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e);return t.addShape(n,{attrs:r,draggable:!0,name:"combo-shape"})},updateCollapsedIcon:function(e,t,n){var r=e.collapsed,i=e.collapsedSubstituteIcon,o=void 0===i?{}:i,a=Object.assign({},this.options.collapsedSubstituteIcon,o),s=a.show,l=a.img,c=a.width,u=a.height,h=t.getContainer(),d=h.find((function(e){return"combo-collapsed-substitute-icon"===e.get("name")})),f=d&&!d.destroyed,p=t.get("keyShape");if(r&&s){if(f)d.show();else{var g={width:c||2*n.r||n.width,height:u||2*n.r||n.height};d=h.addShape("image",{attrs:__assign$h({img:l,x:-g.width/2,y:-g.height/2},g),name:"combo-collapsed-substitute-icon",draggable:!0})}p.hide()}else f&&(d.hide(),p.show())},updateShape:function(e,t,n){var r=this,i=t.get("keyShape");t.get("animate")&&(void 0===e.animate?this.options.animate:e.animate)&&i.animate?(e.collapsed||this.updateCollapsedIcon(e,t,n),i.animate(n,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&r.updateCollapsedIcon(e,t,n)}})):(i.attr(__assign$h({},n)),this.updateCollapsedIcon(e,t,n)),this.updateLabel(e,t)}},singleComboDef=__assign$h(__assign$h({},shapeBase),singleCombo);Shape$2.registerCombo("single-combo",singleComboDef),Shape$2.registerCombo("circle",{options:{size:[Global$1.defaultCombo.size[0],Global$1.defaultCombo.size[0]],padding:Math.max.apply(Math,Global$1.defaultCombo.padding),animate:!0,style:{stroke:Global$1.defaultCombo.style.stroke,fill:Global$1.defaultCombo.style.fill,lineWidth:Global$1.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$1.comboLabel.style.fill,fontSize:Global$1.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:__assign$h({},Global$1.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return delete n.height,delete n.width,t.addShape("circle",{attrs:n,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;isArray$1(n)&&(n=Math.max.apply(Math,n));var r,i=mix({},t,{stroke:e.color},e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;if(o)r=isNumber$1(o)?o/2:o[0]/2;else{var a=this.getSize(e);r=!isNumber$1(i.r)||isNaN(i.r)?a[0]/2||Global$1.defaultCombo.style.r:Math.max(i.r,a[0]/2)||a[0]/2}i.r=r+n;var s=__assign$h({x:0,y:0},i);return e.style?e.style.r=r:e.style={r:r},s},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;isArray$1(r)&&(r=Math.max.apply(Math,r));var i,o=clone$9(e.style),a=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;i=a?isNumber$1(a)?a/2:a[0]/2:Math.max(o.r,n[0]/2)||n[0]/2,o.r=i+r;var s=t.get("sizeCache");s&&(s.r=o.r);var l={stroke:e.color},c=mix({},t.get("keyShape").attr(),l,o);e.style?e.style.r=i:e.style={r:i},this.updateShape(e,t,c,!0)}},"single-combo"),Shape$2.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Global$1.defaultCombo.style.stroke,fill:Global$1.defaultCombo.style.fill,lineWidth:Global$1.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Global$1.comboLabel.style.fill,fontSize:Global$1.comboLabel.style.fontSize,fontFamily:Global$1.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global$1.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(e,t){var n=t.position||this.labelPosition,r=e.style,i=e.padding||this.options.padding;isNumber$1(i)&&(i=[i,i,i,i]);var o=t.refX,a=t.refY;isNil(o)&&(o=this.refX),isNil(a)&&(a=this.refY);var s,l=-r.width/2-i[3],c=r.width/2+i[1],u=-r.height/2-i[0],h=r.height/2+i[2];switch(n){case"top":s={x:l+o,y:u+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:h+a,textBaseline:"top",textAlign:"center"};break;case"left":s={x:l+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":s={x:0,y:u+a,textBaseline:"top",textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=e.label,s},getShapeStyle:function(e){var t=this.options.style,n=e.padding||this.options.padding;isNumber$1(n)&&(n=[n,n,n,n]);var r,i,o=mix({},t,{stroke:e.color},e.style),a=this.getSize(e),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?isNumber$1(s)?(r=s,i=s):(r=s[0],i=s[1]):(r=!isNumber$1(o.width)||isNaN(o.width)?a[0]||Global$1.defaultCombo.style.width:Math.max(o.width,a[0])||a[0],i=!isNumber$1(o.height)||isNaN(o.height)?a[1]||Global$1.defaultCombo.style.height:Math.max(o.height,a[1])||a[1]);var l=-r/2-n[3],c=-i/2-n[0];o.width=r+n[1]+n[3],o.height=i+n[0]+n[2];var u=__assign$h({x:l,y:c},o);return e.style?(e.style.width=r,e.style.height=i):e.style={width:r,height:i},u},update:function(e,t){var n=this.getSize(e),r=e.padding||this.options.padding;isNumber$1(r)&&(r=[r,r,r,r]);var i,o,a=clone$9(e.style),s=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;s?isNumber$1(s)?(i=s,o=s):(i=s[0],o=s[1]):(i=Math.max(a.width,n[0])||n[0],o=Math.max(a.height,n[1])||n[1]),a.width=i+r[1]+r[3],a.height=o+r[0]+r[2];var l=t.get("sizeCache");l&&(l.width=a.width,l.height=a.height),a.x=-i/2-r[3],a.y=-o/2-r[0];var c={stroke:e.color},u=mix({},t.get("keyShape").attr(),c,a);e.style?(e.style.width=i,e.style.height=o):e.style={width:i,height:o},this.updateShape(e,t,u,!1)}},"single-combo"),Shape$2.registerNode("simple-circle",{options:{size:Global$1.defaultNode.size,style:{x:0,y:0,stroke:Global$1.defaultNode.style.stroke,fill:Global$1.defaultNode.style.fill,lineWidth:Global$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global$1.nodeLabel.style.fill,fontSize:Global$1.nodeLabel.style.fontSize,fontFamily:Global$1.windowFontFamily}},stateStyles:__assign$h({},Global$1.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var n=this.getShapeStyle(e),r="".concat(this.type,"-keyShape"),i=t.addShape("circle",{attrs:n,className:"".concat(this.type,"-keyShape"),name:r,draggable:!0});return t.shapeMap[r]=i,i},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},r=deepMix({},t,n),i=this.getSize(e)[0]/2;return __assign$h({x:0,y:0,r:i},r)},update:function(e,t,n){var r=this.getSize(e),i={stroke:e.color,r:r[0]/2},o=t.get("keyShape"),a=deepMix({},o.attr(),i,e.style);this.updateShape(e,t,a,!0,n)}},"single-node"),Shape$2.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Global$1.defaultNode.style.stroke,fill:Global$1.defaultNode.style.fill,lineWidth:Global$1.defaultNode.style.lineWidth},labelCfg:{style:{fill:Global$1.nodeLabel.style.fill,fontSize:Global$1.nodeLabel.style.fontSize,fontFamily:Global$1.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},Global$1.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);return t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0})},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getSize(e),r=t.width||n[0],i=t.height||n[1];return __assign$h({x:-r/2,y:-i/2,width:r,height:i},t)},update:function(e,t,n){t.getContainer();var r=(this.mergeStyle||this.getOptions(e)).style,i=this.getSize(e),o=t.get("keyShape");e.size||(i[0]=o.attr("width")||r.width,i[1]=o.attr("height")||r.height);var a={stroke:e.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=mix({},r,o.attr(),a);s=mix(s,e.style),this.updateShape(e,t,s,!1,n)}},"single-node"),Shape$2.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Global$1.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var n=this.shapeType,r=this.getShapeStyle(e);delete r.fill;var i=t.addShape(n,{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,i),i},drawClip:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).clipCfg;if(n.show){var r=n.type,i=n.x,o=n.y,a=n.style;if("circle"===r){var s=n.r;t.setClip({type:"circle",attrs:__assign$h({r:s,x:i,y:o},a)})}else if("rect"===r){var l=n.width,c=n.height,u=i-l/2,h=o-c/2;t.setClip({type:"rect",attrs:__assign$h({x:u,y:h,width:l,height:c},a)})}else if("ellipse"===r){var d=n.rx,f=n.ry;t.setClip({type:"ellipse",attrs:__assign$h({x:i,y:o,rx:d,ry:f},a)})}else if("polygon"===r){var p=n.points;t.setClip({type:"polygon",attrs:__assign$h({points:p},a)})}else if("path"===r){var g=n.path;t.setClip({type:"path",attrs:__assign$h({path:g},a)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),n=t.style,r=t.img,i=this.getSize(e),o=i[0],a=i[1];return n&&(o=n.width||i[0],a=n.height||i[1]),__assign$h({x:-o/2,y:-a/2,width:o,height:a,img:r},n)},updateShapeStyle:function(e,t){var n=t.getContainer(),r="".concat(this.itemType,"-shape"),i=n.shapeMap[r]||n.find((function(e){return e.get("className")===r}))||t.getKeyShape(),o=this.getShapeStyle(e);i&&!i.destroyed&&i.attr(o)}},"single-node");const Arrow$1={triangle:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+t,",-").concat(e/2," L ").concat(r+t,",").concat(e/2," Z")},vee:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=20),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 L ").concat(r+t,",-").concat(e/2,"\n        L ").concat(r+2*t/3,",0 L ").concat(r+t,",").concat(e/2," Z")},circle:function(e,t){return void 0===e&&(e=5),void 0===t&&(t=0),"M ".concat(2*t,", 0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*e,",0\n            a ").concat(e,",").concat(e," 0 1,0 ").concat(2*-e,",0")},rect:function(e,t,n){void 0===e&&(e=10),void 0===t&&(t=10),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",").concat(-e/2," \n        L ").concat(r+t,",").concat(-e/2," \n        L ").concat(r+t,",").concat(e/2," \n        L ").concat(r,",").concat(e/2," Z")},diamond:function(e,t,n){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=0);var r=2*n;return"M ".concat(r,",0 \n        L ").concat(r+t/2,",").concat(-e/2," \n        L ").concat(r+t,",0 \n        L ").concat(r+t/2,",").concat(e/2," Z")},triangleRect:function(e,t,n,r,i,o){void 0===e&&(e=15),void 0===t&&(t=15),void 0===n&&(n=15),void 0===r&&(r=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+t+i;return"M ".concat(a,",0 L ").concat(a+t,",-").concat(e/2," L ").concat(a+t,",").concat(e/2," Z\n            M ").concat(s,", -").concat(n/2,"\n            L ").concat(s+r," -").concat(n/2,"\n            L ").concat(s+r," ").concat(n/2,"\n            L ").concat(s," ").concat(n/2,"\n            Z")}},Marker$4={collapse:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e+n-4,t]]},expand:function(e,t,n){return[["M",e-n,t],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0],["M",e-n+4,t],["L",e-n+2*n-4,t],["M",e-n+n,t-n+4],["L",e,t+n-4]]},upTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-r,t+i],["L",e+r,t+i],["L",e,t-n],["Z"]]},downTriangle:function(e,t,n){var r=n*Math.cos(Math.PI/6),i=n*Math.sin(Math.PI/6);return[["M",e-r,t-i],["L",e+r,t-i],["L",e,t+n],["Z"]]}};var defaultSubjectColors$1=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"];const ColorUtil$1=Object.freeze(Object.defineProperty({__proto__:null,defaultSubjectColors:defaultSubjectColors$1},Symbol.toStringTag,{value:"Module"}));var isForce=function(e){return"force"===e||"g6force"===e||"gForce"===e||"force2"===e};const LayoutUtil$1=Object.freeze(Object.defineProperty({__proto__:null,isForce:isForce},Symbol.toStringTag,{value:"Module"}));var transform$7=transform$d,Util=__assign$h(__assign$h(__assign$h(__assign$h(__assign$h(__assign$h(__assign$h({},BaseUtil),GraphicUtil),PathUtil$1),MathUtil),ColorUtil$1),LayoutUtil$1),{transform:transform$7,mat3:mat3}),LayoutController$1=function(){function e(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return e.prototype.initLayout=function(){},e.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},e.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var n=e.pipes;return Array.isArray(n)?n.map((function(e){return(null==e?void 0:e.type)||""})):null},e.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),n=Array.isArray(this.layoutType),r=Array.isArray(t);return n&&r?this.layoutType.every((function(e,n){return e===t[n]})):!Array.isArray(t)&&!Array.isArray(this.layoutType)&&(null==e?void 0:e.type)===this.layoutType},e.prototype.refreshLayout=function(){var e=this,t=e.graph,n=e.layoutType,r=e.layoutCfg;if(t){var i=(void 0===r?{}:r).animate,o=void 0===i&&("force"===n||"force2"===n),a=isForce(n)&&(i||o);t.get("animate")&&!a?t.positionsAnimate("comboCombined"===n):t.refreshPositions("comboCombined"===n)}},e.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,n=__rest$2(e,["disableTriggerLayout"]);this.layoutCfg=n,this.layoutType=n.type||this.layoutType,t||this.layout()},e.prototype.changeData=function(e){this.layout(e)},e.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return null==e||e.forEach((function(e){var n,r=null===(n=e.getType)||void 0===n?void 0:n.call(e);r&&t.push(r),e.destroy()})),this.layoutMethods=[],t},e.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},e.prototype.setDataFromGraph=function(){for(var e,t=[],n=[],r=[],i=[],o=[],a=[],s=[],l=this.graph.getNodes(),c=this.graph.getEdges(),u=this.graph.getCombos(),h=l.length,d=0;d<h;d++){var f=l[d];if(f&&!f.destroyed){var p=f.getModel();f.isVisible()?t.push(p):n.push(p)}}var g=c.length;for(d=0;d<g;d++){var m=c[d];if(m&&!m.destroyed){p=m.getModel();m.isVisible()?p.isComboEdge?o.push(p):r.push(p):i.push(p)}}var v=u.length;for(d=0;d<v;d++){var y=u[d];if(!y.destroyed){p=y.getModel();y.isVisible()?a.push(p):s.push(p)}}return{nodes:t,hiddenNodes:n,edges:r,hiddenEdges:i,combos:a,hiddenCombos:s,comboEdges:o,vedges:null===(e=this.graph.get("vedges"))||void 0===e?void 0:e.map((function(e){return e.getModel()}))}},e.prototype.relayout=function(e){var t=this,n=this,r=n.graph,i=n.layoutMethods,o=n.layoutCfg;if(r&&!r.get("destroyed")){if(e){this.data=this.setDataFromGraph();var a=this.data.nodes;if(!a)return!1;this.initPositions(o.center,a)}r.emit("beforelayout");var s=Promise.resolve();null==i||i.forEach((function(e,n){var r=o[n]||o;s=s.then((function(){var e,a=t.execLayoutMethod(r,n);return n===i.length-1&&(null===(e=o.onAllLayoutEnd)||void 0===e||e.call(o)),a}))}))}},e.prototype.filterLayoutData=function(e,t){var n,r,i=e.nodes,o=e.edges,a=__rest$2(e,["nodes","edges"]);if(!i)return e;n=isFunction$1(null==t?void 0:t.nodesFilter)?t.nodesFilter:function(){return!0};var s=i.filter(n);if(isFunction$1(null==t?void 0:t.edgesFilter))r=t.edgesFilter;else{var l=s.reduce((function(e,t){return e[t.id]=!0,e}),{});r=function(e){return l[e.source]&&l[e.target]}}return __assign$h({nodes:s,edges:o.filter(r)},a)},e.prototype.getLayoutBBox=function(e){var t=groupBy(this.graph.getNodes(),(function(e){return e.getModel().layoutOrder})),n=Object.values(t).map((function(e){var t=calculationItemsBBox$1(e);return t.size=[t.width,t.height],t}));return{groupNodes:Object.values(groupBy(e,"layoutOrder")),layoutNodes:n}},e.prototype.layoutAnimate=function(){},e.prototype.moveToZero=function(){var e=this.graph.get("data").nodes;if(void 0!==e[0].x&&null!==e[0].x&&!isNaN$2(e[0].x)){for(var t=[0,0],n=e.length,r=0;r<n;r++){var i=e[r];t[0]+=i.x,t[1]+=i.y}t[0]/=e.length,t[1]/=e.length;for(r=0;r<n;r++){(i=e[r]).x-=t[0],i.y-=t[1]}}},e.prototype.initPositions=function(e,t){var n,r=this.graph;if(!t)return!1;var i=t.filter((function(e){return isNaN$2(e.x)||isNaN$2(e.y)})),o=i?i.length:0;if(o){if(null===(n=this.initWithPreset)||void 0===n?void 0:n.call(this))return!1;var a=.85*r.get("width"),s=.85*r.get("height"),l=Math.ceil(Math.sqrt(o)*(a/s)),c=a/(l-1),u=s/(Math.ceil(o/l)-1);isFinite(c)&&c||(c=0),isFinite(u)&&c||(u=0);for(var h=e[0]-a/2,d=e[1]-s/2,f=!0,p=0;p<o;p++){var g=i[p];isNaN$2(+g.x)&&(f=!1,g.x=p%l*c+h),isNaN$2(+g.y)&&(f=!1,g.y=Math.floor(p/l)*u+d)}return f}},e.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},e}(),EventController$1=function(e){this.graph=e,this.destroyed=!1,this.initEvents()},registerNode=Shape$2.registerNode,registerEdge=Shape$2.registerEdge,registerCombo=Shape$2.registerCombo,registerBehavior=Behavior.registerBehavior,BaseGlobal=Global$1;Global$1.version,Shape$2.registerNode,Shape$2.registerEdge,Shape$2.registerCombo,Behavior.registerBehavior;var asyncIndex$1={},workers={},createWorker$1={},constant$1={};Object.defineProperty(constant$1,"__esModule",{value:!0}),constant$1.MESSAGE=constant$1.ALGORITHM=void 0;var ALGORITHM={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};constant$1.ALGORITHM=ALGORITHM;var MESSAGE={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};constant$1.MESSAGE=MESSAGE;var index_worker={},algorithm$1={},adjacentMatrix={};Object.defineProperty(adjacentMatrix,"__esModule",{value:!0}),adjacentMatrix.default=void 0;var adjMatrix=function(e,t){var n=e.nodes,r=e.edges,i=[],o={};if(!n)throw new Error("invalid nodes data!");return n&&n.forEach((function(e,t){o[e.id]=t;i.push([])})),r&&r.forEach((function(e){var n=e.source,r=e.target,a=o[n],s=o[r];!a&&0!==a||!s&&0!==s||(i[a][s]=1,t||(i[s][a]=1))})),i},_default$k=adjMatrix;adjacentMatrix.default=_default$k;var bfs={},queue={},linkedList={};Object.defineProperty(linkedList,"__esModule",{value:!0}),linkedList.default=linkedList.LinkedListNode=void 0;var defaultComparator=function(e,t){return e===t},LinkedListNode=function(){function e(e,t){void 0===t&&(t=null),this.value=e,this.next=t}return e.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},e}();linkedList.LinkedListNode=LinkedListNode;var LinkedList=function(){function e(e){void 0===e&&(e=defaultComparator),this.head=null,this.tail=null,this.compare=e}return e.prototype.prepend=function(e){var t=new LinkedListNode(e,this.head);return this.head=t,this.tail||(this.tail=t),this},e.prototype.append=function(e){var t=new LinkedListNode(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},e.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var n=this.head;if(null!==n)for(;n.next;)this.compare(n.next.value,e)?(t=n.next,n.next=n.next.next):n=n.next;return this.compare(this.tail.value,e)&&(this.tail=n),t},e.prototype.find=function(e){var t=e.value,n=void 0===t?void 0:t,r=e.callback,i=void 0===r?void 0:r;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==n&&this.compare(o.value,n))return o;o=o.next}return null},e.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},e.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},e.prototype.fromArray=function(e){var t=this;return e.forEach((function(e){return t.append(e)})),this},e.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},e.prototype.reverse=function(){for(var e=this.head,t=null,n=null;e;)n=e.next,e.next=t,t=e,e=n;this.tail=this.head,this.head=t},e.prototype.toString=function(e){return void 0===e&&(e=void 0),this.toArray().map((function(t){return t.toString(e)})).toString()},e}(),_default$j=LinkedList;linkedList.default=_default$j,Object.defineProperty(queue,"__esModule",{value:!0}),queue.default=void 0;var _linkedList=_interopRequireDefault$c(linkedList);function _interopRequireDefault$c(e){return e&&e.__esModule?e:{default:e}}var Queue=function(){function e(){this.linkedList=new _linkedList.default}return e.prototype.isEmpty=function(){return!this.linkedList.head},e.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},e.prototype.enqueue=function(e){this.linkedList.append(e)},e.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},e.prototype.toString=function(e){return this.linkedList.toString(e)},e}(),_default$i=Queue;queue.default=_default$i;var util$3={};Object.defineProperty(util$3,"__esModule",{value:!0}),util$3.uniqueId=util$3.getOutEdgesNodeId=util$3.getNeighbors=util$3.getEdgesByNodeId=void 0;var getNeighbors=function(e,t,n){void 0===t&&(t=[]);var r=t.filter((function(t){return t.source===e||t.target===e}));if("target"===n){return r.filter((function(t){return t.source===e})).map((function(e){return e.target}))}if("source"===n){return r.filter((function(t){return t.target===e})).map((function(e){return e.source}))}return r.map((function(t){return t.source===e?t.target:t.source}))};util$3.getNeighbors=getNeighbors;var getOutEdgesNodeId=function(e,t){return t.filter((function(t){return t.source===e}))};util$3.getOutEdgesNodeId=getOutEdgesNodeId;var getEdgesByNodeId=function(e,t){return t.filter((function(t){return t.source===e||t.target===e}))};util$3.getEdgesByNodeId=getEdgesByNodeId;var uniqueId=function(e){void 0===e&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),n="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(n)};util$3.uniqueId=uniqueId,Object.defineProperty(bfs,"__esModule",{value:!0}),bfs.default=void 0;var _queue=_interopRequireDefault$b(queue),_util$d=util$3;function _interopRequireDefault$b(e){return e&&e.__esModule?e:{default:e}}function initCallbacks$1(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}var breadthFirstSearch=function(e,t,n,r){void 0===r&&(r=!0);var i=initCallbacks$1(n),o=new _queue.default,a=e.edges,s=void 0===a?[]:a;o.enqueue(t);for(var l="",c=function(){var e=o.dequeue();i.enter({current:e,previous:l}),(0,_util$d.getNeighbors)(e,s,r?"target":void 0).forEach((function(t){i.allowTraversal({previous:l,current:e,next:t})&&o.enqueue(t)})),i.leave({current:e,previous:l}),l=e};!o.isEmpty();)c()},_default$h=breadthFirstSearch;bfs.default=_default$h;var connectedComponent={};Object.defineProperty(connectedComponent,"__esModule",{value:!0}),connectedComponent.default=getConnectedComponents,connectedComponent.detectStrongConnectComponents=connectedComponent.detectConnectedComponents=void 0;var _util$c=util$3,detectConnectedComponents=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s=[],l=function e(t){s.push(t),a[t.id]=!0;for(var r=(0,_util$c.getNeighbors)(t.id,i),o=function(t){var i=r[t];if(!a[i]){var o=n.filter((function(e){return e.id===i}));o.length>0&&e(o[0])}},l=0;l<r.length;++l)o(l)},c=0;c<n.length;c++){var u=n[c];if(!a[u.id]){l(u);for(var h=[];s.length>0;)h.push(s.pop());o.push(h)}}return o};connectedComponent.detectConnectedComponents=detectConnectedComponents;var detectStrongConnectComponents=function(e){for(var t=e.nodes,n=void 0===t?[]:t,r=e.edges,i=void 0===r?[]:r,o=[],a={},s={},l={},c=[],u=0,h=function e(t){s[t.id]=u,l[t.id]=u,u+=1,o.push(t),a[t.id]=!0;for(var r=(0,_util$c.getNeighbors)(t.id,i,"target").filter((function(e){return n.map((function(e){return e.id})).indexOf(e)>-1})),h=function(i){var o=r[i];if(s[o]||0===s[o])a[o]&&(l[t.id]=Math.min(l[t.id],s[o]));else{var c=n.filter((function(e){return e.id===o}));c.length>0&&e(c[0]),l[t.id]=Math.min(l[t.id],l[o])}},d=0;d<r.length;d++)h(d);if(l[t.id]===s[t.id]){for(var f=[];o.length>0;){var p=o.pop();if(a[p.id]=!1,f.push(p),p===t)break}f.length>0&&c.push(f)}},d=0,f=n;d<f.length;d++){var p=f[d];s[p.id]||0===s[p.id]||h(p)}return c};function getConnectedComponents(e,t){return t?detectStrongConnectComponents(e):detectConnectedComponents(e)}connectedComponent.detectStrongConnectComponents=detectStrongConnectComponents;var degree$1={};Object.defineProperty(degree$1,"__esModule",{value:!0}),degree$1.getOutDegree=degree$1.getInDegree=degree$1.default=void 0;var degree=function(e){var t={},n=e.nodes,r=void 0===n?[]:n,i=e.edges,o=void 0===i?[]:i;return r.forEach((function(e){t[e.id]={degree:0,inDegree:0,outDegree:0}})),o.forEach((function(e){t[e.source].degree++,t[e.source].outDegree++,t[e.target].degree++,t[e.target].inDegree++})),t},_default$g=degree;degree$1.default=_default$g;var getInDegree=function(e,t){return degree(e)[t]?degree(e)[t].inDegree:0};degree$1.getInDegree=getInDegree;var getOutDegree=function(e,t){return degree(e)[t]?degree(e)[t].outDegree:0};degree$1.getOutDegree=getOutDegree;var detectCycle={},dfs$2={};Object.defineProperty(dfs$2,"__esModule",{value:!0}),dfs$2.default=depthFirstSearch;var _util$b=util$3;function initCallbacks(e){void 0===e&&(e={});var t,n=e,r=function(){},i=(t={},function(e){var n=e.next;return!t[n]&&(t[n]=!0,!0)});return n.allowTraversal=e.allowTraversal||i,n.enter=e.enter||r,n.leave=e.leave||r,n}function depthFirstSearchRecursive(e,t,n,r){r.enter({current:t,previous:n});var i=e.edges,o=void 0===i?[]:i;(0,_util$b.getNeighbors)(t,o,"target").forEach((function(i){r.allowTraversal({previous:n,current:t,next:i})&&depthFirstSearchRecursive(e,i,t,r)})),r.leave({current:t,previous:n})}function depthFirstSearch(e,t,n){depthFirstSearchRecursive(e,t,"",initCallbacks(n))}function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(detectCycle,"__esModule",{value:!0}),detectCycle.detectAllUndirectedCycle=detectCycle.detectAllDirectedCycle=detectCycle.detectAllCycles=detectCycle.default=void 0;var _dfs=_interopRequireDefault$a(dfs$2),_connectedComponent=_interopRequireWildcard$1(connectedComponent),_util$a=util$3;function _getRequireWildcardCache$1(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache$1=function(e){return e?n:t})(e)}function _interopRequireWildcard$1(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$6(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache$1(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function _interopRequireDefault$a(e){return e&&e.__esModule?e:{default:e}}var detectDirectedCycle=function(e){var t=null,n=e.nodes,r={},i={},o={},a={};(void 0===n?[]:n).forEach((function(e){i[e.id]=e}));for(var s={enter:function(e){var n=e.current,a=e.previous;if(o[n]){t={};for(var s=n,l=a;l!==n;)t[s]=l,s=l,l=r[l];t[s]=l}else o[n]=n,delete i[n],r[n]=a},leave:function(e){var t=e.current;a[t]=t,delete o[t]},allowTraversal:function(e){var n=e.next;return!t&&!a[n]}};Object.keys(i).length;){var l=Object.keys(i)[0];(0,_dfs.default)(e,l,s)}return t},detectAllUndirectedCycle=function(e,t,n){var r,i;void 0===n&&(n=!0);for(var o=[],a=0,s=(0,_connectedComponent.default)(e,!1);a<s.length;a++){var l=s[a];if(l.length)for(var c=l[0],u=c.id,h=[c],d=((r={})[u]=c,r),f=((i={})[u]=new Set,i);h.length>0;)for(var p=h.pop(),g=p.id,m=(0,_util$a.getNeighbors)(g,e.edges),v=function(r){var i,a=m[r],s=e.nodes.find((function(e){return e.id===a}));if(a===g)o.push(((i={})[a]=p,i));else if(a in f){if(!f[g].has(s)){for(var l=!0,c=[s,p],u=d[g];f[a].size&&!f[a].has(u)&&(c.push(u),u!==d[u.id]);)u=d[u.id];if(c.push(u),t&&n?(l=!1,c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!0)):t&&!n&&c.findIndex((function(e){return t.indexOf(e.id)>-1}))>-1&&(l=!1),l){for(var v={},y=1;y<c.length;y+=1)v[c[y-1].id]=c[y];c.length&&(v[c[c.length-1].id]=c[0]),o.push(v)}f[a].add(p)}}else d[a]=p,h.push(s),f[a]=new Set([p])},y=0;y<m.length;y+=1)v(y)}return o};detectCycle.detectAllUndirectedCycle=detectAllUndirectedCycle;var detectAllDirectedCycle=function(e,t,n){void 0===n&&(n=!0);for(var r=[],i=new Set,o=[],a=[],s={},l={},c=function e(l,c,u){var h=!1;if(t&&!1===n&&t.indexOf(l.id)>-1)return h;r.push(l),i.add(l);for(var d=u[l.id],f=0;f<d.length;f+=1){if((m=s[d[f]])===c){for(var p={},g=1;g<r.length;g+=1)p[r[g-1].id]=r[g];r.length&&(p[r[r.length-1].id]=r[0]),a.push(p),h=!0}else i.has(m)||e(m,c,u)&&(h=!0)}if(h)!function(e){for(var t=[e];t.length>0;){var n=t.pop();i.has(n)&&(i.delete(n),o[n.id].forEach((function(e){t.push(e)})),o[n.id].clear())}}(l);else for(f=0;f<d.length;f+=1){var m=s[d[f]];o[m.id].has(l)||o[m.id].add(l)}return r.pop(),h},u=e.nodes,h=void 0===u?[]:u,d=0;d<h.length;d+=1){var f=h[d],p=f.id;l[p]=d,s[d]=f}if(t&&n){var g=function(e){var n=t[e];l[h[e].id]=l[n],l[n]=0,s[0]=h.find((function(e){return e.id===n})),s[l[h[e].id]]=h[e]};for(d=0;d<t.length;d++)g(d)}for(var m=function(r){for(var i,o,s=1/0,c=0;c<r.length;c+=1)for(var u=r[c],h=0;h<u.length;h++){var d=l[u[h].id];d<s&&(s=d,o=c)}var f=r[o],p=[];for(c=0;c<f.length;c+=1){var g=f[c];p[g.id]=[];for(var m=0,v=(0,_util$a.getNeighbors)(g.id,e.edges,"target").filter((function(e){return f.map((function(e){return e.id})).indexOf(e)>-1}));m<v.length;m++){var y=v[m];y!==g.id||!1===n&&t.indexOf(g.id)>-1?p[g.id].push(l[y]):a.push(((i={})[g.id]=g,i))}}return{component:f,adjList:p,minIdx:s}},v=0;v<h.length;){var y=h.filter((function(e){return l[e.id]>=v})),b=(0,_connectedComponent.detectStrongConnectComponents)({nodes:y,edges:e.edges}).filter((function(e){return e.length>1}));if(0===b.length)break;var x=m(b),w=x.minIdx,_=x.adjList,C=x.component;if(!(C.length>1))break;C.forEach((function(e){o[e.id]=new Set}));var $=s[w];if(t&&n&&-1===t.indexOf($.id))return a;c($,$,_),v=w+1}return a};detectCycle.detectAllDirectedCycle=detectAllDirectedCycle;var detectAllCycles=function(e,t,n,r){return void 0===r&&(r=!0),t?detectAllDirectedCycle(e,n,r):detectAllUndirectedCycle(e,n,r)};detectCycle.detectAllCycles=detectAllCycles;var _default$f=detectDirectedCycle;detectCycle.default=_default$f;var dijkstra$2={};const require$$0$5=getAugmentedNamespace(tslib_es6),require$$0$4=getAugmentedNamespace(esm$1);Object.defineProperty(dijkstra$2,"__esModule",{value:!0}),dijkstra$2.default=void 0;var _tslib$1=require$$0$5,_util$9=require$$0$4,_util2=util$3,minVertex=function(e,t,n){for(var r,i=1/0,o=0;o<t.length;o++){var a=t[o].id;!n[a]&&e[a]<=i&&(i=e[a],r=t[o])}return r},dijkstra$1=function(e,t,n,r){var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l={},c={},u={};o.forEach((function(e,n){var r=e.id;c[r]=1/0,r===t&&(c[r]=0)}));for(var h=o.length,d=function(e){var t=minVertex(c,o,l),i=t.id;if(l[i]=!0,c[i]===1/0)return"continue";(n?(0,_util2.getOutEdgesNodeId)(i,s):(0,_util2.getEdgesByNodeId)(i,s)).forEach((function(e){var n=e.target,o=e.source,a=n===i?o:n,s=r&&e[r]?e[r]:1;c[a]>c[t.id]+s?(c[a]=c[t.id]+s,u[a]=[t.id]):c[a]===c[t.id]+s&&u[a].push(t.id)}))},f=0;f<h;f++)d();u[t]=[t];var p={};for(var g in c)c[g]!==1/0&&findAllPaths(t,g,u,p);var m={};for(var g in p)m[g]=p[g][0];return{length:c,path:m,allPath:p}},_default$e=dijkstra$1;function findAllPaths(e,t,n,r){if(e===t)return[e];if(r[t])return r[t];for(var i=[],o=0,a=n[t];o<a.length;o++){var s=findAllPaths(e,a[o],n,r);if(!s)return;for(var l=0,c=s;l<c.length;l++){var u=c[l];(0,_util$9.isArray)(u)?i.push((0,_tslib$1.__spreadArray)((0,_tslib$1.__spreadArray)([],u,!0),[t],!1)):i.push([u,t])}}return r[t]=i,r[t]}dijkstra$2.default=_default$e;var findPath$1={};Object.defineProperty(findPath$1,"__esModule",{value:!0}),findPath$1.findShortestPath=findPath$1.findAllPath=void 0;var _dijkstra$1=_interopRequireDefault$9(dijkstra$2),_util$8=util$3;function _interopRequireDefault$9(e){return e&&e.__esModule?e:{default:e}}var findShortestPath=function(e,t,n,r,i){var o=(0,_dijkstra$1.default)(e,t,r,i),a=o.length,s=o.path,l=o.allPath;return{length:a[n],path:s[n],allPath:l[n]}};findPath$1.findShortestPath=findShortestPath;var findAllPath=function(e,t,n,r){var i;if(t===n)return[[t]];var o=e.edges,a=void 0===o?[]:o,s=[t],l=((i={})[t]=!0,i),c=[],u=[],h=r?(0,_util$8.getNeighbors)(t,a,"target"):(0,_util$8.getNeighbors)(t,a);for(c.push(h);s.length>0&&c.length>0;){var d=c[c.length-1];if(d.length){var f=d.shift();if(f&&(s.push(f),l[f]=!0,h=r?(0,_util$8.getNeighbors)(f,a,"target"):(0,_util$8.getNeighbors)(f,a),c.push(h.filter((function(e){return!l[e]})))),s[s.length-1]===n){var p=s.map((function(e){return e}));u.push(p);g=s.pop();l[g]=!1,c.pop()}}else{var g=s.pop();l[g]=!1,c.pop()}}return u};findPath$1.findAllPath=findAllPath;var floydWarshall$2={};Object.defineProperty(floydWarshall$2,"__esModule",{value:!0}),floydWarshall$2.default=void 0;var _adjacentMatrix$2=_interopRequireDefault$8(adjacentMatrix);function _interopRequireDefault$8(e){return e&&e.__esModule?e:{default:e}}var floydWarshall$1=function(e,t){for(var n=(0,_adjacentMatrix$2.default)(e,t),r=[],i=n.length,o=0;o<i;o+=1){r[o]=[];for(var a=0;a<i;a+=1)o===a?r[o][a]=0:0!==n[o][a]&&n[o][a]?r[o][a]=n[o][a]:r[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)r[o][a]>r[o][s]+r[s][a]&&(r[o][a]=r[o][s]+r[s][a]);return r},_default$d=floydWarshall$1;floydWarshall$2.default=_default$d;var labelPropagation$1={};Object.defineProperty(labelPropagation$1,"__esModule",{value:!0}),labelPropagation$1.default=void 0;var _adjacentMatrix$1=_interopRequireDefault$7(adjacentMatrix),_util$7=util$3;function _interopRequireDefault$7(e){return e&&e.__esModule?e:{default:e}}var labelPropagation=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e3);var i=e.nodes,o=void 0===i?[]:i,a=e.edges,s=void 0===a?[]:a,l={},c={};o.forEach((function(e,t){var n=(0,_util$7.uniqueId)();e.clusterId=n,l[n]={id:n,nodes:[e]},c[e.id]={node:e,idx:t}}));var u=(0,_adjacentMatrix$1.default)(e,t),h={};u.forEach((function(e,t){var n=o[t].id;h[n]={},e.forEach((function(e,t){if(e){var r=o[t].id;h[n][r]=e}}))}));for(var d=0,f=function(){var e=!1;if(o.forEach((function(t){var n={};Object.keys(h[t.id]).forEach((function(e){var r=h[t.id][e],i=c[e].node.clusterId;n[i]||(n[i]=0),n[i]+=r}));var r=-1/0,i=[];if(Object.keys(n).forEach((function(e){r<n[e]?(r=n[e],i=[e]):r===n[e]&&i.push(e)})),1!==i.length||i[0]!==t.clusterId){var o=i.indexOf(t.clusterId);if(o>=0&&i.splice(o,1),i&&i.length){e=!0;var a=l[t.clusterId],s=a.nodes.indexOf(t);a.nodes.splice(s,1);var u=Math.floor(Math.random()*i.length),d=l[i[u]];d.nodes.push(t),t.clusterId=d.id}}})),!e)return"break";d++};d<r;){if("break"===f())break}Object.keys(l).forEach((function(e){var t=l[e];t.nodes&&t.nodes.length||delete l[e]}));var p=[],g={};s.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=c[t].node.clusterId,a=c[r].node.clusterId,s="".concat(o,"---").concat(a);if(g[s])g[s].weight+=i,g[s].count++;else{var l={source:o,target:a,weight:i,count:1};g[s]=l,p.push(l)}}));var m=[];return Object.keys(l).forEach((function(e){m.push(l[e])})),{clusters:m,clusterEdges:p}},_default$c=labelPropagation;labelPropagation$1.default=_default$c;var louvain$1={},vector={};Object.defineProperty(vector,"__esModule",{value:!0}),vector.default=void 0;var _util$6=require$$0$4,Vector=function(){function e(e){this.arr=e}return e.prototype.getArr=function(){return this.arr||[]},e.prototype.add=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]+r[o];return new e(i)}},e.prototype.subtract=function(t){var n,r=t.arr;if(!(null===(n=this.arr)||void 0===n?void 0:n.length))return new e(r);if(!(null==r?void 0:r.length))return new e(this.arr);if(this.arr.length===r.length){var i=[];for(var o in this.arr)i[o]=this.arr[o]-r[o];return new e(i)}},e.prototype.avg=function(t){var n=[];if(0!==t)for(var r in this.arr)n[r]=this.arr[r]/t;return new e(n)},e.prototype.negate=function(){var t=[];for(var n in this.arr)t[n]=-this.arr[n];return new e(t)},e.prototype.squareEuclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return r}},e.prototype.euclideanDistance=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=Math.pow(this.arr[i]-e.arr[i],2);return Math.sqrt(r)}},e.prototype.normalize=function(){var t=[],n=(0,_util$6.clone)(this.arr);n.sort((function(e,t){return e-t}));var r=n[n.length-1],i=n[0];for(var o in this.arr)t[o]=(this.arr[o]-i)/(r-i);return new e(t)},e.prototype.norm2=function(){var e;if(!(null===(e=this.arr)||void 0===e?void 0:e.length))return 0;var t=0;for(var n in this.arr)t+=Math.pow(this.arr[n],2);return Math.sqrt(t)},e.prototype.dot=function(e){var t,n=e.arr;if(!(null===(t=this.arr)||void 0===t?void 0:t.length)||!(null==n?void 0:n.length))return 0;if(this.arr.length===n.length){var r=0;for(var i in this.arr)r+=this.arr[i]*e.arr[i];return r}},e.prototype.equal=function(e){var t,n=e.arr;if((null===(t=this.arr)||void 0===t?void 0:t.length)!==(null==n?void 0:n.length))return!1;for(var r in this.arr)if(this.arr[r]!==n[r])return!1;return!0},e}(),_default$b=Vector;vector.default=_default$b;var nodeProperties={},time={};Object.defineProperty(time,"__esModule",{value:!0}),time.secondReg=time.dateReg=void 0;var secondReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;time.secondReg=secondReg;var dateReg=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;time.dateReg=dateReg,Object.defineProperty(nodeProperties,"__esModule",{value:!0}),nodeProperties.getPropertyWeight=nodeProperties.getAllSortProperties=nodeProperties.getAllProperties=nodeProperties.default=void 0;var _time=time,getAllSortProperties=function(e,t){void 0===e&&(e=[]),void 0===t&&(t=100);var n={};e.forEach((function(e){e.properties&&Object.keys(e.properties).forEach((function(t){"id"===t||!"".concat(e.properties[t]).match(_time.secondReg)&&!"".concat(e.properties[t]).match(_time.dateReg)&&isNaN(Number(e.properties[t]))?n.hasOwnProperty(t)&&delete n[t]:n.hasOwnProperty(t)?n[t]+=1:n[t]=1}))}));var r=Object.keys(n).sort((function(e,t){return n[t]-n[e]}));return r.length<t?r:r.slice(0,t)};nodeProperties.getAllSortProperties=getAllSortProperties;var processProperty=function(e,t){return t.map((function(t){return e.hasOwnProperty(t)?e[t]:0}))},getPropertyWeight=function(e){for(var t=getAllSortProperties(e),n=[],r=0;r<e.length;r++)n[r]=processProperty(e[r].properties,t);return n};nodeProperties.getPropertyWeight=getPropertyWeight;var getAllProperties=function(e,t){void 0===t&&(t=void 0);var n=[];return e.forEach((function(e){void 0===t&&n.push(e),void 0!==e[t]&&n.push(e[t])})),n};nodeProperties.getAllProperties=getAllProperties;var _default$a={getAllSortProperties:getAllSortProperties,getPropertyWeight:getPropertyWeight,getAllProperties:getAllProperties};nodeProperties.default=_default$a;var dataPreprocessing={},types$1={},DistanceType;Object.defineProperty(types$1,"__esModule",{value:!0}),types$1.DistanceType=void 0,types$1.DistanceType=DistanceType,(DistanceType||(types$1.DistanceType=DistanceType={})).EuclideanDistance="euclideanDistance",Object.defineProperty(dataPreprocessing,"__esModule",{value:!0}),dataPreprocessing.oneHot=dataPreprocessing.getDistance=dataPreprocessing.getAllKeyValueMap=dataPreprocessing.default=void 0;var _util$5=require$$0$4,_types=types$1,_vector$1=_interopRequireDefault$6(vector);function _interopRequireDefault$6(e){return e&&e.__esModule?e:{default:e}}var getAllKeyValueMap=function(e,t,n){var r=[];(null==t?void 0:t.length)?r=t:(e.forEach((function(e){r=r.concat(Object.keys(e))})),r=(0,_util$5.uniq)(r));var i={};return r.forEach((function(t){var r=[];e.forEach((function(e){void 0!==e[t]&&""!==e[t]&&r.push(e[t])})),r.length&&!(null==n?void 0:n.includes(t))&&(i[t]=(0,_util$5.uniq)(r))})),i};dataPreprocessing.getAllKeyValueMap=getAllKeyValueMap;var oneHot=function(e,t,n){var r=getAllKeyValueMap(e,t,n),i=[];if(!Object.keys(r).length)return i;var o=Object.values(r).every((function(e){return e.every((function(e){return"number"==typeof e}))}));return e.forEach((function(e,t){var n=[];Object.keys(r).forEach((function(t){var i=e[t],a=r[t],s=a.findIndex((function(e){return i===e})),l=[];if(o)l.push(i);else for(var c=0;c<a.length;c++)c===s?l.push(1):l.push(0);n=n.concat(l)})),i[t]=n})),i};dataPreprocessing.oneHot=oneHot;var getDistance=function(e,t,n,r){void 0===n&&(n=_types.DistanceType.EuclideanDistance);var i=0;if(n===_types.DistanceType.EuclideanDistance)i=new _vector$1.default(e).euclideanDistance(new _vector$1.default(t));return i};dataPreprocessing.getDistance=getDistance;var _default$9={getAllKeyValueMap:getAllKeyValueMap,oneHot:oneHot,getDistance:getDistance};dataPreprocessing.default=_default$9,Object.defineProperty(louvain$1,"__esModule",{value:!0}),louvain$1.default=void 0;var _util$4=require$$0$4,_adjacentMatrix=_interopRequireDefault$5(adjacentMatrix),_vector=_interopRequireDefault$5(vector),_nodeProperties=nodeProperties,_dataPreprocessing=dataPreprocessing;function _interopRequireDefault$5(e){return e&&e.__esModule?e:{default:e}}var getModularity=function(e,t,n,r){for(var i=t.length,o=2*r,a=0,s=0;s<i;s++)for(var l=e[s].clusterId,c=0;c<i;c++){if(l===e[c].clusterId)a+=(t[s][c]||0)-(n[s]||0)*(n[c]||0)/o}return a*=1/o},getInertialModularity=function(e,t){void 0===e&&(e=[]);for(var n=e.length,r=new _vector.default([]),i=0;i<n;i++)r=r.add(new _vector.default(t[i]));var o=r.avg(n);o.normalize();var a=0;for(i=0;i<n;i++){a+=(l=new _vector.default(t[i])).squareEuclideanDistance(o)}var s=[];e.forEach((function(){s.push([])}));for(i=0;i<n;i++){var l=new _vector.default(t[i]);e[i].clusterInertial=0;for(var c=0;c<n;c++)if(i!==c){var u=new _vector.default(t[c]);s[i][c]=l.squareEuclideanDistance(u),e[i].clusterInertial+=s[i][c]}else s[i][c]=0}var h=0,d=2*n*a;for(i=0;i<n;i++){var f=e[i].clusterId;for(c=0;c<n;c++){var p=e[c].clusterId;if(i!==c&&f===p)h+=e[i].clusterInertial*e[c].clusterInertial/Math.pow(d,2)-s[i][c]/d}}return Number(h.toFixed(4))},louvain=function(e,t,n,r,i,o,a,s,l){void 0===t&&(t=!1),void 0===n&&(n="weight"),void 0===r&&(r=1e-4),void 0===i&&(i=!1),void 0===o&&(o=void 0),void 0===a&&(a=[]),void 0===s&&(s=["id"]),void 0===l&&(l=1);var c=e.nodes,u=void 0===c?[]:c,h=e.edges,d=void 0===h?[]:h,f=[];if(i){u.forEach((function(e,t){e.properties=e.properties||{},e.originIndex=t}));var p=[];u.every((function(e){return e.hasOwnProperty("nodeType")}))&&(p=Array.from(new Set(u.map((function(e){return e.nodeType})))),u.forEach((function(e){e.properties.nodeType=p.findIndex((function(t){return t===e.nodeType}))})));var g=(0,_nodeProperties.getAllProperties)(u,o);f=(0,_dataPreprocessing.oneHot)(g,a,s)}var m=1,v={},y={};u.forEach((function(e,t){var n=String(m++);e.clusterId=n,v[n]={id:n,nodes:[e]},y[e.id]={node:e,idx:t}}));var b=(0,_adjacentMatrix.default)(e,t),x=[],w={},_=0;b.forEach((function(e,t){var n=0,r=u[t].id;w[r]={},e.forEach((function(e,t){if(e){n+=e;var i=u[t].id;w[r][i]=e,_+=e}})),x.push(n)})),_/=2;for(var C=1/0,$=1/0,S=0,E=[],A={};;){C=i&&u.every((function(e){return e.hasOwnProperty("properties")}))?getModularity(u,b,x,_)+getInertialModularity(u,f)*l:getModularity(u,b,x,_),0===S&&($=C,E=u,A=v);var M=C>0&&C>$&&C-$<r;if(C>$&&(E=u.map((function(e){return{node:e,clusterId:e.clusterId}})),A=(0,_util$4.clone)(v),$=C),M||S>100)break;S++,Object.keys(v).forEach((function(e){var t=0;d.forEach((function(r){var i=r.source,o=r.target,a=y[i].node.clusterId,s=y[o].node.clusterId;(a===e&&s!==e||s===e&&a!==e)&&(t+=r[n]||1)})),v[e].sumTot=t})),u.forEach((function(e,t){var r,o=v[e.clusterId],a=0,s=x[t]/(2*_),c=0,u=o.nodes;u.forEach((function(e){var n=y[e.id].idx;c+=b[t][n]||0}));var h=c-o.sumTot*s,p=u.filter((function(t){return t.id!==e.id}));p.forEach((function(e,t){f[e.originIndex]}));var g=getInertialModularity(p,f)*l,m=w[e.id];if(Object.keys(m).forEach((function(n){var o=y[n].node.clusterId;if(o!==e.clusterId){var c=v[o],u=c.nodes;if(u&&u.length){var d=0;u.forEach((function(e){var n=y[e.id].idx;d+=b[t][n]||0}));var p=d-c.sumTot*s,m=u.concat([e]);m.forEach((function(e,t){f[e.originIndex]}));var x=getInertialModularity(m,f)*l,w=p-h;i&&(w=p+x-(h+g)),w>a&&(a=w,r=c)}}})),a>0){r.nodes.push(e);var C=e.clusterId;e.clusterId=r.id;var $=o.nodes.indexOf(e);o.nodes.splice($,1);var S=0,E=0;d.forEach((function(e){var t=e.source,i=e.target,o=y[t].node.clusterId,a=y[i].node.clusterId;(o===r.id&&a!==r.id||a===r.id&&o!==r.id)&&(S+=e[n]||1),(o===C&&a!==C||a===C&&o!==C)&&(E+=e[n]||1)})),r.sumTot=S,o.sumTot=E}}))}var k={},T=0;Object.keys(A).forEach((function(e){var t=A[e];if(t.nodes&&t.nodes.length){var n=String(T+1);n!==e&&(t.id=n,t.nodes=t.nodes.map((function(e){return{id:e.id,clusterId:n}})),A[n]=t,k[e]=n,delete A[e],T++)}else delete A[e]})),E.forEach((function(e){var t=e.node,n=e.clusterId;t&&(t.clusterId=n,t.clusterId&&k[t.clusterId]&&(t.clusterId=k[t.clusterId]))}));var P=[],O={};d.forEach((function(e){var t=e.source,r=e.target,i=e[n]||1,o=y[t].node.clusterId,a=y[r].node.clusterId;if(o&&a){var s="".concat(o,"---").concat(a);if(O[s])O[s].weight+=i,O[s].count++;else{var l={source:o,target:a,weight:i,count:1};O[s]=l,P.push(l)}}}));var N=[];return Object.keys(A).forEach((function(e){N.push(A[e])})),{clusters:N,clusterEdges:P}},_default$8=louvain;louvain$1.default=_default$8;var mts={},unionFind={};Object.defineProperty(unionFind,"__esModule",{value:!0}),unionFind.default=void 0;var UnionFind=function(){function e(e){this.count=e.length,this.parent={};for(var t=0,n=e;t<n.length;t++){var r=n[t];this.parent[r]=r}}return e.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},e.prototype.union=function(e,t){var n=this.find(e),r=this.find(t);n!==r&&(n<r?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},e.prototype.connected=function(e,t){return this.find(e)===this.find(t)},e}(),_default$7=UnionFind;unionFind.default=_default$7;var binaryHeap={};Object.defineProperty(binaryHeap,"__esModule",{value:!0}),binaryHeap.default=void 0;var defaultCompare=function(e,t){return e-t},MinBinaryHeap=function(){function e(e){void 0===e&&(e=defaultCompare),this.compareFn=e,this.list=[]}return e.prototype.getLeft=function(e){return 2*e+1},e.prototype.getRight=function(e){return 2*e+2},e.prototype.getParent=function(e){return 0===e?null:Math.floor((e-1)/2)},e.prototype.isEmpty=function(){return this.list.length<=0},e.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},e.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},e.prototype.insert=function(e){if(null!==e){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},e.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var n=this.list[t];this.list[t]=this.list[e],this.list[e]=n,e=t,t=this.getParent(e)}},e.prototype.moveDown=function(e){var t,n=e,r=this.getLeft(e),i=this.getRight(e),o=this.list.length;null!==r&&r<o&&this.compareFn(this.list[n],this.list[r])>0?n=r:null!==i&&i<o&&this.compareFn(this.list[n],this.list[i])>0&&(n=i),e!==n&&(t=[this.list[n],this.list[e]],this.list[e]=t[0],this.list[n]=t[1],this.moveDown(n))},e}(),_default$6=MinBinaryHeap;binaryHeap.default=_default$6,Object.defineProperty(mts,"__esModule",{value:!0}),mts.default=void 0;var _unionFind=_interopRequireDefault$4(unionFind),_binaryHeap=_interopRequireDefault$4(binaryHeap),_util$3=util$3;function _interopRequireDefault$4(e){return e&&e.__esModule?e:{default:e}}var primMST=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=i[0],l=new Set;l.add(s);var c=new _binaryHeap.default((function(e,n){return t?e.weight-n.weight:0}));for((0,_util$3.getEdgesByNodeId)(s.id,a).forEach((function(e){c.insert(e)}));!c.isEmpty();){var u=c.delMin(),h=u.source,d=u.target;l.has(h)&&l.has(d)||(n.push(u),l.has(h)||(l.add(h),(0,_util$3.getEdgesByNodeId)(h,a).forEach((function(e){c.insert(e)}))),l.has(d)||(l.add(d),(0,_util$3.getEdgesByNodeId)(d,a).forEach((function(e){c.insert(e)}))))}return n},kruskalMST=function(e,t){var n=[],r=e.nodes,i=void 0===r?[]:r,o=e.edges,a=void 0===o?[]:o;if(0===i.length)return n;var s=a.map((function(e){return e}));t&&s.sort((function(e,t){return e.weight-t.weight}));for(var l=new _unionFind.default(i.map((function(e){return e.id})));s.length>0;){var c=s.shift(),u=c.source,h=c.target;l.connected(u,h)||(n.push(c),l.union(u,h))}return n},minimumSpanningTree=function(e,t,n){return n?{prim:primMST,kruskal:kruskalMST}[n](e,t):kruskalMST(e,t)},_default$5=minimumSpanningTree;mts.default=_default$5;var pageRank$1={};Object.defineProperty(pageRank$1,"__esModule",{value:!0}),pageRank$1.default=void 0;var _degree=_interopRequireDefault$3(degree$1),_util$2=util$3;function _interopRequireDefault$3(e){return e&&e.__esModule?e:{default:e}}var pageRank=function(e,t,n){"number"!=typeof t&&(t=1e-6),"number"!=typeof n&&(n=.85);for(var r,i=1,o=0,a=1e3,s=e.nodes,l=void 0===s?[]:s,c=e.edges,u=void 0===c?[]:c,h=l.length,d={},f={},p=0;p<h;++p){d[m=(w=l[p]).id]=1/h,f[m]=1/h}for(var g=(0,_degree.default)(e);a>0&&i>t;){o=0;for(p=0;p<h;++p){var m=(w=l[p]).id;if(r=0,0===g[w.id].inDegree)d[m]=0;else{for(var v=(0,_util$2.getNeighbors)(m,u,"source"),y=0;y<v.length;++y){var b=v[y],x=g[b].outDegree;x>0&&(r+=f[b]/x)}d[m]=n*r,o+=d[m]}}o=(1-o)/h,i=0;for(p=0;p<h;++p){var w;r=d[m=(w=l[p]).id]+o,i+=Math.abs(r-f[m]),f[m]=r}a-=1}return f},_default$4=pageRank;pageRank$1.default=_default$4;var gaddi={},gSpan$1={},struct={};Object.defineProperty(struct,"__esModule",{value:!0}),struct.VACANT_NODE_LABEL=struct.VACANT_NODE_ID=struct.VACANT_GRAPH_ID=struct.VACANT_EDGE_LABEL=struct.VACANT_EDGE_ID=struct.Node=struct.Graph=struct.Edge=struct.AUTO_EDGE_ID=void 0;var VACANT_EDGE_ID=-1;struct.VACANT_EDGE_ID=VACANT_EDGE_ID;var VACANT_NODE_ID=-1;struct.VACANT_NODE_ID=VACANT_NODE_ID;var VACANT_EDGE_LABEL="-1";struct.VACANT_EDGE_LABEL=VACANT_EDGE_LABEL;var VACANT_NODE_LABEL="-1";struct.VACANT_NODE_LABEL=VACANT_NODE_LABEL;var VACANT_GRAPH_ID=-1;struct.VACANT_GRAPH_ID=VACANT_GRAPH_ID;var AUTO_EDGE_ID="-1";struct.AUTO_EDGE_ID=AUTO_EDGE_ID;var Edge=function(e,t,n,r){void 0===e&&(e=VACANT_EDGE_ID),void 0===t&&(t=VACANT_NODE_ID),void 0===n&&(n=VACANT_NODE_ID),void 0===r&&(r=VACANT_EDGE_LABEL),this.id=e,this.from=t,this.to=n,this.label=r};struct.Edge=Edge;var Node$1=function(){function e(e,t){void 0===e&&(e=VACANT_NODE_ID),void 0===t&&(t=VACANT_NODE_LABEL),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return e.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},e}();struct.Node=Node$1;var Graph$3=function(){function e(e,t,n){void 0===e&&(e=VACANT_NODE_ID),void 0===t&&(t=!0),void 0===n&&(n=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=n}return e.prototype.getNodeNum=function(){return this.nodes.length},e.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var n=new Node$1(e,t);this.nodes.push(n),this.nodeMap[e]=n,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},e.prototype.addEdge=function(e,t,n,r){if((this.edgeIdAutoIncrease||void 0===e)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[n]&&this.nodeMap[n].edgeMap[e])){var i=new Edge(e,t,n,r);if(this.edges.push(i),this.edgeMap[e]=i,this.nodeMap[t].addEdge(i),this.edgeLabelMap[r]||(this.edgeLabelMap[r]=[]),this.edgeLabelMap[r].push(i),!this.directed){var o=new Edge(e,n,t,r);this.nodeMap[n].addEdge(o),this.edgeLabelMap[r].push(o)}}},e}();struct.Graph=Graph$3,Object.defineProperty(gSpan$1,"__esModule",{value:!0}),gSpan$1.default=void 0;var _util$1=require$$0$4,_struct=struct,DFSedge=function(){function e(e,t,n,r,i){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:n||_struct.VACANT_NODE_LABEL,edgeLabel:r||_struct.VACANT_EDGE_LABEL,nodeLabel2:i||_struct.VACANT_NODE_LABEL}}return e.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e}(),DFScode=function(){function e(){this.rmpath=[],this.dfsEdgeList=[]}return e.prototype.equalTo=function(e){var t=this.dfsEdgeList.length;if(t!==e.length)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},e.prototype.notEqualTo=function(e){return!this.equalTo(e)},e.prototype.pushBack=function(e,t,n,r,i){return this.dfsEdgeList.push(new DFSedge(e,t,n,r,i)),this.dfsEdgeList},e.prototype.toGraph=function(e,t){void 0===e&&(e=_struct.VACANT_GRAPH_ID),void 0===t&&(t=!1);var n=new _struct.Graph(e,!0,t);return this.dfsEdgeList.forEach((function(e){var t=e.fromNode,r=e.toNode,i=e.nodeEdgeNodeLabel,o=i.nodeLabel1,a=i.edgeLabel,s=i.nodeLabel2;o!==_struct.VACANT_NODE_LABEL&&n.addNode(t,o),s!==_struct.VACANT_NODE_LABEL&&n.addNode(r,s),o!==_struct.VACANT_NODE_LABEL&&s!==o&&n.addEdge(void 0,t,r,a)})),n},e.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length-1;t>=0;t--){var n=this.dfsEdgeList[t],r=n.fromNode,i=n.toNode;r<i&&(void 0===e||i===e)&&(this.rmpath.push(t),e=r)}return this.rmpath},e.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach((function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)})),Object.keys(e).length},e}(),History=function(){function e(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return e.prototype.hasNode=function(e){return 1===this.nodesUsed[e.id]},e.prototype.hasEdge=function(e){return 1===this.edgesUsed[e.id]},e}(),GSpan=function(){function e(e){var t=e.graphs,n=e.minSupport,r=void 0===n?2:n,i=e.minNodeNum,o=void 0===i?1:i,a=e.maxNodeNum,s=void 0===a?4:a,l=e.top,c=void 0===l?10:l,u=e.directed,h=void 0!==u&&u,d=e.verbose,f=void 0!==d&&d;this.graphs=t,this.dfsCode=new DFScode,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=r,this.top=c,this.directed=h,this.counter=0,this.maxNodeNum=s,this.minNodeNum=o,this.verbose=f,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return e.prototype.findForwardRootEdges=function(e,t){var n=this,r=[],i=e.nodeMap;return t.edges.forEach((function(e){(n.directed||t.label<=i[e.to].label)&&r.push(e)})),r},e.prototype.findBackwardEdge=function(e,t,n,r){if(!this.directed&&t===n)return null;for(var i=e.nodeMap,o=i[n.to].edges,a=o.length,s=0;s<a;s++){var l=o[s];if(!r.hasEdge(l)&&l.to===t.from)if(this.directed){if(i[t.from].label<i[n.to].label||i[t.from].label===i[n.to].label&&t.label<=l.label)return l}else if(t.label<l.label||t.label===l.label&&i[t.to].label<=i[n.to].label)return l}return null},e.prototype.findForwardPureEdges=function(e,t,n,r){for(var i=[],o=t.to,a=e.nodeMap[o].edges,s=a.length,l=0;l<s;l++){var c=a[l],u=e.nodeMap[c.to];n<=u.label&&!r.hasNode(u)&&i.push(c)}return i},e.prototype.findForwardRmpathEdges=function(e,t,n,r){for(var i=[],o=e.nodeMap,a=o[t.to].label,s=o[t.from].edges,l=s.length,c=0;c<l;c++){var u=s[c],h=o[u.to].label;t.to===u.to||n>h||r.hasNode(o[u.to])||(t.label<u.label||t.label===u.label&&a<=h)&&i.push(u)}return i},e.prototype.getSupport=function(e){var t={};return e.forEach((function(e){t[e.graphId]||(t[e.graphId]=!0)})),Object.keys(t).length},e.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach((function(n){var r=e[n],i=r.nodeLabel1,o=r.edgeLabel,a=r.nodeLabel2;t?(i<t.nodeLabel1||i===t.nodeLabel1&&o<t.edgeLabel||i===t.nodeLabel1&&o===t.edgeLabel&&a<t.nodeLabel2)&&(t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}):t={nodeLabel1:i,edgeLabel:o,nodeLabel2:a}})),t},e.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose,1===t.dfsEdgeList.length)return!0;var n=this.directed,r=t.toGraph(_struct.VACANT_GRAPH_ID,n),i=r.nodeMap,o=new DFScode,a={};r.nodes.forEach((function(t){e.findForwardRootEdges(r,t).forEach((function(e){var n=i[e.to],o="".concat(t.label,"-").concat(e.label,"-").concat(n.label);a[o]||(a[o]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:n.label});var s={graphId:r.id,edge:e,preNode:null};a[o].projected.push(s)}))}));var s=this.findMinLabel(a);if(s){o.dfsEdgeList.push(new DFSedge(0,1,s.nodeLabel1,s.edgeLabel,s.nodeLabel2));var l="".concat(s.nodeLabel1,"-").concat(s.edgeLabel,"-").concat(s.nodeLabel2);return function a(s){for(var l=o.buildRmpath(),c=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u=o.dfsEdgeList[l[0]].toNode,h={},d=!1,f=0,p=n?-1:0,g=function(t){if(d)return"break";s.forEach((function(n){var i=new History(n),a=e.findBackwardEdge(r,i.edges[l[t]],i.edges[l[0]],i);a&&(h[a.label]||(h[a.label]={projected:[],edgeLabel:a.label}),h[a.label].projected.push({graphId:r.id,edge:h,preNode:n}),f=o.dfsEdgeList[l[t]].fromNode,d=!0)}))},m=l.length-1;m>p;m--){if("break"===g(m))break}if(d){var v=e.findMinLabel(h);o.dfsEdgeList.push(new DFSedge(u,f,_struct.VACANT_NODE_LABEL,v.edgeLabel,_struct.VACANT_NODE_LABEL));var y=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[y]===o.dfsEdgeList[y]&&a(h[v.edgeLabel].projected)}var b={};d=!1;var x=0;s.forEach((function(t){var n=new History(t),o=e.findForwardPureEdges(r,n.edges[l[0]],c,n);o.length>0&&(d=!0,x=u,o.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}));var w=l.length,_=function(t){if(d)return"break";var n=l[t];s.forEach((function(t){var a=new History(t),s=e.findForwardRmpathEdges(r,a.edges[n],c,a);s.length>0&&(d=!0,x=o.dfsEdgeList[n].fromNode,s.forEach((function(e){var n="".concat(e.label,"-").concat(i[e.to].label);b[n]||(b[n]={projected:[],edgeLabel:e.label,nodeLabel2:i[e.to].label}),b[n].projected.push({graphId:r.id,edge:e,preNode:t})})))}))};for(m=0;m<w;m++){if("break"===_(m))break}if(!d)return!0;var C=e.findMinLabel(b);o.dfsEdgeList.push(new DFSedge(x,u+1,_struct.VACANT_NODE_LABEL,C.edgeLabel,C.nodeLabel2));var $=o.dfsEdgeList.length-1;return t.dfsEdgeList[$]===o.dfsEdgeList[$]&&a(b["".concat(C.edgeLabel,"-").concat(C.nodeLabel2)].projected)}(a[l].projected)}},e.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,_util$1.clone)(e))}},e.prototype.subGraphMining=function(e){var t=this;if(!(this.getSupport(e)<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),r=this.dfsCode.buildRmpath(),i=this.dfsCode.dfsEdgeList[r[0]].toNode,o=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,a={},s={};e.forEach((function(e){for(var l=t.graphs[e.graphId],c=l.nodeMap,u=new History(e),h=r.length-1;h>=0;h--){var d=t.findBackwardEdge(l,u.edges[r[h]],u.edges[r[0]],u);if(d){var f="".concat(t.dfsCode.dfsEdgeList[r[h]].fromNode,"-").concat(d.label);s[f]||(s[f]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[r[h]].fromNode,edgeLabel:d.label}),s[f].projected.push({graphId:e.graphId,edge:d,preNode:e})}}if(!(n>=t.maxNodeNum)){t.findForwardPureEdges(l,u.edges[r[0]],o,u).forEach((function(t){var n="".concat(i,"-").concat(t.label,"-").concat(c[t.to].label);a[n]||(a[n]={projected:[],fromNodeId:i,edgeLabel:t.label,nodeLabel2:c[t.to].label}),a[n].projected.push({graphId:e.graphId,edge:t,preNode:e})}));var p=function(n){t.findForwardRmpathEdges(l,u.edges[r[n]],o,u).forEach((function(i){var o="".concat(t.dfsCode.dfsEdgeList[r[n]].fromNode,"-").concat(i.label,"-").concat(c[i.to].label);a[o]||(a[o]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[r[n]].fromNode,edgeLabel:i.label,nodeLabel2:c[i.to].label}),a[o].projected.push({graphId:e.graphId,edge:i,preNode:e})}))};for(h=0;h<r.length;h++)p(h)}})),Object.keys(s).forEach((function(e){var n=s[e],r=n.toNodeId,o=n.edgeLabel;t.dfsCode.dfsEdgeList.push(new DFSedge(i,r,"-1",o,"-1")),t.subGraphMining(s[e].projected),t.dfsCode.dfsEdgeList.pop()})),Object.keys(a).forEach((function(e){var n=a[e],r=n.fromNodeId,o=n.edgeLabel,s=n.nodeLabel2;t.dfsCode.dfsEdgeList.push(new DFSedge(r,i+1,_struct.VACANT_NODE_LABEL,o,s)),t.subGraphMining(a[e].projected),t.dfsCode.dfsEdgeList.pop()}))}},e.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,n=this.minSupport,r=this.frequentSize1Subgraphs,i={},o={},a={};return Object.keys(e).forEach((function(n){var r=e[n],s=r.nodeMap;r.nodes.forEach((function(e,r){var l=e.label,c="".concat(n,"-").concat(l);if(!a[c]){var u=i[l]||0;u++,i[l]=u}a[c]={graphKey:n,label:l},e.edges.forEach((function(e){var n=l,r=s[e.to].label;if(!t&&n>r){var i=r;r=n,n=i}var a=e.label,c="".concat(n,"-").concat(a,"-").concat(r);if(!o[c]){var u=o[c]||0;u++,o[c]=u}}))}))})),Object.keys(i).forEach((function(e){if(!(i[e]<n)){var t={nodes:[],edges:[]};t.nodes.push({id:"0",label:e}),r.push(t)}})),r},e.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs;this.directed;var n={};Object.keys(t).forEach((function(r){var i=t[r],o=i.nodeMap;i.nodes.forEach((function(t){e.findForwardRootEdges(i,t).forEach((function(e){var i=o[e.to],a="".concat(t.label,"-").concat(e.label,"-").concat(i.label);n[a]||(n[a]={projected:[],nodeLabel1:t.label,edgeLabel:e.label,nodeLabel2:i.label});var s={graphId:r,edge:e,preNode:null};n[a].projected.push(s)}))}))})),Object.keys(n).forEach((function(t){var r=n[t],i=r.projected,o=r.nodeLabel1,a=r.edgeLabel,s=r.nodeLabel2;e.dfsCode.dfsEdgeList.push(new DFSedge(0,1,o,a,s)),e.subGraphMining(i),e.dfsCode.dfsEdgeList.pop()}))}},e}(),formatGraphs=function(e,t,n,r){var i={};return Object.keys(e).forEach((function(o,a){var s=e[o],l=new _struct.Graph(a,!0,t),c={};s.nodes.forEach((function(e,t){l.addNode(t,e[n]),c[e.id]=t})),s.edges.forEach((function(e,t){var n=c[e.source],i=c[e.target];l.addEdge(-1,n,i,e[r])})),l&&l.getNodeNum()&&(i[l.id]=l)})),i},toGraphDatas=function(e,t,n){var r=[];return e.forEach((function(e){var i={nodes:[],edges:[]};e.nodes.forEach((function(e){var n;i.nodes.push(((n={id:"".concat(e.id)})[t]=e.label,n))})),e.edges.forEach((function(e){var t;i.edges.push(((t={source:"".concat(e.from),target:"".concat(e.to)})[n]=e.label,t))})),r.push(i)})),r},DEFAULT_LABEL_NAME="cluster",gSpan=function(e){var t=e.graphs,n=e.directed,r=void 0!==n&&n,i=e.nodeLabelProp,o=void 0===i?DEFAULT_LABEL_NAME:i,a=e.edgeLabelProp,s=void 0===a?DEFAULT_LABEL_NAME:a,l=formatGraphs(t,r,o,s),c=e.minSupport,u=e.maxNodeNum,h=e.minNodeNum,d=e.verbose,f=e.top,p=new GSpan({graphs:l,minSupport:c,maxNodeNum:u,minNodeNum:h,top:f,verbose:d,directed:r});return p.run(),toGraphDatas(p.frequentSubgraphs,o,s)},_default$3=gSpan;gSpan$1.default=_default$3,Object.defineProperty(gaddi,"__esModule",{value:!0}),gaddi.default=void 0;var _tslib=require$$0$5,_floydWarshall=_interopRequireDefault$2(floydWarshall$2),_gSpan=_interopRequireDefault$2(gSpan$1),_dijkstra=_interopRequireDefault$2(dijkstra$2),_util=util$3;function _interopRequireDefault$2(e){return e&&e.__esModule?e:{default:e}}var findKNeighborUnits=function(e,t,n,r){void 0===n&&(n="cluster"),void 0===r&&(r=2);var i=[],o=e.nodes;return t.forEach((function(e,t){i.push(findKNeighborUnit(o,e,t,n,r))})),i},findKNeighborUnit=function(e,t,n,r,i){var o=[n],a=[],s={};return t.forEach((function(t,l){if(t<=i&&n!==l){o.push(l),a.push(e[l]);var c=e[l][r];s[c]?(s[c].count++,s[c].dists.push(t)):s[c]={count:1,dists:[t]}}})),Object.keys(s).forEach((function(e){s[e].dists=s[e].dists.sort((function(e,t){return e-t}))})),{nodeIdx:n,nodeId:e[n].id,nodeIdxs:o,neighbors:a,neighborNum:o.length-1,nodeLabelCountMap:s}},findNodePairsRandomly=function(e,t,n,r,i){var o=Math.ceil(n/t),a={},s=0;return r.forEach((function(e,r){for(var l=0,c=0,u=e.nodeIdxs,h=e.neighborNum-1;l<o;){for(var d=u[1+Math.floor(Math.random()*h)],f=0;(a["".concat(r,"-").concat(d)]||a["".concat(d,"-").concat(r)])&&(d=Math.floor(Math.random()*t),!(++f>2*t)););if(f<2*t&&(a["".concat(r,"-").concat(d)]={start:r,end:d,distance:i[r][d]},l++,++s>=n))return a;if(++c>2*t)break}l<o&&(o=(o+(o-l))/(t-r-1))})),a},getIntersectNeighborInducedGraph=function(e,t,n,r){var i=n.nodes;return r||(r={}),Object.keys(e).forEach((function(o){var a,s;if(!r||!r[o]){r[o]={nodes:[],edges:[]};var l=e[o],c=null===(a=t[l.start])||void 0===a?void 0:a.nodeIdxs,u=null===(s=t[l.end])||void 0===s?void 0:s.nodeIdxs;if(c&&u){var h=new Set(u),d=c.filter((function(e){return h.has(e)}));if(d&&d.length){for(var f={},p=d.length,g=0;g<p;g++){var m=i[d[g]];r[o].nodes.push(m),f[m.id]=!0}n.edges.forEach((function(e){f[e.source]&&f[e.target]&&r[o].edges.push(e)}))}}}})),r},getMatchedCount=function(e,t,n,r){var i,o,a={};e.nodes.forEach((function(e){a[e.id]=e}));var s=0;return!(null===(i=null==t?void 0:t.edges)||void 0===i?void 0:i.length)||(null===(o=null==t?void 0:t.nodes)||void 0===o?void 0:o.length)<2?0:(e.edges.forEach((function(e){var i=a[e.source][n],o=a[e.target][n],l=null==t?void 0:t.nodes[0][n],c=null==t?void 0:t.nodes[1][n],u=null==t?void 0:t.edges[0][r];e[r]===u&&(i===l&&o===c||i===c&&o===l)&&s++})),s)},findRepresentStructure=function(e,t,n){for(var r=1/0,i=0,o=function(t){var n=e[t],o=Object.keys(n).sort((function(e,t){return n[e]-n[t]})),a=[];o.forEach((function(e,t){a[t%10]||(a[t%10]={graphs:[],totalCount:0,aveCount:0}),a[t%10].graphs.push(e),a[t%10].totalCount+=n[e]}));var s=0,l=[];a.forEach((function(e){var t=e.totalCount/e.graphs.length;e.aveCount=t,l.push(t);var r=0,i=e.length;e.graphs.forEach((function(t,i){var o=n[t];e.graphs.forEach((function(e,t){i!==t&&(r+=Math.abs(o-n[e]))}))})),s+=r/=i*(i-1)/2})),s/=a.length;var c=0;l.forEach((function(e,t){l.forEach((function(n,r){t!==r&&(c+=Math.abs(e-n))})),c/=l.length*(l.length-1)/2}));var u=c-s;r<u&&(r=u,i=t)},a=0;a<t;a++)o(a);return{structure:n[i],structureCountMap:e[i]}},getNodeMaps=function(e,t){var n={},r={};return e.forEach((function(e,i){n[e.id]={idx:i,node:e,degree:0,inDegree:0,outDegree:0};var o=e[t];r[o]||(r[o]=[]),r[o].push(e)})),{nodeMap:n,nodeLabelMap:r}},getEdgeMaps=function(e,t,n){var r={},i={};return e.forEach((function(e,o){r["".concat(_util.uniqueId)]={idx:o,edge:e};var a=e[t];i[a]||(i[a]=[]),i[a].push(e);var s=n[e.source];s&&(s.degree++,s.outDegree++);var l=n[e.target];l&&(l.degree++,l.inDegree++)})),{edgeMap:r,edgeLabelMap:i}},getSpmMap=function(e,t,n){var r=t.length,i={};return t.forEach((function(t,o){for(var a=n?0:o+1,s=e[o].id,l=a;l<r;l++)if(o!==l){var c=e[l].id,u=t[l];i["".concat(s,"-").concat(c)]=u,n||(i["".concat(c,"-").concat(s)]=u)}})),i},getNDSDist=function(e,t,n,r,i,o,a,s,l,c,u){var h,d="".concat(t.id,"-").concat(n.id);if(c&&c[d])return c[d];var f=u?u[d]:void 0;if(!f){var p=((h={})[d]={start:r[t.id].idx,end:r[n.id].idx,distance:i},h);f=(u=getIntersectNeighborInducedGraph(p,o,e,u))[d]}return getMatchedCount(f,a,s,l)},stashPatternNodeLabelDegreeMap=function(e,t,n,r){var i,o,a,s=null===(i=e[t])||void 0===i?void 0:i.degree,l=null===(o=e[t])||void 0===o?void 0:o.inDegree,c=null===(a=e[t])||void 0===a?void 0:a.outDegree;return void 0===e[t]&&(s=1/0,l=1/0,c=1/0,r[t].forEach((function(e){var t=n[e.id].degree;s>t&&(s=t);var r=n[e.id].inDegree;l>r&&(l=r);var i=n[e.id].outDegree;c>i&&(c=i)})),e[t]={degree:s,inDegree:l,outDegree:c}),{minPatternNodeLabelDegree:s,minPatternNodeLabelInDegree:l,minPatternNodeLabelOutDegree:c}},GADDI=function(e,t,n,r,i,o,a){var s;if(void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),e&&e.nodes){var l=e.nodes.length;if(l){var c=(0,_floydWarshall.default)(e,n),u=(0,_floydWarshall.default)(t,n),h=getSpmMap(e.nodes,c,n),d=getSpmMap(t.nodes,u,n),f=getNodeMaps(e.nodes,o),p=f.nodeMap,g=f.nodeLabelMap,m=getNodeMaps(t.nodes,o),v=m.nodeMap,y=m.nodeLabelMap;getEdgeMaps(e.edges,a,p);var b=getEdgeMaps(t.edges,a,v).edgeLabelMap,x=[];null==u||u.forEach((function(e){x=x.concat(e)})),i||(i=Math.max.apply(Math,(0,_tslib.__spreadArray)((0,_tslib.__spreadArray)([],x,!1),[2],!1))),r||(r=i);var w=findKNeighborUnits(e,c,o,r),_=findKNeighborUnits(t,u,o,r),C=Math.min(100,l*(l-1)/2),$=findNodePairsRandomly(r,l,C,w,c),S=getIntersectNeighborInducedGraph($,w,e),E={graphs:S,nodeLabelProp:o,edgeLabelProp:a,minSupport:1,minNodeNum:1,maxNodeNum:4,directed:n},A=(0,_gSpan.default)(E).slice(0,10),M=A.length,k=[];A.forEach((function(e,t){k[t]={},Object.keys(S).forEach((function(n){var r=S[n],i=getMatchedCount(r,e,o,a);k[t][n]=i}))}));var T=findRepresentStructure(k,M,A),P=T.structure,O=T.structureCountMap,N=t.nodes[0],I=[],D=null===(s=t.nodes[0])||void 0===s?void 0:s[o],L=-1/0;t.nodes.forEach((function(e){var t=e[o],n=g[t];(null==n?void 0:n.length)>L&&(L=n.length,I=n,D=t,N=e)}));var R={},B={},j={},F={},G={},V={};Object.keys(y).forEach((function(r,i){G[r]=[],n&&(V[r]=[]);var s=y[r],l={};s.forEach((function(e){var t=d["".concat(N.id,"-").concat(e.id)];if(t&&G[r].push(t),l["".concat(N.id,"-").concat(e.id)]={start:0,end:v[e.id].idx,distance:t},n){var i=d["".concat(e.id,"-").concat(N.id)];i&&V[r].push(i)}})),G[r]=G[r].sort((function(e,t){return e-t})),n&&(V[r]=V[r].sort((function(e,t){return e-t}))),B=getIntersectNeighborInducedGraph(l,_,t,B);var c=[];if(Object.keys(l).forEach((function(e){if(j[e])c.push(j[e]);else{var t=B[e];j[e]=getMatchedCount(t,P,o,a),c.push(j[e])}})),c=c.sort((function(e,t){return t-e})),F["".concat(N.id,"-").concat(r)]=c,r!==D)for(var u=function(t){var n=I[t],i=w[p[n.id].idx],s=i.nodeLabelCountMap[r],l=y[r].length;if(!s||s.count<l)return I.splice(t,1),"continue";for(var u=!1,d=0;d<l;d++)if(s.dists[d]>G[r][d]){u=!0;break}if(u)return I.splice(t,1),"continue";var f={};i.neighbors.forEach((function(e){var t=h["".concat(n.id,"-").concat(e.id)];f["".concat(n.id,"-").concat(e.id)]={start:p[n.id].idx,end:p[e.id].idx,distance:t}})),S=getIntersectNeighborInducedGraph(f,w,e,S);var g=[];Object.keys(f).forEach((function(e){if(O[e])g.push(O[e]);else{var t=S[e];O[e]=getMatchedCount(t,P,o,a),g.push(O[e])}})),g=g.sort((function(e,t){return t-e}));var m=!1;for(d=0;d<l;d++)if(g[d]<c[d]){m=!0;break}return m?(I.splice(t,1),"continue"):void 0},f=((null==I?void 0:I.length)||0)-1;f>=0;f--)u(f)}));var z=[];null==I||I.forEach((function(r){for(var s=p[r.id].idx,l=findKNeighborUnit(e.nodes,c[s],s,o,i).neighbors,u=!1,d=l.length-1;d>=0;d--){if(l.length+1<t.nodes.length)return void(u=!0);var f=l[d],g=f[o];if(y[g]&&y[g].length)if(G[g]&&G[g].length){var m="".concat(r.id,"-").concat(f.id),b=h[m],x=G[g].length-1;if(b>G[g][x])l.splice(d,1);else{if(n){var _="".concat(f.id,"-").concat(r.id),C=h[_];if(x=V[g].length-1,C>V[g][x]){l.splice(d,1);continue}}var $=O[m]?O[m]:getNDSDist(e,r,f,p,b,w,P,o,a,O,S),E="".concat(N.id,"-").concat(g);if($<F[E][F[E].length-1])l.splice(d,1);else{var A=stashPatternNodeLabelDegreeMap(R,g,v,y),M=A.minPatternNodeLabelDegree;A.minPatternNodeLabelInDegree,A.minPatternNodeLabelOutDegree,p[f.id].degree<M&&l.splice(d,1)}}}else l.splice(d,1);else l.splice(d,1)}u||z.push({nodes:[r].concat(l)})}));var H=(0,_dijkstra.default)(t,N.id,!1).length,U={};n?(Object.keys(H).forEach((function(e){var t=v[e].node[o];U[t]?U[t].push(H[e]):U[t]=[H[e]]})),Object.keys(U).forEach((function(e){U[e].sort((function(e,t){return e-t}))}))):U=G;for(var W=function(r){var i=z[r],s=i.nodes[0],l={},c={};i.nodes.forEach((function(e,t){c[e.id]={idx:t,node:e,degree:0,inDegree:0,outDegree:0};var n=e[o];l[n]?l[n]++:l[n]=1}));var u=[],h={};e.edges.forEach((function(e){c[e.source]&&c[e.target]&&(u.push(e),h[e[a]]?h[e[a]]++:h[e[a]]=1,c[e.source].degree++,c[e.target].degree++,c[e.source].outDegree++,c[e.target].inDegree++)}));for(var d=Object.keys(b).length,f=!1,g=0;g<d;g++){var m=Object.keys(b)[g];if(!h[m]||h[m]<b[m].length){f=!0;break}}if(f)return z.splice(r,1),"continue";var x=u.length;if(x<t.edges.length)return z.splice(r,1),"break";var w=!1,_=function(e){var t=u[e],r=t[a],i=b[r];if(!i||!i.length)return h[r]--,i&&h[r]<i.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue");var s=c[t.source].node[o],l=c[t.target].node[o],d=!1;return i.forEach((function(e){var t=v[e.source].node,r=v[e.target].node;t[o]===s&&r[o]===l&&(d=!0),n||t[o]!==l||r[o]!==s||(d=!0)})),d?void 0:(h[r]--,i&&h[r]<i.length?(w=!0,"break"):(u.splice(e,1),c[t.source].degree--,c[t.target].degree--,c[t.source].outDegree--,c[t.target].inDegree--,"continue"))};for(g=x-1;g>=0;g--){if("break"===_(g))break}if(w)return z.splice(r,1),"continue";i.edges=u;var C=(0,_dijkstra.default)(i,i.nodes[0].id,!1).length;if(Object.keys(C).reverse().forEach((function(e){if(e!==i.nodes[0].id&&!w){if(C[e]===1/0){var t=c[e].node[o];if(l[t]--,l[t]<y[t].length)return void(w=!0);var n=i.nodes.indexOf(c[e].node);return i.nodes.splice(n,1),void(c[e]=void 0)}var r=p[e].node[o];if(!U[r]||!U[r].length||C[e]>U[r][U[r].length-1]){t=c[e].node[o];if(l[t]--,l[t]<y[t].length)return void(w=!0);n=i.nodes.indexOf(c[e].node);i.nodes.splice(n,1),c[e]=void 0}}})),w)return z.splice(r,1),"continue";for(var $=!0,S=0;$&&!w;){if($=!1,n?c[s.id].degree<v[N.id].degree||c[s.id].inDegree<v[N.id].inDegree||c[s.id].outDegree<v[N.id].outDegree:c[s.id].degree<v[N.id].degree){w=!0;break}if(l[s[o]]<y[s[o]].length){w=!0;break}for(var E=i.nodes.length-1;E>=0;E--){var A=i.nodes[E],M=c[A.id].degree,k=c[A.id].inDegree,T=c[A.id].outDegree,P=A[o],O=stashPatternNodeLabelDegreeMap(R,P,v,y),I=O.minPatternNodeLabelDegree,D=O.minPatternNodeLabelInDegree,L=O.minPatternNodeLabelOutDegree;if(n?M<I||k<D||T<L:M<I){if(l[A[o]]--,l[A[o]]<y[A[o]].length){w=!0;break}i.nodes.splice(E,1),c[A.id]=void 0,$=!0}}if(w||!$&&0!==S)break;for(var B=(x=u.length)-1;B>=0;B--){var j=u[B];if(!c[j.source]||!c[j.target]){u.splice(B,1);var F=j[a];if(h[F]--,c[j.source]&&(c[j.source].degree--,c[j.source].outDegree--),c[j.target]&&(c[j.target].degree--,c[j.target].inDegree--),b[F]&&h[F]<b[F].length){w=!0;break}$=!0}}S++}return w||w||i.nodes.length<t.nodes.length||u.length<t.edges.length?(z.splice(r,1),"continue"):void 0},q=z.length-1;q>=0;q--){if("break"===W(q))break}var Y=z.length,X=function(e){var t=z[e],n={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);n[t]?n[t]++:n[t]=1}));for(var r=function(e){var t=z[e],r={};t.edges.forEach((function(e){var t="".concat(e.source,"-").concat(e.target,"-").concat(e.label);r[t]?r[t]++:r[t]=1}));var i=!0;Object.keys(r).length!==Object.keys(n).length?i=!1:Object.keys(n).forEach((function(e){r[e]!==n[e]&&(i=!1)})),i&&z.splice(e,1)},i=Y-1;i>e;i--)r(i);Y=z.length};for(q=0;q<=Y-1;q++)X(q);return z}}},_default$2=GADDI;function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}gaddi.default=_default$2,function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDI",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(e,"breadthFirstSearch",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"connectedComponent",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"depthFirstSearch",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"detectCycle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"dijkstra",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"findAllPath",{enumerable:!0,get:function(){return c.findAllPath}}),Object.defineProperty(e,"findShortestPath",{enumerable:!0,get:function(){return c.findShortestPath}}),Object.defineProperty(e,"floydWarshall",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(e,"getAdjMatrix",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"getDegree",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(e,"getInDegree",{enumerable:!0,get:function(){return o.getInDegree}}),Object.defineProperty(e,"getNeighbors",{enumerable:!0,get:function(){return m.getNeighbors}}),Object.defineProperty(e,"getOutDegree",{enumerable:!0,get:function(){return o.getOutDegree}}),Object.defineProperty(e,"labelPropagation",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(e,"louvain",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(e,"minimumSpanningTree",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(e,"pageRank",{enumerable:!0,get:function(){return p.default}});var n=y(adjacentMatrix),r=y(bfs),i=y(connectedComponent),o=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=v(n);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}i.default=e,r&&r.set(e,i);return i}(degree$1),a=y(detectCycle),s=y(dfs$2),l=y(dijkstra$2),c=findPath$1,u=y(floydWarshall$2),h=y(labelPropagation$1),d=y(louvain$1),f=y(mts),p=y(pageRank$1),g=y(gaddi),m=util$3;function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function y(e){return e&&e.__esModule?e:{default:e}}}(algorithm$1),Object.defineProperty(index_worker,"__esModule",{value:!0}),index_worker.default=void 0;var algorithm=_interopRequireWildcard(algorithm$1),_constant$2=constant$1;function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_getRequireWildcardCache=function(e){return e?n:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof$5(e)&&"function"!=typeof e)return{default:e};var n=_getRequireWildcardCache(t);if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}var ctx="undefined"!=typeof self?self:{};ctx.onmessage=function(e){var t=e.data,n=t._algorithmType,r=t.data;if(n)if("function"!=typeof algorithm[n])ctx.postMessage({_algorithmType:_constant$2.MESSAGE.FAILURE});else{var i=algorithm[n].apply(algorithm,r);ctx.postMessage({_algorithmType:_constant$2.MESSAGE.SUCCESS,data:i})}};var _default$1=null;index_worker.default=_default$1,Object.defineProperty(createWorker$1,"__esModule",{value:!0}),createWorker$1.default=void 0;var _constant$1=constant$1,_index=_interopRequireDefault$1(index_worker);function _interopRequireDefault$1(e){return e&&e.__esModule?e:{default:e}}var createWorker=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new Promise((function(n,r){var i=new _index.default;i.postMessage({_algorithmType:e,data:t}),i.onmessage=function(e){var t=e.data,o=t.data,a=t._algorithmType;_constant$1.MESSAGE.SUCCESS===a?n(o):r(),i.terminate()}}))}},_default=createWorker;createWorker$1.default=_default,Object.defineProperty(workers,"__esModule",{value:!0}),workers.pageRankAsync=workers.minimumSpanningTreeAsync=workers.louvainAsync=workers.labelPropagationAsync=workers.getOutDegreeAsync=workers.getNeighborsAsync=workers.getInDegreeAsync=workers.getDegreeAsync=workers.getAdjMatrixAsync=workers.floydWarshallAsync=workers.findShortestPathAsync=workers.findAllPathAsync=workers.dijkstraAsync=workers.detectCycleAsync=workers.detectAllUndirectedCycleAsync=workers.detectAllDirectedCycleAsync=workers.detectAllCyclesAsync=workers.connectedComponentAsync=workers.GADDIAsync=void 0;var _createWorker=_interopRequireDefault(createWorker$1),_constant=constant$1;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var getAdjMatrixAsync=function(e,t){return(0,_createWorker.default)(_constant.ALGORITHM.getAdjMatrix).apply(void 0,[e,t])};workers.getAdjMatrixAsync=getAdjMatrixAsync;var connectedComponentAsync=function(e,t){return(0,_createWorker.default)(_constant.ALGORITHM.connectedComponent).apply(void 0,[e,t])};workers.connectedComponentAsync=connectedComponentAsync;var getDegreeAsync=function(e){return(0,_createWorker.default)(_constant.ALGORITHM.getDegree)(e)};workers.getDegreeAsync=getDegreeAsync;var getInDegreeAsync=function(e,t){return(0,_createWorker.default)(_constant.ALGORITHM.getInDegree)(e,t)};workers.getInDegreeAsync=getInDegreeAsync;var getOutDegreeAsync=function(e,t){return(0,_createWorker.default)(_constant.ALGORITHM.getOutDegree)(e,t)};workers.getOutDegreeAsync=getOutDegreeAsync;var detectCycleAsync=function(e){return(0,_createWorker.default)(_constant.ALGORITHM.detectCycle)(e)};workers.detectCycleAsync=detectCycleAsync;var detectAllCyclesAsync=function(e){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllCycles)(e)};workers.detectAllCyclesAsync=detectAllCyclesAsync;var detectAllDirectedCycleAsync=function(e){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllDirectedCycle)(e)};workers.detectAllDirectedCycleAsync=detectAllDirectedCycleAsync;var detectAllUndirectedCycleAsync=function(e){return(0,_createWorker.default)(_constant.ALGORITHM.detectAllUndirectedCycle)(e)};workers.detectAllUndirectedCycleAsync=detectAllUndirectedCycleAsync;var dijkstraAsync=function(e,t,n,r){return(0,_createWorker.default)(_constant.ALGORITHM.dijkstra).apply(void 0,[e,t,n,r])};workers.dijkstraAsync=dijkstraAsync;var findAllPathAsync=function(e,t,n,r){return(0,_createWorker.default)(_constant.ALGORITHM.findAllPath).apply(void 0,[e,t,n,r])};workers.findAllPathAsync=findAllPathAsync;var findShortestPathAsync=function(e,t,n,r,i){return(0,_createWorker.default)(_constant.ALGORITHM.findShortestPath).apply(void 0,[e,t,n,r,i])};workers.findShortestPathAsync=findShortestPathAsync;var floydWarshallAsync=function(e,t){return(0,_createWorker.default)(_constant.ALGORITHM.floydWarshall).apply(void 0,[e,t])};workers.floydWarshallAsync=floydWarshallAsync;var labelPropagationAsync=function(e,t,n,r){return void 0===r&&(r=1e3),(0,_createWorker.default)(_constant.ALGORITHM.labelPropagation)(e,t,n,r)};workers.labelPropagationAsync=labelPropagationAsync;var louvainAsync=function(e,t,n,r){return(0,_createWorker.default)(_constant.ALGORITHM.louvain)(e,t,n,r)};workers.louvainAsync=louvainAsync;var minimumSpanningTreeAsync=function(e,t,n){return(0,_createWorker.default)(_constant.ALGORITHM.minimumSpanningTree).apply(void 0,[e,t,n])};workers.minimumSpanningTreeAsync=minimumSpanningTreeAsync;var pageRankAsync=function(e,t,n){return(0,_createWorker.default)(_constant.ALGORITHM.pageRank).apply(void 0,[e,t,n])};workers.pageRankAsync=pageRankAsync;var getNeighborsAsync=function(e,t,n){return(0,_createWorker.default)(_constant.ALGORITHM.getNeighbors).apply(void 0,[e,t,n])};workers.getNeighborsAsync=getNeighborsAsync;var GADDIAsync=function(e,t,n,r,i,o,a){return void 0===n&&(n=!1),void 0===o&&(o="cluster"),void 0===a&&(a="cluster"),(0,_createWorker.default)(_constant.ALGORITHM.GADDI).apply(void 0,[e,t,n,r,i,o,a])};workers.GADDIAsync=GADDIAsync,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"GADDIAsync",{enumerable:!0,get:function(){return t.GADDIAsync}}),Object.defineProperty(e,"connectedComponentAsync",{enumerable:!0,get:function(){return t.connectedComponentAsync}}),e.default=void 0,Object.defineProperty(e,"detectAllCyclesAsync",{enumerable:!0,get:function(){return t.detectAllCyclesAsync}}),Object.defineProperty(e,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return t.detectAllDirectedCycleAsync}}),Object.defineProperty(e,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return t.detectAllUndirectedCycleAsync}}),Object.defineProperty(e,"detectCycleAsync",{enumerable:!0,get:function(){return t.detectCycleAsync}}),e.detectDirectedCycleAsync=void 0,Object.defineProperty(e,"dijkstraAsync",{enumerable:!0,get:function(){return t.dijkstraAsync}}),Object.defineProperty(e,"findAllPathAsync",{enumerable:!0,get:function(){return t.findAllPathAsync}}),Object.defineProperty(e,"findShortestPathAsync",{enumerable:!0,get:function(){return t.findShortestPathAsync}}),Object.defineProperty(e,"floydWarshallAsync",{enumerable:!0,get:function(){return t.floydWarshallAsync}}),Object.defineProperty(e,"getAdjMatrixAsync",{enumerable:!0,get:function(){return t.getAdjMatrixAsync}}),Object.defineProperty(e,"getDegreeAsync",{enumerable:!0,get:function(){return t.getDegreeAsync}}),Object.defineProperty(e,"getInDegreeAsync",{enumerable:!0,get:function(){return t.getInDegreeAsync}}),Object.defineProperty(e,"getNeighborsAsync",{enumerable:!0,get:function(){return t.getNeighborsAsync}}),Object.defineProperty(e,"getOutDegreeAsync",{enumerable:!0,get:function(){return t.getOutDegreeAsync}}),Object.defineProperty(e,"labelPropagationAsync",{enumerable:!0,get:function(){return t.labelPropagationAsync}}),Object.defineProperty(e,"louvainAsync",{enumerable:!0,get:function(){return t.louvainAsync}}),Object.defineProperty(e,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return t.minimumSpanningTreeAsync}}),Object.defineProperty(e,"pageRankAsync",{enumerable:!0,get:function(){return t.pageRankAsync}});var t=workers,n=t.detectCycleAsync;e.detectDirectedCycleAsync=n;var r={getAdjMatrixAsync:t.getAdjMatrixAsync,connectedComponentAsync:t.connectedComponentAsync,getDegreeAsync:t.getDegreeAsync,getInDegreeAsync:t.getInDegreeAsync,getOutDegreeAsync:t.getOutDegreeAsync,detectCycleAsync:t.detectCycleAsync,detectDirectedCycleAsync:n,detectAllCyclesAsync:t.detectAllCyclesAsync,detectAllDirectedCycleAsync:t.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:t.detectAllUndirectedCycleAsync,dijkstraAsync:t.dijkstraAsync,findAllPathAsync:t.findAllPathAsync,findShortestPathAsync:t.findShortestPathAsync,floydWarshallAsync:t.floydWarshallAsync,labelPropagationAsync:t.labelPropagationAsync,louvainAsync:t.louvainAsync,minimumSpanningTreeAsync:t.minimumSpanningTreeAsync,pageRankAsync:t.pageRankAsync,getNeighborsAsync:t.getNeighborsAsync,GADDIAsync:t.GADDIAsync};e.default=r}(asyncIndex$1);const asyncIndex=getDefaultExportFromCjs(asyncIndex$1),AlgorithmAsync=_mergeNamespaces({__proto__:null,default:asyncIndex},[asyncIndex$1]);function getPixelRatio(){return window?window.devicePixelRatio:1}function distance$2(e,t,n,r){var i=e-n,o=t-r;return Math.sqrt(i*i+o*o)}function inBox(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}function intersectRect(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)}function mergeRegion(e,t){return e&&t?{minX:Math.min(e.minX,t.minX),minY:Math.min(e.minY,t.minY),maxX:Math.max(e.maxX,t.maxX),maxY:Math.max(e.maxY,t.maxY)}:e||t}function isSamePoint(e,t){return e[0]===t[0]&&e[1]===t[1]}var regexLG$1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG$1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexPR$1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,regexColorStop$1=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function addStop$1(e,t){each(e.match(regexColorStop$1),(function(e){var n=e.split(":");t.addColorStop(n[0],n[1])}))}function parseLineGradient$1(e,t,n){var r,i,o=regexLG$1.exec(n),a=parseFloat(o[1])%360*(Math.PI/180),s=o[2],l=t.getBBox();a>=0&&a<.5*Math.PI?(r={x:l.minX,y:l.minY},i={x:l.maxX,y:l.maxY}):.5*Math.PI<=a&&a<Math.PI?(r={x:l.maxX,y:l.minY},i={x:l.minX,y:l.maxY}):Math.PI<=a&&a<1.5*Math.PI?(r={x:l.maxX,y:l.maxY},i={x:l.minX,y:l.minY}):(r={x:l.minX,y:l.maxY},i={x:l.maxX,y:l.minY});var c=Math.tan(a),u=c*c,h=(i.x-r.x+c*(i.y-r.y))/(u+1)+r.x,d=c*(i.x-r.x+c*(i.y-r.y))/(u+1)+r.y,f=e.createLinearGradient(r.x,r.y,h,d);return addStop$1(s,f),f}function parseRadialGradient$1(e,t,n){var r=regexRG$1.exec(n),i=parseFloat(r[1]),o=parseFloat(r[2]),a=parseFloat(r[3]),s=r[4];if(0===a){var l=s.match(regexColorStop$1);return l[l.length-1].split(":")[1]}var c=t.getBBox(),u=c.maxX-c.minX,h=c.maxY-c.minY,d=Math.sqrt(u*u+h*h)/2,f=e.createRadialGradient(c.minX+u*i,c.minY+h*o,0,c.minX+u/2,c.minY+h/2,a*d);return addStop$1(s,f),f}function parsePattern(e,t,n){if(t.get("patternSource")&&t.get("patternSource")===n)return t.get("pattern");var r,i,o=regexPR$1.exec(n),a=o[1],s=o[2];function l(){r=e.createPattern(i,a),t.set("pattern",r),t.set("patternSource",n)}switch(a){case"a":a="repeat";break;case"x":a="repeat-x";break;case"y":a="repeat-y";break;default:a="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?l():(i.onload=l,i.src=i.src),r}function parseStyle(e,t,n){var r=t.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return n;if(isString$1(n)){if("("===n[1]||"("===n[2]){if("l"===n[0])return parseLineGradient$1(e,t,n);if("r"===n[0])return parseRadialGradient$1(e,t,n);if("p"===n[0])return parsePattern(e,t,n)}return n}return n instanceof CanvasPattern?n:void 0}function parseRadius$1(e){var t=0,n=0,r=0,i=0;return isArray$1(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,[t,n,r,i]}function vMag(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function vRatio(e,t){return vMag(e)*vMag(t)?(e[0]*t[0]+e[1]*t[1])/(vMag(e)*vMag(t)):1}function vAngle(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(vRatio(e,t))}function getArcParams(e,t){var n=t[1],r=t[2],i=mod$1(toRadian$1(t[3]),2*Math.PI),o=t[4],a=t[5],s=e[0],l=e[1],c=t[6],u=t[7],h=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,f=h*h/(n*n)+d*d/(r*r);f>1&&(n*=Math.sqrt(f),r*=Math.sqrt(f));var p=n*n*(d*d)+r*r*(h*h),g=p?Math.sqrt((n*n*(r*r)-p)/p):1;o===a&&(g*=-1),isNaN(g)&&(g=0);var m=r?g*n*d/r:0,v=n?g*-r*h/n:0,y=(s+c)/2+Math.cos(i)*m-Math.sin(i)*v,b=(l+u)/2+Math.sin(i)*m+Math.cos(i)*v,x=[(h-m)/n,(d-v)/r],w=[(-1*h-m)/n,(-1*d-v)/r],_=vAngle([1,0],x),C=vAngle(x,w);return vRatio(x,w)<=-1&&(C=Math.PI),vRatio(x,w)>=1&&(C=0),0===a&&C>0&&(C-=2*Math.PI),1===a&&C<0&&(C+=2*Math.PI),{cx:y,cy:b,rx:isSamePoint(e,[c,u])?0:n,ry:isSamePoint(e,[c,u])?0:r,startAngle:_,endAngle:_+C,xRotation:i,arcFlag:o,sweepFlag:a}}var sin=Math.sin,cos=Math.cos,atan2=Math.atan2,PI=Math.PI;function _addDefaultArrow(e,t,n,r,i,o,a){var s=t.stroke,l=t.lineWidth,c=atan2(r-o,n-i),u=new Path$3({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*cos(PI/6)+","+10*sin(PI/6)+" L0,0 L"+10*cos(PI/6)+",-"+10*sin(PI/6),stroke:s,lineWidth:l}});u.translate(i,o),u.rotateAtPoint(i,o,c),e.set(a?"startArrowShape":"endArrowShape",u)}function _addCustomizedArrow(e,t,n,r,i,o,a){var s=t.startArrow,l=t.endArrow,c=t.stroke,u=t.lineWidth,h=a?s:l,d=h.d,f=h.fill,p=h.stroke,g=h.lineWidth,m=__rest$2(h,["d","fill","stroke","lineWidth"]),v=atan2(r-o,n-i);d&&(i-=cos(v)*d,o-=sin(v)*d);var y=new Path$3({type:"path",canvas:e.get("canvas"),isArrowShape:!0,attrs:__assign$h(__assign$h({},m),{stroke:p||c,lineWidth:g||u,fill:f})});y.translate(i,o),y.rotateAtPoint(i,o,v),e.set(a?"startArrowShape":"endArrowShape",y)}function getShortenOffset(e,t,n,r,i){var o=atan2(r-t,n-e);return{dx:cos(o)*i,dy:sin(o)*i}}function addStartArrow(e,t,n,r,i,o){"object"==typeof t.startArrow?_addCustomizedArrow(e,t,n,r,i,o,!0):t.startArrow?_addDefaultArrow(e,t,n,r,i,o,!0):e.set("startArrowShape",null)}function addEndArrow(e,t,n,r,i,o){"object"==typeof t.endArrow?_addCustomizedArrow(e,t,n,r,i,o,!1):t.endArrow?_addDefaultArrow(e,t,n,r,i,o,!1):e.set("startArrowShape",null)}var SHAPE_ATTRS_MAP={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function applyAttrsToContext(e,t){var n=t.attr();for(var r in n){var i=n[r],o=SHAPE_ATTRS_MAP[r]?SHAPE_ATTRS_MAP[r]:r;"matrix"===o&&i?e.transform(i[0],i[1],i[3],i[4],i[6],i[7]):"lineDash"===o&&e.setLineDash?isArray$1(i)&&e.setLineDash(i):("strokeStyle"===o||"fillStyle"===o?i=parseStyle(e,t,i):"globalAlpha"===o&&(i*=e.globalAlpha),e[o]=i)}}function drawChildren$1(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];i.cfg.visible?i.draw(e,n):i.skipDraw()}}function checkRefresh(e,t,n){var r=e.get("refreshElements");each(r,(function(t){if(t!==e)for(var n=t.cfg.parent;n&&n!==e&&!n.cfg.refresh;)n.cfg.refresh=!0,n=n.cfg.parent})),r[0]===e?setChildrenRefresh(t):checkChildrenRefresh(t,n)}function checkChildrenRefresh(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&setChildrenRefresh(r.cfg.children);else if(r.cfg.refresh)r.isGroup()&&checkChildrenRefresh(r.cfg.children,t);else{var i=checkElementRefresh(r,t);r.cfg.refresh=i,i&&r.isGroup()&&checkChildrenRefresh(r.cfg.children,t)}}}function clearChanged(e){for(var t=0;t<e.length;t++){var n=e[t];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&clearChanged(n.cfg.children)}}function setChildrenRefresh(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.cfg.refresh=!0,r.isGroup()&&setChildrenRefresh(r.get("children"))}}function checkElementRefresh(e,t){var n=e.cfg.cacheCanvasBBox;return e.cfg.isInView&&n&&intersectRect(n,t)}function drawPath(e,t,n,r){var i=n.path,o=n.startArrow,a=n.endArrow;if(i){var s=[0,0],l=[0,0],c={dx:0,dy:0};t.beginPath();for(var u=0;u<i.length;u++){var h=i[u],d=h[0];if(0===u&&o&&o.d)c=getShortenOffset((f=e.getStartTangent())[0][0],f[0][1],f[1][0],f[1][1],o.d);else if(u===i.length-2&&"Z"===i[u+1][0]&&a&&a.d){if("Z"===i[u+1][0])c=getShortenOffset((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}else if(u===i.length-1&&a&&a.d){var f;if("Z"!==i[0])c=getShortenOffset((f=e.getEndTangent())[0][0],f[0][1],f[1][0],f[1][1],a.d)}var p=c.dx,g=c.dy;switch(d){case"M":t.moveTo(h[1]-p,h[2]-g),l=[h[1],h[2]];break;case"L":t.lineTo(h[1]-p,h[2]-g);break;case"Q":t.quadraticCurveTo(h[1],h[2],h[3]-p,h[4]-g);break;case"C":t.bezierCurveTo(h[1],h[2],h[3],h[4],h[5]-p,h[6]-g);break;case"A":var m=void 0;r?(m=r[u])||(m=getArcParams(s,h),r[u]=m):m=getArcParams(s,h);var v=m.cx,y=m.cy,b=m.rx,x=m.ry,w=m.startAngle,_=m.endAngle,C=m.xRotation,$=m.sweepFlag;if(t.ellipse)t.ellipse(v,y,b,x,C,w,_,1-$);else{var S=b>x?b:x,E=b>x?1:b/x,A=b>x?x/b:1;t.translate(v,y),t.rotate(C),t.scale(E,A),t.arc(0,0,S,w,_,1-$),t.scale(1/E,1/A),t.rotate(-C),t.translate(-v,-y)}break;case"Z":t.closePath()}if("Z"===d)s=l;else{var M=h.length;s=[h[M-2],h[M-1]]}}}}function refreshElement$1(e,t){var n=e.get("canvas");n&&("remove"===t&&(e._cacheCanvasBBox=e.get("cacheCanvasBBox")),e.get("hasChanged")||(e.set("hasChanged",!0),e.cfg.parent&&e.cfg.parent.get("hasChanged")||(n.refreshElement(e,t,n),n.get("autoDraw")&&n.draw())))}function getRefreshRegion(e){var t;if(e.destroyed)t=e._cacheCanvasBBox;else{var n=e.get("cacheCanvasBBox"),r=n&&!(!n.width||!n.height),i=e.getCanvasBBox(),o=i&&!(!i.width||!i.height);r&&o?t=mergeRegion(n,i):r?t=n:o&&(t=i)}return t}function getMergedRegion(e){if(!e.length)return null;var t=[],n=[],r=[],i=[];return each(e,(function(e){var o=getRefreshRegion(e);o&&(t.push(o.minX),n.push(o.minY),r.push(o.maxX),i.push(o.maxY))})),{minX:min$5(t),minY:min$5(n),maxX:max$6(r),maxY:max$6(i)}}function mergeView(e,t){return e&&t&&intersectRect(e,t)?{minX:Math.max(e.minX,t.minX),minY:Math.max(e.minY,t.minY),maxX:Math.min(e.maxX,t.maxX),maxY:Math.min(e.maxY,t.maxY)}:null}var Group$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.onCanvasChange=function(e){refreshElement$1(this,e)},t.prototype.getShapeBase=function(){return Shape$1},t.prototype.getGroupBase=function(){return t},t.prototype._applyClip=function(e,t){t&&(e.save(),applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.cacheCanvasBBox=function(){var e=this.cfg.children,t=[],n=[];each(e,(function(e){var r=e.cfg.cacheCanvasBBox;r&&e.cfg.isInView&&(t.push(r.minX,r.maxX),n.push(r.minY,r.maxY))}));var r=null;if(t.length){var i=min$5(t),o=max$6(t),a=min$5(n),s=max$6(n);r={minX:i,minY:a,x:i,y:a,maxX:o,maxY:s,width:o-i,height:s-a};var l=this.cfg.canvas;if(l){var c=l.getViewRange();this.set("isInView",intersectRect(r,c))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",r)},t.prototype.draw=function(e,t){var n=this.cfg.children,r=!t||this.cfg.refresh;n.length&&r&&(e.save(),applyAttrsToContext(e,this),this._applyClip(e,this.getClip()),drawChildren$1(e,n,t),e.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},t}(AbstractGroup),ShapeBase$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.getShapeBase=function(){return Shape$1},t.prototype.getGroupBase=function(){return Group$1},t.prototype.onCanvasChange=function(e){refreshElement$1(this,e)},t.prototype.calculateBBox=function(){var e=this.get("type"),t=this.getHitLineWidth(),n=getMethod(e)(this),r=t/2,i=n.x-r,o=n.y-r,a=n.x+n.width+r,s=n.y+n.height+r;return{x:i,minX:i,y:o,minY:o,width:n.width+t,height:n.height+t,maxX:a,maxY:s}},t.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},t.prototype.isStroke=function(){return!!this.attrs.stroke},t.prototype._applyClip=function(e,t){t&&(e.save(),applyAttrsToContext(e,t),t.createPath(e),e.restore(),e.clip(),t._afterDraw())},t.prototype.draw=function(e,t){var n=this.cfg.clipShape;if(t){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);if(!intersectRect(t,this.getCanvasBBox()))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}e.save(),applyAttrsToContext(e,this),this._applyClip(e,n),this.drawPath(e),e.restore(),this._afterDraw()},t.prototype.getCanvasViewBox=function(){var e=this.cfg.canvas;return e?e.getViewRange():null},t.prototype.cacheCanvasBBox=function(){var e=this.getCanvasViewBox();if(e){var t=this.getCanvasBBox(),n=intersectRect(t,e);this.set("isInView",n),n?this.set("cacheCanvasBBox",t):this.set("cacheCanvasBBox",null)}},t.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},t.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},t.prototype.drawPath=function(e){this.createPath(e),this.strokeAndFill(e),this.afterDrawPath(e)},t.prototype.fill=function(e){e.fill()},t.prototype.stroke=function(e){e.stroke()},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isFill()&&(isNil(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.isStroke()&&n>0&&(isNil(i)||1===i||(e.globalAlpha=i),this.stroke(e)),this.afterDrawPath(e)},t.prototype.createPath=function(e){},t.prototype.afterDrawPath=function(e){},t.prototype.isInShape=function(e,t){var n=this.isStroke(),r=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!1},t.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var e=this.attrs;return e.lineWidth+e.lineAppendWidth},t}(AbstractShape);const ShapeBase$3=ShapeBase$2;var Circle$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,r:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.r,c=i/2,u=distance$2(a,s,e,t);return r&&n?u<=l+c:r?u<=l:!!n&&(u>=l-c&&u<=l+c)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.r;e.beginPath(),e.arc(n,r,i,0,2*Math.PI,!1),e.closePath()},t}(ShapeBase$3);const Circle$3=Circle$2;function ellipseDistance(e,t,n,r){return e/(n*n)+t/(r*r)}var Ellipse$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=i/2,s=o.x,l=o.y,c=o.rx,u=o.ry,h=(e-s)*(e-s),d=(t-l)*(t-l);return r&&n?ellipseDistance(h,d,c+a,u+a)<=1:r?ellipseDistance(h,d,c,u)<=1:!!n&&(ellipseDistance(h,d,c-a,u-a)>=1&&ellipseDistance(h,d,c+a,u+a)<=1)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.rx,o=t.ry;if(e.beginPath(),e.ellipse)e.ellipse(n,r,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,l=i>o?o/i:1;e.save(),e.translate(n,r),e.scale(s,l),e.arc(0,0,a,0,2*Math.PI),e.restore(),e.closePath()}},t}(ShapeBase$3);const Ellipse$3=Ellipse$2;function isCanvas(e){return e instanceof HTMLElement&&isString$1(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase()}var ImageShape=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,width:0,height:0})},t.prototype.initAttrs=function(e){this._setImage(e.img)},t.prototype.isStroke=function(){return!1},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var e=this.get("canvas");e?e.draw():this.createPath(this.get("context"))}},t.prototype._setImage=function(e){var t=this,n=this.attrs;if(isString$1(e)){var r=new Image;r.onload=function(){if(t.destroyed)return!1;t.attr("img",r),t.set("loading",!1),t._afterLoading();var e=t.get("callback");e&&e.call(t)},r.crossOrigin="Anonymous",r.src=e,this.set("loading",!0)}else e instanceof Image?(n.width||(n.width=e.width),n.height||(n.height=e.height)):isCanvas(e)&&(n.width||(n.width=Number(e.getAttribute("width"))),n.height||(n.height,Number(e.getAttribute("height"))))},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"img"===t&&this._setImage(n)},t.prototype.createPath=function(e){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",e);var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.sx,s=t.sy,l=t.swidth,c=t.sheight,u=t.img;(u instanceof Image||isCanvas(u))&&(isNil(a)||isNil(s)||isNil(l)||isNil(c)?e.drawImage(u,n,r,i,o):e.drawImage(u,a,s,l,c,n,r,i,o))},t}(ShapeBase$3);const ImageShape$1=ImageShape;function inLine(e,t,n,r,i,o,a){var s=Math.min(e,n),l=Math.max(e,n),c=Math.min(t,r),u=Math.max(t,r),h=i/2;return o>=s-h&&o<=l+h&&a>=c-h&&a<=u+h&&LineUtil.pointToLine(e,t,n,r,o,a)<=i/2}var Line$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow()},t.prototype.setArrow=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2,o=e.startArrow,a=e.endArrow;o&&addStartArrow(this,e,r,i,t,n),a&&addEndArrow(this,e,t,n,r,i)},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){if(!n||!i)return!1;var o=this.attr();return inLine(o.x1,o.y1,o.x2,o.y2,i,e,t)},t.prototype.createPath=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2,a=t.startArrow,s=t.endArrow,l={dx:0,dy:0},c={dx:0,dy:0};a&&a.d&&(l=getShortenOffset(n,r,i,o,t.startArrow.d)),s&&s.d&&(c=getShortenOffset(n,r,i,o,t.endArrow.d)),e.beginPath(),e.moveTo(n+l.dx,r+l.dy),e.lineTo(i-c.dx,o-c.dy)},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return LineUtil.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return LineUtil.pointAt(n,r,i,o,e)},t}(ShapeBase$3);const Line$3=Line$2;var Symbols$1={circle:function(e,t,n){return[["M",e-n,t],["A",n,n,0,1,0,e+n,t],["A",n,n,0,1,0,e-n,t]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["Z"]]},"triangle-down":function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}},Marker$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.initAttrs=function(e){this._resetParamsCache()},t.prototype._resetParamsCache=function(){this.set("paramsCache",{})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["symbol","x","y","r","radius"].indexOf(t)&&this._resetParamsCache()},t.prototype.isOnlyHitBox=function(){return!0},t.prototype._getR=function(e){return isNil(e.r)?e.radius:e.r},t.prototype._getPath=function(){var e,n,r=this.attr(),i=r.x,o=r.y,a=r.symbol||"circle",s=this._getR(r);if(isFunction$1(a))n=pathToAbsolute(n=(e=a)(i,o,s));else{if(!(e=t.Symbols[a]))return null;n=e(i,o,s)}return n},t.prototype.createPath=function(e){drawPath(this,e,{path:this._getPath()},this.get("paramsCache"))},t.Symbols=Symbols$1,t}(ShapeBase$3);const Marker$3=Marker$2;function isPointInPath(e,t,n){var r=getOffScreenContext();return e.createPath(r),r.isPointInPath(t,n)}var tolerance=1e-6;function dcmp(e){return Math.abs(e)<tolerance?0:e<0?-1:1}function onSegment(e,t,n){return(n[0]-e[0])*(t[1]-e[1])==(t[0]-e[0])*(n[1]-e[1])&&Math.min(e[0],t[0])<=n[0]&&n[0]<=Math.max(e[0],t[0])&&Math.min(e[1],t[1])<=n[1]&&n[1]<=Math.max(e[1],t[1])}function isInPolygon(e,t,n){var r=!1,i=e.length;if(i<=2)return!1;for(var o=0;o<i;o++){var a=e[o],s=e[(o+1)%i];if(onSegment(a,s,[t,n]))return!0;dcmp(a[1]-n)>0!=dcmp(s[1]-n)>0&&dcmp(t-(n-a[1])*(a[0]-s[0])/(a[1]-s[1])-a[0])<0&&(r=!r)}return r}function arc(e,t,n,r,i,o,a,s){var l=(Math.atan2(s-t,a-e)+2*Math.PI)%(2*Math.PI);if(l<r||l>i)return!1;var c={x:e+n*Math.cos(l),y:t+n*Math.sin(l)};return distance$2(c.x,c.y,a,s)<=o/2}var transform$6=transform$d;function hasArc(e){for(var t=!1,n=e.length,r=0;r<n;r++){var i=e[r][0];if("C"===i||"A"===i||"Q"===i){t=!0;break}}return t}function isPointInStroke(e,t,n,r,i){for(var o=!1,a=t/2,s=0;s<e.length;s++){var l=e[s],c=l.currentPoint,u=l.params,h=l.prePoint,d=l.box;if(!d||inBox(d.x-a,d.y-a,d.width+t,d.height+t,n,r)){switch(l.command){case"L":case"Z":o=inLine(h[0],h[1],c[0],c[1],t,n,r);break;case"Q":o=QuadUtil.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],n,r)<=t/2;break;case"C":o=CubicUtil.pointDistance(h[0],h[1],u[1],u[2],u[3],u[4],u[5],u[6],n,r,i)<=t/2;break;case"A":var f=l.arcParams,p=f.cx,g=f.cy,m=f.rx,v=f.ry,y=f.startAngle,b=f.endAngle,x=f.xRotation,w=[n,r,1],_=m>v?m:v;transformMat3$1(w,w,transform$6(null,[["t",-p,-g],["r",-x],["s",1/(m>v?1:m/v),1/(m>v?v/m:1)]])),o=arc(0,0,_,y,b,t,w[0],w[1])}if(o)break}}return o}function extractPolygons(e){for(var t=e.length,n=[],r=[],i=[],o=0;o<t;o++){var a=e[o],s=a[0];"M"===s?(i.length&&(r.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(n.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&r.push(i),{polygons:n,polylines:r}}const PathUtil=__assign$h({hasArc:hasArc,extractPolygons:extractPolygons,isPointInStroke:isPointInStroke},PathUtil$2);function isInPolygons(e,t,n){for(var r=!1,i=0;i<e.length;i++){if(r=isInPolygon(e[i],t,n))break}return r}var Path$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this._setPathArr(e.path),this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),"path"===t&&this._setPathArr(n),this.setArrow()},t.prototype._setPathArr=function(e){this.attrs.path=pathToAbsolute(e);var t=PathUtil.hasArc(e);this.set("hasArc",t),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},t.prototype.getSegments=function(){var e=this.get("segements");return e||(e=getSegments(this.attr("path")),this.set("segments",e)),e},t.prototype.setArrow=function(){var e,t=this.attr(),n=t.startArrow,r=t.endArrow;n&&addStartArrow(this,t,(e=this.getStartTangent())[0][0],e[0][1],e[1][0],e[1][1]);r&&addEndArrow(this,t,(e=this.getEndTangent())[0][0],e[0][1],e[1][0],e[1][1])},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(n){var l=this.getTotalLength();s=PathUtil.isPointInStroke(o,i,e,t,l)}if(!s&&r)if(a)s=isPointInPath(this,e,t);else{var c=this.attr("path"),u=PathUtil.extractPolygons(c);s=isInPolygons(u.polygons,e,t)||isInPolygons(u.polylines,e,t)}return s},t.prototype.createPath=function(e){drawPath(this,e,this.attr(),this.get("paramsCache"))},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.get("totalLength");return isNil(e)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):e},t.prototype.getPoint=function(e){var t,n,r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var i=this.get("curve");if(!r||0===r.length)return i?{x:i[0][1],y:i[0][2]}:null;each(r,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)}));var o=i[n];if(isNil(o)||isNil(n))return null;var a=o.length,s=i[n+1];return CubicUtil.pointAt(o[a-2],o[a-1],s[1],s[2],s[3],s[4],s[5],s[6],t)},t.prototype._calculateCurve=function(){var e=this.attr().path;this.set("curve",PathUtil.pathToCurve(e))},t.prototype._setTcache=function(){var e,t,n,r,i=0,o=0,a=[],s=this.get("curve");s&&(each(s,(function(e,t){n=s[t+1],r=e.length,n&&(i+=CubicUtil.length(e[r-2],e[r-1],n[1],n[2],n[3],n[4],n[5],n[6])||0)})),this.set("totalLength",i),0!==i?(each(s,(function(l,c){n=s[c+1],r=l.length,n&&((e=[])[0]=o/i,t=CubicUtil.length(l[r-2],l[r-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=t||0,e[1]=o/i,a.push(e))})),this.set("tCache",a)):this.set("tCache",[]))},t.prototype.getStartTangent=function(){var e,t=this.getSegments();if(t.length>1){var n=t[0].currentPoint,r=t[1].currentPoint,i=t[1].startTangent;e=[],i?(e.push([n[0]-i[0],n[1]-i[1]]),e.push([n[0],n[1]])):(e.push([r[0],r[1]]),e.push([n[0],n[1]]))}return e},t.prototype.getEndTangent=function(){var e,t=this.getSegments(),n=t.length;if(n>1){var r=t[n-2].currentPoint,i=t[n-1].currentPoint,o=t[n-1].endTangent;e=[],o?(e.push([i[0]-o[0],i[1]-o[1]]),e.push([i[0],i[1]])):(e.push([r[0],r[1]]),e.push([i[0],i[1]]))}return e},t}(ShapeBase$3);const Path$3=Path$2;function inPolyline(e,t,n,r,i){var o=e.length;if(o<2)return!1;for(var a=0;a<o-1;a++){if(inLine(e[a][0],e[a][1],e[a+1][0],e[a+1][1],t,n,r))return!0}if(i){var s=e[0],l=e[o-1];if(inLine(s[0],s[1],l[0],l[1],t,n,r))return!0}return!1}var Polygon$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr().points,a=!1;return n&&(a=inPolyline(o,i,e,t,!0)),!a&&r&&(a=isInPolygon(o,e,t)),a},t.prototype.createPath=function(e){var t=this.attr().points;if(!(t.length<2)){e.beginPath();for(var n=0;n<t.length;n++){var r=t[n];0===n?e.moveTo(r[0],r[1]):e.lineTo(r[0],r[1])}e.closePath()}},t}(ShapeBase$3);const Polygon$3=Polygon$2;var PolyLine=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{startArrow:!1,endArrow:!1})},t.prototype.initAttrs=function(e){this.setArrow()},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),this.setArrow(),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.setArrow=function(){var e=this.attr(),t=this.attrs,n=t.points,r=t.startArrow,i=t.endArrow,o=n.length,a=n[0][0],s=n[0][1],l=n[o-1][0],c=n[o-1][1];r&&addStartArrow(this,e,n[1][0],n[1][1],a,s),i&&addEndArrow(this,e,n[o-2][0],n[o-2][1],l,c)},t.prototype.isFill=function(){return!1},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){return!(!n||!i)&&inPolyline(this.attr().points,i,e,t,!1)},t.prototype.isStroke=function(){return!0},t.prototype.createPath=function(e){var t=this.attr(),n=t.points,r=t.startArrow,i=t.endArrow,o=n.length;if(!(n.length<2)){var a,s=n[0][0],l=n[0][1],c=n[o-1][0],u=n[o-1][1];if(r&&r.d)s+=(a=getShortenOffset(s,l,n[1][0],n[1][1],r.d)).dx,l+=a.dy;if(i&&i.d)c-=(a=getShortenOffset(n[o-2][0],n[o-2][1],c,u,i.d)).dx,u-=a.dy;e.beginPath(),e.moveTo(s,l);for(var h=0;h<o-1;h++){var d=n[h];e.lineTo(d[0],d[1])}e.lineTo(c,u)}},t.prototype.afterDrawPath=function(e){var t=this.get("startArrowShape"),n=this.get("endArrowShape");t&&t.draw(e),n&&n.draw(e)},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return isNil(t)?(this.set("totalLength",PolylineUtil.length(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),each(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),LineUtil.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];each(e,(function(a,s){e[s+1]&&((n=[])[0]=i/t,r=LineUtil.length(a[0],a[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(ShapeBase$3);const PolyLine$1=PolyLine;function inRect(e,t,n,r,i,o,a){var s=i/2;return inBox(e-s,t-s,n,i,o,a)||inBox(e+n-s,t-s,i,r,o,a)||inBox(e+s,t+r-s,n,i,o,a)||inBox(e-s,t+s,i,r,o,a)}function rectWithRadius(e,t,n,r,i,o,a,s){return inLine(e+i,t,e+n-i,t,o,a,s)||inLine(e+n,t+i,e+n,t+r-i,o,a,s)||inLine(e+n-i,t+r,e+i,t+r,o,a,s)||inLine(e,t+r-i,e,t+i,o,a,s)||arc(e+n-i,t+i,i,1.5*Math.PI,2*Math.PI,o,a,s)||arc(e+n-i,t+r-i,i,0,.5*Math.PI,o,a,s)||arc(e+i,t+r-i,i,.5*Math.PI,Math.PI,o,a,s)||arc(e+i,t+i,i,Math.PI,1.5*Math.PI,o,a,s)}var Rect$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.isInStrokeOrPath=function(e,t,n,r,i){var o=this.attr(),a=o.x,s=o.y,l=o.width,c=o.height,u=o.radius;if(u){var h=!1;return n&&(h=rectWithRadius(a,s,l,c,u,i,e,t)),!h&&r&&(h=isPointInPath(this,e,t)),h}var d=i/2;return r&&n?inBox(a-d,s-d,l+d,c+d,e,t):r?inBox(a,s,l,c,e,t):n?inRect(a,s,l,c,i,e,t):void 0},t.prototype.createPath=function(e){var t=this.attr(),n=t.x,r=t.y,i=t.width,o=t.height,a=t.radius;if(e.beginPath(),0===a)e.rect(n,r,i,o);else{var s=parseRadius$1(a),l=s[0],c=s[1],u=s[2],h=s[3];e.moveTo(n+l,r),e.lineTo(n+i-c,r),0!==c&&e.arc(n+i-c,r+c,c,-Math.PI/2,0),e.lineTo(n+i,r+o-u),0!==u&&e.arc(n+i-u,r+o-u,u,0,Math.PI/2),e.lineTo(n+h,r+o),0!==h&&e.arc(n+h,r+o-h,h,Math.PI/2,Math.PI),e.lineTo(n,r+l),0!==l&&e.arc(n+l,r+l,l,Math.PI,1.5*Math.PI),e.closePath()}},t}(ShapeBase$3);const Rect$3=Rect$2;var Text$2=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.isOnlyHitBox=function(){return!0},t.prototype.initAttrs=function(e){this._assembleFont(),e.text&&this._setText(e.text)},t.prototype._assembleFont=function(){var e=this.attrs;e.font=assembleFont(e)},t.prototype._setText=function(e){var t=null;isString$1(e)&&-1!==e.indexOf("\n")&&(t=e.split("\n")),this.set("textArr",t)},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),t.startsWith("font")&&this._assembleFont(),"text"===t&&this._setText(n)},t.prototype._getSpaceingY=function(){var e=this.attrs,t=e.lineHeight,n=1*e.fontSize;return t?t-n:.14*n},t.prototype._drawTextArr=function(e,t,n){var r,i=this.attrs,o=i.textBaseline,a=i.x,s=i.y,l=1*i.fontSize,c=this._getSpaceingY(),u=getTextHeight(i.text,i.fontSize,i.lineHeight);each(t,(function(t,i){r=s+i*(c+l)-u+l,"middle"===o&&(r+=u-l-(u-l)/2),"top"===o&&(r+=u-l),isNil(t)||(n?e.fillText(t,a,r):e.strokeText(t,a,r))}))},t.prototype._drawText=function(e,t){var n=this.attr(),r=n.x,i=n.y,o=this.get("textArr");if(o)this._drawTextArr(e,o,t);else{var a=n.text;isNil(a)||(t?e.fillText(a,r,i):e.strokeText(a,r,i))}},t.prototype.strokeAndFill=function(e){var t=this.attrs,n=t.lineWidth,r=t.opacity,i=t.strokeOpacity,o=t.fillOpacity;this.isStroke()&&n>0&&(isNil(i)||1===i||(e.globalAlpha=r),this.stroke(e)),this.isFill()&&(isNil(o)||1===o?this.fill(e):(e.globalAlpha=o,this.fill(e),e.globalAlpha=r)),this.afterDrawPath(e)},t.prototype.fill=function(e){this._drawText(e,!0)},t.prototype.stroke=function(e){this._drawText(e,!1)},t}(ShapeBase$3);const Text$3=Text$2;function invertFromMatrix(e,t){return t?multiplyVec2(invert(t),e):e}function getRefXY(e,t,n){var r=e.getTotalMatrix();if(r){var i=invertFromMatrix([t,n,1],r);return[i[0],i[1]]}return[t,n]}function preTest(e,t,n){if(e.isCanvas&&e.isCanvas())return!0;if(!isAllowCapture(e)||!1===e.cfg.isInView)return!1;if(e.cfg.clipShape){var r=getRefXY(e,t,n),i=r[0],o=r[1];if(e.isClipped(i,o))return!1}var a=e.cfg.cacheCanvasBBox||e.getCanvasBBox();return t>=a.minX&&t<=a.maxX&&n>=a.minY&&n<=a.maxY}function getShape(e,t,n){if(!preTest(e,t,n))return null;for(var r=null,i=e.getChildren(),o=i.length-1;o>=0;o--){var a=i[o];if(a.isGroup())r=getShape(a,t,n);else if(preTest(a,t,n)){var s=a,l=getRefXY(a,t,n),c=l[0],u=l[1];s.isInShape(c,u)&&(r=a)}if(r)break}return r}var Canvas$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},t.prototype.onCanvasChange=function(e){"attr"!==e&&"sort"!==e&&"changeSize"!==e||(this.set("refreshElements",[this]),this.draw())},t.prototype.getShapeBase=function(){return Shape$1},t.prototype.getGroupBase=function(){return Group$1},t.prototype.getPixelRatio=function(){var e=this.get("pixelRatio")||getPixelRatio();return e>=1?Math.ceil(e):1},t.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},t.prototype.createDom=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return this.set("context",t),e},t.prototype.setDOMSize=function(t,n){e.prototype.setDOMSize.call(this,t,n);var r=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*t,i.height=o*n,o>1&&r.scale(o,o)},t.prototype.clear=function(){e.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),n=this.get("el");t.clearRect(0,0,n.width,n.height)},t.prototype.getShape=function(t,n){return this.get("quickHit")?getShape(this,t,n):e.prototype.getShape.call(this,t,n,null)},t.prototype._getRefreshRegion=function(){var e,t=this.get("refreshElements"),n=this.getViewRange();t.length&&t[0]===this?e=n:(e=getMergedRegion(t))&&(e.minX=Math.floor(e.minX),e.minY=Math.floor(e.minY),e.maxX=Math.ceil(e.maxX),e.maxY=Math.ceil(e.maxY),e.maxY+=1,this.get("clipView")&&(e=mergeView(e,n)));return e},t.prototype.refreshElement=function(e){this.get("refreshElements").push(e)},t.prototype._clearFrame=function(){var e=this.get("drawFrame");e&&(cancelAnimationFrame$1(e),this.set("drawFrame",null),this.set("refreshElements",[]))},t.prototype.draw=function(){var e=this.get("drawFrame");this.get("autoDraw")&&e||this._startDraw()},t.prototype._drawAll=function(){var e=this.get("context"),t=this.get("el"),n=this.getChildren();e.clearRect(0,0,t.width,t.height),applyAttrsToContext(e,this),drawChildren$1(e,n),this.set("refreshElements",[])},t.prototype._drawRegion=function(){var e=this.get("context"),t=this.get("refreshElements"),n=this.getChildren(),r=this._getRefreshRegion();r?(e.clearRect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.save(),e.beginPath(),e.rect(r.minX,r.minY,r.maxX-r.minX,r.maxY-r.minY),e.clip(),applyAttrsToContext(e,this),checkRefresh(this,n,r),drawChildren$1(e,n,r),e.restore()):t.length&&clearChanged(t),each(t,(function(e){e.get("hasChanged")&&e.set("hasChanged",!1)})),this.set("refreshElements",[])},t.prototype._startDraw=function(){var e=this,t=this.get("drawFrame");t||(t=requestAnimationFrame$1((function(){e.get("localRefresh")?e._drawRegion():e._drawAll(),e.set("drawFrame",null)})),this.set("drawFrame",t))},t.prototype.skipDraw=function(){},t.prototype.removeDom=function(){var e=this.get("el");e.width=0,e.height=0,e.parentNode.removeChild(e)},t}(Canvas$2),SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"};function createSVGElement(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function createDom$1(e){var t=SHAPE_TO_TAGS[e.type],n=e.getParent();if(!t)throw new Error("the type "+e.type+" is not supported by svg");var r=createSVGElement(t);if(e.get("id")&&(r.id=e.get("id")),e.set("el",r),e.set("attrs",{}),n){var i=n.get("el");i||(i=n.createDom(),n.set("el",i)),i.appendChild(r)}return r}function sortDom(e,t){var n=e.get("el"),r=toArray(n.children).sort(t),i=document.createDocumentFragment();r.forEach((function(e){i.appendChild(e)})),n.appendChild(i)}function moveTo(e,t){var n=e.parentNode,r=Array.from(n.childNodes).filter((function(e){return 1===e.nodeType&&"defs"!==e.nodeName.toLowerCase()})),i=r[t],o=r.indexOf(e);if(i){if(o>t)n.insertBefore(e,i);else if(o<t){var a=r[t+1];a?n.insertBefore(e,a):n.appendChild(e)}}else n.appendChild(e)}function setShadow(e,t){var n=e.cfg.el,r=e.attr(),i={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=t.find("filter",i);o||(o=t.addShadow(i)),n.setAttribute("filter","url(#"+o+")")}else n.removeAttribute("filter")}function setTransform(e){var t=e.attr().matrix;if(t){for(var n=e.cfg.el,r=[],i=0;i<9;i+=3)r.push(t[i]+","+t[i+1]);-1===(r=r.join(",")).indexOf("NaN")&&n.setAttribute("transform","matrix("+r+")")}}function setClip(e,t){var n=e.getClip(),r=e.get("el");if(n){if(n&&!r.hasAttribute("clip-path")){createDom$1(n),n.createPath(t);var i=t.addClip(n);r.setAttribute("clip-path","url(#"+i+")")}}else r.removeAttribute("clip-path")}function drawChildren(e,t){t.forEach((function(t){t.draw(e)}))}function refreshElement(e,t){var n=e.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context"),i=e.getParent(),o=i?i.getChildren():[n],a=e.get("el");if("remove"===t)if(e.get("isClipShape")){var s=a&&a.parentNode,l=s&&s.parentNode;s&&l&&l.removeChild(s)}else a&&a.parentNode&&a.parentNode.removeChild(a);else if("show"===t)a.setAttribute("visibility","visible");else if("hide"===t)a.setAttribute("visibility","hidden");else if("zIndex"===t)moveTo(a,o.indexOf(e));else if("sort"===t){var c=e.get("children");c&&c.length&&sortDom(e,(function(e,t){return c.indexOf(e)-c.indexOf(t)?1:0}))}else"clear"===t?a&&(a.innerHTML=""):"matrix"===t?setTransform(e):"clip"===t?setClip(e,r):"attr"===t||"add"===t&&e.draw(r)}}var Group=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$x(t,e),t.prototype.isEntityGroup=function(){return!0},t.prototype.createDom=function(){var e=createSVGElement("g");this.set("el",e);var t=this.getParent();if(t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(e)}return e},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.createPath(r,t)}},t.prototype.onCanvasChange=function(e){refreshElement(this,e)},t.prototype.getShapeBase=function(){return Shape},t.prototype.getGroupBase=function(){return t},t.prototype.draw=function(e){var t=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),setClip(this,e),this.createPath(e),t.length&&drawChildren(e,t))},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(e,t){SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)})),setTransform(this)},t}(AbstractGroup),ShapeBase=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},t.prototype.afterAttrsChange=function(t){e.prototype.afterAttrsChange.call(this,t);var n=this.get("canvas");if(n&&n.get("autoDraw")){var r=n.get("context");this.draw(r,t)}},t.prototype.getShapeBase=function(){return Shape},t.prototype.getGroupBase=function(){return Group},t.prototype.onCanvasChange=function(e){refreshElement(this,e)},t.prototype.calculateBBox=function(){var e=this.get("el"),t=null;if(e)t=e.getBBox();else{var n=getMethod(this.get("type"));n&&(t=n(this))}if(t){var r=t.x,i=t.y,o=t.width,a=t.height,s=this.getHitLineWidth(),l=s/2,c=r-l,u=i-l;return{x:c,y:u,minX:c,minY:u,maxX:r+o+l,maxY:i+a+l,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},t.prototype.isFill=function(){var e=this.attr(),t=e.fill,n=e.fillStyle;return(t||n||this.isClipShape())&&this.canFill},t.prototype.isStroke=function(){var e=this.attr(),t=e.stroke,n=e.strokeStyle;return(t||n)&&this.canStroke},t.prototype.draw=function(e,t){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||createDom$1(this),setClip(this,e),this.createPath(e,t),this.shadow(e,t),this.strokeAndFill(e,t),this.transform(t))},t.prototype.createPath=function(e,t){},t.prototype.strokeAndFill=function(e,t){var n=t||this.attr(),r=n.fill,i=n.fillStyle,o=n.stroke,a=n.strokeStyle,s=n.fillOpacity,l=n.strokeOpacity,c=n.lineWidth,u=this.get("el");this.canFill&&(t?"fill"in n?this._setColor(e,"fill",r):"fillStyle"in n&&this._setColor(e,"fill",i):this._setColor(e,"fill",r||i),s&&u.setAttribute(SVG_ATTR_MAP.fillOpacity,s)),this.canStroke&&c>0&&(t?"stroke"in n?this._setColor(e,"stroke",o):"strokeStyle"in n&&this._setColor(e,"stroke",a):this._setColor(e,"stroke",o||a),l&&u.setAttribute(SVG_ATTR_MAP.strokeOpacity,l),c&&u.setAttribute(SVG_ATTR_MAP.lineWidth,c))},t.prototype._setColor=function(e,t,n){var r=this.get("el");if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n))(i=e.find("gradient",n))||(i=e.addGradient(n)),r.setAttribute(SVG_ATTR_MAP[t],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(n)){var i;(i=e.find("pattern",n))||(i=e.addPattern(n)),r.setAttribute(SVG_ATTR_MAP[t],"url(#"+i+")")}else r.setAttribute(SVG_ATTR_MAP[t],n);else r.setAttribute(SVG_ATTR_MAP[t],"none")},t.prototype.shadow=function(e,t){var n=this.attr(),r=t||n,i=r.shadowOffsetX,o=r.shadowOffsetY,a=r.shadowBlur,s=r.shadowColor;(i||o||a||s)&&setShadow(this,e)},t.prototype.transform=function(e){var t=this.attr();(e||t).matrix&&setTransform(this)},t.prototype.isInShape=function(e,t){return this.isPointInPath(e,t)},t.prototype.isPointInPath=function(e,t){var n=this.get("el"),r=this.get("canvas").get("el").getBoundingClientRect(),i=e+r.left,o=t+r.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(n))},t.prototype.getHitLineWidth=function(){var e=this.attrs,t=e.lineWidth,n=e.lineAppendWidth;return this.isStroke()?t+n:0},t}(AbstractShape);const ShapeBase$1=ShapeBase;var Circle=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,r:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)}))},t}(ShapeBase$1);const Circle$1=Circle;var Dom=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return __extends$x(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");if(each(t||n,(function(e,t){SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)})),"function"==typeof n.html){var i=n.html.call(this,n);if(i instanceof Element||i instanceof HTMLDocument){for(var o=r.childNodes,a=o.length-1;a>=0;a--)r.removeChild(o[a]);r.appendChild(i)}else r.innerHTML=i}else r.innerHTML=n.html},t}(ShapeBase$1);const Dom$1=Dom;var Ellipse=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,rx:0,ry:0})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(e,t){"x"===t||"y"===t?r.setAttribute("c"+t,e):SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)}))},t}(ShapeBase$1);const Ellipse$1=Ellipse;var Image$1=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,width:0,height:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");each(t||r,(function(e,t){"img"===t?n._setImage(r.img):SVG_ATTR_MAP[t]&&i.setAttribute(SVG_ATTR_MAP[t],e)}))},t.prototype.setAttr=function(e,t){this.attrs[e]=t,"img"===e&&this._setImage(t)},t.prototype._setImage=function(e){var t=this.attr(),n=this.get("el");if(isString$1(e))n.setAttribute("href",e);else if(e instanceof window.Image)t.width||(n.setAttribute("width",e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",e.height),this.attr("height",e.height)),n.setAttribute("href",e.src);else if(e instanceof HTMLElement&&isString$1(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())n.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var r=document.createElement("canvas");r.setAttribute("width",""+e.width),r.setAttribute("height",""+e.height),r.getContext("2d").putImageData(e,0,0),t.width||(n.setAttribute("width",""+e.width),this.attr("width",e.width)),t.height||(n.setAttribute("height",""+e.height),this.attr("height",e.height)),n.setAttribute("href",r.toDataURL())}},t}(ShapeBase$1);const Image$2=Image$1;var Line=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(t,i){if("startArrow"===i||"endArrow"===i)if(t){var o=isObject(t)?e.addArrow(n,SVG_ATTR_MAP[i]):e.getDefaultArrow(n,SVG_ATTR_MAP[i]);r.setAttribute(SVG_ATTR_MAP[i],"url(#"+o+")")}else r.removeAttribute(SVG_ATTR_MAP[i]);else SVG_ATTR_MAP[i]&&r.setAttribute(SVG_ATTR_MAP[i],t)}))},t.prototype.getTotalLength=function(){var e=this.attr(),t=e.x1,n=e.y1,r=e.x2,i=e.y2;return LineUtil.length(t,n,r,i)},t.prototype.getPoint=function(e){var t=this.attr(),n=t.x1,r=t.y1,i=t.x2,o=t.y2;return LineUtil.pointAt(n,r,i,o,e)},t}(ShapeBase$1);const Line$1=Line;var Symbols={circle:function(e,t,n){return[["M",e,t],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(e,t,n){return[["M",e-n,t-n],["L",e+n,t-n],["L",e+n,t+n],["L",e-n,t+n],["Z"]]},diamond:function(e,t,n){return[["M",e-n,t],["L",e,t-n],["L",e+n,t],["L",e,t+n],["Z"]]},triangle:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t+r],["L",e,t-r],["L",e+n,t+r],["z"]]},triangleDown:function(e,t,n){var r=n*Math.sin(1/3*Math.PI);return[["M",e-n,t-r],["L",e+n,t-r],["L",e,t+r],["Z"]]}};const symbolsFactory={get:function(e){return Symbols[e]},register:function(e,t){Symbols[e]=t},remove:function(e){delete Symbols[e]},getAll:function(){return Symbols}};var Marker=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.createPath=function(e){this.get("el").setAttribute("d",this._assembleMarker())},t.prototype._assembleMarker=function(){var e=this._getPath();return isArray$1(e)?e.map((function(e){return e.join(" ")})).join(""):e},t.prototype._getPath=function(){var e,t=this.attr(),n=t.x,r=t.y,i=t.r||t.radius,o=t.symbol||"circle";return(e=isFunction$1(o)?o:symbolsFactory.get(o))?e(n,r,i):null},t.symbolsFactory=symbolsFactory,t}(ShapeBase$1);const Marker$1=Marker;var Path=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{startArrow:!1,endArrow:!1})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");each(t||r,(function(t,o){if("path"===o&&isArray$1(t))i.setAttribute("d",n._formatPath(t));else if("startArrow"===o||"endArrow"===o)if(t){var a=isObject(t)?e.addArrow(r,SVG_ATTR_MAP[o]):e.getDefaultArrow(r,SVG_ATTR_MAP[o]);i.setAttribute(SVG_ATTR_MAP[o],"url(#"+a+")")}else i.removeAttribute(SVG_ATTR_MAP[o]);else SVG_ATTR_MAP[o]&&i.setAttribute(SVG_ATTR_MAP[o],t)}))},t.prototype._formatPath=function(e){var t=e.map((function(e){return e.join(" ")})).join("");return~t.indexOf("NaN")?"":t},t.prototype.getTotalLength=function(){var e=this.get("el");return e?e.getTotalLength():null},t.prototype.getPoint=function(e){var t=this.get("el"),n=this.getTotalLength();if(0===n)return null;var r=t?t.getPointAtLength(e*n):null;return r?{x:r.x,y:r.y}:null},t}(ShapeBase$1);const Path$1=Path;var Polygon=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(e,t){"points"===t&&isArray$1(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)}))},t}(ShapeBase$1);const Polygon$1=Polygon;var Polyline=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{startArrow:!1,endArrow:!1})},t.prototype.onAttrChange=function(t,n,r){e.prototype.onAttrChange.call(this,t,n,r),-1!==["points"].indexOf(t)&&this._resetCache()},t.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},t.prototype.createPath=function(e,t){var n=this.attr(),r=this.get("el");each(t||n,(function(e,t){"points"===t&&isArray$1(e)&&e.length>=2?r.setAttribute("points",e.map((function(e){return e[0]+","+e[1]})).join(" ")):SVG_ATTR_MAP[t]&&r.setAttribute(SVG_ATTR_MAP[t],e)}))},t.prototype.getTotalLength=function(){var e=this.attr().points,t=this.get("totalLength");return isNil(t)?(this.set("totalLength",PolylineUtil.length(e)),this.get("totalLength")):t},t.prototype.getPoint=function(e){var t,n,r=this.attr().points,i=this.get("tCache");return i||(this._setTcache(),i=this.get("tCache")),each(i,(function(r,i){e>=r[0]&&e<=r[1]&&(t=(e-r[0])/(r[1]-r[0]),n=i)})),LineUtil.pointAt(r[n][0],r[n][1],r[n+1][0],r[n+1][1],t)},t.prototype._setTcache=function(){var e=this.attr().points;if(e&&0!==e.length){var t=this.getTotalLength();if(!(t<=0)){var n,r,i=0,o=[];each(e,(function(a,s){e[s+1]&&((n=[])[0]=i/t,r=LineUtil.length(a[0],a[1],e[s+1][0],e[s+1][1]),i+=r,n[1]=i/t,o.push(n))})),this.set("tCache",o)}}},t.prototype.getStartTangent=function(){var e=this.attr().points,t=[];return t.push([e[1][0],e[1][1]]),t.push([e[0][0],e[0][1]]),t},t.prototype.getEndTangent=function(){var e=this.attr().points,t=e.length-1,n=[];return n.push([e[t-1][0],e[t-1][1]]),n.push([e[t][0],e[t][1]]),n},t}(ShapeBase$1);const Polyline$1=Polyline;function parseRadius(e){var t=0,n=0,r=0,i=0;return isArray$1(e)?1===e.length?t=n=r=i=e[0]:2===e.length?(t=r=e[0],n=i=e[1]):3===e.length?(t=e[0],n=i=e[1],r=e[2]):(t=e[0],n=e[1],r=e[2],i=e[3]):t=n=r=i=e,{r1:t,r2:n,r3:r,r4:i}}var Rect=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,width:0,height:0,radius:0})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el"),o=!1,a=["x","y","width","height","radius"];each(t||r,(function(e,t){-1===a.indexOf(t)||o?-1===a.indexOf(t)&&SVG_ATTR_MAP[t]&&i.setAttribute(SVG_ATTR_MAP[t],e):(i.setAttribute("d",n._assembleRect(r)),o=!0)}))},t.prototype._assembleRect=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.radius;if(!o)return"M "+t+","+n+" l "+r+",0 l 0,"+i+" l"+-r+" 0 z";var a=parseRadius(o);return isArray$1(o)?1===o.length?a.r1=a.r2=a.r3=a.r4=o[0]:2===o.length?(a.r1=a.r3=o[0],a.r2=a.r4=o[1]):3===o.length?(a.r1=o[0],a.r2=a.r4=o[1],a.r3=o[2]):(a.r1=o[0],a.r2=o[1],a.r3=o[2],a.r4=o[3]):a.r1=a.r2=a.r3=a.r4=o,[["M "+(t+a.r1)+","+n],["l "+(r-a.r1-a.r2)+",0"],["a "+a.r2+","+a.r2+",0,0,1,"+a.r2+","+a.r2],["l 0,"+(i-a.r2-a.r3)],["a "+a.r3+","+a.r3+",0,0,1,"+-a.r3+","+a.r3],["l "+(a.r3+a.r4-r)+",0"],["a "+a.r4+","+a.r4+",0,0,1,"+-a.r4+","+-a.r4],["l 0,"+(a.r4+a.r1-i)],["a "+a.r1+","+a.r1+",0,0,1,"+a.r1+","+-a.r1],["z"]].join(" ")},t}(ShapeBase$1);const Rect$1=Rect;var LETTER_SPACING=.3,BASELINE_MAP={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},BASELINE_MAP_FOR_FIREFOX={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},ANCHOR_MAP={left:"left",start:"left",center:"middle",right:"end",end:"end"},Text=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return __extends$x(t,e),t.prototype.getDefaultAttrs=function(){var t=e.prototype.getDefaultAttrs.call(this);return __assign$h(__assign$h({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},t.prototype.createPath=function(e,t){var n=this,r=this.attr(),i=this.get("el");this._setFont(),each(t||r,(function(e,t){"text"===t?n._setText(""+e):"matrix"===t&&e?setTransform(n):SVG_ATTR_MAP[t]&&i.setAttribute(SVG_ATTR_MAP[t],e)})),i.setAttribute("paint-order","stroke"),i.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},t.prototype._setFont=function(){var e=this.get("el"),t=this.attr(),n=t.textBaseline,r=t.textAlign,i=detect();i&&"firefox"===i.name?e.setAttribute("dominant-baseline",BASELINE_MAP_FOR_FIREFOX[n]||"alphabetic"):e.setAttribute("alignment-baseline",BASELINE_MAP[n]||"baseline"),e.setAttribute("text-anchor",ANCHOR_MAP[r]||"left")},t.prototype._setText=function(e){var t=this.get("el"),n=this.attr(),r=n.x,i=n.textBaseline,o=void 0===i?"bottom":i;if(e)if(~e.indexOf("\n")){var a=e.split("\n"),s=a.length-1,l="";each(a,(function(e,t){0===t?"alphabetic"===o?l+='<tspan x="'+r+'" dy="'+-s+'em">'+e+"</tspan>":"top"===o?l+='<tspan x="'+r+'" dy="0.9em">'+e+"</tspan>":"middle"===o?l+='<tspan x="'+r+'" dy="'+-(s-1)/2+'em">'+e+"</tspan>":"bottom"===o?l+='<tspan x="'+r+'" dy="-'+(s+LETTER_SPACING)+'em">'+e+"</tspan>":"hanging"===o&&(l+='<tspan x="'+r+'" dy="'+(-(s-1)-LETTER_SPACING)+'em">'+e+"</tspan>"):l+='<tspan x="'+r+'" dy="1em">'+e+"</tspan>"})),t.innerHTML=l}else t.innerHTML=e;else t.innerHTML=""},t}(ShapeBase$1);const Text$1=Text;var regexLG=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,regexRG=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,regexColorStop=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function addStop(e){var t=e.match(regexColorStop);if(!t)return"";var n="";return t.sort((function(e,t){return e=e.split(":"),t=t.split(":"),Number(e[0])-Number(t[0])})),each(t,(function(e){e=e.split(":"),n+='<stop offset="'+e[0]+'" stop-color="'+e[1]+'"></stop>'})),n}function parseLineGradient(e,t){var n,r,i=regexLG.exec(e),o=mod$1(toRadian$1(parseFloat(i[1])),2*Math.PI),a=i[2];o>=0&&o<.5*Math.PI?(n={x:0,y:0},r={x:1,y:1}):.5*Math.PI<=o&&o<Math.PI?(n={x:1,y:0},r={x:0,y:1}):Math.PI<=o&&o<1.5*Math.PI?(n={x:1,y:1},r={x:0,y:0}):(n={x:0,y:1},r={x:1,y:0});var s=Math.tan(o),l=s*s,c=(r.x-n.x+s*(r.y-n.y))/(l+1)+n.x,u=s*(r.x-n.x+s*(r.y-n.y))/(l+1)+n.y;t.setAttribute("x1",n.x),t.setAttribute("y1",n.y),t.setAttribute("x2",c),t.setAttribute("y2",u),t.innerHTML=addStop(a)}function parseRadialGradient(e,t){var n=regexRG.exec(e),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),a=n[4];t.setAttribute("cx",r),t.setAttribute("cy",i),t.setAttribute("r",o),t.innerHTML=addStop(a)}var Gradient=function(){function e(e){this.cfg={};var t=null,n=uniqueId$3("gradient_");return"l"===e.toLowerCase()[0]?parseLineGradient(e,t=createSVGElement("linearGradient")):parseRadialGradient(e,t=createSVGElement("radialGradient")),t.setAttribute("id",n),this.el=t,this.id=n,this.cfg=e,this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),ATTR_MAP={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},SHADOW_DIMENSION={x:"-40%",y:"-40%",width:"200%",height:"200%"},Shadow=function(){function e(e){this.type="filter",this.cfg={},this.type="filter";var t=createSVGElement("filter");return each(SHADOW_DIMENSION,(function(e,n){t.setAttribute(n,e)})),this.el=t,this.id=uniqueId$3("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return e.prototype.match=function(e,t){if(this.type!==e)return!1;var n=!0,r=this.cfg;return each(Object.keys(r),(function(e){if(r[e]!==t[e])return n=!1,!1})),n},e.prototype.update=function(e,t){var n=this.cfg;return n[ATTR_MAP[e]]=t,this._parseShadow(n,this.el),this},e.prototype._parseShadow=function(e,t){var n='<feDropShadow\n      dx="'+(e.dx||0)+'"\n      dy="'+(e.dy||0)+'"\n      stdDeviation="'+(e.blur?e.blur/10:0)+'"\n      flood-color="'+(e.color?e.color:"#000")+'"\n      flood-opacity="'+(e.opacity?e.opacity:1)+'"\n      />';t.innerHTML=n},e}(),Arrow=function(){function e(e,t){this.cfg={};var n=createSVGElement("marker"),r=uniqueId$3("marker_");n.setAttribute("id",r);var i=createSVGElement("path");i.setAttribute("stroke",e.stroke||"none"),i.setAttribute("fill",e.fill||"none"),n.appendChild(i),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=i,this.id=r;var o=e["marker-start"===t?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",!0===o?this._setDefaultPath(t,i):(this.cfg=o,this._setMarker(e.lineWidth,i)),this}return e.prototype.match=function(){return!1},e.prototype._setDefaultPath=function(e,t){var n=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),n.setAttribute("refX",""+10*Math.cos(Math.PI/6)),n.setAttribute("refY","5")},e.prototype._setMarker=function(e,t){var n=this.el,r=this.cfg.path,i=this.cfg.d;isArray$1(r)&&(r=r.map((function(e){return e.join(" ")})).join("")),t.setAttribute("d",r),n.appendChild(t),i&&n.setAttribute("refX",""+i/e)},e.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},e}(),Clip=function(){function e(e){this.type="clip",this.cfg={};var t=createSVGElement("clipPath");this.el=t,this.id=uniqueId$3("clip_"),t.id=this.id;var n=e.cfg.el;return t.appendChild(n),this.cfg=e,this}return e.prototype.match=function(){return!1},e.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},e}(),regexPR=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Pattern=function(){function e(e){this.cfg={};var t=createSVGElement("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var n=createSVGElement("image");t.appendChild(n);var r=uniqueId$3("pattern_");t.id=r,this.el=t,this.id=r,this.cfg=e;var i=regexPR.exec(e)[2];n.setAttribute("href",i);var o=new Image;function a(){t.setAttribute("width",""+o.width),t.setAttribute("height",""+o.height)}return i.match(/^data:/i)||(o.crossOrigin="Anonymous"),o.src=i,o.complete?a():(o.onload=a,o.src=o.src),this}return e.prototype.match=function(e,t){return this.cfg===t},e}(),Defs=function(){function e(e){var t=createSVGElement("defs"),n=uniqueId$3("defs_");t.id=n,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return e.prototype.find=function(e,t){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(e,t)){r=n[i].id;break}return r},e.prototype.findById=function(e){for(var t=this.children,n=null,r=0;r<t.length;r++)if(t[r].id===e){n=t[r];break}return n},e.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},e.prototype.getDefaultArrow=function(e,t){var n=e.stroke||e.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new Arrow(e,t);return this.defaultArrow[n]=r,this.el.appendChild(r.el),this.add(r),r.id},e.prototype.addGradient=function(e){var t=new Gradient(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addArrow=function(e,t){var n=new Arrow(e,t);return this.el.appendChild(n.el),this.add(n),n.id},e.prototype.addShadow=function(e){var t=new Shadow(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addPattern=function(e){var t=new Pattern(e);return this.el.appendChild(t.el),this.add(t),t.id},e.prototype.addClip=function(e){var t=new Clip(e);return this.el.appendChild(t.el),this.add(t),t.id},e}(),Canvas=function(e){function t(t){return e.call(this,__assign$h(__assign$h({},t),{autoDraw:!0,renderer:"svg"}))||this}return __extends$x(t,e),t.prototype.getShapeBase=function(){return Shape},t.prototype.getGroupBase=function(){return Group},t.prototype.getShape=function(e,t,n){var r=n.target||n.srcElement;if(!SHAPE_TO_TAGS[r.tagName]){for(var i=r.parentNode;i&&!SHAPE_TO_TAGS[i.tagName];)i=i.parentNode;r=i}return this.find((function(e){return e.get("el")===r}))},t.prototype.createDom=function(){var e=createSVGElement("svg"),t=new Defs(e);return e.setAttribute("width",""+this.get("width")),e.setAttribute("height",""+this.get("height")),this.set("context",t),e},t.prototype.onCanvasChange=function(e){var t=this.get("context"),n=this.get("el");if("sort"===e){var r=this.get("children");r&&r.length&&sortDom(this,(function(e,t){return r.indexOf(e)-r.indexOf(t)?1:0}))}else if("clear"===e){if(n){n.innerHTML="";var i=t.el;i.innerHTML="",n.appendChild(i)}}else"matrix"===e?setTransform(this):"clip"===e?setClip(this,t):"changeSize"===e&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},t.prototype.draw=function(){var e=this.get("context"),t=this.getChildren();setClip(this,e),t.length&&drawChildren(e,t)},t}(Canvas$2),colorString$1={exports:{}},colorName={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},simpleSwizzle={exports:{}},isArrayish$1=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))},isArrayish=isArrayish$1,concat=Array.prototype.concat,slice=Array.prototype.slice,swizzle$1=simpleSwizzle.exports=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];isArrayish(i)?t=concat.call(t,slice.call(i)):t.push(i)}return t};swizzle$1.wrap=function(e){return function(){return e(swizzle$1(arguments))}};var colorNames=colorName,swizzle=simpleSwizzle.exports,hasOwnProperty$2=Object.hasOwnProperty,reverseNames=Object.create(null);for(var name in colorNames)hasOwnProperty$2.call(colorNames,name)&&(reverseNames[colorNames[name]]=name);var cs$1=colorString$1.exports={to:{},get:{}};function clamp(e,t,n){return Math.min(Math.max(t,e),n)}function hexDouble(e){var t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}cs$1.get=function(e){var t,n;switch(e.substring(0,3).toLowerCase()){case"hsl":t=cs$1.get.hsl(e),n="hsl";break;case"hwb":t=cs$1.get.hwb(e),n="hwb";break;default:t=cs$1.get.rgb(e),n="rgb"}return t?{model:n,value:t}:null},cs$1.get.rgb=function(e){if(!e)return null;var t,n,r,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(r=t[2],t=t[1],n=0;n<3;n++){var o=2*n;i[n]=parseInt(t.slice(o,o+2),16)}r&&(i[3]=parseInt(r,16)/255)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(r=(t=t[1])[3],n=0;n<3;n++)i[n]=parseInt(t[n]+t[n],16);r&&(i[3]=parseInt(r+r,16)/255)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)i[n]=parseInt(t[n+1],0);t[4]&&(t[5]?i[3]=.01*parseFloat(t[4]):i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(t=e.match(/^(\w+)$/))?"transparent"===t[1]?[0,0,0,0]:hasOwnProperty$2.call(colorNames,t[1])?((i=colorNames[t[1]])[3]=1,i):null:null;for(n=0;n<3;n++)i[n]=Math.round(2.55*parseFloat(t[n+1]));t[4]&&(t[5]?i[3]=.01*parseFloat(t[4]):i[3]=parseFloat(t[4]))}for(n=0;n<3;n++)i[n]=clamp(i[n],0,255);return i[3]=clamp(i[3],0,1),i},cs$1.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,clamp(parseFloat(t[2]),0,100),clamp(parseFloat(t[3]),0,100),clamp(isNaN(n)?1:n,0,1)]}return null},cs$1.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(t){var n=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,clamp(parseFloat(t[2]),0,100),clamp(parseFloat(t[3]),0,100),clamp(isNaN(n)?1:n,0,1)]}return null},cs$1.to.hex=function(){var e=swizzle(arguments);return"#"+hexDouble(e[0])+hexDouble(e[1])+hexDouble(e[2])+(e[3]<1?hexDouble(Math.round(255*e[3])):"")},cs$1.to.rgb=function(){var e=swizzle(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},cs$1.to.rgb.percent=function(){var e=swizzle(arguments),t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"},cs$1.to.hsl=function(){var e=swizzle(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},cs$1.to.hwb=function(){var e=swizzle(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},cs$1.to.keyword=function(e){return reverseNames[e.slice(0,3)]};var conversions$2={exports:{}},cssKeywords=colorName,reverseKeywords={};for(var key in cssKeywords)cssKeywords.hasOwnProperty(key)&&(reverseKeywords[cssKeywords[key]]=key);var convert$2=conversions$2.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var model in convert$2)if(convert$2.hasOwnProperty(model)){if(!("channels"in convert$2[model]))throw new Error("missing channels property: "+model);if(!("labels"in convert$2[model]))throw new Error("missing channel labels property: "+model);if(convert$2[model].labels.length!==convert$2[model].channels)throw new Error("channel and label counts mismatch: "+model);var channels=convert$2[model].channels,labels=convert$2[model].labels;delete convert$2[model].channels,delete convert$2[model].labels,Object.defineProperty(convert$2[model],"channels",{value:channels}),Object.defineProperty(convert$2[model],"labels",{value:labels})}function comparativeDistance(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)+Math.pow(e[2]-t[2],2)}convert$2.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s===a?t=0:r===s?t=(i-o)/l:i===s?t=2+(o-r)/l:o===s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]},convert$2.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,l=e[2]/255,c=Math.max(a,s,l),u=c-Math.min(a,s,l),h=function(e){return(c-e)/6/u+.5};return 0===u?i=o=0:(o=u/c,t=h(a),n=h(s),r=h(l),a===c?i=r-n:s===c?i=1/3+t-r:l===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},convert$2.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[convert$2.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},convert$2.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},convert$2.rgb.keyword=function(e){var t=reverseKeywords[e];if(t)return t;var n,r=1/0;for(var i in cssKeywords)if(cssKeywords.hasOwnProperty(i)){var o=comparativeDistance(e,cssKeywords[i]);o<r&&(r=o,n=i)}return n},convert$2.keyword.rgb=function(e){return cssKeywords[e]},convert$2.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},convert$2.rgb.lab=function(e){var t=convert$2.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},convert$2.hsl.rgb=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[c]=255*o;return i},convert$2.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},convert$2.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}},convert$2.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},convert$2.hwb.rgb=function(e){var t,n,r,i,o,a,s,l=e[0]/360,c=e[1]/100,u=e[2]/100,h=c+u;switch(h>1&&(c/=h,u/=h),r=6*l-(t=Math.floor(6*l)),0!=(1&t)&&(r=1-r),i=c+r*((n=1-u)-c),t){default:case 6:case 0:o=n,a=i,s=c;break;case 1:o=i,a=n,s=c;break;case 2:o=c,a=n,s=i;break;case 3:o=c,a=i,s=n;break;case 4:o=i,a=c,s=n;break;case 5:o=n,a=c,s=i}return[255*o,255*a,255*s]},convert$2.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},convert$2.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},convert$2.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},convert$2.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},convert$2.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},convert$2.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},convert$2.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:convert$2.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},convert$2.hsv.ansi16=function(e){return convert$2.rgb.ansi16(convert$2.hsv.rgb(e),e[2])},convert$2.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},convert$2.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},convert$2.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},convert$2.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},convert$2.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map((function(e){return e+e})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},convert$2.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return t=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},convert$2.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},convert$2.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},convert$2.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=t%1*6,s=a%1,l=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=l,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=l,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=l}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},convert$2.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},convert$2.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},convert$2.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},convert$2.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},convert$2.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},convert$2.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},convert$2.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},convert$2.gray.hsl=convert$2.gray.hsv=function(e){return[0,0,e[0]]},convert$2.gray.hwb=function(e){return[0,100,e[0]]},convert$2.gray.cmyk=function(e){return[0,0,0,e[0]]},convert$2.gray.lab=function(e){return[e[0],0,0]},convert$2.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},convert$2.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};var conversions$1=conversions$2.exports;function buildGraph(){for(var e={},t=Object.keys(conversions$1),n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function deriveBFS(e){var t=buildGraph(),n=[e];for(t[e].distance=0;n.length;)for(var r=n.pop(),i=Object.keys(conversions$1[r]),o=i.length,a=0;a<o;a++){var s=i[a],l=t[s];-1===l.distance&&(l.distance=t[r].distance+1,l.parent=r,n.unshift(s))}return t}function link$1(e,t){return function(n){return t(e(n))}}function wrapConversion(e,t){for(var n=[t[e].parent,e],r=conversions$1[t[e].parent][e],i=t[e].parent;t[i].parent;)n.unshift(t[i].parent),r=link$1(conversions$1[t[i].parent][i],r),i=t[i].parent;return r.conversion=n,r}var route$1=function(e){for(var t=deriveBFS(e),n={},r=Object.keys(t),i=r.length,o=0;o<i;o++){var a=r[o];null!==t[a].parent&&(n[a]=wrapConversion(a,t))}return n},conversions=conversions$2.exports,route=route$1,convert$1={},models=Object.keys(conversions);function wrapRaw(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}function wrapRounded(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}models.forEach((function(e){convert$1[e]={},Object.defineProperty(convert$1[e],"channels",{value:conversions[e].channels}),Object.defineProperty(convert$1[e],"labels",{value:conversions[e].labels});var t=route(e);Object.keys(t).forEach((function(n){var r=t[n];convert$1[e][n]=wrapRounded(r),convert$1[e][n].raw=wrapRaw(r)}))}));var colorConvert=convert$1,colorString=colorString$1.exports,convert=colorConvert,_slice=[].slice,skippedModels=["keyword","gray","hex"],hashedModelKeys={};Object.keys(convert).forEach((function(e){hashedModelKeys[_slice.call(convert[e].labels).sort().join("")]=e}));var limiters={};function Color(e,t){if(!(this instanceof Color))return new Color(e,t);if(t&&t in skippedModels&&(t=null),t&&!(t in convert))throw new Error("Unknown model: "+t);var n,r;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof Color)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var i=colorString.get(e);if(null===i)throw new Error("Unable to parse color from string: "+e);this.model=i.model,r=convert[this.model].channels,this.color=i.value.slice(0,r),this.valpha="number"==typeof i.value[r]?i.value[r]:1}else if(e.length){this.model=t||"rgb",r=convert[this.model].channels;var o=_slice.call(e,0,r);this.color=zeroArray(o,r),this.valpha="number"==typeof e[r]?e[r]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var a=Object.keys(e);"alpha"in e&&(a.splice(a.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var s=a.sort().join("");if(!(s in hashedModelKeys))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=hashedModelKeys[s];var l=convert[this.model].labels,c=[];for(n=0;n<l.length;n++)c.push(e[l[n]]);this.color=zeroArray(c)}if(limiters[this.model])for(r=convert[this.model].channels,n=0;n<r;n++){var u=limiters[this.model][n];u&&(this.color[n]=u(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function roundTo(e,t){return Number(e.toFixed(t))}function roundToPlace(e){return function(t){return roundTo(t,e)}}function getset(e,t,n){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(limiters[e]||(limiters[e]=[]))[t]=n})),e=e[0],function(r){var i;return arguments.length?(n&&(r=n(r)),(i=this[e]()).color[t]=r,i):(i=this[e]().color[t],n&&(i=n(i)),i)}}function maxfn(e){return function(t){return Math.max(0,Math.min(e,t))}}function assertArray(e){return Array.isArray(e)?e:[e]}function zeroArray(e,t){for(var n=0;n<t;n++)"number"!=typeof e[n]&&(e[n]=0);return e}Color.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in colorString.to?this:this.rgb(),n=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return colorString.to[t.model](n)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),n=1===t.valpha?t.color:t.color.concat(this.valpha);return colorString.to.rgb.percent(n)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=convert[this.model].channels,n=convert[this.model].labels,r=0;r<t;r++)e[n[r]]=this.color[r];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new Color(this.color.map(roundToPlace(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new Color(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:getset("rgb",0,maxfn(255)),green:getset("rgb",1,maxfn(255)),blue:getset("rgb",2,maxfn(255)),hue:getset(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:getset("hsl",1,maxfn(100)),lightness:getset("hsl",2,maxfn(100)),saturationv:getset("hsv",1,maxfn(100)),value:getset("hsv",2,maxfn(100)),chroma:getset("hcg",1,maxfn(100)),gray:getset("hcg",2,maxfn(100)),white:getset("hwb",1,maxfn(100)),wblack:getset("hwb",2,maxfn(100)),cyan:getset("cmyk",0,maxfn(100)),magenta:getset("cmyk",1,maxfn(100)),yellow:getset("cmyk",2,maxfn(100)),black:getset("cmyk",3,maxfn(100)),x:getset("xyz",0,maxfn(100)),y:getset("xyz",1,maxfn(100)),z:getset("xyz",2,maxfn(100)),l:getset("lab",0,maxfn(100)),a:getset("lab",1),b:getset("lab",2),keyword:function(e){return arguments.length?new Color(e):convert[this.model].keyword(this.color)},hex:function(e){return arguments.length?new Color(e):colorString.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return Color.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),n=t.color[0];return n=(n=(n+e)%360)<0?360+n:n,t.color[0]=n,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var n=e.rgb(),r=this.rgb(),i=void 0===t?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return Color.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue(),n.alpha()*i+r.alpha()*(1-i))}},Object.keys(convert).forEach((function(e){if(-1===skippedModels.indexOf(e)){var t=convert[e].channels;Color.prototype[e]=function(){if(this.model===e)return new Color(this);if(arguments.length)return new Color(arguments,e);var n="number"==typeof arguments[t]?t:this.valpha;return new Color(assertArray(convert[this.model][e].raw(this.color)).concat(n),e)},Color[e]=function(n){return"number"==typeof n&&(n=zeroArray(_slice.call(arguments),t)),new Color(n,e)}}}));var color=Color;const trimLeft=/^\s+/,trimRight=/\s+$/;function tinycolor(e,t){if(t=t||{},(e=e||"")instanceof tinycolor)return e;if(!(this instanceof tinycolor))return new tinycolor(e,t);var n=inputToRGB(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function inputToRGB(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"==typeof e&&(e=stringInputToObject(e)),"object"==typeof e&&(isValidCSSUnit(e.r)&&isValidCSSUnit(e.g)&&isValidCSSUnit(e.b)?(t=rgbToRgb(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.v)?(r=convertToPercentage(e.s),i=convertToPercentage(e.v),t=hsvToRgb(e.h,r,i),a=!0,s="hsv"):isValidCSSUnit(e.h)&&isValidCSSUnit(e.s)&&isValidCSSUnit(e.l)&&(r=convertToPercentage(e.s),o=convertToPercentage(e.l),t=hslToRgb(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=boundAlpha(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}function rgbToRgb(e,t,n){return{r:255*bound01(e,255),g:255*bound01(t,255),b:255*bound01(n,255)}}function rgbToHsl(e,t,n){e=bound01(e,255),t=bound01(t,255),n=bound01(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function hslToRgb(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=bound01(e,360),t=bound01(t,100),n=bound01(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}function rgbToHsv(e,t,n){e=bound01(e,255),t=bound01(t,255),n=bound01(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function hsvToRgb(e,t,n){e=6*bound01(e,360),t=bound01(t,100),n=bound01(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}function rgbToHex(e,t,n,r){var i=[pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function rgbaToHex(e,t,n,r,i){var o=[pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(n).toString(16)),pad2(convertDecimalToHex(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}function rgbaToArgbHex(e,t,n,r){return[pad2(convertDecimalToHex(r)),pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(Math.round(n).toString(16))].join("")}function desaturate(e,t){t=0===t?0:t||10;var n=tinycolor(e).toHsl();return n.s-=t/100,n.s=clamp01(n.s),tinycolor(n)}function saturate(e,t){t=0===t?0:t||10;var n=tinycolor(e).toHsl();return n.s+=t/100,n.s=clamp01(n.s),tinycolor(n)}function greyscale(e){return tinycolor(e).desaturate(100)}function lighten(e,t){t=0===t?0:t||10;var n=tinycolor(e).toHsl();return n.l+=t/100,n.l=clamp01(n.l),tinycolor(n)}function brighten(e,t){t=0===t?0:t||10;var n=tinycolor(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),tinycolor(n)}function darken(e,t){t=0===t?0:t||10;var n=tinycolor(e).toHsl();return n.l-=t/100,n.l=clamp01(n.l),tinycolor(n)}function spin(e,t){var n=tinycolor(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,tinycolor(n)}function complement(e){var t=tinycolor(e).toHsl();return t.h=(t.h+180)%360,tinycolor(t)}function polyad(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=tinycolor(e).toHsl(),r=[tinycolor(e)],i=360/t,o=1;o<t;o++)r.push(tinycolor({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function splitcomplement(e){var t=tinycolor(e).toHsl(),n=t.h;return[tinycolor(e),tinycolor({h:(n+72)%360,s:t.s,l:t.l}),tinycolor({h:(n+216)%360,s:t.s,l:t.l})]}function analogous(e,t,n){t=t||6,n=n||30;var r=tinycolor(e).toHsl(),i=360/n,o=[tinycolor(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(tinycolor(r));return o}function monochromatic(e,t){t=t||6;for(var n=tinycolor(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(tinycolor({h:r,s:i,v:o})),o=(o+s)%1;return a}tinycolor.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=boundAlpha(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=rgbToHsv(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=rgbToHsv(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=rgbToHsl(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=rgbToHsl(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return rgbToHex(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return rgbaToHex(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*bound01(this._r,255))+"%",g:Math.round(100*bound01(this._g,255))+"%",b:Math.round(100*bound01(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%)":"rgba("+Math.round(100*bound01(this._r,255))+"%, "+Math.round(100*bound01(this._g,255))+"%, "+Math.round(100*bound01(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(hexNames[rgbToHex(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+rgbaToArgbHex(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=tinycolor(e);n="#"+rgbaToArgbHex(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return tinycolor(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(lighten,arguments)},brighten:function(){return this._applyModification(brighten,arguments)},darken:function(){return this._applyModification(darken,arguments)},desaturate:function(){return this._applyModification(desaturate,arguments)},saturate:function(){return this._applyModification(saturate,arguments)},greyscale:function(){return this._applyModification(greyscale,arguments)},spin:function(){return this._applyModification(spin,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(analogous,arguments)},complement:function(){return this._applyCombination(complement,arguments)},monochromatic:function(){return this._applyCombination(monochromatic,arguments)},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments)},triad:function(){return this._applyCombination(polyad,[3])},tetrad:function(){return this._applyCombination(polyad,[4])}},tinycolor.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:convertToPercentage(e[r]));e=n}return tinycolor(e,t)},tinycolor.equals=function(e,t){return!(!e||!t)&&tinycolor(e).toRgbString()==tinycolor(t).toRgbString()},tinycolor.random=function(){return tinycolor.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},tinycolor.mix=function(e,t,n){n=0===n?0:n||50;var r=tinycolor(e).toRgb(),i=tinycolor(t).toRgb(),o=n/100;return tinycolor({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},tinycolor.readability=function(e,t){var n=tinycolor(e),r=tinycolor(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},tinycolor.isReadable=function(e,t,n){var r,i,o=tinycolor.readability(e,t);switch(i=!1,(r=validateWCAG2Parms(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},tinycolor.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var c=0;c<t.length;c++)(r=tinycolor.readability(e,t[c]))>l&&(l=r,s=tinycolor(t[c]));return tinycolor.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,tinycolor.mostReadable(e,["#fff","#000"],n))};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},hexNames=tinycolor.hexNames=flip(names);function flip(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function boundAlpha(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function bound01(e,t){isOnePointZero(e)&&(e="100%");var n=isPercentage(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function clamp01(e){return Math.min(1,Math.max(0,e))}function parseIntFromHex(e){return parseInt(e,16)}function isOnePointZero(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function isPercentage(e){return"string"==typeof e&&-1!=e.indexOf("%")}function pad2(e){return 1==e.length?"0"+e:""+e}function convertToPercentage(e){return e<=1&&(e=100*e+"%"),e}function convertDecimalToHex(e){return Math.round(255*parseFloat(e)).toString(16)}function convertHexToDecimal(e){return parseIntFromHex(e)/255}var matchers=(CSS_UNIT="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?",{CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}),CSS_UNIT,PERMISSIVE_MATCH3,PERMISSIVE_MATCH4;function isValidCSSUnit(e){return!!matchers.CSS_UNIT.exec(e)}function stringInputToObject(e){e=e.replace(trimLeft,"").replace(trimRight,"").toLowerCase();var t,n=!1;if(names[e])e=names[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=matchers.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=matchers.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=matchers.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=matchers.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=matchers.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=matchers.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=matchers.hex8.exec(e))?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),a:convertHexToDecimal(t[4]),format:n?"name":"hex8"}:(t=matchers.hex6.exec(e))?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),format:n?"name":"hex"}:(t=matchers.hex4.exec(e))?{r:parseIntFromHex(t[1]+""+t[1]),g:parseIntFromHex(t[2]+""+t[2]),b:parseIntFromHex(t[3]+""+t[3]),a:convertHexToDecimal(t[4]+""+t[4]),format:n?"name":"hex8"}:!!(t=matchers.hex3.exec(e))&&{r:parseIntFromHex(t[1]+""+t[1]),g:parseIntFromHex(t[2]+""+t[2]),b:parseIntFromHex(t[3]+""+t[3]),format:n?"name":"hex"}}function validateWCAG2Parms(e){var t,n;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(n=(e.size||"small").toLowerCase())&&"large"!==n&&(n="small"),{level:t,size:n}}var hueStep=2,saturationStep=.16,saturationStep2=.05,brightnessStep1=.05,brightnessStep2=.15,lightColorCount=5,darkColorCount=4,darkColorMap=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function getHue(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-hueStep*t:Math.round(e.h)+hueStep*t:n?Math.round(e.h)+hueStep*t:Math.round(e.h)-hueStep*t)<0?r+=360:r>=360&&(r-=360),r}function getSaturation(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-saturationStep*t:t===darkColorCount?e.s+saturationStep:e.s+saturationStep2*t)>1&&(r=1),n&&t===lightColorCount&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function getValue(e,t,n){var r;return(r=n?e.v+brightnessStep1*t:e.v-brightnessStep2*t)>1&&(r=1),Number(r.toFixed(2))}function generate(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=tinycolor(e),i=lightColorCount;i>0;i-=1){var o=r.toHsv(),a=tinycolor({h:getHue(o,i,!0),s:getSaturation(o,i,!0),v:getValue(o,i,!0)}).toHexString();n.push(a)}n.push(r.toHexString());for(var s=1;s<=darkColorCount;s+=1){var l=r.toHsv(),c=tinycolor({h:getHue(l,s),s:getSaturation(l,s),v:getValue(l,s)}).toHexString();n.push(c)}return"dark"===t.theme?darkColorMap.map((function(e){var r=e.index,i=e.opacity;return tinycolor.mix(t.backgroundColor||"#141414",n[r],100*i).toHexString()})):n}var presetPrimaryColors={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},presetPalettes={},presetDarkPalettes={};Object.keys(presetPrimaryColors).forEach((function(e){presetPalettes[e]=generate(presetPrimaryColors[e]),presetPalettes[e].primary=presetPalettes[e][5],presetDarkPalettes[e]=generate(presetPrimaryColors[e],{theme:"dark",backgroundColor:"#141414"}),presetDarkPalettes[e].primary=presetDarkPalettes[e][5]}));var mixColor=function(e,t,n){var r=color(e),i=color(t);return color([(1-n)*r.red()+n*i.red(),(1-n)*r.green()+n*i.green(),(1-n)*r.blue()+n*i.blue()]).rgb()},getColorsWithDefaultTheme=function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="rgb(150, 150, 150)");var r=mixColor(t,e,.05).rgb().toString(),i=mixColor(t,e,.1).rgb().toString(),o=mixColor(t,e,.2).rgb().toString(),a=mixColor(t,e,.4).rgb().toString(),s=mixColor(t,n,.02).rgb().toString(),l=mixColor(t,n,.05).rgb().toString(),c=mixColor(t,n,.1).rgb().toString(),u=mixColor(t,n,.2).rgb().toString(),h=mixColor(t,n,.3).rgb().toString(),d=generate(e,{theme:"default",backgroundColor:t}),f=color(e).hex().toLowerCase(),p=d.indexOf(f),g=e;return-1!==p&&(g=d[p+1]),{mainStroke:e,mainFill:i,activeStroke:e,activeFill:r,inactiveStroke:a,inactiveFill:r,selectedStroke:e,selectedFill:t,highlightStroke:g,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:h,edgeActiveStroke:e,edgeInactiveStroke:u,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:h,comboMainFill:s,comboActiveStroke:e,comboActiveFill:r,comboInactiveStroke:h,comboInactiveFill:s,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:s,comboDisableStroke:u,comboDisableFill:l}},getColorsWithDarkTheme=function(e,t,n){void 0===t&&(t="#fff"),void 0===n&&(n="#777");var r=mixColor(t,e,.2).rgb().toString(),i=mixColor(t,e,.3).rgb().toString(),o=mixColor(t,e,.6).rgb().toString(),a=mixColor(t,e,.8).rgb().toString(),s=mixColor(t,n,.2).rgb().toString(),l=mixColor(t,n,.25).rgb().toString(),c=mixColor(t,n,.3).rgb().toString(),u=mixColor(t,n,.4).rgb().toString(),h=mixColor(t,n,.5).rgb().toString(),d=generate(e,{theme:"dark",backgroundColor:t}),f=color(e).hex().toLowerCase(),p=d.indexOf(f),g=e;return-1!==p&&(g=d[p+1]),{mainStroke:a,mainFill:r,activeStroke:e,activeFill:i,inactiveStroke:a,inactiveFill:r,selectedStroke:e,selectedFill:r,highlightStroke:e,highlightFill:o,disableStroke:h,disableFill:l,edgeMainStroke:n,edgeActiveStroke:e,edgeInactiveStroke:n,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:u,comboMainFill:l,comboActiveStroke:e,comboActiveFill:s,comboInactiveStroke:u,comboInactiveFill:l,comboSelectedStroke:e,comboSelectedFill:s,comboHighlightStroke:g,comboHighlightFill:l,comboDisableStroke:u,comboDisableFill:s}},getColorsWithSubjectColor=function(e,t,n,r){return void 0===t&&(t="#fff"),void 0===n&&(n="default"),"default"===n?getColorsWithDefaultTheme(e,t,"rgb(150, 150, 150)"):getColorsWithDarkTheme(e,t,"#777")},getColorSetsBySubjectColors=function(e,t,n,r){void 0===t&&(t="#fff"),void 0===n&&(n="default");var i=[];return e.forEach((function(e){i.push(getColorsWithSubjectColor(e,t,n))})),i};const ColorUtil=Object.freeze(Object.defineProperty({__proto__:null,mixColor:mixColor,getColorsWithSubjectColor:getColorsWithSubjectColor,getColorSetsBySubjectColors:getColorSetsBySubjectColors},Symbol.toStringTag,{value:"Module"}));var subjectColor="rgb(95, 149, 255)",backColor="rgb(255, 255, 255)",textColor="rgb(0, 0, 0)",colorSet=getColorsWithSubjectColor(subjectColor,backColor);const Global={version:"0.8.2",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:colorSet.mainStroke,fill:colorSet.mainFill},size:20,color:colorSet.mainStroke,linkPoints:{size:8,lineWidth:1,fill:colorSet.activeFill,stroke:colorSet.activeStroke}},nodeStateStyles:{active:{fill:colorSet.activeFill,stroke:colorSet.activeStroke,lineWidth:2,shadowColor:colorSet.mainStroke,shadowBlur:10},selected:{fill:colorSet.selectedFill,stroke:colorSet.selectedStroke,lineWidth:4,shadowColor:colorSet.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:colorSet.highlightFill,stroke:colorSet.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:colorSet.inactiveFill,stroke:colorSet.inactiveStroke,lineWidth:1},disable:{fill:colorSet.disableFill,stroke:colorSet.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:textColor,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:colorSet.edgeMainStroke,lineAppendWidth:2},color:colorSet.edgeMainStroke},edgeStateStyles:{active:{stroke:colorSet.edgeActiveStroke,lineWidth:1},selected:{stroke:colorSet.edgeSelectedStroke,lineWidth:2,shadowColor:colorSet.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet.edgeInactiveStroke,lineWidth:1},disable:{stroke:colorSet.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:textColor,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:colorSet.comboMainFill,lineWidth:1,stroke:colorSet.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:colorSet.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:colorSet.comboActiveStroke,lineWidth:1,fill:colorSet.comboActiveFill},selected:{stroke:colorSet.comboSelectedStroke,lineWidth:2,fill:colorSet.comboSelectedFill,shadowColor:colorSet.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:colorSet.comboHighlightStroke,lineWidth:2,fill:colorSet.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:colorSet.comboInactiveStroke,fill:colorSet.comboInactiveFill,lineWidth:1},disable:{stroke:colorSet.comboDisableStroke,fill:colorSet.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function addEventListener(e,t,n){if(e){if("function"==typeof e.addEventListener)return e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}};if("function"==typeof e.attachEvent)return e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}}}var TABLE,TABLE_TR,FRAGMENT_REG,CONTAINERS;function initConstants(){TABLE=document.createElement("table"),TABLE_TR=document.createElement("tr"),FRAGMENT_REG=/^\s*<(\w+|!)[^>]*>/,CONTAINERS={tr:document.createElement("tbody"),tbody:TABLE,thead:TABLE,tfoot:TABLE,td:TABLE_TR,th:TABLE_TR,"*":document.createElement("div")}}function createDom(e){TABLE||initConstants();var t=FRAGMENT_REG.test(e)&&RegExp.$1;t&&t in CONTAINERS||(t="*");var n=CONTAINERS[t];e="string"==typeof e?e.replace(/(^\s*)|(\s*$)/g,""):e,n.innerHTML=""+e;var r=n.childNodes[0];return r&&n.contains(r)&&n.removeChild(r),r}function modifyCSS(e,t){if(e)for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n]);return e}var cloneEvent$1=Util.cloneEvent,isViewportChanged=Util.isViewportChanged,EventController=function(e){function t(t){var n=e.call(this,t)||this;return n.extendEvents=[],n.dragging=!1,n.mousedown=!1,n.preItem=null,n.destroy(),n.graph=t,n.destroyed=!1,n.initEvents(),n}return __extends$x(t,e),t.prototype.initEvents=function(){var e=this.graph,t=this.extendEvents,n=void 0===t?[]:t,r=e.get("canvas"),i=r.get("el"),o=wrapBehavior(this,"onCanvasEvents"),a=wrapBehavior(this,"onExtendEvents"),s=wrapBehavior(this,"onWheelEvent");r.off("*").on("*",o),this.canvasHandler=o,n.push(addEventListener(i,"wheel",s)),"undefined"!=typeof window&&(n.push(addEventListener(window,"keydown",a)),n.push(addEventListener(window,"keyup",a)),n.push(addEventListener(window,"focus",a))),this.resetHandler&&e.off("afterchangedata",this.resetHandler),this.resetHandler=wrapBehavior(this,"resetStatus"),e.on("afterchangedata",this.resetHandler)},t.getItemRoot=function(e){for(;e&&!e.get("item");)e=e.get("parent");return e},t.prototype.onCanvasEvents=function(e){var n=this,r=this.graph,i=r.get("canvas"),o=e.target,a=e.type;switch(a){case"drag":this.onCanvasEvents(Object.assign({},e,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},e,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout((function(){return n.mousedown=!1}));break;case"click":if(!this.mousedown)return}e.canvasX=e.x,e.canvasY=e.y;var s={x:e.canvasX,y:e.canvasY},l=r.get("group").getMatrix();if(l||(l=[1,0,0,0,1,0,0,0,1]),isViewportChanged(l)&&(s=r.getPointByClient(e.clientX,e.clientY)),e.x=s.x,e.y=s.y,e.currentTarget=r,o===i)return"mousemove"!==a&&"mouseleave"!==a||this.handleMouseMove(e,"canvas"),e.target=i,e.item=null,r.emit(a,e),void r.emit("canvas:".concat(a),e);var c=t.getItemRoot(o);if(c){var u=c.get("item");if(!u.destroyed){var h=u.getType();if(e.target=o,e.item=u,e.canvasX===e.x&&e.canvasY===e.y){var d=r.getCanvasByPoint(e.x,e.y);e.canvasX=d.x,e.canvasY=d.y}e.name&&!e.name.includes(":")?(r.emit("".concat(h,":").concat(a),e),r.emit(a,e)):e.name&&r.emit(e.name,e),"dragstart"===a&&(this.dragging=!0),"dragend"===a&&(this.dragging=!1),"mousemove"===a&&this.handleMouseMove(e,h)}}else r.emit(a,e)},t.prototype.onExtendEvents=function(e){this.graph.emit(e.type,e)},t.prototype.onWheelEvent=function(e){isNil(e.wheelDelta)&&(e.wheelDelta=-e.detail),this.graph.emit("wheel",e)},t.prototype.handleMouseMove=function(e,t){var n=this.graph,r=this.preItem,i=n.get("canvas"),o=e.target===i?null:e.item;e=cloneEvent$1(e),r&&r!==o&&!r.destroyed&&(e.item=r,this.emitCustomEvent(r.getType(),"mouseleave",e),this.dragging&&this.emitCustomEvent(r.getType(),"dragleave",e)),o&&r!==o&&(e.item=o,this.emitCustomEvent(t,"mouseenter",e),this.dragging&&this.emitCustomEvent(t,"dragenter",e)),this.preItem=o},t.prototype.emitCustomEvent=function(e,t,n){n.type=t,this.graph.emit("".concat(e,":").concat(t),n)},t.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},t.prototype.destroy=function(){var e=this,t=e.graph,n=e.canvasHandler,r=e.extendEvents;t.get("canvas").off("*",n),each(r,(function(e){e.remove()})),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},t}(EventController$1),lib={},registy={},base$1={};Object.defineProperty(base$1,"__esModule",{value:!0}),base$1.Base=void 0;var Base=function(){function e(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return e.prototype.layout=function(e){return this.init(e),this.execute(!0)},e.prototype.init=function(e){this.nodes=e.nodes||[],this.edges=e.edges||[],this.combos=e.combos||[],this.comboEdges=e.comboEdges||[],this.hiddenNodes=e.hiddenNodes||[],this.hiddenEdges=e.hiddenEdges||[],this.hiddenCombos=e.hiddenCombos||[],this.vedges=e.vedges||[]},e.prototype.execute=function(e){},e.prototype.executeWithWorker=function(){},e.prototype.getDefaultCfg=function(){return{}},e.prototype.updateCfg=function(e){e&&Object.assign(this,e)},e.prototype.getType=function(){return"base"},e.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},e}();base$1.Base=Base;var util$2={},string={};Object.defineProperty(string,"__esModule",{value:!0}),string.camelize=string.isString=void 0;var isString=function(e){return"string"==typeof e};string.isString=isString;var cacheStringFunction=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}},camelizeRE=/-(\w)/g;string.camelize=cacheStringFunction((function(e){return e.replace(camelizeRE,(function(e,t){return t?t.toUpperCase():""}))}));var array={};Object.defineProperty(array,"__esModule",{value:!0}),array.isArray=void 0,array.isArray=Array.isArray;var number={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.toNumber=e.isNaN=e.isNumber=void 0;e.isNumber=function(e){return"number"==typeof e};e.isNaN=function(e){return Number.isNaN(Number(e))};e.toNumber=function(t){var n=parseFloat(t);return(0,e.isNaN)(n)?t:n}}(number);var math={},object={};!function(e){var t=commonjsGlobal&&commonjsGlobal.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.clone=e.isObject=void 0;e.isObject=function(e){return null!==e&&"object"==typeof e};e.clone=function(n){if(null===n)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){var r=[];return n.forEach((function(e){r.push(e)})),r.map((function(t){return(0,e.clone)(t)}))}if("object"==typeof n&&Object.keys(n).length){var i=t({},n);return Object.keys(i).forEach((function(t){i[t]=(0,e.clone)(i[t])})),i}return n}}(object),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getCoreNodeAndRelativeLeafNodes=e.getAvgNodePosition=e.findMinMaxNodeXY=e.traverseTreeUp=e.scaleMatrix=e.getAdjMatrix=e.floydWarshall=e.getDegreeMap=e.getDegree=e.getEdgeTerminal=void 0;var t=object;e.getEdgeTerminal=function(e,n){var r=e[n];return(0,t.isObject)(r)?r.cell:r};e.getDegree=function(t,n,r){for(var i=[],o=0;o<t;o++)i[o]={in:0,out:0,all:0};return r?(r.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),o=(0,e.getEdgeTerminal)(t,"target");r&&i[n[r]]&&(i[n[r]].out+=1,i[n[r]].all+=1),o&&i[n[o]]&&(i[n[o]].in+=1,i[n[o]].all+=1)})),i):i};e.getDegreeMap=function(t,n){var r={};return t.forEach((function(e){r[e.id]={in:0,out:0,all:0}})),n?(n.forEach((function(t){var n=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target");n&&(r[n].out+=1,r[n].all+=1),i&&(r[i].in+=1,r[i].all+=1)})),r):r};e.floydWarshall=function(e){for(var t=[],n=e.length,r=0;r<n;r+=1){t[r]=[];for(var i=0;i<n;i+=1)r===i?t[r][i]=0:0!==e[r][i]&&e[r][i]?t[r][i]=e[r][i]:t[r][i]=1/0}for(var o=0;o<n;o+=1)for(r=0;r<n;r+=1)for(i=0;i<n;i+=1)t[r][i]>t[r][o]+t[o][i]&&(t[r][i]=t[r][o]+t[o][i]);return t};e.getAdjMatrix=function(t,n){var r=t.nodes,i=t.edges,o=[],a={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(e,t){a[e.id]=t;o.push([])})),null==i||i.forEach((function(t){var r=(0,e.getEdgeTerminal)(t,"source"),i=(0,e.getEdgeTerminal)(t,"target"),s=a[r],l=a[i];void 0!==s&&void 0!==l&&(o[s][l]=1,n||(o[l][s]=1))})),o};e.scaleMatrix=function(e,t){var n=[];return e.forEach((function(e){var r=[];e.forEach((function(e){r.push(e*t)})),n.push(r)})),n};var n=function(e,t){if(e&&e.children)for(var r=e.children.length-1;r>=0;r--)if(!n(e.children[r],t))return;return!!t(e)};e.traverseTreeUp=function(e,t){"function"==typeof t&&n(e,t)};e.findMinMaxNodeXY=function(e){var t=1/0,n=1/0,r=-1/0,i=-1/0;return e.forEach((function(e){t>e.x&&(t=e.x),n>e.y&&(n=e.y),r<e.x&&(r=e.x),i<e.y&&(i=e.y)})),{minX:t,minY:n,maxX:r,maxY:i}};e.getAvgNodePosition=function(e){var t={x:0,y:0};e.forEach((function(e){t.x+=e.x||0,t.y+=e.y||0}));var n=e.length||1;return{x:t.x/n,y:t.y/n}};var r=function(e,t,n){var r,i;return"source"===e?(null===(r=null==n?void 0:n.find((function(e){return e.target===t.id})))||void 0===r?void 0:r.source)||{}:(null===(i=null==n?void 0:n.find((function(e){return e.source===t.id})))||void 0===i?void 0:i.target)||{}},i=function(e,t,n){var r=[];switch(e){case"source":r=null==n?void 0:n.filter((function(e){return e.source===t.id})).map((function(e){return e.target}));break;case"target":r=null==n?void 0:n.filter((function(e){return e.target===t.id})).map((function(e){return e.source}));break;case"both":r=null==n?void 0:n.filter((function(e){return e.source===t.id})).map((function(e){return e.target})).concat(null==n?void 0:n.filter((function(e){return e.target===t.id})).map((function(e){return e.source})))}var i=new Set(r);return Array.from(i)};e.getCoreNodeAndRelativeLeafNodes=function(e,t,n,o,a,s){var l=a[t.id],c=l.in,u=l.out,h=t,d=[];0===c?(h=r("source",t,n),d=i("both",h,n).map((function(e){return s[e]}))):0===u&&(h=r("target",t,n),d=i("both",h,n).map((function(e){return s[e]})));var f=function(e,t,n,r,i){var o=n[t]||"",a=(null==r?void 0:r.filter((function(e){return e[t]===o})))||[];return"leaf"===e&&(a=a.filter((function(e){var t,n;return 0===(null===(t=i[e.id])||void 0===t?void 0:t.in)||0===(null===(n=i[e.id])||void 0===n?void 0:n.out)}))),a}(e,o,t,d=d.filter((function(e){return a[e.id]&&(0===a[e.id].in||0===a[e.id].out)})),a);return{coreNode:h,relativeLeafNodes:d,sameTypeLeafNodes:f}}}(math);var _function={},hasRequired_function,hasRequiredUtil;function require_function(){return hasRequired_function||(hasRequired_function=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getFuncByUnknownType=e.getFunc=e.isFunction=void 0;var t=requireUtil(),n=number;e.isFunction=function(e){return"function"==typeof e};e.getFunc=function(e,t,r){return r||((0,n.isNumber)(e)?function(){return e}:function(){return t})};e.getFuncByUnknownType=function(r,i,o){return void 0===o&&(o=!0),i||0===i?(0,e.isFunction)(i)?i:(0,n.isNumber)(i)?function(){return i}:(0,t.isArray)(i)?function(){if(o){var e=Math.max.apply(Math,i);return isNaN(e)?r:e}return i}:(0,t.isObject)(i)?function(){if(o){var e=Math.max(i.width,i.height);return isNaN(e)?r:e}return[i.width,i.height]}:function(){return r}:function(e){return e.size?(0,t.isArray)(e.size)?e.size[0]>e.size[1]?e.size[0]:e.size[1]:(0,t.isObject)(e.size)?e.size.width>e.size.height?e.size.width:e.size.height:e.size:r}}}(_function)),_function}function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,e=util$2,t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(string,e),n(array,e),n(number,e),n(math,e),n(object,e),n(require_function(),e)),util$2;var e,t,n}var __extends$w=commonjsGlobal&&commonjsGlobal.__extends||(extendStatics2=function(e,t){return(extendStatics2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}extendStatics2(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),extendStatics2;Object.defineProperty(registy,"__esModule",{value:!0}),registy.getLayoutByName=registy.unRegisterLayout=registy.registerLayout=void 0;var base_1$h=base$1,util_1$r=requireUtil(),map$1=new Map,registerLayout$1=function(e,t){if(map$1.get(e),(0,util_1$r.isObject)(t)){var n=function(e){function n(n){var r=e.call(this)||this,i=r,o={},a=i.getDefaultCfg();return Object.assign(o,a,t,n),Object.keys(o).forEach((function(e){var t=o[e];i[e]=t})),r}return __extends$w(n,e),n}(base_1$h.Base);map$1.set(e,n)}else map$1.set(e,t);return map$1.get(e)};registy.registerLayout=registerLayout$1;var unRegisterLayout=function(e){map$1.has(e)&&map$1.delete(e)};registy.unRegisterLayout=unRegisterLayout;var getLayoutByName=function(e){return map$1.has(e)?map$1.get(e):null};registy.getLayoutByName=getLayoutByName;var layout$7={},grid$1={},__extends$v=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(grid$1,"__esModule",{value:!0}),grid$1.GridLayout=void 0;var util_1$q=requireUtil(),base_1$g=base$1,GridLayout=function(e){function t(t){var n=e.call(this)||this;return n.begin=[0,0],n.preventOverlap=!0,n.preventOverlapPadding=10,n.condense=!1,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.row=0,n.col=0,n.cellWidth=0,n.cellHeight=0,n.cellUsed={},n.id2manPos={},n.onLayoutEnd=function(){},n.updateCfg(t),n}return __extends$v(t,e),t.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges,r=e.begin,i=t.length;if(0===i)return e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n};if(1===i)return t[0].x=r[0],t[0].y=r[1],e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n};var o=e.sortBy,a=e.width,s=e.height,l=e.condense,c=e.preventOverlapPadding,u=e.preventOverlap,h=e.nodeSpacing,d=e.nodeSize,f=[];t.forEach((function(e){f.push(e)}));var p={};if(f.forEach((function(e,t){p[e.id]=t})),("degree"===o||!(0,util_1$q.isString)(o)||void 0===f[0][o])&&(o="degree",(0,util_1$q.isNaN)(t[0].degree))){var g=(0,util_1$q.getDegree)(f.length,p,n);f.forEach((function(e,t){e.degree=g[t].all}))}f.sort((function(e,t){return t[o]-e[o]})),a||"undefined"==typeof window||(a=window.innerWidth),s||"undefined"==typeof window||(s=window.innerHeight);var m=e.rows,v=null!=e.cols?e.cols:e.columns;if(e.cells=i,null!=m&&null!=v?(e.rows=m,e.cols=v):null!=m&&null==v?(e.rows=m,e.cols=Math.ceil(e.cells/e.rows)):null==m&&null!=v?(e.cols=v,e.rows=Math.ceil(e.cells/e.cols)):(e.splits=Math.sqrt(e.cells*e.height/e.width),e.rows=Math.round(e.splits),e.cols=Math.round(e.width/e.height*e.splits)),e.rows=Math.max(e.rows,1),e.cols=Math.max(e.cols,1),e.cols*e.rows>e.cells)((b=e.small())-1)*(y=e.large())>=e.cells?e.small(b-1):(y-1)*b>=e.cells&&e.large(y-1);else for(;e.cols*e.rows<e.cells;){var y,b=e.small();((y=e.large())+1)*b>=e.cells?e.large(y+1):e.small(b+1)}if(e.cellWidth=a/e.cols,e.cellHeight=s/e.rows,l&&(e.cellWidth=0,e.cellHeight=0),u||h){var x=(0,util_1$q.getFuncByUnknownType)(10,h),w=(0,util_1$q.getFuncByUnknownType)(30,d,!1);f.forEach((function(t){t.x&&t.y||(t.x=0,t.y=0);var n,r,i=w(t)||30;(0,util_1$q.isArray)(i)?(n=i[0],r=i[1]):(n=i,r=i);var o=void 0!==x?x(t):c,a=n+o,s=r+o;e.cellWidth=Math.max(e.cellWidth,a),e.cellHeight=Math.max(e.cellHeight,s)}))}e.cellUsed={},e.row=0,e.col=0,e.id2manPos={};for(var _=0;_<f.length;_++){var C=f[_],$=void 0;if(e.position&&($=e.position(C)),$&&(void 0!==$.row||void 0!==$.col)){var S={row:$.row,col:$.col};if(void 0===S.col)for(S.col=0;e.used(S.row,S.col);)S.col++;else if(void 0===S.row)for(S.row=0;e.used(S.row,S.col);)S.row++;e.id2manPos[C.id]=S,e.use(S.row,S.col)}e.getPos(C)}return e.onLayoutEnd&&e.onLayoutEnd(),{edges:n,nodes:f}},t.prototype.small=function(e){var t,n=this,r=n.rows||5,i=n.cols||5;null==e?t=Math.min(r,i):Math.min(r,i)===n.rows?n.rows=e:n.cols=e;return t},t.prototype.large=function(e){var t,n=this,r=n.rows||5,i=n.cols||5;null==e?t=Math.max(r,i):Math.max(r,i)===n.rows?n.rows=e:n.cols=e;return t},t.prototype.used=function(e,t){return this.cellUsed["c-".concat(e,"-").concat(t)]||!1},t.prototype.use=function(e,t){this.cellUsed["c-".concat(e,"-").concat(t)]=!0},t.prototype.moveToNextCell=function(){var e=this,t=e.cols||5;e.col++,e.col>=t&&(e.col=0,e.row++)},t.prototype.getPos=function(e){var t,n,r=this,i=r.begin,o=r.cellWidth,a=r.cellHeight,s=r.id2manPos[e.id];if(s)t=s.col*o+o/2+i[0],n=s.row*a+a/2+i[1];else{for(;r.used(r.row,r.col);)r.moveToNextCell();t=r.col*o+o/2+i[0],n=r.row*a+a/2+i[1],r.use(r.row,r.col),r.moveToNextCell()}e.x=t,e.y=n},t.prototype.getType=function(){return"grid"},t}(base_1$g.Base);grid$1.GridLayout=GridLayout;var random={},__extends$u=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(random,"__esModule",{value:!0}),random.RandomLayout=void 0;var base_1$f=base$1,RandomLayout=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return __extends$u(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;return e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),t&&t.forEach((function(t){t.x=.9*(Math.random()-.5)*e.width+n[0],t.y=.9*(Math.random()-.5)*e.height+n[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:this.edges}},t.prototype.getType=function(){return"random"},t}(base_1$f.Base);random.RandomLayout=RandomLayout;var gForce$1={},__extends$t=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(gForce$1,"__esModule",{value:!0}),gForce$1.GForceLayout=void 0;var base_1$e=base$1,util_1$p=requireUtil(),proccessToFunc$3=function(e,t){return e?(0,util_1$p.isNumber)(e)?function(t){return e}:e:function(e){return t||1}},GForceLayout=function(e){function t(t){var n=e.call(this)||this;return n.maxIteration=500,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.preventOverlap=!0,n.collideStrength=1,n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.animate=!0,n.updateCfg(t),n}return __extends$t(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},t.prototype.execute=function(){var e,t,n=this,r=n.nodes;if(void 0!==n.timeInterval&&"undefined"!=typeof window&&window.clearInterval(n.timeInterval),r&&0!==r.length){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var i=n.center;if(1===r.length)return r[0].x=i[0],r[0].y=i[1],void(null===(t=n.onLayoutEnd)||void 0===t||t.call(n));var o={},a={};r.forEach((function(e,t){(0,util_1$p.isNumber)(e.x)||(e.x=Math.random()*n.width),(0,util_1$p.isNumber)(e.y)||(e.y=Math.random()*n.height),o[e.id]=e,a[e.id]=t})),n.nodeMap=o,n.nodeIdxMap=a,n.linkDistance=proccessToFunc$3(n.linkDistance,1),n.nodeStrength=proccessToFunc$3(n.nodeStrength,1),n.edgeStrength=proccessToFunc$3(n.edgeStrength,1);var s,l=n.nodeSize;if(n.preventOverlap){var c,u=n.nodeSpacing;c=(0,util_1$p.isNumber)(u)?function(){return u}:(0,util_1$p.isFunction)(u)?u:function(){return 0},s=l?(0,util_1$p.isArray)(l)?function(e){return Math.max(l[0],l[1])+c(e)}:function(e){return l+c(e)}:function(e){return e.size?(0,util_1$p.isArray)(e.size)?Math.max(e.size[0],e.size[1])+c(e):(0,util_1$p.isObject)(e.size)?Math.max(e.size.width,e.size.height)+c(e):e.size+c(e):10+c(e)}}n.nodeSize=s;var h=n.edges;n.degrees=(0,util_1$p.getDegree)(r.length,n.nodeIdxMap,h),n.getMass||(n.getMass=function(e){return e.mass||n.degrees[n.nodeIdxMap[e.id]].all||1}),n.run()}else null===(e=n.onLayoutEnd)||void 0===e||e.call(n)},t.prototype.run=function(){var e,t=this,n=t.maxIteration,r=t.nodes,i=t.workerEnabled,o=t.minMovement,a=t.animate;if(r)if(i||!a){for(var s=0;s<n;s++){var l=t.runOneStep(s);if(t.reachMoveThreshold(r,l,o))break}null===(e=t.onLayoutEnd)||void 0===e||e.call(t)}else{if("undefined"==typeof window)return;var c=0;this.timeInterval=window.setInterval((function(){var e,i;if(r){var a=t.runOneStep(c)||[];t.reachMoveThreshold(r,a,o)&&(null===(e=t.onLayoutEnd)||void 0===e||e.call(t),window.clearInterval(t.timeInterval)),++c>=n&&(null===(i=t.onLayoutEnd)||void 0===i||i.call(t),window.clearInterval(t.timeInterval))}}),0)}},t.prototype.reachMoveThreshold=function(e,t,n){var r=0;return e.forEach((function(e,n){var i=e.x-t[n].x,o=e.y-t[n].y;r+=Math.sqrt(i*i+o*o)})),(r/=e.length)<n},t.prototype.runOneStep=function(e){var t,n=this,r=n.nodes,i=n.edges,o=[],a=[];if(r){r.forEach((function(e,t){o[2*t]=0,o[2*t+1]=0,a[2*t]=0,a[2*t+1]=0})),n.calRepulsive(o,r),i&&n.calAttractive(o,i),n.calGravity(o,r);var s=Math.max(.02,n.interval-.002*e);n.updateVelocity(o,a,s,r);var l=[];return r.forEach((function(e){l.push({x:e.x,y:e.y})})),n.updatePosition(a,s,r),null===(t=n.tick)||void 0===t||t.call(n),l}},t.prototype.calRepulsive=function(e,t){var n=this,r=n.getMass,i=n.factor,o=n.coulombDisScale,a=n.preventOverlap,s=n.collideStrength,l=void 0===s?1:s,c=n.nodeStrength,u=n.nodeSize;t.forEach((function(n,s){var h=r?r(n):1;t.forEach((function(t,d){if(!(s>=d)){var f=n.x-t.x,p=n.y-t.y;0===f&&0===p&&(f=.01*Math.random(),p=.01*Math.random());var g=f*f+p*p,m=Math.sqrt(g),v=(m+.1)*o,y=f/m,b=p/m,x=.5*(c(n)+c(t))*i/(v*v),w=r?r(t):1;if(e[2*s]+=y*x,e[2*s+1]+=b*x,e[2*d]-=y*x,e[2*d+1]-=b*x,a&&(u(n)+u(t))/2>m){var _=l*(c(n)+c(t))*.5/g;e[2*s]+=y*_/h,e[2*s+1]+=b*_/h,e[2*d]-=y*_/w,e[2*d+1]-=b*_/w}}}))}))},t.prototype.calAttractive=function(e,t){var n=this,r=n.nodeMap,i=n.nodeIdxMap,o=n.linkDistance,a=n.edgeStrength,s=n.nodeSize,l=n.getMass;t.forEach((function(t,n){var c=(0,util_1$p.getEdgeTerminal)(t,"source"),u=(0,util_1$p.getEdgeTerminal)(t,"target"),h=r[c],d=r[u],f=d.x-h.x,p=d.y-h.y;0===f&&0===p&&(f=.01*Math.random(),p=.01*Math.random());var g=Math.sqrt(f*f+p*p),m=f/g,v=p/g,y=((o(t,h,d)||1+(s(h)+s(d)||0)/2)-g)*a(t),b=i[c],x=i[u],w=l?l(h):1,_=l?l(d):1;e[2*b]-=m*y/w,e[2*b+1]-=v*y/w,e[2*x]+=m*y/_,e[2*x+1]+=v*y/_}))},t.prototype.calGravity=function(e,t){for(var n=this,r=n.center,i=n.gravity,o=n.degrees,a=t.length,s=0;s<a;s++){var l=t[s],c=l.x-r[0],u=l.y-r[1],h=i;if(n.getCenter){var d=n.getCenter(l,o[s].all);d&&(0,util_1$p.isNumber)(d[0])&&(0,util_1$p.isNumber)(d[1])&&(0,util_1$p.isNumber)(d[2])&&(c=l.x-d[0],u=l.y-d[1],h=d[2])}h&&(e[2*s]-=h*c,e[2*s+1]-=h*u)}},t.prototype.updateVelocity=function(e,t,n,r){var i=this,o=n*i.damping;r.forEach((function(n,r){var a=e[2*r]*o||.01,s=e[2*r+1]*o||.01,l=Math.sqrt(a*a+s*s);if(l>i.maxSpeed){var c=i.maxSpeed/l;a*=c,s*=c}t[2*r]=a,t[2*r+1]=s}))},t.prototype.updatePosition=function(e,t,n){n.forEach((function(n,r){if((0,util_1$p.isNumber)(n.fx)&&(0,util_1$p.isNumber)(n.fy))return n.x=n.fx,void(n.y=n.fy);var i=e[2*r]*t,o=e[2*r+1]*t;n.x+=i,n.y+=o}))},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0},t.prototype.getType=function(){return"gForce"},t}(base_1$e.Base);gForce$1.GForceLayout=GForceLayout;var force2={},ForceNBody={};function tree_add(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return add(this.cover(t,n),t,n,e)}function add(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,l,c,u,h,d,f=e._root,p={data:r},g=e._x0,m=e._y0,v=e._x1,y=e._y1;if(!f)return e._root=p,e;for(;f.length;)if((c=t>=(o=(g+v)/2))?g=o:v=o,(u=n>=(a=(m+y)/2))?m=a:y=a,i=f,!(f=f[h=u<<1|c]))return i[h]=p,e;if(s=+e._x.call(null,f.data),l=+e._y.call(null,f.data),t===s&&n===l)return p.next=f,i?i[h]=p:e._root=p,e;do{i=i?i[h]=new Array(4):e._root=new Array(4),(c=t>=(o=(g+v)/2))?g=o:v=o,(u=n>=(a=(m+y)/2))?m=a:y=a}while((h=u<<1|c)==(d=(l>=a)<<1|s>=o));return i[d]=f,i[h]=p,e}function addAll(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),l=1/0,c=1/0,u=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<l&&(l=r),r>u&&(u=r),i<c&&(c=i),i>h&&(h=i));if(l>u||c>h)return this;for(this.cover(l,c).cover(u,h),n=0;n<o;++n)add(this,a[n],s[n],e[n]);return this}function tree_cover(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,l=i-n||1,c=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=c,c=a,l*=2,s){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function tree_data(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e}function tree_extent(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad$1(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function tree_find(e,t,n){var r,i,o,a,s,l,c,u=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],g=this._root;for(g&&p.push(new Quad$1(g,u,h,d,f)),null==n?n=1/0:(u=e-n,h=t-n,d=e+n,f=t+n,n*=n);l=p.pop();)if(!(!(g=l.node)||(i=l.x0)>d||(o=l.y0)>f||(a=l.x1)<u||(s=l.y1)<h))if(g.length){var m=(i+a)/2,v=(o+s)/2;p.push(new Quad$1(g[3],m,v,a,s),new Quad$1(g[2],i,v,m,s),new Quad$1(g[1],m,o,a,v),new Quad$1(g[0],i,o,m,v)),(c=(t>=v)<<1|e>=m)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=l)}else{var y=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),x=y*y+b*b;if(x<n){var w=Math.sqrt(n=x);u=e-w,h=t-w,d=e+w,f=t+w,r=g.data}}return r}function tree_remove(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,l,c,u,h,d,f=this._root,p=this._x0,g=this._y0,m=this._x1,v=this._y1;if(!f)return this;if(f.length)for(;;){if((c=o>=(s=(p+m)/2))?p=s:m=s,(u=a>=(l=(g+v)/2))?g=l:v=l,t=f,!(f=f[h=u<<1|c]))return this;if(!f.length)break;(t[h+1&3]||t[h+2&3]||t[h+3&3])&&(n=t,d=h)}for(;f.data!==e;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):t?(i?t[h]=i:delete t[h],(f=t[0]||t[1]||t[2]||t[3])&&f===(t[3]||t[2]||t[1]||t[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)}function removeAll(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function tree_root(){return this._root}function tree_size(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e}function tree_visit(e){var t,n,r,i,o,a,s=[],l=this._root;for(l&&s.push(new Quad$1(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&l.length){var c=(r+o)/2,u=(i+a)/2;(n=l[3])&&s.push(new Quad$1(n,c,u,o,a)),(n=l[2])&&s.push(new Quad$1(n,r,u,c,a)),(n=l[1])&&s.push(new Quad$1(n,c,i,o,u)),(n=l[0])&&s.push(new Quad$1(n,r,i,c,u))}return this}function tree_visitAfter(e){var t,n=[],r=[];for(this._root&&n.push(new Quad$1(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,l=t.x1,c=t.y1,u=(a+l)/2,h=(s+c)/2;(o=i[0])&&n.push(new Quad$1(o,a,s,u,h)),(o=i[1])&&n.push(new Quad$1(o,u,s,l,h)),(o=i[2])&&n.push(new Quad$1(o,a,h,u,c)),(o=i[3])&&n.push(new Quad$1(o,u,h,l,c))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this}function defaultX(e){return e[0]}function tree_x(e){return arguments.length?(this._x=e,this):this._x}function defaultY(e){return e[1]}function tree_y(e){return arguments.length?(this._y=e,this):this._y}function quadtree(e,t,n){var r=new Quadtree(null==t?defaultX:t,null==n?defaultY:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function Quadtree(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function leaf_copy(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var e,t,n=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=leaf_copy(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=leaf_copy(t));return n},treeProto.add=tree_add,treeProto.addAll=addAll,treeProto.cover=tree_cover,treeProto.data=tree_data,treeProto.extent=tree_extent,treeProto.find=tree_find,treeProto.remove=tree_remove,treeProto.removeAll=removeAll,treeProto.root=tree_root,treeProto.size=tree_size,treeProto.visit=tree_visit,treeProto.visitAfter=tree_visitAfter,treeProto.x=tree_x,treeProto.y=tree_y;const src$2=Object.freeze(Object.defineProperty({__proto__:null,quadtree:quadtree},Symbol.toStringTag,{value:"Module"})),require$$0$3=getAugmentedNamespace(src$2);Object.defineProperty(ForceNBody,"__esModule",{value:!0}),ForceNBody.forceNBody=void 0;var d3_quadtree_1=require$$0$3,theta2=.81,epsilon=.1;function forceNBody(e,t,n,r,i){var o=n/r,a=e.map((function(e,n){var r=t[e.id],i=r.data,a=r.x,s=r.y,l=r.size,c=i.layout.force.nodeStrength;return{x:a,y:s,size:l,index:n,vx:0,vy:0,weight:o*c}})),s=(0,d3_quadtree_1.quadtree)(a,(function(e){return e.x}),(function(e){return e.y})).visitAfter(accumulate);return a.forEach((function(e){computeForce(e,s)})),a.map((function(n,r){var o=t[e[r].id].data.layout.force.mass,a=void 0===o?1:o;i[2*r]=n.vx/a,i[2*r+1]=n.vy/a})),i}function accumulate(e){var t=0,n=0,r=0;if(e.length){for(var i=0;i<4;i++){(o=e[i])&&o.weight&&(t+=o.weight,n+=o.x*o.weight,r+=o.y*o.weight)}e.x=n/t,e.y=r/t,e.weight=t}else{var o=e;e.x=o.data.x,e.y=o.data.y,e.weight=o.data.weight}}ForceNBody.forceNBody=forceNBody;var apply=function(e,t,n,r,i,o){var a=o.x-e.x||epsilon,s=o.y-e.y||epsilon,l=r-t,c=a*a+s*s,u=Math.sqrt(c)*c;if(l*l*theta2<c){var h=e.weight/u;return o.vx+=a*h,o.vy+=s*h,!0}if(e.length)return!1;if(e.data!==o){h=e.data.weight/u;o.vx+=a*h,o.vy+=s*h}};function computeForce(e,t){t.visit((function(t,n,r,i,o){return apply(t,n,r,i,o,e)}))}var __extends$s=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$g=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$g.apply(this,arguments)};Object.defineProperty(force2,"__esModule",{value:!0}),force2.Force2Layout=void 0;var base_1$d=base$1,util_1$o=requireUtil(),ForceNBody_1=ForceNBody,proccessToFunc$2=function(e,t){return e?(0,util_1$o.isNumber)(e)?function(t){return e}:e:function(e){return t||1}},Force2Layout=function(e){function t(t){var n=e.call(this)||this;n.maxIteration=1e3,n.workerEnabled=!1,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=500,n.minMovement=.4,n.interval=.02,n.factor=1,n.linkDistance=200,n.gravity=0,n.clusterNodeStrength=20,n.preventOverlap=!0,n.distanceThresholdMode="mean",n.tick=function(){},n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.judgingDistance=0,n.centripetalOptions={leaf:2,single:2,others:1,center:function(e){return{x:n.width/2,y:n.height/2}}};var r=t.getMass;return n.propsGetMass=r,n.updateCfg(t),n}return __extends$s(t,e),t.prototype.getCentripetalOptions=function(){var e,t=this,n=t.leafCluster,r=t.clustering,i=t.nodeClusterBy,o=t.nodes,a=t.nodeMap,s=t.clusterNodeStrength,l=function(e){return"function"==typeof s?s(e):s},c={};if(n){e=this.getSameTypeLeafMap()||{};var u=Array.from(new Set(null==o?void 0:o.map((function(e){return e[i]}))))||[];c={single:100,leaf:function(t,n,r){var i=e[t.id]||{},o=i.relativeLeafNodes,a=i.sameTypeLeafNodes;return(null==a?void 0:a.length)===(null==o?void 0:o.length)||1===(null==u?void 0:u.length)?1:l(t)},others:1,center:function(t,n,r){var i,o,a=((null===(i=t.data)||void 0===i?void 0:i.layout)||{}).degree;if(!a)return{x:100,y:100};if(1===a){var s=(e[t.id]||{}).sameTypeLeafNodes,l=void 0===s?[]:s;1===l.length?o=void 0:l.length>1&&(o=(0,util_1$o.getAvgNodePosition)(l))}else o=void 0;return{x:null==o?void 0:o.x,y:null==o?void 0:o.y}}}}if(r){e||(e=this.getSameTypeLeafMap());var h=Array.from(new Set(o.map((function(e,t){return e[i]})))).filter((function(e){return void 0!==e})),d={};h.forEach((function(e){var t=o.filter((function(t){return t[i]===e})).map((function(e){return a[e.id]}));d[e]=(0,util_1$o.getAvgNodePosition)(t)})),c={single:function(e){return l(e)},leaf:function(e){return l(e)},others:function(e){return l(e)},center:function(e,t,n){var r=d[e[i]];return{x:null==r?void 0:r.x,y:null==r?void 0:r.y}}}}this.centripetalOptions=__assign$g(__assign$g({},this.centripetalOptions),c);var f=this.centripetalOptions,p=f.leaf,g=f.single,m=f.others;p&&"function"!=typeof p&&(this.centripetalOptions.leaf=function(){return p}),g&&"function"!=typeof g&&(this.centripetalOptions.single=function(){return g}),m&&"function"!=typeof m&&(this.centripetalOptions.others=function(){return m})},t.prototype.updateCfg=function(e){e&&Object.assign(this,e)},t.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},t.prototype.execute=function(){var e=this;e.stop();var t=e.nodes,n=e.edges,r=e.defSpringLen;if(e.judgingDistance=0,t&&0!==t.length){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var i=e.center;if(1===t.length)return t[0].x=i[0],t[0].y=i[1],void e.onLayoutEnd([__assign$g({},t[0])]);e.degreesMap=(0,util_1$o.getDegreeMap)(t,n),e.propsGetMass?e.getMass=e.propsGetMass:e.getMass=function(t){var n=1;(0,util_1$o.isNumber)(t.mass)&&(n=t.mass);var r=e.degreesMap[t.id].all;return!r||r<5?n:5*r*n};var o,a=e.nodeSize;if(e.preventOverlap){var s,l=e.nodeSpacing;s=(0,util_1$o.isNumber)(l)?function(){return l}:(0,util_1$o.isFunction)(l)?l:function(){return 0},o=a?(0,util_1$o.isArray)(a)?function(e){return Math.max(a[0],a[1])+s(e)}:function(e){return a+s(e)}:function(e){return e.size?(0,util_1$o.isArray)(e.size)?Math.max(e.size[0],e.size[1])+s(e):(0,util_1$o.isObject)(e.size)?Math.max(e.size.width,e.size.height)+s(e):e.size+s(e):10+s(e)}}e.nodeSize=o,e.linkDistance=proccessToFunc$2(e.linkDistance,1),e.nodeStrength=proccessToFunc$2(e.nodeStrength,1),e.edgeStrength=proccessToFunc$2(e.edgeStrength,1);var c={},u={};t.forEach((function(t,n){(0,util_1$o.isNumber)(t.x)||(t.x=Math.random()*e.width),(0,util_1$o.isNumber)(t.y)||(t.y=Math.random()*e.height);var r=e.degreesMap[t.id];c[t.id]=__assign$g(__assign$g({},t),{data:__assign$g(__assign$g({},t.data),{size:e.nodeSize(t)||30,layout:{inDegree:r.in,outDegree:r.out,degree:r.all,tDegree:r.in,sDegree:r.out,force:{mass:e.getMass(t),nodeStrength:e.nodeStrength(t)}}})}),u[t.id]=n})),e.nodeMap=c,e.nodeIdxMap=u,e.edgeInfos=[],null==n||n.forEach((function(t){var n=c[t.source],i=c[t.target];n&&i?e.edgeInfos.push({edgeStrength:e.edgeStrength(t),linkDistance:r?r(__assign$g(__assign$g({},t),{source:n,target:i}),n,i):e.linkDistance(t,n,i)||1+(a(n)+a(n)||0)/2}):elf.edgeInfos.push({})})),this.getCentripetalOptions(),e.onLayoutEnd=e.onLayoutEnd||function(){},e.run()}else e.onLayoutEnd([])},t.prototype.run=function(){var e=this,t=e.maxIteration,n=e.nodes,r=e.workerEnabled,i=e.minMovement,o=e.animate,a=e.nodeMap;if(n){var s=[];n.forEach((function(e,t){s[2*t]=0,s[2*t+1]=0}));var l=t;if(r||!o){for(var c=0;(e.judgingDistance>i||c<1)&&c<l;c++)e.runOneStep(c,s);e.onLayoutEnd(Object.values(a))}else{if("undefined"==typeof window)return;var u=0;this.timeInterval=window.setInterval((function(){n&&(e.runOneStep(u,s),(++u>=l||e.judgingDistance<i)&&(e.onLayoutEnd(Object.values(a)),window.clearInterval(e.timeInterval)))}),0)}}},t.prototype.runOneStep=function(e,t){var n,r=this,i=r.nodes,o=r.edges;r.nodeMap;var a=r.monitor,s=[];if(null==i?void 0:i.length){r.calRepulsive(s),o&&r.calAttractive(s),r.calGravity(s);var l=r.interval;if(r.updateVelocity(s,t,l),r.updatePosition(t,l),null===(n=r.tick)||void 0===n||n.call(r),a)a({energy:this.calTotalEnergy(s),nodes:i,edges:o,iterations:e})}},t.prototype.calTotalEnergy=function(e){var t=this.nodes,n=this.nodeMap;if(!(null==t?void 0:t.length))return 0;var r=0;return t.forEach((function(t,i){var o=e[2*i],a=e[2*i+1],s=o*o+a*a,l=n[t.id].data.layout.force.mass;r+=(void 0===l?1:l)*s*.5})),r},t.prototype.calRepulsive=function(e){var t=this,n=t.nodes,r=t.nodeMap,i=t.factor,o=t.coulombDisScale;t.nodeSize,(0,ForceNBody_1.forceNBody)(n,r,i,o*o,e)},t.prototype.calAttractive=function(e){var t=this,n=t.edges,r=t.nodeMap,i=t.nodeIdxMap,o=t.edgeInfos;t.nodeSize,n.forEach((function(t,n){var a=(0,util_1$o.getEdgeTerminal)(t,"source"),s=(0,util_1$o.getEdgeTerminal)(t,"target"),l=r[a],c=r[s];if(l&&c){var u=c.x-l.x,h=c.y-l.y;u||h||(u=.01*Math.random(),h=.01*Math.random());var d=Math.sqrt(u*u+h*h),f=u/d,p=h/d,g=o[n]||{},m=g.linkDistance,v=void 0===m?200:m,y=g.edgeStrength,b=(v-d)*(void 0===y?200:y),x=1/(l.data.layout.force.mass||1),w=1/(c.data.layout.force.mass||1),_=f*b,C=p*b,$=2*i[a],S=2*i[s];e[$]-=_*x,e[$+1]-=C*x,e[S]+=_*w,e[S+1]+=C*w}}))},t.prototype.calGravity=function(e){var t,n=this,r=n.nodes,i=n.edges,o=void 0===i?[]:i,a=n.nodeMap,s=n.width,l=n.height,c=n.center,u=n.gravity,h=n.degreesMap,d=n.centripetalOptions;if(r)for(var f=r.length,p=0;p<f;p++){var g=2*p,m=a[r[p].id],v=m.data.layout.force.mass,y=void 0===v?1:v,b=0,x=0,w=u,_=h[m.id],C=_.in,$=_.out,S=_.all,E=null===(t=n.getCenter)||void 0===t?void 0:t.call(n,m,S);if(E){var A=E[0],M=E[1],k=E[2];b=m.x-A,x=m.y-M,w=k}else b=m.x-c[0],x=m.y-c[1];if(w&&(e[g]-=w*b/y,e[g+1]-=w*x/y),d){var T=d.leaf,P=d.single,O=d.others,N=d.center,I=(null==N?void 0:N(m,r,o,s,l))||{x:0,y:0,centerStrength:0},D=I.x,L=I.y,R=I.centerStrength;if(!(0,util_1$o.isNumber)(D)||!(0,util_1$o.isNumber)(L))continue;var B=(m.x-D)/y,j=(m.y-L)/y;if(R&&(e[g]-=R*B,e[g+1]-=R*j),0===S){var F=P(m);if(!F)continue;e[g]-=F*B,e[g+1]-=F*j;continue}if(0===C||0===$){var G=T(m,r,o);if(!G)continue;e[g]-=G*B,e[g+1]-=G*j;continue}var V=O(m);if(!V)continue;e[g]-=V*B,e[g+1]-=V*j}}},t.prototype.updateVelocity=function(e,t,n){var r=this,i=r.nodes,o=r.damping,a=r.maxSpeed;(null==i?void 0:i.length)&&i.forEach((function(r,i){var s=(t[2*i]+e[2*i]*n)*o||.01,l=(t[2*i+1]+e[2*i+1]*n)*o||.01,c=Math.sqrt(s*s+l*l);if(c>a){var u=a/c;s*=u,l*=u}t[2*i]=s,t[2*i+1]=l}))},t.prototype.updatePosition=function(e,t){var n=this,r=n.nodes,i=n.distanceThresholdMode,o=n.nodeMap;if(null==r?void 0:r.length){var a=0;"max"===i?n.judgingDistance=-1/0:"min"===i&&(n.judgingDistance=1/0),r.forEach((function(r,s){var l=o[r.id];if((0,util_1$o.isNumber)(r.fx)&&(0,util_1$o.isNumber)(r.fy))return r.x=r.fx,r.y=r.fy,l.x=r.x,void(l.y=r.y);var c=e[2*s]*t,u=e[2*s+1]*t;r.x+=c,r.y+=u,l.x=r.x,l.y=r.y;var h=Math.sqrt(c*c+u*u);switch(i){case"max":n.judgingDistance<h&&(n.judgingDistance=h);break;case"min":n.judgingDistance>h&&(n.judgingDistance=h);break;default:a+=h}})),i&&"mean"!==i||(n.judgingDistance=a/r.length)}else this.judgingDistance=0},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0},t.prototype.getType=function(){return"force2"},t.prototype.getSameTypeLeafMap=function(){var e=this,t=e.nodeClusterBy,n=e.nodes,r=e.edges,i=e.nodeMap,o=e.degreesMap;if(null==n?void 0:n.length){var a={};return n.forEach((function(e,n){1===o[e.id].all&&(a[e.id]=(0,util_1$o.getCoreNodeAndRelativeLeafNodes)("leaf",e,r,t,o,i))})),a}},t}(base_1$d.Base);force2.Force2Layout=Force2Layout;var force$1={},force={};function center(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,l=0;for(i=0;i<a;++i)s+=(o=n[i]).x,l+=o.y;for(s=(s/a-e)*r,l=(l/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=l}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i}function constant(e){return function(){return e}}function jiggle(e){return 1e-6*(e()-.5)}function x$3(e){return e.x+e.vx}function y$3(e){return e.y+e.vy}function collide(e){var t,n,r,i=1,o=1;function a(){for(var e,a,l,c,u,h,d,f=t.length,p=0;p<o;++p)for(a=quadtree(t,x$3,y$3).visitAfter(s),e=0;e<f;++e)l=t[e],h=n[l.index],d=h*h,c=l.x+l.vx,u=l.y+l.vy,a.visit(g);function g(e,t,n,o,a){var s=e.data,f=e.r,p=h+f;if(!s)return t>c+p||o<c-p||n>u+p||a<u-p;if(s.index>l.index){var g=c-s.x-s.vx,m=u-s.y-s.vy,v=g*g+m*m;v<p*p&&(0===g&&(v+=(g=jiggle(r))*g),0===m&&(v+=(m=jiggle(r))*m),v=(p-(v=Math.sqrt(v)))/v*i,l.vx+=(g*=v)*(p=(f*=f)/(d+f)),l.vy+=(m*=v)*p,s.vx-=g*(p=1-p),s.vy-=m*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function l(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=constant(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,l()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),l(),a):e},a}function index$4(e){return e.index}function find(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function link(e){var t,n,r,i,o,a,s=index$4,l=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},c=constant(30),u=1;function h(r){for(var i=0,s=e.length;i<u;++i)for(var l,c,h,d,f,p,g,m=0;m<s;++m)c=(l=e[m]).source,d=(h=l.target).x+h.vx-c.x-c.vx||jiggle(a),f=h.y+h.vy-c.y-c.vy||jiggle(a),d*=p=((p=Math.sqrt(d*d+f*f))-n[m])/p*r*t[m],f*=p,h.vx-=d*(g=o[m]),h.vy-=f*g,c.vx+=d*(g=1-g),c.vy+=f*g}function d(){if(r){var a,l,c=r.length,u=e.length,h=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(c);a<u;++a)(l=e[a]).index=a,"object"!=typeof l.source&&(l.source=find(h,l.source)),"object"!=typeof l.target&&(l.target=find(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(a=0,o=new Array(u);a<u;++a)l=e[a],o[a]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);t=new Array(u),f(),n=new Array(u),p()}}function f(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+l(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+c(e[t],t,e)}return null==e&&(e=[]),h.initialize=function(e,t){r=e,a=t,d()},h.links=function(t){return arguments.length?(e=t,d(),h):e},h.id=function(e){return arguments.length?(s=e,h):s},h.iterations=function(e){return arguments.length?(u=+e,h):u},h.strength=function(e){return arguments.length?(l="function"==typeof e?e:constant(+e),f(),h):l},h.distance=function(e){return arguments.length?(c="function"==typeof e?e:constant(+e),p(),h):c},h}var noop={value:()=>{}};function dispatch(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new Dispatch(r)}function Dispatch(e){this._=e}function parseTypenames(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function get(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function set(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=noop,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(e,t){var n,r=this._,i=parseTypenames(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=set(r[n],e.name,t);else if(null==t)for(n in r)r[n]=set(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=get(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Dispatch(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock="object"==typeof performance&&performance.now?performance:Date,setFrame="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}function timer(e,t,n){var r=new Timer;return r.restart(e,t,n),r}function timerFlush(){now(),++frame;for(var e,t=taskHead;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var e=clock.now(),t=e-clockLast;t>pokeDelay&&(clockSkew-=t,clockLast=e)}function nap(){for(var e,t,n=taskHead,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:taskHead=t);taskTail=e,sleep(r)}function sleep(e){frame||(timeout&&(timeout=clearTimeout(timeout)),e-clockNow>24?(e<1/0&&(timeout=setTimeout(wake,e-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake)))}Timer.prototype=timer.prototype={constructor:Timer,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?now():+n)+(null==t?0:+t),this._next||taskTail===this||(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=e,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};const a$1=1664525,c$1=1013904223,m$1=4294967296;function lcg(){let e=1;return()=>(e=(a$1*e+c$1)%m$1)/m$1}function x$2(e){return e.x}function y$2(e){return e.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=timer(h),c=dispatch("tick","end"),u=lcg();function h(){d(),c.call("tick",t),n<r&&(l.stop(),c.call("end",t))}function d(r){var l,c,u=e.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),l=0;l<u;++l)null==(c=e[l]).fx?c.x+=c.vx*=a:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=a:(c.y=c.fy,c.vy=0);return t}function f(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=initialRadius*Math.sqrt(.5+n),o=n*initialAngle;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,u),t}return null==e&&(e=[]),f(),t={tick:d,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(n){return arguments.length?(e=n,f(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(u=e,s.forEach(p),t):u},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,l,c=0,u=e.length;for(null==r?r=1/0:r*=r,c=0;c<u;++c)(a=(i=t-(s=e[c]).x)*i+(o=n-s.y)*o)<r&&(l=s,r=a);return l},on:function(e,n){return arguments.length>1?(c.on(e,n),t):c.on(e)}}}function manyBody(){var e,t,n,r,i,o=constant(-30),a=1,s=1/0,l=.81;function c(n){var i,o=e.length,a=quadtree(e,x$2,y$2).visitAfter(h);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function u(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function h(e){var t,n,r,o,a,s=0,l=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,l+=n,r+=n*t.x,o+=n*t.y);e.x=r/l,e.y=o/l}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,c,u){if(!e.value)return!0;var h=e.x-t.x,d=e.y-t.y,f=u-o,p=h*h+d*d;if(f*f/l<p)return p<s&&(0===h&&(p+=(h=jiggle(n))*h),0===d&&(p+=(d=jiggle(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=h*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===h&&(p+=(h=jiggle(n))*h),0===d&&(p+=(d=jiggle(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(f=i[e.data.index]*r/p,t.vx+=h*f,t.vy+=d*f)}while(e=e.next)}}return c.initialize=function(t,r){e=t,n=r,u()},c.strength=function(e){return arguments.length?(o="function"==typeof e?e:constant(+e),u(),c):o},c.distanceMin=function(e){return arguments.length?(a=e*e,c):Math.sqrt(a)},c.distanceMax=function(e){return arguments.length?(s=e*e,c):Math.sqrt(s)},c.theta=function(e){return arguments.length?(l=e*e,c):Math.sqrt(l)},c}function radial$2(e,t,n){var r,i,o,a=constant(.1);function s(e){for(var a=0,s=r.length;a<s;++a){var l=r[a],c=l.x-t||1e-6,u=l.y-n||1e-6,h=Math.sqrt(c*c+u*u),d=(o[a]-h)*i[a]*e/h;l.vx+=c*d,l.vy+=u*d}}function l(){if(r){var t,n=r.length;for(i=new Array(n),o=new Array(n),t=0;t<n;++t)o[t]=+e(r[t],t,r),i[t]=isNaN(o[t])?0:+a(r[t],t,r)}}return"function"!=typeof e&&(e=constant(+e)),null==t&&(t=0),null==n&&(n=0),s.initialize=function(e){r=e,l()},s.strength=function(e){return arguments.length?(a="function"==typeof e?e:constant(+e),l(),s):a},s.radius=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),l(),s):e},s.x=function(e){return arguments.length?(t=+e,s):t},s.y=function(e){return arguments.length?(n=+e,s):n},s}function x$1(e){var t,n,r,i=constant(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=constant(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:constant(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),a(),o):e},o}function y$1(e){var t,n,r,i=constant(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=constant(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:constant(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:constant(+t),a(),o):e},o}const src$1=Object.freeze(Object.defineProperty({__proto__:null,forceCenter:center,forceCollide:collide,forceLink:link,forceManyBody:manyBody,forceRadial:radial$2,forceSimulation:simulation,forceX:x$1,forceY:y$1},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(src$1);var forceInABox$1={},__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$2(t,e,n);return __setModuleDefault$2(t,e),t};Object.defineProperty(forceInABox$1,"__esModule",{value:!0});var d3Force$2=__importStar$2(require$$0$2),util_1$n=requireUtil();function forceInABox(){function e(e){return function(){return e}}var t,n=function(e){return e.cluster},r=e(1),i=e(-1),o=e(100),a=e(.1),s=[0,0],l=[],c={},u=[],h=100,d=100,f={none:{x:0,y:0}},p=[],g="force",m=!0,v=.1;function y(e){if(!m)return y;t.tick(),x();for(var r=0,i=l.length,o=void 0,a=e*v;r<i;++r)(o=l[r]).vx+=(f[n(o)].x-o.x)*a,o.vy+=(f[n(o)].y-o.y)*a}function b(){l&&function(){if(!l||!l.length)return;if(void 0===n(l[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var e=(m=[],v=[],y={},b={},w=[],b=function(e){var t={};return e.forEach((function(e){var r=n(e);t[r]||(t[r]={count:0,sumforceNodeSize:0})})),e.forEach((function(e){var i=n(e),o=r(e),a=t[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,t[i]=a})),t}(l),s=u,f={},g=[],s.forEach((function(e){var t=function(e){var t=(0,util_1$n.getEdgeTerminal)(e,"source"),r=(0,util_1$n.getEdgeTerminal)(e,"target"),i=n(c[t]),o=n(c[r]);return i<=o?"".concat(i,"~").concat(o):"".concat(o,"~").concat(i)}(e),r=0;void 0!==f[t]&&(r=f[t]),r+=1,f[t]=r})),Object.entries(f).forEach((function(e){var t=e[0],n=e[1],r=t.split("~")[0],i=t.split("~")[1];void 0!==r&&void 0!==i&&g.push({source:r,target:i,count:n})})),w=g,Object.keys(b).forEach((function(e,t){var n=b[e];m.push({id:e,size:n.count,r:Math.sqrt(n.sumforceNodeSize/Math.PI)}),y[e]=t})),w.forEach((function(e){var t=(0,util_1$n.getEdgeTerminal)(e,"source"),n=(0,util_1$n.getEdgeTerminal)(e,"target"),r=y[t],i=y[n];void 0!==r&&void 0!==i&&v.push({source:r,target:i,count:e.count})})),{nodes:m,links:v});var s,f,g;var m,v,y,b,w;t=d3Force$2.forceSimulation(e.nodes).force("x",d3Force$2.forceX(h).strength(.1)).force("y",d3Force$2.forceY(d).strength(.1)).force("collide",d3Force$2.forceCollide((function(e){return e.r})).iterations(4)).force("charge",d3Force$2.forceManyBody().strength(i)).force("links",d3Force$2.forceLink(e.nodes.length?e.links:[]).distance(o).strength(a)),p=t.nodes(),x()}()}function x(){return f={none:{x:0,y:0}},p.forEach((function(e){f[e.id]={x:e.x-s[0],y:e.y-s[1]}})),f}function w(e){c={},e.forEach((function(e){c[e.id]=e}))}return y.initialize=function(e){l=e,b()},y.template=function(e){return arguments.length?(g=e,b(),y):g},y.groupBy=function(e){return arguments.length?"string"==typeof e?(n=function(t){return t[e]},y):(n=e,y):n},y.enableGrouping=function(e){return arguments.length?(m=e,y):m},y.strength=function(e){return arguments.length?(v=e,y):v},y.centerX=function(e){return arguments.length?(h=e,y):h},y.centerY=function(e){return arguments.length?(d=e,y):d},y.nodes=function(e){return arguments.length?(w(e||[]),l=e||[],y):l},y.links=function(e){return arguments.length?(u=e||[],b(),y):u},y.forceNodeSize=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),b(),y):r},y.nodeSize=y.forceNodeSize,y.forceCharge=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),b(),y):i},y.forceLinkDistance=function(t){return arguments.length?(o="function"==typeof t?t:e(+t),b(),y):o},y.forceLinkStrength=function(t){return arguments.length?(a="function"==typeof t?t:e(+t),b(),y):a},y.offset=function(e){return arguments.length?(s=e,y):s},y.getFocis=x,y}forceInABox$1.default=forceInABox;var constants={};Object.defineProperty(constants,"__esModule",{value:!0}),constants.FORCE_LAYOUT_TYPE_MAP=constants.LAYOUT_MESSAGE=void 0,constants.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},constants.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};var __extends$r=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding$1(t,e,n);return __setModuleDefault$1(t,e),t},__importDefault$d=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(force,"__esModule",{value:!0}),force.ForceLayout=void 0;var d3Force$1=__importStar$1(require$$0$2),force_in_a_box_1=__importDefault$d(forceInABox$1),util_1$m=requireUtil(),base_1$c=base$1,constants_1$2=constants,ForceLayout=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.nodeStrength=null,n.edgeStrength=null,n.preventOverlap=!1,n.clusterNodeStrength=null,n.clusterEdgeStrength=null,n.clusterEdgeDistance=null,n.clusterNodeSize=null,n.clusterFociStrength=null,n.linkDistance=50,n.alphaDecay=.028,n.alphaMin=.001,n.alpha=.3,n.collideStrength=1,n.workerEnabled=!1,n.tick=function(){},n.onLayoutEnd=function(){},n.ticking=void 0,t&&n.updateCfg(t),n}return __extends$r(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},t.prototype.init=function(e){var t=this;t.nodes=e.nodes||[];var n=e.edges||[];t.edges=n.map((function(e){var t={},n=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(e).forEach((function(r){n.indexOf(r)>-1||(t[r]=e[r])})),t})),t.ticking=!1},t.prototype.execute=function(e){var t=this,n=t.nodes,r=t.edges;if(!t.ticking){var i=t.forceSimulation,o=t.alphaMin,a=t.alphaDecay,s=t.alpha;if(i){if(e)if(t.clustering&&t.clusterForce&&(t.clusterForce.nodes(n),t.clusterForce.links(r)),i.nodes(n),r&&t.edgeForce)t.edgeForce.links(r);else if(r&&!t.edgeForce){u=d3Force$1.forceLink().id((function(e){return e.id})).links(r);t.edgeStrength&&u.strength(t.edgeStrength),t.linkDistance&&u.distance(t.linkDistance),t.edgeForce=u,i.force("link",u)}t.preventOverlap&&t.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0}else try{var l=d3Force$1.forceManyBody();if(t.nodeStrength&&l.strength(t.nodeStrength),i=d3Force$1.forceSimulation().nodes(n),t.clustering){var c=(0,force_in_a_box_1.default)();c.centerX(t.center[0]).centerY(t.center[1]).template("force").strength(t.clusterFociStrength),r&&c.links(r),n&&c.nodes(n),c.forceLinkDistance(t.clusterEdgeDistance).forceLinkStrength(t.clusterEdgeStrength).forceCharge(t.clusterNodeStrength).forceNodeSize(t.clusterNodeSize),t.clusterForce=c,i.force("group",c)}if(i.force("center",d3Force$1.forceCenter(t.center[0],t.center[1])).force("charge",l).alpha(s).alphaDecay(a).alphaMin(o),t.preventOverlap&&t.overlapProcess(i),r){var u=d3Force$1.forceLink().id((function(e){return e.id})).links(r);t.edgeStrength&&u.strength(t.edgeStrength),t.linkDistance&&u.distance(t.linkDistance),t.edgeForce=u,i.force("link",u)}if(t.workerEnabled&&!isInWorker()&&(t.workerEnabled=!1),t.workerEnabled){i.stop();for(var h=getSimulationTicks(i),d=1;d<=h;d++)i.tick(),postMessage({nodes:n,currentTick:d,totalTicks:h,type:constants_1$2.LAYOUT_MESSAGE.TICK},void 0);t.ticking=!1}else i.on("tick",(function(){t.tick()})).on("end",(function(){t.ticking=!1,t.onLayoutEnd&&t.onLayoutEnd()})),t.ticking=!0;t.forceSimulation=i,t.ticking=!0}catch(e11){t.ticking=!1}}},t.prototype.overlapProcess=function(e){var t,n,r=this,i=r.nodeSize,o=r.nodeSpacing,a=r.collideStrength;if(n=(0,util_1$m.isNumber)(o)?function(){return o}:(0,util_1$m.isFunction)(o)?o:function(){return 0},i)if((0,util_1$m.isFunction)(i))t=function(e){return i(e)+n(e)};else if((0,util_1$m.isArray)(i)){var s=(i[0]>i[1]?i[0]:i[1])/2;t=function(e){return s+n(e)}}else if((0,util_1$m.isNumber)(i)){var l=i/2;t=function(e){return l+n(e)}}else t=function(){return 10};else t=function(e){return e.size?(0,util_1$m.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2+n(e):(0,util_1$m.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2+n(e):e.size/2+n(e):10+n(e)};e.force("collisionForce",d3Force$1.forceCollide(t).strength(a))},t.prototype.updateCfg=function(e){var t=this;t.ticking&&(t.forceSimulation.stop(),t.ticking=!1),t.forceSimulation=null,Object.assign(t,e)},t.prototype.destroy=function(){var e=this;e.ticking&&(e.forceSimulation.stop(),e.ticking=!1),e.nodes=null,e.edges=null,e.destroyed=!0},t}(base_1$c.Base),exports2,__createBinding2,__exportStar2;function getSimulationTicks(e){var t=e.alphaMin(),n=e.alphaTarget(),r=e.alpha(),i=Math.log((t-n)/(r-n))/Math.log(1-e.alphaDecay());return Math.ceil(i)}function isInWorker(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}force.ForceLayout=ForceLayout,exports2=force$1,__createBinding2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),__exportStar2=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||__createBinding2(t,e,n)},Object.defineProperty(exports2,"__esModule",{value:!0}),__exportStar2(force,exports2);var circular={},__extends$q=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(circular,"__esModule",{value:!0}),circular.CircularLayout=void 0;var base_1$b=base$1,util_1$l=requireUtil();function initHierarchy(e,t,n,r){e.forEach((function(t,n){e[n].children=[],e[n].parent=[]})),r?t.forEach((function(t){var r=(0,util_1$l.getEdgeTerminal)(t,"source"),i=(0,util_1$l.getEdgeTerminal)(t,"target"),o=0;r&&(o=n[r]);var a=0;i&&(a=n[i]);var s=e[o].children,l=e[a].parent;s.push(e[a].id),l.push(e[o].id)})):t.forEach((function(t){var r=(0,util_1$l.getEdgeTerminal)(t,"source"),i=(0,util_1$l.getEdgeTerminal)(t,"target"),o=0;r&&(o=n[r]);var a=0;i&&(a=n[i]);var s=e[o].children,l=e[a].children;s.push(e[a].id),l.push(e[o].id)}))}function connect(e,t,n){for(var r=n.length,i=0;i<r;i++){var o=(0,util_1$l.getEdgeTerminal)(n[i],"source"),a=(0,util_1$l.getEdgeTerminal)(n[i],"target");if(e.id===o&&t.id===a||t.id===o&&e.id===a)return!0}return!1}function compareDegree(e,t){var n=e.degree,r=t.degree;return n<r?-1:n>r?1:0}var CircularLayout=function(e){function t(t){var n=e.call(this)||this;return n.radius=null,n.nodeSize=void 0,n.startRadius=null,n.endRadius=null,n.startAngle=0,n.endAngle=2*Math.PI,n.clockwise=!0,n.divisions=1,n.ordering=null,n.angleRatio=1,n.nodes=[],n.edges=[],n.nodeMap={},n.degrees=[],n.width=300,n.height=300,n.updateCfg(t),n}return __extends$q(t,e),t.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},t.prototype.execute=function(){var e,t=this,n=t.nodes,r=t.edges,i=n.length;if(0!==i){t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.center||(t.center=[t.width/2,t.height/2]);var o=t.center;if(1===i)return n[0].x=o[0],n[0].y=o[1],void(t.onLayoutEnd&&t.onLayoutEnd());var a=t.radius,s=t.startRadius,l=t.endRadius,c=t.divisions,u=t.startAngle,h=t.endAngle,d=t.angleRatio,f=t.ordering,p=t.clockwise,g=t.nodeSpacing,m=t.nodeSize,v=(h-u)/i,y={};n.forEach((function(e,t){y[e.id]=t})),t.nodeMap=y;var b=(0,util_1$l.getDegree)(n.length,y,r);if(t.degrees=b,g){var x=(0,util_1$l.getFuncByUnknownType)(10,g),w=(0,util_1$l.getFuncByUnknownType)(10,m),_=-1/0;n.forEach((function(e){var t=w(e);_<t&&(_=t)}));var C=0;n.forEach((function(e,t){C+=0===t?_||10:(x(e)||0)+(_||10)})),a=C/(2*Math.PI)}else a||s||l?!s&&l?s=l:s&&!l&&(l=s):a=t.height>t.width?t.width/2:t.height/2;var $=v*d,S=[];S="topology"===f?t.topologyOrdering():"topology-directed"===f?t.topologyOrdering(!0):"degree"===f?t.degreeOrdering():n;for(var E=Math.ceil(i/c),A=0;A<i;++A){var M=a;M||null===s||null===l||(M=s+A*(l-s)/(i-1)),M||(M=10+100*A/(i-1));var k=u+A%E*$+2*Math.PI/c*Math.floor(A/E);p||(k=h-A%E*$-2*Math.PI/c*Math.floor(A/E)),S[A].x=o[0]+Math.cos(k)*M,S[A].y=o[1]+Math.sin(k)*M,S[A].weight=b[A].all}return null===(e=t.onLayoutEnd)||void 0===e||e.call(t),{nodes:S,edges:this.edges}}t.onLayoutEnd&&t.onLayoutEnd()},t.prototype.topologyOrdering=function(e){void 0===e&&(e=!1);var t=this,n=t.degrees,r=t.edges,i=t.nodes,o=(0,util_1$l.clone)(i),a=t.nodeMap,s=[o[0]],l=[i[0]],c=[],u=i.length;c[0]=!0,initHierarchy(o,r,a,e);var h=0;return o.forEach((function(e,t){if(0!==t)if(t!==u-1&&n[t].all===n[t+1].all&&!connect(s[h],e,r)||c[t]){for(var d=s[h].children,f=!1,p=0;p<d.length;p++){var g=a[d[p]];if(n[g].all===n[t].all&&!c[g]){s.push(o[g]),l.push(i[a[o[g].id]]),c[g]=!0,f=!0;break}}for(var m=0;!f&&(c[m]||(s.push(o[m]),l.push(i[a[o[m].id]]),c[m]=!0,f=!0),++m!==u););}else s.push(e),l.push(i[a[e.id]]),c[t]=!0,h++})),l},t.prototype.degreeOrdering=function(){var e=this.nodes,t=[],n=this.degrees;return e.forEach((function(e,r){e.degree=n[r].all,t.push(e)})),t.sort(compareDegree),t},t.prototype.getType=function(){return"circular"},t}(base_1$b.Base);circular.CircularLayout=CircularLayout;var dagre$1={},dagre={},layout$6={},acyclic={},greedyFas={},list={};Object.defineProperty(list,"__esModule",{value:!0});var filterOutLinks=function(e,t){if("next"!==e&&"prev"!==e)return t},unlink=function(e){e.prev.next=e.next,e.next.prev=e.prev,delete e.next,delete e.prev},List$1=function(){function e(){var e={};e.prev=e,e.next=e.prev,this.shortcut=e}return e.prototype.dequeue=function(){var e=this.shortcut,t=e.prev;if(t&&t!==e)return unlink(t),t},e.prototype.enqueue=function(e){var t=this.shortcut;e.prev&&e.next&&unlink(e),e.next=t.next,t.next.prev=e,t.next=e,e.prev=t},e.prototype.toString=function(){for(var e=[],t=this.shortcut,n=t.prev;n!==t;)e.push(JSON.stringify(n,filterOutLinks)),n=null==n?void 0:n.prev;return"[".concat(e.join(", "),"]")},e}(),GraphEnum,GraphEnum2;function incrementOrInitEntry(e,t){var n=e.get(t)||0;e.set(t,n+1)}function decrementOrRemoveEntry(e,t){var n=e.get(t);void 0!==n&&((n-=1)>0?e.set(t,n):e.delete(t))}function edgeArgsToId(e,t,n,r){var i=String(t),o=String(n);if(!e&&i>o){var a=i;i=o,o=a}return i+GraphEnum.EDGE_KEY_DELIM+o+GraphEnum.EDGE_KEY_DELIM+(void 0===r?GraphEnum.DEFAULT_EDGE_NAME:r)}function edgeArgsToObj(e,t,n,r){var i=String(t),o=String(n),a={v:t,w:n};if(!e&&i>o){var s=a.v;a.v=a.w,a.w=s}return void 0!==r&&(a.name=r),a}function edgeObjToId(e,t){return edgeArgsToId(e,t.v,t.w,t.name)}function isFunction(e){return"function"==typeof e}list.default=List$1,GraphEnum2=GraphEnum||(GraphEnum={}),GraphEnum2.DEFAULT_EDGE_NAME="\0",GraphEnum2.GRAPH_NODE="\0",GraphEnum2.EDGE_KEY_DELIM="";var nodeToJSON=function(e){return e.nodes().map((function(t){var n={id:t,value:e.node(t),parent:e.parent(t)};return void 0===n.value&&delete n.value,void 0===n.parent&&delete n.parent,n}))},edgeToJSON=function(e){return e.edges().map((function(t){var n=e.edge(t),r={v:t.v,w:t.w,value:n,name:t.name};return void 0===r.name&&delete r.name,void 0===r.value&&delete r.value,r}))},write=function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:nodeToJSON(e),edges:edgeToJSON(e),value:e.graph()};return void 0===t.value&&delete t.value,t},read=function(e){var t=new Graph$2(e.options);return void 0!==e.value&&t.setGraph(e.value),e.nodes.forEach((function(e){t.setNode(e.id,e.value),e.parent&&t.setParent(e.id,e.parent)})),e.edges.forEach((function(e){t.setEdge(e.v,e.w,e.value,e.name)})),t};function ownKeys$3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread$3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$3(Object(n),!0).forEach((function(t){_defineProperty$1(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck$4(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$4(e,t,n){return t&&_defineProperties$4(e.prototype,t),n&&_defineProperties$4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var defaultOption={compound:!1,multigraph:!1,directed:!0},Graph$2=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck$4(this,e),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=GraphEnum.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return t.directed},this.isMultigraph=function(){return t.multigraph},this.isCompound=function(){return t.compound},this.setGraph=function(e){return t.label=e,t},this.graph=function(){return t.label},this.setDefaultNodeLabel=function(e){return isFunction(e)?t.defaultNodeLabelFn=e:t.defaultNodeLabelFn=function(){return e},t},this.nodeCount=function(){return t.nodeCountNum},this.node=function(e){return t.nodesLabelMap.get(e)},this.nodes=function(){return Array.from(t.nodesLabelMap.keys())},this.sources=function(){return t.nodes().filter((function(e){var n;return!(null===(n=t.inEdgesMap.get(e))||void 0===n?void 0:n.size)}))},this.sinks=function(){return t.nodes().filter((function(e){var n;return!(null===(n=t.outEdgesMap.get(e))||void 0===n?void 0:n.size)}))},this.setNodes=function(e,n){return e.map((function(e){return t.setNode(e,n)})),t},this.hasNode=function(e){return t.nodesLabelMap.has(e)},this.checkCompound=function(){if(!t.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(e){if(t.isCompound()){var n,r=null===(n=t.parentMap)||void 0===n?void 0:n.get(e);if(r!==t.GRAPH_NODE)return r}},this.removeFromParentsChildList=function(e){var n=t.parentMap.get(e);t.childrenMap.get(n).delete(e)},this.setParent=function(e,n){var r,i;t.checkCompound();for(var o=void 0===n?t.GRAPH_NODE:n,a=t.parent(o);a;){if(e===a)throw new Error("Setting "+n+" as parent of "+e+" would create a cycle");a=t.parent(a)}n&&t.setNode(n),t.setNode(e),t.removeFromParentsChildList(e),null===(r=t.parentMap)||void 0===r||r.set(e,o);var s=t.childrenMap.get(o);return s.set(e,!0),null===(i=t.childrenMap)||void 0===i||i.set(o,s),t},this.children=function(e){var n=void 0===e?t.GRAPH_NODE:e;if(t.isCompound()){var r,i=null===(r=t.childrenMap)||void 0===r?void 0:r.get(n);return i?Array.from(i.keys()):void 0}return n===t.GRAPH_NODE?t.nodes():e&&t.hasNode(e)?[]:void 0},this.predecessors=function(e){var n=t.predecessorsMap.get(e);return n?Array.from(n.keys()):void 0},this.successors=function(e){var n=t.successorsMap.get(e);return n?Array.from(n.keys()):void 0},this.neighbors=function(e){var n;if(t.hasNode(e))return Array.from(new Set(null===(n=t.predecessors(e))||void 0===n?void 0:n.concat(t.successors(e))))},this.isLeaf=function(e){var n,r;return t.isDirected()?!(null===(r=t.successors(e))||void 0===r?void 0:r.length):!(null===(n=t.neighbors(e))||void 0===n?void 0:n.length)},this.filterNodes=function(n){var r=t.directed,i=t.multigraph,o=t.compound,a=new e({directed:r,multigraph:i,compound:o});if(a.setGraph(t.graph()),t.nodes().forEach((function(e){n(e)&&a.setNode(e,t.node(e))})),t.edges().forEach((function(e){a.hasNode(e.v)&&a.hasNode(e.w)&&a.setEdgeObj(e,t.edge(e))})),o){a.nodes().forEach((function(e){a.setParent(e,function(e){for(var n=t.parent(e);void 0!==n&&!a.hasNode(n);)n=t.parent(n);return n}(e))}))}return a},this.setDefaultEdgeLabel=function(e){return isFunction(e)?t.defaultEdgeLabelFn=e:t.defaultEdgeLabelFn=function(){return e},t},this.edgeCount=function(){return t.edgeCountNum},this.setEdgeObj=function(e,n){return t.setEdge(e.v,e.w,n,e.name)},this.setPath=function(e,n){return e.reduce((function(e,r){return t.setEdge(e,r,n),r})),t},this.edgeFromArgs=function(e,n,r){return t.edge({v:e,w:n,name:r})},this.edge=function(e){return t.edgesLabelsMap.get(edgeObjToId(t.isDirected(),e))},this.hasEdge=function(e,n,r){return t.edgesLabelsMap.has(edgeObjToId(t.isDirected(),{v:e,w:n,name:r}))},this.removeEdgeObj=function(e){var n=e.v,r=e.w,i=e.name;return t.removeEdge(n,r,i)},this.edges=function(){return Array.from(t.edgesMap.values())},this.inEdges=function(e,n){var r=t.inEdgesMap.get(e);if(r)return Array.from(r.values()).filter((function(e){return!n||e.v===n}))},this.outEdges=function(e,n){var r=t.outEdgesMap.get(e);if(r)return Array.from(r.values()).filter((function(e){return!n||e.w===n}))},this.nodeEdges=function(e,n){var r;if(t.hasNode(e))return null===(r=t.inEdges(e,n))||void 0===r?void 0:r.concat(t.outEdges(e,n))},this.toJSON=function(){return write(t)},this.nodeInDegree=function(e){var n=t.inEdgesMap.get(e);return n?n.size:0},this.nodeOutDegree=function(e){var n=t.outEdgesMap.get(e);return n?n.size:0},this.nodeDegree=function(e){return t.nodeInDegree(e)+t.nodeOutDegree(e)},this.source=function(e){return e.v},this.target=function(e){return e.w};var r=_objectSpread$3(_objectSpread$3({},defaultOption),n);this.compound=r.compound,this.directed=r.directed,this.multigraph=r.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return _createClass$4(e,[{key:"setNode",value:function(e,t){var n,r=this.nodesLabelMap,i=this.defaultNodeLabelFn,o=this.isCompound,a=this.parentMap,s=this.childrenMap,l=this.inEdgesMap,c=this.outEdgesMap,u=this.predecessorsMap,h=this.successorsMap;if(r.has(e))return void 0!==t&&r.set(e,t),this;(r.set(e,t||i(e)),o())&&(null==a||a.set(e,this.GRAPH_NODE),null==s||s.set(e,new Map),(null==s?void 0:s.has(this.GRAPH_NODE))||null==s||s.set(this.GRAPH_NODE,new Map),null==s||null===(n=s.get(this.GRAPH_NODE))||void 0===n||n.set(e,!0));return[l,c,u,h].forEach((function(t){return t.set(e,new Map)})),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(e){var t=this;if(this.hasNode(e)){var n,r,i,o=function(e){t.removeEdge(e.v,e.w,e.name)},a=this.inEdgesMap,s=this.outEdgesMap,l=this.predecessorsMap,c=this.successorsMap,u=this.nodesLabelMap;if(this.isCompound())this.removeFromParentsChildList(e),null===(n=this.parentMap)||void 0===n||n.delete(e),null===(r=this.children(e))||void 0===r||r.forEach((function(e){return t.setParent(e)})),null===(i=this.childrenMap)||void 0===i||i.delete(e);var h=a.get(e),d=s.get(e);Array.from(h.values()).forEach((function(e){return o(e)})),Array.from(d.values()).forEach((function(e){return o(e)})),u.delete(e),a.delete(e),s.delete(e),l.delete(e),c.delete(e),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(e,t,n,r){var i,o,a=edgeArgsToObj(this.isDirected(),e,t,r),s=edgeObjToId(this.isDirected(),a),l=a.v,c=a.w;if(this.edgesLabelsMap.has(s))return this.edgesLabelsMap.set(s,n),this;if(void 0!==r&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(c),this.edgesLabelsMap.set(s,n||this.defaultEdgeLabelFn(l,c,r)),Object.freeze(a),this.edgesMap.set(s,a);var u=this.predecessorsMap.get(c),h=this.successorsMap.get(l);return incrementOrInitEntry(u,l),incrementOrInitEntry(h,c),null===(i=this.inEdgesMap.get(c))||void 0===i||i.set(s,a),null===(o=this.outEdgesMap.get(l))||void 0===o||o.set(s,a),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(e,t,n){var r=edgeArgsToId(this.isDirected(),e,t,n);if(this.edgesMap.get(r)){var i=edgeArgsToObj(this.isDirected(),e,t,n),o=i.v,a=i.w;this.edgesLabelsMap.delete(r),this.edgesMap.delete(r);var s=this.predecessorsMap.get(a),l=this.successorsMap.get(o);decrementOrRemoveEntry(s,o),decrementOrRemoveEntry(l,a),this.inEdgesMap.get(a).delete(r),this.outEdgesMap.get(o).delete(r),this.edgeCountNum-=1}return this}}]),e}();function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck$3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$3(e,t,n){return t&&_defineProperties$3(e.prototype,t),n&&_defineProperties$3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _get(){return _get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=_superPropBase(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},_get.apply(this,arguments)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf$1(e)););return e}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf$1(e,t)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var n,r=_getPrototypeOf$1(e);if(t){var i=_getPrototypeOf$1(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn$1(this,n)}}function _possibleConstructorReturn$1(e,t){if(t&&("object"===_typeof$4(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(e)}function _assertThisInitialized$1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e11){return!1}}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Graph$2.fromJSON=read;var GraphWithEvent=function(e){_inherits$1(n,Graph$2);var t=_createSuper$1(n);function n(){var e;_classCallCheck$3(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).eventPool={},e}return _createClass$3(n,[{key:"appendEvent",value:function(e,t){this.eventPool[e]||(this.eventPool[e]=[]),this.eventPool[e].push(t)}},{key:"removeEvent",value:function(e,t){if(this.eventPool[e]){var n=this.eventPool[e].indexOf(t);n>-1&&this.eventPool[e].splice(n,1)}}},{key:"emitEvent",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.eventPool[e]&&this.eventPool[e].forEach((function(e){e.apply(void 0,n)}))}},{key:"setNode",value:function(e,t){return _get(_getPrototypeOf$1(n.prototype),"setNode",this).call(this,e,t),this.emitEvent("nodeAdd",e,t),this}},{key:"removeNode",value:function(e){return _get(_getPrototypeOf$1(n.prototype),"removeNode",this).call(this,e),this.emitEvent("nodeRemove",e),this}},{key:"setEdge",value:function(e,t,r,i){return _get(_getPrototypeOf$1(n.prototype),"setEdge",this).call(this,e,t,r,i),this.emitEvent("edgeAdd",e,t,r,i),this}},{key:"removeEdge",value:function(e,t,r){return _get(_getPrototypeOf$1(n.prototype),"removeEdge",this).call(this,e,t,r),this.emitEvent("edgeRemove",e,t,r),this}}]),n}();function _defineProperties$2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$2(e,t,n){return t&&_defineProperties$2(e.prototype,t),n&&_defineProperties$2(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck$2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var PriorityQueue=_createClass$2((function e(){var t=this;_classCallCheck$2(this,e),this.arr=[],this.keyIndice=new Map,this.size=function(){return t.arr.length},this.keys=function(){return t.arr.map((function(e){return e.key}))},this.has=function(e){return t.keyIndice.has(e)},this.priority=function(e){var n=t.keyIndice.get(e);if(void 0!==n)return t.arr[n].priority},this.swap=function(e,n){var r=t.arr,i=t.keyIndice,o=[r[e],r[n]],a=o[0],s=o[1];r[e]=s,r[n]=a,i.set(a.key,n),i.set(s.key,e)},this.innerDecrease=function(e){for(var n,r=t.arr,i=r[e].priority,o=e;0!==o;){var a;if((null===(a=r[n=o>>1])||void 0===a?void 0:a.priority)<i)break;t.swap(o,n),o=n}},this.heapify=function(e){var n=t.arr,r=e<<1,i=r+1,o=e;r<n.length&&(o=n[r].priority<n[o].priority?r:o,i<n.length&&(o=n[i].priority<n[o].priority?i:o),o!==e&&(t.swap(e,o),t.heapify(o)))},this.min=function(){if(0===t.size())throw new Error("Queue underflow");return t.arr[0].key},this.add=function(e,n){var r=t.keyIndice,i=t.arr;if(!r.has(e)){var o=i.length;return r.set(e,o),i.push({key:e,priority:n}),t.innerDecrease(o),!0}return!1},this.removeMin=function(){t.swap(0,t.arr.length-1);var e=t.arr.pop();return t.keyIndice.delete(e.key),t.heapify(0),e.key},this.decrease=function(e,n){if(!t.has(e))throw new Error("There's no key named ".concat(e));var r=t.keyIndice.get(e);if(n>t.arr[r].priority)throw new Error("New priority is greater than current priority.Key: ".concat(e," Old: + ").concat(t.arr[r].priority," New: ").concat(n));t.arr[r].priority=n,t.innerDecrease(r)}})),prim=function(e,t){var n,r=new Graph$2,i=new Map,o=new PriorityQueue;function a(e){var r=e.v===n?e.w:e.v,a=o.priority(r);if(void 0!==a){var s=t(e);s<a&&(i.set(r,n),o.decrease(r,s))}}if(0===e.nodeCount())return r;e.nodes().forEach((function(e){o.add(e,Number.POSITIVE_INFINITY),r.setNode(e)})),o.decrease(e.nodes()[0],0);for(var s=!1;o.size()>0;){var l;if(n=o.removeMin(),i.has(n))r.setEdge(n,i.get(n));else{if(s)throw new Error("Input graph is not connected: "+e.graph());s=!0}null===(l=e.nodeEdges(n))||void 0===l||l.forEach(a)}return r},components=function(e){var t=new Set,n=[];return e.nodes().forEach((function(r){for(var i=[],o=[r];o.length>0;){var a,s,l=o.pop();if(!t.has(l))t.add(l),i.push(l),null===(a=e.successors(l))||void 0===a||a.forEach((function(e){return o.push(e)})),null===(s=e.predecessors(l))||void 0===s||s.forEach((function(e){return o.push(e)}))}i.length&&n.push(i)})),n},doDFS=function e(t,n,r,i,o,a){i.includes(n)||(i.push(n),r||a.push(n),o(n).forEach((function(n){return e(t,n,r,i,o,a)})),r&&a.push(n))},dfs$1=function(e,t,n){var r=Array.isArray(t)?t:[t],i=function(t){return e.isDirected()?e.successors(t):e.neighbors(t)},o=[],a=[];return r.forEach((function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);doDFS(e,t,"post"===n,a,i,o)})),o};function _slicedToArray$1(e,t){return _arrayWithHoles$1(e)||_iterableToArrayLimit$1(e,t)||_unsupportedIterableToArray$2(e,t)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$2(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$2(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$2(e,t):void 0}}function _arrayLikeToArray$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit$1(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(err){s=!0,i=err}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles$1(e){if(Array.isArray(e))return e}var DEFAULT_WEIGHT_FUNC$1=function(){return 1},dijkstra=function(e,t,n,r){return runDijkstra(e,t,n||DEFAULT_WEIGHT_FUNC$1,r||function(t){return e.outEdges(t)})},runDijkstra=function(e,t,n,r){var i,o,a=new Map,s=new PriorityQueue,l=function(e){var t=e.v!==i?e.v:e.w,r=a.get(t),l=n(e),c=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(t,c))};for(e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;a.set(e,{distance:n}),s.add(e,n)}));s.size()>0&&(i=s.removeMin(),!(o=a.get(i))||o.distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);var c={};return Array.from(a.entries()).forEach((function(e){var t=_slicedToArray$1(e,2),n=t[0],r=t[1];return c[String(n)]=r,c})),c},dijkstraAll=function(e,t,n){var r={};return e.nodes().forEach((function(i){return r[String(i)]=dijkstra(e,i,t,n),r})),r},tarjan=function(e){var t=0,n=[],r=new Map,i=[];function o(a){var s,l={onStack:!0,lowlink:t,index:t};if(r.set(a,l),t+=1,n.push(a),null===(s=e.successors(a))||void 0===s||s.forEach((function(e){var t;if(r.has(e)){if(null===(t=r.get(e))||void 0===t?void 0:t.onStack){var n=r.get(e);l.lowlink=Math.min(l.lowlink,n.index)}}else{o(e);var i=r.get(e);l.lowlink=Math.min(l.lowlink,i.lowlink)}})),l.lowlink===l.index){var c,u=[];do{c=n.pop(),r.get(c).onStack=!1,u.push(c)}while(a!==c);i.push(u)}}return e.nodes().forEach((function(e){r.has(e)||o(e)})),i},findCycles=function(e){return tarjan(e).filter((function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))};function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties$1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass$1(e,t,n){return t&&_defineProperties$1(e.prototype,t),n&&_defineProperties$1(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck$1(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_setPrototypeOf(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){if(t&&("object"===_typeof$3(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function(e){if(null===e||!_isNativeFunction(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(n,e)},_wrapNativeSuper(e)}function _construct(e,t,n){return(_construct=_isNativeReflectConstruct()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(i,n.prototype),i}).apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e11){return!1}}function _isNativeFunction(e){return-1!==Function.toString.call(e).indexOf("[native code]")}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var CycleException=function(e){_inherits(n,_wrapNativeSuper(Error));var t=_createSuper(n);function n(){return _classCallCheck$1(this,n),t.apply(this,arguments)}return _createClass$1(n)}();function topsort(e){var t=new Set,n=new Set,r=[];if(e.sinks().forEach((function i(o){if(n.has(o))throw new CycleException;var a;t.has(o)||(n.add(o),t.add(o),null===(a=e.predecessors(o))||void 0===a||a.forEach(i),n.delete(o),r.push(o))})),t.size!==e.nodeCount())throw new CycleException;return r}var isAcyclic=function(e){try{topsort(e)}catch(e11){if(e11 instanceof CycleException)return!1;throw e11}return!0},postorder=function(e,t){return dfs$1(e,t,"post")},preorder=function(e,t){return dfs$1(e,t,"pre")},DEFAULT_WEIGHT_FUNC=function(){return 1};function floydWarshall(e,t,n){return runFloydWarshall(e,t||DEFAULT_WEIGHT_FUNC,n||function(t){return e.outEdges(t)})}function runFloydWarshall(e,t,n){var r={},i=e.nodes();return i.forEach((function(e){var o=String(e);r[o]={},r[o][o]={distance:0},i.forEach((function(t){e!==t&&(r[o][String(t)]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var i=n.v===e?n.w:n.v,a=t(n);r[o][String(i)]={distance:a,predecessor:e}}))})),i.forEach((function(e){var t=String(e),n=r[t];i.forEach((function(e){var o=String(e),a=r[o];i.forEach((function(e){var r=String(e),i=a[t],o=n[r],s=a[r],l=i.distance+o.distance;l<s.distance&&(s.distance=l,s.predecessor=o.predecessor)}))}))})),r}const index$3=Object.freeze(Object.defineProperty({__proto__:null,components:components,dfs:dfs$1,dijkstra:dijkstra,dijkstraAll:dijkstraAll,findCycles:findCycles,tarjan:tarjan,isAcyclic:isAcyclic,postorder:postorder,preorder:preorder,prim:prim,topsort:topsort,floydWarshall:floydWarshall},Symbol.toStringTag,{value:"Module"}));var containSameNodes=function(e,t){for(var n=e.nodes(),r=0;r<n.length;r++){var i=n[r];if(t.hasNode(i))return!0}return!1},containSameEdges=function(e,t){for(var n=e.edges(),r=0;r<n.length;r++){var i=n[r];if(t.hasEdge(i.v,i.w,i.name))return!0}return!1},getSameNodes=function(e,t){return e.nodes().filter((function(e){return t.hasNode(e)}))},getSameEdges=function(e,t){return e.edges().filter((function(e){return t.hasEdge(e.v,e.w,e.name)}))},isGraphOptionSame=function(e,t){return e.isCompound()===t.isCompound()&&e.isDirected()===t.isDirected()&&e.isMultigraph()===t.isMultigraph()},containAllSameNodes=function(e,t){return getSameNodes(e,t).length===e.nodes().length},containAllSameEdges=function(e,t){return getSameEdges(e,t).length===e.edges().length},isGraphSame=function(e,t){return isGraphOptionSame(e,t)&&e.nodeCount()===t.nodeCount()&&containAllSameNodes(e,t)&&e.edgeCount()===t.edgeCount()&&containAllSameEdges(e,t)},isGraphContainsAnother=function(e,t){return containAllSameNodes(e,t)&&containAllSameEdges(e,t)};function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray$1(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray$1(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray$1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray$1(e,t):void 0}}function _arrayLikeToArray$1(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _iterableToArrayLimit(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(err){s=!0,i=err}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function isGraph(e){return e instanceof Graph$2}function isSimpleGraph(e){if(e.isMultigraph())return!1;for(var t=e.edges(),n=new Map,r=0;r<t.length;r++){var i=t[r];if(i.v===i.w)return!1;var o=_slicedToArray([i.v,i.w].sort(),2),a=o[0],s=o[1],l="".concat(a,"-").concat(s);if(n.has(l))return!1;n.set(l,!0)}return!0}function isNullGraph(e){return 0===e.nodes().length}function hasSelfLoop(e){for(var t=e.edges(),n=0;n<t.length;n++){var r=t[n];if(r.v===r.w)return!0}return!1}const index$2=Object.freeze(Object.defineProperty({__proto__:null,isGraph:isGraph,isSimpleGraph:isSimpleGraph,isNullGraph:isNullGraph,hasSelfLoop:hasSelfLoop},Symbol.toStringTag,{value:"Module"}));var isGraphComplement=function(e,t){if(!isSimpleGraph(e)||!isSimpleGraph(t))return!1;if(!containAllSameNodes(e,t))return!1;if(containSameEdges(e,t))return!1;var n=e.nodeCount();return e.edgeCount()+t.edgeCount()===n*(n-1)/2};const index$1=Object.freeze(Object.defineProperty({__proto__:null,containAllSameEdges:containAllSameEdges,containAllSameNodes:containAllSameNodes,containSameEdges:containSameEdges,containSameNodes:containSameNodes,isGraphComplement:isGraphComplement,isGraphOptionSame:isGraphOptionSame,getSameEdges:getSameEdges,getSameNodes:getSameNodes,isGraphSame:isGraphSame,isGraphContainsAnother:isGraphContainsAnother},Symbol.toStringTag,{value:"Module"}));var getGraphComplement=function(e){if(!isSimpleGraph(e))return null;for(var t=e.nodeCount(),n=new Graph$2({compound:e.isCompound(),directed:e.isDirected(),multigraph:e.isMultigraph()}),r=e.nodes(),i=0;i<t;i++){var o=r[i];n.setNode(o,e.node(o));for(var a=i+1;a<t;a++){var s=r[a];e.hasEdge(o,s)||n.setEdge(o,s)}}return n};const index=Object.freeze(Object.defineProperty({__proto__:null,getGraphComplement:getGraphComplement},Symbol.toStringTag,{value:"Module"})),es$2=Object.freeze(Object.defineProperty({__proto__:null,Graph:Graph$2,GraphWithEvent:GraphWithEvent,algorithm:index$3,comparision:index$1,essence:index$2,generate:index},Symbol.toStringTag,{value:"Module"})),require$$0$1=getAugmentedNamespace(es$2);var __extends$p=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__importDefault$c=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(greedyFas,"__esModule",{value:!0});var list_1=__importDefault$c(list),graphlib_1$1=require$$0$1,List=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$p(t,e),t}(list_1.default),StateGraph=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$p(t,e),t}(graphlib_1$1.Graph),DEFAULT_WEIGHT_FN=function(){return 1},greedyFAS=function(e,t){var n;if(e.nodeCount()<=1)return[];var r=buildState(e,t||DEFAULT_WEIGHT_FN);return null===(n=doGreedyFAS(r.graph,r.buckets,r.zeroIdx).map((function(t){return e.outEdges(t.v,t.w)})))||void 0===n?void 0:n.flat()},doGreedyFAS=function(e,t,n){for(var r,i=[],o=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)removeNode(e,t,n,r);for(;r=o.dequeue();)removeNode(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){i=i.concat(removeNode(e,t,n,r,!0));break}}return i},removeNode=function(e,t,n,r,i){var o,a,s=[];return null===(o=e.inEdges(r.v))||void 0===o||o.forEach((function(r){var o=e.edge(r),a=e.node(r.v);i&&s.push({v:r.v,w:r.w,in:0,out:0}),void 0===a.out&&(a.out=0),a.out-=o,assignBucket(t,n,a)})),null===(a=e.outEdges(r.v))||void 0===a||a.forEach((function(r){var i=e.edge(r),o=r.w,a=e.node(o);void 0===a.in&&(a.in=0),a.in-=i,assignBucket(t,n,a)})),e.removeNode(r.v),i?s:void 0},buildState=function(e,t){var n=new StateGraph,r=0,i=0;e.nodes().forEach((function(e){n.setNode(e,{v:e,in:0,out:0})})),e.edges().forEach((function(e){var o=n.edge(e)||0,a=(null==t?void 0:t(e))||1,s=o+a;n.setEdge(e.v,e.w,s),i=Math.max(i,n.node(e.v).out+=a),r=Math.max(r,n.node(e.w).in+=a)}));for(var o=[],a=i+r+3,s=0;s<a;s++)o.push(new List);var l=r+1;return n.nodes().forEach((function(e){assignBucket(o,l,n.node(e))})),{buckets:o,zeroIdx:l,graph:n}},assignBucket=function(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)};greedyFas.default=greedyFAS;var __importDefault$b=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(acyclic,"__esModule",{value:!0});var greedy_fas_1=__importDefault$b(greedyFas),run$2=function(e){var t,n="greedy"===e.graph().acyclicer?(0,greedy_fas_1.default)(e,(t=e,function(e){var n;return(null===(n=t.edge(e))||void 0===n?void 0:n.weight)||1})):dfsFAS(e);null==n||n.forEach((function(t){var n=e.edge(t);e.removeEdgeObj(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,"rev-".concat(Math.random()))}))},dfsFAS=function(e){var t=[],n={},r={},i=function(o){var a;r[o]||(r[o]=!0,n[o]=!0,null===(a=e.outEdges(o))||void 0===a||a.forEach((function(e){n[e.w]?t.push(e):i(e.w)})),delete n[o])};return e.nodes().forEach(i),t},undo$2=function(e){e.edges().forEach((function(t){var n=e.edge(t);if(n.reversed){e.removeEdgeObj(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))};acyclic.default={run:run$2,undo:undo$2};var normalize={},util$1={},graph={},__extends$o=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(graph,"__esModule",{value:!0}),graph.Graph=void 0;var graphlib_1=require$$0$1,Graph$1=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends$o(t,e),t}(graphlib_1.Graph);graph.Graph=Graph$1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.minBy=e.notime=e.time=e.partition=e.maxRank=e.addBorderNode=e.removeEmptyRanks=e.normalizeRanks=e.buildLayerMatrix=e.intersectRect=e.predecessorWeights=e.successorWeights=e.zipObject=e.asNonCompoundGraph=e.simplify=e.addDummyNode=void 0;var t=requireUtil(),n=graph;e.addDummyNode=function(e,t,n,r){var i;do{i="".concat(r).concat(Math.random())}while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i};e.simplify=function(e){var t=(new n.Graph).setGraph(e.graph());return e.nodes().forEach((function(n){t.setNode(n,e.node(n))})),e.edges().forEach((function(n){var r=t.edgeFromArgs(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),t};e.asNonCompoundGraph=function(e){var t=new n.Graph({multigraph:e.isMultigraph()}).setGraph(e.graph());return e.nodes().forEach((function(n){var r;(null===(r=e.children(n))||void 0===r?void 0:r.length)||t.setNode(n,e.node(n))})),e.edges().forEach((function(n){t.setEdgeObj(n,e.edge(n))})),t};e.zipObject=function(e,t){return null==e?void 0:e.reduce((function(e,n,r){return e[n]=t[r],e}),{})};e.successorWeights=function(e){var t={};return e.nodes().forEach((function(n){var r,i={};null===(r=e.outEdges(n))||void 0===r||r.forEach((function(t){var n;i[t.w]=(i[t.w]||0)+((null===(n=e.edge(t))||void 0===n?void 0:n.weight)||0)})),t[n]=i})),t};e.predecessorWeights=function(t){var n=t.nodes(),r=n.map((function(e){var n,r={};return null===(n=t.inEdges(e))||void 0===n||n.forEach((function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return(0,e.zipObject)(n,r)};e.intersectRect=function(e,t){var n,r,i=Number(e.x),o=Number(e.y),a=Number(t.x)-i,s=Number(t.y)-o,l=Number(e.width)/2,c=Number(e.height)/2;return a||s?(Math.abs(s)*l>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(l=-l),n=l,r=l*s/a),{x:i+n,y:o+r}):{x:0,y:0}};e.buildLayerMatrix=function(t){for(var n=[],r=(0,e.maxRank)(t)+1,i=0;i<r;i++)n.push([]);t.nodes().forEach((function(e){var r=t.node(e).rank;void 0!==r&&n[r]&&n[r].push(e)}));for(i=0;i<r;i++)n[i]=n[i].sort((function(e,n){var r,i,o,a;return o=null===(r=t.node(e))||void 0===r?void 0:r.order,a=null===(i=t.node(n))||void 0===i?void 0:i.order,Number(o)-Number(a)}));return n};e.normalizeRanks=function(e){var t=e.nodes().filter((function(t){var n;return void 0!==(null===(n=e.node(t))||void 0===n?void 0:n.rank)})).map((function(t){return e.node(t).rank})),n=Math.min.apply(Math,t);e.nodes().forEach((function(t){var r=e.node(t);r.hasOwnProperty("rank")&&n!==1/0&&(r.rank-=n)}))};e.removeEmptyRanks=function(e){var t=e.nodes(),n=t.filter((function(t){var n;return void 0!==(null===(n=e.node(t))||void 0===n?void 0:n.rank)})).map((function(t){return e.node(t).rank})),r=Math.min.apply(Math,n),i=[];t.forEach((function(t){var n,o=((null===(n=e.node(t))||void 0===n?void 0:n.rank)||0)-r;i[o]||(i[o]=[]),i[o].push(t)}));for(var o=0,a=e.graph().nodeRankFactor||0,s=0;s<i.length;s++){var l=i[s];void 0===l?s%a!=0&&(o-=1):o&&(null==l||l.forEach((function(t){var n=e.node(t);n&&(n.rank=n.rank||0,n.rank+=o)})))}};e.addBorderNode=function(n,r,i,o){var a={width:0,height:0};return(0,t.isNumber)(i)&&(0,t.isNumber)(o)&&(a.rank=i,a.order=o),(0,e.addDummyNode)(n,"border",a,r)};e.maxRank=function(e){var t;return e.nodes().forEach((function(n){var r,i=null===(r=e.node(n))||void 0===r?void 0:r.rank;void 0!==i&&(void 0===t||i>t)&&(t=i)})),t||(t=0),t};e.partition=function(e,t){var n={lhs:[],rhs:[]};return null==e||e.forEach((function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n};e.time=function(e,t){Date.now();try{return t()}finally{}};e.notime=function(e,t){return t()};e.minBy=function(e,t){return e.reduce((function(e,n){return t(e)>t(n)?n:e}))}}(util$1),Object.defineProperty(normalize,"__esModule",{value:!0});var util_1$k=util$1,run$1=function(e){e.graph().dummyChains=[],e.edges().forEach((function(t){return normalizeEdge(e,t)}))},normalizeEdge=function(e,t){var n=t.v,r=e.node(n).rank,i=t.w,o=e.node(i).rank,a=t.name,s=e.edge(t),l=s.labelRank;if(o!==r+1){e.removeEdgeObj(t);var c,u,h,d=e.graph();for(h=0,++r;r<o;++h,++r)s.points=[],u={edgeLabel:s,width:0,height:0,edgeObj:t,rank:r},c=(0,util_1$k.addDummyNode)(e,"edge",u,"_d"),r===l&&(u.width=s.width,u.height=s.height,u.dummy="edge-label",u.labelpos=s.labelpos),e.setEdge(n,c,{weight:s.weight},a),0===h&&(d.dummyChains||(d.dummyChains=[]),d.dummyChains.push(c)),n=c;e.setEdge(n,i,{weight:s.weight},a)}},undo$1=function(e){var t;null===(t=e.graph().dummyChains)||void 0===t||t.forEach((function(t){var n,r=e.node(t),i=r.edgeLabel;r.edgeObj&&e.setEdgeObj(r.edgeObj,i);for(var o=t;r.dummy;)n=e.successors(o)[0],e.removeNode(o),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),o=n,r=e.node(o)}))};normalize.default={run:run$1,undo:undo$1};var rank$1={},util={};Object.defineProperty(util,"__esModule",{value:!0}),util.slack=util.longestPathWithLayer=util.longestPath=void 0;var longestPath=function(e){var t,n={},r=function(t){var i,o,a=e.node(t);return n[t]?a.rank:(n[t]=!0,null===(i=e.outEdges(t))||void 0===i||i.forEach((function(t){var n=r(t.w)-e.edge(t).minlen;n&&(void 0===o||n<o)&&(o=n)})),o||(o=0),a.rank=o,o)};null===(t=e.sources())||void 0===t||t.forEach((function(e){return r(e)}))};util.longestPath=longestPath;var longestPathWithLayer=function(e){var t,n,r={},i=function(t){var o,a,s=e.node(t);return r[t]?s.rank:(r[t]=!0,null===(o=e.outEdges(t))||void 0===o||o.forEach((function(t){var n=i(t.w)-e.edge(t).minlen;n&&(void 0===a||n<a)&&(a=n)})),a||(a=0),(void 0===n||a<n)&&(n=a),s.rank=a,a)};null===(t=e.sources())||void 0===t||t.forEach((function(e){return i(e)})),void 0===n&&(n=0);var o={},a=function(t,n){var r,i=e.node(t),s=isNaN(i.layer)?n:i.layer;(void 0===i.rank||i.rank<s)&&(i.rank=s),o[t]||(o[t]=!0,null===(r=e.outEdges(t))||void 0===r||r.map((function(t){a(t.w,s+e.edge(t).minlen)})))};e.nodes().forEach((function(t){var r=e.node(t);isNaN(r.layer)?r.rank-=n:a(t,r.layer)}))};util.longestPathWithLayer=longestPathWithLayer;var slack=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen};util.slack=slack,util.default={longestPath:longestPath,longestPathWithLayer:longestPathWithLayer,slack:slack};var feasibleTree$1={};Object.defineProperty(feasibleTree$1,"__esModule",{value:!0}),feasibleTree$1.feasibleTreeWithLayer=feasibleTree$1.feasibleTree=void 0;var util_1$j=util,util_2$1=util$1,graph_1$4=graph,feasibleTree=function(e){var t,n,r=new graph_1$4.Graph({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});tightTree(r,e)<o;)t=findMinSlackEdge(r,e),n=r.hasNode(t.v)?(0,util_1$j.slack)(e,t):-(0,util_1$j.slack)(e,t),shiftRanks(r,e,n);return r};feasibleTree$1.feasibleTree=feasibleTree;var tightTree=function(e,t){var n=function(r){t.nodeEdges(r).forEach((function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||(0,util_1$j.slack)(t,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))}))};return e.nodes().forEach(n),e.nodeCount()},feasibleTreeWithLayer=function(e){var t,n,r=new graph_1$4.Graph({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});tightTreeWithLayer(r,e)<o;)t=findMinSlackEdge(r,e),n=r.hasNode(t.v)?(0,util_1$j.slack)(e,t):-(0,util_1$j.slack)(e,t),shiftRanks(r,e,n);return r};feasibleTree$1.feasibleTreeWithLayer=feasibleTreeWithLayer;var tightTreeWithLayer=function(e,t){var n=function(r){var i;null===(i=t.nodeEdges(r))||void 0===i||i.forEach((function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||void 0===t.node(a).layer&&(0,util_1$j.slack)(t,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))}))};return e.nodes().forEach(n),e.nodeCount()},findMinSlackEdge=function(e,t){return(0,util_2$1.minBy)(t.edges(),(function(n){return e.hasNode(n.v)!==e.hasNode(n.w)?(0,util_1$j.slack)(t,n):1/0}))},shiftRanks=function(e,t,n){e.nodes().forEach((function(e){t.node(e).rank||(t.node(e).rank=0),t.node(e).rank+=n}))};feasibleTree$1.default={feasibleTree:feasibleTree,feasibleTreeWithLayer:feasibleTreeWithLayer};var networkSimplex={};!function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.exchangeEdges=e.enterEdge=e.leaveEdge=e.initLowLimValues=e.calcCutValue=e.initCutValues=void 0;var t=feasibleTree$1,n=util,r=util$1,i=require$$0$1,o=i.algorithm.preorder,a=i.algorithm.postorder;e.initCutValues=function(e,t){var n=a(e,e.nodes());null==(n=null==n?void 0:n.slice(0,(null==n?void 0:n.length)-1))||n.forEach((function(n){s(e,t,n)}))};var s=function(t,n,r){var i=t.node(r).parent;t.edgeFromArgs(r,i).cutvalue=(0,e.calcCutValue)(t,n,r)};e.calcCutValue=function(e,t,n){var r,i=e.node(n).parent,o=!0,a=t.edgeFromArgs(n,i),s=0;return a||(o=!1,a=t.edgeFromArgs(i,n)),s=a.weight,null===(r=t.nodeEdges(n))||void 0===r||r.forEach((function(r){var a=r.v===n,l=a?r.w:r.v;if(l!==i){var c=a===o,h=t.edge(r).weight;if(s+=c?h:-h,u(e,n,l)){var d=e.edgeFromArgs(n,l).cutvalue;s+=c?-d:d}}})),s};e.initLowLimValues=function(e,t){void 0===t&&(t=e.nodes()[0]),l(e,{},1,t)};var l=function(e,t,n,r,i){var o,a=n,s=n,c=e.node(r);return t[r]=!0,null===(o=e.neighbors(r))||void 0===o||o.forEach((function(n){t[n]||(s=l(e,t,s,n,r))})),c.low=a,c.lim=s++,i?c.parent=i:delete c.parent,s};e.leaveEdge=function(e){return e.edges().find((function(t){return e.edge(t).cutvalue<0}))};e.enterEdge=function(e,t,i){var o=i.v,a=i.w;t.hasEdge(o,a)||(o=i.w,a=i.v);var s=e.node(o),l=e.node(a),c=s,u=!1;s.lim>l.lim&&(c=l,u=!0);var d=t.edges().filter((function(t){return u===h(e,e.node(t.v),c)&&u!==h(e,e.node(t.w),c)}));return(0,r.minBy)(d,(function(e){return(0,n.slack)(t,e)}))};e.exchangeEdges=function(t,n,r,i){var o=r.v,a=r.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),(0,e.initLowLimValues)(t),(0,e.initCutValues)(t,n),c(t,n)};var c=function(e,t){var n=e.nodes().find((function(e){var n;return!(null===(n=t.node(e))||void 0===n?void 0:n.parent)})),r=o(e,n);null==(r=null==r?void 0:r.slice(1))||r.forEach((function(n){var r=e.node(n).parent,i=t.edgeFromArgs(n,r),o=!1;i||(i=t.edgeFromArgs(r,n),o=!0),t.node(n).rank=t.node(r).rank+(o?i.minlen:-i.minlen)}))},u=function(e,t,n){return e.hasEdge(t,n)},h=function(e,t,n){return n.low<=t.lim&&t.lim<=n.lim};e.default=function(i){var o=(0,r.simplify)(i);(0,n.longestPath)(o);var a,s,l=(0,t.feasibleTree)(o);for((0,e.initLowLimValues)(l),(0,e.initCutValues)(l,o);a=(0,e.leaveEdge)(l);)s=(0,e.enterEdge)(l,o,a),(0,e.exchangeEdges)(l,o,a,s)}}(networkSimplex);var __importDefault$a=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rank$1,"__esModule",{value:!0});var util_1$i=util,feasible_tree_1=feasibleTree$1,network_simplex_1=__importDefault$a(networkSimplex),rank=function(e){switch(e.graph().ranker){case"network-simplex":networkSimplexRanker(e);break;case"tight-tree":default:tightTreeRanker(e);break;case"longest-path":longestPathRanker(e)}},longestPathRanker=util_1$i.longestPath,tightTreeRanker=function(e){(0,util_1$i.longestPathWithLayer)(e),(0,feasible_tree_1.feasibleTreeWithLayer)(e)},networkSimplexRanker=function(e){(0,network_simplex_1.default)(e)};rank$1.default=rank;var parentDummyChains$1={};Object.defineProperty(parentDummyChains$1,"__esModule",{value:!0});var dfsBothOrder=function(e){var t,n={},r=0,i=function(t){var o,a=r;null===(o=e.children(t))||void 0===o||o.forEach(i),n[t]={low:a,lim:r++}};return null===(t=e.children())||void 0===t||t.forEach(i),n},findPath=function(e,t,n,r){var i,o,a=[],s=[],l=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>l||c>t[i].lim));for(o=i,i=r;i&&i!==o;)s.push(i),i=e.parent(i);return{lca:o,path:a.concat(s.reverse())}},parentDummyChains=function(e){var t,n=dfsBothOrder(e);null===(t=e.graph().dummyChains)||void 0===t||t.forEach((function(t){var r,i,o=t,a=e.node(o),s=a.edgeObj;if(s)for(var l=findPath(e,n,s.v,s.w),c=l.path,u=l.lca,h=0,d=c[h],f=!0;o!==s.w;){if(a=e.node(o),f){for(;d!==u&&(null===(r=e.node(d))||void 0===r?void 0:r.maxRank)<a.rank;)d=c[++h];d===u&&(f=!1)}if(!f){for(;h<c.length-1&&(null===(i=e.node(c[h+1]))||void 0===i?void 0:i.minRank)<=a.rank;)h++;d=c[h]}e.setParent(o,d),o=e.successors(o)[0]}}))};parentDummyChains$1.default=parentDummyChains;var nestingGraph={};Object.defineProperty(nestingGraph,"__esModule",{value:!0});var util_1$h=util$1,run=function(e){var t,n=(0,util_1$h.addDummyNode)(e,"root",{},"_root"),r=treeDepths(e),i=Math.max.apply(Math,Object.values(r));Math.abs(i)===1/0&&(i=1);var o=i-1,a=2*o+1;e.graph().nestingRoot=n,e.edges().forEach((function(t){e.edge(t).minlen*=a}));var s=sumWeights(e)+1;null===(t=e.children())||void 0===t||t.forEach((function(t){dfs(e,n,a,s,o,r,t)})),e.graph().nodeRankFactor=a},dfs=function(e,t,n,r,i,o,a){var s=e.children(a);if(null==s?void 0:s.length){var l=(0,util_1$h.addBorderNode)(e,"_bt"),c=(0,util_1$h.addBorderNode)(e,"_bb"),u=e.node(a);e.setParent(l,a),u.borderTop=l,e.setParent(c,a),u.borderBottom=c,null==s||s.forEach((function(s){dfs(e,t,n,r,i,o,s);var u=e.node(s),h=u.borderTop?u.borderTop:s,d=u.borderBottom?u.borderBottom:s,f=u.borderTop?r:2*r,p=h!==d?1:i-o[a]+1;e.setEdge(l,h,{minlen:p,weight:f,nestingEdge:!0}),e.setEdge(d,c,{minlen:p,weight:f,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+o[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})},treeDepths=function(e){var t,n={},r=function(t,i){var o=e.children(t);null==o||o.forEach((function(e){return r(e,i+1)})),n[t]=i};return null===(t=e.children())||void 0===t||t.forEach((function(e){return r(e,1)})),n},sumWeights=function(e){var t=0;return e.edges().forEach((function(n){t+=e.edge(n).weight})),t},cleanup=function(e){var t=e.graph();t.nestingRoot&&e.removeNode(t.nestingRoot),delete t.nestingRoot,e.edges().forEach((function(t){e.edge(t).nestingEdge&&e.removeEdgeObj(t)}))};nestingGraph.default={run:run,cleanup:cleanup};var addBorderSegments$1={};Object.defineProperty(addBorderSegments$1,"__esModule",{value:!0});var util_1$g=util$1,addBorderSegments=function(e){var t,n=function(t){var r=e.children(t),i=e.node(t);if((null==r?void 0:r.length)&&r.forEach((function(e){return n(e)})),i.hasOwnProperty("minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;o+=1)addBorderNode(e,"borderLeft","_bl",t,i,o),addBorderNode(e,"borderRight","_br",t,i,o)}};null===(t=e.children())||void 0===t||t.forEach((function(e){return n(e)}))},addBorderNode=function(e,t,n,r,i,o){var a={rank:o,borderType:t,width:0,height:0},s=i[t][o-1],l=(0,util_1$g.addDummyNode)(e,"border",a,n);i[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})};addBorderSegments$1.default=addBorderSegments;var coordinateSystem={};Object.defineProperty(coordinateSystem,"__esModule",{value:!0});var adjust=function(e){var t,n=null===(t=e.graph().rankdir)||void 0===t?void 0:t.toLowerCase();"lr"!==n&&"rl"!==n||swapWidthHeight(e)},undo=function(e){var t,n=null===(t=e.graph().rankdir)||void 0===t?void 0:t.toLowerCase();"bt"!==n&&"rl"!==n||reverseY(e),"lr"!==n&&"rl"!==n||(swapXY(e),swapWidthHeight(e))},swapWidthHeight=function(e){e.nodes().forEach((function(t){swapWidthHeightOne(e.node(t))})),e.edges().forEach((function(t){swapWidthHeightOne(e.edge(t))}))},swapWidthHeightOne=function(e){var t=e.width;e.width=e.height,e.height=t},reverseY=function(e){e.nodes().forEach((function(t){reverseYOne(e.node(t))})),e.edges().forEach((function(t){var n,r=e.edge(t);null===(n=r.points)||void 0===n||n.forEach((function(e){return reverseYOne(e)})),r.hasOwnProperty("y")&&reverseYOne(r)}))},reverseYOne=function(e){(null==e?void 0:e.y)&&(e.y=-e.y)},swapXY=function(e){e.nodes().forEach((function(t){swapXYOne(e.node(t))})),e.edges().forEach((function(t){var n,r=e.edge(t);null===(n=r.points)||void 0===n||n.forEach((function(e){return swapXYOne(e)})),r.hasOwnProperty("x")&&swapXYOne(r)}))},swapXYOne=function(e){var t=e.x;e.x=e.y,e.y=t};coordinateSystem.default={adjust:adjust,undo:undo};var order$1={},initOrder$1={};Object.defineProperty(initOrder$1,"__esModule",{value:!0});var initOrder=function(e){for(var t={},n=e.nodes().filter((function(t){var n;return!(null===(n=e.children(t))||void 0===n?void 0:n.length)})),r=n.map((function(t){return e.node(t).rank})),i=Math.max.apply(Math,r),o=[],a=0;a<i+1;a++)o.push([]);var s=function(n){var r;if(!t.hasOwnProperty(n)){t[n]=!0;var i=e.node(n);isNaN(i.rank)||o[i.rank].push(n),null===(r=e.successors(n))||void 0===r||r.forEach((function(e){return s(e)}))}},l=n.sort((function(t,n){return e.node(t).rank-e.node(n).rank})),c=l.filter((function(t){return void 0!==e.node(t).fixorder})).sort((function(t,n){return e.node(t).fixorder-e.node(n).fixorder}));return null==c||c.forEach((function(n){isNaN(e.node(n).rank)||o[e.node(n).rank].push(n),t[n]=!0})),null==l||l.forEach(s),o};initOrder$1.default=initOrder;var crossCount$1={};Object.defineProperty(crossCount$1,"__esModule",{value:!0});var util_1$f=util$1,twoLayerCrossCount=function(e,t,n){for(var r=(0,util_1$f.zipObject)(n,n.map((function(e,t){return t}))),i=t.map((function(t){var n,i=null===(n=e.outEdges(t))||void 0===n?void 0:n.map((function(t){return{pos:r[t.w]||0,weight:e.edge(t).weight}}));return null==i?void 0:i.sort((function(e,t){return e.pos-t.pos}))})).flat().filter((function(e){return void 0!==e})),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=Array(a).fill(0,0,a),l=0;return null==i||i.forEach((function(e){if(e){var t=e.pos+o;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),s[t=t-1>>1]+=e.weight;l+=e.weight*n}})),l},crossCount=function(e,t){for(var n=0,r=1;r<(null==t?void 0:t.length);r+=1)n+=twoLayerCrossCount(e,t[r-1],t[r]);return n};crossCount$1.default=crossCount;var buildLayerGraph$1={};Object.defineProperty(buildLayerGraph$1,"__esModule",{value:!0});var graph_1$3=graph,buildLayerGraph=function(e,t,n){var r=createRootNode(e),i=new graph_1$3.Graph({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(t){return e.node(t)}));return e.nodes().forEach((function(o){var a,s=e.node(o),l=e.parent(o);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(i.setNode(o),i.setParent(o,l||r),null===(a=e[n](o))||void 0===a||a.forEach((function(t){var n=t.v===o?t.w:t.v,r=i.edgeFromArgs(n,o),a=void 0!==r?r.weight:0;i.setEdge(n,o,{weight:e.edge(t).weight+a})})),s.hasOwnProperty("minRank")&&i.setNode(o,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))})),i},createRootNode=function(e){for(var t;e.hasNode(t="_root".concat(Math.random())););return t};buildLayerGraph$1.default=buildLayerGraph;var addSubgraphConstraints$1={};Object.defineProperty(addSubgraphConstraints$1,"__esModule",{value:!0});var addSubgraphConstraints=function(e,t,n){var r,i={};null==n||n.forEach((function(n){for(var o,a,s=e.parent(n);s;){if((o=e.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void t.setEdge(a,s);s=o}}))};addSubgraphConstraints$1.default=addSubgraphConstraints;var sortSubgraph$1={},barycenter$1={};Object.defineProperty(barycenter$1,"__esModule",{value:!0});var barycenter=function(e,t){return t.map((function(t){var n=e.inEdges(t);if(!(null==n?void 0:n.length))return{v:t};var r={sum:0,weight:0};return null==n||n.forEach((function(t){var n=e.edge(t),i=e.node(t.v);r.sum+=n.weight*i.order,r.weight+=n.weight})),{v:t,barycenter:r.sum/r.weight,weight:r.weight}}))};barycenter$1.default=barycenter;var resolveConflicts$1={};Object.defineProperty(resolveConflicts$1,"__esModule",{value:!0});var resolveConflicts=function(e,t){var n,r,i,o={};null==e||e.forEach((function(e,t){o[e.v]={i:t,indegree:0,in:[],out:[],vs:[e.v]};var n=o[e.v];void 0!==e.barycenter&&(n.barycenter=e.barycenter,n.weight=e.weight)})),null===(n=t.edges())||void 0===n||n.forEach((function(e){var t=o[e.v],n=o[e.w];void 0!==t&&void 0!==n&&(n.indegree++,t.out.push(o[e.w]))}));var a=null===(i=(r=Object.values(o)).filter)||void 0===i?void 0:i.call(r,(function(e){return!e.indegree}));return doResolveConflicts(a)},doResolveConflicts=function(e){for(var t,n,r=[],i=function(){var i=e.pop();r.push(i),null===(t=i.in.reverse())||void 0===t||t.forEach((function(e){return(t=i,function(e){e.merged||(void 0===e.barycenter||void 0===t.barycenter||e.barycenter>=t.barycenter)&&mergeEntries(t,e)})(e);var t})),null===(n=i.out)||void 0===n||n.forEach((function(t){return(n=i,function(t){t.in.push(n),0==--t.indegree&&e.push(t)})(t);var n}))};null==e?void 0:e.length;)i();var o=r.filter((function(e){return!e.merged})),a=["vs","i","barycenter","weight"];return o.map((function(e){var t={};return null==a||a.forEach((function(n){void 0!==e[n]&&(t[n]=e[n])})),t}))},mergeEntries=function(e,t){var n,r=0,i=0;e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.vs=null===(n=t.vs)||void 0===n?void 0:n.concat(e.vs),e.barycenter=r/i,e.weight=i,e.i=Math.min(t.i,e.i),t.merged=!0};resolveConflicts$1.default=resolveConflicts;var sort$1={};Object.defineProperty(sort$1,"__esModule",{value:!0});var util_1$e=util$1,sort=function(e,t,n){var r=(0,util_1$e.partition)(e,(function(e){return e.hasOwnProperty("fixorder")&&!isNaN(e.fixorder)||e.hasOwnProperty("barycenter")})),i=r.lhs,o=r.rhs.sort((function(e,t){return-e.i- -t.i})),a=[],s=0,l=0,c=0;null==i||i.sort(compareWithBias(!!t,!!n)),c=consumeUnsortable(a,o,c),null==i||i.forEach((function(e){var t;c+=null===(t=e.vs)||void 0===t?void 0:t.length,a.push(e.vs),s+=e.barycenter*e.weight,l+=e.weight,c=consumeUnsortable(a,o,c)}));var u={vs:a.flat()};return l&&(u.barycenter=s/l,u.weight=l),u},consumeUnsortable=function(e,t,n){for(var r,i=n;t.length&&(r=t[t.length-1]).i<=i;)t.pop(),null==e||e.push(r.vs),i++;return i},compareWithBias=function(e,t){return function(n,r){if(void 0!==n.fixorder&&void 0!==r.fixorder)return n.fixorder-r.fixorder;if(n.barycenter<r.barycenter)return-1;if(n.barycenter>r.barycenter)return 1;if(t&&void 0!==n.order&&void 0!==r.order){if(n.order<r.order)return-1;if(n.order>r.order)return 1}return e?r.i-n.i:n.i-r.i}};sort$1.default=sort;var __importDefault$9=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sortSubgraph$1,"__esModule",{value:!0});var barycenter_1=__importDefault$9(barycenter$1),resolve_conflicts_1=__importDefault$9(resolveConflicts$1),sort_1=__importDefault$9(sort$1),sortSubgraph=function(e,t,n,r,i){var o,a,s,l,c=e.children(t),u=e.node(t),h=u?u.borderLeft:void 0,d=u?u.borderRight:void 0,f={};h&&(c=null==c?void 0:c.filter((function(e){return e!==h&&e!==d})));var p=(0,barycenter_1.default)(e,c||[]);null==p||p.forEach((function(t){var i;if(null===(i=e.children(t.v))||void 0===i?void 0:i.length){var o=sortSubgraph(e,t.v,n,r);f[t.v]=o,o.hasOwnProperty("barycenter")&&mergeBarycenters(t,o)}}));var g=(0,resolve_conflicts_1.default)(p,n);expandSubgraphs(g,f),null===(o=g.filter((function(e){return e.vs.length>0})))||void 0===o||o.forEach((function(t){var n=e.node(t.vs[0]);n&&(t.fixorder=n.fixorder,t.order=n.order)}));var m=(0,sort_1.default)(g,r,i);if(h&&(m.vs=[h,m.vs,d].flat(),null===(a=e.predecessors(h))||void 0===a?void 0:a.length)){var v=e.node((null===(s=e.predecessors(h))||void 0===s?void 0:s[0])||""),y=e.node((null===(l=e.predecessors(d))||void 0===l?void 0:l[0])||"");m.hasOwnProperty("barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+v.order+y.order)/(m.weight+2),m.weight+=2}return m},expandSubgraphs=function(e,t){null==e||e.forEach((function(e){var n,r=null===(n=e.vs)||void 0===n?void 0:n.map((function(e){return t[e]?t[e].vs:e}));e.vs=r.flat()}))},mergeBarycenters=function(e,t){void 0!==e.barycenter?(e.barycenter=(e.barycenter*e.weight+t.barycenter*t.weight)/(e.weight+t.weight),e.weight+=t.weight):(e.barycenter=t.barycenter,e.weight=t.weight)};sortSubgraph$1.default=sortSubgraph;var __importDefault$8=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(order$1,"__esModule",{value:!0});var init_order_1=__importDefault$8(initOrder$1),cross_count_1=__importDefault$8(crossCount$1),build_layer_graph_1=__importDefault$8(buildLayerGraph$1),add_subgraph_constraints_1=__importDefault$8(addSubgraphConstraints$1),sort_subgraph_1=__importDefault$8(sortSubgraph$1),util_1$d=requireUtil(),graph_1$2=graph,util_2=util$1,order=function(e){for(var t=(0,util_2.maxRank)(e),n=[],r=[],i=1;i<t+1;i++)n.push(i);for(i=t-1;i>-1;i--)r.push(i);var o=buildLayerGraphs(e,n,"inEdges"),a=buildLayerGraphs(e,r,"outEdges"),s=(0,init_order_1.default)(e);assignOrder(e,s);for(var l,c=Number.POSITIVE_INFINITY,u=(i=0,0);u<4;++i,++u){sweepLayerGraphs(i%2?o:a,i%4>=2),s=(0,util_2.buildLayerMatrix)(e),(h=(0,cross_count_1.default)(e,s))<c&&(u=0,l=(0,util_1$d.clone)(s),c=h)}s=(0,init_order_1.default)(e),assignOrder(e,s);for(i=0,u=0;u<4;++i,++u){var h;sweepLayerGraphs(i%2?o:a,i%4>=2,!0),s=(0,util_2.buildLayerMatrix)(e),(h=(0,cross_count_1.default)(e,s))<c&&(u=0,l=(0,util_1$d.clone)(s),c=h)}assignOrder(e,l)},buildLayerGraphs=function(e,t,n){return t.map((function(t){return(0,build_layer_graph_1.default)(e,t,n)}))},sweepLayerGraphs=function(e,t,n){var r=new graph_1$2.Graph;null==e||e.forEach((function(e){for(var i,o=e.graph().root,a=(0,sort_subgraph_1.default)(e,o,r,t,n),s=0;s<(null===(i=a.vs)||void 0===i?void 0:i.length);s++){var l=e.node(a.vs[s]);l&&(l.order=s)}(0,add_subgraph_constraints_1.default)(e,r,a.vs)}))},assignOrder=function(e,t){null==t||t.forEach((function(t){null==t||t.forEach((function(t,n){e.node(t).order=n}))}))};order$1.default=order;var position$1={},bk={};!function(e){var t=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.width=e.sep=e.positionX=e.balance=e.alignCoordinates=e.findSmallestWidthAlignment=e.buildBlockGraph=e.horizontalCompaction=e.verticalAlignment=e.hasConflict=e.addConflict=e.findOtherInnerSegmentNode=e.findType2Conflicts=e.findType1Conflicts=void 0;var n=util$1,r=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return t(n,e),n}(require$$0$1.Graph);e.findType1Conflicts=function(t,n){var r={};return(null==n?void 0:n.length)&&n.reduce((function(n,i){var o=0,a=0,s=n.length,l=null==i?void 0:i[(null==i?void 0:i.length)-1];return null==i||i.forEach((function(n,c){var u,h=(0,e.findOtherInnerSegmentNode)(t,n),d=h?t.node(h).order:s;(h||n===l)&&(null===(u=i.slice(a,c+1))||void 0===u||u.forEach((function(n){var i;null===(i=t.predecessors(n))||void 0===i||i.forEach((function(i){var a,s=t.node(i),l=s.order;!(l<o||d<l)||s.dummy&&(null===(a=t.node(n))||void 0===a?void 0:a.dummy)||(0,e.addConflict)(r,i,n)}))})),a=c+1,o=d)})),i})),r};e.findType2Conflicts=function(t,n){var r={},i=function(n,i,o,a,s){for(var l,c=[],u=i;u<o;u++)c.push(u);c.forEach((function(i){var o,c;l=n[i],(null===(o=t.node(l))||void 0===o?void 0:o.dummy)&&(null===(c=t.predecessors(l))||void 0===c||c.forEach((function(n){var i=t.node(n);i.dummy&&(i.order<a||i.order>s)&&(0,e.addConflict)(r,n,l)})))}))};return(null==n?void 0:n.length)&&n.reduce((function(e,n){var r,o=-1,a=0;return null==n||n.forEach((function(s,l){var c;if("border"===(null===(c=t.node(s))||void 0===c?void 0:c.dummy)){var u=t.predecessors(s)||[];u.length&&(r=t.node(u[0]).order,i(n,a,l,o,r),a=l,o=r)}i(n,a,n.length,r,e.length)})),n})),r};e.findOtherInnerSegmentNode=function(e,t){var n,r;if(null===(n=e.node(t))||void 0===n?void 0:n.dummy)return null===(r=e.predecessors(t))||void 0===r?void 0:r.find((function(t){return e.node(t).dummy}))};e.addConflict=function(e,t,n){var r=t,i=n;if(r>i){var o=r;r=i,i=o}var a=e[r];a||(e[r]=a={}),a[i]=!0};e.hasConflict=function(e,t,n){var r=t;r>n&&(r=n);return!!e[r]};e.verticalAlignment=function(t,n,r,i){var o={},a={},s={};return null==n||n.forEach((function(e){null==e||e.forEach((function(e,t){o[e]=e,a[e]=e,s[e]=t}))})),null==n||n.forEach((function(t){var n=-1;null==t||t.forEach((function(t){var l=i(t);if(l.length)for(var c=((l=l.sort((function(e,t){return s[e]-s[t]}))).length-1)/2,u=Math.floor(c),h=Math.ceil(c);u<=h;++u){var d=l[u];a[t]===t&&n<s[d]&&!(0,e.hasConflict)(r,t,d)&&(a[d]=t,a[t]=o[t]=o[d],n=s[d])}}))})),{root:o,align:a}};e.horizontalCompaction=function(t,n,r,i,o){var a,s={},l=(0,e.buildBlockGraph)(t,n,r,o),c=o?"borderLeft":"borderRight",u=function(e,t){for(var n=l.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()};return u((function(e){s[e]=(l.inEdges(e)||[]).reduce((function(e,t){return Math.max(e,(s[t.v]||0)+l.edge(t))}),0)}),l.predecessors.bind(l)),u((function(e){var n=(l.outEdges(e)||[]).reduce((function(e,t){return Math.min(e,(s[t.w]||0)-l.edge(t))}),Number.POSITIVE_INFINITY),r=t.node(e);n!==Number.POSITIVE_INFINITY&&r.borderType!==c&&(s[e]=Math.max(s[e],n))}),l.successors.bind(l)),null===(a=Object.values(i))||void 0===a||a.forEach((function(e){s[e]=s[r[e]]})),s};e.buildBlockGraph=function(t,n,i,o){var a=new r,s=t.graph(),l=(0,e.sep)(s.nodesep,s.edgesep,o);return null==n||n.forEach((function(e){var n;null==e||e.forEach((function(e){var r=i[e];if(a.setNode(r),n){var o=i[n],s=a.edgeFromArgs(o,r);a.setEdge(o,r,Math.max(l(t,e,n),s||0))}n=e}))})),a};function i(e,t){var n=Object.values(t),r=Math.min.apply(Math,n),i=Math.max.apply(Math,n);["u","d"].forEach((function(n){["l","r"].forEach((function(o){var a,s=n+o,l=e[s];if(l!==t){var c=Object.values(l);(a="l"===o?r-Math.min.apply(Math,c):i-Math.max.apply(Math,c))&&(e[s]={},Object.keys(l).forEach((function(t){e[s][t]=l[t]+a})))}}))}))}e.findSmallestWidthAlignment=function(t,r){return(0,n.minBy)(Object.values(r),(function(n){var r,i=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return null===(r=Object.keys(n))||void 0===r||r.forEach((function(r){var a=n[r],s=(0,e.width)(t,r)/2;i=Math.max(a+s,i),o=Math.min(a-s,o)})),i-o}))},e.alignCoordinates=i;e.balance=function(e,t){var n={};return Object.keys(e.ul).forEach((function(r){if(t)n[r]=e[t.toLowerCase()][r];else{var i=Object.values(e).map((function(e){return e[r]}));n[r]=(i[0]+i[1])/2}})),n};e.positionX=function(t){var r,o=(0,n.buildLayerMatrix)(t),a=Object.assign((0,e.findType1Conflicts)(t,o),(0,e.findType2Conflicts)(t,o)),s={};["u","d"].forEach((function(n){r="u"===n?o:Object.values(o).reverse(),["l","r"].forEach((function(i){"r"===i&&(r=r.map((function(e){return Object.values(e).reverse()})));var o=("u"===n?t.predecessors:t.successors).bind(t),l=(0,e.verticalAlignment)(t,r,a,o),c=(0,e.horizontalCompaction)(t,r,l.root,l.align,"r"===i);"r"===i&&Object.keys(c).forEach((function(e){c[e]=-c[e]})),s[n+i]=c}))}));var l=(0,e.findSmallestWidthAlignment)(t,s);return i(s,l),(0,e.balance)(s,t.graph().align)};e.sep=function(e,t,n){return function(r,i,o){var a,s=r.node(i),l=r.node(o),c=0;if(c+=s.width/2,s.hasOwnProperty("labelpos"))switch((s.labelpos||"").toLowerCase()){case"l":a=-s.width/2;break;case"r":a=s.width/2}if(a&&(c+=n?a:-a),a=0,c+=(s.dummy?t:e)/2,c+=(l.dummy?t:e)/2,c+=l.width/2,l.labelpos)switch((l.labelpos||"").toLowerCase()){case"l":a=l.width/2;break;case"r":a=-l.width/2}return a&&(c+=n?a:-a),a=0,c}};e.width=function(e,t){return e.node(t).width||0}}(bk);var __spreadArray$2=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(position$1,"__esModule",{value:!0});var util_1$c=util$1,bk_1=bk,positionY=function(e){var t=(0,util_1$c.buildLayerMatrix)(e),n=e.graph().ranksep,r=0;null==t||t.forEach((function(t){var i=t.map((function(t){return e.node(t).height})),o=Math.max.apply(Math,__spreadArray$2(__spreadArray$2([],i,!1),[0],!1));null==t||t.forEach((function(t){e.node(t).y=r+o/2})),r+=o+n}))},positionX=function(e){var t=(0,util_1$c.buildLayerMatrix)(e),n=Object.assign((0,bk_1.findType1Conflicts)(e,t),(0,bk_1.findType2Conflicts)(e,t)),r={},i=[];["u","d"].forEach((function(o){i="u"===o?t:Object.values(t).reverse(),["l","r"].forEach((function(t){"r"===t&&(i=i.map((function(e){return Object.values(e).reverse()})));var a=("u"===o?e.predecessors:e.successors).bind(e),s=(0,bk_1.verticalAlignment)(e,i,n,a),l=(0,bk_1.horizontalCompaction)(e,i,s.root,s.align,"r"===t);"r"===t&&Object.keys(l).forEach((function(e){return l[e]=-l[e]})),r[o+t]=l}))}));var o=(0,bk_1.findSmallestWidthAlignment)(e,r);return o&&(0,bk_1.alignCoordinates)(r,o),(0,bk_1.balance)(r,e.graph().align)},position=function(e){var t,n=(0,util_1$c.asNonCompoundGraph)(e);positionY(n);var r=positionX(n);null===(t=Object.keys(r))||void 0===t||t.forEach((function(e){n.node(e).x=r[e]}))};position$1.default=position;var initDataOrder$1={};Object.defineProperty(initDataOrder$1,"__esModule",{value:!0});var initDataOrder=function(e,t){var n=e.nodes().filter((function(t){var n;return!(null===(n=e.children(t))||void 0===n?void 0:n.length)})).map((function(t){return e.node(t).rank})),r=Math.max.apply(Math,n),i=Array(r+1).fill([]);null==t||t.forEach((function(t){var n=e.node(t);n&&!(null==n?void 0:n.dummy)&&(isNaN(n.rank)||(n.fixorder=i[n.rank].length,i[n.rank].push(t)))}))};initDataOrder$1.default=initDataOrder;var __assign$f=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$f.apply(this,arguments)},__importDefault$7=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(layout$6,"__esModule",{value:!0});var acyclic_1=__importDefault$7(acyclic),normalize_1=__importDefault$7(normalize),rank_1=__importDefault$7(rank$1),util_1$b=util$1,parent_dummy_chains_1=__importDefault$7(parentDummyChains$1),nesting_graph_1=__importDefault$7(nestingGraph),add_border_segments_1=__importDefault$7(addBorderSegments$1),coordinate_system_1=__importDefault$7(coordinateSystem),order_1=__importDefault$7(order$1),position_1=__importDefault$7(position$1),init_data_order_1=__importDefault$7(initDataOrder$1),graph_1$1=graph,layout$5=function(e,t){var n=t&&t.debugTiming?util_1$b.time:util_1$b.notime;n("layout",(function(){t&&!t.keepNodeOrder&&t.prevGraph&&n("  inheritOrder",(function(){inheritOrder(e,t.prevGraph)}));var r=n("  buildLayoutGraph",(function(){return buildLayoutGraph(e)}));t&&!1===t.edgeLabelSpace||n("  makeSpaceForEdgeLabels",(function(){makeSpaceForEdgeLabels(r)}));try{n("  runLayout",(function(){runLayout(r,n,t)}))}catch(e11){if("Not possible to find intersection inside of the rectangle"===e11.message)return;throw e11}n("  updateInputGraph",(function(){updateInputGraph(e,r)}))}))},runLayout=function(e,t,n){t("    removeSelfEdges",(function(){removeSelfEdges(e)})),t("    acyclic",(function(){acyclic_1.default.run(e)})),t("    nestingGraph.run",(function(){nesting_graph_1.default.run(e)})),t("    rank",(function(){(0,rank_1.default)((0,util_1$b.asNonCompoundGraph)(e))})),t("    injectEdgeLabelProxies",(function(){injectEdgeLabelProxies(e)})),t("    removeEmptyRanks",(function(){(0,util_1$b.removeEmptyRanks)(e)})),t("    nestingGraph.cleanup",(function(){nesting_graph_1.default.cleanup(e)})),t("    normalizeRanks",(function(){(0,util_1$b.normalizeRanks)(e)})),t("    assignRankMinMax",(function(){assignRankMinMax(e)})),t("    removeEdgeLabelProxies",(function(){removeEdgeLabelProxies(e)})),t("    normalize.run",(function(){normalize_1.default.run(e)})),t("    parentDummyChains",(function(){(0,parent_dummy_chains_1.default)(e)})),t("    addBorderSegments",(function(){(0,add_border_segments_1.default)(e)})),n&&n.keepNodeOrder&&t("    initDataOrder",(function(){(0,init_data_order_1.default)(e,n.nodeOrder)})),t("    order",(function(){(0,order_1.default)(e)})),t("    insertSelfEdges",(function(){insertSelfEdges(e)})),t("    adjustCoordinateSystem",(function(){coordinate_system_1.default.adjust(e)})),t("    position",(function(){(0,position_1.default)(e)})),t("    positionSelfEdges",(function(){positionSelfEdges(e)})),t("    removeBorderNodes",(function(){removeBorderNodes(e)})),t("    normalize.undo",(function(){normalize_1.default.undo(e)})),t("    fixupEdgeLabelCoords",(function(){fixupEdgeLabelCoords(e)})),t("    undoCoordinateSystem",(function(){coordinate_system_1.default.undo(e)})),t("    translateGraph",(function(){translateGraph(e)})),t("    assignNodeIntersects",(function(){assignNodeIntersects(e)})),t("    reversePoints",(function(){reversePointsForReversedEdges(e)})),t("    acyclic.undo",(function(){acyclic_1.default.undo(e)}))},inheritOrder=function(e,t){e.nodes().forEach((function(n){var r=e.node(n),i=t.node(n);void 0!==i?(r.fixorder=i._order,delete i._order):delete r.fixorder}))},updateInputGraph=function(e,t){e.nodes().forEach((function(n){var r,i=e.node(n);if(i){var o=t.node(n);i.x=o.x,i.y=o.y,i._order=o.order,i._rank=o.rank,(null===(r=t.children(n))||void 0===r?void 0:r.length)&&(i.width=o.width,i.height=o.height)}})),e.edges().forEach((function(n){var r=e.edge(n),i=t.edge(n);r.points=i?i.points:[],i&&i.hasOwnProperty("x")&&(r.x=i.x,r.y=i.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height},graphNumAttrs=["nodesep","edgesep","ranksep","marginx","marginy"],graphDefaults={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},graphAttrs=["acyclicer","ranker","rankdir","align"],nodeNumAttrs=["width","height","layer","fixorder"],nodeDefaults={width:0,height:0},edgeNumAttrs=["minlen","weight","width","height","labeloffset"],edgeDefaults={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},edgeAttrs=["labelpos"],buildLayoutGraph=function(e){var t=new graph_1$1.Graph({multigraph:!0,compound:!0}),n=canonicalize(e.graph()),r={};return null==graphAttrs||graphAttrs.forEach((function(e){void 0!==n[e]&&(r[e]=n[e])})),t.setGraph(Object.assign({},graphDefaults,selectNumberAttrs(n,graphNumAttrs),r)),e.nodes().forEach((function(n){var r=canonicalize(e.node(n)),i=__assign$f(__assign$f({},nodeDefaults),r),o=selectNumberAttrs(i,nodeNumAttrs);t.setNode(n,o),t.setParent(n,e.parent(n))})),e.edges().forEach((function(n){var r=canonicalize(e.edge(n)),i={};null==edgeAttrs||edgeAttrs.forEach((function(e){void 0!==r[e]&&(i[e]=r[e])})),t.setEdgeObj(n,Object.assign({},edgeDefaults,selectNumberAttrs(r,edgeNumAttrs),i))})),t},makeSpaceForEdgeLabels=function(e){var t=e.graph();t.ranksep||(t.ranksep=0),t.ranksep/=2,e.nodes().forEach((function(t){var n=e.node(t);isNaN(n.layer)||n.layer||(n.layer=0)})),e.edges().forEach((function(n){var r,i=e.edge(n);i.minlen*=2,"c"!==(null===(r=i.labelpos)||void 0===r?void 0:r.toLowerCase())&&("TB"===t.rankdir||"BT"===t.rankdir?i.width+=i.labeloffset:i.height+=i.labeloffset)}))},injectEdgeLabelProxies=function(e){e.edges().forEach((function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),i={e:t,rank:(e.node(t.w).rank-r.rank)/2+r.rank};(0,util_1$b.addDummyNode)(e,"edge-proxy",i,"_ep")}}))},assignRankMinMax=function(e){var t=0;e.nodes().forEach((function(n){var r,i,o=e.node(n);o.borderTop&&(o.minRank=null===(r=e.node(o.borderTop))||void 0===r?void 0:r.rank,o.maxRank=null===(i=e.node(o.borderBottom))||void 0===i?void 0:i.rank,t=Math.max(t,o.maxRank||-1/0))})),e.graph().maxRank=t},removeEdgeLabelProxies=function(e){e.nodes().forEach((function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))},translateGraph=function(e){var t,n,r=0,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0,l=function(e){if(e){var o=e.x,a=e.y,s=e.width,l=e.height;isNaN(o)||isNaN(s)||(void 0===t&&(t=o-s/2),t=Math.min(t,o-s/2),r=Math.max(r,o+s/2)),isNaN(a)||isNaN(l)||(void 0===n&&(n=a-l/2),n=Math.min(n,a-l/2),i=Math.max(i,a+l/2))}};e.nodes().forEach((function(t){l(e.node(t))})),e.edges().forEach((function(t){var n=e.edge(t);(null==n?void 0:n.hasOwnProperty("x"))&&l(n)})),t-=a,n-=s,e.nodes().forEach((function(r){var i=e.node(r);i&&(i.x-=t,i.y-=n)})),e.edges().forEach((function(r){var i,o=e.edge(r);null===(i=o.points)||void 0===i||i.forEach((function(e){e.x-=t,e.y-=n})),o.hasOwnProperty("x")&&(o.x-=t),o.hasOwnProperty("y")&&(o.y-=n)})),o.width=r-t+a,o.height=i-n+s},assignNodeIntersects=function(e){e.edges().forEach((function(t){var n,r,i=e.edge(t),o=e.node(t.v),a=e.node(t.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift((0,util_1$b.intersectRect)(o,n)),i.points.push((0,util_1$b.intersectRect)(a,r))}))},fixupEdgeLabelCoords=function(e){e.edges().forEach((function(t){var n=e.edge(t);if(null==n?void 0:n.hasOwnProperty("x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))},reversePointsForReversedEdges=function(e){e.edges().forEach((function(t){var n,r=e.edge(t);r.reversed&&(null===(n=r.points)||void 0===n||n.reverse())}))},removeBorderNodes=function(e){e.nodes().forEach((function(t){var n,r,i;if(null===(n=e.children(t))||void 0===n?void 0:n.length){var o=e.node(t),a=e.node(o.borderTop),s=e.node(o.borderBottom),l=e.node(o.borderLeft[(null===(r=o.borderLeft)||void 0===r?void 0:r.length)-1]),c=e.node(o.borderRight[(null===(i=o.borderRight)||void 0===i?void 0:i.length)-1]);o.width=Math.abs((null==c?void 0:c.x)-(null==l?void 0:l.x))||10,o.height=Math.abs((null==s?void 0:s.y)-(null==a?void 0:a.y))||10,o.x=((null==l?void 0:l.x)||0)+o.width/2,o.y=((null==a?void 0:a.y)||0)+o.height/2}})),e.nodes().forEach((function(t){var n;"border"===(null===(n=e.node(t))||void 0===n?void 0:n.dummy)&&e.removeNode(t)}))},removeSelfEdges=function(e){e.edges().forEach((function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdgeObj(t)}}))},insertSelfEdges=function(e){var t=(0,util_1$b.buildLayerMatrix)(e);null==t||t.forEach((function(t){var n=0;null==t||t.forEach((function(t,r){var i,o=e.node(t);o.order=r+n,null===(i=o.selfEdges)||void 0===i||i.forEach((function(t){(0,util_1$b.addDummyNode)(e,"selfedge",{width:t.label.width,height:t.label.height,rank:o.rank,order:r+ ++n,e:t.e,label:t.label},"_se")})),delete o.selfEdges}))}))},positionSelfEdges=function(e){e.nodes().forEach((function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;e.setEdgeObj(n.e,n.label),e.removeNode(t),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{y:o,x:i+a},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))},selectNumberAttrs=function(e,t){var n={};return null==t||t.forEach((function(t){void 0!==e[t]&&(n[t]=+e[t])})),n},canonicalize=function(e){void 0===e&&(e={});var t={};return Object.keys(e).forEach((function(n){t[n.toLowerCase()]=e[n]})),t};layout$6.default=layout$5;var __importDefault$6=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dagre,"__esModule",{value:!0});var layout_1=__importDefault$6(layout$6),util_1$a=util$1;dagre.default={layout:layout_1.default,util:{time:util_1$a.time,notime:util_1$a.notime}};var __extends$n=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__importDefault$5=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dagre$1,"__esModule",{value:!0}),dagre$1.DagreLayout=void 0;var index_1=__importDefault$5(dagre),util_1$9=requireUtil(),base_1$a=base$1,graph_1=graph,DagreLayout=function(e){function t(t){var n=e.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.ranksep=50,n.controlPoints=!1,n.sortByCombo=!1,n.edgeLabelSpace=!0,n.radial=!1,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.layoutNode=function(e){var t=n.nodes.find((function(t){return t.id===e}));return!t||!1!==t.layout},n.updateCfg(t),n}return __extends$n(t,e),t.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},t.prototype.execute=function(){var e,t,n,r=this,i=this,o=i.nodes,a=i.nodeSize,s=i.rankdir,l=i.combos,c=i.begin,u=i.radial,h=i.comboEdges,d=void 0===h?[]:h,f=i.vedges,p=void 0===f?[]:f;if(o){var g,m=i.edges||[],v=new graph_1.Graph({multigraph:!0,compound:!0}),y={};o.forEach((function(e){e.comboId&&(y[e.comboId]=y[e.comboId]||[],y[e.comboId].push(e.id))})),g=a?(0,util_1$9.isArray)(a)?function(){return a}:function(){return[a,a]}:function(e){return e.size?(0,util_1$9.isArray)(e.size)?e.size:(0,util_1$9.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]};var b=(0,util_1$9.getFunc)(i.ranksep,50,i.ranksepFunc),x=(0,util_1$9.getFunc)(i.nodesep,50,i.nodesepFunc),w=x,_=b;"LR"!==s&&"RL"!==s||(w=b,_=x),v.setDefaultEdgeLabel((function(){return{}})),v.setGraph(i);var C={};this.sortByCombo&&l&&l.forEach((function(e){if(C[e.id]=e,e.collapsed){var t=g(e),n=_(e),r=w(e),i=t[0]+2*r,o=t[1]+2*n;v.setNode(e.id,{width:i,height:o})}e.parentId&&(C[e.parentId]||v.setNode(e.parentId,{}),v.setParent(e.id,e.parentId))})),o.filter((function(e){return!1!==e.layout})).forEach((function(e){var t=g(e),n=_(e),i=w(e),o=t[0]+2*i,a=t[1]+2*n,s=e.layer;(0,util_1$9.isNumber)(s)?v.setNode(e.id,{width:o,height:a,layer:s}):v.setNode(e.id,{width:o,height:a}),r.sortByCombo&&e.comboId&&(C[e.comboId]||(C[e.comboId]={id:e.comboId},v.setNode(e.comboId,{})),v.setParent(e.id,e.comboId))})),m.forEach((function(e){var t=(0,util_1$9.getEdgeTerminal)(e,"source"),n=(0,util_1$9.getEdgeTerminal)(e,"target");r.layoutNode(t)&&r.layoutNode(n)&&v.setEdge(t,n,{weight:e.weight||1})})),null===(e=null==d?void 0:d.concat(p||[]))||void 0===e||e.forEach((function(e){var t,n,r=e.source,i=e.target,o=(null===(t=C[r])||void 0===t?void 0:t.collapsed)?[r]:y[r]||[r],a=(null===(n=C[i])||void 0===n?void 0:n.collapsed)?[i]:y[i]||[i];o.forEach((function(t){a.forEach((function(n){v.setEdge(t,n,{weight:e.weight||1})}))}))}));var $=void 0;(null===(t=i.preset)||void 0===t?void 0:t.nodes)&&($=new graph_1.Graph({multigraph:!0,compound:!0}),i.preset.nodes.forEach((function(e){null==$||$.setNode(e.id,e)}))),index_1.default.layout(v,{prevGraph:$,edgeLabelSpace:i.edgeLabelSpace,keepNodeOrder:Boolean(!!i.nodeOrder),nodeOrder:i.nodeOrder});var S=[0,0];if(c){var E=1/0,A=1/0;v.nodes().forEach((function(e){var t=v.node(e);E>t.x&&(E=t.x),A>t.y&&(A=t.y)})),v.edges().forEach((function(e){var t;null===(t=v.edge(e).points)||void 0===t||t.forEach((function(e){E>e.x&&(E=e.x),A>e.y&&(A=e.y)}))})),S[0]=c[0]-E,S[1]=c[1]-A}if(u){var M=this,k=M.focusNode,T=M.ranksep,P=M.getRadialPos,O=(0,util_1$9.isString)(k)?k:null==k?void 0:k.id,N=O?null===(n=v.node(O))||void 0===n?void 0:n._rank:0,I=[],D="LR"===s||"RL"===s,L=D?"y":"x",R=D?"height":"width",B=1/0,j=-1/0;v.nodes().forEach((function(e){var t=v.node(e),n=o.findIndex((function(t){return t.id===e}));if(o[n]){var r=x(o[n]);if(0===N)I[t._rank]||(I[t._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),I[t._rank].nodes.push(e),I[t._rank].totalWidth+=2*r+t[R],I[t._rank].maxSize<Math.max(t.width,t.height)&&(I[t._rank].maxSize=Math.max(t.width,t.height));else{var i=t._rank-N;if(0===i)I[i]||(I[i]={nodes:[],totalWidth:0,maxSize:-1/0}),I[i].nodes.push(e),I[i].totalWidth+=2*r+t[R],I[i].maxSize<Math.max(t.width,t.height)&&(I[i].maxSize=Math.max(t.width,t.height));else{var a=Math.abs(i);I[a]||(I[a]={left:[],right:[],totalWidth:0,maxSize:-1/0}),I[a].totalWidth+=2*r+t[R],I[a].maxSize<Math.max(t.width,t.height)&&(I[a].maxSize=Math.max(t.width,t.height)),i<0?I[a].left.push(e):I[a].right.push(e)}}var s=t[L]-t[R]/2-r,l=t[L]+t[R]/2+r;s<B&&(B=s),l>j&&(j=l)}}));var F=T||50,G={},V=(j-B)/.9,z=[.5*(B+j-V),.5*(B+j+V)],H=function(e,t,n,r){void 0===n&&(n=-1/0),void 0===r&&(r=[0,1]);var i=n;return e.forEach((function(e){var n=v.node(e);G[e]=t;var a=P(n[L],z,V,t,r),s=a.x,l=a.y,c=o.findIndex((function(t){return t.id===e}));if(o[c]){o[c].x=s+S[0],o[c].y=l+S[1],o[c]._order=n._order;var u=b(o[c]);i<u&&(i=u)}})),i},U=!0;I.forEach((function(e){var t,n,r,i,a,s,l;if((null===(t=null==e?void 0:e.nodes)||void 0===t?void 0:t.length)||(null===(n=null==e?void 0:e.left)||void 0===n?void 0:n.length)||(null===(r=null==e?void 0:e.right)||void 0===r?void 0:r.length)){if(U&&1===e.nodes.length){var c=o.findIndex((function(t){return t.id===e.nodes[0]}));if(c<=-1)return;return o[c].x=S[0],o[c].y=S[1],G[e.nodes[0]]=0,F=b(o[c]),void(U=!1)}F=Math.max(F,e.totalWidth/(2*Math.PI));var u=-1/0;if(0===N||(null===(i=e.nodes)||void 0===i?void 0:i.length))u=H(e.nodes,F,u,[0,1]);else{var h=(null===(a=e.left)||void 0===a?void 0:a.length)/((null===(s=e.left)||void 0===s?void 0:s.length)+(null===(l=e.right)||void 0===l?void 0:l.length));u=H(e.left,F,u,[0,h]),u=H(e.right,F,u,[h+.05,1])}F+=u,U=!1,e.maxSize}})),v.edges().forEach((function(e){var t,n,r,o=v.edge(e),a=m.findIndex((function(t){var n=(0,util_1$9.getEdgeTerminal)(t,"source"),r=(0,util_1$9.getEdgeTerminal)(t,"target");return n===e.v&&r===e.w}));if(!(a<=-1)&&i.edgeLabelSpace&&i.controlPoints&&"loop"!==m[a].type){var s="x"===L?"y":"x",l=null===(t=null==o?void 0:o.points)||void 0===t?void 0:t.slice(1,o.points.length-1),c=[],u=null===(n=v.node(e.v))||void 0===n?void 0:n[s],h=u-(null===(r=v.node(e.w))||void 0===r?void 0:r[s]),d=G[e.v],f=d-G[e.w];null==l||l.forEach((function(e){var t=(e[s]-u)/h*f+d,n=P(e[L],z,V,t);c.push({x:n.x+S[0],y:n.y+S[1]})})),m[a].controlPoints=c}}))}else v.nodes().forEach((function(e){var t=v.node(e);if(t){var n=o.find((function(t){return t.id===e}));n||(n=null==l?void 0:l.find((function(t){return t.id===e}))),n&&(n.x=t.x+S[0],n.y=t.y+S[1],n._order=t._order)}})),v.edges().forEach((function(e){var t,n=v.edge(e),r=m.findIndex((function(t){var n=(0,util_1$9.getEdgeTerminal)(t,"source"),r=(0,util_1$9.getEdgeTerminal)(t,"target");return n===e.v&&r===e.w}));r<=-1||i.edgeLabelSpace&&i.controlPoints&&"loop"!==m[r].type&&(m[r].controlPoints=null===(t=null==n?void 0:n.points)||void 0===t?void 0:t.slice(1,n.points.length-1),m[r].controlPoints.forEach((function(e){e.x+=S[0],e.y+=S[1]})))}));return i.onLayoutEnd&&i.onLayoutEnd(),{nodes:o,edges:m}}},t.prototype.getRadialPos=function(e,t,n,r,i){void 0===i&&(i=[0,1]);var o=(e-t[0])/n,a=2*(o=o*(i[1]-i[0])+i[0])*Math.PI;return{x:Math.cos(a)*r,y:Math.sin(a)*r}},t.prototype.getType=function(){return"dagre"},t}(base_1$a.Base);dagre$1.DagreLayout=DagreLayout;var dagreCompound={};const e={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function n(t={},n=e){var r,i,o,a;const s=JSON.parse(JSON.stringify(n)),l=(null===(r=null==t?void 0:t.graph)||void 0===r?void 0:r.meta)||{},c=(null===(i=null==t?void 0:t.subScene)||void 0===i?void 0:i.meta)||{},u=(null===(o=null==t?void 0:t.nodeSize)||void 0===o?void 0:o.meta)||{},h=(null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||{},d=s.nodeSize.bridge;return{graph:{meta:Object.assign(s.graph.meta,l)},subScene:{meta:Object.assign(s.subScene.meta,c)},nodeSize:{meta:Object.assign(s.nodeSize.meta,u),node:Object.assign(s.nodeSize.node,h),bridge:d}}}function t(e){return`${e}`}const r=t("ROOT"),o=t("BRIDGE_GRAPH");var i,a,u,c,e11;e11=i||(i={}),e11[e11.META=0]="META",e11[e11.NODE=1]="NODE",e11[e11.BRIDGE=2]="BRIDGE",function(e){e[e.INCLUDE=0]="INCLUDE",e[e.EXCLUDE=1]="EXCLUDE",e[e.UNSPECIFIED=2]="UNSPECIFIED"}(a||(a={})),function(e){e[e.META=0]="META",e[e.CORE=1]="CORE",e[e.BRIDGE=2]="BRIDGE"}(u||(u={})),function(e){e[e.META=0]="META",e[e.OP=1]="OP",e[e.SERIES=2]="SERIES"}(c||(c={}));var s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(e,t){return e(t={exports:{}},t.exports),t.exports}var f=function(){this.__data__=[],this.size=0},h=function(e,t){return e===t||e!=e&&t!=t},l=function(e,t){for(var n=e.length;n--;)if(h(e[n][0],t))return n;return-1},v=Array.prototype.splice,p=function(e){var t=this.__data__,n=l(t,e);return!(n<0||(n==t.length-1?t.pop():v.call(t,n,1),--this.size,0))},g=function(e){var t=this.__data__,n=l(t,e);return n<0?void 0:t[n][1]},y=function(e){return l(this.__data__,e)>-1},b=function(e,t){var n=this.__data__,r=l(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function m(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}m.prototype.clear=f,m.prototype.delete=p,m.prototype.get=g,m.prototype.has=y,m.prototype.set=b;var w=m,E=function(){this.__data__=new w,this.size=0},_=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},j=function(e){return this.__data__.get(e)},x=function(e){return this.__data__.has(e)},N="object"==typeof s&&s&&s.Object===Object&&s,O="object"==typeof self&&self&&self.Object===Object&&self,k=N||O||Function("return this")(),I=k.Symbol,S=Object.prototype,M=S.hasOwnProperty,C=S.toString,G=I?I.toStringTag:void 0,B=function(e){var t=M.call(e,G),n=e[G];try{e[G]=void 0;var r=!0}catch(o){}var i=C.call(e);return r&&(t?e[G]=n:delete e[G]),i},A=Object.prototype.toString,L=function(e){return A.call(e)},R$1=I?I.toStringTag:void 0,T$1=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R$1&&R$1 in Object(e)?B(e):L(e)},D=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},P,z=function(e){if(!D(e))return!1;var t=T$1(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},F=k["__core-js_shared__"],U=(P=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",V=function(e){return!!U&&U in e},$=Function.prototype.toString,H=function(e){if(null!=e){try{return $.call(e)}catch(t){}try{return e+""}catch(t){}}return""},W=/^\[object .+?Constructor\]$/,q=Function.prototype,Y=Object.prototype,J=q.toString,X=Y.hasOwnProperty,K=RegExp("^"+J.call(X).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=function(e){return!(!D(e)||V(e))&&(z(e)?K:W).test(H(e))},Z=function(e,t){return null==e?void 0:e[t]},ee=function(e,t){var n=Z(e,t);return Q(n)?n:void 0},ne=ee(k,"Map"),te=ee(Object,"create"),re$1=function(){this.__data__=te?te(null):{},this.size=0},oe=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ie=Object.prototype.hasOwnProperty,ae=function(e){var t=this.__data__;if(te){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ie.call(t,e)?t[e]:void 0},ue=Object.prototype.hasOwnProperty,ce=function(e){var t=this.__data__;return te?void 0!==t[e]:ue.call(t,e)},se=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=te&&void 0===t?"__lodash_hash_undefined__":t,this};function de(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}de.prototype.clear=re$1,de.prototype.delete=oe,de.prototype.get=ae,de.prototype.has=ce,de.prototype.set=se;var fe=de,he=function(){this.size=0,this.__data__={hash:new fe,map:new(ne||w),string:new fe}},le=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},ve=function(e,t){var n=e.__data__;return le(t)?n["string"==typeof t?"string":"hash"]:n.map},pe=function(e){var t=ve(this,e).delete(e);return this.size-=t?1:0,t},ge=function(e){return ve(this,e).get(e)},ye=function(e){return ve(this,e).has(e)},be$1=function(e,t){var n=ve(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function me(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}me.prototype.clear=he,me.prototype.delete=pe,me.prototype.get=ge,me.prototype.has=ye,me.prototype.set=be$1;var we$1=me,Ee=function(e,t){var n=this.__data__;if(n instanceof w){var r=n.__data__;if(!ne||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new we$1(r)}return n.set(e,t),this.size=n.size,this};function _e$1(e){var t=this.__data__=new w(e);this.size=t.size}_e$1.prototype.clear=E,_e$1.prototype.delete=_,_e$1.prototype.get=j,_e$1.prototype.has=x,_e$1.prototype.set=Ee;var je$1=_e$1,xe$1=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},Ne$1=function(){try{var e=ee(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Oe=function(e,t,n){"__proto__"==t&&Ne$1?Ne$1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},ke=Object.prototype.hasOwnProperty,Ie$1=function(e,t,n){var r=e[t];ke.call(e,t)&&h(r,n)&&(void 0!==n||t in e)||Oe(e,t,n)},Se=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?Oe(n,s,l):Ie$1(n,s,l)}return n},Me$1=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},Ce=function(e){return null!=e&&"object"==typeof e},Ge=function(e){return Ce(e)&&"[object Arguments]"==T$1(e)},Be$1=Object.prototype,Ae=Be$1.hasOwnProperty,Le=Be$1.propertyIsEnumerable,Re=Ge(function(){return arguments}())?Ge:function(e){return Ce(e)&&Ae.call(e,"callee")&&!Le.call(e,"callee")},Te=Array.isArray,De=function(){return!1},Pe$1=d((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?k.Buffer:void 0,o=(i?i.isBuffer:void 0)||De;e.exports=o})),ze$1=/^(?:0|[1-9]\d*)$/,Fe$1=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&ze$1.test(e))&&e>-1&&e%1==0&&e<t},Ue$1=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Ve$1={};Ve$1["[object Float32Array]"]=Ve$1["[object Float64Array]"]=Ve$1["[object Int8Array]"]=Ve$1["[object Int16Array]"]=Ve$1["[object Int32Array]"]=Ve$1["[object Uint8Array]"]=Ve$1["[object Uint8ClampedArray]"]=Ve$1["[object Uint16Array]"]=Ve$1["[object Uint32Array]"]=!0,Ve$1["[object Arguments]"]=Ve$1["[object Array]"]=Ve$1["[object ArrayBuffer]"]=Ve$1["[object Boolean]"]=Ve$1["[object DataView]"]=Ve$1["[object Date]"]=Ve$1["[object Error]"]=Ve$1["[object Function]"]=Ve$1["[object Map]"]=Ve$1["[object Number]"]=Ve$1["[object Object]"]=Ve$1["[object RegExp]"]=Ve$1["[object Set]"]=Ve$1["[object String]"]=Ve$1["[object WeakMap]"]=!1;var $e=function(e){return Ce(e)&&Ue$1(e.length)&&!!Ve$1[T$1(e)]},He$1=function(e){return function(t){return e(t)}},We=d((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n&&N.process,o=function(){try{return r&&r.require&&r.require("util").types||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=o})),qe$1=We&&We.isTypedArray,Ye$1=qe$1?He$1(qe$1):$e,Je=Object.prototype.hasOwnProperty,Xe$1=function(e,t){var n=Te(e),r=!n&&Re(e),i=!n&&!r&&Pe$1(e),o=!n&&!r&&!i&&Ye$1(e),a=n||r||i||o,s=a?Me$1(e.length,String):[],l=s.length;for(var c in e)!t&&!Je.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Fe$1(c,l))||s.push(c);return s},Ke=Object.prototype,Qe$1=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ke)},Ze=function(e,t){return function(n){return e(t(n))}},en$1=Ze(Object.keys,Object),nn$1=Object.prototype.hasOwnProperty,tn$1=function(e){if(!Qe$1(e))return en$1(e);var t=[];for(var n in Object(e))nn$1.call(e,n)&&"constructor"!=n&&t.push(n);return t},rn$1=function(e){return null!=e&&Ue$1(e.length)&&!z(e)},on$1=function(e){return rn$1(e)?Xe$1(e):tn$1(e)},an$1=function(e,t){return e&&Se(t,on$1(t),e)},un$1=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},cn$1=Object.prototype.hasOwnProperty,sn$1=function(e){if(!D(e))return un$1(e);var t=Qe$1(e),n=[];for(var r in e)("constructor"!=r||!t&&cn$1.call(e,r))&&n.push(r);return n},dn$1=function(e){return rn$1(e)?Xe$1(e,!0):sn$1(e)},fn$1=function(e,t){return e&&Se(t,dn$1(t),e)},hn$1=d((function(e,t){var n=t&&!t.nodeType&&t,r=n&&e&&!e.nodeType&&e,i=r&&r.exports===n?k.Buffer:void 0,o=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}})),ln$1=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},vn$1=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o},pn$1=function(){return[]},gn$1=Object.prototype.propertyIsEnumerable,yn$1=Object.getOwnPropertySymbols,bn$1=yn$1?function(e){return null==e?[]:(e=Object(e),vn$1(yn$1(e),(function(t){return gn$1.call(e,t)})))}:pn$1,mn$1=function(e,t){return Se(e,bn$1(e),t)},wn$1=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},En$1=Ze(Object.getPrototypeOf,Object),_n$1=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)wn$1(t,bn$1(e)),e=En$1(e);return t}:pn$1,jn$1=function(e,t){return Se(e,_n$1(e),t)},xn$1=function(e,t,n){var r=t(e);return Te(e)?r:wn$1(r,n(e))},Nn$1=function(e){return xn$1(e,on$1,bn$1)},On$1=function(e){return xn$1(e,dn$1,_n$1)},kn$1=ee(k,"DataView"),In$1=ee(k,"Promise"),Sn$1=ee(k,"Set"),Mn$1=ee(k,"WeakMap"),Cn$1=H(kn$1),Gn=H(ne),Bn$1=H(In$1),An$1=H(Sn$1),Ln$1=H(Mn$1),Rn$1=T$1;(kn$1&&"[object DataView]"!=Rn$1(new kn$1(new ArrayBuffer(1)))||ne&&"[object Map]"!=Rn$1(new ne)||In$1&&"[object Promise]"!=Rn$1(In$1.resolve())||Sn$1&&"[object Set]"!=Rn$1(new Sn$1)||Mn$1&&"[object WeakMap]"!=Rn$1(new Mn$1))&&(Rn$1=function(e){var t=T$1(e),n="[object Object]"==t?e.constructor:void 0,r=n?H(n):"";if(r)switch(r){case Cn$1:return"[object DataView]";case Gn:return"[object Map]";case Bn$1:return"[object Promise]";case An$1:return"[object Set]";case Ln$1:return"[object WeakMap]"}return t});var Tn$1=Rn$1,Dn$1=Object.prototype.hasOwnProperty,Pn$1=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Dn$1.call(e,"index")&&(n.index=e.index,n.input=e.input),n},zn$1=k.Uint8Array,Fn$1=function(e){var t=new e.constructor(e.byteLength);return new zn$1(t).set(new zn$1(e)),t},Un$1=function(e,t){var n=t?Fn$1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)},Vn$1=/\w*$/,$n$1=function(e){var t=new e.constructor(e.source,Vn$1.exec(e));return t.lastIndex=e.lastIndex,t},Hn$1=I?I.prototype:void 0,Wn$1=Hn$1?Hn$1.valueOf:void 0,qn$1=function(e){return Wn$1?Object(Wn$1.call(e)):{}},Yn$1=function(e,t){var n=t?Fn$1(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)},Jn$1=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Fn$1(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Un$1(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Yn$1(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return $n$1(e);case"[object Symbol]":return qn$1(e)}},Xn$1=Object.create,Kn$1=function(){function e(){}return function(t){if(!D(t))return{};if(Xn$1)return Xn$1(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),Qn$1=function(e){return"function"!=typeof e.constructor||Qe$1(e)?{}:Kn$1(En$1(e))},Zn$1=function(e){return Ce(e)&&"[object Map]"==Tn$1(e)},et$1=We&&We.isMap,nt$1=et$1?He$1(et$1):Zn$1,tt$1=function(e){return Ce(e)&&"[object Set]"==Tn$1(e)},rt$1=We&&We.isSet,ot$1=rt$1?He$1(rt$1):tt$1,it$1={};it$1["[object Arguments]"]=it$1["[object Array]"]=it$1["[object ArrayBuffer]"]=it$1["[object DataView]"]=it$1["[object Boolean]"]=it$1["[object Date]"]=it$1["[object Float32Array]"]=it$1["[object Float64Array]"]=it$1["[object Int8Array]"]=it$1["[object Int16Array]"]=it$1["[object Int32Array]"]=it$1["[object Map]"]=it$1["[object Number]"]=it$1["[object Object]"]=it$1["[object RegExp]"]=it$1["[object Set]"]=it$1["[object String]"]=it$1["[object Symbol]"]=it$1["[object Uint8Array]"]=it$1["[object Uint8ClampedArray]"]=it$1["[object Uint16Array]"]=it$1["[object Uint32Array]"]=!0,it$1["[object Error]"]=it$1["[object Function]"]=it$1["[object WeakMap]"]=!1;var at$1=function e(t,n,r,i,o,a){var s,l=1&n,c=2&n,u=4&n;if(r&&(s=o?r(t,i,o,a):r(t)),void 0!==s)return s;if(!D(t))return t;var h=Te(t);if(h){if(s=Pn$1(t),!l)return ln$1(t,s)}else{var d=Tn$1(t),f="[object Function]"==d||"[object GeneratorFunction]"==d;if(Pe$1(t))return hn$1(t,l);if("[object Object]"==d||"[object Arguments]"==d||f&&!o){if(s=c||f?{}:Qn$1(t),!l)return c?jn$1(t,fn$1(s,t)):mn$1(t,an$1(s,t))}else{if(!it$1[d])return o?t:{};s=Jn$1(t,d,l)}}a||(a=new je$1);var p=a.get(t);if(p)return p;a.set(t,s),ot$1(t)?t.forEach((function(i){s.add(e(i,n,r,i,t,a))})):nt$1(t)&&t.forEach((function(i,o){s.set(o,e(i,n,r,o,t,a))}));var g=h?void 0:(u?c?On$1:Nn$1:c?dn$1:on$1)(t);return xe$1(g||t,(function(i,o){g&&(i=t[o=i]),Ie$1(s,o,e(i,n,r,o,t,a))})),s},ut$1=function(e){return at$1(e,4)},ct$1=function(e){return function(){return e}},st$1=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[++r];if(!1===t(i[s],s,i))break}return e},dt$1=function(e,t){return e&&st$1(e,t,on$1)},ft$1=function(e,t){return function(t,n){if(null==t)return t;if(!rn$1(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(dt$1),ht$1=function(e){return e},lt$1=function(e){return"function"==typeof e?e:ht$1},vt$1=function(e,t){return(Te(e)?xe$1:ft$1)(e,lt$1(t))},pt$1=vt$1,gt$1=function(e,t){var n=[];return ft$1(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n},yt$1=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},bt$1=function(e){return this.__data__.has(e)};function mt$1(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new we$1;++t<n;)this.add(e[t])}mt$1.prototype.add=mt$1.prototype.push=yt$1,mt$1.prototype.has=bt$1;var wt=mt$1,Et$1=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},_t$1=function(e,t){return e.has(t)},jt$1=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e),u=o.get(t);if(c&&u)return c==t&&u==e;var h=-1,d=!0,f=2&n?new wt:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],g=t[h];if(r)var m=a?r(g,p,h,t,e,o):r(p,g,h,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!Et$1(t,(function(e,t){if(!_t$1(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==g&&!i(p,g,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d},xt$1=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Nt$1=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Ot=I?I.prototype:void 0,kt$1=Ot?Ot.valueOf:void 0,It$1=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new zn$1(e),new zn$1(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=xt$1;case"[object Set]":var l=1&r;if(s||(s=Nt$1),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;r|=2,a.set(e,t);var u=jt$1(s(e),s(t),r,i,o,a);return a.delete(e),u;case"[object Symbol]":if(kt$1)return kt$1.call(e)==kt$1.call(t)}return!1},St$1=Object.prototype.hasOwnProperty,Mt$1=function(e,t,n,r,i,o){var a=1&n,s=Nn$1(e),l=s.length;if(l!=Nn$1(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:St$1.call(t,u)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],m=t[u];if(r)var v=a?r(m,g,u,t,e,o):r(g,m,u,e,t,o);if(!(void 0===v?g===m||i(g,m,n,r,o):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},Ct$1=Object.prototype.hasOwnProperty,Gt$1=function(e,t,n,r,i,o){var a=Te(e),s=Te(t),l=a?"[object Array]":Tn$1(e),c=s?"[object Array]":Tn$1(t),u="[object Object]"==(l="[object Arguments]"==l?"[object Object]":l),h="[object Object]"==(c="[object Arguments]"==c?"[object Object]":c),d=l==c;if(d&&Pe$1(e)){if(!Pe$1(t))return!1;a=!0,u=!1}if(d&&!u)return o||(o=new je$1),a||Ye$1(e)?jt$1(e,t,n,r,i,o):It$1(e,t,l,n,r,i,o);if(!(1&n)){var f=u&&Ct$1.call(e,"__wrapped__"),p=h&&Ct$1.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,m=p?t.value():t;return o||(o=new je$1),i(g,m,n,r,o)}}return!!d&&(o||(o=new je$1),Mt$1(e,t,n,r,i,o))},Bt$1=function e(t,n,r,i,o){return t===n||(null==t||null==n||!Ce(t)&&!Ce(n)?t!=t&&n!=n:Gt$1(t,n,r,i,e,o))},At$1=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],c=e[l],u=s[1];if(a&&s[2]){if(void 0===c&&!(l in e))return!1}else{var h=new je$1;if(r)var d=r(c,u,l,e,t,h);if(!(void 0===d?Bt$1(u,c,3,r,h):d))return!1}}return!0},Lt=function(e){return e==e&&!D(e)},Rt$1=function(e){for(var t=on$1(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Lt(i)]}return t},Tt$1=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}},Dt$1=function(e){var t=Rt$1(e);return 1==t.length&&t[0][2]?Tt$1(t[0][0],t[0][1]):function(n){return n===e||At$1(n,e,t)}},Pt$1=function(e){return"symbol"==typeof e||Ce(e)&&"[object Symbol]"==T$1(e)},zt$1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ft$1=/^\w*$/,Ut$1=function(e,t){if(Te(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Pt$1(e))||Ft$1.test(e)||!zt$1.test(e)||null!=t&&e in Object(t)};function Vt$1(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Vt$1.Cache||we$1),n}Vt$1.Cache=we$1;var $t$1=Vt$1,Ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Wt$1=/\\(\\)?/g,qt$1=(n2=$t$1((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Ht,(function(e,n,r,i){t.push(r?i.replace(Wt$1,"$1"):n||e)})),t}),(function(e){return 500===t2.size&&t2.clear(),e})),t2=n2.cache,n2),n2,t2,Yt$1=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i},Jt$1=I?I.prototype:void 0,Xt$1=Jt$1?Jt$1.toString:void 0,Kt$1=function e(t){if("string"==typeof t)return t;if(Te(t))return Yt$1(t,e)+"";if(Pt$1(t))return Xt$1?Xt$1.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n},Qt$1=function(e){return null==e?"":Kt$1(e)},Zt$1=function(e,t){return Te(e)?e:Ut$1(e,t)?[e]:qt$1(Qt$1(e))},er$2=function(e){if("string"==typeof e||Pt$1(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},nr$1=function(e,t){for(var n=0,r=(t=Zt$1(t,e)).length;null!=e&&n<r;)e=e[er$2(t[n++])];return n&&n==r?e:void 0},tr$1=function(e,t,n){var r=null==e?void 0:nr$1(e,t);return void 0===r?n:r},rr$1=function(e,t){return null!=e&&t in Object(e)},or$1=function(e,t,n){for(var r=-1,i=(t=Zt$1(t,e)).length,o=!1;++r<i;){var a=er$2(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Ue$1(i)&&Fe$1(a,i)&&(Te(e)||Re(e))},ir$1=function(e,t){return null!=e&&or$1(e,t,rr$1)},ar$1=function(e,t){return Ut$1(e)&&Lt(t)?Tt$1(er$2(e),t):function(n){var r=tr$1(n,e);return void 0===r&&r===t?ir$1(n,e):Bt$1(t,r,3)}},ur$1=function(e){return function(t){return null==t?void 0:t[e]}},cr$1=function(e){return function(t){return nr$1(t,e)}},sr$1=function(e){return Ut$1(e)?ur$1(er$2(e)):cr$1(e)},dr$1=function(e){return"function"==typeof e?e:null==e?ht$1:"object"==typeof e?Te(e)?ar$1(e[0],e[1]):Dt$1(e):sr$1(e)},fr$1=function(e,t){return(Te(e)?vn$1:gt$1)(e,dr$1(t))},hr$1=Object.prototype.hasOwnProperty,lr$1=function(e,t){return null!=e&&hr$1.call(e,t)},vr$1=function(e,t){return null!=e&&or$1(e,t,lr$1)},pr$1=Object.prototype.hasOwnProperty,gr$1=function(e){if(null==e)return!0;if(rn$1(e)&&(Te(e)||"string"==typeof e||"function"==typeof e.splice||Pe$1(e)||Ye$1(e)||Re(e)))return!e.length;var t=Tn$1(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Qe$1(e))return!tn$1(e).length;for(var n in e)if(pr$1.call(e,n))return!1;return!0},yr$1=function(e){return void 0===e},br$1=function(e,t){var n=-1,r=rn$1(e)?Array(e.length):[];return ft$1(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},mr$1=function(e,t){return(Te(e)?Yt$1:br$1)(e,dr$1(t))},wr$1=function(e,t,n,r){var i=-1,o=null==e?0:e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n},Er$1=function(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n},_r$1=function(e,t,n){var r=Te(e)?wr$1:Er$1,i=arguments.length<3;return r(e,dr$1(t),n,i,ft$1)},jr$1=function(e){return"string"==typeof e||!Te(e)&&Ce(e)&&"[object String]"==T$1(e)},xr$1=ur$1("length"),Nr$1=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Or$1=function(e){return Nr$1.test(e)},kr$1="[\\ud800-\\udfff]",Ir$1="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sr$1="\\ud83c[\\udffb-\\udfff]",Mr$1="[^\\ud800-\\udfff]",Cr$1="(?:\\ud83c[\\udde6-\\uddff]){2}",Gr$1="[\\ud800-\\udbff][\\udc00-\\udfff]",Br$1="(?:"+Ir$1+"|"+Sr$1+")?",Ar$1="[\\ufe0e\\ufe0f]?"+Br$1+"(?:\\u200d(?:"+[Mr$1,Cr$1,Gr$1].join("|")+")[\\ufe0e\\ufe0f]?"+Br$1+")*",Lr$1="(?:"+[Mr$1+Ir$1+"?",Ir$1,Cr$1,Gr$1,kr$1].join("|")+")",Rr$1=RegExp(Sr$1+"(?="+Sr$1+")|"+Lr$1+Ar$1,"g"),Tr$1=function(e){for(var t=Rr$1.lastIndex=0;Rr$1.test(e);)++t;return t},Dr$1=function(e){return Or$1(e)?Tr$1(e):xr$1(e)},Pr$1=function(e){if(null==e)return 0;if(rn$1(e))return jr$1(e)?Dr$1(e):e.length;var t=Tn$1(e);return"[object Map]"==t||"[object Set]"==t?e.size:tn$1(e).length},zr$1=function(e,t,n){var r=Te(e),i=r||Pe$1(e)||Ye$1(e);if(t=dr$1(t),null==n){var o=e&&e.constructor;n=i?r?new o:[]:D(e)&&z(o)?Kn$1(En$1(e)):{}}return(i?xe$1:dt$1)(e,(function(e,r,i){return t(n,e,r,i)})),n},Fr$1=I?I.isConcatSpreadable:void 0,Ur$1=function(e){return Te(e)||Re(e)||!!(Fr$1&&e&&e[Fr$1])},Vr$1=function e(t,n,r,i,o){var a=-1,s=t.length;for(r||(r=Ur$1),o||(o=[]);++a<s;){var l=t[a];n>0&&r(l)?n>1?e(l,n-1,r,i,o):wn$1(o,l):i||(o[o.length]=l)}return o},$r$1=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Hr$1=Math.max,Wr$1=function(e,t,n){return t=Hr$1(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Hr$1(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),$r$1(e,this,s)}},qr$1=Ne$1?function(e,t){return Ne$1(e,"toString",{configurable:!0,enumerable:!1,value:ct$1(t),writable:!0})}:ht$1,Yr$1=Date.now,Jr$1=function(e){var t=0,n=0;return function(){var r=Yr$1(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(qr$1),Xr$1=function(e,t){return Jr$1(Wr$1(e,t,ht$1),e+"")},Kr$1=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1},Qr$1=function(e){return e!=e},Zr$1=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1},eo$1=function(e,t,n){return t==t?Zr$1(e,t,n):Kr$1(e,Qr$1,n)},no$1=function(e,t){return!(null==e||!e.length)&&eo$1(e,t,0)>-1},to$1=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},ro$1=function(){},oo$1=Sn$1&&1/Nt$1(new Sn$1([,-0]))[1]==1/0?function(e){return new Sn$1(e)}:ro$1,io$1=function(e,t,n){var r=-1,i=no$1,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=to$1;else if(o>=200){var c=t?null:oo$1(e);if(c)return Nt$1(c);a=!1,i=_t$1,l=new wt}else l=t?[]:s;e:for(;++r<o;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,a&&h==h){for(var d=l.length;d--;)if(l[d]===h)continue e;t&&l.push(h),s.push(u)}else i(l,h,n)||(l!==s&&l.push(h),s.push(u))}return s},ao$1=function(e){return Ce(e)&&rn$1(e)},uo$1=Xr$1((function(e){return io$1(Vr$1(e,1,ao$1,!0))})),co$1=function(e,t){return Yt$1(t,(function(t){return e[t]}))},so$1,fo$1=function(e){return null==e?[]:co$1(e,on$1(e))};try{so$1={clone:ut$1,constant:ct$1,each:pt$1,filter:fr$1,has:vr$1,isArray:Te,isEmpty:gr$1,isFunction:z,isUndefined:yr$1,keys:on$1,map:mr$1,reduce:_r$1,size:Pr$1,transform:zr$1,union:uo$1,values:fo$1}}catch(e11){}so$1||(so$1=window._);var ho$1=so$1,lo$1=vo$1;function vo$1(e){this._isDirected=!ho$1.has(e,"directed")||e.directed,this._isMultigraph=!!ho$1.has(e,"multigraph")&&e.multigraph,this._isCompound=!!ho$1.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=ho$1.constant(void 0),this._defaultEdgeLabelFn=ho$1.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function po$1(e,t){e[t]?e[t]++:e[t]=1}function go$1(e,t){--e[t]||delete e[t]}function yo$1(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}return i+""+o+""+(ho$1.isUndefined(r)?"\0":r)}function bo$1(e,t,n,r){var i=""+t,o=""+n;if(!e&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return r&&(s.name=r),s}function mo$1(e,t){return yo$1(e,t.v,t.w,t.name)}vo$1.prototype._nodeCount=0,vo$1.prototype._edgeCount=0,vo$1.prototype.isDirected=function(){return this._isDirected},vo$1.prototype.isMultigraph=function(){return this._isMultigraph},vo$1.prototype.isCompound=function(){return this._isCompound},vo$1.prototype.setGraph=function(e){return this._label=e,this},vo$1.prototype.graph=function(){return this._label},vo$1.prototype.setDefaultNodeLabel=function(e){return ho$1.isFunction(e)||(e=ho$1.constant(e)),this._defaultNodeLabelFn=e,this},vo$1.prototype.nodeCount=function(){return this._nodeCount},vo$1.prototype.nodes=function(){return ho$1.keys(this._nodes)},vo$1.prototype.sources=function(){var e=this;return ho$1.filter(this.nodes(),(function(t){return ho$1.isEmpty(e._in[t])}))},vo$1.prototype.sinks=function(){var e=this;return ho$1.filter(this.nodes(),(function(t){return ho$1.isEmpty(e._out[t])}))},vo$1.prototype.setNodes=function(e,t){var n=arguments,r=this;return ho$1.each(e,(function(e){n.length>1?r.setNode(e,t):r.setNode(e)})),this},vo$1.prototype.setNode=function(e,t){return ho$1.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},vo$1.prototype.node=function(e){return this._nodes[e]},vo$1.prototype.hasNode=function(e){return ho$1.has(this._nodes,e)},vo$1.prototype.removeNode=function(e){var t=this;if(ho$1.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],ho$1.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),ho$1.each(ho$1.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],ho$1.each(ho$1.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},vo$1.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ho$1.isUndefined(t))t="\0";else{for(var n=t+="";!ho$1.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},vo$1.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},vo$1.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},vo$1.prototype.children=function(e){if(ho$1.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return ho$1.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},vo$1.prototype.predecessors=function(e){var t=this._preds[e];if(t)return ho$1.keys(t)},vo$1.prototype.successors=function(e){var t=this._sucs[e];if(t)return ho$1.keys(t)},vo$1.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return ho$1.union(t,this.successors(e))},vo$1.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},vo$1.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;ho$1.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),ho$1.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var r={};function i(e){var o=n.parent(e);return void 0===o||t.hasNode(o)?(r[e]=o,o):o in r?r[o]:i(o)}return this._isCompound&&ho$1.each(t.nodes(),(function(e){t.setParent(e,i(e))})),t},vo$1.prototype.setDefaultEdgeLabel=function(e){return ho$1.isFunction(e)||(e=ho$1.constant(e)),this._defaultEdgeLabelFn=e,this},vo$1.prototype.edgeCount=function(){return this._edgeCount},vo$1.prototype.edges=function(){return ho$1.values(this._edgeObjs)},vo$1.prototype.setPath=function(e,t){var n=this,r=arguments;return ho$1.reduce(e,(function(e,i){return r.length>1?n.setEdge(e,i,t):n.setEdge(e,i),i})),this},vo$1.prototype.setEdge=function(){var e,t,n,r,i=!1,o=arguments[0];"object"==typeof o&&null!==o&&"v"in o?(e=o.v,t=o.w,n=o.name,2===arguments.length&&(r=arguments[1],i=!0)):(e=o,t=arguments[1],n=arguments[3],arguments.length>2&&(r=arguments[2],i=!0)),e=""+e,t=""+t,ho$1.isUndefined(n)||(n=""+n);var a=yo$1(this._isDirected,e,t,n);if(ho$1.has(this._edgeLabels,a))return i&&(this._edgeLabels[a]=r),this;if(!ho$1.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[a]=i?r:this._defaultEdgeLabelFn(e,t,n);var s=bo$1(this._isDirected,e,t,n);return e=s.v,t=s.w,Object.freeze(s),this._edgeObjs[a]=s,po$1(this._preds[t],e),po$1(this._sucs[e],t),this._in[t][a]=s,this._out[e][a]=s,this._edgeCount++,this},vo$1.prototype.edge=function(e,t,n){var r=1===arguments.length?mo$1(this._isDirected,arguments[0]):yo$1(this._isDirected,e,t,n);return this._edgeLabels[r]},vo$1.prototype.hasEdge=function(e,t,n){var r=1===arguments.length?mo$1(this._isDirected,arguments[0]):yo$1(this._isDirected,e,t,n);return ho$1.has(this._edgeLabels,r)},vo$1.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?mo$1(this._isDirected,arguments[0]):yo$1(this._isDirected,e,t,n),i=this._edgeObjs[r];return i&&(e=i.v,t=i.w,delete this._edgeLabels[r],delete this._edgeObjs[r],go$1(this._preds[t],e),go$1(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},vo$1.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var r=ho$1.values(n);return t?ho$1.filter(r,(function(e){return e.v===t})):r}},vo$1.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var r=ho$1.values(n);return t?ho$1.filter(r,(function(e){return e.w===t})):r}},vo$1.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))};var wo$1={Graph:lo$1,version:"2.1.8"},Eo$1={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:_o$1(e),edges:jo$1(e)};return ho$1.isUndefined(e.graph())||(t.value=ho$1.clone(e.graph())),t},read:function(e){var t=new lo$1(e.options).setGraph(e.value);return ho$1.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),ho$1.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}};function _o$1(e){return ho$1.map(e.nodes(),(function(t){var n=e.node(t),r=e.parent(t),i={v:t};return ho$1.isUndefined(n)||(i.value=n),ho$1.isUndefined(r)||(i.parent=r),i}))}function jo$1(e){return ho$1.map(e.edges(),(function(t){var n=e.edge(t),r={v:t.v,w:t.w};return ho$1.isUndefined(t.name)||(r.name=t.name),ho$1.isUndefined(n)||(r.value=n),r}))}var xo$1=function(e){var t,n={},r=[];function i(r){ho$1.has(n,r)||(n[r]=!0,t.push(r),ho$1.each(e.successors(r),i),ho$1.each(e.predecessors(r),i))}return ho$1.each(e.nodes(),(function(e){t=[],i(e),t.length&&r.push(t)})),r},No$1=Oo$1;function Oo$1(){this._arr=[],this._keyIndices={}}Oo$1.prototype.size=function(){return this._arr.length},Oo$1.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},Oo$1.prototype.has=function(e){return ho$1.has(this._keyIndices,e)},Oo$1.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},Oo$1.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},Oo$1.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!ho$1.has(n,e)){var r=this._arr,i=r.length;return n[e]=i,r.push({key:e,priority:t}),this._decrease(i),!0}return!1},Oo$1.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},Oo$1.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},Oo$1.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,i=e;n<t.length&&(i=t[n].priority<t[i].priority?n:i,r<t.length&&(i=t[r].priority<t[i].priority?r:i),i!==e&&(this._swap(e,i),this._heapify(i)))},Oo$1.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},Oo$1.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,i=n[e],o=n[t];n[e]=o,n[t]=i,r[o.key]=e,r[i.key]=t};var ko$1=function(e,t,n,r){return function(e,t,n,r){var i,o,a={},s=new No$1,l=function(e){var t=e.v!==i?e.v:e.w,r=a[t],l=n(e),c=o.distance+l;if(l<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+l);c<r.distance&&(r.distance=c,r.predecessor=i,s.decrease(t,c))};for(e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;a[e]={distance:n},s.add(e,n)}));s.size()>0&&(i=s.removeMin(),(o=a[i]).distance!==Number.POSITIVE_INFINITY);)r(i).forEach(l);return a}(e,String(t),n||Io$1,r||function(t){return e.outEdges(t)})},Io$1=ho$1.constant(1),So$1=function(e,t,n){return ho$1.transform(e.nodes(),(function(r,i){r[i]=ko$1(e,i,t,n)}),{})},Mo$1=function(e){var t=0,n=[],r={},i=[];function o(a){var s=r[a]={onStack:!0,lowlink:t,index:t++};if(n.push(a),e.successors(a).forEach((function(e){ho$1.has(r,e)?r[e].onStack&&(s.lowlink=Math.min(s.lowlink,r[e].index)):(o(e),s.lowlink=Math.min(s.lowlink,r[e].lowlink))})),s.lowlink===s.index){var l,c=[];do{l=n.pop(),r[l].onStack=!1,c.push(l)}while(a!==l);i.push(c)}}return e.nodes().forEach((function(e){ho$1.has(r,e)||o(e)})),i},Co$1=function(e){return ho$1.filter(Mo$1(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))},Go$1=function(e,t,n){return r=t||Bo$1,i=n||function(t){return e.outEdges(t)},o={},(a=e.nodes()).forEach((function(e){o[e]={},o[e][e]={distance:0},a.forEach((function(t){e!==t&&(o[e][t]={distance:Number.POSITIVE_INFINITY})})),i(e).forEach((function(t){var n=t.v===e?t.w:t.v,i=r(t);o[e][n]={distance:i,predecessor:e}}))})),a.forEach((function(e){var t=o[e];a.forEach((function(n){var r=o[n];a.forEach((function(n){var i=r[e],o=t[n],a=r[n],s=i.distance+o.distance;s<a.distance&&(a.distance=s,a.predecessor=o.predecessor)}))}))})),o;var r,i,o,a},Bo$1=ho$1.constant(1),Ao$1=Lo$1;function Lo$1(e){var t={},n={},r=[];if(ho$1.each(e.sinks(),(function i(o){if(ho$1.has(n,o))throw new Ro$1;ho$1.has(t,o)||(n[o]=!0,t[o]=!0,ho$1.each(e.predecessors(o),i),delete n[o],r.push(o))})),ho$1.size(t)!==e.nodeCount())throw new Ro$1;return r}function Ro$1(){}Lo$1.CycleException=Ro$1,Ro$1.prototype=new Error;var To$1=function(e,t,n){ho$1.isArray(t)||(t=[t]);var r=(e.isDirected()?e.successors:e.neighbors).bind(e),i=[],o={};return ho$1.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);Do$1(e,t,"post"===n,o,r,i)})),i};function Do$1(e,t,n,r,i,o){ho$1.has(r,t)||(r[t]=!0,n||o.push(t),ho$1.each(i(t),(function(t){Do$1(e,t,n,r,i,o)})),n&&o.push(t))}var Po$1,zo$1={Graph:wo$1.Graph,json:Eo$1,alg:{components:xo$1,dijkstra:ko$1,dijkstraAll:So$1,findCycles:Co$1,floydWarshall:Go$1,isAcyclic:function(e){try{Ao$1(e)}catch(t){if(t instanceof Ao$1.CycleException)return!1;throw t}return!0},postorder:function(e,t){return To$1(e,t,"post")},preorder:function(e,t){return To$1(e,t,"pre")},prim:function(e,t){var n,r=new lo$1,i={},o=new No$1;function a(e){var r=e.v===n?e.w:e.v,a=o.priority(r);if(void 0!==a){var s=t(e);s<a&&(i[r]=n,o.decrease(r,s))}}if(0===e.nodeCount())return r;ho$1.each(e.nodes(),(function(e){o.add(e,Number.POSITIVE_INFINITY),r.setNode(e)})),o.decrease(e.nodes()[0],0);for(var s=!1;o.size()>0;){if(n=o.removeMin(),ho$1.has(i,n))r.setEdge(n,i[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(a)}return r},tarjan:Mo$1,topsort:Ao$1},version:wo$1.version};try{Po$1=zo$1}catch(e11){}Po$1||(Po$1=window.graphlib);var Fo$1=Po$1,Uo$1=function(e){return at$1(e,5)},Vo$1=function(e,t,n){if(!D(n))return!1;var r=typeof t;return!!("number"==r?rn$1(n)&&Fe$1(t,n.length):"string"==r&&t in n)&&h(n[t],e)},$o$1=Object.prototype,Ho$1=$o$1.hasOwnProperty,Wo$1=Xr$1((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Vo$1(t[0],t[1],i)&&(r=1);++n<r;)for(var o=t[n],a=dn$1(o),s=-1,l=a.length;++s<l;){var c=a[s],u=e[c];(void 0===u||h(u,$o$1[c])&&!Ho$1.call(e,c))&&(e[c]=o[c])}return e})),qo$1=function(e){return function(t,n,r){var i=Object(t);if(!rn$1(t)){var o=dr$1(n);t=on$1(t),n=function(e){return o(i[e],e,i)}}var a=e(t,n,r);return a>-1?i[o?t[a]:a]:void 0}},Yo$1=/^\s+|\s+$/g,Jo$1=/^[-+]0x[0-9a-f]+$/i,Xo$1=/^0b[01]+$/i,Ko$1=/^0o[0-7]+$/i,Qo$1=parseInt,Zo$1=function(e){if("number"==typeof e)return e;if(Pt$1(e))return NaN;if(D(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=D(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Yo$1,"");var n=Xo$1.test(e);return n||Ko$1.test(e)?Qo$1(e.slice(2),n?2:8):Jo$1.test(e)?NaN:+e},ei$1=function(e){return e?1/0===(e=Zo$1(e))||-1/0===e?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},ni$1=function(e){var t=ei$1(e),n=t%1;return t==t?n?t-n:t:0},ti$1=Math.max,ri$1=qo$1((function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:ni$1(n);return i<0&&(i=ti$1(r+i,0)),Kr$1(e,dr$1(t),i)})),oi$1=function(e){return null!=e&&e.length?Vr$1(e,1):[]},ii$1=function(e,t){return null==e?e:st$1(e,lt$1(t),dn$1)},ai=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0},ui$1=function(e,t){var n={};return t=dr$1(t),dt$1(e,(function(e,r,i){Oe(n,r,t(e,r,i))})),n},ci$1=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(void 0===s?a==a&&!Pt$1(a):n(a,s)))var s=a,l=o}return l},si$1=function(e,t){return e>t},di$1=function(e){return e&&e.length?ci$1(e,ht$1,si$1):void 0},fi$1=function(e,t,n){(void 0!==n&&!h(e[t],n)||void 0===n&&!(t in e))&&Oe(e,t,n)},hi$1=Function.prototype,li$1=Object.prototype,vi$1=hi$1.toString,pi$1=li$1.hasOwnProperty,gi$1=vi$1.call(Object),yi$1=function(e){if(!Ce(e)||"[object Object]"!=T$1(e))return!1;var t=En$1(e);if(null===t)return!0;var n=pi$1.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&vi$1.call(n)==gi$1},bi$1=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},mi$1=function(e){return Se(e,dn$1(e))},wi$1=function(e,t,n,r,i,o,a){var s=bi$1(e,n),l=bi$1(t,n),c=a.get(l);if(c)fi$1(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var d=Te(l),f=!d&&Pe$1(l),p=!d&&!f&&Ye$1(l);u=l,d||f||p?Te(s)?u=s:ao$1(s)?u=ln$1(s):f?(h=!1,u=hn$1(l,!0)):p?(h=!1,u=Yn$1(l,!0)):u=[]:yi$1(l)||Re(l)?(u=s,Re(s)?u=mi$1(s):D(s)&&!z(s)||(u=Qn$1(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),fi$1(e,n,u)}},Ei=function e(t,n,r,i,o){t!==n&&st$1(n,(function(a,s){if(o||(o=new je$1),D(a))wi$1(t,n,s,r,e,i,o);else{var l=i?i(bi$1(t,s),a,s+"",t,n,o):void 0;void 0===l&&(l=a),fi$1(t,s,l)}}),dn$1)},_i$1=function(e){return Xr$1((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&Vo$1(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r)}return t}))}((function(e,t,n){Ei(e,t,n)})),ji=function(e,t){return e<t},xi$1=function(e){return e&&e.length?ci$1(e,ht$1,ji):void 0},Ni=function(e,t){return e&&e.length?ci$1(e,dr$1(t),ji):void 0},Oi$1=function(){return k.Date.now()},ki$1=function(e,t,n,r){if(!D(e))return e;for(var i=-1,o=(t=Zt$1(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var l=er$2(t[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=a){var u=s[l];void 0===(c=r?r(u,l,s):void 0)&&(c=D(u)?u:Fe$1(t[i+1])?[]:{})}Ie$1(s,l,c),s=s[l]}return e},Ii$1=function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=nr$1(e,a);n(s,a)&&ki$1(o,Zt$1(a,e),s)}return o},Si$1=function(e,t){return Ii$1(e,t,(function(t,n){return ir$1(e,n)}))},Mi=function(e){return Jr$1(Wr$1(e,void 0,oi$1),e+"")}((function(e,t){return null==e?{}:Si$1(e,t)})),Ci$1=Math.ceil,Gi$1=Math.max,Bi=function(e,t,n,r){for(var i=-1,o=Gi$1(Ci$1((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a},Ai$1=function(e,t,n){return n&&"number"!=typeof n&&Vo$1(e,t,n)&&(t=n=void 0),e=ei$1(e),void 0===t?(t=e,e=0):t=ei$1(t),n=void 0===n?e<t?1:-1:ei$1(n),Bi(e,t,n,void 0)},Li$1=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},Ri=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,o=Pt$1(e),a=void 0!==t,s=null===t,l=t==t,c=Pt$1(t);if(!s&&!c&&!o&&e>t||o&&a&&l&&!s&&!c||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!c&&e<t||c&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0},Ti=function(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=Ri(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index},Di=function(e,t,n){t=t.length?Yt$1(t,(function(e){return Te(e)?function(t){return nr$1(t,1===e.length?e[0]:e)}:e})):[ht$1];var r=-1;t=Yt$1(t,He$1(dr$1));var i=br$1(e,(function(e,n,i){return{criteria:Yt$1(t,(function(t){return t(e)})),index:++r,value:e}}));return Li$1(i,(function(e,t){return Ti(e,t,n)}))},Pi$1=Xr$1((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Vo$1(e,t[0],t[1])?t=[]:n>2&&Vo$1(t[0],t[1],t[2])&&(t=[t[0]]),Di(e,Vr$1(t,1),[])})),zi$1=0,Fi=function(e){var t=++zi$1;return Qt$1(e)+t},Ui$1=function(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:void 0;n(a,e[r],s)}return a},Vi$1,$i$1=function(e,t){return Ui$1(e||[],t||[],Ie$1)};try{Vi$1={cloneDeep:Uo$1,constant:ct$1,defaults:Wo$1,each:pt$1,filter:fr$1,find:ri$1,flatten:oi$1,forEach:vt$1,forIn:ii$1,has:vr$1,isUndefined:yr$1,last:ai,map:mr$1,mapValues:ui$1,max:di$1,merge:_i$1,min:xi$1,minBy:Ni,now:Oi$1,pick:Mi,range:Ai$1,reduce:_r$1,sortBy:Pi$1,uniqueId:Fi,values:fo$1,zipObject:$i$1}}catch(e11){}Vi$1||(Vi$1=window._);var Hi$1=Vi$1,Wi$1=qi$1;function qi$1(){var e={};e._next=e._prev=e,this._sentinel=e}function Yi$1(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function Ji$1(e,t){if("_next"!==e&&"_prev"!==e)return t}qi$1.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return Yi$1(t),t},qi$1.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&Yi$1(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},qi$1.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,Ji$1)),n=n._prev;return"["+e.join(", ")+"]"};var Xi$1=Fo$1.Graph,Ki$1=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new Xi$1,r=0,i=0;Hi$1.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),Hi$1.forEach(e.edges(),(function(e){var o=n.edge(e.v,e.w)||0,a=t(e),s=o+a;n.setEdge(e.v,e.w,s),i=Math.max(i,n.node(e.v).out+=a),r=Math.max(r,n.node(e.w).in+=a)}));var o=Hi$1.range(i+r+3).map((function(){return new Wi$1})),a=r+1;return Hi$1.forEach(n.nodes(),(function(e){ea$1(o,a,n.node(e))})),{graph:n,buckets:o,zeroIdx:a}}(e,t||Qi$1),r=function(e,t,n){for(var r,i=[],o=t[t.length-1],a=t[0];e.nodeCount();){for(;r=a.dequeue();)Zi$1(e,t,n,r);for(;r=o.dequeue();)Zi$1(e,t,n,r);if(e.nodeCount())for(var s=t.length-2;s>0;--s)if(r=t[s].dequeue()){i=i.concat(Zi$1(e,t,n,r,!0));break}}return i}(n.graph,n.buckets,n.zeroIdx);return Hi$1.flatten(Hi$1.map(r,(function(t){return e.outEdges(t.v,t.w)})),!0)},Qi$1=Hi$1.constant(1);function Zi$1(e,t,n,r,i){var o=i?[]:void 0;return Hi$1.forEach(e.inEdges(r.v),(function(r){var a=e.edge(r),s=e.node(r.v);i&&o.push({v:r.v,w:r.w}),s.out-=a,ea$1(t,n,s)})),Hi$1.forEach(e.outEdges(r.v),(function(r){var i=e.edge(r),o=r.w,a=e.node(o);a.in-=i,ea$1(t,n,a)})),e.removeNode(r.v),o}function ea$1(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}var na$1={run:function(e){var t,n="greedy"===e.graph().acyclicer?Ki$1(e,(t=e,function(e){return t.edge(e).weight})):function(e){var t=[],n={},r={};return Hi$1.forEach(e.nodes(),(function i(o){Hi$1.has(r,o)||(r[o]=!0,n[o]=!0,Hi$1.forEach(e.outEdges(o),(function(e){Hi$1.has(n,e.w)?t.push(e):i(e.w)})),delete n[o])})),t}(e);Hi$1.forEach(n,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,Hi$1.uniqueId("rev"))}))},undo:function(e){Hi$1.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}},ta$1=Fo$1.Graph,ra$1={addDummyNode:oa$1,simplify:function(e){var t=(new ta$1).setGraph(e.graph());return Hi$1.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),Hi$1.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},i=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+i.weight,minlen:Math.max(r.minlen,i.minlen)})})),t},asNonCompoundGraph:function(e){var t=new ta$1({multigraph:e.isMultigraph()}).setGraph(e.graph());return Hi$1.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),Hi$1.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=Hi$1.map(e.nodes(),(function(t){var n={};return Hi$1.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return Hi$1.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=Hi$1.map(e.nodes(),(function(t){var n={};return Hi$1.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return Hi$1.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,i=e.x,o=e.y,a=t.x-i,s=t.y-o,l=e.width/2,c=e.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(a)*c?(s<0&&(c=-c),n=c*a/s,r=c):(a<0&&(l=-l),n=l,r=l*s/a),{x:i+n,y:o+r}},buildLayerMatrix:function(e){var t=Hi$1.map(Hi$1.range(ia$1(e)+1),(function(){return[]}));return Hi$1.forEach(e.nodes(),(function(n){var r=e.node(n),i=r.rank;Hi$1.isUndefined(i)||(t[i][r.order]=n)})),t},normalizeRanks:function(e){var t=Hi$1.min(Hi$1.map(e.nodes(),(function(t){return e.node(t).rank})));Hi$1.forEach(e.nodes(),(function(n){var r=e.node(n);Hi$1.has(r,"rank")&&(r.rank-=t)}))},removeEmptyRanks:function(e){var t=Hi$1.min(Hi$1.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];Hi$1.forEach(e.nodes(),(function(r){var i=e.node(r).rank-t;n[i]||(n[i]=[]),n[i].push(r)}));var r=0,i=e.graph().nodeRankFactor;Hi$1.forEach(n,(function(t,n){Hi$1.isUndefined(t)&&n%i!=0?--r:r&&Hi$1.forEach(t,(function(t){e.node(t).rank+=r}))}))},addBorderNode:function(e,t,n,r){var i={width:0,height:0};return arguments.length>=4&&(i.rank=n,i.order=r),oa$1(e,"border",i,t)},maxRank:ia$1,partition:function(e,t){var n={lhs:[],rhs:[]};return Hi$1.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){Hi$1.now();try{return t()}finally{}},notime:function(e,t){return t()}};function oa$1(e,t,n,r){var i;do{i=Hi$1.uniqueId(r)}while(e.hasNode(i));return n.dummy=t,e.setNode(i,n),i}function ia$1(e){return Hi$1.max(Hi$1.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!Hi$1.isUndefined(n))return n})))}var aa$1={run:function(e){e.graph().dummyChains=[],Hi$1.forEach(e.edges(),(function(t){!function(e,t){var n,r,i,o=t.v,a=e.node(o).rank,s=t.w,l=e.node(s).rank,c=t.name,u=e.edge(t),h=u.labelRank;if(l!==a+1){for(e.removeEdge(t),i=0,++a;a<l;++i,++a)u.points=[],r={width:0,height:0,edgeLabel:u,edgeObj:t,rank:a},n=ra$1.addDummyNode(e,"edge",r,"_d"),a===h&&(r.width=u.width,r.height=u.height,r.dummy="edge-label",r.labelpos=u.labelpos),e.setEdge(o,n,{weight:u.weight},c),0===i&&e.graph().dummyChains.push(n),o=n;e.setEdge(o,s,{weight:u.weight},c)}}(e,t)}))},undo:function(e){Hi$1.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),i=r.edgeLabel;for(e.setEdge(r.edgeObj,i);r.dummy;)n=e.successors(t)[0],e.removeNode(t),i.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),t=n,r=e.node(t)}))}},ua$1=function(e){var t={};Hi$1.forEach(e.sources(),(function n(r){var i=e.node(r);if(Hi$1.has(t,r))return i.rank;t[r]=!0;var o=Hi$1.min(Hi$1.map(e.outEdges(r),(function(t){return n(t.w)-e.edge(t).minlen})));return o!==Number.POSITIVE_INFINITY&&null!=o||(o=0),i.rank=o}))},ca$1=function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen},sa$1=Fo$1.Graph,da$1=ca$1,fa$1=function(e){var t,n,r=new sa$1({directed:!1}),i=e.nodes()[0],o=e.nodeCount();for(r.setNode(i,{});ha$1(r,e)<o;)t=la$1(r,e),n=r.hasNode(t.v)?da$1(e,t):-da$1(e,t),va$1(r,e,n);return r};function ha$1(e,t){return Hi$1.forEach(e.nodes(),(function n(r){Hi$1.forEach(t.nodeEdges(r),(function(i){var o=i.v,a=r===o?i.w:o;e.hasNode(a)||da$1(t,i)||(e.setNode(a,{}),e.setEdge(r,a,{}),n(a))}))})),e.nodeCount()}function la$1(e,t){return Hi$1.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return da$1(t,n)}))}function va$1(e,t,n){Hi$1.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}var pa$1=ca$1,ga$1=ua$1,ya$1=Fo$1.alg.preorder,ba$1=Fo$1.alg.postorder,ma$1=ra$1.simplify,wa$1=Ea$1;function Ea$1(e){e=ma$1(e),ga$1(e);var t,n=fa$1(e);for(xa$1(n),_a$1(n,e);t=Oa$1(n);)Ia$1(n,e,t,ka$1(n,e,t))}function _a$1(e,t){var n=ba$1(e,e.nodes());n=n.slice(0,n.length-1),Hi$1.forEach(n,(function(n){var r,i,o,a;i=t,o=n,a=(r=e).node(o).parent,r.edge(o,a).cutvalue=ja$1(r,i,o)}))}function ja$1(e,t,n){var r=e.node(n).parent,i=!0,o=t.edge(n,r),a=0;return o||(i=!1,o=t.edge(r,n)),a=o.weight,Hi$1.forEach(t.nodeEdges(n),(function(o){var s,l,c=o.v===n,u=c?o.w:o.v;if(u!==r){var h=c===i,d=t.edge(o).weight;if(a+=h?d:-d,s=n,l=u,e.hasEdge(s,l)){var f=e.edge(n,u).cutvalue;a+=h?-f:f}}})),a}function xa$1(e,t){arguments.length<2&&(t=e.nodes()[0]),Na$1(e,{},1,t)}function Na$1(e,t,n,r,i){var o=n,a=e.node(r);return t[r]=!0,Hi$1.forEach(e.neighbors(r),(function(i){Hi$1.has(t,i)||(n=Na$1(e,t,n,i,r))})),a.low=o,a.lim=n++,i?a.parent=i:delete a.parent,n}function Oa$1(e){return Hi$1.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function ka$1(e,t,n){var r=n.v,i=n.w;t.hasEdge(r,i)||(r=n.w,i=n.v);var o=e.node(r),a=e.node(i),s=o,l=!1;o.lim>a.lim&&(s=a,l=!0);var c=Hi$1.filter(t.edges(),(function(t){return l===Sa$1(e,e.node(t.v),s)&&l!==Sa$1(e,e.node(t.w),s)}));return Hi$1.minBy(c,(function(e){return pa$1(t,e)}))}function Ia$1(e,t,n,r){var i,o,a,s,l=n.v,c=n.w;e.removeEdge(l,c),e.setEdge(r.v,r.w,{}),xa$1(e),_a$1(e,t),i=e,o=t,a=Hi$1.find(i.nodes(),(function(e){return!o.node(e).parent})),s=(s=ya$1(i,a)).slice(1),Hi$1.forEach(s,(function(e){var t=i.node(e).parent,n=o.edge(e,t),r=!1;n||(n=o.edge(t,e),r=!0),o.node(e).rank=o.node(t).rank+(r?n.minlen:-n.minlen)}))}function Sa$1(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}Ea$1.initLowLimValues=xa$1,Ea$1.initCutValues=_a$1,Ea$1.calcCutValue=ja$1,Ea$1.leaveEdge=Oa$1,Ea$1.enterEdge=ka$1,Ea$1.exchangeEdges=Ia$1;var Ma$1=ua$1,Ca$1=function(e){switch(e.graph().ranker){case"network-simplex":default:Ba$1(e);break;case"tight-tree":Ma$1(t=e),fa$1(t);break;case"longest-path":Ga$1(e)}var t},Ga$1=Ma$1;function Ba$1(e){wa$1(e)}var Aa$1=function(e){var t=function(e){var t={},n=0;return Hi$1.forEach(e.children(),(function r(i){var o=n;Hi$1.forEach(e.children(i),r),t[i]={low:o,lim:n++}})),t}(e);Hi$1.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),i=r.edgeObj,o=function(e,t,n,r){var i,o,a=[],s=[],l=Math.min(t[n].low,t[r].low),c=Math.max(t[n].lim,t[r].lim);i=n;do{i=e.parent(i),a.push(i)}while(i&&(t[i].low>l||c>t[i].lim));for(o=i,i=r;(i=e.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(e,t,i.v,i.w),a=o.path,s=o.lca,l=0,c=a[l],u=!0;n!==i.w;){if(r=e.node(n),u){for(;(c=a[l])!==s&&e.node(c).maxRank<r.rank;)l++;c===s&&(u=!1)}if(!u){for(;l<a.length-1&&e.node(c=a[l+1]).minRank<=r.rank;)l++;c=a[l]}e.setParent(n,c),n=e.successors(n)[0]}}))},La$1={run:function(e){var t=ra$1.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};function n(r,i){var o=e.children(r);o&&o.length&&Hi$1.forEach(o,(function(e){n(e,i+1)})),t[r]=i}return Hi$1.forEach(e.children(),(function(e){n(e,1)})),t}(e),r=Hi$1.max(Hi$1.values(n))-1,i=2*r+1;e.graph().nestingRoot=t,Hi$1.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var o,a=(o=e,Hi$1.reduce(o.edges(),(function(e,t){return e+o.edge(t).weight}),0)+1);Hi$1.forEach(e.children(),(function(o){Ra$1(e,t,i,a,r,n,o)})),e.graph().nodeRankFactor=i},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,Hi$1.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}};function Ra$1(e,t,n,r,i,o,a){var s=e.children(a);if(s.length){var l=ra$1.addBorderNode(e,"_bt"),c=ra$1.addBorderNode(e,"_bb"),u=e.node(a);e.setParent(l,a),u.borderTop=l,e.setParent(c,a),u.borderBottom=c,Hi$1.forEach(s,(function(s){Ra$1(e,t,n,r,i,o,s);var u=e.node(s),h=u.borderTop?u.borderTop:s,d=u.borderBottom?u.borderBottom:s,f=u.borderTop?r:2*r,p=h!==d?1:i-o[a]+1;e.setEdge(l,h,{weight:f,minlen:p,nestingEdge:!0}),e.setEdge(d,c,{weight:f,minlen:p,nestingEdge:!0})})),e.parent(a)||e.setEdge(t,l,{weight:0,minlen:i+o[a]})}else a!==t&&e.setEdge(t,a,{weight:0,minlen:n})}var Ta$1=function(e){Hi$1.forEach(e.children(),(function t(n){var r=e.children(n),i=e.node(n);if(r.length&&Hi$1.forEach(r,t),Hi$1.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var o=i.minRank,a=i.maxRank+1;o<a;++o)Da$1(e,"borderLeft","_bl",n,i,o),Da$1(e,"borderRight","_br",n,i,o)}}))};function Da$1(e,t,n,r,i,o){var a={width:0,height:0,rank:o,borderType:t},s=i[t][o-1],l=ra$1.addDummyNode(e,"border",a,n);i[t][o]=l,e.setParent(l,r),s&&e.setEdge(s,l,{weight:1})}var Pa$1={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||za$1(e)},undo:function(e){var t,n=e.graph().rankdir.toLowerCase();"bt"!==n&&"rl"!==n||(t=e,Hi$1.forEach(t.nodes(),(function(e){Ua$1(t.node(e))})),Hi$1.forEach(t.edges(),(function(e){var n=t.edge(e);Hi$1.forEach(n.points,Ua$1),Hi$1.has(n,"y")&&Ua$1(n)}))),"lr"!==n&&"rl"!==n||(function(e){Hi$1.forEach(e.nodes(),(function(t){Va$1(e.node(t))})),Hi$1.forEach(e.edges(),(function(t){var n=e.edge(t);Hi$1.forEach(n.points,Va$1),Hi$1.has(n,"x")&&Va$1(n)}))}(e),za$1(e))}};function za$1(e){Hi$1.forEach(e.nodes(),(function(t){Fa$1(e.node(t))})),Hi$1.forEach(e.edges(),(function(t){Fa$1(e.edge(t))}))}function Fa$1(e){var t=e.width;e.width=e.height,e.height=t}function Ua$1(e){e.y=-e.y}function Va$1(e){var t=e.x;e.x=e.y,e.y=t}var $a$1=function(e){var t={},n=Hi$1.filter(e.nodes(),(function(t){return!e.children(t).length})),r=Hi$1.max(Hi$1.map(n,(function(t){return e.node(t).rank}))),i=Hi$1.map(Hi$1.range(r+1),(function(){return[]}));var o=Hi$1.sortBy(n,(function(t){return e.node(t).rank}));return Hi$1.forEach(o,(function n(r){if(!Hi$1.has(t,r)){t[r]=!0;var o=e.node(r);i[o.rank].push(r),Hi$1.forEach(e.successors(r),n)}})),i},Ha$1=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=Wa$1(e,t[r-1],t[r]);return n};function Wa$1(e,t,n){for(var r=Hi$1.zipObject(n,Hi$1.map(n,(function(e,t){return t}))),i=Hi$1.flatten(Hi$1.map(t,(function(t){return Hi$1.sortBy(Hi$1.map(e.outEdges(t),(function(t){return{pos:r[t.w],weight:e.edge(t).weight}})),"pos")})),!0),o=1;o<n.length;)o<<=1;var a=2*o-1;o-=1;var s=Hi$1.map(new Array(a),(function(){return 0})),l=0;return Hi$1.forEach(i.forEach((function(e){var t=e.pos+o;s[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=s[t+1]),s[t=t-1>>1]+=e.weight;l+=e.weight*n}))),l}var qa$1=function(e,t){return Hi$1.map(t,(function(t){var n=e.inEdges(t);if(n.length){var r=Hi$1.reduce(n,(function(t,n){var r=e.edge(n),i=e.node(n.v);return{sum:t.sum+r.weight*i.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:r.sum/r.weight,weight:r.weight}}return{v:t}}))},Ya$1=function(e,t){var n={};return Hi$1.forEach(e,(function(e,t){var r=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};Hi$1.isUndefined(e.barycenter)||(r.barycenter=e.barycenter,r.weight=e.weight)})),Hi$1.forEach(t.edges(),(function(e){var t=n[e.v],r=n[e.w];Hi$1.isUndefined(t)||Hi$1.isUndefined(r)||(r.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){var n,r,i,o;t.merged||(Hi$1.isUndefined(t.barycenter)||Hi$1.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&(r=t,i=0,o=0,(n=e).weight&&(i+=n.barycenter*n.weight,o+=n.weight),r.weight&&(i+=r.barycenter*r.weight,o+=r.weight),n.vs=r.vs.concat(n.vs),n.barycenter=i/o,n.weight=o,n.i=Math.min(r.i,n.i),r.merged=!0)}}function r(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var i=e.pop();t.push(i),Hi$1.forEach(i.in.reverse(),n(i)),Hi$1.forEach(i.out,r(i))}return Hi$1.map(Hi$1.filter(t,(function(e){return!e.merged})),(function(e){return Hi$1.pick(e,["vs","i","barycenter","weight"])}))}(Hi$1.filter(n,(function(e){return!e.indegree})))},Ja$1=function(e,t){var n,r=ra$1.partition(e,(function(e){return Hi$1.has(e,"barycenter")})),i=r.lhs,o=Hi$1.sortBy(r.rhs,(function(e){return-e.i})),a=[],s=0,l=0,c=0;i.sort((n=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:n?t.i-e.i:e.i-t.i})),c=Xa$1(a,o,c),Hi$1.forEach(i,(function(e){c+=e.vs.length,a.push(e.vs),s+=e.barycenter*e.weight,l+=e.weight,c=Xa$1(a,o,c)}));var u={vs:Hi$1.flatten(a,!0)};return l&&(u.barycenter=s/l,u.weight=l),u};function Xa$1(e,t,n){for(var r;t.length&&(r=Hi$1.last(t)).i<=n;)t.pop(),e.push(r.vs),n++;return n}var Ka$1=function e(t,n,r,i){var o=t.children(n),a=t.node(n),s=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,c={};s&&(o=Hi$1.filter(o,(function(e){return e!==s&&e!==l})));var u=qa$1(t,o);Hi$1.forEach(u,(function(n){if(t.children(n.v).length){var o=e(t,n.v,r,i);c[n.v]=o,Hi$1.has(o,"barycenter")&&(a=n,s=o,Hi$1.isUndefined(a.barycenter)?(a.barycenter=s.barycenter,a.weight=s.weight):(a.barycenter=(a.barycenter*a.weight+s.barycenter*s.weight)/(a.weight+s.weight),a.weight+=s.weight))}var a,s}));var h=Ya$1(u,r);!function(e,t){Hi$1.forEach(e,(function(e){e.vs=Hi$1.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(h,c);var d=Ja$1(h,i);if(s&&(d.vs=Hi$1.flatten([s,d.vs,l],!0),t.predecessors(s).length)){var f=t.node(t.predecessors(s)[0]),p=t.node(t.predecessors(l)[0]);Hi$1.has(d,"barycenter")||(d.barycenter=0,d.weight=0),d.barycenter=(d.barycenter*d.weight+f.order+p.order)/(d.weight+2),d.weight+=2}return d},Qa$1=Fo$1.Graph,Za$1=function(e,t,n){var r=function(e){for(var t;e.hasNode(t=Hi$1.uniqueId("_root")););return t}(e),i=new Qa$1({compound:!0}).setGraph({root:r}).setDefaultNodeLabel((function(t){return e.node(t)}));return Hi$1.forEach(e.nodes(),(function(o){var a=e.node(o),s=e.parent(o);(a.rank===t||a.minRank<=t&&t<=a.maxRank)&&(i.setNode(o),i.setParent(o,s||r),Hi$1.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,r=i.edge(n,o),a=Hi$1.isUndefined(r)?0:r.weight;i.setEdge(n,o,{weight:e.edge(t).weight+a})})),Hi$1.has(a,"minRank")&&i.setNode(o,{borderLeft:a.borderLeft[t],borderRight:a.borderRight[t]}))})),i},eu$1=function(e,t,n){var r,i={};Hi$1.forEach(n,(function(n){for(var o,a,s=e.parent(n);s;){if((o=e.parent(s))?(a=i[o],i[o]=s):(a=r,r=s),a&&a!==s)return void t.setEdge(a,s);s=o}}))},nu$1=Fo$1.Graph,tu$1=function(e){var t=ra$1.maxRank(e),n=ru$1(e,Hi$1.range(1,t+1),"inEdges"),r=ru$1(e,Hi$1.range(t-1,-1,-1),"outEdges"),i=$a$1(e);iu$1(e,i);for(var o,a=Number.POSITIVE_INFINITY,s=0,l=0;l<4;++s,++l){ou$1(s%2?n:r,s%4>=2),i=ra$1.buildLayerMatrix(e);var c=Ha$1(e,i);c<a&&(l=0,o=Hi$1.cloneDeep(i),a=c)}iu$1(e,o)};function ru$1(e,t,n){return Hi$1.map(t,(function(t){return Za$1(e,t,n)}))}function ou$1(e,t){var n=new nu$1;Hi$1.forEach(e,(function(e){var r=e.graph().root,i=Ka$1(e,r,n,t);Hi$1.forEach(i.vs,(function(t,n){e.node(t).order=n})),eu$1(e,n,i.vs)}))}function iu$1(e,t){Hi$1.forEach(t,(function(t){Hi$1.forEach(t,(function(t,n){e.node(t).order=n}))}))}var au$1=Fo$1.Graph,uu$1=function(e){var t,n=ra$1.buildLayerMatrix(e),r=Hi$1.merge(cu$1(e,n),su$1(e,n)),i={};Hi$1.forEach(["u","d"],(function(o){t="u"===o?n:Hi$1.values(n).reverse(),Hi$1.forEach(["l","r"],(function(n){"r"===n&&(t=Hi$1.map(t,(function(e){return Hi$1.values(e).reverse()})));var a=("u"===o?e.predecessors:e.successors).bind(e),s=hu$1(e,t,r,a),l=lu$1(e,t,s.root,s.align,"r"===n);"r"===n&&(l=Hi$1.mapValues(l,(function(e){return-e}))),i[o+n]=l}))}));var o=vu$1(e,i);return pu$1(i,o),gu$1(i,e.graph().align)};function cu$1(e,t){var n={};return Hi$1.reduce(t,(function(t,r){var i=0,o=0,a=t.length,s=Hi$1.last(r);return Hi$1.forEach(r,(function(t,l){var c=function(e,t){if(e.node(t).dummy)return Hi$1.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),u=c?e.node(c).order:a;(c||t===s)&&(Hi$1.forEach(r.slice(o,l+1),(function(t){Hi$1.forEach(e.predecessors(t),(function(r){var o=e.node(r),a=o.order;!(a<i||u<a)||o.dummy&&e.node(t).dummy||du$1(n,r,t)}))})),o=l+1,i=u)})),r})),n}function su$1(e,t){var n={};function r(t,r,i,o,a){var s;Hi$1.forEach(Hi$1.range(r,i),(function(r){s=t[r],e.node(s).dummy&&Hi$1.forEach(e.predecessors(s),(function(t){var r=e.node(t);r.dummy&&(r.order<o||r.order>a)&&du$1(n,t,s)}))}))}return Hi$1.reduce(t,(function(t,n){var i,o=-1,a=0;return Hi$1.forEach(n,(function(s,l){if("border"===e.node(s).dummy){var c=e.predecessors(s);c.length&&(i=e.node(c[0]).order,r(n,a,l,o,i),a=l,o=i)}r(n,a,n.length,i,t.length)})),n})),n}function du$1(e,t,n){if(t>n){var r=t;t=n,n=r}var i=e[t];i||(e[t]=i={}),i[n]=!0}function fu$1(e,t,n){if(t>n){var r=t;t=n,n=r}return Hi$1.has(e[t],n)}function hu$1(e,t,n,r){var i={},o={},a={};return Hi$1.forEach(t,(function(e){Hi$1.forEach(e,(function(e,t){i[e]=e,o[e]=e,a[e]=t}))})),Hi$1.forEach(t,(function(e){var t=-1;Hi$1.forEach(e,(function(e){var s=r(e);if(s.length)for(var l=((s=Hi$1.sortBy(s,(function(e){return a[e]}))).length-1)/2,c=Math.floor(l),u=Math.ceil(l);c<=u;++c){var h=s[c];o[e]===e&&t<a[h]&&!fu$1(n,e,h)&&(o[h]=e,o[e]=i[e]=i[h],t=a[h])}}))})),{root:i,align:o}}function lu$1(e,t,n,r,i){var o,a,s,l,c,u,h,d,f,p,g={},m=(o=e,a=t,s=n,l=i,d=new au$1,f=o.graph(),c=f.nodesep,u=f.edgesep,h=l,p=function(e,t,n){var r,i=e.node(t),o=e.node(n),a=0;if(a+=i.width/2,Hi$1.has(i,"labelpos"))switch(i.labelpos.toLowerCase()){case"l":r=-i.width/2;break;case"r":r=i.width/2}if(r&&(a+=h?r:-r),r=0,a+=(i.dummy?u:c)/2,a+=(o.dummy?u:c)/2,a+=o.width/2,Hi$1.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":r=o.width/2;break;case"r":r=-o.width/2}return r&&(a+=h?r:-r),r=0,a},Hi$1.forEach(a,(function(e){var t;Hi$1.forEach(e,(function(e){var n=s[e];if(d.setNode(n),t){var r=s[t],i=d.edge(r,n);d.setEdge(r,n,Math.max(p(o,e,t),i||0))}t=e}))})),d),v=i?"borderLeft":"borderRight";function y(e,t){for(var n=m.nodes(),r=n.pop(),i={};r;)i[r]?e(r):(i[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return y((function(e){g[e]=m.inEdges(e).reduce((function(e,t){return Math.max(e,g[t.v]+m.edge(t))}),0)}),m.predecessors.bind(m)),y((function(t){var n=m.outEdges(t).reduce((function(e,t){return Math.min(e,g[t.w]-m.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==v&&(g[t]=Math.max(g[t],n))}),m.successors.bind(m)),Hi$1.forEach(r,(function(e){g[e]=g[n[e]]})),g}function vu$1(e,t){return Hi$1.minBy(Hi$1.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return Hi$1.forIn(t,(function(t,i){var o,a=(o=i,e.node(o).width/2);n=Math.max(t+a,n),r=Math.min(t-a,r)})),n-r}))}function pu$1(e,t){var n=Hi$1.values(t),r=Hi$1.min(n),i=Hi$1.max(n);Hi$1.forEach(["u","d"],(function(n){Hi$1.forEach(["l","r"],(function(o){var a,s=n+o,l=e[s];if(l!==t){var c=Hi$1.values(l);(a="l"===o?r-Hi$1.min(c):i-Hi$1.max(c))&&(e[s]=Hi$1.mapValues(l,(function(e){return e+a})))}}))}))}function gu$1(e,t){return Hi$1.mapValues(e.ul,(function(n,r){if(t)return e[t.toLowerCase()][r];var i=Hi$1.sortBy(Hi$1.map(e,r));return(i[1]+i[2])/2}))}var yu$1=uu$1,bu$1=function(e){(function(e){var t=ra$1.buildLayerMatrix(e),n=e.graph().ranksep,r=0;Hi$1.forEach(t,(function(t){var i=Hi$1.max(Hi$1.map(t,(function(t){return e.node(t).height})));Hi$1.forEach(t,(function(t){e.node(t).y=r+i/2})),r+=i+n}))})(e=ra$1.asNonCompoundGraph(e)),Hi$1.forEach(yu$1(e),(function(t,n){e.node(n).x=t}))},mu$1=ra$1.normalizeRanks,wu$1=ra$1.removeEmptyRanks,Eu$1=ra$1,_u$1=Fo$1.Graph,ju$1=function(e,t){var n=t&&t.debugTiming?Eu$1.time:Eu$1.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return t=e,n=new _u$1({multigraph:!0,compound:!0}),r=Bu$1(t.graph()),n.setGraph(Hi$1.merge({},Nu$1,Gu$1(r,xu$1),Hi$1.pick(r,Ou$1))),Hi$1.forEach(t.nodes(),(function(e){var r=Bu$1(t.node(e));n.setNode(e,Hi$1.defaults(Gu$1(r,ku$1),Iu$1)),n.setParent(e,t.parent(e))})),Hi$1.forEach(t.edges(),(function(e){var r=Bu$1(t.edge(e));n.setEdge(e,Hi$1.merge({},Mu$1,Gu$1(r,Su$1),Hi$1.pick(r,Cu$1)))})),n;var t,n,r}));n("  runLayout",(function(){var e,r;e=t,(r=n)("    makeSpaceForEdgeLabels",(function(){var t,n;(n=(t=e).graph()).ranksep/=2,Hi$1.forEach(t.edges(),(function(e){var r=t.edge(e);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===n.rankdir||"BT"===n.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))})),r("    removeSelfEdges",(function(){var t;t=e,Hi$1.forEach(t.edges(),(function(e){if(e.v===e.w){var n=t.node(e.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))})),r("    acyclic",(function(){na$1.run(e)})),r("    nestingGraph.run",(function(){La$1.run(e)})),r("    rank",(function(){Ca$1(Eu$1.asNonCompoundGraph(e))})),r("    injectEdgeLabelProxies",(function(){var t;t=e,Hi$1.forEach(t.edges(),(function(e){var n=t.edge(e);if(n.width&&n.height){var r=t.node(e.v),i={rank:(t.node(e.w).rank-r.rank)/2+r.rank,e:e};Eu$1.addDummyNode(t,"edge-proxy",i,"_ep")}}))})),r("    removeEmptyRanks",(function(){wu$1(e)})),r("    nestingGraph.cleanup",(function(){La$1.cleanup(e)})),r("    normalizeRanks",(function(){mu$1(e)})),r("    assignRankMinMax",(function(){var t,n;t=e,n=0,Hi$1.forEach(t.nodes(),(function(e){var r=t.node(e);r.borderTop&&(r.minRank=t.node(r.borderTop).rank,r.maxRank=t.node(r.borderBottom).rank,n=Hi$1.max(n,r.maxRank))})),t.graph().maxRank=n})),r("    removeEdgeLabelProxies",(function(){var t;t=e,Hi$1.forEach(t.nodes(),(function(e){var n=t.node(e);"edge-proxy"===n.dummy&&(t.edge(n.e).labelRank=n.rank,t.removeNode(e))}))})),r("    normalize.run",(function(){aa$1.run(e)})),r("    parentDummyChains",(function(){Aa$1(e)})),r("    addBorderSegments",(function(){Ta$1(e)})),r("    order",(function(){tu$1(e)})),r("    insertSelfEdges",(function(){var t,n;t=e,n=Eu$1.buildLayerMatrix(t),Hi$1.forEach(n,(function(e){var n=0;Hi$1.forEach(e,(function(e,r){var i=t.node(e);i.order=r+n,Hi$1.forEach(i.selfEdges,(function(e){Eu$1.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:r+ ++n,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))})),r("    adjustCoordinateSystem",(function(){Pa$1.adjust(e)})),r("    position",(function(){bu$1(e)})),r("    positionSelfEdges",(function(){var t;t=e,Hi$1.forEach(t.nodes(),(function(e){var n=t.node(e);if("selfedge"===n.dummy){var r=t.node(n.e.v),i=r.x+r.width/2,o=r.y,a=n.x-i,s=r.height/2;t.setEdge(n.e,n.label),t.removeNode(e),n.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],n.label.x=n.x,n.label.y=n.y}}))})),r("    removeBorderNodes",(function(){var t;t=e,Hi$1.forEach(t.nodes(),(function(e){if(t.children(e).length){var n=t.node(e),r=t.node(n.borderTop),i=t.node(n.borderBottom),o=t.node(Hi$1.last(n.borderLeft)),a=t.node(Hi$1.last(n.borderRight));n.width=Math.abs(a.x-o.x),n.height=Math.abs(i.y-r.y),n.x=o.x+n.width/2,n.y=r.y+n.height/2}})),Hi$1.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))})),r("    normalize.undo",(function(){aa$1.undo(e)})),r("    fixupEdgeLabelCoords",(function(){var t;t=e,Hi$1.forEach(t.edges(),(function(e){var n=t.edge(e);if(Hi$1.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))})),r("    undoCoordinateSystem",(function(){Pa$1.undo(e)})),r("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,r=Number.POSITIVE_INFINITY,i=0,o=e.graph(),a=o.marginx||0,s=o.marginy||0;function l(e){var o=e.x,a=e.y,s=e.width,l=e.height;t=Math.min(t,o-s/2),n=Math.max(n,o+s/2),r=Math.min(r,a-l/2),i=Math.max(i,a+l/2)}Hi$1.forEach(e.nodes(),(function(t){l(e.node(t))})),Hi$1.forEach(e.edges(),(function(t){var n=e.edge(t);Hi$1.has(n,"x")&&l(n)})),t-=a,r-=s,Hi$1.forEach(e.nodes(),(function(n){var i=e.node(n);i.x-=t,i.y-=r})),Hi$1.forEach(e.edges(),(function(n){var i=e.edge(n);Hi$1.forEach(i.points,(function(e){e.x-=t,e.y-=r})),Hi$1.has(i,"x")&&(i.x-=t),Hi$1.has(i,"y")&&(i.y-=r)})),o.width=n-t+a,o.height=i-r+s}(e)})),r("    assignNodeIntersects",(function(){var t;t=e,Hi$1.forEach(t.edges(),(function(e){var n,r,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(n=i.points[0],r=i.points[i.points.length-1]):(i.points=[],n=a,r=o),i.points.unshift(Eu$1.intersectRect(o,n)),i.points.push(Eu$1.intersectRect(a,r))}))})),r("    reversePoints",(function(){var t;t=e,Hi$1.forEach(t.edges(),(function(e){var n=t.edge(e);n.reversed&&n.points.reverse()}))})),r("    acyclic.undo",(function(){na$1.undo(e)}))})),n("  updateInputGraph",(function(){var n,r;n=e,r=t,Hi$1.forEach(n.nodes(),(function(e){var t=n.node(e),i=r.node(e);t&&(t.x=i.x,t.y=i.y,r.children(e).length&&(t.width=i.width,t.height=i.height))})),Hi$1.forEach(n.edges(),(function(e){var t=n.edge(e),i=r.edge(e);t.points=i.points,Hi$1.has(i,"x")&&(t.x=i.x,t.y=i.y)})),n.graph().width=r.graph().width,n.graph().height=r.graph().height}))}))},xu$1=["nodesep","edgesep","ranksep","marginx","marginy"],Nu$1={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ou$1=["acyclicer","ranker","rankdir","align"],ku$1=["width","height"],Iu$1={width:0,height:0},Su$1=["minlen","weight","width","height","labeloffset"],Mu$1={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Cu$1=["labelpos"];function Gu$1(e,t){return Hi$1.mapValues(Hi$1.pick(e,t),Number)}function Bu$1(e){var t={};return Hi$1.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}var Au$1=Fo$1.Graph,Lu$1={graphlib:Fo$1,layout:ju$1,debug:{debugOrdering:function(e){var t=ra$1.buildLayerMatrix(e),n=new Au$1({compound:!0,multigraph:!0}).setGraph({});return Hi$1.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),Hi$1.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),Hi$1.forEach(t,(function(e,t){var r="layer"+t;n.setNode(r,{rank:"same"}),Hi$1.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}},util:{time:ra$1.time,notime:ra$1.notime},version:"0.8.5"},Ru$1=Lu$1.graphlib,Tu$1=Lu$1.layout;class Du$1{constructor(e){this.cardinality=1,this.include=a.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=i.NODE,this.name=e.name,this.attr=e.attr||{},this.inputs=e.inputs,this.path=e.path||[],this.width=e.width,this.height=e.height}}class Pu$1{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function zu$1(e){const t=new Pu$1;return e.nodes.map((e=>new Du$1(e))).forEach((e=>{t.nodes[e.name]=e,e.inputs.forEach((n=>{var r,i,o;r=t,i=e,(o=n).name!==i.name&&r.edges.push(Object.assign(Object.assign({},o.attr),{v:o.name,w:i.name}))}))})),t}class Fu$1{constructor(e,t={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=a.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=i.META,this.path=[],this.name=e,this.metaGraph=Hu$1(e,u.META,t)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map((e=>this.metaGraph.node(e)))}leaves(){let e,t=[],n=[this];for(;n.length;){let r=n.shift();r.isGroupNode?(e=r.metaGraph,e.nodes().forEach((t=>n.push(e.node(t))))):t.push(r.name)}return t}}class Uu$1{constructor(e,t){this.v=e,this.w=t,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(e,t){this.baseEdgeList.push(e)}}function Vu$1(e,t={}){return new Fu$1(e,t)}function $u$1(e,t){return new Uu$1(e,t)}function Hu$1(e,t,n){const r=n||{},i=new Ru$1.Graph(r);return i.setGraph({name:e,rankdir:r.rankdir,type:t,align:r.align}),i}class Wu$1{constructor(e={}){this.graphOptions=e,this.index={},this.graphOptions.compound=!0,this.root=Vu$1(r,this.graphOptions),this.index[r]=this.root}getNodeMap(){return this.index}node(e){return this.index[e]}setNode(e,t){this.index[e]=t}getBridgeGraph(e){const t=this.index[e];if(!t)throw Error("Could not find node in hierarchy: "+e);if(!("metaGraph"in t))return null;const n=t;if(n.bridgeGraph)return n.bridgeGraph;const r=Hu$1(o,u.BRIDGE,this.graphOptions);if(n.bridgeGraph=r,!t.parentNode||!("metaGraph"in t.parentNode))return r;const i=t.parentNode;return[i.metaGraph,this.getBridgeGraph(i.name)].forEach((t=>{t.edges().filter((t=>t.v===e||t.w===e)).forEach((n=>{const i=n.w===e;t.edge(n).baseEdgeList.forEach((t=>{const[o,a]=i?[t.w,n.v]:[t.v,n.w],s=this.getChildName(e,o),l={v:i?a:s,w:i?s:a};let c=r.edge(l);c||(c=$u$1(l.v,l.w),c.inbound=i,r.setEdge(l.v,l.w,c)),c.addBaseEdge(t,this)}))}))})),r}getChildName(e,t){let n=this.index[t];for(;n;){if(n.parentNode&&n.parentNode.name===e)return n.name;n=n.parentNode}throw Error("Could not find immediate child for descendant: "+t)}getPredecessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!0)}getSuccessors(e){const t=this.index[e];if(!t)throw Error("Could not find node with name: "+e);return this.getOneWayEdges(t,!1)}getOneWayEdges(e,t){const n=[];if(!e.parentNode||!e.parentNode.isGroupNode)return n;const r=e.parentNode,i=r.metaGraph,o=this.getBridgeGraph(r.name);return Yu$1(i,e,t,n),Yu$1(o,e,t,n),n}}function qu$1(e,t){const{rankDirection:n,align:r}=t,i=new Wu$1({rankdir:n,align:r});return o=i,a=e,Object.keys(a.nodes).forEach((e=>{const t=a.nodes[e],n=t.path;let r=o.root;r.depth=Math.max(n.length,r.depth);for(let i=0;i<n.length&&(r.depth=Math.max(r.depth,n.length-i),r.cardinality+=t.cardinality,i!==n.length-1);i++){const e=n[i];let a=o.node(e);a||(a=Vu$1(e,o.graphOptions),a.path=t.path.slice(0,i+1),a.parentNode=r,o.setNode(e,a),r.metaGraph.setNode(e,a)),r=a}o.setNode(t.name,t),t.parentNode=r,r.metaGraph.setNode(t.name,t)})),function(e,t){const n=e.getNodeMap();let r=[],i=[];const o=(e,t)=>{let n=0;for(;e;)t[n++]=e.name,e=e.parentNode;return n-1};t.edges.forEach((a=>{r=[],i=[];let s=o(t.nodes[a.v],r),l=o(t.nodes[a.w],i);for(;r[s]===i[l];)if(s--,l--,s<0||l<0)throw Error("No difference found between ancestor paths.");const c=n[r[s+1]],u=r[s],h=i[l];let d=c.metaGraph.edge(u,h);d||(d=$u$1(u,h),c.metaGraph.setEdge(u,h,d)),d.addBaseEdge(a,e)}))}(i,e),i;var o,a}function Yu$1(e,t,n,r){(n?e.inEdges(t.name):e.outEdges(t.name)).forEach((t=>{const n=e.edge(t);r.push(n)}))}class Ju$1{constructor(e){this.hierarchy=e,this.index={},this.hasSubHierarchy={},this.root=new Qu$1(this.hierarchy.root,this.hierarchy.graphOptions),this.index[e.root.name]=this.root,this.buildSubHierarchy(e.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(e){if(e in this.hasSubHierarchy)return;this.hasSubHierarchy[e]=!0;const t=this.index[e];if(t.node.type!==i.META)return;const n=t,r=n.node.metaGraph,o=n.coreGraph;r.nodes().forEach((e=>{const t=this.getOrCreateRenderNodeByName(e);o.setNode(e,t)})),r.edges().forEach((e=>{const t=r.edge(e),n=new Ku$1(t);o.setEdge(e.v,e.w,n)}));const s=n.node.parentNode;if(!s)return;const l=this.getRenderNodeByName(s.name),c=(e,...t)=>t.concat([e?"IN":"OUT"]).join("~~"),u=this.hierarchy.getBridgeGraph(e);u.edges().forEach((t=>{const n=u.edge(t),h=!!r.node(t.w),[d,f]=h?[t.w,t.v]:[t.v,t.w],p=t=>{const n=h?{v:t,w:e}:{v:e,w:t};return l.coreGraph.edge(n)};let g=p(f);g||(g=p(c(h,f,s.name)));const m=c(h,e),v=c(h,f,e);let y=o.node(v);if(!y){let e=o.node(m);if(!e){const t={name:m,type:i.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:a.UNSPECIFIED,inbound:h,attr:{}};e=new Xu$1(t),this.index[m]=e,o.setNode(m,e)}const t={name:v,type:i.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:a.UNSPECIFIED,inbound:h,attr:{}};y=new Xu$1(t),this.index[v]=y,o.setNode(v,y),o.setParent(v,m),e.node.cardinality++}const b=new Ku$1(n);b.adjoiningMetaEdge=g,h?o.setEdge(v,d,b):o.setEdge(d,v,b)}))}getOrCreateRenderNodeByName(e){if(!e)return null;if(e in this.index)return this.index[e];const t=this.getNodeByName(e);return t?(this.index[e]=t.isGroupNode?new Qu$1(t,this.hierarchy.graphOptions):new Xu$1(t),this.index[e]):null}getRenderNodeByName(e){return this.index[e]}getNodeByName(e){return this.hierarchy.node(e)}}class Xu$1{constructor(e){this.node=e,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=e.width||0,this.height=e.height||0,this.displayName=e.name,this.attr=e.attr}}class Ku$1{constructor(e){this.metaEdge=e,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Qu$1 extends Xu$1{constructor(e,t){super(e);const n=e.metaGraph.graph();t.compound=!0,this.coreGraph=Hu$1(n.name,u.CORE,t)}}function Zu$1(e,t){e.node.isGroupNode&&function(e,t){const r=n(t);e.coreGraph.nodes().map((t=>e.coreGraph.node(t))).forEach((e=>{var n,o,a,s,l,c;const{height:u,width:h}=e;switch(e.node.type){case i.NODE:Object.assign(e,r.nodeSize.node),e.height=u||r.nodeSize.node.height,e.width=h||r.nodeSize.node.width;break;case i.BRIDGE:Object.assign(e,r.nodeSize.bridge);break;case i.META:e.expanded?Zu$1(e,t):(Object.assign(e,r.nodeSize.meta),e.height=r.nodeSize.meta.height,e.width=r.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+e.node.type)}if(!e.expanded){const r=e.attr;!function(e,t=!1){if(e.coreBox.width=e.width,e.coreBox.height=e.height,!t){const t=`${e.displayName}`.length,n=3;e.width=Math.max(e.coreBox.width,t*n)}}(e,t&&(0===e.node.type&&!!(null===(o=null===(n=null==t?void 0:t.nodeSize)||void 0===n?void 0:n.meta)||void 0===o?void 0:o.width)||1===e.node.type&&(!!(null===(s=null===(a=null==t?void 0:t.nodeSize)||void 0===a?void 0:a.node)||void 0===s?void 0:s.width)||!!r.width)||2===e.node.type&&!!(null===(c=null===(l=null==t?void 0:t.nodeSize)||void 0===l?void 0:l.bridge)||void 0===c?void 0:c.width)))}}))}(e,t),e.node.type===i.META&&function(e,t){const r=n(t),o=r.subScene.meta;Object.assign(e,o);const{nodeSep:a,rankSep:s,edgeSep:l,align:c}=r.graph.meta,u={nodesep:a,ranksep:s,edgesep:l,align:c};Object.assign(e.coreBox,function(e,t){const{ranksep:n,nodesep:r,edgesep:o,align:a}=t;Object.assign(e.graph(),{ranksep:n,nodesep:r,edgesep:o,align:a});const s=[];if(e.nodes().forEach((t=>{e.node(t).node.type!==i.BRIDGE&&s.push(t)})),!s.length)return{width:0,height:0};Tu$1(e);let l=1/0,c=1/0,u=-1/0,h=-1/0;return s.forEach((t=>{const n=e.node(t),r=.5*n.width,i=n.x-r,o=n.x+r;l=i<l?i:l,u=o>u?o:u;const a=.5*n.height,s=n.y-a,d=n.y+a;c=s<c?s:c,h=d>h?d:h})),e.edges().forEach((t=>{const n=e.edge(t),r=e.node(n.metaEdge.v),i=e.node(n.metaEdge.w);if(3===n.points.length&&function(e){let t=ec$1(e[0],e[1]);for(let n=1;n<e.length-1;n++){const r=ec$1(e[n],e[n+1]);if(Math.abs(r-t)>1)return!1;t=r}return!0}(n.points)){if(null!=r){const e=r.expanded?r.x:nc$1(r);n.points[0].x=e}if(null!=i){const e=i.expanded?i.x:nc$1(i);n.points[2].x=e}n.points=[n.points[0],n.points[1]]}const o=n.points[n.points.length-2];null!=i&&(n.points[n.points.length-1]=tc$1(o,i));const a=n.points[1];null!=r&&(n.points[0]=tc$1(a,r)),n.points.forEach((e=>{l=e.x<l?e.x:l,u=e.x>u?e.x:u,c=e.y<c?e.y:c,h=e.y>h?e.y:h}))})),e.nodes().forEach((t=>{const n=e.node(t);n.x-=l,n.y-=c})),e.edges().forEach((t=>{e.edge(t).points.forEach((e=>{e.x-=l,e.y-=c}))})),{width:u-l,height:h-c}}(e.coreGraph,u));let h=0;e.coreGraph.nodeCount()>0&&h++;const d=h<=1?0:h;e.coreBox.width+=d+d,e.coreBox.height=o.labelHeight+e.coreBox.height,e.width=e.coreBox.width+o.paddingLeft+o.paddingRight,e.height=e.paddingTop+e.coreBox.height+e.paddingBottom}(e,t)}function ec$1(e,t){const n=t.x-e.x,r=t.y-e.y;return 180*Math.atan(r/n)/Math.PI}function nc$1(e){return e.expanded?e.x:e.x-e.width/2+0+e.coreBox.width/2}function tc$1(e,t){const n=t.expanded?t.x:nc$1(t),r=t.y,i=e.x-n,o=e.y-r;let a,s,l=t.expanded?t.width:t.coreBox.width,c=t.expanded?t.height:t.coreBox.height;return Math.abs(o)*l/2>Math.abs(i)*c/2?(o<0&&(c=-c),a=0===o?0:c/2*i/o,s=c/2):(i<0&&(l=-l),a=l/2,s=0===i?0:l/2*o/i),{x:n+a,y:r+s}}function rc$1(t,n,r){var i,o,a,s;const l=t.nodes.filter(((e,t,n)=>n.findIndex((t=>t.id===e.id))!==t)).map((e=>e.id));if(l.length)throw new Error(`Duplicated ids found: ${l.join(", ")}`);const c=function(e){const t={nodes:[]},n=e.compound,r=Object.keys(n||{}),i=new Map,o=(e,t=[])=>{if(i.has(e))return i.get(e);for(let i=0;i<r.length;i++){let a=r[i];if(n&&-1!==n[a].indexOf(e))return t.unshift(a),o(a,t)}return 0===t.length&&i.set(e,t),t};return e.nodes.forEach((n=>{const r=n.id,i=[...o(r),r];let a=(s=r,e.edges.filter((e=>e.w===s)).map((e=>({name:e.v}))));var s;t.nodes.push({name:r,path:i,inputs:a,width:n.width,height:n.height,attr:Object.assign({},n)})})),t}(t),u=function(e,t){const n=(e,t)=>{for(let n of t.values())if(n.includes(e))return!0;return!1},r=(e,t=[])=>{if(0===Object.keys(e).length)return[...new Set(t)];const i=new Map(Object.keys(e).map((t=>[t,e[t]]))),o={};for(let[r,a]of i)n(r,i)?o[r]=a:t=t.concat(r,a);return r(o,t)};return r(e).filter((e=>t.includes(e)))}(t.compound||{},(null==n?void 0:n.expanded)||[]),h=function(e,t){return n=qu$1(zu$1(e),t),new Ju$1(n);var n}(c,{rankDirection:(null===(o=null===(i=null==r?void 0:r.graph)||void 0===i?void 0:i.meta)||void 0===o?void 0:o.rankDir)||(null==n?void 0:n.rankDirection)||e.graph.meta.rankDir,align:(null===(s=null===(a=null==r?void 0:r.graph)||void 0===a?void 0:a.meta)||void 0===s?void 0:s.align)||e.graph.meta.align});return function(e,t){t.forEach((t=>{const n=e.getRenderInfoNodes().find((e=>e.displayName===t));let r=n&&n.node&&n.node.name||"";const i=e.getRenderNodeByName(r);if(!i)throw new Error(`No nodes found: ${r}`);i.expanded=!0,e.buildSubHierarchy(r)}))}(h,u),Zu$1(h.root,r),ac$1(h.root)}function oc$1(e,t=!1){const n=JSON.parse(JSON.stringify(e)),i={nodes:[n],edges:[...n.edges]};return n.nodes.forEach((function e(t){(0===t.type||1===t.type)&&i.nodes.push(t),0===t.type&&(i.edges=i.edges.concat(t.edges)),Array.isArray(t.nodes)&&t.nodes.forEach(e)})),t&&i.nodes.forEach((e=>{const t=i.nodes.find((t=>t.id===e.parentNodeName));if(t){const n=t.x-t.width/2+t.paddingLeft,i=t.y-t.height/2+t.labelHeight+t.paddingTop;t.id!==r&&(e.x+=n,e.y+=i),0===e.type&&e.edges.forEach((t=>{t.points.forEach((t=>{t.x+=e.x-e.width/2+e.paddingLeft,t.y+=e.y-e.height/2+e.labelHeight+e.paddingTop}))}))}})),i}function ic$1(e,t,n,i){var o,a;let s=[];const l=(null===(o=n.find((t=>t.id===e)))||void 0===o?void 0:o.path)||[],c=(null===(a=n.find((e=>e.id===t)))||void 0===a?void 0:a.path)||[],u=[r,...l].slice(0,l.length).reverse(),h=[r,...c].slice(0,c.length);return u.forEach((r=>{const o=n.find((e=>e.id===r));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==i?void 0:i.v)||e)&&n.w===((null==i?void 0:i.w)||t))))))})),h.filter((e=>!u.includes(e))).forEach((r=>{const o=n.find((e=>e.id===r));s=s.concat(o.edges.filter((n=>n.baseEdgeList.some((n=>n.v===((null==i?void 0:i.v)||e)&&n.w===((null==i?void 0:i.w)||t))))))})),s}function ac$1(e){const t=e.coreGraph.nodes().map((t=>e.coreGraph.node(t)));return Object.assign(Object.assign({},uc$1(e)),{expanded:e.expanded,nodes:e.expanded?(n=t,n.map((e=>e.node.type===i.META?ac$1(e):uc$1(e)))):[],edges:e.expanded?cc$1(e):[]});var n}function uc$1(e){return{id:e.node.name,name:e.node.name,type:e.node.type,cardinality:e.node.cardinality,attr:e.attr,parentNodeName:e.node.parentNode?e.node.parentNode.name:null,coreBox:Object.assign({},e.coreBox),x:e.x,y:e.y,width:e.width,height:e.height,radius:e.radius,labelHeight:e.labelHeight,labelOffset:e.labelOffset,outboxWidth:e.outboxWidth,paddingLeft:e.paddingLeft,paddingTop:e.paddingTop,paddingRight:e.paddingRight,paddingBottom:e.paddingBottom,path:e.node.path}}function cc$1(e){return e.coreGraph.edges().map((t=>({renderInfoEdge:e.coreGraph.edge(t),edge:t}))).filter((({renderInfoEdge:e})=>e.metaEdge)).map((({edge:t,renderInfoEdge:n})=>{const r=function(e,t){const n=t.points.map((e=>Object.assign({},e)));if(t.adjoiningMetaEdge){const r=t.adjoiningMetaEdge.points,i=t.metaEdge.inbound,o=i?r[r.length-1]:r[0],a=n[i?0:n.length-1],s=e.x-e.width/2,l=e.y-e.height/2,c=o.x-s,u=o.y-l,h=-e.paddingLeft,d=-(e.paddingTop+e.labelHeight);a.x=c+h,a.y=u+d}return n}(e,n);return{adjoiningEdge:n.adjoiningMetaEdge?{w:n.adjoiningMetaEdge.metaEdge.w,v:n.adjoiningMetaEdge.metaEdge.v}:null,inbound:n.metaEdge.inbound,w:t.w,v:t.v,points:r,weight:n.weight,baseEdgeList:n.metaEdge.baseEdgeList,parentNodeName:e.node.name}}))}const dagreCompound_es5=Object.freeze(Object.defineProperty({__proto__:null,BRIDGE_GRAPH_NAME:o,get GraphType(){return u},get HierarchyNodeType(){return c},get InclusionType(){return a},LAYOUT_CONFIG:e,get NodeType(){return i},ROOT_NAME:r,buildGraph:rc$1,flatGraph:oc$1,getEdges:ic$1,mergeConfig:n},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(dagreCompound_es5);var __extends$m=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$e=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$e.apply(this,arguments)},__spreadArray$1=commonjsGlobal&&commonjsGlobal.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(dagreCompound,"__esModule",{value:!0}),dagreCompound.DagreCompoundLayout=void 0;var base_1$9=base$1,dagre_compound_1=require$$1,util_1$8=requireUtil(),DagreCompoundLayout=function(e){function t(t){var n=e.call(this)||this;return n.rankdir="TB",n.nodesep=50,n.edgesep=5,n.ranksep=50,n.controlPoints=!0,n.anchorPoint=!0,n.nodes=[],n.edges=[],n.combos=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return __extends$m(t,e),t.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},t.prototype.init=function(e){var t=e.hiddenNodes||[],n=e.hiddenEdges||[],r=e.hiddenCombos||[];this.nodes=this.getDataByOrder((e.nodes||[]).concat(t)),this.edges=this.getDataByOrder((e.edges||[]).concat(n)),this.combos=(e.combos||[]).concat(r.map((function(e){return __assign$e(__assign$e({},e),{collapsed:!0})})))},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges;if(t){var r=e.getLayoutConfig(),i=r.graphDef,o=r.graphOption,a=r.graphSettings,s=(0,dagre_compound_1.buildGraph)(i,o,a),l=(0,dagre_compound_1.flatGraph)(s,!0);return this.updatePosition(l),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n}}},t.prototype.getNodePath=function(e){var t=this.nodes,n=this.combos,r=t.find((function(t){return t.id===e})),i=function(e,t){void 0===t&&(t=[]);var r=n.find((function(t){return t.id===e}));return r?(t.unshift(e),r.parentId?i(r.parentId,t):t):t};return r&&r.comboId?i(r.comboId,[e]):[e]},t.prototype.getLayoutConfig=function(){var e,t,n,r,i=this,o=i.nodes,a=i.edges,s=i.combos,l=i.nodeSize,c=i.rankdir,u=i.align,h=i.edgesep,d=i.nodesep,f=i.ranksep,p=i.settings,g=(s||[]).reduce((function(e,t){var n=o.filter((function(e){return e.comboId===t.id})).map((function(e){return e.id})),r=(s||[]).filter((function(e){return e.parentId===t.id})).map((function(e){return e.id}));return(n.length||r.length)&&(e[t.id]=__spreadArray$1(__spreadArray$1([],n,!0),r,!0)),e}),{});r=l?(0,util_1$8.isArray)(l)?function(){return l}:function(){return[l,l]}:function(e){return e&&e.size?(0,util_1$8.isArray)(e.size)?e.size:(0,util_1$8.isObject)(e.size)?[e.size.width||40,e.size.height||40]:[e.size,e.size]:[40,40]};var m,v=(m=null==s?void 0:s[0])&&m.size?(0,util_1$8.isArray)(m.size)?m.size:[m.size,m.size]:[80,40],y=v[0],b=v[1],x=null===(t=null===(e=i.graphSettings)||void 0===e?void 0:e.subScene)||void 0===t?void 0:t.meta,w=(null===(n=s.find((function(e){return!e.collapsed})))||void 0===n?void 0:n.padding)||[20,20,20,20],_=w[0],C=w[1],$=w[2],S=w[3],E={compound:g,nodes:__spreadArray$1([],(o||[]).map((function(e){var t=r(e),n=t[0],i=t[1];return __assign$e(__assign$e({},e),{width:n,height:i})})),!0),edges:__spreadArray$1([],(a||[]).map((function(e){return __assign$e(__assign$e({},e),{v:e.source,w:e.target})})),!0)},A={expanded:(s||[]).filter((function(e){return!e.collapsed})).map((function(e){return e.id}))},M={graph:{meta:{align:u,rankDir:c,nodeSep:d,edgeSep:h,rankSep:f}},subScene:{meta:{paddingTop:_||(null==x?void 0:x.paddingTop)||20,paddingRight:C||(null==x?void 0:x.paddingRight)||20,paddingBottom:$||(null==x?void 0:x.paddingBottom)||20,paddingLeft:S||(null==x?void 0:x.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:y,height:b}}},k=(0,dagre_compound_1.mergeConfig)(p,__assign$e({},(0,dagre_compound_1.mergeConfig)(M,dagre_compound_1.LAYOUT_CONFIG)));return i.graphSettings=k,{graphDef:E,graphOption:A,graphSettings:k}},t.prototype.updatePosition=function(e){var t=e.nodes,n=e.edges;this.updateNodePosition(t,n),this.updateEdgePosition(t,n)},t.prototype.getBegin=function(e,t){var n=this.begin,r=[0,0];if(n){var i=1/0,o=1/0;e.forEach((function(e){i>e.x&&(i=e.x),o>e.y&&(o=e.y)})),t.forEach((function(e){e.points.forEach((function(e){i>e.x&&(i=e.x),o>e.y&&(o=e.y)}))})),r[0]=n[0]-i,r[1]=n[1]-o}return r},t.prototype.updateNodePosition=function(e,t){var n=this,r=n.combos,i=n.nodes,o=n.edges,a=n.anchorPoint,s=n.graphSettings,l=this.getBegin(e,t);e.forEach((function(e){var n,c=e.x,u=e.y,h=e.id,d=e.type,f=e.coreBox;if(d===dagre_compound_1.HierarchyNodeType.META&&h!==dagre_compound_1.ROOT_NAME){var p=r.findIndex((function(e){return e.id===h})),g=null===(n=null==s?void 0:s.subScene)||void 0===n?void 0:n.meta;r[p].offsetX=c+l[0],r[p].offsetY=u+l[1],r[p].fixSize=[f.width,f.height],r[p].fixCollapseSize=[f.width,f.height],e.expanded?r[p].padding=[null==g?void 0:g.paddingTop,null==g?void 0:g.paddingRight,null==g?void 0:g.paddingBottom,null==g?void 0:g.paddingLeft]:r[p].padding=[0,0,0,0]}else if(d===dagre_compound_1.HierarchyNodeType.OP){p=i.findIndex((function(e){return e.id===h}));if(i[p].x=c+l[0],i[p].y=u+l[1],a){var m=[],v=t.filter((function(e){return e.v===h})),y=t.filter((function(e){return e.w===h}));v.length>0&&v.forEach((function(t){var n=t.points[0],r=(n.x-c)/e.width+.5,i=(n.y-u)/e.height+.5;m.push([r,i]),t.baseEdgeList.forEach((function(e){var t=o.find((function(t){return t.source===e.v&&t.target===e.w}));t&&(t.sourceAnchor=m.length-1)}))})),y.length>0&&y.forEach((function(t){var n=t.points[t.points.length-1],r=(n.x-c)/e.width+.5,i=(n.y-u)/e.height+.5;m.push([r,i]),t.baseEdgeList.forEach((function(e){var t=o.find((function(t){return t.source===e.v&&t.target===e.w}));t&&(t.targetAnchor=m.length-1)}))})),i[p].anchorPoints=m.length>0?m:i[p].anchorPoints||[]}}}))},t.prototype.updateEdgePosition=function(e,t){var n=this,r=n.combos,i=n.edges,o=n.controlPoints,a=this.getBegin(e,t);o&&(r.forEach((function(e){e.inEdges=[],e.outEdges=[]})),i.forEach((function(t){var i,o,s,l,c=e.find((function(e){return e.id===t.source})),u=e.find((function(e){return e.id===t.target})),h=[],d=[];if(c&&u)d=(0,dagre_compound_1.getEdges)(null==c?void 0:c.id,null==u?void 0:u.id,e);else if(!c||!u){var f=n.getNodePath(t.source),p=n.getNodePath(t.target),g=f.reverse().slice(c?0:1).find((function(t){return e.find((function(e){return e.id===t}))})),m=p.reverse().slice(u?0:1).find((function(t){return e.find((function(e){return e.id===t}))}));c=e.find((function(e){return e.id===g})),u=e.find((function(e){return e.id===m})),d=(0,dagre_compound_1.getEdges)(null==c?void 0:c.id,null==u?void 0:u.id,e,{v:t.source,w:t.target})}if(h=(h=d.reduce((function(e,t){return __spreadArray$1(__spreadArray$1([],e,!0),t.points.map((function(e){return __assign$e(__assign$e({},e),{x:e.x+a[0],y:e.y+a[1]})})),!0)}),[])).slice(1,-1),t.controlPoints=h,(null==u?void 0:u.type)===dagre_compound_1.NodeType.META){var v=r.findIndex((function(e){return e.id===(null==u?void 0:u.id)}));if(!r[v]||(null===(i=r[v].inEdges)||void 0===i?void 0:i.some((function(e){return e.source===c.id&&e.target===u.id}))))return;null===(o=r[v].inEdges)||void 0===o||o.push({source:c.id,target:u.id,controlPoints:h})}if((null==c?void 0:c.type)===dagre_compound_1.NodeType.META){v=r.findIndex((function(e){return e.id===(null==c?void 0:c.id)}));if(!r[v]||(null===(s=r[v].outEdges)||void 0===s?void 0:s.some((function(e){return e.source===c.id&&e.target===u.id}))))return;null===(l=r[v].outEdges)||void 0===l||l.push({source:c.id,target:u.id,controlPoints:h})}})))},t.prototype.getType=function(){return"dagreCompound"},t.prototype.getDataByOrder=function(e){return e.every((function(e){return void 0!==e.layoutOrder}))||e.forEach((function(e,t){e.layoutOrder=t})),e.sort((function(e,t){return e.layoutOrder-t.layoutOrder}))},t}(base_1$9.Base);dagreCompound.DagreCompoundLayout=DagreCompoundLayout;var radial$1={},radial={},mds$1={};const toString=Object.prototype.toString;function isAnyArray(e){return toString.call(e).endsWith("Array]")}function max$2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]>a&&(a=e[s]);return a}function min$1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");var n=t.fromIndex,r=void 0===n?0:n,i=t.toIndex,o=void 0===i?e.length:i;if(r<0||r>=e.length||!Number.isInteger(r))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=r||o>e.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=e[r],s=r+1;s<o;s++)e[s]<a&&(a=e[s]);return a}function rescale(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!isAnyArray(e))throw new TypeError("input must be an array");if(0===e.length)throw new TypeError("input must not be empty");if(void 0!==n.output){if(!isAnyArray(n.output))throw new TypeError("output option must be an array if specified");t=n.output}else t=new Array(e.length);var r=min$1(e),i=max$2(e);if(r===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=n.min,a=void 0===o?n.autoMinMax?r:0:o,s=n.max,l=void 0===s?n.autoMinMax?i:1:s;if(a>=l)throw new RangeError("min option must be smaller than max option");for(var c=(l-a)/(i-r),u=0;u<e.length;u++)t[u]=(e[u]-r)*c+a;return t}const indent=" ".repeat(2),indentData=" ".repeat(4);function inspectMatrix(){return inspectMatrixWithOptions(this)}function inspectMatrixWithOptions(e,t={}){const{maxRows:n=15,maxColumns:r=10,maxNumSize:i=8,padMinus:o="auto"}=t;return`${e.constructor.name} {\n${indent}[\n${indentData}${inspectData(e,n,r,i,o)}\n${indent}]\n${indent}rows: ${e.rows}\n${indent}columns: ${e.columns}\n}`}function inspectData(e,t,n,r,i){const{rows:o,columns:a}=e,s=Math.min(o,t),l=Math.min(a,n),c=[];if("auto"===i){i=!1;e:for(let t=0;t<s;t++)for(let n=0;n<l;n++)if(e.get(t,n)<0){i=!0;break e}}for(let u=0;u<s;u++){let t=[];for(let n=0;n<l;n++)t.push(formatNumber(e.get(u,n),r,i));c.push(`${t.join(" ")}`)}return l!==a&&(c[c.length-1]+=` ... ${a-n} more columns`),s!==o&&c.push(`... ${o-t} more rows`),c.join(`\n${indentData}`)}function formatNumber(e,t,n){return(e>=0&&n?` ${formatNumber2(e,t-1)}`:formatNumber2(e,t)).padEnd(t)}function formatNumber2(e,t){let n=e.toString();if(n.length<=t)return n;let r=e.toFixed(t);if(r.length>t&&(r=e.toFixed(Math.max(0,t-(r.length-t)))),r.length<=t&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let i=e.toExponential(t);return i.length>t&&(i=e.toExponential(Math.max(0,t-(i.length-t)))),i.slice(0)}function installMathOperations(e,t){e.prototype.add=function(e){return"number"==typeof e?this.addS(e):this.addM(e)},e.prototype.addS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e);return this},e.prototype.addM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e.get(t,n));return this},e.add=function(e,n){return new t(e).add(n)},e.prototype.sub=function(e){return"number"==typeof e?this.subS(e):this.subM(e)},e.prototype.subS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e);return this},e.prototype.subM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e.get(t,n));return this},e.sub=function(e,n){return new t(e).sub(n)},e.prototype.subtract=e.prototype.sub,e.prototype.subtractS=e.prototype.subS,e.prototype.subtractM=e.prototype.subM,e.subtract=e.sub,e.prototype.mul=function(e){return"number"==typeof e?this.mulS(e):this.mulM(e)},e.prototype.mulS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e);return this},e.prototype.mulM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e.get(t,n));return this},e.mul=function(e,n){return new t(e).mul(n)},e.prototype.multiply=e.prototype.mul,e.prototype.multiplyS=e.prototype.mulS,e.prototype.multiplyM=e.prototype.mulM,e.multiply=e.mul,e.prototype.div=function(e){return"number"==typeof e?this.divS(e):this.divM(e)},e.prototype.divS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e);return this},e.prototype.divM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e.get(t,n));return this},e.div=function(e,n){return new t(e).div(n)},e.prototype.divide=e.prototype.div,e.prototype.divideS=e.prototype.divS,e.prototype.divideM=e.prototype.divM,e.divide=e.div,e.prototype.mod=function(e){return"number"==typeof e?this.modS(e):this.modM(e)},e.prototype.modS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e);return this},e.prototype.modM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)%e.get(t,n));return this},e.mod=function(e,n){return new t(e).mod(n)},e.prototype.modulus=e.prototype.mod,e.prototype.modulusS=e.prototype.modS,e.prototype.modulusM=e.prototype.modM,e.modulus=e.mod,e.prototype.and=function(e){return"number"==typeof e?this.andS(e):this.andM(e)},e.prototype.andS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e);return this},e.prototype.andM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)&e.get(t,n));return this},e.and=function(e,n){return new t(e).and(n)},e.prototype.or=function(e){return"number"==typeof e?this.orS(e):this.orM(e)},e.prototype.orS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e);return this},e.prototype.orM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)|e.get(t,n));return this},e.or=function(e,n){return new t(e).or(n)},e.prototype.xor=function(e){return"number"==typeof e?this.xorS(e):this.xorM(e)},e.prototype.xorS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e);return this},e.prototype.xorM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)^e.get(t,n));return this},e.xor=function(e,n){return new t(e).xor(n)},e.prototype.leftShift=function(e){return"number"==typeof e?this.leftShiftS(e):this.leftShiftM(e)},e.prototype.leftShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e);return this},e.prototype.leftShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)<<e.get(t,n));return this},e.leftShift=function(e,n){return new t(e).leftShift(n)},e.prototype.signPropagatingRightShift=function(e){return"number"==typeof e?this.signPropagatingRightShiftS(e):this.signPropagatingRightShiftM(e)},e.prototype.signPropagatingRightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e);return this},e.prototype.signPropagatingRightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>e.get(t,n));return this},e.signPropagatingRightShift=function(e,n){return new t(e).signPropagatingRightShift(n)},e.prototype.rightShift=function(e){return"number"==typeof e?this.rightShiftS(e):this.rightShiftM(e)},e.prototype.rightShiftS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e);return this},e.prototype.rightShiftM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)>>>e.get(t,n));return this},e.rightShift=function(e,n){return new t(e).rightShift(n)},e.prototype.zeroFillRightShift=e.prototype.rightShift,e.prototype.zeroFillRightShiftS=e.prototype.rightShiftS,e.prototype.zeroFillRightShiftM=e.prototype.rightShiftM,e.zeroFillRightShift=e.rightShift,e.prototype.not=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,~this.get(e,t));return this},e.not=function(e){return new t(e).not()},e.prototype.abs=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.abs(this.get(e,t)));return this},e.abs=function(e){return new t(e).abs()},e.prototype.acos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acos(this.get(e,t)));return this},e.acos=function(e){return new t(e).acos()},e.prototype.acosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.acosh(this.get(e,t)));return this},e.acosh=function(e){return new t(e).acosh()},e.prototype.asin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asin(this.get(e,t)));return this},e.asin=function(e){return new t(e).asin()},e.prototype.asinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.asinh(this.get(e,t)));return this},e.asinh=function(e){return new t(e).asinh()},e.prototype.atan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atan(this.get(e,t)));return this},e.atan=function(e){return new t(e).atan()},e.prototype.atanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.atanh(this.get(e,t)));return this},e.atanh=function(e){return new t(e).atanh()},e.prototype.cbrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cbrt(this.get(e,t)));return this},e.cbrt=function(e){return new t(e).cbrt()},e.prototype.ceil=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.ceil(this.get(e,t)));return this},e.ceil=function(e){return new t(e).ceil()},e.prototype.clz32=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.clz32(this.get(e,t)));return this},e.clz32=function(e){return new t(e).clz32()},e.prototype.cos=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cos(this.get(e,t)));return this},e.cos=function(e){return new t(e).cos()},e.prototype.cosh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.cosh(this.get(e,t)));return this},e.cosh=function(e){return new t(e).cosh()},e.prototype.exp=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.exp(this.get(e,t)));return this},e.exp=function(e){return new t(e).exp()},e.prototype.expm1=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.expm1(this.get(e,t)));return this},e.expm1=function(e){return new t(e).expm1()},e.prototype.floor=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.floor(this.get(e,t)));return this},e.floor=function(e){return new t(e).floor()},e.prototype.fround=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.fround(this.get(e,t)));return this},e.fround=function(e){return new t(e).fround()},e.prototype.log=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log(this.get(e,t)));return this},e.log=function(e){return new t(e).log()},e.prototype.log1p=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log1p(this.get(e,t)));return this},e.log1p=function(e){return new t(e).log1p()},e.prototype.log10=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log10(this.get(e,t)));return this},e.log10=function(e){return new t(e).log10()},e.prototype.log2=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.log2(this.get(e,t)));return this},e.log2=function(e){return new t(e).log2()},e.prototype.round=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.round(this.get(e,t)));return this},e.round=function(e){return new t(e).round()},e.prototype.sign=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sign(this.get(e,t)));return this},e.sign=function(e){return new t(e).sign()},e.prototype.sin=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sin(this.get(e,t)));return this},e.sin=function(e){return new t(e).sin()},e.prototype.sinh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sinh(this.get(e,t)));return this},e.sinh=function(e){return new t(e).sinh()},e.prototype.sqrt=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.sqrt(this.get(e,t)));return this},e.sqrt=function(e){return new t(e).sqrt()},e.prototype.tan=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tan(this.get(e,t)));return this},e.tan=function(e){return new t(e).tan()},e.prototype.tanh=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.tanh(this.get(e,t)));return this},e.tanh=function(e){return new t(e).tanh()},e.prototype.trunc=function(){for(let e=0;e<this.rows;e++)for(let t=0;t<this.columns;t++)this.set(e,t,Math.trunc(this.get(e,t)));return this},e.trunc=function(e){return new t(e).trunc()},e.pow=function(e,n){return new t(e).pow(n)},e.prototype.pow=function(e){return"number"==typeof e?this.powS(e):this.powM(e)},e.prototype.powS=function(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e));return this},e.prototype.powM=function(e){if(e=t.checkMatrix(e),this.rows!==e.rows||this.columns!==e.columns)throw new RangeError("Matrices dimensions must be equal");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,Math.pow(this.get(t,n),e.get(t,n)));return this}}function checkRowIndex(e,t,n){let r=n?e.rows:e.rows-1;if(t<0||t>r)throw new RangeError("Row index out of range")}function checkColumnIndex(e,t,n){let r=n?e.columns:e.columns-1;if(t<0||t>r)throw new RangeError("Column index out of range")}function checkRowVector(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.columns)throw new RangeError("vector size must be the same as the number of columns");return t}function checkColumnVector(e,t){if(t.to1DArray&&(t=t.to1DArray()),t.length!==e.rows)throw new RangeError("vector size must be the same as the number of rows");return t}function checkRowIndices(e,t){if(!isAnyArray(t))throw new TypeError("row indices must be an array");for(let n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.rows)throw new RangeError("row indices are out of range")}function checkColumnIndices(e,t){if(!isAnyArray(t))throw new TypeError("column indices must be an array");for(let n=0;n<t.length;n++)if(t[n]<0||t[n]>=e.columns)throw new RangeError("column indices are out of range")}function checkRange(e,t,n,r,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(checkNumber("startRow",t),checkNumber("endRow",n),checkNumber("startColumn",r),checkNumber("endColumn",i),t>n||r>i||t<0||t>=e.rows||n<0||n>=e.rows||r<0||r>=e.columns||i<0||i>=e.columns)throw new RangeError("Submatrix indices are out of range")}function newArray(e,t=0){let n=[];for(let r=0;r<e;r++)n.push(t);return n}function checkNumber(e,t){if("number"!=typeof t)throw new TypeError(`${e} must be a number`)}function checkNonEmpty(e){if(e.isEmpty())throw new Error("Empty matrix has no elements to index")}function sumByRow(e){let t=newArray(e.rows);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]+=e.get(n,r);return t}function sumByColumn(e){let t=newArray(e.columns);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]+=e.get(n,r);return t}function sumAll(e){let t=0;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t+=e.get(n,r);return t}function productByRow(e){let t=newArray(e.rows,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[n]*=e.get(n,r);return t}function productByColumn(e){let t=newArray(e.columns,1);for(let n=0;n<e.rows;++n)for(let r=0;r<e.columns;++r)t[r]*=e.get(n,r);return t}function productAll(e){let t=1;for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)t*=e.get(n,r);return t}function varianceByRow(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<r;a++){let r=0,s=0,l=0;for(let t=0;t<i;t++)l=e.get(a,t)-n[a],r+=l,s+=l*l;t?o.push((s-r*r/i)/(i-1)):o.push((s-r*r/i)/i)}return o}function varianceByColumn(e,t,n){const r=e.rows,i=e.columns,o=[];for(let a=0;a<i;a++){let i=0,s=0,l=0;for(let t=0;t<r;t++)l=e.get(t,a)-n[a],i+=l,s+=l*l;t?o.push((s-i*i/r)/(r-1)):o.push((s-i*i/r)/r)}return o}function varianceAll(e,t,n){const r=e.rows,i=e.columns,o=r*i;let a=0,s=0,l=0;for(let c=0;c<r;c++)for(let t=0;t<i;t++)l=e.get(c,t)-n,a+=l,s+=l*l;return t?(s-a*a/o)/(o-1):(s-a*a/o)/o}function centerByRow(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[n])}function centerByColumn(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t[r])}function centerAll(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)-t)}function getScaleByRow(e){const t=[];for(let n=0;n<e.rows;n++){let r=0;for(let t=0;t<e.columns;t++)r+=Math.pow(e.get(n,t),2)/(e.columns-1);t.push(Math.sqrt(r))}return t}function scaleByRow(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[n])}function getScaleByColumn(e){const t=[];for(let n=0;n<e.columns;n++){let r=0;for(let t=0;t<e.rows;t++)r+=Math.pow(e.get(t,n),2)/(e.rows-1);t.push(Math.sqrt(r))}return t}function scaleByColumn(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t[r])}function getScaleAll(e){const t=e.size-1;let n=0;for(let r=0;r<e.columns;r++)for(let i=0;i<e.rows;i++)n+=Math.pow(e.get(i,r),2)/t;return Math.sqrt(n)}function scaleAll(e,t){for(let n=0;n<e.rows;n++)for(let r=0;r<e.columns;r++)e.set(n,r,e.get(n,r)/t)}class AbstractMatrix{static from1DArray(e,t,n){if(e*t!==n.length)throw new RangeError("data length does not match given dimensions");let r=new Matrix(e,t);for(let i=0;i<e;i++)for(let e=0;e<t;e++)r.set(i,e,n[i*t+e]);return r}static rowVector(e){let t=new Matrix(1,e.length);for(let n=0;n<e.length;n++)t.set(0,n,e[n]);return t}static columnVector(e){let t=new Matrix(e.length,1);for(let n=0;n<e.length;n++)t.set(n,0,e[n]);return t}static zeros(e,t){return new Matrix(e,t)}static ones(e,t){return new Matrix(e,t).fill(1)}static rand(e,t,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{random:r=Math.random}=n;let i=new Matrix(e,t);for(let o=0;o<e;o++)for(let e=0;e<t;e++)i.set(o,e,r());return i}static randInt(e,t,n={}){if("object"!=typeof n)throw new TypeError("options must be an object");const{min:r=0,max:i=1e3,random:o=Math.random}=n;if(!Number.isInteger(r))throw new TypeError("min must be an integer");if(!Number.isInteger(i))throw new TypeError("max must be an integer");if(r>=i)throw new RangeError("min must be smaller than max");let a=i-r,s=new Matrix(e,t);for(let l=0;l<e;l++)for(let e=0;e<t;e++){let t=r+Math.round(o()*a);s.set(l,e,t)}return s}static eye(e,t,n){void 0===t&&(t=e),void 0===n&&(n=1);let r=Math.min(e,t),i=this.zeros(e,t);for(let o=0;o<r;o++)i.set(o,o,n);return i}static diag(e,t,n){let r=e.length;void 0===t&&(t=r),void 0===n&&(n=t);let i=Math.min(r,t,n),o=this.zeros(t,n);for(let a=0;a<i;a++)o.set(a,a,e[a]);return o}static min(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new Matrix(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.min(e.get(o,n),t.get(o,n)));return i}static max(e,t){e=this.checkMatrix(e),t=this.checkMatrix(t);let n=e.rows,r=e.columns,i=new this(n,r);for(let o=0;o<n;o++)for(let n=0;n<r;n++)i.set(o,n,Math.max(e.get(o,n),t.get(o,n)));return i}static checkMatrix(e){return AbstractMatrix.isMatrix(e)?e:new Matrix(e)}static isMatrix(e){return null!=e&&"Matrix"===e.klass}get size(){return this.rows*this.columns}apply(e){if("function"!=typeof e)throw new TypeError("callback must be a function");for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.call(this,t,n);return this}to1DArray(){let e=[];for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.push(this.get(t,n));return e}to2DArray(){let e=[];for(let t=0;t<this.rows;t++){e.push([]);for(let n=0;n<this.columns;n++)e[t].push(this.get(t,n))}return e}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let t=0;t<=e;t++)if(this.get(e,t)!==this.get(t,e))return!1;return!0}return!1}isEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);e++}return r}isReducedEchelonForm(){let e=0,t=0,n=-1,r=!0,i=!1;for(;e<this.rows&&r;){for(t=0,i=!1;t<this.columns&&!1===i;)0===this.get(e,t)?t++:1===this.get(e,t)&&t>n?(i=!0,n=t):(r=!1,i=!0);for(let n=t+1;n<this.rows;n++)0!==this.get(e,n)&&(r=!1);e++}return r}echelonForm(){let e=this.clone(),t=0,n=0;for(;t<e.rows&&n<e.columns;){let r=t;for(let i=t;i<e.rows;i++)e.get(i,n)>e.get(r,n)&&(r=i);if(0===e.get(r,n))n++;else{e.swapRows(t,r);let i=e.get(t,n);for(let r=n;r<e.columns;r++)e.set(t,r,e.get(t,r)/i);for(let r=t+1;r<e.rows;r++){let i=e.get(r,n)/e.get(t,n);e.set(r,n,0);for(let o=n+1;o<e.columns;o++)e.set(r,o,e.get(r,o)-e.get(t,o)*i)}t++,n++}}return e}reducedEchelonForm(){let e=this.echelonForm(),t=e.columns,n=e.rows,r=n-1;for(;r>=0;)if(0===e.maxRow(r))r--;else{let i=0,o=!1;for(;i<n&&!1===o;)1===e.get(r,i)?o=!0:i++;for(let n=0;n<r;n++){let o=e.get(n,i);for(let a=i;a<t;a++){let t=e.get(n,a)-o*e.get(r,a);e.set(n,a,t)}}r--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{rows:t=1,columns:n=1}=e;if(!Number.isInteger(t)||t<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(n)||n<=0)throw new TypeError("columns must be a positive integer");let r=new Matrix(this.rows*t,this.columns*n);for(let i=0;i<t;i++)for(let e=0;e<n;e++)r.setSubMatrix(this,this.rows*i,this.columns*e);return r}fill(e){for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,e);return this}neg(){return this.mulS(-1)}getRow(e){checkRowIndex(this,e);let t=[];for(let n=0;n<this.columns;n++)t.push(this.get(e,n));return t}getRowVector(e){return Matrix.rowVector(this.getRow(e))}setRow(e,t){checkRowIndex(this,e),t=checkRowVector(this,t);for(let n=0;n<this.columns;n++)this.set(e,n,t[n]);return this}swapRows(e,t){checkRowIndex(this,e),checkRowIndex(this,t);for(let n=0;n<this.columns;n++){let r=this.get(e,n);this.set(e,n,this.get(t,n)),this.set(t,n,r)}return this}getColumn(e){checkColumnIndex(this,e);let t=[];for(let n=0;n<this.rows;n++)t.push(this.get(n,e));return t}getColumnVector(e){return Matrix.columnVector(this.getColumn(e))}setColumn(e,t){checkColumnIndex(this,e),t=checkColumnVector(this,t);for(let n=0;n<this.rows;n++)this.set(n,e,t[n]);return this}swapColumns(e,t){checkColumnIndex(this,e),checkColumnIndex(this,t);for(let n=0;n<this.rows;n++){let r=this.get(n,e);this.set(n,e,this.get(n,t)),this.set(n,t,r)}return this}addRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[n]);return this}subRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[n]);return this}mulRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[n]);return this}divRowVector(e){e=checkRowVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[n]);return this}addColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)+e[t]);return this}subColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)-e[t]);return this}mulColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)*e[t]);return this}divColumnVector(e){e=checkColumnVector(this,e);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.set(t,n,this.get(t,n)/e[t]);return this}mulRow(e,t){checkRowIndex(this,e);for(let n=0;n<this.columns;n++)this.set(e,n,this.get(e,n)*t);return this}mulColumn(e,t){checkColumnIndex(this,e);for(let n=0;n<this.rows;n++)this.set(n,e,this.get(n,e)*t);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{const e=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[t]&&(e[t]=this.get(t,n));return e}case"column":{const e=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n));return e}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){checkNonEmpty(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)>e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{const e=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[t]&&(e[t]=this.get(t,n));return e}case"column":{const e=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e[n]&&(e[n]=this.get(t,n));return e}case void 0:{let e=this.get(0,0);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n));return e}default:throw new Error(`invalid option: ${e}`)}}minIndex(){checkNonEmpty(this);let e=this.get(0,0),t=[0,0];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.get(n,r)<e&&(e=this.get(n,r),t[0]=n,t[1]=r);return t}maxRow(e){if(checkRowIndex(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)>t&&(t=this.get(e,n));return t}maxRowIndex(e){checkRowIndex(this,e),checkNonEmpty(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r),n[1]=r);return n}minRow(e){if(checkRowIndex(this,e),this.isEmpty())return NaN;let t=this.get(e,0);for(let n=1;n<this.columns;n++)this.get(e,n)<t&&(t=this.get(e,n));return t}minRowIndex(e){checkRowIndex(this,e),checkNonEmpty(this);let t=this.get(e,0),n=[e,0];for(let r=1;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r),n[1]=r);return n}maxColumn(e){if(checkColumnIndex(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)>t&&(t=this.get(n,e));return t}maxColumnIndex(e){checkColumnIndex(this,e),checkNonEmpty(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)>t&&(t=this.get(r,e),n[0]=r);return n}minColumn(e){if(checkColumnIndex(this,e),this.isEmpty())return NaN;let t=this.get(0,e);for(let n=1;n<this.rows;n++)this.get(n,e)<t&&(t=this.get(n,e));return t}minColumnIndex(e){checkColumnIndex(this,e),checkNonEmpty(this);let t=this.get(0,e),n=[0,e];for(let r=1;r<this.rows;r++)this.get(r,e)<t&&(t=this.get(r,e),n[0]=r);return n}diag(){let e=Math.min(this.rows,this.columns),t=[];for(let n=0;n<e;n++)t.push(this.get(n,n));return t}norm(e="frobenius"){let t=0;if("max"===e)return this.max();if("frobenius"===e){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)t+=this.get(e,n)*this.get(e,n);return Math.sqrt(t)}throw new RangeError(`unknown norm type: ${e}`)}cumulativeSum(){let e=0;for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e+=this.get(t,n),this.set(t,n,e);return this}dot(e){AbstractMatrix.isMatrix(e)&&(e=e.to1DArray());let t=this.to1DArray();if(t.length!==e.length)throw new RangeError("vectors do not have the same size");let n=0;for(let r=0;r<t.length;r++)n+=t[r]*e[r];return n}mmul(e){e=Matrix.checkMatrix(e);let t=this.rows,n=this.columns,r=e.columns,i=new Matrix(t,r),o=new Float64Array(n);for(let a=0;a<r;a++){for(let t=0;t<n;t++)o[t]=e.get(t,a);for(let e=0;e<t;e++){let t=0;for(let r=0;r<n;r++)t+=this.get(e,r)*o[r];i.set(e,a,t)}}return i}strassen2x2(e){e=Matrix.checkMatrix(e);let t=new Matrix(2,2);const n=this.get(0,0),r=e.get(0,0),i=this.get(0,1),o=e.get(0,1),a=this.get(1,0),s=e.get(1,0),l=this.get(1,1),c=e.get(1,1),u=(n+l)*(r+c),h=(a+l)*r,d=n*(o-c),f=l*(s-r),p=(n+i)*c,g=u+f-p+(i-l)*(s+c),m=d+p,v=h+f,y=u-h+d+(a-n)*(r+o);return t.set(0,0,g),t.set(0,1,m),t.set(1,0,v),t.set(1,1,y),t}strassen3x3(e){e=Matrix.checkMatrix(e);let t=new Matrix(3,3);const n=this.get(0,0),r=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),l=this.get(2,0),c=this.get(2,1),u=this.get(2,2),h=e.get(0,0),d=e.get(0,1),f=e.get(0,2),p=e.get(1,0),g=e.get(1,1),m=e.get(1,2),v=e.get(2,0),y=e.get(2,1),b=e.get(2,2),x=(n-o)*(-d+g),w=(-n+o+a)*(h-d+g),_=(o+a)*(-h+d),C=n*h,$=(-n+l+c)*(h-f+m),S=(-n+l)*(f-m),E=(l+c)*(-h+f),A=(-i+c+u)*(g+v-y),M=(i-u)*(g-y),k=i*v,T=(c+u)*(-v+y),P=(-i+a+s)*(m+v-b),O=(i-s)*(m-b),N=(a+s)*(-v+b),I=C+k+r*p,D=(n+r+i-o-a-c-u)*g+w+_+C+A+k+T,L=C+$+E+(n+r+i-a-s-l-c)*m+k+P+N,R=x+a*(-h+d+p-g-m-v+b)+w+C+k+P+O,B=x+w+_+C+s*y,j=k+P+O+N+o*f,F=C+$+S+c*(-h+f+p-g-m-v+y)+A+M+k,G=A+M+k+T+l*d,V=C+$+S+E+u*b;return t.set(0,0,I),t.set(0,1,D),t.set(0,2,L),t.set(1,0,R),t.set(1,1,B),t.set(1,2,j),t.set(2,0,F),t.set(2,1,G),t.set(2,2,V),t}mmulStrassen(e){e=Matrix.checkMatrix(e);let t=this.clone(),n=t.rows,r=t.columns,i=e.rows,o=e.columns;function a(e,t,n){let r=e.rows,i=e.columns;if(r===t&&i===n)return e;{let r=AbstractMatrix.zeros(t,n);return r=r.setSubMatrix(e,0,0),r}}let s=Math.max(n,i),l=Math.max(r,o);return t=a(t,s,l),function e(t,n,r,i){if(r<=512||i<=512)return t.mmul(n);r%2==1&&i%2==1?(t=a(t,r+1,i+1),n=a(n,r+1,i+1)):r%2==1?(t=a(t,r+1,i),n=a(n,r+1,i)):i%2==1&&(t=a(t,r,i+1),n=a(n,r,i+1));let o=parseInt(t.rows/2,10),s=parseInt(t.columns/2,10),l=t.subMatrix(0,o-1,0,s-1),c=n.subMatrix(0,o-1,0,s-1),u=t.subMatrix(0,o-1,s,t.columns-1),h=n.subMatrix(0,o-1,s,n.columns-1),d=t.subMatrix(o,t.rows-1,0,s-1),f=n.subMatrix(o,n.rows-1,0,s-1),p=t.subMatrix(o,t.rows-1,s,t.columns-1),g=n.subMatrix(o,n.rows-1,s,n.columns-1),m=e(AbstractMatrix.add(l,p),AbstractMatrix.add(c,g),o,s),v=e(AbstractMatrix.add(d,p),c,o,s),y=e(l,AbstractMatrix.sub(h,g),o,s),b=e(p,AbstractMatrix.sub(f,c),o,s),x=e(AbstractMatrix.add(l,u),g,o,s),w=e(AbstractMatrix.sub(d,l),AbstractMatrix.add(c,h),o,s),_=e(AbstractMatrix.sub(u,p),AbstractMatrix.add(f,g),o,s),C=AbstractMatrix.add(m,b);C.sub(x),C.add(_);let $=AbstractMatrix.add(y,x),S=AbstractMatrix.add(v,b),E=AbstractMatrix.sub(m,v);E.add(y),E.add(w);let A=AbstractMatrix.zeros(2*C.rows,2*C.columns);return A=A.setSubMatrix(C,0,0),A=A.setSubMatrix($,C.rows,0),A=A.setSubMatrix(S,0,C.columns),A=A.setSubMatrix(E,C.rows,C.columns),A.subMatrix(0,r-1,0,i-1)}(t,e=a(e,s,l),s,l)}scaleRows(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new Matrix(this.rows,this.columns);for(let i=0;i<this.rows;i++){const e=this.getRow(i);e.length>0&&rescale(e,{min:t,max:n,output:e}),r.setRow(i,e)}return r}scaleColumns(e={}){if("object"!=typeof e)throw new TypeError("options must be an object");const{min:t=0,max:n=1}=e;if(!Number.isFinite(t))throw new TypeError("min must be a number");if(!Number.isFinite(n))throw new TypeError("max must be a number");if(t>=n)throw new RangeError("min must be smaller than max");let r=new Matrix(this.rows,this.columns);for(let i=0;i<this.columns;i++){const e=this.getColumn(i);e.length&&rescale(e,{min:t,max:n,output:e}),r.setColumn(i,e)}return r}flipRows(){const e=Math.ceil(this.columns/2);for(let t=0;t<this.rows;t++)for(let n=0;n<e;n++){let e=this.get(t,n),r=this.get(t,this.columns-1-n);this.set(t,n,r),this.set(t,this.columns-1-n,e)}return this}flipColumns(){const e=Math.ceil(this.rows/2);for(let t=0;t<this.columns;t++)for(let n=0;n<e;n++){let e=this.get(n,t),r=this.get(this.rows-1-n,t);this.set(n,t,r),this.set(this.rows-1-n,t,e)}return this}kroneckerProduct(e){e=Matrix.checkMatrix(e);let t=this.rows,n=this.columns,r=e.rows,i=e.columns,o=new Matrix(t*r,n*i);for(let a=0;a<t;a++)for(let t=0;t<n;t++)for(let n=0;n<r;n++)for(let s=0;s<i;s++)o.set(r*a+n,i*t+s,this.get(a,t)*e.get(n,s));return o}kroneckerSum(e){if(e=Matrix.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let t=this.rows,n=e.rows,r=this.kroneckerProduct(Matrix.eye(n,n)),i=Matrix.eye(t,t).kroneckerProduct(e);return r.add(i)}transpose(){let e=new Matrix(this.columns,this.rows);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(n,t,this.get(t,n));return e}sortRows(e=compareNumbers){for(let t=0;t<this.rows;t++)this.setRow(t,this.getRow(t).sort(e));return this}sortColumns(e=compareNumbers){for(let t=0;t<this.columns;t++)this.setColumn(t,this.getColumn(t).sort(e));return this}subMatrix(e,t,n,r){checkRange(this,e,t,n,r);let i=new Matrix(t-e+1,r-n+1);for(let o=e;o<=t;o++)for(let t=n;t<=r;t++)i.set(o-e,t-n,this.get(o,t));return i}subMatrixRow(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.columns-1),t>n||t<0||t>=this.columns||n<0||n>=this.columns)throw new RangeError("Argument out of range");let r=new Matrix(e.length,n-t+1);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.rows)throw new RangeError(`Row index out of range: ${e[i]}`);r.set(i,o-t,this.get(e[i],o))}return r}subMatrixColumn(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=this.rows-1),t>n||t<0||t>=this.rows||n<0||n>=this.rows)throw new RangeError("Argument out of range");let r=new Matrix(n-t+1,e.length);for(let i=0;i<e.length;i++)for(let o=t;o<=n;o++){if(e[i]<0||e[i]>=this.columns)throw new RangeError(`Column index out of range: ${e[i]}`);r.set(o-t,i,this.get(o,e[i]))}return r}setSubMatrix(e,t,n){if((e=Matrix.checkMatrix(e)).isEmpty())return this;checkRange(this,t,t+e.rows-1,n,n+e.columns-1);for(let r=0;r<e.rows;r++)for(let i=0;i<e.columns;i++)this.set(t+r,n+i,e.get(r,i));return this}selection(e,t){checkRowIndices(this,e),checkColumnIndices(this,t);let n=new Matrix(e.length,t.length);for(let r=0;r<e.length;r++){let i=e[r];for(let e=0;e<t.length;e++){let o=t[e];n.set(r,e,this.get(i,o))}}return n}trace(){let e=Math.min(this.rows,this.columns),t=0;for(let n=0;n<e;n++)t+=this.get(n,n);return t}clone(){let e=new Matrix(this.rows,this.columns);for(let t=0;t<this.rows;t++)for(let n=0;n<this.columns;n++)e.set(t,n,this.get(t,n));return e}sum(e){switch(e){case"row":return sumByRow(this);case"column":return sumByColumn(this);case void 0:return sumAll(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return productByRow(this);case"column":return productByColumn(this);case void 0:return productAll(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){const t=this.sum(e);switch(e){case"row":for(let e=0;e<this.rows;e++)t[e]/=this.columns;return t;case"column":for(let e=0;e<this.columns;e++)t[e]/=this.rows;return t;case void 0:return t/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");const{unbiased:n=!0,mean:r=this.mean(e)}=t;if("boolean"!=typeof n)throw new TypeError("unbiased must be a boolean");switch(e){case"row":if(!isAnyArray(r))throw new TypeError("mean must be an array");return varianceByRow(this,n,r);case"column":if(!isAnyArray(r))throw new TypeError("mean must be an array");return varianceByColumn(this,n,r);case void 0:if("number"!=typeof r)throw new TypeError("mean must be a number");return varianceAll(this,n,r);default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,t){"object"==typeof e&&(t=e,e=void 0);const n=this.variance(e,t);if(void 0===e)return Math.sqrt(n);for(let r=0;r<n.length;r++)n[r]=Math.sqrt(n[r]);return n}center(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");const{center:n=this.mean(e)}=t;switch(e){case"row":if(!isAnyArray(n))throw new TypeError("center must be an array");return centerByRow(this,n),this;case"column":if(!isAnyArray(n))throw new TypeError("center must be an array");return centerByColumn(this,n),this;case void 0:if("number"!=typeof n)throw new TypeError("center must be a number");return centerAll(this,n),this;default:throw new Error(`invalid option: ${e}`)}}scale(e,t={}){if("object"==typeof e&&(t=e,e=void 0),"object"!=typeof t)throw new TypeError("options must be an object");let n=t.scale;switch(e){case"row":if(void 0===n)n=getScaleByRow(this);else if(!isAnyArray(n))throw new TypeError("scale must be an array");return scaleByRow(this,n),this;case"column":if(void 0===n)n=getScaleByColumn(this);else if(!isAnyArray(n))throw new TypeError("scale must be an array");return scaleByColumn(this,n),this;case void 0:if(void 0===n)n=getScaleAll(this);else if("number"!=typeof n)throw new TypeError("scale must be a number");return scaleAll(this,n),this;default:throw new Error(`invalid option: ${e}`)}}toString(e){return inspectMatrixWithOptions(this,e)}}function compareNumbers(e,t){return e-t}function isArrayOfNumbers(e){return e.every((e=>"number"==typeof e))}AbstractMatrix.prototype.klass="Matrix","undefined"!=typeof Symbol&&(AbstractMatrix.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspectMatrix),AbstractMatrix.random=AbstractMatrix.rand,AbstractMatrix.randomInt=AbstractMatrix.randInt,AbstractMatrix.diagonal=AbstractMatrix.diag,AbstractMatrix.prototype.diagonal=AbstractMatrix.prototype.diag,AbstractMatrix.identity=AbstractMatrix.eye,AbstractMatrix.prototype.negate=AbstractMatrix.prototype.neg,AbstractMatrix.prototype.tensorProduct=AbstractMatrix.prototype.kroneckerProduct;class Matrix extends AbstractMatrix{constructor(e,t){if(super(),Matrix.isMatrix(e))return e.clone();if(Number.isInteger(e)&&e>=0){if(this.data=[],!(Number.isInteger(t)&&t>=0))throw new TypeError("nColumns must be a positive integer");for(let n=0;n<e;n++)this.data.push(new Float64Array(t))}else{if(!isAnyArray(e))throw new TypeError("First argument must be a positive number or an array");{const n=e;if("number"!=typeof(t=(e=n.length)?n[0].length:0))throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let r=0;r<e;r++){if(n[r].length!==t)throw new RangeError("Inconsistent array dimensions");if(!isArrayOfNumbers(n[r]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(n[r]))}}}this.rows=e,this.columns=t}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}removeRow(e){return checkRowIndex(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,t){return void 0===t&&(t=e,e=this.rows),checkRowIndex(this,e,!0),t=Float64Array.from(checkRowVector(this,t)),this.data.splice(e,0,t),this.rows+=1,this}removeColumn(e){checkColumnIndex(this,e);for(let t=0;t<this.rows;t++){const n=new Float64Array(this.columns-1);for(let r=0;r<e;r++)n[r]=this.data[t][r];for(let r=e+1;r<this.columns;r++)n[r-1]=this.data[t][r];this.data[t]=n}return this.columns-=1,this}addColumn(e,t){void 0===t&&(t=e,e=this.columns),checkColumnIndex(this,e,!0),t=checkColumnVector(this,t);for(let n=0;n<this.rows;n++){const r=new Float64Array(this.columns+1);let i=0;for(;i<e;i++)r[i]=this.data[n][i];for(r[i++]=t[n];i<this.columns+1;i++)r[i]=this.data[n][i-1];this.data[n]=r}return this.columns+=1,this}}installMathOperations(AbstractMatrix,Matrix);class BaseView extends AbstractMatrix{constructor(e,t,n){super(),this.matrix=e,this.rows=t,this.columns=n}}class MatrixColumnView extends BaseView{constructor(e,t){checkColumnIndex(e,t),super(e,e.rows,1),this.column=t}set(e,t,n){return this.matrix.set(e,this.column,n),this}get(e){return this.matrix.get(e,this.column)}}class MatrixColumnSelectionView extends BaseView{constructor(e,t){checkColumnIndices(e,t),super(e,e.rows,t.length),this.columnIndices=t}set(e,t,n){return this.matrix.set(e,this.columnIndices[t],n),this}get(e,t){return this.matrix.get(e,this.columnIndices[t])}}class MatrixFlipColumnView extends BaseView{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(e,this.columns-t-1,n),this}get(e,t){return this.matrix.get(e,this.columns-t-1)}}class MatrixFlipRowView extends BaseView{constructor(e){super(e,e.rows,e.columns)}set(e,t,n){return this.matrix.set(this.rows-e-1,t,n),this}get(e,t){return this.matrix.get(this.rows-e-1,t)}}class MatrixRowView extends BaseView{constructor(e,t){checkRowIndex(e,t),super(e,1,e.columns),this.row=t}set(e,t,n){return this.matrix.set(this.row,t,n),this}get(e,t){return this.matrix.get(this.row,t)}}class MatrixRowSelectionView extends BaseView{constructor(e,t){checkRowIndices(e,t),super(e,t.length,e.columns),this.rowIndices=t}set(e,t,n){return this.matrix.set(this.rowIndices[e],t,n),this}get(e,t){return this.matrix.get(this.rowIndices[e],t)}}class MatrixSelectionView extends BaseView{constructor(e,t,n){checkRowIndices(e,t),checkColumnIndices(e,n),super(e,t.length,n.length),this.rowIndices=t,this.columnIndices=n}set(e,t,n){return this.matrix.set(this.rowIndices[e],this.columnIndices[t],n),this}get(e,t){return this.matrix.get(this.rowIndices[e],this.columnIndices[t])}}class MatrixSubView extends BaseView{constructor(e,t,n,r,i){checkRange(e,t,n,r,i),super(e,n-t+1,i-r+1),this.startRow=t,this.startColumn=r}set(e,t,n){return this.matrix.set(this.startRow+e,this.startColumn+t,n),this}get(e,t){return this.matrix.get(this.startRow+e,this.startColumn+t)}}class MatrixTransposeView extends BaseView{constructor(e){super(e,e.columns,e.rows)}set(e,t,n){return this.matrix.set(t,e,n),this}get(e,t){return this.matrix.get(t,e)}}class WrapperMatrix1D extends AbstractMatrix{constructor(e,t={}){const{rows:n=1}=t;if(e.length%n!=0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=n,this.columns=e.length/n,this.data=e}set(e,t,n){let r=this._calculateIndex(e,t);return this.data[r]=n,this}get(e,t){let n=this._calculateIndex(e,t);return this.data[n]}_calculateIndex(e,t){return e*this.columns+t}}class WrapperMatrix2D extends AbstractMatrix{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,t,n){return this.data[e][t]=n,this}get(e,t){return this.data[e][t]}}function wrap(e,t){if(isAnyArray(e))return e[0]&&isAnyArray(e[0])?new WrapperMatrix2D(e):new WrapperMatrix1D(e,t);throw new Error("the argument is not an array")}class LuDecomposition{constructor(e){let t,n,r,i,o,a,s,l,c,u=(e=WrapperMatrix2D.checkMatrix(e)).clone(),h=u.rows,d=u.columns,f=new Float64Array(h),p=1;for(t=0;t<h;t++)f[t]=t;for(l=new Float64Array(h),n=0;n<d;n++){for(t=0;t<h;t++)l[t]=u.get(t,n);for(t=0;t<h;t++){for(c=Math.min(t,n),o=0,r=0;r<c;r++)o+=u.get(t,r)*l[r];l[t]-=o,u.set(t,n,l[t])}for(i=n,t=n+1;t<h;t++)Math.abs(l[t])>Math.abs(l[i])&&(i=t);if(i!==n){for(r=0;r<d;r++)a=u.get(i,r),u.set(i,r,u.get(n,r)),u.set(n,r,a);s=f[i],f[i]=f[n],f[n]=s,p=-p}if(n<h&&0!==u.get(n,n))for(t=n+1;t<h;t++)u.set(t,n,u.get(t,n)/u.get(n,n))}this.LU=u,this.pivotVector=f,this.pivotSign=p}isSingular(){let e=this.LU,t=e.columns;for(let n=0;n<t;n++)if(0===e.get(n,n))return!0;return!1}solve(e){e=Matrix.checkMatrix(e);let t=this.LU;if(t.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let n,r,i,o=e.columns,a=e.subMatrixRow(this.pivotVector,0,o-1),s=t.columns;for(i=0;i<s;i++)for(n=i+1;n<s;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*t.get(n,i));for(i=s-1;i>=0;i--){for(r=0;r<o;r++)a.set(i,r,a.get(i,r)/t.get(i,i));for(n=0;n<i;n++)for(r=0;r<o;r++)a.set(n,r,a.get(n,r)-a.get(i,r)*t.get(n,i))}return a}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let t=this.pivotSign,n=e.columns;for(let r=0;r<n;r++)t*=e.get(r,r);return t}get lowerTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new Matrix(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i>t?r.set(i,t,e.get(i,t)):i===t?r.set(i,t,1):r.set(i,t,0);return r}get upperTriangularMatrix(){let e=this.LU,t=e.rows,n=e.columns,r=new Matrix(t,n);for(let i=0;i<t;i++)for(let t=0;t<n;t++)i<=t?r.set(i,t,e.get(i,t)):r.set(i,t,0);return r}get pivotPermutationVector(){return Array.from(this.pivotVector)}}function hypotenuse(e,t){let n=0;return Math.abs(e)>Math.abs(t)?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0!==t?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):0}class QrDecomposition{constructor(e){let t,n,r,i,o=(e=WrapperMatrix2D.checkMatrix(e)).clone(),a=e.rows,s=e.columns,l=new Float64Array(s);for(r=0;r<s;r++){let e=0;for(t=r;t<a;t++)e=hypotenuse(e,o.get(t,r));if(0!==e){for(o.get(r,r)<0&&(e=-e),t=r;t<a;t++)o.set(t,r,o.get(t,r)/e);for(o.set(r,r,o.get(r,r)+1),n=r+1;n<s;n++){for(i=0,t=r;t<a;t++)i+=o.get(t,r)*o.get(t,n);for(i=-i/o.get(r,r),t=r;t<a;t++)o.set(t,n,o.get(t,n)+i*o.get(t,r))}}l[r]=-e}this.QR=o,this.Rdiag=l}solve(e){e=Matrix.checkMatrix(e);let t=this.QR,n=t.rows;if(e.rows!==n)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let r,i,o,a,s=e.columns,l=e.clone(),c=t.columns;for(o=0;o<c;o++)for(i=0;i<s;i++){for(a=0,r=o;r<n;r++)a+=t.get(r,o)*l.get(r,i);for(a=-a/t.get(o,o),r=o;r<n;r++)l.set(r,i,l.get(r,i)+a*t.get(r,o))}for(o=c-1;o>=0;o--){for(i=0;i<s;i++)l.set(o,i,l.get(o,i)/this.Rdiag[o]);for(r=0;r<o;r++)for(i=0;i<s;i++)l.set(r,i,l.get(r,i)-l.get(o,i)*t.get(r,o))}return l.subMatrix(0,c-1,0,s-1)}isFullRank(){let e=this.QR.columns;for(let t=0;t<e;t++)if(0===this.Rdiag[t])return!1;return!0}get upperTriangularMatrix(){let e,t,n=this.QR,r=n.columns,i=new Matrix(r,r);for(e=0;e<r;e++)for(t=0;t<r;t++)e<t?i.set(e,t,n.get(e,t)):e===t?i.set(e,t,this.Rdiag[e]):i.set(e,t,0);return i}get orthogonalMatrix(){let e,t,n,r,i=this.QR,o=i.rows,a=i.columns,s=new Matrix(o,a);for(n=a-1;n>=0;n--){for(e=0;e<o;e++)s.set(e,n,0);for(s.set(n,n,1),t=n;t<a;t++)if(0!==i.get(n,n)){for(r=0,e=n;e<o;e++)r+=i.get(e,n)*s.get(e,t);for(r=-r/i.get(n,n),e=n;e<o;e++)s.set(e,t,s.get(e,t)+r*i.get(e,n))}}return s}}class SingularValueDecomposition{constructor(e,t={}){if((e=WrapperMatrix2D.checkMatrix(e)).isEmpty())throw new Error("Matrix must be non-empty");let n=e.rows,r=e.columns;const{computeLeftSingularVectors:i=!0,computeRightSingularVectors:o=!0,autoTranspose:a=!1}=t;let s,l=Boolean(i),c=Boolean(o),u=!1;if(n<r)if(a){s=e.transpose(),n=s.rows,r=s.columns,u=!0;let t=l;l=c,c=t}else s=e.clone();else s=e.clone();let h=Math.min(n,r),d=Math.min(n+1,r),f=new Float64Array(d),p=new Matrix(n,h),g=new Matrix(r,r),m=new Float64Array(r),v=new Float64Array(n),y=new Float64Array(d);for(let S=0;S<d;S++)y[S]=S;let b=Math.min(n-1,r),x=Math.max(0,Math.min(r-2,n)),w=Math.max(b,x);for(let S=0;S<w;S++){if(S<b){f[S]=0;for(let e=S;e<n;e++)f[S]=hypotenuse(f[S],s.get(e,S));if(0!==f[S]){s.get(S,S)<0&&(f[S]=-f[S]);for(let e=S;e<n;e++)s.set(e,S,s.get(e,S)/f[S]);s.set(S,S,s.get(S,S)+1)}f[S]=-f[S]}for(let e=S+1;e<r;e++){if(S<b&&0!==f[S]){let t=0;for(let r=S;r<n;r++)t+=s.get(r,S)*s.get(r,e);t=-t/s.get(S,S);for(let r=S;r<n;r++)s.set(r,e,s.get(r,e)+t*s.get(r,S))}m[e]=s.get(S,e)}if(l&&S<b)for(let e=S;e<n;e++)p.set(e,S,s.get(e,S));if(S<x){m[S]=0;for(let e=S+1;e<r;e++)m[S]=hypotenuse(m[S],m[e]);if(0!==m[S]){m[S+1]<0&&(m[S]=0-m[S]);for(let e=S+1;e<r;e++)m[e]/=m[S];m[S+1]+=1}if(m[S]=-m[S],S+1<n&&0!==m[S]){for(let e=S+1;e<n;e++)v[e]=0;for(let e=S+1;e<n;e++)for(let t=S+1;t<r;t++)v[e]+=m[t]*s.get(e,t);for(let e=S+1;e<r;e++){let t=-m[e]/m[S+1];for(let r=S+1;r<n;r++)s.set(r,e,s.get(r,e)+t*v[r])}}if(c)for(let e=S+1;e<r;e++)g.set(e,S,m[e])}}let _=Math.min(r,n+1);if(b<r&&(f[b]=s.get(b,b)),n<_&&(f[_-1]=0),x+1<_&&(m[x]=s.get(x,_-1)),m[_-1]=0,l){for(let e=b;e<h;e++){for(let t=0;t<n;t++)p.set(t,e,0);p.set(e,e,1)}for(let e=b-1;e>=0;e--)if(0!==f[e]){for(let t=e+1;t<h;t++){let r=0;for(let i=e;i<n;i++)r+=p.get(i,e)*p.get(i,t);r=-r/p.get(e,e);for(let i=e;i<n;i++)p.set(i,t,p.get(i,t)+r*p.get(i,e))}for(let t=e;t<n;t++)p.set(t,e,-p.get(t,e));p.set(e,e,1+p.get(e,e));for(let t=0;t<e-1;t++)p.set(t,e,0)}else{for(let t=0;t<n;t++)p.set(t,e,0);p.set(e,e,1)}}if(c)for(let S=r-1;S>=0;S--){if(S<x&&0!==m[S])for(let e=S+1;e<r;e++){let t=0;for(let n=S+1;n<r;n++)t+=g.get(n,S)*g.get(n,e);t=-t/g.get(S+1,S);for(let n=S+1;n<r;n++)g.set(n,e,g.get(n,e)+t*g.get(n,S))}for(let e=0;e<r;e++)g.set(e,S,0);g.set(S,S,1)}let C=_-1,$=Number.EPSILON;for(;_>0;){let e,t;for(e=_-2;e>=-1&&-1!==e;e--){const t=Number.MIN_VALUE+$*Math.abs(f[e]+Math.abs(f[e+1]));if(Math.abs(m[e])<=t||Number.isNaN(m[e])){m[e]=0;break}}if(e===_-2)t=4;else{let n;for(n=_-1;n>=e&&n!==e;n--){let t=(n!==_?Math.abs(m[n]):0)+(n!==e+1?Math.abs(m[n-1]):0);if(Math.abs(f[n])<=$*t){f[n]=0;break}}n===e?t=3:n===_-1?t=1:(t=2,e=n)}switch(e++,t){case 1:{let t=m[_-2];m[_-2]=0;for(let n=_-2;n>=e;n--){let i=hypotenuse(f[n],t),o=f[n]/i,a=t/i;if(f[n]=i,n!==e&&(t=-a*m[n-1],m[n-1]=o*m[n-1]),c)for(let e=0;e<r;e++)i=o*g.get(e,n)+a*g.get(e,_-1),g.set(e,_-1,-a*g.get(e,n)+o*g.get(e,_-1)),g.set(e,n,i)}break}case 2:{let t=m[e-1];m[e-1]=0;for(let r=e;r<_;r++){let i=hypotenuse(f[r],t),o=f[r]/i,a=t/i;if(f[r]=i,t=-a*m[r],m[r]=o*m[r],l)for(let t=0;t<n;t++)i=o*p.get(t,r)+a*p.get(t,e-1),p.set(t,e-1,-a*p.get(t,r)+o*p.get(t,e-1)),p.set(t,r,i)}break}case 3:{const t=Math.max(Math.abs(f[_-1]),Math.abs(f[_-2]),Math.abs(m[_-2]),Math.abs(f[e]),Math.abs(m[e])),i=f[_-1]/t,o=f[_-2]/t,a=m[_-2]/t,s=f[e]/t,u=m[e]/t,h=((o+i)*(o-i)+a*a)/2,d=i*a*(i*a);let v=0;0===h&&0===d||(v=h<0?0-Math.sqrt(h*h+d):Math.sqrt(h*h+d),v=d/(h+v));let y=(s+i)*(s-i)+v,b=s*u;for(let x=e;x<_-1;x++){let t=hypotenuse(y,b);0===t&&(t=Number.MIN_VALUE);let i=y/t,o=b/t;if(x!==e&&(m[x-1]=t),y=i*f[x]+o*m[x],m[x]=i*m[x]-o*f[x],b=o*f[x+1],f[x+1]=i*f[x+1],c)for(let e=0;e<r;e++)t=i*g.get(e,x)+o*g.get(e,x+1),g.set(e,x+1,-o*g.get(e,x)+i*g.get(e,x+1)),g.set(e,x,t);if(t=hypotenuse(y,b),0===t&&(t=Number.MIN_VALUE),i=y/t,o=b/t,f[x]=t,y=i*m[x]+o*f[x+1],f[x+1]=-o*m[x]+i*f[x+1],b=o*m[x+1],m[x+1]=i*m[x+1],l&&x<n-1)for(let e=0;e<n;e++)t=i*p.get(e,x)+o*p.get(e,x+1),p.set(e,x+1,-o*p.get(e,x)+i*p.get(e,x+1)),p.set(e,x,t)}m[_-2]=y;break}case 4:if(f[e]<=0&&(f[e]=f[e]<0?-f[e]:0,c))for(let t=0;t<=C;t++)g.set(t,e,-g.get(t,e));for(;e<C&&!(f[e]>=f[e+1]);){let t=f[e];if(f[e]=f[e+1],f[e+1]=t,c&&e<r-1)for(let n=0;n<r;n++)t=g.get(n,e+1),g.set(n,e+1,g.get(n,e)),g.set(n,e,t);if(l&&e<n-1)for(let r=0;r<n;r++)t=p.get(r,e+1),p.set(r,e+1,p.get(r,e)),p.set(r,e,t);e++}_--}}if(u){let e=g;g=p,p=e}this.m=n,this.n=r,this.s=f,this.U=p,this.V=g}solve(e){let t=e,n=this.threshold,r=this.s.length,i=Matrix.zeros(r,r);for(let h=0;h<r;h++)Math.abs(this.s[h])<=n?i.set(h,h,0):i.set(h,h,1/this.s[h]);let o=this.U,a=this.rightSingularVectors,s=a.mmul(i),l=a.rows,c=o.rows,u=Matrix.zeros(l,c);for(let h=0;h<l;h++)for(let e=0;e<c;e++){let t=0;for(let n=0;n<r;n++)t+=s.get(h,n)*o.get(e,n);u.set(h,e,t)}return u.mmul(t)}solveForDiagonal(e){return this.solve(Matrix.diag(e))}inverse(){let e=this.V,t=this.threshold,n=e.rows,r=e.columns,i=new Matrix(n,this.s.length);for(let c=0;c<n;c++)for(let n=0;n<r;n++)Math.abs(this.s[n])>t&&i.set(c,n,e.get(c,n)/this.s[n]);let o=this.U,a=o.rows,s=o.columns,l=new Matrix(n,a);for(let c=0;c<n;c++)for(let e=0;e<a;e++){let t=0;for(let n=0;n<s;n++)t+=i.get(c,n)*o.get(e,n);l.set(c,e,t)}return l}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,t=0,n=this.s;for(let r=0,i=n.length;r<i;r++)n[r]>e&&t++;return t}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return Matrix.diag(this.s)}}function inverse(e,t=!1){return e=WrapperMatrix2D.checkMatrix(e),t?new SingularValueDecomposition(e).inverse():solve(e,Matrix.eye(e.rows))}function solve(e,t,n=!1){return e=WrapperMatrix2D.checkMatrix(e),t=WrapperMatrix2D.checkMatrix(t),n?new SingularValueDecomposition(e).solve(t):e.isSquare()?new LuDecomposition(e).solve(t):new QrDecomposition(e).solve(t)}function determinant(e){if((e=Matrix.checkMatrix(e)).isSquare()){if(0===e.columns)return 1;let t,n,r,i;if(2===e.columns)return t=e.get(0,0),n=e.get(0,1),r=e.get(1,0),i=e.get(1,1),t*i-n*r;if(3===e.columns){let i,o,a;return i=new MatrixSelectionView(e,[1,2],[1,2]),o=new MatrixSelectionView(e,[1,2],[0,2]),a=new MatrixSelectionView(e,[1,2],[0,1]),t=e.get(0,0),n=e.get(0,1),r=e.get(0,2),t*determinant(i)-n*determinant(o)+r*determinant(a)}return new LuDecomposition(e).determinant}throw Error("determinant can only be calculated for a square matrix")}function xrange(e,t){let n=[];for(let r=0;r<e;r++)r!==t&&n.push(r);return n}function dependenciesOneRow(e,t,n,r=1e-9,i=1e-9){if(e>i)return new Array(t.rows+1).fill(0);{let e=t.addRow(n,[0]);for(let t=0;t<e.rows;t++)Math.abs(e.get(t,0))<r&&e.set(t,0,0);return e.to1DArray()}}function linearDependencies(e,t={}){const{thresholdValue:n=1e-9,thresholdError:r=1e-9}=t;let i=(e=Matrix.checkMatrix(e)).rows,o=new Matrix(i,i);for(let a=0;a<i;a++){let t=Matrix.columnVector(e.getRow(a)),s=e.subMatrixRow(xrange(i,a)).transpose(),l=new SingularValueDecomposition(s).solve(t),c=Matrix.sub(t,s.mmul(l)).abs().max();o.setRow(a,dependenciesOneRow(c,l,a,n,r))}return o}function pseudoInverse(e,t=Number.EPSILON){if((e=Matrix.checkMatrix(e)).isEmpty())return e.transpose();let n=new SingularValueDecomposition(e,{autoTranspose:!0}),r=n.leftSingularVectors,i=n.rightSingularVectors,o=n.diagonal;for(let a=0;a<o.length;a++)Math.abs(o[a])>t?o[a]=1/o[a]:o[a]=0;return i.mmul(Matrix.diag(o).mmul(r.transpose()))}function covariance(e,t=e,n={}){e=new Matrix(e);let r=!1;if("object"!=typeof t||Matrix.isMatrix(t)||isAnyArray(t)?t=new Matrix(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0}=n;i&&(e=e.center("column"),r||(t=t.center("column")));const o=e.transpose().mmul(t);for(let a=0;a<o.rows;a++)for(let t=0;t<o.columns;t++)o.set(a,t,o.get(a,t)*(1/(e.rows-1)));return o}function correlation(e,t=e,n={}){e=new Matrix(e);let r=!1;if("object"!=typeof t||Matrix.isMatrix(t)||isAnyArray(t)?t=new Matrix(t):(n=t,t=e,r=!0),e.rows!==t.rows)throw new TypeError("Both matrices must have the same number of rows");const{center:i=!0,scale:o=!0}=n;i&&(e.center("column"),r||t.center("column")),o&&(e.scale("column"),r||t.scale("column"));const a=e.standardDeviation("column",{unbiased:!0}),s=r?a:t.standardDeviation("column",{unbiased:!0}),l=e.transpose().mmul(t);for(let c=0;c<l.rows;c++)for(let t=0;t<l.columns;t++)l.set(c,t,l.get(c,t)*(1/(a[c]*s[t]))*(1/(e.rows-1)));return l}class EigenvalueDecomposition{constructor(e,t={}){const{assumeSymmetric:n=!1}=t;if(!(e=WrapperMatrix2D.checkMatrix(e)).isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let r,i,o=e.columns,a=new Matrix(o,o),s=new Float64Array(o),l=new Float64Array(o),c=e,u=!1;if(u=!!n||e.isSymmetric(),u){for(r=0;r<o;r++)for(i=0;i<o;i++)a.set(r,i,c.get(r,i));tred2(o,l,s,a),tql2(o,l,s,a)}else{let e=new Matrix(o,o),t=new Float64Array(o);for(i=0;i<o;i++)for(r=0;r<o;r++)e.set(r,i,c.get(r,i));orthes(o,e,t,a),hqr2(o,l,s,a,e)}this.n=o,this.e=l,this.d=s,this.V=a}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e,t,n=this.n,r=this.e,i=this.d,o=new Matrix(n,n);for(e=0;e<n;e++){for(t=0;t<n;t++)o.set(e,t,0);o.set(e,e,i[e]),r[e]>0?o.set(e,e+1,r[e]):r[e]<0&&o.set(e,e-1,r[e])}return o}}function tred2(e,t,n,r){let i,o,a,s,l,c,u,h;for(l=0;l<e;l++)n[l]=r.get(e-1,l);for(s=e-1;s>0;s--){for(h=0,a=0,c=0;c<s;c++)h+=Math.abs(n[c]);if(0===h)for(t[s]=n[s-1],l=0;l<s;l++)n[l]=r.get(s-1,l),r.set(s,l,0),r.set(l,s,0);else{for(c=0;c<s;c++)n[c]/=h,a+=n[c]*n[c];for(i=n[s-1],o=Math.sqrt(a),i>0&&(o=-o),t[s]=h*o,a-=i*o,n[s-1]=i-o,l=0;l<s;l++)t[l]=0;for(l=0;l<s;l++){for(i=n[l],r.set(l,s,i),o=t[l]+r.get(l,l)*i,c=l+1;c<=s-1;c++)o+=r.get(c,l)*n[c],t[c]+=r.get(c,l)*i;t[l]=o}for(i=0,l=0;l<s;l++)t[l]/=a,i+=t[l]*n[l];for(u=i/(a+a),l=0;l<s;l++)t[l]-=u*n[l];for(l=0;l<s;l++){for(i=n[l],o=t[l],c=l;c<=s-1;c++)r.set(c,l,r.get(c,l)-(i*t[c]+o*n[c]));n[l]=r.get(s-1,l),r.set(s,l,0)}}n[s]=a}for(s=0;s<e-1;s++){if(r.set(e-1,s,r.get(s,s)),r.set(s,s,1),a=n[s+1],0!==a){for(c=0;c<=s;c++)n[c]=r.get(c,s+1)/a;for(l=0;l<=s;l++){for(o=0,c=0;c<=s;c++)o+=r.get(c,s+1)*r.get(c,l);for(c=0;c<=s;c++)r.set(c,l,r.get(c,l)-o*n[c])}}for(c=0;c<=s;c++)r.set(c,s+1,0)}for(l=0;l<e;l++)n[l]=r.get(e-1,l),r.set(e-1,l,0);r.set(e-1,e-1,1),t[0]=0}function tql2(e,t,n,r){let i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b;for(a=1;a<e;a++)t[a-1]=t[a];t[e-1]=0;let x=0,w=0,_=Number.EPSILON;for(c=0;c<e;c++){for(w=Math.max(w,Math.abs(n[c])+Math.abs(t[c])),u=c;u<e&&!(Math.abs(t[u])<=_*w);)u++;if(u>c)do{for(i=n[c],h=(n[c+1]-i)/(2*t[c]),d=hypotenuse(h,1),h<0&&(d=-d),n[c]=t[c]/(h+d),n[c+1]=t[c]*(h+d),f=n[c+1],o=i-n[c],a=c+2;a<e;a++)n[a]-=o;for(x+=o,h=n[u],p=1,g=p,m=p,v=t[c+1],y=0,b=0,a=u-1;a>=c;a--)for(m=g,g=p,b=y,i=p*t[a],o=p*h,d=hypotenuse(h,t[a]),t[a+1]=y*d,y=t[a]/d,p=h/d,h=p*n[a]-y*i,n[a+1]=o+y*(p*i+y*n[a]),l=0;l<e;l++)o=r.get(l,a+1),r.set(l,a+1,y*r.get(l,a)+p*o),r.set(l,a,p*r.get(l,a)-y*o);h=-y*b*m*v*t[c]/f,t[c]=y*h,n[c]=p*h}while(Math.abs(t[c])>_*w);n[c]=n[c]+x,t[c]=0}for(a=0;a<e-1;a++){for(l=a,h=n[a],s=a+1;s<e;s++)n[s]<h&&(l=s,h=n[s]);if(l!==a)for(n[l]=n[a],n[a]=h,s=0;s<e;s++)h=r.get(s,a),r.set(s,a,r.get(s,l)),r.set(s,l,h)}}function orthes(e,t,n,r){let i,o,a,s,l,c,u,h=e-1;for(c=1;c<=h-1;c++){for(u=0,s=c;s<=h;s++)u+=Math.abs(t.get(s,c-1));if(0!==u){for(a=0,s=h;s>=c;s--)n[s]=t.get(s,c-1)/u,a+=n[s]*n[s];for(o=Math.sqrt(a),n[c]>0&&(o=-o),a-=n[c]*o,n[c]=n[c]-o,l=c;l<e;l++){for(i=0,s=h;s>=c;s--)i+=n[s]*t.get(s,l);for(i/=a,s=c;s<=h;s++)t.set(s,l,t.get(s,l)-i*n[s])}for(s=0;s<=h;s++){for(i=0,l=h;l>=c;l--)i+=n[l]*t.get(s,l);for(i/=a,l=c;l<=h;l++)t.set(s,l,t.get(s,l)-i*n[l])}n[c]=u*n[c],t.set(c,c-1,u*o)}}for(s=0;s<e;s++)for(l=0;l<e;l++)r.set(s,l,s===l?1:0);for(c=h-1;c>=1;c--)if(0!==t.get(c,c-1)){for(s=c+1;s<=h;s++)n[s]=t.get(s,c-1);for(l=c;l<=h;l++){for(o=0,s=c;s<=h;s++)o+=n[s]*r.get(s,l);for(o=o/n[c]/t.get(c,c-1),s=c;s<=h;s++)r.set(s,l,r.get(s,l)+o*n[s])}}}function hqr2(e,t,n,r,i){let o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x=e-1,w=e-1,_=Number.EPSILON,C=0,$=0,S=0,E=0,A=0,M=0,k=0,T=0;for(o=0;o<e;o++)for((o<0||o>w)&&(n[o]=i.get(o,o),t[o]=0),a=Math.max(o-1,0);a<e;a++)$+=Math.abs(i.get(o,a));for(;x>=0;){for(l=x;l>0&&(M=Math.abs(i.get(l-1,l-1))+Math.abs(i.get(l,l)),0===M&&(M=$),!(Math.abs(i.get(l,l-1))<_*M));)l--;if(l===x)i.set(x,x,i.get(x,x)+C),n[x]=i.get(x,x),t[x]=0,x--,T=0;else if(l===x-1){if(h=i.get(x,x-1)*i.get(x-1,x),S=(i.get(x-1,x-1)-i.get(x,x))/2,E=S*S+h,k=Math.sqrt(Math.abs(E)),i.set(x,x,i.get(x,x)+C),i.set(x-1,x-1,i.get(x-1,x-1)+C),d=i.get(x,x),E>=0){for(k=S>=0?S+k:S-k,n[x-1]=d+k,n[x]=n[x-1],0!==k&&(n[x]=d-h/k),t[x-1]=0,t[x]=0,d=i.get(x,x-1),M=Math.abs(d)+Math.abs(k),S=d/M,E=k/M,A=Math.sqrt(S*S+E*E),S/=A,E/=A,a=x-1;a<e;a++)k=i.get(x-1,a),i.set(x-1,a,E*k+S*i.get(x,a)),i.set(x,a,E*i.get(x,a)-S*k);for(o=0;o<=x;o++)k=i.get(o,x-1),i.set(o,x-1,E*k+S*i.get(o,x)),i.set(o,x,E*i.get(o,x)-S*k);for(o=0;o<=w;o++)k=r.get(o,x-1),r.set(o,x-1,E*k+S*r.get(o,x)),r.set(o,x,E*r.get(o,x)-S*k)}else n[x-1]=d+S,n[x]=d+S,t[x-1]=k,t[x]=-k;x-=2,T=0}else{if(d=i.get(x,x),f=0,h=0,l<x&&(f=i.get(x-1,x-1),h=i.get(x,x-1)*i.get(x-1,x)),10===T){for(C+=d,o=0;o<=x;o++)i.set(o,o,i.get(o,o)-d);M=Math.abs(i.get(x,x-1))+Math.abs(i.get(x-1,x-2)),d=f=.75*M,h=-.4375*M*M}if(30===T&&(M=(f-d)/2,M=M*M+h,M>0)){for(M=Math.sqrt(M),f<d&&(M=-M),M=d-h/((f-d)/2+M),o=0;o<=x;o++)i.set(o,o,i.get(o,o)-M);C+=M,d=f=h=.964}for(T+=1,c=x-2;c>=l&&(k=i.get(c,c),A=d-k,M=f-k,S=(A*M-h)/i.get(c+1,c)+i.get(c,c+1),E=i.get(c+1,c+1)-k-A-M,A=i.get(c+2,c+1),M=Math.abs(S)+Math.abs(E)+Math.abs(A),S/=M,E/=M,A/=M,c!==l)&&!(Math.abs(i.get(c,c-1))*(Math.abs(E)+Math.abs(A))<_*(Math.abs(S)*(Math.abs(i.get(c-1,c-1))+Math.abs(k)+Math.abs(i.get(c+1,c+1)))));)c--;for(o=c+2;o<=x;o++)i.set(o,o-2,0),o>c+2&&i.set(o,o-3,0);for(s=c;s<=x-1&&(y=s!==x-1,s!==c&&(S=i.get(s,s-1),E=i.get(s+1,s-1),A=y?i.get(s+2,s-1):0,d=Math.abs(S)+Math.abs(E)+Math.abs(A),0!==d&&(S/=d,E/=d,A/=d)),0!==d);s++)if(M=Math.sqrt(S*S+E*E+A*A),S<0&&(M=-M),0!==M){for(s!==c?i.set(s,s-1,-M*d):l!==c&&i.set(s,s-1,-i.get(s,s-1)),S+=M,d=S/M,f=E/M,k=A/M,E/=S,A/=S,a=s;a<e;a++)S=i.get(s,a)+E*i.get(s+1,a),y&&(S+=A*i.get(s+2,a),i.set(s+2,a,i.get(s+2,a)-S*k)),i.set(s,a,i.get(s,a)-S*d),i.set(s+1,a,i.get(s+1,a)-S*f);for(o=0;o<=Math.min(x,s+3);o++)S=d*i.get(o,s)+f*i.get(o,s+1),y&&(S+=k*i.get(o,s+2),i.set(o,s+2,i.get(o,s+2)-S*A)),i.set(o,s,i.get(o,s)-S),i.set(o,s+1,i.get(o,s+1)-S*E);for(o=0;o<=w;o++)S=d*r.get(o,s)+f*r.get(o,s+1),y&&(S+=k*r.get(o,s+2),r.set(o,s+2,r.get(o,s+2)-S*A)),r.set(o,s,r.get(o,s)-S),r.set(o,s+1,r.get(o,s+1)-S*E)}}}if(0!==$){for(x=e-1;x>=0;x--)if(S=n[x],E=t[x],0===E)for(l=x,i.set(x,x,1),o=x-1;o>=0;o--){for(h=i.get(o,o)-S,A=0,a=l;a<=x;a++)A+=i.get(o,a)*i.get(a,x);if(t[o]<0)k=h,M=A;else if(l=o,0===t[o]?i.set(o,x,0!==h?-A/h:-A/(_*$)):(d=i.get(o,o+1),f=i.get(o+1,o),E=(n[o]-S)*(n[o]-S)+t[o]*t[o],u=(d*M-k*A)/E,i.set(o,x,u),i.set(o+1,x,Math.abs(d)>Math.abs(k)?(-A-h*u)/d:(-M-f*u)/k)),u=Math.abs(i.get(o,x)),_*u*u>1)for(a=o;a<=x;a++)i.set(a,x,i.get(a,x)/u)}else if(E<0)for(l=x-1,Math.abs(i.get(x,x-1))>Math.abs(i.get(x-1,x))?(i.set(x-1,x-1,E/i.get(x,x-1)),i.set(x-1,x,-(i.get(x,x)-S)/i.get(x,x-1))):(b=cdiv(0,-i.get(x-1,x),i.get(x-1,x-1)-S,E),i.set(x-1,x-1,b[0]),i.set(x-1,x,b[1])),i.set(x,x-1,0),i.set(x,x,1),o=x-2;o>=0;o--){for(p=0,g=0,a=l;a<=x;a++)p+=i.get(o,a)*i.get(a,x-1),g+=i.get(o,a)*i.get(a,x);if(h=i.get(o,o)-S,t[o]<0)k=h,A=p,M=g;else if(l=o,0===t[o]?(b=cdiv(-p,-g,h,E),i.set(o,x-1,b[0]),i.set(o,x,b[1])):(d=i.get(o,o+1),f=i.get(o+1,o),m=(n[o]-S)*(n[o]-S)+t[o]*t[o]-E*E,v=2*(n[o]-S)*E,0===m&&0===v&&(m=_*$*(Math.abs(h)+Math.abs(E)+Math.abs(d)+Math.abs(f)+Math.abs(k))),b=cdiv(d*A-k*p+E*g,d*M-k*g-E*p,m,v),i.set(o,x-1,b[0]),i.set(o,x,b[1]),Math.abs(d)>Math.abs(k)+Math.abs(E)?(i.set(o+1,x-1,(-p-h*i.get(o,x-1)+E*i.get(o,x))/d),i.set(o+1,x,(-g-h*i.get(o,x)-E*i.get(o,x-1))/d)):(b=cdiv(-A-f*i.get(o,x-1),-M-f*i.get(o,x),k,E),i.set(o+1,x-1,b[0]),i.set(o+1,x,b[1]))),u=Math.max(Math.abs(i.get(o,x-1)),Math.abs(i.get(o,x))),_*u*u>1)for(a=o;a<=x;a++)i.set(a,x-1,i.get(a,x-1)/u),i.set(a,x,i.get(a,x)/u)}for(o=0;o<e;o++)if(o<0||o>w)for(a=o;a<e;a++)r.set(o,a,i.get(o,a));for(a=e-1;a>=0;a--)for(o=0;o<=w;o++){for(k=0,s=0;s<=Math.min(a,w);s++)k+=r.get(o,s)*i.get(s,a);r.set(o,a,k)}}}function cdiv(e,t,n,r){let i,o;return Math.abs(n)>Math.abs(r)?(i=r/n,o=n+i*r,[(e+i*t)/o,(t-i*e)/o]):(i=n/r,o=r+i*n,[(i*e+t)/o,(i*t-e)/o])}class CholeskyDecomposition{constructor(e){if(!(e=WrapperMatrix2D.checkMatrix(e)).isSymmetric())throw new Error("Matrix is not symmetric");let t,n,r,i=e,o=i.rows,a=new Matrix(o,o),s=!0;for(n=0;n<o;n++){let e=0;for(r=0;r<n;r++){let o=0;for(t=0;t<r;t++)o+=a.get(r,t)*a.get(n,t);o=(i.get(n,r)-o)/a.get(r,r),a.set(n,r,o),e+=o*o}for(e=i.get(n,n)-e,s&=e>0,a.set(n,n,Math.sqrt(Math.max(e,0))),r=n+1;r<o;r++)a.set(n,r,0)}this.L=a,this.positiveDefinite=Boolean(s)}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=WrapperMatrix2D.checkMatrix(e);let t=this.L,n=t.rows;if(e.rows!==n)throw new Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw new Error("Matrix is not positive definite");let r,i,o,a=e.columns,s=e.clone();for(o=0;o<n;o++)for(i=0;i<a;i++){for(r=0;r<o;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*t.get(o,r));s.set(o,i,s.get(o,i)/t.get(o,o))}for(o=n-1;o>=0;o--)for(i=0;i<a;i++){for(r=o+1;r<n;r++)s.set(o,i,s.get(o,i)-s.get(r,i)*t.get(r,o));s.set(o,i,s.get(o,i)/t.get(o,o))}return s}get lowerTriangularMatrix(){return this.L}}class nipals{constructor(e,t={}){e=WrapperMatrix2D.checkMatrix(e);let{Y:n}=t;const{scaleScores:r=!1,maxIterations:i=1e3,terminationCriteria:o=1e-10}=t;let a;if(n){if(n=isAnyArray(n)&&"number"==typeof n[0]?Matrix.columnVector(n):WrapperMatrix2D.checkMatrix(n),n.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=n.getColumnVector(0)}else a=e.getColumnVector(0);let s,l,c,u,h=1;for(let d=0;d<i&&h>o;d++)c=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),c=c.div(c.norm()),s=e.mmul(c).div(c.transpose().mmul(c).get(0,0)),d>0&&(h=s.clone().sub(u).pow(2).sum()),u=s.clone(),n?(l=n.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),l=l.div(l.norm()),a=n.mmul(l).div(l.transpose().mmul(l).get(0,0))):a=s;if(n){let t=e.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0));t=t.div(t.norm());let r=e.clone().sub(s.clone().mmul(t.transpose())),i=a.transpose().mmul(s).div(s.transpose().mmul(s).get(0,0)),o=n.clone().sub(s.clone().mulS(i.get(0,0)).mmul(l.transpose()));this.t=s,this.p=t.transpose(),this.w=c.transpose(),this.q=l,this.u=a,this.s=s.transpose().mmul(s),this.xResidual=r,this.yResidual=o,this.betas=i}else this.w=c.transpose(),this.s=s.transpose().mmul(s).sqrt(),this.t=r?s.clone().div(this.s.get(0,0)):s,this.xResidual=e.sub(s.mmul(c.transpose()))}}const src=Object.freeze(Object.defineProperty({__proto__:null,AbstractMatrix:AbstractMatrix,default:Matrix,Matrix:Matrix,wrap:wrap,WrapperMatrix1D:WrapperMatrix1D,WrapperMatrix2D:WrapperMatrix2D,solve:solve,inverse:inverse,determinant:determinant,linearDependencies:linearDependencies,pseudoInverse:pseudoInverse,covariance:covariance,correlation:correlation,SingularValueDecomposition:SingularValueDecomposition,SVD:SingularValueDecomposition,EigenvalueDecomposition:EigenvalueDecomposition,EVD:EigenvalueDecomposition,CholeskyDecomposition:CholeskyDecomposition,CHO:CholeskyDecomposition,LuDecomposition:LuDecomposition,LU:LuDecomposition,QrDecomposition:QrDecomposition,QR:QrDecomposition,Nipals:nipals,NIPALS:nipals,MatrixColumnView:MatrixColumnView,MatrixColumnSelectionView:MatrixColumnSelectionView,MatrixFlipColumnView:MatrixFlipColumnView,MatrixFlipRowView:MatrixFlipRowView,MatrixRowView:MatrixRowView,MatrixRowSelectionView:MatrixRowSelectionView,MatrixSelectionView:MatrixSelectionView,MatrixSubView:MatrixSubView,MatrixTransposeView:MatrixTransposeView},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(src);Object.defineProperty(mds$1,"__esModule",{value:!0});var ml_matrix_1$1=require$$0,MDS=function(){function e(e){this.distances=e.distances,this.dimension=e.dimension||2,this.linkDistance=e.linkDistance}return e.prototype.layout=function(){var e=this,t=e.dimension,n=e.distances,r=e.linkDistance;try{var i=ml_matrix_1$1.Matrix.mul(ml_matrix_1$1.Matrix.pow(n,2),-.5),o=i.mean("row"),a=i.mean("column"),s=i.mean();i.add(s).subRowVector(o).subColumnVector(a);var l=new ml_matrix_1$1.SingularValueDecomposition(i),c=ml_matrix_1$1.Matrix.sqrt(l.diagonalMatrix).diagonal();return l.leftSingularVectors.toJSON().map((function(e){return ml_matrix_1$1.Matrix.mul([e],[c]).toJSON()[0].splice(0,t)}))}catch(p){for(var u=[],h=0;h<n.length;h++){var d=Math.random()*r,f=Math.random()*r;u.push([d,f])}return u}},e}();mds$1.default=MDS;var radialNonoverlapForce={};Object.defineProperty(radialNonoverlapForce,"__esModule",{value:!0});var SPEED_DIVISOR$1=800,RadialNonoverlapForce=function(){function e(e){this.disp=[],this.positions=e.positions,this.adjMatrix=e.adjMatrix,this.focusID=e.focusID,this.radii=e.radii,this.iterations=e.iterations||10,this.height=e.height||10,this.width=e.width||10,this.speed=e.speed||100,this.gravity=e.gravity||10,this.nodeSizeFunc=e.nodeSizeFunc,this.k=e.k||5,this.strictRadial=e.strictRadial,this.nodes=e.nodes}return e.prototype.layout=function(){var e=this,t=e.positions,n=[],r=e.iterations,i=e.width/10;e.maxDisplace=i,e.disp=n;for(var o=0;o<r;o++)t.forEach((function(e,t){n[t]={x:0,y:0}})),e.getRepulsion(),e.updatePositions();return t},e.prototype.getRepulsion=function(){var e=this,t=e.positions,n=e.nodes,r=e.disp,i=e.k,o=e.radii||[];t.forEach((function(a,s){r[s]={x:0,y:0},t.forEach((function(t,l){if(s!==l&&o[s]===o[l]){var c=a[0]-t[0],u=a[1]-t[1],h=Math.sqrt(c*c+u*u);if(0===h){h=1;var d=s>l?1:-1;c=.01*d,u=.01*d}if(h<e.nodeSizeFunc(n[s])/2+e.nodeSizeFunc(n[l])/2){var f=i*i/h;r[s].x+=c/h*f,r[s].y+=u/h*f}}}))}))},e.prototype.updatePositions=function(){var e=this,t=e.positions,n=e.disp,r=e.speed,i=e.strictRadial,o=e.focusID,a=e.maxDisplace||e.width/10;i&&n.forEach((function(e,n){var r=t[n][0]-t[o][0],i=t[n][1]-t[o][1],a=Math.sqrt(r*r+i*i),s=i/a,l=-r/a,c=Math.sqrt(e.x*e.x+e.y*e.y),u=Math.acos((s*e.x+l*e.y)/c);u>Math.PI/2&&(u-=Math.PI/2,s*=-1,l*=-1);var h=Math.cos(u)*c;e.x=s*h,e.y=l*h}));var s=e.radii;t.forEach((function(e,l){if(l!==o){var c=Math.sqrt(n[l].x*n[l].x+n[l].y*n[l].y);if(c>0&&l!==o){var u=Math.min(a*(r/SPEED_DIVISOR$1),c);if(e[0]+=n[l].x/c*u,e[1]+=n[l].y/c*u,i){var h=e[0]-t[o][0],d=e[1]-t[o][1],f=Math.sqrt(h*h+d*d);h=h/f*s[l],d=d/f*s[l],e[0]=t[o][0]+h,e[1]=t[o][1]+d}}}}))},e}();radialNonoverlapForce.default=RadialNonoverlapForce;var __extends$l=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__importDefault$4=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(radial,"__esModule",{value:!0}),radial.RadialLayout=void 0;var util_1$7=requireUtil(),base_1$8=base$1,mds_1=__importDefault$4(mds$1),radialNonoverlapForce_1=__importDefault$4(radialNonoverlapForce);function getWeightMatrix(e){for(var t=e.length,n=e[0].length,r=[],i=0;i<t;i++){for(var o=[],a=0;a<n;a++)0!==e[i][a]?o.push(1/(e[i][a]*e[i][a])):o.push(0);r.push(o)}return r}function getIndexById(e,t){var n=-1;return e.forEach((function(e,r){e.id===t&&(n=r)})),n}function getEDistance(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var RadialLayout=function(e){function t(t){var n=e.call(this)||this;return n.maxIteration=1e3,n.focusNode=null,n.unitRadius=null,n.linkDistance=50,n.preventOverlap=!1,n.strictRadial=!0,n.maxPreventOverlapIteration=200,n.sortStrength=10,n.nodes=[],n.edges=[],n.updateCfg(t),n}return __extends$l(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges||[];if(t&&0!==t.length){e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]);var r=e.center;if(1===t.length)return t[0].x=r[0],t[0].y=r[1],void(e.onLayoutEnd&&e.onLayoutEnd());var i=e.linkDistance,o=null;if((0,util_1$7.isString)(e.focusNode)){for(var a=!1,s=0;s<t.length;s++)t[s].id===e.focusNode&&(o=t[s],e.focusNode=o,a=!0,s=t.length);a||(o=null)}else o=e.focusNode;o||(o=t[0],e.focusNode=o);var l=getIndexById(t,o.id);l<0&&(l=0),e.focusIndex=l;var c=(0,util_1$7.getAdjMatrix)({nodes:t,edges:n},!1),u=(0,util_1$7.floydWarshall)(c),h=e.maxToFocus(u,l);e.handleInfinity(u,l,h+1),e.distances=u;var d=u[l],f=e.width||500,p=e.height||500,g=f-r[0]>r[0]?r[0]:f-r[0],m=p-r[1]>r[1]?r[1]:p-r[1];0===g&&(g=f/2),0===m&&(m=p/2);var v=m>g?g:m,y=Math.max.apply(Math,d),b=[];d.forEach((function(t,n){e.unitRadius||(e.unitRadius=v/y),b[n]=t*e.unitRadius})),e.radii=b;var x=e.eIdealDisMatrix();e.eIdealDistances=x;var w=getWeightMatrix(x);e.weights=w;var _=new mds_1.default({linkDistance:i,distances:x}).layout();_.forEach((function(e){(0,util_1$7.isNaN)(e[0])&&(e[0]=Math.random()*i),(0,util_1$7.isNaN)(e[1])&&(e[1]=Math.random()*i)})),e.positions=_,_.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),_.forEach((function(e){e[0]-=_[l][0],e[1]-=_[l][1]})),e.run();var C,$=e.preventOverlap,S=e.nodeSize,E=e.strictRadial;if($){var A,M=e.nodeSpacing;A=(0,util_1$7.isNumber)(M)?function(){return M}:(0,util_1$7.isFunction)(M)?M:function(){return 0},C=S?(0,util_1$7.isArray)(S)?function(e){return(S[0]>S[1]?S[0]:S[1])+A(e)}:function(e){return S+A(e)}:function(e){return e.size?(0,util_1$7.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])+A(e):(0,util_1$7.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)+A(e):e.size+A(e):10+A(e)};var k={nodes:t,nodeSizeFunc:C,adjMatrix:c,positions:_,radii:b,height:p,width:f,strictRadial:E,focusID:l,iterations:e.maxPreventOverlapIteration||200,k:_.length/4.5},T=new radialNonoverlapForce_1.default(k);_=T.layout()}return _.forEach((function(e,n){t[n].x=e[0]+r[0],t[n].y=e[1]+r[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:n}}e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.run=function(){for(var e=this,t=e.maxIteration,n=e.positions||[],r=e.weights||[],i=e.eIdealDistances||[],o=e.radii||[],a=0;a<=t;a++){var s=a/t;e.oneIteration(s,n,o,i,r)}},t.prototype.oneIteration=function(e,t,n,r,i){var o=1-e,a=this.focusIndex;t.forEach((function(s,l){var c=getEDistance(s,[0,0]),u=0===c?0:1/c;if(l!==a){var h=0,d=0,f=0;t.forEach((function(e,t){if(l!==t){var n=getEDistance(s,e),o=0===n?0:1/n,a=r[t][l];f+=i[l][t],h+=i[l][t]*(e[0]+a*(s[0]-e[0])*o),d+=i[l][t]*(e[1]+a*(s[1]-e[1])*o)}}));var p=0===n[l]?0:1/n[l];f*=o,f+=e*p*p,h*=o,h+=e*p*s[0]*u,s[0]=h/f,d*=o,d+=e*p*s[1]*u,s[1]=d/f}}))},t.prototype.eIdealDisMatrix=function(){var e=this,t=e.nodes;if(!t)return[];var n=e.distances,r=e.linkDistance,i=e.radii||[],o=e.unitRadius||50,a=[];return n&&n.forEach((function(n,s){var l=[];n.forEach((function(n,a){if(s===a)l.push(0);else if(i[s]===i[a])if("data"===e.sortBy)l.push(n*(Math.abs(s-a)*e.sortStrength)/(i[s]/o));else if(e.sortBy){var c=t[s][e.sortBy]||0,u=t[a][e.sortBy]||0;(0,util_1$7.isString)(c)&&(c=c.charCodeAt(0)),(0,util_1$7.isString)(u)&&(u=u.charCodeAt(0)),l.push(n*(Math.abs(c-u)*e.sortStrength)/(i[s]/o))}else l.push(n*r/(i[s]/o));else{var h=(r+o)/2;l.push(n*h)}})),a.push(l)})),a},t.prototype.handleInfinity=function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(e[t][i]===1/0){e[t][i]=n,e[i][t]=n;for(var o=0;o<r;o++)e[i][o]!==1/0&&e[t][o]===1/0&&(e[t][o]=n+e[i][o],e[o][t]=n+e[i][o])}for(i=0;i<r;i++)if(i!==t)for(o=0;o<r;o++)if(e[i][o]===1/0){var a=Math.abs(e[t][i]-e[t][o]);a=0===a?1:a,e[i][o]=a}},t.prototype.maxToFocus=function(e,t){for(var n=0,r=0;r<e[t].length;r++)e[t][r]!==1/0&&(n=e[t][r]>n?e[t][r]:n);return n},t.prototype.getType=function(){return"radial"},t}(base_1$8.Base);radial.RadialLayout=RadialLayout,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(radial,e)}(radial$1);var concentric={},__extends$k=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(concentric,"__esModule",{value:!0}),concentric.ConcentricLayout=void 0;var util_1$6=requireUtil(),base_1$7=base$1,ConcentricLayout=function(e){function t(t){var n=e.call(this)||this;return n.nodeSize=30,n.minNodeSpacing=10,n.nodeSpacing=10,n.preventOverlap=!1,n.equidistant=!1,n.startAngle=1.5*Math.PI,n.clockwise=!0,n.sortBy="degree",n.nodes=[],n.edges=[],n.width=300,n.height=300,n.onLayoutEnd=function(){},n.updateCfg(t),n}return __extends$k(t,e),t.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},t.prototype.execute=function(){var e,t,n=this,r=n.nodes,i=n.edges,o=r.length;if(0!==o){n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),n.center||(n.center=[n.width/2,n.height/2]);var a=n.center;if(1===o)return r[0].x=a[0],r[0].y=a[1],void(null===(t=n.onLayoutEnd)||void 0===t||t.call(n));var s,l=n.nodeSize,c=n.nodeSpacing,u=[],h=0;s=(0,util_1$6.isArray)(l)?Math.max(l[0],l[1]):l,(0,util_1$6.isArray)(c)?h=Math.max(c[0],c[1]):(0,util_1$6.isNumber)(c)&&(h=c),r.forEach((function(e){u.push(e);var t=s;(0,util_1$6.isArray)(e.size)?t=Math.max(e.size[0],e.size[1]):(0,util_1$6.isNumber)(e.size)?t=e.size:(0,util_1$6.isObject)(e.size)&&(t=Math.max(e.size.width,e.size.height)),s=Math.max(s,t),(0,util_1$6.isFunction)(c)&&(h=Math.max(c(e),h))})),n.clockwise=void 0!==n.counterclockwise?!n.counterclockwise:n.clockwise;var d={},f={};if(u.forEach((function(e,t){d[e.id]=e,f[e.id]=t})),!("degree"!==n.sortBy&&(0,util_1$6.isString)(n.sortBy)&&void 0!==u[0][n.sortBy]||(n.sortBy="degree",(0,util_1$6.isNumber)(r[0].degree)))){var p=(0,util_1$6.getDegree)(r.length,f,i);u.forEach((function(e,t){e.degree=p[t].all}))}u.sort((function(e,t){return t[n.sortBy]-e[n.sortBy]})),n.maxValueNode=u[0],n.maxLevelDiff=n.maxLevelDiff||n.maxValueNode[n.sortBy]/4;var g=[[]],m=g[0];u.forEach((function(e){if(m.length>0){var t=Math.abs(m[0][n.sortBy]-e[n.sortBy]);n.maxLevelDiff&&t>=n.maxLevelDiff&&(m=[],g.push(m))}m.push(e)}));var v=s+(h||n.minNodeSpacing);if(!n.preventOverlap){var y=g.length>0&&g[0].length>1,b=(Math.min(n.width,n.height)/2-v)/(g.length+(y?1:0));v=Math.min(v,b)}var x=0;if(g.forEach((function(e){var t=n.sweep;void 0===t&&(t=2*Math.PI-2*Math.PI/e.length);var r=e.dTheta=t/Math.max(1,e.length-1);if(e.length>1&&n.preventOverlap){var i=Math.cos(r)-Math.cos(0),o=Math.sin(r)-Math.sin(0),a=Math.sqrt(v*v/(i*i+o*o));x=Math.max(a,x)}e.r=x,x+=v})),n.equidistant){for(var w=0,_=0,C=0;C<g.length;C++){var $=g[C].r-_;w=Math.max(w,$)}_=0,g.forEach((function(e,t){0===t&&(_=e.r),e.r=_,_+=w}))}return g.forEach((function(e){var t=e.dTheta,r=e.r;e.forEach((function(e,i){var o=n.startAngle+(n.clockwise?1:-1)*t*i;e.x=a[0]+r*Math.cos(o),e.y=a[1]+r*Math.sin(o)}))})),n.onLayoutEnd&&n.onLayoutEnd(),{nodes:r,edges:i}}null===(e=n.onLayoutEnd)||void 0===e||e.call(n)},t.prototype.getType=function(){return"concentric"},t}(base_1$7.Base);concentric.ConcentricLayout=ConcentricLayout;var mds={},__extends$j=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(mds,"__esModule",{value:!0}),mds.MDSLayout=void 0;var ml_matrix_1=require$$0,util_1$5=requireUtil(),base_1$6=base$1,MDSLayout=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.linkDistance=50,n.nodes=[],n.edges=[],n.onLayoutEnd=function(){},n.updateCfg(t),n}return __extends$j(t,e),t.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges,r=void 0===n?[]:n,i=e.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=i[0],t[0].y=i[1],void(e.onLayoutEnd&&e.onLayoutEnd());var o=e.linkDistance,a=(0,util_1$5.getAdjMatrix)({nodes:t,edges:r},!1),s=(0,util_1$5.floydWarshall)(a);e.handleInfinity(s);var l=(0,util_1$5.scaleMatrix)(s,o);e.scaledDistances=l;var c=e.runMDS();return e.positions=c,c.forEach((function(e,n){t[n].x=e[0]+i[0],t[n].y=e[1]+i[1]})),e.onLayoutEnd&&e.onLayoutEnd(),{nodes:t,edges:r}}e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.runMDS=function(){var e=this.scaledDistances,t=ml_matrix_1.Matrix.mul(ml_matrix_1.Matrix.pow(e,2),-.5),n=t.mean("row"),r=t.mean("column"),i=t.mean();t.add(i).subRowVector(n).subColumnVector(r);var o=new ml_matrix_1.SingularValueDecomposition(t),a=ml_matrix_1.Matrix.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map((function(e){return ml_matrix_1.Matrix.mul([e],[a]).toJSON()[0].splice(0,2)}))},t.prototype.handleInfinity=function(e){var t=-999999;e.forEach((function(e){e.forEach((function(e){e!==1/0&&t<e&&(t=e)}))})),e.forEach((function(n,r){n.forEach((function(n,i){n===1/0&&(e[r][i]=t)}))}))},t.prototype.getType=function(){return"mds"},t}(base_1$6.Base);mds.MDSLayout=MDSLayout;var fruchterman$1={},__extends$i=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(fruchterman$1,"__esModule",{value:!0}),fruchterman$1.FruchtermanLayout=void 0;var base_1$5=base$1,util_1$4=requireUtil(),SPEED_DIVISOR=800,FruchtermanLayout=function(e){function t(t){var n=e.call(this)||this;return n.maxIteration=1e3,n.workerEnabled=!1,n.gravity=10,n.speed=5,n.clustering=!1,n.clusterGravity=10,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.onLayoutEnd=function(){},n.tick=function(){},n.animate=!0,n.updateCfg(t),n}return __extends$i(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},t.prototype.execute=function(){var e,t,n=this,r=this,i=r.nodes;if(void 0!==r.timeInterval&&"undefined"!=typeof window&&window.clearInterval(r.timeInterval),i&&0!==i.length){r.width||"undefined"==typeof window||(r.width=window.innerWidth),r.height||"undefined"==typeof window||(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);var o=r.center;if(1===i.length)return i[0].x=o[0],i[0].y=o[1],void(null===(t=r.onLayoutEnd)||void 0===t||t.call(r));var a={},s={};return i.forEach((function(e,t){(0,util_1$4.isNumber)(e.x)||(e.x=Math.random()*n.width),(0,util_1$4.isNumber)(e.y)||(e.y=Math.random()*n.height),a[e.id]=e,s[e.id]=t})),r.nodeMap=a,r.nodeIdxMap=s,r.run()}null===(e=r.onLayoutEnd)||void 0===e||e.call(r)},t.prototype.run=function(){var e,t=this,n=t.nodes;if(n){var r=t.edges,i=t.maxIteration,o=t.workerEnabled,a=t.clustering,s=t.animate,l={};if(a&&n.forEach((function(e){void 0===l[e.cluster]&&(l[e.cluster]={name:e.cluster,cx:0,cy:0,count:0})})),o||!s){for(var c=0;c<i;c++)t.runOneStep(l);null===(e=t.onLayoutEnd)||void 0===e||e.call(t)}else{if("undefined"==typeof window)return;var u=0;this.timeInterval=window.setInterval((function(){var e;t.runOneStep(l),++u>=i&&(null===(e=t.onLayoutEnd)||void 0===e||e.call(t),window.clearInterval(t.timeInterval))}),0)}return{nodes:n,edges:r}}},t.prototype.runOneStep=function(e){var t,n=this,r=n.nodes;if(r){var i=n.edges,o=n.center,a=n.gravity,s=n.speed,l=n.clustering,c=n.height*n.width,u=Math.sqrt(c)/10,h=c/(r.length+1),d=Math.sqrt(h),f=[];if(r.forEach((function(e,t){f[t]={x:0,y:0}})),n.applyCalculate(r,i,f,d,h),l){for(var p in e)e[p].cx=0,e[p].cy=0,e[p].count=0;for(var p in r.forEach((function(t){var n=e[t.cluster];(0,util_1$4.isNumber)(t.x)&&(n.cx+=t.x),(0,util_1$4.isNumber)(t.y)&&(n.cy+=t.y),n.count++})),e)e[p].cx/=e[p].count,e[p].cy/=e[p].count;var g=n.clusterGravity||a;r.forEach((function(t,n){if((0,util_1$4.isNumber)(t.x)&&(0,util_1$4.isNumber)(t.y)){var r=e[t.cluster],i=Math.sqrt((t.x-r.cx)*(t.x-r.cx)+(t.y-r.cy)*(t.y-r.cy)),o=d*g;f[n].x-=o*(t.x-r.cx)/i,f[n].y-=o*(t.y-r.cy)/i}}))}r.forEach((function(e,t){if((0,util_1$4.isNumber)(e.x)&&(0,util_1$4.isNumber)(e.y)){var n=.01*d*a;f[t].x-=n*(e.x-o[0]),f[t].y-=n*(e.y-o[1])}})),r.forEach((function(e,t){if((0,util_1$4.isNumber)(e.fx)&&(0,util_1$4.isNumber)(e.fy))return e.x=e.fx,void(e.y=e.fy);if((0,util_1$4.isNumber)(e.x)&&(0,util_1$4.isNumber)(e.y)){var n=Math.sqrt(f[t].x*f[t].x+f[t].y*f[t].y);if(n>0){var r=Math.min(u*(s/SPEED_DIVISOR),n);e.x+=f[t].x/n*r,e.y+=f[t].y/n*r}}})),null===(t=n.tick)||void 0===t||t.call(n)}},t.prototype.applyCalculate=function(e,t,n,r,i){this.calRepulsive(e,n,i),t&&this.calAttractive(t,n,r)},t.prototype.calRepulsive=function(e,t,n){e.forEach((function(r,i){t[i]={x:0,y:0},e.forEach((function(e,o){if(i!==o&&(0,util_1$4.isNumber)(r.x)&&(0,util_1$4.isNumber)(e.x)&&(0,util_1$4.isNumber)(r.y)&&(0,util_1$4.isNumber)(e.y)){var a=r.x-e.x,s=r.y-e.y,l=a*a+s*s;if(0===l){l=1;var c=i>o?1:-1;a=.01*c,s=.01*c}var u=n/l;t[i].x+=a*u,t[i].y+=s*u}}))}))},t.prototype.calAttractive=function(e,t,n){var r=this;e.forEach((function(e){var i=(0,util_1$4.getEdgeTerminal)(e,"source"),o=(0,util_1$4.getEdgeTerminal)(e,"target");if(i&&o){var a=r.nodeIdxMap[i],s=r.nodeIdxMap[o];if(a!==s){var l=r.nodeMap[i],c=r.nodeMap[o];if((0,util_1$4.isNumber)(c.x)&&(0,util_1$4.isNumber)(l.x)&&(0,util_1$4.isNumber)(c.y)&&(0,util_1$4.isNumber)(l.y)){var u=c.x-l.x,h=c.y-l.y,d=Math.sqrt(u*u+h*h),f=d*d/n;t[s].x-=u/d*f,t[s].y-=h/d*f,t[a].x+=u/d*f,t[a].y+=h/d*f}}}}))},t.prototype.stop=function(){this.timeInterval&&"undefined"!=typeof window&&window.clearInterval(this.timeInterval)},t.prototype.destroy=function(){var e=this;e.stop(),e.tick=null,e.nodes=null,e.edges=null,e.destroyed=!0},t.prototype.getType=function(){return"fruchterman"},t}(base_1$5.Base);fruchterman$1.FruchtermanLayout=FruchtermanLayout;var fruchterman={};function asyncGeneratorStep(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){asyncGeneratorStep(o,r,i,a,s,"next",e)}function s(e){asyncGeneratorStep(o,r,i,a,s,"throw",e)}a(void 0)}))}}function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toPrimitive(e,t){if("object"!==_typeof$2(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_typeof$2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof$2(t)?t:String(t)}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_toPropertyKey(r.key),r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var freeGlobal$1="object"==typeof commonjsGlobal&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,_freeGlobal=freeGlobal$1,freeGlobal=_freeGlobal,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root$1=freeGlobal||freeSelf||Function("return this")(),_root=root$1,root=_root,Symbol$3=root.Symbol,_Symbol=Symbol$3,Symbol$2=_Symbol,objectProto$2=Object.prototype,hasOwnProperty$1=objectProto$2.hasOwnProperty,nativeObjectToString$1=objectProto$2.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag$1(e){var t=hasOwnProperty$1.call(e,symToStringTag$1),n=e[symToStringTag$1];try{e[symToStringTag$1]=void 0;var r=!0}catch(e11){}var i=nativeObjectToString$1.call(e);return r&&(t?e[symToStringTag$1]=n:delete e[symToStringTag$1]),i}var _getRawTag=getRawTag$1,objectProto$1=Object.prototype,nativeObjectToString=objectProto$1.toString;function objectToString$1(e){return nativeObjectToString.call(e)}var _objectToString=objectToString$1,Symbol$1=_Symbol,getRawTag=_getRawTag,objectToString=_objectToString,nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag$3(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(e)?getRawTag(e):objectToString(e)}var _baseGetTag=baseGetTag$3,MAX_SAFE_INTEGER=9007199254740991;function isLength$1(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=MAX_SAFE_INTEGER}var isLength_1=isLength$1;function isObjectLike$3(e){return null!=e&&"object"==typeof e}var isObjectLike_1=isObjectLike$3,baseGetTag$2=_baseGetTag,isLength=isLength_1,isObjectLike$2=isObjectLike_1,argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray$1(e){return isObjectLike$2(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag$2(e)]}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var _baseIsTypedArray=baseIsTypedArray$1;function baseUnary$1(e){return function(t){return e(t)}}var _baseUnary=baseUnary$1,_nodeUtil={exports:{}};!function(e,t){var n=_freeGlobal,r=t&&!t.nodeType&&t,i=r&&e&&!e.nodeType&&e,o=i&&i.exports===r&&n.process,a=function(){try{var e=i&&i.require&&i.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(e11){}}();e.exports=a}(_nodeUtil,_nodeUtil.exports);var baseIsTypedArray=_baseIsTypedArray,baseUnary=_baseUnary,nodeUtil=_nodeUtil.exports,nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,isTypedArray_1=isTypedArray,baseGetTag$1=_baseGetTag,isObjectLike$1=isObjectLike_1,numberTag="[object Number]";function isNumber(e){return"number"==typeof e||isObjectLike$1(e)&&baseGetTag$1(e)==numberTag}var isNumber_1=isNumber,isArray=Array.isArray,isArray_1=isArray,regeneratorRuntime$1={exports:{}},_typeof$1={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_typeof$1),function(e){var t=_typeof$1.exports.default;function n(){e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},i=Object.prototype,o=i.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function h(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(err){h=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var i=t&&t.prototype instanceof g?t:g,o=Object.create(i.prototype),s=new M(r||[]);return a(o,"_invoke",{value:$(e,n,s)}),o}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(err){return{type:"throw",arg:err}}}r.wrap=d;var p={};function g(){}function m(){}function v(){}var y={};h(y,l,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(k([])));x&&x!==i&&o.call(x,l)&&(y=x);var w=v.prototype=g.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function C(e,n){function r(i,a,s,l){var c=f(e[i],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==t(h)&&o.call(h,"__await")?n.resolve(h.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):n.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}var i;a(this,"_invoke",{value:function(e,t){function o(){return new n((function(n,i){r(e,t,n,i)}))}return i=i?i.then(o,o):o()}})}function $(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=f(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:T}}function T(){return{value:void 0,done:!0}}return m.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:m,configurable:!0}),m.displayName=h(v,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,h(e,u,"GeneratorFunction")),e.prototype=Object.create(w),e},r.awrap=function(e){return{__await:e}},_(C.prototype),h(C.prototype,c,(function(){return this})),r.AsyncIterator=C,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new C(d(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),h(w,u,"Generator"),h(w,l,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},r.values=k,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(regeneratorRuntime$1);var runtime=regeneratorRuntime$1.exports(),regenerator=runtime;try{regeneratorRuntime=runtime}catch(accidentalStrictMode){"object"==typeof globalThis?globalThis.regeneratorRuntime=runtime:Function("r","regeneratorRuntime = r")(runtime)}var entitySequence=1,gl$1,gl2;function createEntity(){return entitySequence++}gl2=gl$1||(gl$1={}),gl2[gl2.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",gl2[gl2.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",gl2[gl2.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",gl2[gl2.POINTS=0]="POINTS",gl2[gl2.LINES=1]="LINES",gl2[gl2.LINE_LOOP=2]="LINE_LOOP",gl2[gl2.LINE_STRIP=3]="LINE_STRIP",gl2[gl2.TRIANGLES=4]="TRIANGLES",gl2[gl2.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",gl2[gl2.TRIANGLE_FAN=6]="TRIANGLE_FAN",gl2[gl2.ZERO=0]="ZERO",gl2[gl2.ONE=1]="ONE",gl2[gl2.SRC_COLOR=768]="SRC_COLOR",gl2[gl2.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",gl2[gl2.SRC_ALPHA=770]="SRC_ALPHA",gl2[gl2.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",gl2[gl2.DST_ALPHA=772]="DST_ALPHA",gl2[gl2.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",gl2[gl2.DST_COLOR=774]="DST_COLOR",gl2[gl2.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",gl2[gl2.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",gl2[gl2.FUNC_ADD=32774]="FUNC_ADD",gl2[gl2.BLEND_EQUATION=32777]="BLEND_EQUATION",gl2[gl2.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",gl2[gl2.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",gl2[gl2.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",gl2[gl2.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",gl2[gl2.MAX_EXT=32776]="MAX_EXT",gl2[gl2.MIN_EXT=32775]="MIN_EXT",gl2[gl2.BLEND_DST_RGB=32968]="BLEND_DST_RGB",gl2[gl2.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",gl2[gl2.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",gl2[gl2.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",gl2[gl2.CONSTANT_COLOR=32769]="CONSTANT_COLOR",gl2[gl2.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",gl2[gl2.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",gl2[gl2.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",gl2[gl2.BLEND_COLOR=32773]="BLEND_COLOR",gl2[gl2.ARRAY_BUFFER=34962]="ARRAY_BUFFER",gl2[gl2.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",gl2[gl2.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",gl2[gl2.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",gl2[gl2.STREAM_DRAW=35040]="STREAM_DRAW",gl2[gl2.STATIC_DRAW=35044]="STATIC_DRAW",gl2[gl2.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",gl2[gl2.BUFFER_SIZE=34660]="BUFFER_SIZE",gl2[gl2.BUFFER_USAGE=34661]="BUFFER_USAGE",gl2[gl2.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",gl2[gl2.FRONT=1028]="FRONT",gl2[gl2.BACK=1029]="BACK",gl2[gl2.FRONT_AND_BACK=1032]="FRONT_AND_BACK",gl2[gl2.CULL_FACE=2884]="CULL_FACE",gl2[gl2.BLEND=3042]="BLEND",gl2[gl2.DITHER=3024]="DITHER",gl2[gl2.STENCIL_TEST=2960]="STENCIL_TEST",gl2[gl2.DEPTH_TEST=2929]="DEPTH_TEST",gl2[gl2.SCISSOR_TEST=3089]="SCISSOR_TEST",gl2[gl2.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",gl2[gl2.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",gl2[gl2.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",gl2[gl2.NO_ERROR=0]="NO_ERROR",gl2[gl2.INVALID_ENUM=1280]="INVALID_ENUM",gl2[gl2.INVALID_VALUE=1281]="INVALID_VALUE",gl2[gl2.INVALID_OPERATION=1282]="INVALID_OPERATION",gl2[gl2.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",gl2[gl2.CW=2304]="CW",gl2[gl2.CCW=2305]="CCW",gl2[gl2.LINE_WIDTH=2849]="LINE_WIDTH",gl2[gl2.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",gl2[gl2.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",gl2[gl2.CULL_FACE_MODE=2885]="CULL_FACE_MODE",gl2[gl2.FRONT_FACE=2886]="FRONT_FACE",gl2[gl2.DEPTH_RANGE=2928]="DEPTH_RANGE",gl2[gl2.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",gl2[gl2.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",gl2[gl2.DEPTH_FUNC=2932]="DEPTH_FUNC",gl2[gl2.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",gl2[gl2.STENCIL_FUNC=2962]="STENCIL_FUNC",gl2[gl2.STENCIL_FAIL=2964]="STENCIL_FAIL",gl2[gl2.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",gl2[gl2.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",gl2[gl2.STENCIL_REF=2967]="STENCIL_REF",gl2[gl2.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",gl2[gl2.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",gl2[gl2.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",gl2[gl2.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",gl2[gl2.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",gl2[gl2.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",gl2[gl2.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",gl2[gl2.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",gl2[gl2.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",gl2[gl2.VIEWPORT=2978]="VIEWPORT",gl2[gl2.SCISSOR_BOX=3088]="SCISSOR_BOX",gl2[gl2.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",gl2[gl2.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",gl2[gl2.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",gl2[gl2.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",gl2[gl2.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",gl2[gl2.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",gl2[gl2.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",gl2[gl2.RED_BITS=3410]="RED_BITS",gl2[gl2.GREEN_BITS=3411]="GREEN_BITS",gl2[gl2.BLUE_BITS=3412]="BLUE_BITS",gl2[gl2.ALPHA_BITS=3413]="ALPHA_BITS",gl2[gl2.DEPTH_BITS=3414]="DEPTH_BITS",gl2[gl2.STENCIL_BITS=3415]="STENCIL_BITS",gl2[gl2.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",gl2[gl2.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",gl2[gl2.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",gl2[gl2.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",gl2[gl2.SAMPLES=32937]="SAMPLES",gl2[gl2.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",gl2[gl2.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",gl2[gl2.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",gl2[gl2.DONT_CARE=4352]="DONT_CARE",gl2[gl2.FASTEST=4353]="FASTEST",gl2[gl2.NICEST=4354]="NICEST",gl2[gl2.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",gl2[gl2.BYTE=5120]="BYTE",gl2[gl2.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",gl2[gl2.SHORT=5122]="SHORT",gl2[gl2.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",gl2[gl2.INT=5124]="INT",gl2[gl2.UNSIGNED_INT=5125]="UNSIGNED_INT",gl2[gl2.FLOAT=5126]="FLOAT",gl2[gl2.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",gl2[gl2.ALPHA=6406]="ALPHA",gl2[gl2.RGB=6407]="RGB",gl2[gl2.RGBA=6408]="RGBA",gl2[gl2.LUMINANCE=6409]="LUMINANCE",gl2[gl2.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",gl2[gl2.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",gl2[gl2.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",gl2[gl2.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",gl2[gl2.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",gl2[gl2.VERTEX_SHADER=35633]="VERTEX_SHADER",gl2[gl2.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",gl2[gl2.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",gl2[gl2.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",gl2[gl2.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",gl2[gl2.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",gl2[gl2.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",gl2[gl2.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",gl2[gl2.SHADER_TYPE=35663]="SHADER_TYPE",gl2[gl2.DELETE_STATUS=35712]="DELETE_STATUS",gl2[gl2.LINK_STATUS=35714]="LINK_STATUS",gl2[gl2.VALIDATE_STATUS=35715]="VALIDATE_STATUS",gl2[gl2.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",gl2[gl2.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",gl2[gl2.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",gl2[gl2.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",gl2[gl2.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",gl2[gl2.NEVER=512]="NEVER",gl2[gl2.LESS=513]="LESS",gl2[gl2.EQUAL=514]="EQUAL",gl2[gl2.LEQUAL=515]="LEQUAL",gl2[gl2.GREATER=516]="GREATER",gl2[gl2.NOTEQUAL=517]="NOTEQUAL",gl2[gl2.GEQUAL=518]="GEQUAL",gl2[gl2.ALWAYS=519]="ALWAYS",gl2[gl2.KEEP=7680]="KEEP",gl2[gl2.REPLACE=7681]="REPLACE",gl2[gl2.INCR=7682]="INCR",gl2[gl2.DECR=7683]="DECR",gl2[gl2.INVERT=5386]="INVERT",gl2[gl2.INCR_WRAP=34055]="INCR_WRAP",gl2[gl2.DECR_WRAP=34056]="DECR_WRAP",gl2[gl2.VENDOR=7936]="VENDOR",gl2[gl2.RENDERER=7937]="RENDERER",gl2[gl2.VERSION=7938]="VERSION",gl2[gl2.NEAREST=9728]="NEAREST",gl2[gl2.LINEAR=9729]="LINEAR",gl2[gl2.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",gl2[gl2.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",gl2[gl2.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",gl2[gl2.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",gl2[gl2.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",gl2[gl2.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",gl2[gl2.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",gl2[gl2.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",gl2[gl2.TEXTURE_2D=3553]="TEXTURE_2D",gl2[gl2.TEXTURE=5890]="TEXTURE",gl2[gl2.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",gl2[gl2.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",gl2[gl2.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",gl2[gl2.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",gl2[gl2.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",gl2[gl2.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",gl2[gl2.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",gl2[gl2.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",gl2[gl2.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",gl2[gl2.TEXTURE0=33984]="TEXTURE0",gl2[gl2.TEXTURE1=33985]="TEXTURE1",gl2[gl2.TEXTURE2=33986]="TEXTURE2",gl2[gl2.TEXTURE3=33987]="TEXTURE3",gl2[gl2.TEXTURE4=33988]="TEXTURE4",gl2[gl2.TEXTURE5=33989]="TEXTURE5",gl2[gl2.TEXTURE6=33990]="TEXTURE6",gl2[gl2.TEXTURE7=33991]="TEXTURE7",gl2[gl2.TEXTURE8=33992]="TEXTURE8",gl2[gl2.TEXTURE9=33993]="TEXTURE9",gl2[gl2.TEXTURE10=33994]="TEXTURE10",gl2[gl2.TEXTURE11=33995]="TEXTURE11",gl2[gl2.TEXTURE12=33996]="TEXTURE12",gl2[gl2.TEXTURE13=33997]="TEXTURE13",gl2[gl2.TEXTURE14=33998]="TEXTURE14",gl2[gl2.TEXTURE15=33999]="TEXTURE15",gl2[gl2.TEXTURE16=34e3]="TEXTURE16",gl2[gl2.TEXTURE17=34001]="TEXTURE17",gl2[gl2.TEXTURE18=34002]="TEXTURE18",gl2[gl2.TEXTURE19=34003]="TEXTURE19",gl2[gl2.TEXTURE20=34004]="TEXTURE20",gl2[gl2.TEXTURE21=34005]="TEXTURE21",gl2[gl2.TEXTURE22=34006]="TEXTURE22",gl2[gl2.TEXTURE23=34007]="TEXTURE23",gl2[gl2.TEXTURE24=34008]="TEXTURE24",gl2[gl2.TEXTURE25=34009]="TEXTURE25",gl2[gl2.TEXTURE26=34010]="TEXTURE26",gl2[gl2.TEXTURE27=34011]="TEXTURE27",gl2[gl2.TEXTURE28=34012]="TEXTURE28",gl2[gl2.TEXTURE29=34013]="TEXTURE29",gl2[gl2.TEXTURE30=34014]="TEXTURE30",gl2[gl2.TEXTURE31=34015]="TEXTURE31",gl2[gl2.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",gl2[gl2.REPEAT=10497]="REPEAT",gl2[gl2.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",gl2[gl2.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",gl2[gl2.FLOAT_VEC2=35664]="FLOAT_VEC2",gl2[gl2.FLOAT_VEC3=35665]="FLOAT_VEC3",gl2[gl2.FLOAT_VEC4=35666]="FLOAT_VEC4",gl2[gl2.INT_VEC2=35667]="INT_VEC2",gl2[gl2.INT_VEC3=35668]="INT_VEC3",gl2[gl2.INT_VEC4=35669]="INT_VEC4",gl2[gl2.BOOL=35670]="BOOL",gl2[gl2.BOOL_VEC2=35671]="BOOL_VEC2",gl2[gl2.BOOL_VEC3=35672]="BOOL_VEC3",gl2[gl2.BOOL_VEC4=35673]="BOOL_VEC4",gl2[gl2.FLOAT_MAT2=35674]="FLOAT_MAT2",gl2[gl2.FLOAT_MAT3=35675]="FLOAT_MAT3",gl2[gl2.FLOAT_MAT4=35676]="FLOAT_MAT4",gl2[gl2.SAMPLER_2D=35678]="SAMPLER_2D",gl2[gl2.SAMPLER_CUBE=35680]="SAMPLER_CUBE",gl2[gl2.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",gl2[gl2.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",gl2[gl2.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",gl2[gl2.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",gl2[gl2.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",gl2[gl2.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",gl2[gl2.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",gl2[gl2.COMPILE_STATUS=35713]="COMPILE_STATUS",gl2[gl2.LOW_FLOAT=36336]="LOW_FLOAT",gl2[gl2.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",gl2[gl2.HIGH_FLOAT=36338]="HIGH_FLOAT",gl2[gl2.LOW_INT=36339]="LOW_INT",gl2[gl2.MEDIUM_INT=36340]="MEDIUM_INT",gl2[gl2.HIGH_INT=36341]="HIGH_INT",gl2[gl2.FRAMEBUFFER=36160]="FRAMEBUFFER",gl2[gl2.RENDERBUFFER=36161]="RENDERBUFFER",gl2[gl2.RGBA4=32854]="RGBA4",gl2[gl2.RGB5_A1=32855]="RGB5_A1",gl2[gl2.RGB565=36194]="RGB565",gl2[gl2.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",gl2[gl2.STENCIL_INDEX=6401]="STENCIL_INDEX",gl2[gl2.STENCIL_INDEX8=36168]="STENCIL_INDEX8",gl2[gl2.DEPTH_STENCIL=34041]="DEPTH_STENCIL",gl2[gl2.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",gl2[gl2.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",gl2[gl2.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",gl2[gl2.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",gl2[gl2.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",gl2[gl2.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",gl2[gl2.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",gl2[gl2.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",gl2[gl2.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",gl2[gl2.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",gl2[gl2.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",gl2[gl2.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",gl2[gl2.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",gl2[gl2.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",gl2[gl2.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",gl2[gl2.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",gl2[gl2.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",gl2[gl2.NONE=0]="NONE",gl2[gl2.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",gl2[gl2.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",gl2[gl2.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",gl2[gl2.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",gl2[gl2.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",gl2[gl2.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",gl2[gl2.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",gl2[gl2.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",gl2[gl2.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",gl2[gl2.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",gl2[gl2.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",gl2[gl2.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",gl2[gl2.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",gl2[gl2.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",gl2[gl2.COPY_SRC=1]="COPY_SRC",gl2[gl2.COPY_DST=2]="COPY_DST",gl2[gl2.SAMPLED=4]="SAMPLED",gl2[gl2.STORAGE=8]="STORAGE",gl2[gl2.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT";var ConfigService=function(){function e(){_classCallCheck(this,e),this.config=void 0}return _createClass(e,[{key:"get",value:function(){return this.config}},{key:"set",value:function(e){this.config=e}}]),e}(),AST_TOKEN_TYPES,AST_TOKEN_TYPES2,AST_NODE_TYPES,AST_NODE_TYPES2,STORAGE_CLASS,STORAGE_CLASS2,Target,Target2;"undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),AST_TOKEN_TYPES2=AST_TOKEN_TYPES||(AST_TOKEN_TYPES={}),AST_TOKEN_TYPES2.Void="Void",AST_TOKEN_TYPES2.Boolean="Boolean",AST_TOKEN_TYPES2.Float="Float",AST_TOKEN_TYPES2.Uint32="Uint32",AST_TOKEN_TYPES2.Int32="Int32",AST_TOKEN_TYPES2.Vector="Vector",AST_TOKEN_TYPES2.Vector2Float="vec2<f32>",AST_TOKEN_TYPES2.Vector3Float="vec3<f32>",AST_TOKEN_TYPES2.Vector4Float="vec4<f32>",AST_TOKEN_TYPES2.Vector2Boolean="vec2<bool>",AST_TOKEN_TYPES2.Vector3Boolean="vec3<bool>",AST_TOKEN_TYPES2.Vector4Boolean="vec4<bool>",AST_TOKEN_TYPES2.Vector2Uint="vec2<u32>",AST_TOKEN_TYPES2.Vector3Uint="vec3<u32>",AST_TOKEN_TYPES2.Vector4Uint="vec4<u32>",AST_TOKEN_TYPES2.Vector2Int="vec2<i32>",AST_TOKEN_TYPES2.Vector3Int="vec3<i32>",AST_TOKEN_TYPES2.Vector4Int="vec4<i32>",AST_TOKEN_TYPES2.Matrix="Matrix",AST_TOKEN_TYPES2.Matrix3x3Float="mat3x3<f32>",AST_TOKEN_TYPES2.Matrix4x4Float="mat4x4<i32>",AST_TOKEN_TYPES2.Struct="Struct",AST_TOKEN_TYPES2.FloatArray="Float[]",AST_TOKEN_TYPES2.Vector4FloatArray="vec4<f32>[]",AST_NODE_TYPES2=AST_NODE_TYPES||(AST_NODE_TYPES={}),AST_NODE_TYPES2.Program="Program",AST_NODE_TYPES2.Identifier="Identifier",AST_NODE_TYPES2.VariableDeclaration="VariableDeclaration",AST_NODE_TYPES2.BlockStatement="BlockStatement",AST_NODE_TYPES2.ReturnStatement="ReturnStatement",AST_NODE_TYPES2.FunctionDeclaration="FunctionDeclaration",AST_NODE_TYPES2.VariableDeclarator="VariableDeclarator",AST_NODE_TYPES2.AssignmentExpression="AssignmentExpression",AST_NODE_TYPES2.LogicalExpression="LogicalExpression",AST_NODE_TYPES2.BinaryExpression="BinaryExpression",AST_NODE_TYPES2.ArrayExpression="ArrayExpression",AST_NODE_TYPES2.UnaryExpression="UnaryExpression",AST_NODE_TYPES2.UpdateExpression="UpdateExpression",AST_NODE_TYPES2.FunctionExpression="FunctionExpression",AST_NODE_TYPES2.MemberExpression="MemberExpression",AST_NODE_TYPES2.ConditionalExpression="ConditionalExpression",AST_NODE_TYPES2.ExpressionStatement="ExpressionStatement",AST_NODE_TYPES2.CallExpression="CallExpression",AST_NODE_TYPES2.NumThreadStatement="NumThreadStatement",AST_NODE_TYPES2.StorageStatement="StorageStatement",AST_NODE_TYPES2.DoWhileStatement="DoWhileStatement",AST_NODE_TYPES2.WhileStatement="WhileStatement",AST_NODE_TYPES2.ForStatement="ForStatement",AST_NODE_TYPES2.BreakStatement="BreakStatement",AST_NODE_TYPES2.ContinueStatement="ContinueStatement",AST_NODE_TYPES2.IfStatement="IfStatement",AST_NODE_TYPES2.ImportedFunctionStatement="ImportedFunctionStatement",STORAGE_CLASS2=STORAGE_CLASS||(STORAGE_CLASS={}),STORAGE_CLASS2.Input="Input",STORAGE_CLASS2.Output="Output",STORAGE_CLASS2.Uniform="Uniform",STORAGE_CLASS2.Workgroup="Workgroup",STORAGE_CLASS2.UniformConstant="UniformConstant",STORAGE_CLASS2.Image="Image",STORAGE_CLASS2.StorageBuffer="StorageBuffer",STORAGE_CLASS2.Private="Private",STORAGE_CLASS2.Function="Function",Target2=Target||(Target={}),Target2.GLSL100="GLSL100",Target2.GLSL450="GLSL450",Target2.WGSL="WGSL";var DefineValuePlaceholder="__DefineValuePlaceholder__";function createCanvas(){if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ownKeys$2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread$2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$2(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kernel=function(){function e(t,n){_classCallCheck(this,e),this.engine=t,this.configService=n,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}var t,n,r;return _createClass(e,[{key:"init",value:function(){var e=this.configService.get(),t=e.canvas,n=e.engineOptions;this.initPromise=this.engine.init(_objectSpread$2({canvas:t||createCanvas(),antialiasing:!1},n))}},{key:"setBundle",value:function(e){this.compiledBundle=JSON.parse(JSON.stringify(e))}},{key:"setDispatch",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=e),this}},{key:"setMaxIteration",value:function(e){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=e),this}},{key:"setBinding",value:function(e,t){var n=this;if("string"==typeof e){var r=isNumber_1(t)||isTypedArray_1(t)||isArray_1(t);if(this.compiledBundle&&this.compiledBundle.context){var i=this.compiledBundle.context.defines.find((function(t){return t.name===e}));if(i)return i.value=t,this;var o=this.compiledBundle.context.uniforms.find((function(t){return t.name===e}));o&&(r?(o.data=t,o.isReferer=!1,o.storageClass===STORAGE_CLASS.Uniform?this.model&&this.model.updateUniform(e,t):this.model&&this.model.updateBuffer(e,t)):(o.isReferer=!0,o.data=t))}}else Object.keys(e).forEach((function(t){n.setBinding(t,e[t])}));return this}},{key:"execute",value:(r=_asyncToGenerator(regenerator.mark((function e(){var t,n,r=this,i=arguments;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:1,!this.dirty){e.next=6;break}return this.compiledBundle.context&&(t>1?this.compiledBundle.context.maxIteration=t:this.compiledBundle.context.maxIteration++),e.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter((function(e){return e.isReferer})).forEach((function(e){var t=e.data,n=e.name;r.model.confirmInput(t.model,n)})),n=0;n<t;n++)this.model.run();return this.engine.endFrame(),e.abrupt("return",this);case 12:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getOutput",value:(n=_asyncToGenerator(regenerator.mark((function e(){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.model.readData());case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"compile",value:(t=_asyncToGenerator(regenerator.mark((function e(){var t,n,r;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:return t=_objectSpread$2({},this.compiledBundle.context),n=this.engine.supportWebGPU?this.engine.useWGSL?Target.WGSL:Target.GLSL450:Target.GLSL100,r=this.compiledBundle.shaders[n],t.defines.filter((function(e){return e.runtime})).forEach((function(e){var t="".concat(DefineValuePlaceholder).concat(e.name);r=r.replace(t,"".concat(e.value))})),t.shader=r,t.uniforms.forEach((function(e){if(!e.data&&e.storageClass===STORAGE_CLASS.StorageBuffer){var n=1;e.type===AST_TOKEN_TYPES.FloatArray?n=1:e.type===AST_TOKEN_TYPES.Vector4FloatArray&&(n=4),e.data=new Float32Array(t.output.length*n).fill(0)}})),this.compiledBundle.context=t,e.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=e.sent;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}(),regl$1={exports:{}};regl$1.exports=function(){var e=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},t=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},n="\n";function r(e){return"undefined"!=typeof atob?atob(e):"base64:"+e}function i(e){throw new Error("(regl) "+e)}function o(e,t){e||i(t)}function a(e){return e?": "+e:""}function s(e,t,n){e in t||i("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join())}function l(t,n){e(t)||i("invalid parameter type"+a(n)+". must be a typed array")}function c(e,t){switch(t){case"number":return"number"==typeof e;case"object":return"object"==typeof e;case"string":return"string"==typeof e;case"boolean":return"boolean"==typeof e;case"function":return"function"==typeof e;case"undefined":return void 0===e;case"symbol":return"symbol"==typeof e}}function u(e,t,n){c(e,t)||i("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e)}function h(e,t){e>=0&&(0|e)===e||i("invalid parameter type, ("+e+")"+a(t)+". must be a nonnegative integer")}function d(e,t,n){t.indexOf(e)<0&&i("invalid value"+a(n)+". must be one of: "+t)}var f=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function p(e){Object.keys(e).forEach((function(e){f.indexOf(e)<0&&i('invalid regl constructor argument "'+e+'". must be one of '+f)}))}function g(e,t){for(e+="";e.length<t;)e=" "+e;return e}function m(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function v(e,t){this.number=e,this.line=t,this.errors=[]}function y(e,t,n){this.file=e,this.line=t,this.message=n}function b(){var e=new Error,t=(e.stack||e).toString(),n=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(t);return r?r[1]:"unknown"}function x(){var e=new Error,t=(e.stack||e).toString(),n=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(t);if(n)return n[1];var r=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(t);return r?r[1]:"unknown"}function w(e,t){var n=e.split("\n"),i=1,o=0,a={unknown:new m,0:new m};a.unknown.name=a[0].name=t||b(),a.unknown.lines.push(new v(0,""));for(var s=0;s<n.length;++s){var l=n[s],c=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(l);if(c)switch(c[1]){case"line":var u=/(\d+)(\s+\d+)?/.exec(c[2]);u&&(i=0|u[1],u[2]&&((o=0|u[2])in a||(a[o]=new m)));break;case"define":var h=/SHADER_NAME(_B64)?\s+(.*)$/.exec(c[2]);h&&(a[o].name=h[1]?r(h[2]):h[2])}a[o].lines.push(new v(i++,l))}return Object.keys(a).forEach((function(e){var t=a[e];t.lines.forEach((function(e){t.index[e.number]=e}))})),a}function _(e){var t=[];return e.split("\n").forEach((function(e){if(!(e.length<5)){var n=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(e);n?t.push(new y(0|n[1],0|n[2],n[3].trim())):e.length>0&&t.push(new y("unknown",0,e))}})),t}function C(e,t){t.forEach((function(t){var n=e[t.file];if(n){var r=n.index[t.line];if(r)return r.errors.push(t),void(n.hasErrors=!0)}e.unknown.hasErrors=!0,e.unknown.lines[0].errors.push(t)}))}function $(e,t,r,i,a){if(!e.getShaderParameter(t,e.COMPILE_STATUS)){var s=e.getShaderInfoLog(t),l=i===e.FRAGMENT_SHADER?"fragment":"vertex";P(r,"string",l+" shader source must be a string",a);var c=w(r,a),u=_(s);C(c,u),Object.keys(c).forEach((function(e){var t=c[e];if(t.hasErrors){var r=[""],i=[""];o("file number "+e+": "+t.name+"\n","color:red;text-decoration:underline;font-weight:bold"),t.lines.forEach((function(e){if(e.errors.length>0){o(g(e.number,4)+"|  ","background-color:yellow; font-weight:bold"),o(e.line+n,"color:red; background-color:yellow; font-weight:bold");var t=0;e.errors.forEach((function(r){var i=r.message,a=/^\s*'(.*)'\s*:\s*(.*)$/.exec(i);if(a){var s=a[1];i=a[2],"assign"===s&&(s="="),t=Math.max(e.line.indexOf(s,t),0)}else t=0;o(g("| ",6)),o(g("^^^",t+3)+n,"font-weight:bold"),o(g("| ",6)),o(i+n,"font-weight:bold")})),o(g("| ",6)+n)}else o(g(e.number,4)+"|  "),o(e.line+n,"color:red")})),"undefined"==typeof document||window.chrome||(i[0]=r.join("%c"))}function o(e,t){r.push(e),i.push(t||"")}})),o.raise("Error compiling "+l+" shader, "+c[0].name)}}function S(e,t,n,r,i){if(!e.getProgramParameter(t,e.LINK_STATUS)){e.getProgramInfoLog(t);var a=w(n,i),s='Error linking program with vertex shader, "'+w(r,i)[0].name+'", and fragment shader "'+a[0].name+'"';o.raise(s)}}function E(e){e._commandRef=b()}function A(e,t,n,r){function i(e){return e?r.id(e):0}function o(e,t){Object.keys(t).forEach((function(t){e[r.id(t)]=!0}))}E(e),e._fragId=i(e.static.frag),e._vertId=i(e.static.vert);var a=e._uniformSet={};o(a,t.static),o(a,t.dynamic);var s=e._attributeSet={};o(s,n.static),o(s,n.dynamic),e._hasCount="count"in e.static||"count"in e.dynamic||"elements"in e.static||"elements"in e.dynamic}function M(e,t){var n=x();i(e+" in command "+(t||b())+("unknown"===n?"":" called from "+n))}function k(e,t,n){e||M(t,n||b())}function T(e,t,n,r){e in t||M("unknown parameter ("+e+")"+a(n)+". possible values: "+Object.keys(t).join(),r||b())}function P(e,t,n,r){c(e,t)||M("invalid parameter type"+a(n)+". expected "+t+", got "+typeof e,r||b())}function O(e){e()}function N(e,t,n){e.texture?d(e.texture._texture.internalformat,t,"unsupported texture format for attachment"):d(e.renderbuffer._renderbuffer.format,n,"unsupported renderbuffer format for attachment")}var I=33071,D=9728,L=9984,R=9985,B=9986,j=9987,F=5121,G=5122,V=5123,z=5124,H=5125,U=5126,W=32819,q=32820,Y=33635,X=34042,K=36193,Z={};function Q(e,t){return e===q||e===W||e===Y?2:e===X?4:Z[e]*t}function J(e){return!(e&e-1||!e)}function ee(e,t,n){var r,i=t.width,a=t.height,s=t.channels;o(i>0&&i<=n.maxTextureSize&&a>0&&a<=n.maxTextureSize,"invalid texture shape"),e.wrapS===I&&e.wrapT===I||o(J(i)&&J(a),"incompatible wrap mode for texture, both width and height must be power of 2"),1===t.mipmask?1!==i&&1!==a&&o(e.minFilter!==L&&e.minFilter!==B&&e.minFilter!==R&&e.minFilter!==j,"min filter requires mipmap"):(o(J(i)&&J(a),"texture must be a square power of 2 to support mipmapping"),o(t.mipmask===(i<<1)-1,"missing or incomplete mipmap data")),t.type===U&&(n.extensions.indexOf("oes_texture_float_linear")<0&&o(e.minFilter===D&&e.magFilter===D,"filter not supported, must enable oes_texture_float_linear"),o(!e.genMipmaps,"mipmap generation not supported with float textures"));var l=t.images;for(r=0;r<16;++r)if(l[r]){var c=i>>r,u=a>>r;o(t.mipmask&1<<r,"missing mipmap data");var h=l[r];if(o(h.width===c&&h.height===u,"invalid shape for mip images"),o(h.format===t.format&&h.internalformat===t.internalformat&&h.type===t.type,"incompatible type for mip image"),h.compressed);else if(h.data){var d=Math.ceil(Q(h.type,s)*c/h.unpackAlignment)*h.unpackAlignment;o(h.data.byteLength===d*u,"invalid data for image, buffer size is inconsistent with image format")}else h.element||h.copy}else e.genMipmaps||o(0==(t.mipmask&1<<r),"extra mipmap data");t.compressed&&o(!e.genMipmaps,"mipmap generation for compressed images not supported")}function te(e,t,n,r){var i=e.width,a=e.height,s=e.channels;o(i>0&&i<=r.maxTextureSize&&a>0&&a<=r.maxTextureSize,"invalid texture shape"),o(i===a,"cube map must be square"),o(t.wrapS===I&&t.wrapT===I,"wrap mode not supported by cube map");for(var l=0;l<n.length;++l){var c=n[l];o(c.width===i&&c.height===a,"inconsistent cube map face shape"),t.genMipmaps&&(o(!c.compressed,"can not generate mipmap for compressed textures"),o(1===c.mipmask,"can not specify mipmaps and generate mipmaps"));for(var u=c.images,h=0;h<16;++h){var d=u[h];if(d){var f=i>>h,p=a>>h;o(c.mipmask&1<<h,"missing mipmap data"),o(d.width===f&&d.height===p,"invalid shape for mip images"),o(d.format===e.format&&d.internalformat===e.internalformat&&d.type===e.type,"incompatible type for mip image"),d.compressed||(d.data?o(d.data.byteLength===f*p*Math.max(Q(d.type,s),d.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):d.element||d.copy)}}}}Z[5120]=Z[F]=1,Z[G]=Z[V]=Z[K]=Z[Y]=Z[W]=Z[q]=2,Z[z]=Z[H]=Z[U]=Z[X]=4;var ne=t(o,{optional:O,raise:i,commandRaise:M,command:k,parameter:s,commandParameter:T,constructor:p,type:u,commandType:P,isTypedArray:l,nni:h,oneOf:d,shaderError:$,linkError:S,callSite:x,saveCommandRef:E,saveDrawInfo:A,framebufferFormat:N,guessCommand:b,texture2D:ee,textureCube:te}),re=0,ie=0,oe=5,ae=6;function se(e,t){this.id=re++,this.type=e,this.data=t}function le(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function ce(e){if(0===e.length)return[];var t=e.charAt(0),n=e.charAt(e.length-1);if(e.length>1&&t===n&&('"'===t||"'"===t))return['"'+le(e.substr(1,e.length-2))+'"'];var r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e);if(r)return ce(e.substr(0,r.index)).concat(ce(r[1])).concat(ce(e.substr(r.index+r[0].length)));var i=e.split(".");if(1===i.length)return['"'+le(e)+'"'];for(var o=[],a=0;a<i.length;++a)o=o.concat(ce(i[a]));return o}function ue(e){return"["+ce(e).join("][")+"]"}function he(e,t){return new se(e,ue(t+""))}function de(e){return"function"==typeof e&&!e._reglType||e instanceof se}function fe(e,t){return"function"==typeof e?new se(ie,e):"number"==typeof e||"boolean"==typeof e?new se(oe,e):Array.isArray(e)?new se(ae,e.map(((e,n)=>fe(e,t+"["+n+"]")))):e instanceof se?e:void ne(!1,"invalid option type in uniform "+t)}var pe={DynamicVariable:se,define:he,isDynamic:de,unbox:fe,accessor:ue},ge={next:"function"==typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"==typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},me="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date};function ve(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function ye(e,n,r){var i,o=document.createElement("canvas");function a(){var n=window.innerWidth,i=window.innerHeight;if(e!==document.body){var a=e.getBoundingClientRect();n=a.right-a.left,i=a.bottom-a.top}o.width=r*n,o.height=r*i,t(o.style,{width:n+"px",height:i+"px"})}function s(){i?i.disconnect():window.removeEventListener("resize",a),e.removeChild(o)}return t(o.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(o),e===document.body&&(o.style.position="absolute",t(e.style,{margin:0,padding:0})),e!==document.body&&"function"==typeof ResizeObserver?(i=new ResizeObserver((function(){setTimeout(a)}))).observe(e):window.addEventListener("resize",a,!1),a(),{canvas:o,onDestroy:s}}function be(e,t){function n(n){try{return e.getContext(n,t)}catch(e11){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function xe(e){return"string"==typeof e.nodeName&&"function"==typeof e.appendChild&&"function"==typeof e.getBoundingClientRect}function we(e){return"function"==typeof e.drawArrays||"function"==typeof e.drawElements}function _e(e){return"string"==typeof e?e.split():(ne(Array.isArray(e),"invalid extension array"),e)}function Ce(e){return"string"==typeof e?(ne("undefined"!=typeof document,"not supported outside of DOM"),document.querySelector(e)):e}function $e(e){var t,n,r,i,o=e||{},a={},s=[],l=[],c="undefined"==typeof window?1:window.devicePixelRatio,u=!1,h=function(e){e&&ne.raise(e)},d=function(){};if("string"==typeof o?(ne("undefined"!=typeof document,"selector queries only supported in DOM enviroments"),t=document.querySelector(o),ne(t,"invalid query string for element")):"object"==typeof o?xe(o)?t=o:we(o)?r=(i=o).canvas:(ne.constructor(o),"gl"in o?i=o.gl:"canvas"in o?r=Ce(o.canvas):"container"in o&&(n=Ce(o.container)),"attributes"in o&&(a=o.attributes,ne.type(a,"object","invalid context attributes")),"extensions"in o&&(s=_e(o.extensions)),"optionalExtensions"in o&&(l=_e(o.optionalExtensions)),"onDone"in o&&(ne.type(o.onDone,"function","invalid or missing onDone callback"),h=o.onDone),"profile"in o&&(u=!!o.profile),"pixelRatio"in o&&(c=+o.pixelRatio,ne(c>0,"invalid pixel ratio"))):ne.raise("invalid arguments to regl"),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!i){if(!r){ne("undefined"!=typeof document,"must manually specify webgl context outside of DOM environments");var f=ye(n||document.body,h,c);if(!f)return null;r=f.canvas,d=f.onDestroy}void 0===a.premultipliedAlpha&&(a.premultipliedAlpha=!0),i=be(r,a)}return i?{gl:i,canvas:r,container:n,extensions:s,optionalExtensions:l,pixelRatio:c,profile:u,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Se(e,t){var n={};function r(t){ne.type(t,"string","extension name must be string");var r,i=t.toLowerCase();try{r=n[i]=e.getExtension(i)}catch(e11){}return!!r}for(var i=0;i<t.extensions.length;++i){var o=t.extensions[i];if(!r(o))return t.onDestroy(),t.onDone('"'+o+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach((function(e){if(n[e]&&!r(e))throw new Error("(regl): error restoring extension "+e)}))}}}function Ee(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}var Ae=5120,Me=5121,ke=5122,Te=5123,Pe=5124,Oe=5125,Ne=5126;function Ie(e){for(var t=16;t<=1<<28;t*=16)if(e<=t)return t;return 0}function De(e){var t,n;return t=(e>65535)<<4,t|=n=((e>>>=t)>255)<<3,t|=n=((e>>>=n)>15)<<2,(t|=n=((e>>>=n)>3)<<1)|(e>>>=n)>>1}function Le(){var e=Ee(8,(function(){return[]}));function t(t){var n=Ie(t),r=e[De(n)>>2];return r.length>0?r.pop():new ArrayBuffer(n)}function n(t){e[De(t.byteLength)>>2].push(t)}function r(e,n){var r=null;switch(e){case Ae:r=new Int8Array(t(n),0,n);break;case Me:r=new Uint8Array(t(n),0,n);break;case ke:r=new Int16Array(t(2*n),0,n);break;case Te:r=new Uint16Array(t(2*n),0,n);break;case Pe:r=new Int32Array(t(4*n),0,n);break;case Oe:r=new Uint32Array(t(4*n),0,n);break;case Ne:r=new Float32Array(t(4*n),0,n);break;default:return null}return r.length!==n?r.subarray(0,n):r}function i(e){n(e.buffer)}return{alloc:t,free:n,allocType:r,freeType:i}}var Re=Le();Re.zero=Le();var Be=3408,je=3410,Fe=3411,Ge=3412,Ve=3413,ze=3414,He=3415,Ue=33901,We=33902,qe=3379,Ye=3386,Xe=34921,Ke=36347,Ze=36348,Qe=35661,Je=35660,et=34930,tt=36349,nt=34076,rt=34024,it=7936,ot=7937,at=7938,st=35724,lt=34047,ct=36063,ut=34852,ht=3553,dt=34067,ft=34069,pt=33984,gt=6408,mt=5126,vt=5121,yt=36160,bt=36053,xt=36064,wt=16384,_t=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(lt));var r=1,i=1;t.webgl_draw_buffers&&(r=e.getParameter(ut),i=e.getParameter(ct));var o=!!t.oes_texture_float;if(o){var a=e.createTexture();e.bindTexture(ht,a),e.texImage2D(ht,0,gt,1,1,0,gt,mt,null);var s=e.createFramebuffer();if(e.bindFramebuffer(yt,s),e.framebufferTexture2D(yt,xt,ht,a,0),e.bindTexture(ht,null),e.checkFramebufferStatus(yt)!==bt)o=!1;else{e.viewport(0,0,1,1),e.clearColor(1,0,0,1),e.clear(wt);var l=Re.allocType(mt,4);e.readPixels(0,0,1,1,gt,mt,l),e.getError()?o=!1:(e.deleteFramebuffer(s),e.deleteTexture(a),o=1===l[0]),Re.freeType(l)}}var c=!0;if("undefined"==typeof navigator||!(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))){var u=e.createTexture(),h=Re.allocType(vt,36);e.activeTexture(pt),e.bindTexture(dt,u),e.texImage2D(ft,0,gt,3,3,0,gt,vt,h),Re.freeType(h),e.bindTexture(dt,null),e.deleteTexture(u),c=!e.getError()}return{colorBits:[e.getParameter(je),e.getParameter(Fe),e.getParameter(Ge),e.getParameter(Ve)],depthBits:e.getParameter(ze),stencilBits:e.getParameter(He),subpixelBits:e.getParameter(Be),extensions:Object.keys(t).filter((function(e){return!!t[e]})),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(Ue),lineWidthDims:e.getParameter(We),maxViewportDims:e.getParameter(Ye),maxCombinedTextureUnits:e.getParameter(Qe),maxCubeMapSize:e.getParameter(nt),maxRenderbufferSize:e.getParameter(rt),maxTextureUnits:e.getParameter(et),maxTextureSize:e.getParameter(qe),maxAttributes:e.getParameter(Xe),maxVertexUniforms:e.getParameter(Ke),maxVertexTextureUnits:e.getParameter(Je),maxVaryingVectors:e.getParameter(Ze),maxFragmentUniforms:e.getParameter(tt),glsl:e.getParameter(st),renderer:e.getParameter(ot),vendor:e.getParameter(it),version:e.getParameter(at),readFloat:o,npotTextureCube:c}};function Ct(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||e(t.data))}var $t=function(e){return Object.keys(e).map((function(t){return e[t]}))},St={shape:Pt,flatten:Tt};function Et(e,t,n){for(var r=0;r<t;++r)n[r]=e[r]}function At(e,t,n,r){for(var i=0,o=0;o<t;++o)for(var a=e[o],s=0;s<n;++s)r[i++]=a[s]}function Mt(e,t,n,r,i,o){for(var a=o,s=0;s<t;++s)for(var l=e[s],c=0;c<n;++c)for(var u=l[c],h=0;h<r;++h)i[a++]=u[h]}function kt(e,t,n,r,i){for(var o=1,a=n+1;a<t.length;++a)o*=t[a];var s=t[n];if(t.length-n==4){var l=t[n+1],c=t[n+2],u=t[n+3];for(a=0;a<s;++a)Mt(e[a],l,c,u,r,i),i+=o}else for(a=0;a<s;++a)kt(e[a],t,n+1,r,i),i+=o}function Tt(e,t,n,r){var i=1;if(t.length)for(var o=0;o<t.length;++o)i*=t[o];else i=0;var a=r||Re.allocType(n,i);switch(t.length){case 0:break;case 1:Et(e,t[0],a);break;case 2:At(e,t[0],t[1],a);break;case 3:Mt(e,t[0],t[1],t[2],a,0);break;default:kt(e,t,0,a,0)}return a}function Pt(e){for(var t=[],n=e;n.length;n=n[0])t.push(n.length);return t}var Ot={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Nt={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},It={dynamic:35048,stream:35040,static:35044},Dt=St.flatten,Lt=St.shape,Rt=35044,Bt=35040,jt=5121,Ft=5126,Gt=[];function Vt(e){return 0|Ot[Object.prototype.toString.call(e)]}function zt(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function Ht(e,t,n,r,i,o,a){for(var s=0,l=0;l<n;++l)for(var c=0;c<r;++c)e[s++]=t[i*l+o*c+a]}function Ut(t,n,r,i){var o=0,a={};function s(e){this.id=o++,this.buffer=t.createBuffer(),this.type=e,this.usage=Rt,this.byteLength=0,this.dimension=1,this.dtype=jt,this.persistentData=null,r.profile&&(this.stats={size:0})}s.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},s.prototype.destroy=function(){f(this)};var l=[];function c(e,t){var n=l.pop();return n||(n=new s(e)),n.bind(),d(n,t,Bt,0,1,!1),n}function u(e){l.push(e)}function h(e,n,r){e.byteLength=n.byteLength,t.bufferData(e.type,n,r)}function d(t,n,r,i,o,a){var s,l;if(t.usage=r,Array.isArray(n)){if(t.dtype=i||Ft,n.length>0)if(Array.isArray(n[0])){s=Lt(n);for(var c=1,u=1;u<s.length;++u)c*=s[u];t.dimension=c,h(t,l=Dt(n,s,t.dtype),r),a?t.persistentData=l:Re.freeType(l)}else if("number"==typeof n[0]){t.dimension=o;var d=Re.allocType(t.dtype,n.length);zt(d,n),h(t,d,r),a?t.persistentData=d:Re.freeType(d)}else e(n[0])?(t.dimension=n[0].length,t.dtype=i||Vt(n[0])||Ft,h(t,l=Dt(n,[n.length,n[0].length],t.dtype),r),a?t.persistentData=l:Re.freeType(l)):ne.raise("invalid buffer data")}else if(e(n))t.dtype=i||Vt(n),t.dimension=o,h(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n.buffer)));else if(Ct(n)){s=n.shape;var f=n.stride,p=n.offset,g=0,m=0,v=0,y=0;1===s.length?(g=s[0],m=1,v=f[0],y=0):2===s.length?(g=s[0],m=s[1],v=f[0],y=f[1]):ne.raise("invalid shape"),t.dtype=i||Vt(n.data)||Ft,t.dimension=m;var b=Re.allocType(t.dtype,g*m);Ht(b,n.data,g,m,v,y,p),h(t,b,r),a?t.persistentData=b:Re.freeType(b)}else n instanceof ArrayBuffer?(t.dtype=jt,t.dimension=o,h(t,n,r),a&&(t.persistentData=new Uint8Array(new Uint8Array(n)))):ne.raise("invalid buffer data")}function f(e){n.bufferCount--,i(e);var r=e.buffer;ne(r,"buffer must not be deleted already"),t.deleteBuffer(r),e.buffer=null,delete a[e.id]}function p(i,o,l,c){n.bufferCount++;var u=new s(o);function h(n){var i=Rt,o=null,a=0,s=0,l=1;return Array.isArray(n)||e(n)||Ct(n)||n instanceof ArrayBuffer?o=n:"number"==typeof n?a=0|n:n&&(ne.type(n,"object","buffer arguments must be an object, a number or an array"),"data"in n&&(ne(null===o||Array.isArray(o)||e(o)||Ct(o),"invalid data for buffer"),o=n.data),"usage"in n&&(ne.parameter(n.usage,It,"invalid buffer usage"),i=It[n.usage]),"type"in n&&(ne.parameter(n.type,Nt,"invalid buffer type"),s=Nt[n.type]),"dimension"in n&&(ne.type(n.dimension,"number","invalid dimension"),l=0|n.dimension),"length"in n&&(ne.nni(a,"buffer length must be a nonnegative integer"),a=0|n.length)),u.bind(),o?d(u,o,i,s,l,c):(a&&t.bufferData(u.type,a,i),u.dtype=s||jt,u.usage=i,u.dimension=l,u.byteLength=a),r.profile&&(u.stats.size=u.byteLength*Gt[u.dtype]),h}function p(e,n){ne(n+e.byteLength<=u.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+e.byteLength+" starting from offset "+n+" to a buffer of size "+u.byteLength),t.bufferSubData(u.type,n,e)}function g(t,n){var r,i=0|(n||0);if(u.bind(),e(t)||t instanceof ArrayBuffer)p(t,i);else if(Array.isArray(t)){if(t.length>0)if("number"==typeof t[0]){var o=Re.allocType(u.dtype,t.length);zt(o,t),p(o,i),Re.freeType(o)}else if(Array.isArray(t[0])||e(t[0])){r=Lt(t);var a=Dt(t,r,u.dtype);p(a,i),Re.freeType(a)}else ne.raise("invalid buffer data")}else if(Ct(t)){r=t.shape;var s=t.stride,l=0,c=0,d=0,f=0;1===r.length?(l=r[0],c=1,d=s[0],f=0):2===r.length?(l=r[0],c=r[1],d=s[0],f=s[1]):ne.raise("invalid shape");var g=Array.isArray(t.data)?u.dtype:Vt(t.data),m=Re.allocType(g,l*c);Ht(m,t.data,l,c,d,f,t.offset),p(m,i),Re.freeType(m)}else ne.raise("invalid data for buffer subdata");return h}return a[u.id]=u,l||h(i),h._reglType="buffer",h._buffer=u,h.subdata=g,r.profile&&(h.stats=u.stats),h.destroy=function(){f(u)},h}function g(){$t(a).forEach((function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)}))}return r.profile&&(n.getTotalBufferSize=function(){var e=0;return Object.keys(a).forEach((function(t){e+=a[t].stats.size})),e}),{create:p,createStream:c,destroyStream:u,clear:function(){$t(a).forEach(f),l.forEach(f)},getBuffer:function(e){return e&&e._buffer instanceof s?e._buffer:null},restore:g,_initBuffer:d}}Gt[5120]=1,Gt[5122]=2,Gt[5124]=4,Gt[5121]=1,Gt[5123]=2,Gt[5125]=4,Gt[5126]=4;var Wt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},qt=0,Yt=1,Xt=4,Kt=5120,Zt=5121,Qt=5122,Jt=5123,en=5124,tn=5125,nn=34963,rn=35040,on=35044;function an(t,n,r,i){var o={},a=0,s={uint8:Zt,uint16:Jt};function l(e){this.id=a++,o[this.id]=this,this.buffer=e,this.primType=Xt,this.vertCount=0,this.type=0}n.oes_element_index_uint&&(s.uint32=tn),l.prototype.bind=function(){this.buffer.bind()};var c=[];function u(e){var t=c.pop();return t||(t=new l(r.create(null,nn,!0,!1)._buffer)),d(t,e,rn,-1,-1,0,0),t}function h(e){c.push(e)}function d(i,o,a,s,l,c,u){var h;if(i.buffer.bind(),o){var d=u;u||e(o)&&(!Ct(o)||e(o.data))||(d=n.oes_element_index_uint?tn:Jt),r._initBuffer(i.buffer,o,a,d,3)}else t.bufferData(nn,c,a),i.buffer.dtype=h||Zt,i.buffer.usage=a,i.buffer.dimension=3,i.buffer.byteLength=c;if(h=u,!u){switch(i.buffer.dtype){case Zt:case Kt:h=Zt;break;case Jt:case Qt:h=Jt;break;case tn:case en:h=tn;break;default:ne.raise("unsupported type for element array")}i.buffer.dtype=h}i.type=h,ne(h!==tn||!!n.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var f=l;f<0&&(f=i.buffer.byteLength,h===Jt?f>>=1:h===tn&&(f>>=2)),i.vertCount=f;var p=s;if(s<0){p=Xt;var g=i.buffer.dimension;1===g&&(p=qt),2===g&&(p=Yt),3===g&&(p=Xt)}i.primType=p}function f(e){i.elementsCount--,ne(null!==e.buffer,"must not double destroy elements"),delete o[e.id],e.buffer.destroy(),e.buffer=null}function p(t,n){var o=r.create(null,nn,!0),a=new l(o._buffer);function c(t){if(t)if("number"==typeof t)o(t),a.primType=Xt,a.vertCount=0|t,a.type=Zt;else{var n=null,r=on,i=-1,l=-1,u=0,h=0;Array.isArray(t)||e(t)||Ct(t)?n=t:(ne.type(t,"object","invalid arguments for elements"),"data"in t&&(n=t.data,ne(Array.isArray(n)||e(n)||Ct(n),"invalid data for element buffer")),"usage"in t&&(ne.parameter(t.usage,It,"invalid element buffer usage"),r=It[t.usage]),"primitive"in t&&(ne.parameter(t.primitive,Wt,"invalid element buffer primitive"),i=Wt[t.primitive]),"count"in t&&(ne("number"==typeof t.count&&t.count>=0,"invalid vertex count for elements"),l=0|t.count),"type"in t&&(ne.parameter(t.type,s,"invalid buffer type"),h=s[t.type]),"length"in t?u=0|t.length:(u=l,h===Jt||h===Qt?u*=2:h!==tn&&h!==en||(u*=4))),d(a,n,r,i,l,u,h)}else o(),a.primType=Xt,a.vertCount=0,a.type=Zt;return c}return i.elementsCount++,c(t),c._reglType="elements",c._elements=a,c.subdata=function(e,t){return o.subdata(e,t),c},c.destroy=function(){f(a)},c}return{create:p,createStream:u,destroyStream:h,getElements:function(e){return"function"==typeof e&&e._elements instanceof l?e._elements:null},clear:function(){$t(o).forEach(f)}}}var sn=new Float32Array(1),ln=new Uint32Array(sn.buffer),cn=5123;function un(e){for(var t=Re.allocType(cn,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(e[n]===1/0)t[n]=31744;else if(e[n]===-1/0)t[n]=64512;else{sn[0]=e[n];var r=ln[0],i=r>>>31<<15,o=(r<<1>>>24)-127,a=r>>13&1023;if(o<-24)t[n]=i;else if(o<-14){var s=-14-o;t[n]=i+(a+1024>>s)}else t[n]=o>15?i+31744:i+(o+15<<10)+a}return t}function hn(t){return Array.isArray(t)||e(t)}var dn=function(e){return!(e&e-1||!e)},fn=34467,pn=3553,gn=34067,mn=34069,vn=6408,yn=6406,bn=6407,xn=6409,wn=6410,_n=32854,Cn=32855,$n=36194,Sn=32819,En=32820,An=33635,Mn=34042,kn=6402,Tn=34041,Pn=35904,On=35906,Nn=36193,In=33776,Dn=33777,Ln=33778,Rn=33779,Bn=35986,jn=35987,Fn=34798,Gn=35840,Vn=35841,zn=35842,Hn=35843,Un=36196,Wn=5121,qn=5123,Yn=5125,Xn=5126,Kn=10242,Zn=10243,Qn=10497,Jn=33071,er=33648,tr=10240,nr=10241,rr=9728,ir=9729,or=9984,ar=9985,sr=9986,lr=9987,cr=33170,ur=4352,hr=4353,dr=4354,fr=34046,pr=3317,gr=37440,mr=37441,vr=37443,yr=37444,br=33984,xr=[or,sr,ar,lr],wr=[0,xn,wn,bn,vn],_r={};function Cr(e){return"[object "+e+"]"}_r[xn]=_r[yn]=_r[kn]=1,_r[Tn]=_r[wn]=2,_r[bn]=_r[Pn]=3,_r[vn]=_r[On]=4;var $r=Cr("HTMLCanvasElement"),Sr=Cr("OffscreenCanvas"),Er=Cr("CanvasRenderingContext2D"),Ar=Cr("ImageBitmap"),Mr=Cr("HTMLImageElement"),kr=Cr("HTMLVideoElement"),Tr=Object.keys(Ot).concat([$r,Sr,Er,Ar,Mr,kr]),Pr=[];Pr[Wn]=1,Pr[Xn]=4,Pr[Nn]=2,Pr[qn]=2,Pr[Yn]=4;var Or=[];function Nr(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])}function Ir(e){return!!Array.isArray(e)&&!(0===e.length||!hn(e[0]))}function Dr(e){return Object.prototype.toString.call(e)}function Lr(e){return Dr(e)===$r}function Rr(e){return Dr(e)===Sr}function Br(e){return Dr(e)===Er}function jr(e){return Dr(e)===Ar}function Fr(e){return Dr(e)===Mr}function Gr(e){return Dr(e)===kr}function Vr(e){if(!e)return!1;var t=Dr(e);return Tr.indexOf(t)>=0||Nr(e)||Ir(e)||Ct(e)}function zr(e){return 0|Ot[Object.prototype.toString.call(e)]}function Hr(e,t){var n=t.length;switch(e.type){case Wn:case qn:case Yn:case Xn:var r=Re.allocType(e.type,n);r.set(t),e.data=r;break;case Nn:e.data=un(t);break;default:ne.raise("unsupported texture type, must specify a typed array")}}function Ur(e,t){return Re.allocType(e.type===Nn?Xn:e.type,t)}function Wr(e,t){e.type===Nn?(e.data=un(t),Re.freeType(t)):e.data=t}function qr(e,t,n,r,i,o){for(var a=e.width,s=e.height,l=e.channels,c=Ur(e,a*s*l),u=0,h=0;h<s;++h)for(var d=0;d<a;++d)for(var f=0;f<l;++f)c[u++]=t[n*d+r*h+i*f+o];Wr(e,c)}function Yr(e,t,n,r,i,o){var a;if(a=void 0!==Or[e]?Or[e]:_r[e]*Pr[t],o&&(a*=6),i){for(var s=0,l=n;l>=1;)s+=a*l*l,l/=2;return s}return a*n*r}function Xr(n,r,i,o,a,s,l){var c={"don't care":ur,"dont care":ur,nice:dr,fast:hr},u={repeat:Qn,clamp:Jn,mirror:er},h={nearest:rr,linear:ir},d=t({mipmap:lr,"nearest mipmap nearest":or,"linear mipmap nearest":ar,"nearest mipmap linear":sr,"linear mipmap linear":lr},h),f={none:0,browser:yr},p={uint8:Wn,rgba4:Sn,rgb565:An,"rgb5 a1":En},g={alpha:yn,luminance:xn,"luminance alpha":wn,rgb:bn,rgba:vn,rgba4:_n,"rgb5 a1":Cn,rgb565:$n},m={};r.ext_srgb&&(g.srgb=Pn,g.srgba=On),r.oes_texture_float&&(p.float32=p.float=Xn),r.oes_texture_half_float&&(p.float16=p["half float"]=Nn),r.webgl_depth_texture&&(t(g,{depth:kn,"depth stencil":Tn}),t(p,{uint16:qn,uint32:Yn,"depth stencil":Mn})),r.webgl_compressed_texture_s3tc&&t(m,{"rgb s3tc dxt1":In,"rgba s3tc dxt1":Dn,"rgba s3tc dxt3":Ln,"rgba s3tc dxt5":Rn}),r.webgl_compressed_texture_atc&&t(m,{"rgb atc":Bn,"rgba atc explicit alpha":jn,"rgba atc interpolated alpha":Fn}),r.webgl_compressed_texture_pvrtc&&t(m,{"rgb pvrtc 4bppv1":Gn,"rgb pvrtc 2bppv1":Vn,"rgba pvrtc 4bppv1":zn,"rgba pvrtc 2bppv1":Hn}),r.webgl_compressed_texture_etc1&&(m["rgb etc1"]=Un);var v=Array.prototype.slice.call(n.getParameter(fn));Object.keys(m).forEach((function(e){var t=m[e];v.indexOf(t)>=0&&(g[e]=t)}));var y=Object.keys(g);i.textureFormats=y;var b=[];Object.keys(g).forEach((function(e){var t=g[e];b[t]=e}));var x=[];Object.keys(p).forEach((function(e){var t=p[e];x[t]=e}));var w=[];Object.keys(h).forEach((function(e){var t=h[e];w[t]=e}));var _=[];Object.keys(d).forEach((function(e){var t=d[e];_[t]=e}));var C=[];Object.keys(u).forEach((function(e){var t=u[e];C[t]=e}));var $=y.reduce((function(e,t){var n=g[t];return n===xn||n===yn||n===xn||n===wn||n===kn||n===Tn||r.ext_srgb&&(n===Pn||n===On)?e[n]=n:n===Cn||t.indexOf("rgba")>=0?e[n]=vn:e[n]=bn,e}),{});function S(){this.internalformat=vn,this.format=vn,this.type=Wn,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=yr,this.width=0,this.height=0,this.channels=0}function E(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function A(e,t){if("object"==typeof t&&t){if("premultiplyAlpha"in t&&(ne.type(t.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(ne.type(t.flipY,"boolean","invalid texture flip"),e.flipY=t.flipY),"alignment"in t&&(ne.oneOf(t.alignment,[1,2,4,8],"invalid texture unpack alignment"),e.unpackAlignment=t.alignment),"colorSpace"in t&&(ne.parameter(t.colorSpace,f,"invalid colorSpace"),e.colorSpace=f[t.colorSpace]),"type"in t){var n=t.type;ne(r.oes_texture_float||!("float"===n||"float32"===n),"you must enable the OES_texture_float extension in order to use floating point textures."),ne(r.oes_texture_half_float||!("half float"===n||"float16"===n),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),ne(r.webgl_depth_texture||!("uint16"===n||"uint32"===n||"depth stencil"===n),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(n,p,"invalid texture type"),e.type=p[n]}var o=e.width,a=e.height,s=e.channels,l=!1;"shape"in t?(ne(Array.isArray(t.shape)&&t.shape.length>=2,"shape must be an array"),o=t.shape[0],a=t.shape[1],3===t.shape.length&&(s=t.shape[2],ne(s>0&&s<=4,"invalid number of channels"),l=!0),ne(o>=0&&o<=i.maxTextureSize,"invalid width"),ne(a>=0&&a<=i.maxTextureSize,"invalid height")):("radius"in t&&(o=a=t.radius,ne(o>=0&&o<=i.maxTextureSize,"invalid radius")),"width"in t&&(o=t.width,ne(o>=0&&o<=i.maxTextureSize,"invalid width")),"height"in t&&(a=t.height,ne(a>=0&&a<=i.maxTextureSize,"invalid height")),"channels"in t&&(s=t.channels,ne(s>0&&s<=4,"invalid number of channels"),l=!0)),e.width=0|o,e.height=0|a,e.channels=0|s;var c=!1;if("format"in t){var u=t.format;ne(r.webgl_depth_texture||!("depth"===u||"depth stencil"===u),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),ne.parameter(u,g,"invalid texture format");var h=e.internalformat=g[u];e.format=$[h],u in p&&("type"in t||(e.type=p[u])),u in m&&(e.compressed=!0),c=!0}!l&&c?e.channels=_r[e.format]:l&&!c?e.channels!==wr[e.format]&&(e.format=e.internalformat=wr[e.channels]):c&&l&&ne(e.channels===_r[e.format],"number of channels inconsistent with specified format")}}function M(e){n.pixelStorei(gr,e.flipY),n.pixelStorei(mr,e.premultiplyAlpha),n.pixelStorei(vr,e.colorSpace),n.pixelStorei(pr,e.unpackAlignment)}function k(){S.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function T(t,n){var r=null;if(Vr(n)?r=n:n&&(ne.type(n,"object","invalid pixel data type"),A(t,n),"x"in n&&(t.xOffset=0|n.x),"y"in n&&(t.yOffset=0|n.y),Vr(n.data)&&(r=n.data)),ne(!t.compressed||r instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),n.copy){ne(!r,"can not specify copy and data field for the same texture");var o=a.viewportWidth,s=a.viewportHeight;t.width=t.width||o-t.xOffset,t.height=t.height||s-t.yOffset,t.needsCopy=!0,ne(t.xOffset>=0&&t.xOffset<o&&t.yOffset>=0&&t.yOffset<s&&t.width>0&&t.width<=o&&t.height>0&&t.height<=s,"copy texture read out of bounds")}else if(r){if(e(r))t.channels=t.channels||4,t.data=r,"type"in n||t.type!==Wn||(t.type=zr(r));else if(Nr(r))t.channels=t.channels||4,Hr(t,r),t.alignment=1,t.needsFree=!0;else if(Ct(r)){var l=r.data;Array.isArray(l)||t.type!==Wn||(t.type=zr(l));var c,u,h,d,f,p,g=r.shape,m=r.stride;3===g.length?(h=g[2],p=m[2]):(ne(2===g.length,"invalid ndarray pixel data, must be 2 or 3D"),h=1,p=1),c=g[0],u=g[1],d=m[0],f=m[1],t.alignment=1,t.width=c,t.height=u,t.channels=h,t.format=t.internalformat=wr[h],t.needsFree=!0,qr(t,l,d,f,p,r.offset)}else if(Lr(r)||Rr(r)||Br(r))Lr(r)||Rr(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if(jr(r))t.element=r,t.width=r.width,t.height=r.height,t.channels=4;else if(Fr(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if(Gr(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(Ir(r)){var v=t.width||r[0].length,y=t.height||r.length,b=t.channels;b=hn(r[0][0])?b||r[0][0].length:b||1;for(var x=St.shape(r),w=1,_=0;_<x.length;++_)w*=x[_];var C=Ur(t,w);St.flatten(r,x,"",C),Wr(t,C),t.alignment=1,t.width=v,t.height=y,t.channels=b,t.format=t.internalformat=wr[b],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4;t.type===Xn?ne(i.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):t.type===Nn&&ne(i.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function P(e,t,r){var i=e.element,a=e.data,s=e.internalformat,l=e.format,c=e.type,u=e.width,h=e.height;M(e),i?n.texImage2D(t,r,l,l,c,i):e.compressed?n.compressedTexImage2D(t,r,s,u,h,0,a):e.needsCopy?(o(),n.copyTexImage2D(t,r,l,e.xOffset,e.yOffset,u,h,0)):n.texImage2D(t,r,l,u,h,0,l,c,a||null)}function O(e,t,r,i,a){var s=e.element,l=e.data,c=e.internalformat,u=e.format,h=e.type,d=e.width,f=e.height;M(e),s?n.texSubImage2D(t,a,r,i,u,h,s):e.compressed?n.compressedTexSubImage2D(t,a,r,i,c,d,f,l):e.needsCopy?(o(),n.copyTexSubImage2D(t,a,r,i,e.xOffset,e.yOffset,d,f)):n.texSubImage2D(t,a,r,i,d,f,u,h,l)}var N=[];function I(){return N.pop()||new k}function D(e){e.needsFree&&Re.freeType(e.data),k.call(e),N.push(e)}function L(){S.call(this),this.genMipmaps=!1,this.mipmapHint=ur,this.mipmask=0,this.images=Array(16)}function R(e,t,n){var r=e.images[0]=I();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function B(e,t){var n=null;if(Vr(t))E(n=e.images[0]=I(),e),T(n,t),e.mipmask=1;else if(A(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)E(n=e.images[i]=I(),e),n.width>>=i,n.height>>=i,T(n,r[i]),e.mipmask|=1<<i;else E(n=e.images[0]=I(),e),T(n,t),e.mipmask=1;E(e,e.images[0]),!e.compressed||e.internalformat!==In&&e.internalformat!==Dn&&e.internalformat!==Ln&&e.internalformat!==Rn||ne(e.width%4==0&&e.height%4==0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function j(e,t){for(var n=e.images,r=0;r<n.length;++r){if(!n[r])return;P(n[r],t,r)}}var F=[];function G(){var e=F.pop()||new L;S.call(e),e.mipmask=0;for(var t=0;t<16;++t)e.images[t]=null;return e}function V(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&D(t[n]),t[n]=null;F.push(e)}function z(){this.minFilter=rr,this.magFilter=rr,this.wrapS=Jn,this.wrapT=Jn,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=ur}function H(e,t){if("min"in t){var n=t.min;ne.parameter(n,d),e.minFilter=d[n],xr.indexOf(e.minFilter)>=0&&!("faces"in t)&&(e.genMipmaps=!0)}if("mag"in t){var r=t.mag;ne.parameter(r,h),e.magFilter=h[r]}var o=e.wrapS,a=e.wrapT;if("wrap"in t){var s=t.wrap;"string"==typeof s?(ne.parameter(s,u),o=a=u[s]):Array.isArray(s)&&(ne.parameter(s[0],u),ne.parameter(s[1],u),o=u[s[0]],a=u[s[1]])}else{if("wrapS"in t){var l=t.wrapS;ne.parameter(l,u),o=u[l]}if("wrapT"in t){var f=t.wrapT;ne.parameter(f,u),a=u[f]}}if(e.wrapS=o,e.wrapT=a,"anisotropic"in t){var p=t.anisotropic;ne("number"==typeof p&&p>=1&&p<=i.maxAnisotropic,"aniso samples must be between 1 and "),e.anisotropic=t.anisotropic}if("mipmap"in t){var g=!1;switch(typeof t.mipmap){case"string":ne.parameter(t.mipmap,c,"invalid mipmap hint"),e.mipmapHint=c[t.mipmap],e.genMipmaps=!0,g=!0;break;case"boolean":g=e.genMipmaps=t.mipmap;break;case"object":ne(Array.isArray(t.mipmap),"invalid mipmap type"),e.genMipmaps=!1,g=!0;break;default:ne.raise("invalid mipmap type")}g&&!("min"in t)&&(e.minFilter=or)}}function U(e,t){n.texParameteri(t,nr,e.minFilter),n.texParameteri(t,tr,e.magFilter),n.texParameteri(t,Kn,e.wrapS),n.texParameteri(t,Zn,e.wrapT),r.ext_texture_filter_anisotropic&&n.texParameteri(t,fr,e.anisotropic),e.genMipmaps&&(n.hint(cr,e.mipmapHint),n.generateMipmap(t))}var W=0,q={},Y=i.maxTextureUnits,X=Array(Y).map((function(){return null}));function K(e){S.call(this),this.mipmask=0,this.internalformat=vn,this.id=W++,this.refCount=1,this.target=e,this.texture=n.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new z,l.profile&&(this.stats={size:0})}function Z(e){n.activeTexture(br),n.bindTexture(e.target,e.texture)}function Q(){var e=X[0];e?n.bindTexture(e.target,e.texture):n.bindTexture(pn,null)}function J(e){var t=e.texture;ne(t,"must not double destroy texture");var r=e.unit,i=e.target;r>=0&&(n.activeTexture(br+r),n.bindTexture(i,null),X[r]=null),n.deleteTexture(t),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete q[e.id],s.textureCount--}function ee(e,t){var r=new K(pn);function o(e,t){var n=r.texInfo;z.call(n);var a=G();return"number"==typeof e?R(a,0|e,"number"==typeof t?0|t:0|e):e?(ne.type(e,"object","invalid arguments to regl.texture"),H(n,e),B(a,e)):R(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),r.mipmask=a.mipmask,E(r,a),ne.texture2D(n,a,i),r.internalformat=a.internalformat,o.width=a.width,o.height=a.height,Z(r),j(a,pn),U(n,pn),Q(),V(a),l.profile&&(r.stats.size=Yr(r.internalformat,r.type,a.width,a.height,n.genMipmaps,!1)),o.format=b[r.internalformat],o.type=x[r.type],o.mag=w[n.magFilter],o.min=_[n.minFilter],o.wrapS=C[n.wrapS],o.wrapT=C[n.wrapT],o}function a(e,t,n,i){ne(!!e,"must specify image data");var a=0|t,s=0|n,l=0|i,c=I();return E(c,r),c.width=0,c.height=0,T(c,e),c.width=c.width||(r.width>>l)-a,c.height=c.height||(r.height>>l)-s,ne(r.type===c.type&&r.format===c.format&&r.internalformat===c.internalformat,"incompatible format for texture.subimage"),ne(a>=0&&s>=0&&a+c.width<=r.width&&s+c.height<=r.height,"texture.subimage write out of bounds"),ne(r.mipmask&1<<l,"missing mipmap data"),ne(c.data||c.element||c.needsCopy,"missing image data"),Z(r),O(c,pn,a,s,l),Q(),D(c),o}function c(e,t){var i=0|e,a=0|t||i;if(i===r.width&&a===r.height)return o;o.width=r.width=i,o.height=r.height=a,Z(r);for(var s=0;r.mipmask>>s;++s){var c=i>>s,u=a>>s;if(!c||!u)break;n.texImage2D(pn,s,r.format,c,u,0,r.format,r.type,null)}return Q(),l.profile&&(r.stats.size=Yr(r.internalformat,r.type,i,a,!1,!1)),o}return q[r.id]=r,s.textureCount++,o(e,t),o.subimage=a,o.resize=c,o._reglType="texture2d",o._texture=r,l.profile&&(o.stats=r.stats),o.destroy=function(){r.decRef()},o}function te(e,t,r,o,a,c){var u=new K(gn);q[u.id]=u,s.cubeCount++;var h=new Array(6);function d(e,t,n,r,o,a){var s,c=u.texInfo;for(z.call(c),s=0;s<6;++s)h[s]=G();if("number"!=typeof e&&e)if("object"==typeof e)if(t)B(h[0],e),B(h[1],t),B(h[2],n),B(h[3],r),B(h[4],o),B(h[5],a);else if(H(c,e),A(u,e),"faces"in e){var f=e.faces;for(ne(Array.isArray(f)&&6===f.length,"cube faces must be a length 6 array"),s=0;s<6;++s)ne("object"==typeof f[s]&&!!f[s],"invalid input for cube map face"),E(h[s],u),B(h[s],f[s])}else for(s=0;s<6;++s)B(h[s],e);else ne.raise("invalid arguments to cube map");else{var p=0|e||1;for(s=0;s<6;++s)R(h[s],p,p)}for(E(u,h[0]),i.npotTextureCube||ne(dn(u.width)&&dn(u.height),"your browser does not support non power or two texture dimensions"),c.genMipmaps?u.mipmask=(h[0].width<<1)-1:u.mipmask=h[0].mipmask,ne.textureCube(u,c,h,i),u.internalformat=h[0].internalformat,d.width=h[0].width,d.height=h[0].height,Z(u),s=0;s<6;++s)j(h[s],mn+s);for(U(c,gn),Q(),l.profile&&(u.stats.size=Yr(u.internalformat,u.type,d.width,d.height,c.genMipmaps,!0)),d.format=b[u.internalformat],d.type=x[u.type],d.mag=w[c.magFilter],d.min=_[c.minFilter],d.wrapS=C[c.wrapS],d.wrapT=C[c.wrapT],s=0;s<6;++s)V(h[s]);return d}function f(e,t,n,r,i){ne(!!t,"must specify image data"),ne("number"==typeof e&&e===(0|e)&&e>=0&&e<6,"invalid face");var o=0|n,a=0|r,s=0|i,l=I();return E(l,u),l.width=0,l.height=0,T(l,t),l.width=l.width||(u.width>>s)-o,l.height=l.height||(u.height>>s)-a,ne(u.type===l.type&&u.format===l.format&&u.internalformat===l.internalformat,"incompatible format for texture.subimage"),ne(o>=0&&a>=0&&o+l.width<=u.width&&a+l.height<=u.height,"texture.subimage write out of bounds"),ne(u.mipmask&1<<s,"missing mipmap data"),ne(l.data||l.element||l.needsCopy,"missing image data"),Z(u),O(l,mn+e,o,a,s),Q(),D(l),d}function p(e){var t=0|e;if(t!==u.width){d.width=u.width=t,d.height=u.height=t,Z(u);for(var r=0;r<6;++r)for(var i=0;u.mipmask>>i;++i)n.texImage2D(mn+r,i,u.format,t>>i,t>>i,0,u.format,u.type,null);return Q(),l.profile&&(u.stats.size=Yr(u.internalformat,u.type,d.width,d.height,!1,!0)),d}}return d(e,t,r,o,a,c),d.subimage=f,d.resize=p,d._reglType="textureCube",d._texture=u,l.profile&&(d.stats=u.stats),d.destroy=function(){u.decRef()},d}function re(){for(var e=0;e<Y;++e)n.activeTexture(br+e),n.bindTexture(pn,null),X[e]=null;$t(q).forEach(J),s.cubeCount=0,s.textureCount=0}function ie(){for(var e=0;e<Y;++e){var t=X[e];t&&(t.bindCount=0,t.unit=-1,X[e]=null)}$t(q).forEach((function(e){e.texture=n.createTexture(),n.bindTexture(e.target,e.texture);for(var t=0;t<32;++t)if(0!=(e.mipmask&1<<t))if(e.target===pn)n.texImage2D(pn,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);else for(var r=0;r<6;++r)n.texImage2D(mn+r,t,e.internalformat,e.width>>t,e.height>>t,0,e.internalformat,e.type,null);U(e.texInfo,e.target)}))}function oe(){for(var e=0;e<Y;++e){var t=X[e];t&&(t.bindCount=0,t.unit=-1,X[e]=null),n.activeTexture(br+e),n.bindTexture(pn,null),n.bindTexture(gn,null)}}return t(K.prototype,{bind:function(){var e=this;e.bindCount+=1;var t=e.unit;if(t<0){for(var r=0;r<Y;++r){var i=X[r];if(i){if(i.bindCount>0)continue;i.unit=-1}X[r]=e,t=r;break}t>=Y&&ne.raise("insufficient number of texture units"),l.profile&&s.maxTextureUnits<t+1&&(s.maxTextureUnits=t+1),e.unit=t,n.activeTexture(br+t),n.bindTexture(e.target,e.texture)}return t},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&J(this)}}),l.profile&&(s.getTotalTextureSize=function(){var e=0;return Object.keys(q).forEach((function(t){e+=q[t].stats.size})),e}),{create2D:ee,createCube:te,clear:re,getTexture:function(e){return null},restore:ie,refresh:oe}}Or[_n]=2,Or[Cn]=2,Or[$n]=2,Or[Tn]=4,Or[In]=.5,Or[Dn]=.5,Or[Ln]=1,Or[Rn]=1,Or[Bn]=.5,Or[jn]=1,Or[Fn]=1,Or[Gn]=.5,Or[Vn]=.25,Or[zn]=.5,Or[Hn]=.25,Or[Un]=.5;var Kr=36161,Zr=32854,Qr=32855,Jr=36194,ei=33189,ti=36168,ni=34041,ri=35907,ii=34836,oi=34842,ai=34843,si=[];function li(e,t,n){return si[e]*t*n}si[Zr]=2,si[Qr]=2,si[Jr]=2,si[ei]=2,si[ti]=1,si[ni]=4,si[ri]=4,si[ii]=16,si[oi]=8,si[ai]=6;var ci=function(e,t,n,r,i){var o={rgba4:Zr,rgb565:Jr,"rgb5 a1":Qr,depth:ei,stencil:ti,"depth stencil":ni};t.ext_srgb&&(o.srgba=ri),t.ext_color_buffer_half_float&&(o.rgba16f=oi,o.rgb16f=ai),t.webgl_color_buffer_float&&(o.rgba32f=ii);var a=[];Object.keys(o).forEach((function(e){var t=o[e];a[t]=e}));var s=0,l={};function c(e){this.id=s++,this.refCount=1,this.renderbuffer=e,this.format=Zr,this.width=0,this.height=0,i.profile&&(this.stats={size:0})}function u(t){var n=t.renderbuffer;ne(n,"must not double destroy renderbuffer"),e.bindRenderbuffer(Kr,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete l[t.id],r.renderbufferCount--}function h(t,s){var u=new c(e.createRenderbuffer());function h(t,r){var s=0,l=0,c=Zr;if("object"==typeof t&&t){var d=t;if("shape"in d){var f=d.shape;ne(Array.isArray(f)&&f.length>=2,"invalid renderbuffer shape"),s=0|f[0],l=0|f[1]}else"radius"in d&&(s=l=0|d.radius),"width"in d&&(s=0|d.width),"height"in d&&(l=0|d.height);"format"in d&&(ne.parameter(d.format,o,"invalid renderbuffer format"),c=o[d.format])}else"number"==typeof t?(s=0|t,l="number"==typeof r?0|r:s):t?ne.raise("invalid arguments to renderbuffer constructor"):s=l=1;if(ne(s>0&&l>0&&s<=n.maxRenderbufferSize&&l<=n.maxRenderbufferSize,"invalid renderbuffer size"),s!==u.width||l!==u.height||c!==u.format)return h.width=u.width=s,h.height=u.height=l,u.format=c,e.bindRenderbuffer(Kr,u.renderbuffer),e.renderbufferStorage(Kr,c,s,l),ne(0===e.getError(),"invalid render buffer format"),i.profile&&(u.stats.size=li(u.format,u.width,u.height)),h.format=a[u.format],h}function d(t,r){var o=0|t,a=0|r||o;return o===u.width&&a===u.height||(ne(o>0&&a>0&&o<=n.maxRenderbufferSize&&a<=n.maxRenderbufferSize,"invalid renderbuffer size"),h.width=u.width=o,h.height=u.height=a,e.bindRenderbuffer(Kr,u.renderbuffer),e.renderbufferStorage(Kr,u.format,o,a),ne(0===e.getError(),"invalid render buffer format"),i.profile&&(u.stats.size=li(u.format,u.width,u.height))),h}return l[u.id]=u,r.renderbufferCount++,h(t,s),h.resize=d,h._reglType="renderbuffer",h._renderbuffer=u,i.profile&&(h.stats=u.stats),h.destroy=function(){u.decRef()},h}function d(){$t(l).forEach((function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(Kr,t.renderbuffer),e.renderbufferStorage(Kr,t.format,t.width,t.height)})),e.bindRenderbuffer(Kr,null)}return c.prototype.decRef=function(){--this.refCount<=0&&u(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(l).forEach((function(t){e+=l[t].stats.size})),e}),{create:h,clear:function(){$t(l).forEach(u)},restore:d}},ui=36160,hi=36161,di=3553,fi=34069,pi=36064,gi=36096,mi=36128,vi=33306,yi=36053,bi=36054,xi=36055,wi=36057,_i=36061,Ci=36193,$i=5121,Si=5126,Ei=6407,Ai=6408,Mi=6402,ki=[Ei,Ai],Ti=[];Ti[Ai]=4,Ti[Ei]=3;var Pi=[];Pi[$i]=1,Pi[Si]=4,Pi[Ci]=2;var Oi=33189,Ni=36168,Ii=34041,Di=[32854,32855,36194,35907,34842,34843,34836],Li={};function Ri(e,n,r,i,o,a){var s={cur:null,next:null,dirty:!1,setFBO:null},l=["rgba"],c=["rgba4","rgb565","rgb5 a1"];n.ext_srgb&&c.push("srgba"),n.ext_color_buffer_half_float&&c.push("rgba16f","rgb16f"),n.webgl_color_buffer_float&&c.push("rgba32f");var u=["uint8"];function h(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=0,i=0;t?(r=t.width,i=t.height):n&&(r=n.width,i=n.height),this.width=r,this.height=i}function d(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function f(e,t,n){if(e)if(e.texture){var r=e.texture._texture,i=Math.max(1,r.width),o=Math.max(1,r.height);ne(i===t&&o===n,"inconsistent width/height for supplied texture"),r.refCount+=1}else{var a=e.renderbuffer._renderbuffer;ne(a.width===t&&a.height===n,"inconsistent width/height for renderbuffer"),a.refCount+=1}}function p(t,n){n&&(n.texture?e.framebufferTexture2D(ui,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(ui,t,hi,n.renderbuffer._renderbuffer.renderbuffer))}function g(e){var t=di,n=null,r=null,i=e;"object"==typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),ne.type(i,"function","invalid attachment data");var o=i._reglType;return"texture2d"===o?(n=i,ne(t===di)):"textureCube"===o?(n=i,ne(t>=fi&&t<fi+6,"invalid cube map target")):"renderbuffer"===o?(r=i,t=hi):ne.raise("invalid regl object for attachment"),new h(t,n,r)}function m(e,t,n,r,a){if(n){var s=i.create2D({width:e,height:t,format:r,type:a});return s._texture.refCount=0,new h(di,s,null)}var l=o.create({width:e,height:t,format:r});return l._renderbuffer.refCount=0,new h(hi,null,l)}function v(e){return e&&(e.texture||e.renderbuffer)}function y(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n),e.width=t,e.height=n)}n.oes_texture_half_float&&u.push("half float","float16"),n.oes_texture_float&&u.push("float","float32");var b=0,x={};function w(){this.id=b++,x[this.id]=this,this.framebuffer=e.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function _(e){e.colorAttachments.forEach(d),d(e.depthAttachment),d(e.stencilAttachment),d(e.depthStencilAttachment)}function C(t){var n=t.framebuffer;ne(n,"must not double destroy framebuffer"),e.deleteFramebuffer(n),t.framebuffer=null,a.framebufferCount--,delete x[t.id]}function $(t){var n;e.bindFramebuffer(ui,t.framebuffer);var i=t.colorAttachments;for(n=0;n<i.length;++n)p(pi+n,i[n]);for(n=i.length;n<r.maxColorAttachments;++n)e.framebufferTexture2D(ui,pi+n,di,null,0);e.framebufferTexture2D(ui,vi,di,null,0),e.framebufferTexture2D(ui,gi,di,null,0),e.framebufferTexture2D(ui,mi,di,null,0),p(gi,t.depthAttachment),p(mi,t.stencilAttachment),p(vi,t.depthStencilAttachment);var o=e.checkFramebufferStatus(ui);e.isContextLost()||o===yi||ne.raise("framebuffer configuration not supported, status = "+Li[o]),e.bindFramebuffer(ui,s.next?s.next.framebuffer:null),s.cur=s.next,e.getError()}function S(e,i){var o=new w;function h(e,t){var i;ne(s.next!==o,"can not update framebuffer which is currently in use");var a=0,d=0,p=!0,y=!0,b=null,x=!0,w="rgba",C="uint8",S=1,E=null,A=null,M=null,k=!1;if("number"==typeof e)a=0|e,d=0|t||a;else if(e){ne.type(e,"object","invalid arguments for framebuffer");var T=e;if("shape"in T){var P=T.shape;ne(Array.isArray(P)&&P.length>=2,"invalid shape for framebuffer"),a=P[0],d=P[1]}else"radius"in T&&(a=d=T.radius),"width"in T&&(a=T.width),"height"in T&&(d=T.height);("color"in T||"colors"in T)&&(b=T.color||T.colors,Array.isArray(b)&&ne(1===b.length||n.webgl_draw_buffers,"multiple render targets not supported")),b||("colorCount"in T&&(S=0|T.colorCount,ne(S>0,"invalid color buffer count")),"colorTexture"in T&&(x=!!T.colorTexture,w="rgba4"),"colorType"in T&&(C=T.colorType,x?(ne(n.oes_texture_float||!("float"===C||"float32"===C),"you must enable OES_texture_float in order to use floating point framebuffer objects"),ne(n.oes_texture_half_float||!("half float"===C||"float16"===C),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):"half float"===C||"float16"===C?(ne(n.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),w="rgba16f"):"float"!==C&&"float32"!==C||(ne(n.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),w="rgba32f"),ne.oneOf(C,u,"invalid color type")),"colorFormat"in T&&(w=T.colorFormat,l.indexOf(w)>=0?x=!0:c.indexOf(w)>=0?x=!1:x?ne.oneOf(T.colorFormat,l,"invalid color format for texture"):ne.oneOf(T.colorFormat,c,"invalid color format for renderbuffer"))),("depthTexture"in T||"depthStencilTexture"in T)&&(k=!(!T.depthTexture&&!T.depthStencilTexture),ne(!k||n.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in T&&("boolean"==typeof T.depth?p=T.depth:(E=T.depth,y=!1)),"stencil"in T&&("boolean"==typeof T.stencil?y=T.stencil:(A=T.stencil,p=!1)),"depthStencil"in T&&("boolean"==typeof T.depthStencil?p=y=T.depthStencil:(M=T.depthStencil,p=!1,y=!1))}else a=d=1;var O=null,N=null,I=null,D=null;if(Array.isArray(b))O=b.map(g);else if(b)O=[g(b)];else for(O=new Array(S),i=0;i<S;++i)O[i]=m(a,d,x,w,C);ne(n.webgl_draw_buffers||O.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),ne(O.length<=r.maxColorAttachments,"too many color attachments, not supported"),a=a||O[0].width,d=d||O[0].height,E?N=g(E):p&&!y&&(N=m(a,d,k,"depth","uint32")),A?I=g(A):y&&!p&&(I=m(a,d,!1,"stencil","uint8")),M?D=g(M):!E&&!A&&y&&p&&(D=m(a,d,k,"depth stencil","depth stencil")),ne(!!E+!!A+!!M<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var L=null;for(i=0;i<O.length;++i)if(f(O[i],a,d),ne(!O[i]||O[i].texture&&ki.indexOf(O[i].texture._texture.format)>=0||O[i].renderbuffer&&Di.indexOf(O[i].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+i+" is invalid"),O[i]&&O[i].texture){var R=Ti[O[i].texture._texture.format]*Pi[O[i].texture._texture.type];null===L?L=R:ne(L===R,"all color attachments much have the same number of bits per pixel.")}return f(N,a,d),ne(!N||N.texture&&N.texture._texture.format===Mi||N.renderbuffer&&N.renderbuffer._renderbuffer.format===Oi,"invalid depth attachment for framebuffer object"),f(I,a,d),ne(!I||I.renderbuffer&&I.renderbuffer._renderbuffer.format===Ni,"invalid stencil attachment for framebuffer object"),f(D,a,d),ne(!D||D.texture&&D.texture._texture.format===Ii||D.renderbuffer&&D.renderbuffer._renderbuffer.format===Ii,"invalid depth-stencil attachment for framebuffer object"),_(o),o.width=a,o.height=d,o.colorAttachments=O,o.depthAttachment=N,o.stencilAttachment=I,o.depthStencilAttachment=D,h.color=O.map(v),h.depth=v(N),h.stencil=v(I),h.depthStencil=v(D),h.width=o.width,h.height=o.height,$(o),h}function d(e,t){ne(s.next!==o,"can not resize a framebuffer which is currently in use");var n=Math.max(0|e,1),r=Math.max(0|t||n,1);if(n===o.width&&r===o.height)return h;for(var i=o.colorAttachments,a=0;a<i.length;++a)y(i[a],n,r);return y(o.depthAttachment,n,r),y(o.stencilAttachment,n,r),y(o.depthStencilAttachment,n,r),o.width=h.width=n,o.height=h.height=r,$(o),h}return a.framebufferCount++,h(e,i),t(h,{resize:d,_reglType:"framebuffer",_framebuffer:o,destroy:function(){C(o),_(o)},use:function(e){s.setFBO({framebuffer:h},e)}})}function E(e){var o=Array(6);function a(e){var r;ne(o.indexOf(s.next)<0,"can not update framebuffer which is currently in use");var c,h={color:null},d=0,f=null,p="rgba",g="uint8",m=1;if("number"==typeof e)d=0|e;else if(e){ne.type(e,"object","invalid arguments for framebuffer");var v=e;if("shape"in v){var y=v.shape;ne(Array.isArray(y)&&y.length>=2,"invalid shape for framebuffer"),ne(y[0]===y[1],"cube framebuffer must be square"),d=y[0]}else"radius"in v&&(d=0|v.radius),"width"in v?(d=0|v.width,"height"in v&&ne(v.height===d,"must be square")):"height"in v&&(d=0|v.height);("color"in v||"colors"in v)&&(f=v.color||v.colors,Array.isArray(f)&&ne(1===f.length||n.webgl_draw_buffers,"multiple render targets not supported")),f||("colorCount"in v&&(m=0|v.colorCount,ne(m>0,"invalid color buffer count")),"colorType"in v&&(ne.oneOf(v.colorType,u,"invalid color type"),g=v.colorType),"colorFormat"in v&&(p=v.colorFormat,ne.oneOf(v.colorFormat,l,"invalid color format for texture"))),"depth"in v&&(h.depth=v.depth),"stencil"in v&&(h.stencil=v.stencil),"depthStencil"in v&&(h.depthStencil=v.depthStencil)}else d=1;if(f)if(Array.isArray(f))for(c=[],r=0;r<f.length;++r)c[r]=f[r];else c=[f];else{c=Array(m);var b={radius:d,format:p,type:g};for(r=0;r<m;++r)c[r]=i.createCube(b)}for(h.color=Array(c.length),r=0;r<c.length;++r){var x=c[r];ne("function"==typeof x&&"textureCube"===x._reglType,"invalid cube map"),d=d||x.width,ne(x.width===d&&x.height===d,"invalid cube map shape"),h.color[r]={target:fi,data:c[r]}}for(r=0;r<6;++r){for(var w=0;w<c.length;++w)h.color[w].target=fi+r;r>0&&(h.depth=o[0].depth,h.stencil=o[0].stencil,h.depthStencil=o[0].depthStencil),o[r]?o[r](h):o[r]=S(h)}return t(a,{width:d,height:d,color:c})}function c(e){var t,n=0|e;if(ne(n>0&&n<=r.maxCubeMapSize,"invalid radius for cube fbo"),n===a.width)return a;var i=a.color;for(t=0;t<i.length;++t)i[t].resize(n);for(t=0;t<6;++t)o[t].resize(n);return a.width=a.height=n,a}return a(e),t(a,{faces:o,resize:c,_reglType:"framebufferCube",destroy:function(){o.forEach((function(e){e.destroy()}))}})}function A(){s.cur=null,s.next=null,s.dirty=!0,$t(x).forEach((function(t){t.framebuffer=e.createFramebuffer(),$(t)}))}return t(s,{getFramebuffer:function(e){if("function"==typeof e&&"framebuffer"===e._reglType){var t=e._framebuffer;if(t instanceof w)return t}return null},create:S,createCube:E,clear:function(){$t(x).forEach(C)},restore:A})}Li[yi]="complete",Li[bi]="incomplete attachment",Li[wi]="incomplete dimensions",Li[xi]="incomplete, missing attachment",Li[_i]="unsupported";var Bi=5126,ji=34962;function Fi(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Bi,this.offset=0,this.stride=0,this.divisor=0}function Gi(t,n,r,i,o){for(var a=r.maxAttributes,s=new Array(a),l=0;l<a;++l)s[l]=new Fi;var c=0,u={},h={Record:Fi,scope:{},state:s,currentVAO:null,targetVAO:null,restore:f()?x:function(){},createVAO:w,getVAO:g,destroyBuffer:d,setVAO:f()?m:v,clear:f()?y:function(){}};function d(e){for(var n=0;n<s.length;++n){var r=s[n];r.buffer===e&&(t.disableVertexAttribArray(n),r.buffer=null)}}function f(){return n.oes_vertex_array_object}function p(){return n.angle_instanced_arrays}function g(e){return"function"==typeof e&&e._vao?e._vao:null}function m(e){if(e!==h.currentVAO){var t=f();e?t.bindVertexArrayOES(e.vao):t.bindVertexArrayOES(null),h.currentVAO=e}}function v(e){if(e!==h.currentVAO){if(e)e.bindAttrs();else for(var n=p(),r=0;r<s.length;++r){var i=s[r];i.buffer?(t.enableVertexAttribArray(r),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offfset),n&&i.divisor&&n.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}h.currentVAO=e}}function y(){$t(u).forEach((function(e){e.destroy()}))}function b(){this.id=++c,this.attributes=[];var e=f();this.vao=e?e.createVertexArrayOES():null,u[this.id]=this,this.buffers=[]}function x(){f()&&$t(u).forEach((function(e){e.refresh()}))}function w(t){var r=new b;function s(t){ne(Array.isArray(t),"arguments to vertex array constructor must be an array"),ne(t.length<a,"too many attributes"),ne(t.length>0,"must specify at least one attribute");var i={},l=r.attributes;l.length=t.length;for(var c=0;c<t.length;++c){var u,h=t[c],d=l[c]=new Fi,f=h.data||h;Array.isArray(f)||e(f)||Ct(f)?(r.buffers[c]&&(u=r.buffers[c],e(f)&&u._buffer.byteLength>=f.byteLength?u.subdata(f):(u.destroy(),r.buffers[c]=null)),r.buffers[c]||(u=r.buffers[c]=o.create(h,ji,!1,!0)),d.buffer=o.getBuffer(u),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1,i[c]=1):o.getBuffer(h)?(d.buffer=o.getBuffer(h),d.size=0|d.buffer.dimension,d.normalized=!1,d.type=d.buffer.dtype,d.offset=0,d.stride=0,d.divisor=0,d.state=1):o.getBuffer(h.buffer)?(d.buffer=o.getBuffer(h.buffer),d.size=0|(+h.size||d.buffer.dimension),d.normalized=!!h.normalized||!1,"type"in h?(ne.parameter(h.type,Nt,"invalid buffer type"),d.type=Nt[h.type]):d.type=d.buffer.dtype,d.offset=0|(h.offset||0),d.stride=0|(h.stride||0),d.divisor=0|(h.divisor||0),d.state=1,ne(d.size>=1&&d.size<=4,"size must be between 1 and 4"),ne(d.offset>=0,"invalid offset"),ne(d.stride>=0&&d.stride<=255,"stride must be between 0 and 255"),ne(d.divisor>=0,"divisor must be positive"),ne(!d.divisor||!!n.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in h?(ne(c>0,"first attribute must not be a constant"),d.x=+h.x||0,d.y=+h.y||0,d.z=+h.z||0,d.w=+h.w||0,d.state=2):ne(!1,"invalid attribute spec for location "+c)}for(var p=0;p<r.buffers.length;++p)!i[p]&&r.buffers[p]&&(r.buffers[p].destroy(),r.buffers[p]=null);return r.refresh(),s}return i.vaoCount+=1,s.destroy=function(){for(var e=0;e<r.buffers.length;++e)r.buffers[e]&&r.buffers[e].destroy();r.buffers.length=0,r.destroy()},s._vao=r,s._reglType="vao",s(t)}return b.prototype.bindAttrs=function(){for(var e=p(),n=this.attributes,r=0;r<n.length;++r){var i=n[r];i.buffer?(t.enableVertexAttribArray(r),t.bindBuffer(ji,i.buffer.buffer),t.vertexAttribPointer(r,i.size,i.type,i.normalized,i.stride,i.offset),e&&i.divisor&&e.vertexAttribDivisorANGLE(r,i.divisor)):(t.disableVertexAttribArray(r),t.vertexAttrib4f(r,i.x,i.y,i.z,i.w))}for(var o=n.length;o<a;++o)t.disableVertexAttribArray(o)},b.prototype.refresh=function(){var e=f();e&&(e.bindVertexArrayOES(this.vao),this.bindAttrs(),h.currentVAO=this)},b.prototype.destroy=function(){if(this.vao){var e=f();this===h.currentVAO&&(h.currentVAO=null,e.bindVertexArrayOES(null)),e.deleteVertexArrayOES(this.vao),this.vao=null}u[this.id]&&(delete u[this.id],i.vaoCount-=1)},h}var Vi=35632,zi=35633,Hi=35718,Ui=35721;function Wi(e,n,r,i){var o={},a={};function s(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function l(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function c(t,r,i){var s=t===Vi?o:a,l=s[r];if(!l){var c=n.str(r);l=e.createShader(t),e.shaderSource(l,c),e.compileShader(l),ne.shaderError(e,l,c,t,i),s[r]=l}return l}var u={},h=[],d=0;function f(e,t){this.id=d++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,i.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function p(t,r,o){var a,u,h=c(Vi,t.fragId),d=c(zi,t.vertId),f=t.program=e.createProgram();if(e.attachShader(f,h),e.attachShader(f,d),o)for(a=0;a<o.length;++a){var p=o[a];e.bindAttribLocation(f,p[0],p[1])}e.linkProgram(f),ne.linkError(e,f,n.str(t.fragId),n.str(t.vertId),r);var g=e.getProgramParameter(f,Hi);i.profile&&(t.stats.uniformsCount=g);var m=t.uniforms;for(a=0;a<g;++a)if(u=e.getActiveUniform(f,a))if(u.size>1)for(var v=0;v<u.size;++v){var y=u.name.replace("[0]","["+v+"]");l(m,new s(y,n.id(y),e.getUniformLocation(f,y),u))}else l(m,new s(u.name,n.id(u.name),e.getUniformLocation(f,u.name),u));var b=e.getProgramParameter(f,Ui);i.profile&&(t.stats.attributesCount=b);var x=t.attributes;for(a=0;a<b;++a)(u=e.getActiveAttrib(f,a))&&l(x,new s(u.name,n.id(u.name),e.getAttribLocation(f,u.name),u))}function g(){o={},a={};for(var e=0;e<h.length;++e)p(h[e],null,h[e].attributes.map((function(e){return[e.location,e.name]})))}return i.profile&&(r.getMaxUniformsCount=function(){var e=0;return h.forEach((function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)})),e},r.getMaxAttributesCount=function(){var e=0;return h.forEach((function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)})),e}),{clear:function(){var t=e.deleteShader.bind(e);$t(o).forEach(t),o={},$t(a).forEach(t),a={},h.forEach((function(t){e.deleteProgram(t.program)})),h.length=0,u={},r.shaderCount=0},program:function(n,i,s,l){ne.command(n>=0,"missing vertex shader",s),ne.command(i>=0,"missing fragment shader",s);var c=u[i];c||(c=u[i]={});var d=c[n];if(d&&(d.refCount++,!l))return d;var g=new f(i,n);return r.shaderCount++,p(g,s,l),d||(c[n]=g),h.push(g),t(g,{destroy:function(){if(g.refCount--,g.refCount<=0){e.deleteProgram(g.program);var t=h.indexOf(g);h.splice(t,1),r.shaderCount--}c[g.vertId].refCount<=0&&(e.deleteShader(a[g.vertId]),delete a[g.vertId],delete u[g.fragId][g.vertId]),Object.keys(u[g.fragId]).length||(e.deleteShader(o[g.fragId]),delete o[g.fragId],delete u[g.fragId])}})},restore:g,shader:c,frag:-1,vert:-1}}var qi=6408,Yi=5121,Xi=3333,Ki=5126;function Zi(t,n,r,i,o,a,s){function l(l){var c;null===n.next?(ne(o.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),c=Yi):(ne(null!==n.next.colorAttachments[0].texture,"You cannot read from a renderbuffer"),c=n.next.colorAttachments[0].texture._texture.type,a.oes_texture_float?(ne(c===Yi||c===Ki,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),c===Ki&&ne(s.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):ne(c===Yi,"Reading from a framebuffer is only allowed for the type 'uint8'"));var u=0,h=0,d=i.framebufferWidth,f=i.framebufferHeight,p=null;e(l)?p=l:l&&(ne.type(l,"object","invalid arguments to regl.read()"),u=0|l.x,h=0|l.y,ne(u>=0&&u<i.framebufferWidth,"invalid x offset for regl.read"),ne(h>=0&&h<i.framebufferHeight,"invalid y offset for regl.read"),d=0|(l.width||i.framebufferWidth-u),f=0|(l.height||i.framebufferHeight-h),p=l.data||null),p&&(c===Yi?ne(p instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):c===Ki&&ne(p instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),ne(d>0&&d+u<=i.framebufferWidth,"invalid width for read pixels"),ne(f>0&&f+h<=i.framebufferHeight,"invalid height for read pixels"),r();var g=d*f*4;return p||(c===Yi?p=new Uint8Array(g):c===Ki&&(p=p||new Float32Array(g))),ne.isTypedArray(p,"data buffer for regl.read() must be a typedarray"),ne(p.byteLength>=g,"data buffer for regl.read() too small"),t.pixelStorei(Xi,4),t.readPixels(u,h,d,f,qi,c,p),p}function c(e){var t;return n.setFBO({framebuffer:e.framebuffer},(function(){t=l(e)})),t}function u(e){return e&&"framebuffer"in e?c(e):l(e)}return u}function Qi(e){return Array.prototype.slice.call(e)}function Ji(e){return Qi(e).join("")}function eo(){var e=0,n=[],r=[];function i(t){for(var i=0;i<r.length;++i)if(r[i]===t)return n[i];var o="g"+e++;return n.push(o),r.push(t),o}function o(){var n=[];function r(){n.push.apply(n,Qi(arguments))}var i=[];function o(){var t="v"+e++;return i.push(t),arguments.length>0&&(n.push(t,"="),n.push.apply(n,Qi(arguments)),n.push(";")),t}return t(r,{def:o,toString:function(){return Ji([i.length>0?"var "+i.join(",")+";":"",Ji(n)])}})}function a(){var e=o(),n=o(),r=e.toString,i=n.toString;function a(t,r){n(t,r,"=",e.def(t,r),";")}return t((function(){e.apply(e,Qi(arguments))}),{def:e.def,entry:e,exit:n,save:a,set:function(t,n,r){a(t,n),e(t,n,"=",r,";")},toString:function(){return r()+i()}})}function s(){var e=Ji(arguments),n=a(),r=a(),i=n.toString,o=r.toString;return t(n,{then:function(){return n.apply(n,Qi(arguments)),this},else:function(){return r.apply(r,Qi(arguments)),this},toString:function(){var t=o();return t&&(t="else{"+t+"}"),Ji(["if(",e,"){",i(),"}",t])}})}var l=o(),c={};function u(e,n){var r=[];function i(){var e="a"+r.length;return r.push(e),e}n=n||0;for(var o=0;o<n;++o)i();var s=a(),l=s.toString;return c[e]=t(s,{arg:i,toString:function(){return Ji(["function(",r.join(),"){",l(),"}"])}})}function h(){var e=['"use strict";',l,"return {"];Object.keys(c).forEach((function(t){e.push('"',t,'":',c[t].toString(),",")})),e.push("}");var t=Ji(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(t)).apply(null,r)}return{global:l,link:i,block:o,proc:u,scope:a,cond:s,compile:h}}var to="xyzw".split(""),no=5121,ro=1,io=2,oo=0,ao=1,so=2,lo=3,co=4,uo=5,ho=6,fo="dither",po="blend.enable",go="blend.color",mo="blend.equation",vo="blend.func",yo="depth.enable",bo="depth.func",xo="depth.range",wo="depth.mask",_o="colorMask",Co="cull.enable",$o="cull.face",So="frontFace",Eo="lineWidth",Ao="polygonOffset.enable",Mo="polygonOffset.offset",ko="sample.alpha",To="sample.enable",Po="sample.coverage",Oo="stencil.enable",No="stencil.mask",Io="stencil.func",Do="stencil.opFront",Lo="stencil.opBack",Ro="scissor.enable",Bo="scissor.box",jo="viewport",Fo="profile",Go="framebuffer",Vo="vert",zo="frag",Ho="elements",Uo="primitive",Wo="count",qo="offset",Yo="instances",Xo="vao",Ko="Width",Zo="Height",Qo=Go+Ko,Jo=Go+Zo,ea=jo+Ko,ta=jo+Zo,na="drawingBuffer",ra=na+Ko,ia=na+Zo,oa=[vo,mo,Io,Do,Lo,Po,jo,Bo,Mo],aa=34962,sa=34963,la=3553,ca=34067,ua=2884,ha=3042,da=3024,fa=2960,pa=2929,ga=3089,ma=32823,va=32926,ya=32928,ba=5126,xa=35664,wa=35665,_a=35666,Ca=5124,$a=35667,Sa=35668,Ea=35669,Aa=35670,Ma=35671,ka=35672,Ta=35673,Pa=35674,Oa=35675,Na=35676,Ia=35678,Da=35680,La=4,Ra=1028,Ba=1029,ja=2304,Fa=2305,Ga=32775,Va=32776,za=519,Ha=7680,Ua=0,Wa=1,qa=32774,Ya=513,Xa=36160,Ka=36064,Za={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Qa=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Ja={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},es={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ts={frag:35632,vert:35633},ns={cw:ja,ccw:Fa};function rs(t){return Array.isArray(t)||e(t)||Ct(t)}function is(e){return e.sort((function(e,t){return e===jo?-1:t===jo?1:e<t?-1:1}))}function os(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function as(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function ss(e){return new os(!1,!1,!1,e)}function ls(e,t){var n=e.type;if(n===oo){var r=e.data.length;return new os(!0,r>=1,r>=2,t)}if(n===co){var i=e.data;return new os(i.thisDep,i.contextDep,i.propDep,t)}if(n===uo)return new os(!1,!1,!1,t);if(n===ho){for(var o=!1,a=!1,s=!1,l=0;l<e.data.length;++l){var c=e.data[l];if(c.type===ao)s=!0;else if(c.type===so)a=!0;else if(c.type===lo)o=!0;else if(c.type===oo){o=!0;var u=c.data;u>=1&&(a=!0),u>=2&&(s=!0)}else c.type===co&&(o=o||c.data.thisDep,a=a||c.data.contextDep,s=s||c.data.propDep)}return new os(o,a,s,t)}return new os(n===lo,n===so,n===ao,t)}var cs=new os(!1,!1,!1,(function(){}));function us(e,n,r,i,o,a,s,l,c,u,h,d,f,p,g){var m=u.Record,v={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(v.min=Ga,v.max=Va);var y=r.angle_instanced_arrays,b=r.webgl_draw_buffers,x={dirty:!0,profile:g.profile},w={},_=[],C={},$={};function S(e){return e.replace(".","_")}function E(e,t,n){var r=S(e);_.push(e),w[r]=x[r]=!!n,C[r]=t}function A(e,t,n){var r=S(e);_.push(e),Array.isArray(n)?(x[r]=n.slice(),w[r]=n.slice()):x[r]=w[r]=n,$[r]=t}E(fo,da),E(po,ha),A(go,"blendColor",[0,0,0,0]),A(mo,"blendEquationSeparate",[qa,qa]),A(vo,"blendFuncSeparate",[Wa,Ua,Wa,Ua]),E(yo,pa,!0),A(bo,"depthFunc",Ya),A(xo,"depthRange",[0,1]),A(wo,"depthMask",!0),A(_o,_o,[!0,!0,!0,!0]),E(Co,ua),A($o,"cullFace",Ba),A(So,So,Fa),A(Eo,Eo,1),E(Ao,ma),A(Mo,"polygonOffset",[0,0]),E(ko,va),E(To,ya),A(Po,"sampleCoverage",[1,!1]),E(Oo,fa),A(No,"stencilMask",-1),A(Io,"stencilFunc",[za,0,-1]),A(Do,"stencilOpSeparate",[Ra,Ha,Ha,Ha]),A(Lo,"stencilOpSeparate",[Ba,Ha,Ha,Ha]),E(Ro,ga),A(Bo,"scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),A(jo,jo,[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var M={gl:e,context:f,strings:n,next:w,current:x,draw:d,elements:a,buffer:o,shader:h,attributes:u.state,vao:u,uniforms:c,framebuffer:l,extensions:r,timer:p,isBufferArgs:rs},k={primTypes:Wt,compareFuncs:Ja,blendFuncs:Za,blendEquations:v,stencilOps:es,glTypes:Nt,orientationType:ns};ne.optional((function(){M.isArrayLike=hn})),b&&(k.backBuffer=[Ba],k.drawBuffer=Ee(i.maxDrawbuffers,(function(e){return 0===e?[0]:Ee(e,(function(e){return Ka+e}))})));var T=0;function P(){var e=eo(),t=e.link,r=e.global;e.id=T++,e.batchId="0";var i=t(M),o=e.shared={props:"a0"};Object.keys(M).forEach((function(e){o[e]=r.def(i,".",e)})),ne.optional((function(){e.CHECK=t(ne),e.commandStr=ne.guessCommand(),e.command=t(e.commandStr),e.assert=function(e,n,r){e("if(!(",n,"))",this.CHECK,".commandRaise(",t(r),",",this.command,");")},k.invalidBlendCombinations=Qa}));var a=e.next={},s=e.current={};Object.keys($).forEach((function(e){Array.isArray(x[e])&&(a[e]=r.def(o.next,".",e),s[e]=r.def(o.current,".",e))}));var l=e.constants={};Object.keys(k).forEach((function(e){l[e]=r.def(JSON.stringify(k[e]))})),e.invoke=function(n,r){switch(r.type){case oo:var i=["this",o.context,o.props,e.batchId];return n.def(t(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case ao:return n.def(o.props,r.data);case so:return n.def(o.context,r.data);case lo:return n.def("this",r.data);case co:return r.data.append(e,n),r.data.ref;case uo:return r.data.toString();case ho:return r.data.map((function(t){return e.invoke(n,t)}))}},e.attribCache={};var c={};return e.scopeAttrib=function(e){var r=n.id(e);if(r in c)return c[r];var i=u.scope[r];return i||(i=u.scope[r]=new m),c[r]=t(i)},e}function O(e){var t,n=e.static,r=e.dynamic;if(Fo in n){var i=!!n[Fo];(t=ss((function(e,t){return i}))).enable=i}else if(Fo in r){var o=r[Fo];t=ls(o,(function(e,t){return e.invoke(t,o)}))}return t}function N(e,t){var n=e.static,r=e.dynamic;if(Go in n){var i=n[Go];return i?(i=l.getFramebuffer(i),ne.command(i,"invalid framebuffer object"),ss((function(e,t){var n=e.link(i),r=e.shared;t.set(r.framebuffer,".next",n);var o=r.context;return t.set(o,"."+Qo,n+".width"),t.set(o,"."+Jo,n+".height"),n}))):ss((function(e,t){var n=e.shared;t.set(n.framebuffer,".next","null");var r=n.context;return t.set(r,"."+Qo,r+"."+ra),t.set(r,"."+Jo,r+"."+ia),"null"}))}if(Go in r){var o=r[Go];return ls(o,(function(e,t){var n=e.invoke(t,o),r=e.shared,i=r.framebuffer,a=t.def(i,".getFramebuffer(",n,")");ne.optional((function(){e.assert(t,"!"+n+"||"+a,"invalid framebuffer object")})),t.set(i,".next",a);var s=r.context;return t.set(s,"."+Qo,a+"?"+a+".width:"+s+"."+ra),t.set(s,"."+Jo,a+"?"+a+".height:"+s+"."+ia),a}))}return null}function I(e,t,n){var r=e.static,i=e.dynamic;function o(e){if(e in r){var o=r[e];ne.commandType(o,"object","invalid "+e,n.commandStr);var a,s,l=!0,c=0|o.x,u=0|o.y;return"width"in o?(a=0|o.width,ne.command(a>=0,"invalid "+e,n.commandStr)):l=!1,"height"in o?(s=0|o.height,ne.command(s>=0,"invalid "+e,n.commandStr)):l=!1,new os(!l&&t&&t.thisDep,!l&&t&&t.contextDep,!l&&t&&t.propDep,(function(e,t){var n=e.shared.context,r=a;"width"in o||(r=t.def(n,".",Qo,"-",c));var i=s;return"height"in o||(i=t.def(n,".",Jo,"-",u)),[c,u,r,i]}))}if(e in i){var h=i[e],d=ls(h,(function(t,n){var r=t.invoke(n,h);ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)}));var i=t.shared.context,o=n.def(r,".x|0"),a=n.def(r,".y|0"),s=n.def('"width" in ',r,"?",r,".width|0:","(",i,".",Qo,"-",o,")"),l=n.def('"height" in ',r,"?",r,".height|0:","(",i,".",Jo,"-",a,")");return ne.optional((function(){t.assert(n,s+">=0&&"+l+">=0","invalid "+e)})),[o,a,s,l]}));return t&&(d.thisDep=d.thisDep||t.thisDep,d.contextDep=d.contextDep||t.contextDep,d.propDep=d.propDep||t.propDep),d}return t?new os(t.thisDep,t.contextDep,t.propDep,(function(e,t){var n=e.shared.context;return[0,0,t.def(n,".",Qo),t.def(n,".",Jo)]})):null}var a=o(jo);if(a){var s=a;a=new os(a.thisDep,a.contextDep,a.propDep,(function(e,t){var n=s.append(e,t),r=e.shared.context;return t.set(r,"."+ea,n[2]),t.set(r,"."+ta,n[3]),n}))}return{viewport:a,scissor_box:o(Bo)}}function D(e,t){var n=e.static;if("string"==typeof n[zo]&&"string"==typeof n[Vo]){if(Object.keys(t.dynamic).length>0)return null;var r=t.static,i=Object.keys(r);if(i.length>0&&"number"==typeof r[i[0]]){for(var o=[],a=0;a<i.length;++a)ne("number"==typeof r[i[a]],"must specify all vertex attribute locations when using vaos"),o.push([0|r[i[a]],i[a]]);return o}}return null}function L(e,t,r){var i=e.static,o=e.dynamic;function a(e){if(e in i){var t=n.id(i[e]);ne.optional((function(){h.shader(ts[e],t,ne.guessCommand())}));var r=ss((function(){return t}));return r.id=t,r}if(e in o){var a=o[e];return ls(a,(function(t,n){var r=t.invoke(n,a),i=n.def(t.shared.strings,".id(",r,")");return ne.optional((function(){n(t.shared.shader,".shader(",ts[e],",",i,",",t.command,");")})),i}))}return null}var s,l=a(zo),c=a(Vo),u=null;return as(l)&&as(c)?(u=h.program(c.id,l.id,null,r),s=ss((function(e,t){return e.link(u)}))):s=new os(l&&l.thisDep||c&&c.thisDep,l&&l.contextDep||c&&c.contextDep,l&&l.propDep||c&&c.propDep,(function(e,t){var n,r=e.shared.shader;n=l?l.append(e,t):t.def(r,".",zo);var i=r+".program("+(c?c.append(e,t):t.def(r,".",Vo))+","+n;return ne.optional((function(){i+=","+e.command})),t.def(i+")")})),{frag:l,vert:c,progVar:s,program:u}}function R(e,t){var n=e.static,r=e.dynamic;function i(){if(Ho in n){var e=n[Ho];rs(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e),ne.command(e,"invalid elements",t.commandStr));var i=ss((function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r,r}return t.ELEMENTS=null,null}));return i.value=e,i}if(Ho in r){var o=r[Ho];return ls(o,(function(e,t){var n=e.shared,r=n.isBufferArgs,i=n.elements,a=e.invoke(t,o),s=t.def("null"),l=t.def(r,"(",a,")"),c=e.cond(l).then(s,"=",i,".createStream(",a,");").else(s,"=",i,".getElements(",a,");");return ne.optional((function(){e.assert(c.else,"!"+a+"||"+s,"invalid elements")})),t.entry(c),t.exit(e.cond(l).then(i,".destroyStream(",s,");")),e.ELEMENTS=s,s}))}return null}var o=i();function s(){if(Uo in n){var e=n[Uo];return ne.commandParameter(e,Wt,"invalid primitve",t.commandStr),ss((function(t,n){return Wt[e]}))}if(Uo in r){var i=r[Uo];return ls(i,(function(e,t){var n=e.constants.primTypes,r=e.invoke(t,i);return ne.optional((function(){e.assert(t,r+" in "+n,"invalid primitive, must be one of "+Object.keys(Wt))})),t.def(n,"[",r,"]")}))}return o?as(o)?o.value?ss((function(e,t){return t.def(e.ELEMENTS,".primType")})):ss((function(){return La})):new os(o.thisDep,o.contextDep,o.propDep,(function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",La)})):null}function l(e,i){if(e in n){var a=0|n[e];return ne.command(!i||a>=0,"invalid "+e,t.commandStr),ss((function(e,t){return i&&(e.OFFSET=a),a}))}if(e in r){var s=r[e];return ls(s,(function(t,n){var r=t.invoke(n,s);return i&&(t.OFFSET=r,ne.optional((function(){t.assert(n,r+">=0","invalid "+e)}))),r}))}return i&&o?ss((function(e,t){return e.OFFSET="0",0})):null}var c=l(qo,!0);function u(){if(Wo in n){var e=0|n[Wo];return ne.command("number"==typeof e&&e>=0,"invalid vertex count",t.commandStr),ss((function(){return e}))}if(Wo in r){var i=r[Wo];return ls(i,(function(e,t){var n=e.invoke(t,i);return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">=0&&"+n+"===("+n+"|0)","invalid vertex count")})),n}))}if(o){if(as(o)){if(o)return c?new os(c.thisDep,c.contextDep,c.propDep,(function(e,t){var n=t.def(e.ELEMENTS,".vertCount-",e.OFFSET);return ne.optional((function(){e.assert(t,n+">=0","invalid vertex offset/element buffer too small")})),n})):ss((function(e,t){return t.def(e.ELEMENTS,".vertCount")}));var a=ss((function(){return-1}));return ne.optional((function(){a.MISSING=!0})),a}var s=new os(o.thisDep||c.thisDep,o.contextDep||c.contextDep,o.propDep||c.propDep,(function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}));return ne.optional((function(){s.DYNAMIC=!0})),s}return null}return{elements:o,primitive:s(),count:u(),instances:l(Yo,!1),offset:c}}function B(e,t){var n=e.static,r=e.dynamic,o={};return _.forEach((function(e){var a=S(e);function s(t,i){if(e in n){var s=t(n[e]);o[a]=ss((function(){return s}))}else if(e in r){var l=r[e];o[a]=ls(l,(function(e,t){return i(e,t,e.invoke(t,l))}))}}switch(e){case Co:case po:case fo:case Oo:case yo:case Ro:case Ao:case ko:case To:case wo:return s((function(n){return ne.commandType(n,"boolean",e,t.commandStr),n}),(function(t,n,r){return ne.optional((function(){t.assert(n,"typeof "+r+'==="boolean"',"invalid flag "+e,t.commandStr)})),r}));case bo:return s((function(n){return ne.commandParameter(n,Ja,"invalid "+e,t.commandStr),Ja[n]}),(function(t,n,r){var i=t.constants.compareFuncs;return ne.optional((function(){t.assert(n,r+" in "+i,"invalid "+e+", must be one of "+Object.keys(Ja))})),n.def(i,"[",r,"]")}));case xo:return s((function(e){return ne.command(hn(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&e[0]<=e[1],"depth range is 2d array",t.commandStr),e}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===2&&typeof "+n+'[0]==="number"&&typeof '+n+'[1]==="number"&&'+n+"[0]<="+n+"[1]","depth range must be a 2d array")})),[t.def("+",n,"[0]"),t.def("+",n,"[1]")]}));case vo:return s((function(e){ne.commandType(e,"object","blend.func",t.commandStr);var n="srcRGB"in e?e.srcRGB:e.src,r="srcAlpha"in e?e.srcAlpha:e.src,i="dstRGB"in e?e.dstRGB:e.dst,o="dstAlpha"in e?e.dstAlpha:e.dst;return ne.commandParameter(n,Za,a+".srcRGB",t.commandStr),ne.commandParameter(r,Za,a+".srcAlpha",t.commandStr),ne.commandParameter(i,Za,a+".dstRGB",t.commandStr),ne.commandParameter(o,Za,a+".dstAlpha",t.commandStr),ne.command(-1===Qa.indexOf(n+", "+i),"unallowed blending combination (srcRGB, dstRGB) = ("+n+", "+i+")",t.commandStr),[Za[n],Za[i],Za[r],Za[o]]}),(function(t,n,r){var i=t.constants.blendFuncs;function o(o,a){var s=n.def('"',o,a,'" in ',r,"?",r,".",o,a,":",r,".",o);return ne.optional((function(){t.assert(n,s+" in "+i,"invalid "+e+"."+o+a+", must be one of "+Object.keys(Za))})),s}ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid blend func, must be an object")}));var a=o("src","RGB"),s=o("dst","RGB");ne.optional((function(){var e=t.constants.invalidBlendCombinations;t.assert(n,e+".indexOf("+a+'+", "+'+s+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")}));var l=n.def(i,"[",a,"]"),c=n.def(i,"[",o("src","Alpha"),"]");return[l,n.def(i,"[",s,"]"),c,n.def(i,"[",o("dst","Alpha"),"]")]}));case mo:return s((function(n){return"string"==typeof n?(ne.commandParameter(n,v,"invalid "+e,t.commandStr),[v[n],v[n]]):"object"==typeof n?(ne.commandParameter(n.rgb,v,e+".rgb",t.commandStr),ne.commandParameter(n.alpha,v,e+".alpha",t.commandStr),[v[n.rgb],v[n.alpha]]):void ne.commandRaise("invalid blend.equation",t.commandStr)}),(function(t,n,r){var i=t.constants.blendEquations,o=n.def(),a=n.def(),s=t.cond("typeof ",r,'==="string"');return ne.optional((function(){function n(e,n,r){t.assert(e,r+" in "+i,"invalid "+n+", must be one of "+Object.keys(v))}n(s.then,e,r),t.assert(s.else,r+"&&typeof "+r+'==="object"',"invalid "+e),n(s.else,e+".rgb",r+".rgb"),n(s.else,e+".alpha",r+".alpha")})),s.then(o,"=",a,"=",i,"[",r,"];"),s.else(o,"=",i,"[",r,".rgb];",a,"=",i,"[",r,".alpha];"),n(s),[o,a]}));case go:return s((function(e){return ne.command(hn(e)&&4===e.length,"blend.color must be a 4d array",t.commandStr),Ee(4,(function(t){return+e[t]}))}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","blend.color must be a 4d array")})),Ee(4,(function(e){return t.def("+",n,"[",e,"]")}))}));case No:return s((function(e){return ne.commandType(e,"number",a,t.commandStr),0|e}),(function(e,t,n){return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"',"invalid stencil.mask")})),t.def(n,"|0")}));case Io:return s((function(n){ne.commandType(n,"object",a,t.commandStr);var r=n.cmp||"keep",i=n.ref||0,o="mask"in n?n.mask:-1;return ne.commandParameter(r,Ja,e+".cmp",t.commandStr),ne.commandType(i,"number",e+".ref",t.commandStr),ne.commandType(o,"number",e+".mask",t.commandStr),[Ja[r],i,o]}),(function(e,t,n){var r=e.constants.compareFuncs;return ne.optional((function(){function i(){e.assert(t,Array.prototype.join.call(arguments,""),"invalid stencil.func")}i(n+"&&typeof ",n,'==="object"'),i('!("cmp" in ',n,")||(",n,".cmp in ",r,")")})),[t.def('"cmp" in ',n,"?",r,"[",n,".cmp]",":",Ha),t.def(n,".ref|0"),t.def('"mask" in ',n,"?",n,".mask|0:-1")]}));case Do:case Lo:return s((function(n){ne.commandType(n,"object",a,t.commandStr);var r=n.fail||"keep",i=n.zfail||"keep",o=n.zpass||"keep";return ne.commandParameter(r,es,e+".fail",t.commandStr),ne.commandParameter(i,es,e+".zfail",t.commandStr),ne.commandParameter(o,es,e+".zpass",t.commandStr),[e===Lo?Ba:Ra,es[r],es[i],es[o]]}),(function(t,n,r){var i=t.constants.stencilOps;function o(o){return ne.optional((function(){t.assert(n,'!("'+o+'" in '+r+")||("+r+"."+o+" in "+i+")","invalid "+e+"."+o+", must be one of "+Object.keys(es))})),n.def('"',o,'" in ',r,"?",i,"[",r,".",o,"]:",Ha)}return ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[e===Lo?Ba:Ra,o("fail"),o("zfail"),o("zpass")]}));case Mo:return s((function(e){ne.commandType(e,"object",a,t.commandStr);var n=0|e.factor,r=0|e.units;return ne.commandType(n,"number",a+".factor",t.commandStr),ne.commandType(r,"number",a+".units",t.commandStr),[n,r]}),(function(t,n,r){return ne.optional((function(){t.assert(n,r+"&&typeof "+r+'==="object"',"invalid "+e)})),[n.def(r,".factor|0"),n.def(r,".units|0")]}));case $o:return s((function(e){var n=0;return"front"===e?n=Ra:"back"===e&&(n=Ba),ne.command(!!n,a,t.commandStr),n}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+'==="front"||'+n+'==="back"',"invalid cull.face")})),t.def(n,'==="front"?',Ra,":",Ba)}));case Eo:return s((function(e){return ne.command("number"==typeof e&&e>=i.lineWidthDims[0]&&e<=i.lineWidthDims[1],"invalid line width, must be a positive number between "+i.lineWidthDims[0]+" and "+i.lineWidthDims[1],t.commandStr),e}),(function(e,t,n){return ne.optional((function(){e.assert(t,"typeof "+n+'==="number"&&'+n+">="+i.lineWidthDims[0]+"&&"+n+"<="+i.lineWidthDims[1],"invalid line width")})),n}));case So:return s((function(e){return ne.commandParameter(e,ns,a,t.commandStr),ns[e]}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+'==="cw"||'+n+'==="ccw"',"invalid frontFace, must be one of cw,ccw")})),t.def(n+'==="cw"?'+ja+":"+Fa)}));case _o:return s((function(e){return ne.command(hn(e)&&4===e.length,"color.mask must be length 4 array",t.commandStr),e.map((function(e){return!!e}))}),(function(e,t,n){return ne.optional((function(){e.assert(t,e.shared.isArrayLike+"("+n+")&&"+n+".length===4","invalid color.mask")})),Ee(4,(function(e){return"!!"+n+"["+e+"]"}))}));case Po:return s((function(e){ne.command("object"==typeof e&&e,a,t.commandStr);var n="value"in e?e.value:1,r=!!e.invert;return ne.command("number"==typeof n&&n>=0&&n<=1,"sample.coverage.value must be a number between 0 and 1",t.commandStr),[n,r]}),(function(e,t,n){return ne.optional((function(){e.assert(t,n+"&&typeof "+n+'==="object"',"invalid sample.coverage")})),[t.def('"value" in ',n,"?+",n,".value:1"),t.def("!!",n,".invert")]}))}})),o}function j(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach((function(e){var r,o=n[e];if("number"==typeof o||"boolean"==typeof o)r=ss((function(){return o}));else if("function"==typeof o){var a=o._reglType;"texture2d"===a||"textureCube"===a?r=ss((function(e){return e.link(o)})):"framebuffer"===a||"framebufferCube"===a?(ne.command(o.color.length>0,'missing color attachment for framebuffer sent to uniform "'+e+'"',t.commandStr),r=ss((function(e){return e.link(o.color[0])}))):ne.commandRaise('invalid data for uniform "'+e+'"',t.commandStr)}else hn(o)?r=ss((function(t){return t.global.def("[",Ee(o.length,(function(n){return ne.command("number"==typeof o[n]||"boolean"==typeof o[n],"invalid uniform "+e,t.commandStr),o[n]})),"]")})):ne.commandRaise('invalid or missing data for uniform "'+e+'"',t.commandStr);r.value=o,i[e]=r})),Object.keys(r).forEach((function(e){var t=r[e];i[e]=ls(t,(function(e,n){return e.invoke(n,t)}))})),i}function F(e,t){var r=e.static,i=e.dynamic,a={};return Object.keys(r).forEach((function(e){var i=r[e],s=n.id(e),l=new m;if(rs(i))l.state=ro,l.buffer=o.getBuffer(o.create(i,aa,!1,!0)),l.type=0;else{var c=o.getBuffer(i);if(c)l.state=ro,l.buffer=c,l.type=0;else if(ne.command("object"==typeof i&&i,"invalid data for attribute "+e,t.commandStr),"constant"in i){var u=i.constant;l.buffer="null",l.state=io,"number"==typeof u?l.x=u:(ne.command(hn(u)&&u.length>0&&u.length<=4,"invalid constant for attribute "+e,t.commandStr),to.forEach((function(e,t){t<u.length&&(l[e]=u[t])})))}else{c=rs(i.buffer)?o.getBuffer(o.create(i.buffer,aa,!1,!0)):o.getBuffer(i.buffer),ne.command(!!c,'missing buffer for attribute "'+e+'"',t.commandStr);var h=0|i.offset;ne.command(h>=0,'invalid offset for attribute "'+e+'"',t.commandStr);var d=0|i.stride;ne.command(d>=0&&d<256,'invalid stride for attribute "'+e+'", must be integer betweeen [0, 255]',t.commandStr);var f=0|i.size;ne.command(!("size"in i)||f>0&&f<=4,'invalid size for attribute "'+e+'", must be 1,2,3,4',t.commandStr);var p=!!i.normalized,g=0;"type"in i&&(ne.commandParameter(i.type,Nt,"invalid type for attribute "+e,t.commandStr),g=Nt[i.type]);var v=0|i.divisor;"divisor"in i&&(ne.command(0===v||y,'cannot specify divisor for attribute "'+e+'", instancing not supported',t.commandStr),ne.command(v>=0,'invalid divisor for attribute "'+e+'"',t.commandStr)),ne.optional((function(){var n=t.commandStr,r=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(i).forEach((function(t){ne.command(r.indexOf(t)>=0,'unknown parameter "'+t+'" for attribute pointer "'+e+'" (valid parameters are '+r+")",n)}))})),l.buffer=c,l.state=ro,l.size=f,l.normalized=p,l.type=g||c.dtype,l.offset=h,l.stride=d,l.divisor=v}}a[e]=ss((function(e,t){var n=e.attribCache;if(s in n)return n[s];var r={isStream:!1};return Object.keys(l).forEach((function(e){r[e]=l[e]})),l.buffer&&(r.buffer=e.link(l.buffer),r.type=r.type||r.buffer+".dtype"),n[s]=r,r}))})),Object.keys(i).forEach((function(e){var t=i[e];function n(n,r){var i=n.invoke(r,t),o=n.shared,a=n.constants,s=o.isBufferArgs,l=o.buffer;ne.optional((function(){n.assert(r,i+"&&(typeof "+i+'==="object"||typeof '+i+'==="function")&&('+s+"("+i+")||"+l+".getBuffer("+i+")||"+l+".getBuffer("+i+".buffer)||"+s+"("+i+'.buffer)||("constant" in '+i+"&&(typeof "+i+'.constant==="number"||'+o.isArrayLike+"("+i+".constant))))",'invalid dynamic attribute "'+e+'"')}));var c={isStream:r.def(!1)},u=new m;u.state=ro,Object.keys(u).forEach((function(e){c[e]=r.def(""+u[e])}));var h=c.buffer,d=c.type;function f(e){r(c[e],"=",i,".",e,"|0;")}return r("if(",s,"(",i,")){",c.isStream,"=true;",h,"=",l,".createStream(",aa,",",i,");",d,"=",h,".dtype;","}else{",h,"=",l,".getBuffer(",i,");","if(",h,"){",d,"=",h,".dtype;",'}else if("constant" in ',i,"){",c.state,"=",io,";","if(typeof "+i+'.constant === "number"){',c[to[0]],"=",i,".constant;",to.slice(1).map((function(e){return c[e]})).join("="),"=0;","}else{",to.map((function(e,t){return c[e]+"="+i+".constant.length>"+t+"?"+i+".constant["+t+"]:0;"})).join(""),"}}else{","if(",s,"(",i,".buffer)){",h,"=",l,".createStream(",aa,",",i,".buffer);","}else{",h,"=",l,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",h,".dtype;",c.normalized,"=!!",i,".normalized;"),f("size"),f("offset"),f("stride"),f("divisor"),r("}}"),r.exit("if(",c.isStream,"){",l,".destroyStream(",h,");","}"),c}a[e]=ls(t,n)})),a}function G(e,t){var n=e.static,r=e.dynamic;if(Xo in n){var i=n[Xo];return null!==i&&null===u.getVAO(i)&&(i=u.createVAO(i)),ss((function(e){return e.link(u.getVAO(i))}))}if(Xo in r){var o=r[Xo];return ls(o,(function(e,t){var n=e.invoke(t,o);return t.def(e.shared.vao+".getVAO("+n+")")}))}return null}function V(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach((function(e){var n=t[e];r[e]=ss((function(e,t){return"number"==typeof n||"boolean"==typeof n?""+n:e.link(n)}))})),Object.keys(n).forEach((function(e){var t=n[e];r[e]=ls(t,(function(e,n){return e.invoke(n,t)}))})),r}function z(e,t,n,i,o){var a=e.static,s=e.dynamic;ne.optional((function(){var e=[Go,Vo,zo,Ho,Uo,qo,Wo,Yo,Fo,Xo].concat(_);function t(t){Object.keys(t).forEach((function(t){ne.command(e.indexOf(t)>=0,'unknown parameter "'+t+'"',o.commandStr)}))}t(a),t(s)}));var l=D(e,t),c=N(e),h=I(e,c,o),d=R(e,o),f=B(e,o),p=L(e,o,l);function g(e){var t=h[e];t&&(f[e]=t)}g(jo),g(S(Bo));var m=Object.keys(f).length>0,v={framebuffer:c,draw:d,shader:p,state:f,dirty:m,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(v.profile=O(e),v.uniforms=j(n,o),v.drawVAO=v.scopeVAO=G(e),!v.drawVAO&&p.program&&!l&&r.angle_instanced_arrays){var y=!0,b=p.program.attributes.map((function(e){var n=t.static[e];return y=y&&!!n,n}));if(y&&b.length>0){var x=u.getVAO(u.createVAO(b));v.drawVAO=new os(null,null,null,(function(e,t){return e.link(x)})),v.useVAO=!0}}return l?v.useVAO=!0:v.attributes=F(t,o),v.context=V(i),v}function H(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach((function(o){t.save(r,"."+o);var a=n[o].append(e,t);Array.isArray(a)?i(r,".",o,"=[",a.join(),"];"):i(r,".",o,"=",a,";")})),t(i)}function U(e,t,n,r){var i,o=e.shared,a=o.gl,s=o.framebuffer;b&&(i=t.def(o.extensions,".webgl_draw_buffers"));var l,c=e.constants,u=c.drawBuffer,h=c.backBuffer;l=n?n.append(e,t):t.def(s,".next"),r||t("if(",l,"!==",s,".cur){"),t("if(",l,"){",a,".bindFramebuffer(",Xa,",",l,".framebuffer);"),b&&t(i,".drawBuffersWEBGL(",u,"[",l,".colorAttachments.length]);"),t("}else{",a,".bindFramebuffer(",Xa,",null);"),b&&t(i,".drawBuffersWEBGL(",h,");"),t("}",s,".cur=",l,";"),r||t("}")}function W(e,t,n){var r=e.shared,i=r.gl,o=e.current,a=e.next,s=r.current,l=r.next,c=e.cond(s,".dirty");_.forEach((function(t){var r,u,h=S(t);if(!(h in n.state))if(h in a){r=a[h],u=o[h];var d=Ee(x[h].length,(function(e){return c.def(r,"[",e,"]")}));c(e.cond(d.map((function(e,t){return e+"!=="+u+"["+t+"]"})).join("||")).then(i,".",$[h],"(",d,");",d.map((function(e,t){return u+"["+t+"]="+e})).join(";"),";"))}else{r=c.def(l,".",h);var f=e.cond(r,"!==",s,".",h);c(f),h in C?f(e.cond(r).then(i,".enable(",C[h],");").else(i,".disable(",C[h],");"),s,".",h,"=",r,";"):f(i,".",$[h],"(",r,");",s,".",h,"=",r,";")}})),0===Object.keys(n.state).length&&c(s,".dirty=false;"),t(c)}function q(e,t,n,r){var i=e.shared,o=e.current,a=i.current,s=i.gl;is(Object.keys(n)).forEach((function(i){var l=n[i];if(!r||r(l)){var c=l.append(e,t);if(C[i]){var u=C[i];as(l)?t(s,c?".enable(":".disable(",u,");"):t(e.cond(c).then(s,".enable(",u,");").else(s,".disable(",u,");")),t(a,".",i,"=",c,";")}else if(hn(c)){var h=o[i];t(s,".",$[i],"(",c,");",c.map((function(e,t){return h+"["+t+"]="+e})).join(";"),";")}else t(s,".",$[i],"(",c,");",a,".",i,"=",c,";")}}))}function Y(e,t){y&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function X(e,t,n,r,i){var o,a,s,l=e.shared,c=e.stats,u=l.current,h=l.timer,d=n.profile;function f(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function g(e){e(o=t.def(),"=",f(),";"),"string"==typeof i?e(c,".count+=",i,";"):e(c,".count++;"),p&&(r?e(a=t.def(),"=",h,".getNumPendingQueries();"):e(h,".beginQuery(",c,");"))}function m(e){e(c,".cpuTime+=",f(),"-",o,";"),p&&(r?e(h,".pushScopeStats(",a,",",h,".getNumPendingQueries(),",c,");"):e(h,".endQuery();"))}function v(e){var n=t.def(u,".profile");t(u,".profile=",e,";"),t.exit(u,".profile=",n,";")}if(d){if(as(d))return void(d.enable?(g(t),m(t.exit),v("true")):v("false"));v(s=d.append(e,t))}else s=t.def(u,".profile");var y=e.block();g(y),t("if(",s,"){",y,"}");var b=e.block();m(b),t.exit("if(",s,"){",b,"}")}function K(e,t,n,r,i){var o=e.shared;function a(e){switch(e){case xa:case $a:case Ma:return 2;case wa:case Sa:case ka:return 3;case _a:case Ea:case Ta:return 4;default:return 1}}function s(n,r,i){var a=o.gl,s=t.def(n,".location"),l=t.def(o.attributes,"[",s,"]"),c=i.state,u=i.buffer,h=[i.x,i.y,i.z,i.w],d=["buffer","normalized","offset","stride"];function f(){t("if(!",l,".buffer){",a,".enableVertexAttribArray(",s,");}");var n,o=i.type;if(n=i.size?t.def(i.size,"||",r):r,t("if(",l,".type!==",o,"||",l,".size!==",n,"||",d.map((function(e){return l+"."+e+"!=="+i[e]})).join("||"),"){",a,".bindBuffer(",aa,",",u,".buffer);",a,".vertexAttribPointer(",[s,n,o,i.normalized,i.stride,i.offset],");",l,".type=",o,";",l,".size=",n,";",d.map((function(e){return l+"."+e+"="+i[e]+";"})).join(""),"}"),y){var c=i.divisor;t("if(",l,".divisor!==",c,"){",e.instancing,".vertexAttribDivisorANGLE(",[s,c],");",l,".divisor=",c,";}")}}function p(){t("if(",l,".buffer){",a,".disableVertexAttribArray(",s,");",l,".buffer=null;","}if(",to.map((function(e,t){return l+"."+e+"!=="+h[t]})).join("||"),"){",a,".vertexAttrib4f(",s,",",h,");",to.map((function(e,t){return l+"."+e+"="+h[t]+";"})).join(""),"}")}c===ro?f():c===io?p():(t("if(",c,"===",ro,"){"),f(),t("}else{"),p(),t("}"))}r.forEach((function(r){var o,l=r.name,c=n.attributes[l];if(c){if(!i(c))return;o=c.append(e,t)}else{if(!i(cs))return;var u=e.scopeAttrib(l);ne.optional((function(){e.assert(t,u+".state","missing attribute "+l)})),o={},Object.keys(new m).forEach((function(e){o[e]=t.def(u,".",e)}))}s(e.link(r),a(r.info.type),o)}))}function Z(e,t,r,i,o){for(var a,s=e.shared,l=s.gl,c=0;c<i.length;++c){var u,h=i[c],d=h.name,f=h.info.type,p=r.uniforms[d],g=e.link(h)+".location";if(p){if(!o(p))continue;if(as(p)){var m=p.value;if(ne.command(null!=m,'missing uniform "'+d+'"',e.commandStr),f===Ia||f===Da){ne.command("function"==typeof m&&(f===Ia&&("texture2d"===m._reglType||"framebuffer"===m._reglType)||f===Da&&("textureCube"===m._reglType||"framebufferCube"===m._reglType)),"invalid texture for uniform "+d,e.commandStr);var v=e.link(m._texture||m.color[0]._texture);t(l,".uniform1i(",g,",",v+".bind());"),t.exit(v,".unbind();")}else if(f===Pa||f===Oa||f===Na){ne.optional((function(){ne.command(hn(m),"invalid matrix for uniform "+d,e.commandStr),ne.command(f===Pa&&4===m.length||f===Oa&&9===m.length||f===Na&&16===m.length,"invalid length for matrix uniform "+d,e.commandStr)}));var y=e.global.def("new Float32Array(["+Array.prototype.slice.call(m)+"])"),b=2;f===Oa?b=3:f===Na&&(b=4),t(l,".uniformMatrix",b,"fv(",g,",false,",y,");")}else{switch(f){case ba:ne.commandType(m,"number","uniform "+d,e.commandStr),a="1f";break;case xa:ne.command(hn(m)&&2===m.length,"uniform "+d,e.commandStr),a="2f";break;case wa:ne.command(hn(m)&&3===m.length,"uniform "+d,e.commandStr),a="3f";break;case _a:ne.command(hn(m)&&4===m.length,"uniform "+d,e.commandStr),a="4f";break;case Aa:ne.commandType(m,"boolean","uniform "+d,e.commandStr),a="1i";break;case Ca:ne.commandType(m,"number","uniform "+d,e.commandStr),a="1i";break;case Ma:case $a:ne.command(hn(m)&&2===m.length,"uniform "+d,e.commandStr),a="2i";break;case ka:case Sa:ne.command(hn(m)&&3===m.length,"uniform "+d,e.commandStr),a="3i";break;case Ta:case Ea:ne.command(hn(m)&&4===m.length,"uniform "+d,e.commandStr),a="4i"}t(l,".uniform",a,"(",g,",",hn(m)?Array.prototype.slice.call(m):m,");")}continue}u=p.append(e,t)}else{if(!o(cs))continue;u=t.def(s.uniforms,"[",n.id(d),"]")}f===Ia?(ne(!Array.isArray(u),"must specify a scalar prop for textures"),t("if(",u,"&&",u,'._reglType==="framebuffer"){',u,"=",u,".color[0];","}")):f===Da&&(ne(!Array.isArray(u),"must specify a scalar prop for cube maps"),t("if(",u,"&&",u,'._reglType==="framebufferCube"){',u,"=",u,".color[0];","}")),ne.optional((function(){function n(n,r){e.assert(t,n,'bad data or missing for uniform "'+d+'".  '+r)}function r(e){ne(!Array.isArray(u),"must not specify an array type for uniform"),n("typeof "+u+'==="'+e+'"',"invalid type, expected "+e)}function i(t,r){Array.isArray(u)?ne(u.length===t,"must have length "+t):n(s.isArrayLike+"("+u+")&&"+u+".length==="+t,"invalid vector, should have length "+t,e.commandStr)}function o(t){ne(!Array.isArray(u),"must not specify a value type"),n("typeof "+u+'==="function"&&'+u+'._reglType==="texture'+(t===la?"2d":"Cube")+'"',"invalid texture type",e.commandStr)}switch(f){case Ca:r("number");break;case $a:i(2);break;case Sa:i(3);break;case Ea:i(4);break;case ba:r("number");break;case xa:i(2);break;case wa:i(3);break;case _a:i(4);break;case Aa:r("boolean");break;case Ma:i(2);break;case ka:i(3);break;case Ta:case Pa:i(4);break;case Oa:i(9);break;case Na:i(16);break;case Ia:o(la);break;case Da:o(ca)}}));var x=1;switch(f){case Ia:case Da:var w=t.def(u,"._texture");t(l,".uniform1i(",g,",",w,".bind());"),t.exit(w,".unbind();");continue;case Ca:case Aa:a="1i";break;case $a:case Ma:a="2i",x=2;break;case Sa:case ka:a="3i",x=3;break;case Ea:case Ta:a="4i",x=4;break;case ba:a="1f";break;case xa:a="2f",x=2;break;case wa:a="3f",x=3;break;case _a:a="4f",x=4;break;case Pa:a="Matrix2fv";break;case Oa:a="Matrix3fv";break;case Na:a="Matrix4fv"}if(t(l,".uniform",a,"(",g,","),"M"===a.charAt(0)){var _=Math.pow(f-Pa+2,2),C=e.global.def("new Float32Array(",_,")");Array.isArray(u)?t("false,(",Ee(_,(function(e){return C+"["+e+"]="+u[e]})),",",C,")"):t("false,(Array.isArray(",u,")||",u," instanceof Float32Array)?",u,":(",Ee(_,(function(e){return C+"["+e+"]="+u+"["+e+"]"})),",",C,")")}else x>1?t(Ee(x,(function(e){return Array.isArray(u)?u[e]:u+"["+e+"]"}))):(ne(!Array.isArray(u),"uniform value must not be an array"),t(u));t(");")}}function Q(e,t,n,r){var i=e.shared,o=i.gl,a=i.draw,s=r.draw;function l(){var i,l=s.elements,c=t;return l?((l.contextDep&&r.contextDynamic||l.propDep)&&(c=n),i=l.append(e,c)):i=c.def(a,".",Ho),i&&c("if("+i+")"+o+".bindBuffer("+sa+","+i+".buffer.buffer);"),i}function c(){var i,o=s.count,l=t;return o?((o.contextDep&&r.contextDynamic||o.propDep)&&(l=n),i=o.append(e,l),ne.optional((function(){o.MISSING&&e.assert(t,"false","missing vertex count"),o.DYNAMIC&&e.assert(l,i+">=0","missing vertex count")}))):(i=l.def(a,".",Wo),ne.optional((function(){e.assert(l,i+">=0","missing vertex count")}))),i}var u=l();function h(i){var o=s[i];return o?o.contextDep&&r.contextDynamic||o.propDep?o.append(e,n):o.append(e,t):t.def(a,".",i)}var d,f,p=h(Uo),g=h(qo),m=c();if("number"==typeof m){if(0===m)return}else n("if(",m,"){"),n.exit("}");y&&(d=h(Yo),f=e.instancing);var v=u+".type",b=s.elements&&as(s.elements);function x(){function e(){n(f,".drawElementsInstancedANGLE(",[p,m,v,g+"<<(("+v+"-"+no+")>>1)",d],");")}function t(){n(f,".drawArraysInstancedANGLE(",[p,g,m,d],");")}u?b?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}function w(){function e(){n(o+".drawElements("+[p,m,v,g+"<<(("+v+"-"+no+")>>1)"]+");")}function t(){n(o+".drawArrays("+[p,g,m]+");")}u?b?e():(n("if(",u,"){"),e(),n("}else{"),t(),n("}")):t()}y&&("number"!=typeof d||d>=0)?"string"==typeof d?(n("if(",d,">0){"),x(),n("}else if(",d,"<0){"),w(),n("}")):x():w()}function J(e,t,n,r,i){var o=P(),a=o.proc("body",i);return ne.optional((function(){o.commandStr=t.commandStr,o.command=o.link(t.commandStr)})),y&&(o.instancing=a.def(o.shared.extensions,".angle_instanced_arrays")),e(o,a,n,r),o.compile().body}function ee(e,t,n,r){Y(e,t),n.useVAO?n.drawVAO?t(e.shared.vao,".setVAO(",n.drawVAO.append(e,t),");"):t(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(t(e.shared.vao,".setVAO(null);"),K(e,t,n,r.attributes,(function(){return!0}))),Z(e,t,n,r.uniforms,(function(){return!0})),Q(e,t,t,n)}function te(e,t){var n=e.proc("draw",1);Y(e,n),H(e,n,t.context),U(e,n,t.framebuffer),W(e,n,t),q(e,n,t.state),X(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)ee(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var i=e.global.def("{}"),o=n.def(r,".id"),a=n.def(i,"[",o,"]");n(e.cond(a).then(a,".call(this,a0);").else(a,"=",i,"[",o,"]=",e.link((function(n){return J(ee,e,t,n,1)})),"(",r,");",a,".call(this,a0);"))}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function re(e,t,n,r){function i(){return!0}e.batchId="a1",Y(e,t),K(e,t,n,r.attributes,i),Z(e,t,n,r.uniforms,i),Q(e,t,t,n)}function ie(e,t,n,r){Y(e,t);var i=n.contextDep,o=t.def(),a="a0",s="a1",l=t.def();e.shared.props=l,e.batchId=o;var c=e.scope(),u=e.scope();function h(e){return e.contextDep&&i||e.propDep}function d(e){return!h(e)}if(t(c.entry,"for(",o,"=0;",o,"<",s,";++",o,"){",l,"=",a,"[",o,"];",u,"}",c.exit),n.needsContext&&H(e,u,n.context),n.needsFramebuffer&&U(e,u,n.framebuffer),q(e,u,n.state,h),n.profile&&h(n.profile)&&X(e,u,n,!1,!0),r)n.useVAO?n.drawVAO?h(n.drawVAO)?u(e.shared.vao,".setVAO(",n.drawVAO.append(e,u),");"):c(e.shared.vao,".setVAO(",n.drawVAO.append(e,c),");"):c(e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"):(c(e.shared.vao,".setVAO(null);"),K(e,c,n,r.attributes,d),K(e,u,n,r.attributes,h)),Z(e,c,n,r.uniforms,d),Z(e,u,n,r.uniforms,h),Q(e,c,u,n);else{var f=e.global.def("{}"),p=n.shader.progVar.append(e,u),g=u.def(p,".id"),m=u.def(f,"[",g,"]");u(e.shared.gl,".useProgram(",p,".program);","if(!",m,"){",m,"=",f,"[",g,"]=",e.link((function(t){return J(re,e,n,t,2)})),"(",p,");}",m,".call(this,a0[",o,"],",o,");")}}function oe(e,t){var n=e.proc("batch",2);e.batchId="0",Y(e,n);var r=!1,i=!0;Object.keys(t.context).forEach((function(e){r=r||t.context[e].propDep})),r||(H(e,n,t.context),i=!1);var o=t.framebuffer,a=!1;function s(e){return e.contextDep&&r||e.propDep}o?(o.propDep?r=a=!0:o.contextDep&&r&&(a=!0),a||U(e,n,o)):U(e,n,null),t.state.viewport&&t.state.viewport.propDep&&(r=!0),W(e,n,t),q(e,n,t.state,(function(e){return!s(e)})),t.profile&&s(t.profile)||X(e,n,t,!1,"a1"),t.contextDep=r,t.needsContext=i,t.needsFramebuffer=a;var l=t.shader.progVar;if(l.contextDep&&r||l.propDep)ie(e,n,t,null);else{var c=l.append(e,n);if(n(e.shared.gl,".useProgram(",c,".program);"),t.shader.program)ie(e,n,t,t.shader.program);else{n(e.shared.vao,".setVAO(null);");var u=e.global.def("{}"),h=n.def(c,".id"),d=n.def(u,"[",h,"]");n(e.cond(d).then(d,".call(this,a0,a1);").else(d,"=",u,"[",h,"]=",e.link((function(n){return J(ie,e,t,n,2)})),"(",c,");",d,".call(this,a0,a1);"))}}Object.keys(t.state).length>0&&n(e.shared.current,".dirty=true;")}function ae(e,t){var r=e.proc("scope",3);e.batchId="a2";var i=e.shared,o=i.current;function a(n){var o=t.shader[n];o&&r.set(i.shader,"."+n,o.append(e,r))}H(e,r,t.context),t.framebuffer&&t.framebuffer.append(e,r),is(Object.keys(t.state)).forEach((function(n){var o=t.state[n].append(e,r);hn(o)?o.forEach((function(t,i){r.set(e.next[n],"["+i+"]",t)})):r.set(i.next,"."+n,o)})),X(e,r,t,!0,!0),[Ho,qo,Wo,Yo,Uo].forEach((function(n){var o=t.draw[n];o&&r.set(i.draw,"."+n,""+o.append(e,r))})),Object.keys(t.uniforms).forEach((function(o){var a=t.uniforms[o].append(e,r);Array.isArray(a)&&(a="["+a.join()+"]"),r.set(i.uniforms,"["+n.id(o)+"]",a)})),Object.keys(t.attributes).forEach((function(n){var i=t.attributes[n].append(e,r),o=e.scopeAttrib(n);Object.keys(new m).forEach((function(e){r.set(o,"."+e,i[e])}))})),t.scopeVAO&&r.set(i.vao,".targetVAO",t.scopeVAO.append(e,r)),a(Vo),a(zo),Object.keys(t.state).length>0&&(r(o,".dirty=true;"),r.exit(o,".dirty=true;")),r("a1(",e.shared.context,",a0,",e.batchId,");")}function se(e){if("object"==typeof e&&!hn(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(pe.isDynamic(e[t[n]]))return!0;return!1}}function le(e,t,n){var r=t.static[n];if(r&&se(r)){var i=e.global,o=Object.keys(r),a=!1,s=!1,l=!1,c=e.global.def("{}");o.forEach((function(t){var n=r[t];if(pe.isDynamic(n)){"function"==typeof n&&(n=r[t]=pe.unbox(n));var o=ls(n,null);a=a||o.thisDep,l=l||o.propDep,s=s||o.contextDep}else{switch(i(c,".",t,"="),typeof n){case"number":i(n);break;case"string":i('"',n,'"');break;case"object":Array.isArray(n)&&i("[",n.join(),"]");break;default:i(e.link(n))}i(";")}})),t.dynamic[n]=new pe.DynamicVariable(co,{thisDep:a,contextDep:s,propDep:l,ref:c,append:u}),delete t.static[n]}function u(e,t){o.forEach((function(n){var i=r[n];if(pe.isDynamic(i)){var o=e.invoke(t,i);t(c,".",n,"=",o,";")}}))}}function ce(e,n,r,i,o){var a=P();a.stats=a.link(o),Object.keys(n.static).forEach((function(e){le(a,n,e)})),oa.forEach((function(t){le(a,e,t)}));var s=z(e,n,r,i,a);return te(a,s),ae(a,s),oe(a,s),t(a.compile(),{destroy:function(){s.shader.program.destroy()}})}return{next:w,current:x,procs:function(){var e=P(),t=e.proc("poll"),n=e.proc("refresh"),o=e.block();t(o),n(o);var a,s=e.shared,l=s.gl,c=s.next,u=s.current;o(u,".dirty=false;"),U(e,t),U(e,n,null,!0),y&&(a=e.link(y)),r.oes_vertex_array_object&&n(e.link(r.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var h=0;h<i.maxAttributes;++h){var d=n.def(s.attributes,"[",h,"]"),f=e.cond(d,".buffer");f.then(l,".enableVertexAttribArray(",h,");",l,".bindBuffer(",aa,",",d,".buffer.buffer);",l,".vertexAttribPointer(",h,",",d,".size,",d,".type,",d,".normalized,",d,".stride,",d,".offset);").else(l,".disableVertexAttribArray(",h,");",l,".vertexAttrib4f(",h,",",d,".x,",d,".y,",d,".z,",d,".w);",d,".buffer=null;"),n(f),y&&n(a,".vertexAttribDivisorANGLE(",h,",",d,".divisor);")}return n(e.shared.vao,".currentVAO=null;",e.shared.vao,".setVAO(",e.shared.vao,".targetVAO);"),Object.keys(C).forEach((function(r){var i=C[r],a=o.def(c,".",r),s=e.block();s("if(",a,"){",l,".enable(",i,")}else{",l,".disable(",i,")}",u,".",r,"=",a,";"),n(s),t("if(",a,"!==",u,".",r,"){",s,"}")})),Object.keys($).forEach((function(r){var i,a,s=$[r],h=x[r],d=e.block();if(d(l,".",s,"("),hn(h)){var f=h.length;i=e.global.def(c,".",r),a=e.global.def(u,".",r),d(Ee(f,(function(e){return i+"["+e+"]"})),");",Ee(f,(function(e){return a+"["+e+"]="+i+"["+e+"];"})).join("")),t("if(",Ee(f,(function(e){return i+"["+e+"]!=="+a+"["+e+"]"})).join("||"),"){",d,"}")}else i=o.def(c,".",r),a=o.def(u,".",r),d(i,");",u,".",r,"=",i,";"),t("if(",i,"!==",a,"){",d,"}");n(d)})),e.compile()}(),compile:ce}}function hs(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var ds=34918,fs=34919,ps=35007,gs=function(e,t){if(!t.ext_disjoint_timer_query)return null;var n=[];function r(){return n.pop()||t.ext_disjoint_timer_query.createQueryEXT()}function i(e){n.push(e)}var o=[];function a(e){var n=r();t.ext_disjoint_timer_query.beginQueryEXT(ps,n),o.push(n),f(o.length-1,o.length,e)}function s(){t.ext_disjoint_timer_query.endQueryEXT(ps)}function l(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var c=[];function u(){return c.pop()||new l}function h(e){c.push(e)}var d=[];function f(e,t,n){var r=u();r.startQueryIndex=e,r.endQueryIndex=t,r.sum=0,r.stats=n,d.push(r)}var p=[],g=[];function m(){var e,n,r=o.length;if(0!==r){g.length=Math.max(g.length,r+1),p.length=Math.max(p.length,r+1),p[0]=0,g[0]=0;var a=0;for(e=0,n=0;n<o.length;++n){var s=o[n];t.ext_disjoint_timer_query.getQueryObjectEXT(s,fs)?(a+=t.ext_disjoint_timer_query.getQueryObjectEXT(s,ds),i(s)):o[e++]=s,p[n+1]=a,g[n+1]=e}for(o.length=e,e=0,n=0;n<d.length;++n){var l=d[n],c=l.startQueryIndex,u=l.endQueryIndex;l.sum+=p[u]-p[c];var f=g[c],m=g[u];m===f?(l.stats.gpuTime+=l.sum/1e6,h(l)):(l.startQueryIndex=f,l.endQueryIndex=m,d[e++]=l)}d.length=e}}return{beginQuery:a,endQuery:s,pushScopeStats:f,update:m,getNumPendingQueries:function(){return o.length},clear:function(){n.push.apply(n,o);for(var e=0;e<n.length;e++)t.ext_disjoint_timer_query.deleteQueryEXT(n[e]);o.length=0,n.length=0},restore:function(){o.length=0,n.length=0}}},ms=16384,vs=256,ys=1024,bs=34962,xs="webglcontextlost",ws="webglcontextrestored",_s=1,Cs=2,$s=3;function Ss(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}function Es(e){var n=$e(e);if(!n)return null;var r=n.gl,i=r.getContextAttributes(),o=r.isContextLost(),a=Se(r,n);if(!a)return null;var s=ve(),l=hs(),c=a.extensions,u=gs(r,c),h=me(),d=r.drawingBufferWidth,f=r.drawingBufferHeight,p={tick:0,time:0,viewportWidth:d,viewportHeight:f,framebufferWidth:d,framebufferHeight:f,drawingBufferWidth:d,drawingBufferHeight:f,pixelRatio:n.pixelRatio},g={},m={elements:null,primitive:4,count:-1,offset:0,instances:-1},v=_t(r,c),y=Ut(r,l,n,x),b=Gi(r,c,v,l,y);function x(e){return b.destroyBuffer(e)}var w=an(r,c,y,l),_=Wi(r,s,l,n),C=Xr(r,c,v,(function(){E.procs.poll()}),p,l,n),$=ci(r,c,v,l,n),S=Ri(r,c,v,C,$,l),E=us(r,s,c,v,y,w,C,S,g,b,_,m,p,u,n),A=Zi(r,S,E.procs.poll,p,i,c,v),M=E.next,k=r.canvas,T=[],P=[],O=[],N=[n.onDestroy],I=null;function D(){if(0===T.length)return u&&u.update(),void(I=null);I=ge.next(D),q();for(var e=T.length-1;e>=0;--e){var t=T[e];t&&t(p,null,0)}r.flush(),u&&u.update()}function L(){!I&&T.length>0&&(I=ge.next(D))}function R(){I&&(ge.cancel(D),I=null)}function B(e){e.preventDefault(),o=!0,R(),P.forEach((function(e){e()}))}function j(e){r.getError(),o=!1,a.restore(),_.restore(),y.restore(),C.restore(),$.restore(),S.restore(),b.restore(),u&&u.restore(),E.procs.refresh(),L(),O.forEach((function(e){e()}))}function F(){T.length=0,R(),k&&(k.removeEventListener(xs,B),k.removeEventListener(ws,j)),_.clear(),S.clear(),$.clear(),C.clear(),w.clear(),y.clear(),b.clear(),u&&u.clear(),N.forEach((function(e){e()}))}function G(e){function n(e){var n=t({},e);function r(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach((function(r){n[e+"."+r]=t[r]}))}}return delete n.uniforms,delete n.attributes,delete n.context,delete n.vao,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),r("blend"),r("depth"),r("cull"),r("stencil"),r("polygonOffset"),r("scissor"),r("sample"),"vao"in e&&(n.vao=e.vao),n}function r(e,t){var n={},r={};return Object.keys(e).forEach((function(i){var o=e[i];if(pe.isDynamic(o))r[i]=pe.unbox(o,i);else{if(t&&Array.isArray(o))for(var a=0;a<o.length;++a)if(pe.isDynamic(o[a]))return void(r[i]=pe.unbox(o,i));n[i]=o}})),{dynamic:r,static:n}}ne(!!e,"invalid args to regl({...})"),ne.type(e,"object","invalid args to regl({...})");var i=r(e.context||{},!0),a=r(e.uniforms||{},!0),s=r(e.attributes||{},!1),l=r(n(e),!1),c={gpuTime:0,cpuTime:0,count:0},u=E.compile(l,s,a,i,c),h=u.draw,d=u.batch,f=u.scope,p=[];function g(e){for(;p.length<e;)p.push(null);return p}function m(e,t){var n;if(o&&ne.raise("context lost"),"function"==typeof e)return f.call(this,null,e,0);if("function"==typeof t)if("number"==typeof e)for(n=0;n<e;++n)f.call(this,null,t,n);else{if(!Array.isArray(e))return f.call(this,e,t,0);for(n=0;n<e.length;++n)f.call(this,e[n],t,n)}else if("number"==typeof e){if(e>0)return d.call(this,g(0|e),0|e)}else{if(!Array.isArray(e))return h.call(this,e);if(e.length)return d.call(this,e,e.length)}}return t(m,{stats:c,destroy:function(){u.destroy()}})}k&&(k.addEventListener(xs,B,!1),k.addEventListener(ws,j,!1));var V=S.setFBO=G({framebuffer:pe.define.call(null,_s,"framebuffer")});function z(e,t){var n=0;E.procs.poll();var i=t.color;i&&(r.clearColor(+i[0]||0,+i[1]||0,+i[2]||0,+i[3]||0),n|=ms),"depth"in t&&(r.clearDepth(+t.depth),n|=vs),"stencil"in t&&(r.clearStencil(0|t.stencil),n|=ys),ne(!!n,"called regl.clear with no buffer specified"),r.clear(n)}function H(e){if(ne("object"==typeof e&&e,"regl.clear() takes an object as input"),"framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var n=0;n<6;++n)V(t({framebuffer:e.framebuffer.faces[n]},e),z);else V(e,z);else z(null,e)}function U(e){function t(){var t=Ss(T,e);function n(){var e=Ss(T,n);T[e]=T[T.length-1],T.length-=1,T.length<=0&&R()}ne(t>=0,"cannot cancel a frame twice"),T[t]=n}return ne.type(e,"function","regl.frame() callback must be a function"),T.push(e),L(),{cancel:t}}function W(){var e=M.viewport,t=M.scissor_box;e[0]=e[1]=t[0]=t[1]=0,p.viewportWidth=p.framebufferWidth=p.drawingBufferWidth=e[2]=t[2]=r.drawingBufferWidth,p.viewportHeight=p.framebufferHeight=p.drawingBufferHeight=e[3]=t[3]=r.drawingBufferHeight}function q(){p.tick+=1,p.time=X(),W(),E.procs.poll()}function Y(){C.refresh(),W(),E.procs.refresh(),u&&u.update()}function X(){return(me()-h)/1e3}function K(e,t){var n;switch(ne.type(t,"function","listener callback must be a function"),e){case"frame":return U(t);case"lost":n=P;break;case"restore":n=O;break;case"destroy":n=N;break;default:ne.raise("invalid event, must be one of frame,lost,restore,destroy")}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t)return n[e]=n[n.length-1],void n.pop()}}}Y();var Z=t(G,{clear:H,prop:pe.define.bind(null,_s),context:pe.define.bind(null,Cs),this:pe.define.bind(null,$s),draw:G({}),buffer:function(e){return y.create(e,bs,!1,!1)},elements:function(e){return w.create(e,!1)},texture:C.create2D,cube:C.createCube,renderbuffer:$.create,framebuffer:S.create,framebufferCube:S.createCube,vao:b.createVAO,attributes:i,frame:U,on:K,limits:v,hasExtension:function(e){return v.extensions.indexOf(e.toLowerCase())>=0},read:A,destroy:F,_gl:r,_refresh:Y,poll:function(){q(),u&&u.update()},now:X,stats:l});return n.onDone(null,Z),Z}return Es}();const regl=regl$1.exports;var ReglAttribute=function(){function e(t,n){_classCallCheck(this,e),this.attribute=void 0,this.buffer=void 0;var r=n.buffer,i=n.offset,o=n.stride,a=n.normalized,s=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:i||0,stride:o||0,normalized:a||!1,divisor:l||0},s&&(this.attribute.size=s)}return _createClass(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(e){this.buffer.subData(e)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),_primitiveMap,_usageMap,_dataTypeMap,_formatMap,_mipmapMap,_filterMap,_wrapModeMap,_colorSpaceMap,_depthFuncMap,_blendEquationMap,_blendFuncMap,_stencilFuncMap,_stencilOpMap,_cullFaceMap,primitiveMap=(_primitiveMap={},_defineProperty(_primitiveMap,gl$1.POINTS,"points"),_defineProperty(_primitiveMap,gl$1.LINES,"lines"),_defineProperty(_primitiveMap,gl$1.LINE_LOOP,"line loop"),_defineProperty(_primitiveMap,gl$1.LINE_STRIP,"line strip"),_defineProperty(_primitiveMap,gl$1.TRIANGLES,"triangles"),_defineProperty(_primitiveMap,gl$1.TRIANGLE_FAN,"triangle fan"),_defineProperty(_primitiveMap,gl$1.TRIANGLE_STRIP,"triangle strip"),_primitiveMap),usageMap=(_usageMap={},_defineProperty(_usageMap,gl$1.STATIC_DRAW,"static"),_defineProperty(_usageMap,gl$1.DYNAMIC_DRAW,"dynamic"),_defineProperty(_usageMap,gl$1.STREAM_DRAW,"stream"),_usageMap),dataTypeMap=(_dataTypeMap={},_defineProperty(_dataTypeMap,gl$1.BYTE,"int8"),_defineProperty(_dataTypeMap,gl$1.UNSIGNED_INT,"int16"),_defineProperty(_dataTypeMap,gl$1.INT,"int32"),_defineProperty(_dataTypeMap,gl$1.UNSIGNED_BYTE,"uint8"),_defineProperty(_dataTypeMap,gl$1.UNSIGNED_SHORT,"uint16"),_defineProperty(_dataTypeMap,gl$1.UNSIGNED_INT,"uint32"),_defineProperty(_dataTypeMap,gl$1.FLOAT,"float"),_dataTypeMap),formatMap=(_formatMap={},_defineProperty(_formatMap,gl$1.ALPHA,"alpha"),_defineProperty(_formatMap,gl$1.LUMINANCE,"luminance"),_defineProperty(_formatMap,gl$1.LUMINANCE_ALPHA,"luminance alpha"),_defineProperty(_formatMap,gl$1.RGB,"rgb"),_defineProperty(_formatMap,gl$1.RGBA,"rgba"),_defineProperty(_formatMap,gl$1.RGBA4,"rgba4"),_defineProperty(_formatMap,gl$1.RGB5_A1,"rgb5 a1"),_defineProperty(_formatMap,gl$1.RGB565,"rgb565"),_defineProperty(_formatMap,gl$1.DEPTH_COMPONENT,"depth"),_defineProperty(_formatMap,gl$1.DEPTH_STENCIL,"depth stencil"),_formatMap),mipmapMap=(_mipmapMap={},_defineProperty(_mipmapMap,gl$1.DONT_CARE,"dont care"),_defineProperty(_mipmapMap,gl$1.NICEST,"nice"),_defineProperty(_mipmapMap,gl$1.FASTEST,"fast"),_mipmapMap),filterMap=(_filterMap={},_defineProperty(_filterMap,gl$1.NEAREST,"nearest"),_defineProperty(_filterMap,gl$1.LINEAR,"linear"),_defineProperty(_filterMap,gl$1.LINEAR_MIPMAP_LINEAR,"mipmap"),_defineProperty(_filterMap,gl$1.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),_defineProperty(_filterMap,gl$1.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),_defineProperty(_filterMap,gl$1.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),_filterMap),wrapModeMap=(_wrapModeMap={},_defineProperty(_wrapModeMap,gl$1.REPEAT,"repeat"),_defineProperty(_wrapModeMap,gl$1.CLAMP_TO_EDGE,"clamp"),_defineProperty(_wrapModeMap,gl$1.MIRRORED_REPEAT,"mirror"),_wrapModeMap),colorSpaceMap=(_colorSpaceMap={},_defineProperty(_colorSpaceMap,gl$1.NONE,"none"),_defineProperty(_colorSpaceMap,gl$1.BROWSER_DEFAULT_WEBGL,"browser"),_colorSpaceMap),depthFuncMap=(_depthFuncMap={},_defineProperty(_depthFuncMap,gl$1.NEVER,"never"),_defineProperty(_depthFuncMap,gl$1.ALWAYS,"always"),_defineProperty(_depthFuncMap,gl$1.LESS,"less"),_defineProperty(_depthFuncMap,gl$1.LEQUAL,"lequal"),_defineProperty(_depthFuncMap,gl$1.GREATER,"greater"),_defineProperty(_depthFuncMap,gl$1.GEQUAL,"gequal"),_defineProperty(_depthFuncMap,gl$1.EQUAL,"equal"),_defineProperty(_depthFuncMap,gl$1.NOTEQUAL,"notequal"),_depthFuncMap),blendEquationMap=(_blendEquationMap={},_defineProperty(_blendEquationMap,gl$1.FUNC_ADD,"add"),_defineProperty(_blendEquationMap,gl$1.MIN_EXT,"min"),_defineProperty(_blendEquationMap,gl$1.MAX_EXT,"max"),_defineProperty(_blendEquationMap,gl$1.FUNC_SUBTRACT,"subtract"),_defineProperty(_blendEquationMap,gl$1.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_blendEquationMap),blendFuncMap=(_blendFuncMap={},_defineProperty(_blendFuncMap,gl$1.ZERO,"zero"),_defineProperty(_blendFuncMap,gl$1.ONE,"one"),_defineProperty(_blendFuncMap,gl$1.SRC_COLOR,"src color"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_SRC_COLOR,"one minus src color"),_defineProperty(_blendFuncMap,gl$1.SRC_ALPHA,"src alpha"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),_defineProperty(_blendFuncMap,gl$1.DST_COLOR,"dst color"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_DST_COLOR,"one minus dst color"),_defineProperty(_blendFuncMap,gl$1.DST_ALPHA,"dst alpha"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),_defineProperty(_blendFuncMap,gl$1.CONSTANT_COLOR,"constant color"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),_defineProperty(_blendFuncMap,gl$1.CONSTANT_ALPHA,"constant alpha"),_defineProperty(_blendFuncMap,gl$1.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),_defineProperty(_blendFuncMap,gl$1.SRC_ALPHA_SATURATE,"src alpha saturate"),_blendFuncMap),stencilFuncMap=(_stencilFuncMap={},_defineProperty(_stencilFuncMap,gl$1.NEVER,"never"),_defineProperty(_stencilFuncMap,gl$1.ALWAYS,"always"),_defineProperty(_stencilFuncMap,gl$1.LESS,"less"),_defineProperty(_stencilFuncMap,gl$1.LEQUAL,"lequal"),_defineProperty(_stencilFuncMap,gl$1.GREATER,"greater"),_defineProperty(_stencilFuncMap,gl$1.GEQUAL,"gequal"),_defineProperty(_stencilFuncMap,gl$1.EQUAL,"equal"),_defineProperty(_stencilFuncMap,gl$1.NOTEQUAL,"notequal"),_stencilFuncMap),stencilOpMap=(_stencilOpMap={},_defineProperty(_stencilOpMap,gl$1.ZERO,"zero"),_defineProperty(_stencilOpMap,gl$1.KEEP,"keep"),_defineProperty(_stencilOpMap,gl$1.REPLACE,"replace"),_defineProperty(_stencilOpMap,gl$1.INVERT,"invert"),_defineProperty(_stencilOpMap,gl$1.INCR,"increment"),_defineProperty(_stencilOpMap,gl$1.DECR,"decrement"),_defineProperty(_stencilOpMap,gl$1.INCR_WRAP,"increment wrap"),_defineProperty(_stencilOpMap,gl$1.DECR_WRAP,"decrement wrap"),_stencilOpMap),cullFaceMap=(_cullFaceMap={},_defineProperty(_cullFaceMap,gl$1.FRONT,"front"),_defineProperty(_cullFaceMap,gl$1.BACK,"back"),_cullFaceMap),ReglBuffer=function(){function e(t,n){_classCallCheck(this,e),this.buffer=void 0;var r=n.data,i=n.usage,o=n.type;this.buffer=t.buffer({data:r,usage:usageMap[i||gl$1.STATIC_DRAW],type:dataTypeMap[o||gl$1.UNSIGNED_BYTE]})}return _createClass(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(e){var t=e.data,n=e.offset;this.buffer.subdata(t,n)}}]),e}();function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread$1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var quadVert="attribute vec3 a_Position;\nattribute vec2 a_TexCoord;\n\nvarying vec2 v_TexCoord;\n\nvoid main() {\n  gl_Position = vec4(a_Position, 1.0);\n  v_TexCoord = a_TexCoord;\n}",textureId=0,ReglComputeModel=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.reGl=t,this.context=n,this.entity=createEntity(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var i={};this.context.uniforms.forEach((function(e){var t=e.name,n=e.type,o=e.data,a=e.isReferer,s=e.storageClass;if(s===STORAGE_CLASS.StorageBuffer){if(a)r.textureCache[t]={data:void 0},i["".concat(t,"Size")]=function(){return o.compiledBundle.context.output.textureSize};else{r.textureCache[t]=r.calcDataTexture(t,n,o);var l=r.textureCache[t],c=l.textureWidth,u=l.isOutput;i["".concat(t,"Size")]=[c,c],u&&(r.outputTextureName=t,r.context.needPingpong&&(r.outputTextureName="".concat(t,"Output"),r.textureCache[r.outputTextureName]=r.calcDataTexture(t,n,o)))}i[t]=function(){return r.textureCache[t].texture}}else if(s===STORAGE_CLASS.Uniform){if(o&&(Array.isArray(o)||isTypedArray_1(o))&&o.length>16)throw new Error("invalid data type ".concat(n));i[t]=function(){return e.data}}}));var o=this.getOuputDataTexture(),a=o.textureWidth,s=o.texelCount;i.u_OutputTextureSize=[a,a],i.u_OutputTexelCount=s,this.context.output.textureSize=[a,a];var l={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(this.context.shader),uniforms:i,vert:quadVert,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(l)}var t;return _createClass(e,[{key:"run",value:function(){var e=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use((function(){e.computeCommand()}))}},{key:"readData",value:(t=_asyncToGenerator(regenerator.mark((function e(){var t,n,r,i,o,a,s,l,c=this;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.reGl({framebuffer:this.texFBO})((function(){t=c.reGl.read()})),!t){e.next=6;break}if(n=this.getOuputDataTexture(),r=n.originalDataLength,i=n.elementsPerTexel,o=n.typedArrayConstructor,a=void 0===o?Float32Array:o,s=[],4!==i)for(l=0;l<t.length;l+=4)1===i?s.push(t[l]):2===i?s.push(t[l],t[l+1]):s.push(t[l],t[l+1],t[l+2]);else s=t;return e.abrupt("return",new a(s.slice(0,r)));case 6:return e.abrupt("return",new Float32Array);case 7:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"confirmInput",value:function(e,t){var n;this.entity===e.entity?(this.dynamicPingpong=!0,n=this):n=e,this.textureCache[t].id=n.getOuputDataTexture().id,this.textureCache[t].texture=n.getOuputDataTexture().texture}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(e,t){var n=this.context.uniforms.find((function(t){return t.name===e}));if(n){var r=this.calcDataTexture(e,n.type,t),i=r.texture,o=r.data;this.textureCache[e].data=o,this.textureCache[e].texture=i}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var e=this.context.output.name;this.textureCache[e].id=this.getOuputDataTexture().id,this.textureCache[e].texture=this.getOuputDataTexture().texture}var t=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=t}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var e=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=e}},{key:"cloneDataTexture",value:function(e){var t=e.data,n=e.textureWidth;return _objectSpread$1(_objectSpread$1({},e),{},{id:textureId++,texture:this.reGl.texture({width:n,height:n,data:t,type:"float"})})}},{key:"calcDataTexture",value:function(e,t,n){var r=1;t===AST_TOKEN_TYPES.Vector4FloatArray&&(r=4);for(var i=[],o=0;o<n.length;o+=r)1===r?i.push(n[o],0,0,0):2===r?i.push(n[o],n[o+1],0,0):3===r?i.push(n[o],n[o+1],n[o+2],0):4===r&&i.push(n[o],n[o+1],n[o+2],n[o+3]);var a=n.length,s=Math.ceil(a/r),l=Math.ceil(Math.sqrt(s)),c=l*l;s<c&&i.push.apply(i,_toConsumableArray(new Array(4*(c-s)).fill(0)));var u=this.reGl.texture({width:l,height:l,data:i,type:"float"});return{id:textureId++,data:i,originalDataLength:a,typedArrayConstructor:isTypedArray_1(n)?n.constructor:void 0,textureWidth:l,texture:u,texelCount:s,elementsPerTexel:r,isOutput:e===this.context.output.name}}}]),e}(),ReglElements=function(){function e(t,n){_classCallCheck(this,e),this.elements=void 0;var r=n.data,i=n.usage,o=n.type,a=n.count;this.elements=t.elements({data:r,usage:usageMap[i||gl$1.STATIC_DRAW],type:dataTypeMap[o||gl$1.UNSIGNED_BYTE],count:a})}return _createClass(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(e){var t=e.data;this.elements.subdata(t)}},{key:"destroy",value:function(){this.elements.destroy()}}]),e}(),ReglFramebuffer=function(){function e(t,n){_classCallCheck(this,e),this.framebuffer=void 0;var r=n.width,i=n.height,o=n.color,a=n.colors;n.depth,n.stencil;var s={width:r,height:i};Array.isArray(a)&&(s.colors=a.map((function(e){return e.get()}))),o&&"boolean"!=typeof o&&(s.color=o.get()),this.framebuffer=t.framebuffer(s)}return _createClass(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.framebuffer.resize(t,n)}}]),e}();function overArg$1(e,t){return function(n){return e(t(n))}}var _overArg=overArg$1,overArg=_overArg,getPrototype$1=overArg(Object.getPrototypeOf,Object),_getPrototype=getPrototype$1,baseGetTag=_baseGetTag,getPrototype=_getPrototype,isObjectLike=isObjectLike_1,objectTag="[object Object]",funcProto=Function.prototype,objectProto=Object.prototype,funcToString=funcProto.toString,hasOwnProperty=objectProto.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag)return!1;var t=getPrototype(e);if(null===t)return!0;var n=hasOwnProperty.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&funcToString.call(n)==objectCtorString}var isPlainObject_1=isPlainObject;function extractUniforms(e){var t={};return Object.keys(e).forEach((function(n){extractUniformsRecursively(n,e[n],t,"")})),t}function extractUniformsRecursively(e,t,n,r){null===t||"number"==typeof t||"boolean"==typeof t||Array.isArray(t)&&"number"==typeof t[0]||isTypedArray_1(t)||""===t||void 0!==t.resize?n["".concat(r&&r+".").concat(e)]=t:(isPlainObject_1(t)&&Object.keys(t).forEach((function(i){extractUniformsRecursively(i,t[i],n,"".concat(r&&r+".").concat(e))})),Array.isArray(t)&&t.forEach((function(t,i){Object.keys(t).forEach((function(o){extractUniformsRecursively(o,t[o],n,"".concat(r&&r+".").concat(e,"[").concat(i,"]"))}))})))}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ReglModel=function(){function e(t,n){_classCallCheck(this,e),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=t;var r=n.vs,i=n.fs,o=n.defines,a=n.attributes,s=n.uniforms,l=n.primitive,c=n.count,u=n.elements,h=n.depth,d=n.blend,f=n.stencil,p=n.cull,g=n.instances,m=n.scissor,v=n.viewport,y={};s&&(this.uniforms=extractUniforms(s),Object.keys(s).forEach((function(e){y[e]=t.prop(e)})));var b={};Object.keys(a).forEach((function(e){b[e]=a[e].get()}));var x=o&&this.generateDefines(o)||"",w={attributes:b,frag:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n".concat(x,"\n").concat(i),uniforms:y,vert:"\n".concat(x,"\n").concat(r),primitive:primitiveMap[void 0===l?gl$1.TRIANGLES:l]};g&&(w.instances=g),c&&(w.count=c),u&&(w.elements=u.get()),m&&(w.scissor=m),v&&(w.viewport=v),this.initDepthDrawParams({depth:h},w),this.initBlendDrawParams({blend:d},w),this.initStencilDrawParams({stencil:f},w),this.initCullDrawParams({cull:p},w),this.drawCommand=t(w)}return _createClass(e,[{key:"addUniforms",value:function(e){this.uniforms=_objectSpread(_objectSpread({},this.uniforms),extractUniforms(e))}},{key:"draw",value:function(e){var t=_objectSpread(_objectSpread({},this.uniforms),extractUniforms(e.uniforms||{})),n={};Object.keys(t).forEach((function(e){var r=_typeof$2(t[e]);"boolean"===r||"number"===r||Array.isArray(t[e])||t[e].BYTES_PER_ELEMENT?n[e]=t[e]:"string"===r||(n[e]=t[e].get())})),this.drawCommand(n)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(e,t){var n=e.depth;n&&(t.depth={enable:void 0===n.enable||!!n.enable,mask:void 0===n.mask||!!n.mask,func:depthFuncMap[n.func||gl$1.LESS],range:n.range||[0,1]})}},{key:"initBlendDrawParams",value:function(e,t){var n=e.blend;if(n){var r=n.enable,i=n.func,o=n.equation,a=n.color,s=void 0===a?[0,0,0,0]:a;t.blend={enable:!!r,func:{srcRGB:blendFuncMap[i&&i.srcRGB||gl$1.SRC_ALPHA],srcAlpha:blendFuncMap[i&&i.srcAlpha||gl$1.SRC_ALPHA],dstRGB:blendFuncMap[i&&i.dstRGB||gl$1.ONE_MINUS_SRC_ALPHA],dstAlpha:blendFuncMap[i&&i.dstAlpha||gl$1.ONE_MINUS_SRC_ALPHA]},equation:{rgb:blendEquationMap[o&&o.rgb||gl$1.FUNC_ADD],alpha:blendEquationMap[o&&o.alpha||gl$1.FUNC_ADD]},color:s}}}},{key:"initStencilDrawParams",value:function(e,t){var n=e.stencil;if(n){var r=n.enable,i=n.mask,o=void 0===i?-1:i,a=n.func,s=void 0===a?{cmp:gl$1.ALWAYS,ref:0,mask:-1}:a,l=n.opFront,c=void 0===l?{fail:gl$1.KEEP,zfail:gl$1.KEEP,zpass:gl$1.KEEP}:l,u=n.opBack,h=void 0===u?{fail:gl$1.KEEP,zfail:gl$1.KEEP,zpass:gl$1.KEEP}:u;t.stencil={enable:!!r,mask:o,func:_objectSpread(_objectSpread({},s),{},{cmp:stencilFuncMap[s.cmp]}),opFront:{fail:stencilOpMap[c.fail],zfail:stencilOpMap[c.zfail],zpass:stencilOpMap[c.zpass]},opBack:{fail:stencilOpMap[h.fail],zfail:stencilOpMap[h.zfail],zpass:stencilOpMap[h.zpass]}}}}},{key:"initCullDrawParams",value:function(e,t){var n=e.cull;if(n){var r=n.enable,i=n.face,o=void 0===i?gl$1.BACK:i;t.cull={enable:!!r,face:cullFaceMap[o]}}}},{key:"generateDefines",value:function(e){return Object.keys(e).map((function(t){return"#define ".concat(t," ").concat(Number(e[t]))})).join("\n")}}]),e}(),ReglTexture2D=function(){function e(t,n){_classCallCheck(this,e),this.texture=void 0,this.width=void 0,this.height=void 0;var r=n.data,i=n.type,o=void 0===i?gl$1.UNSIGNED_BYTE:i,a=n.width,s=n.height,l=n.flipY,c=void 0!==l&&l,u=n.format,h=void 0===u?gl$1.RGBA:u,d=n.mipmap,f=void 0!==d&&d,p=n.wrapS,g=void 0===p?gl$1.CLAMP_TO_EDGE:p,m=n.wrapT,v=void 0===m?gl$1.CLAMP_TO_EDGE:m,y=n.aniso,b=void 0===y?0:y,x=n.alignment,w=void 0===x?1:x,_=n.premultiplyAlpha,C=void 0!==_&&_,$=n.mag,S=void 0===$?gl$1.NEAREST:$,E=n.min,A=void 0===E?gl$1.NEAREST:E,M=n.colorSpace,k=void 0===M?gl$1.BROWSER_DEFAULT_WEBGL:M;this.width=a,this.height=s;var T={width:a,height:s,type:dataTypeMap[o],format:formatMap[h],wrapS:wrapModeMap[g],wrapT:wrapModeMap[v],mag:filterMap[S],min:filterMap[A],alignment:w,flipY:c,colorSpace:colorSpaceMap[k],premultiplyAlpha:C,aniso:b};r&&(T.data=r),"number"==typeof f?T.mipmap=mipmapMap[f]:"boolean"==typeof f&&(T.mipmap=f),this.texture=t.texture(T)}return _createClass(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(e){var t=e.width,n=e.height;this.texture.resize(t,n),this.width=t,this.height=n}},{key:"destroy",value:function(){this.texture.destroy()}}]),e}(),WebGLEngine=function(){function e(){var t=this;_classCallCheck(this,e),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var e=_asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms){e.next=3;break}return e.next=3,Promise.all(Object.keys(n.uniforms).map(function(){var e=_asyncToGenerator(regenerator.mark((function e(t){var r;return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.uniforms[t]||void 0===n.uniforms[t].load){e.next=5;break}return e.next=3,n.uniforms[t].load();case 3:r=e.sent,n.uniforms[t]=r;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",new ReglModel(t.gl,n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createAttribute=function(e){return new ReglAttribute(t.gl,e)},this.createBuffer=function(e){return new ReglBuffer(t.gl,e)},this.createElements=function(e){return new ReglElements(t.gl,e)},this.createTexture2D=function(e){return new ReglTexture2D(t.gl,e)},this.createFramebuffer=function(e){return new ReglFramebuffer(t.gl,e)},this.useFramebuffer=function(e,n){t.gl({framebuffer:e?e.get():null})(n)},this.createComputeModel=function(){var e=_asyncToGenerator(regenerator.mark((function e(n){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ReglComputeModel(t.gl,n));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.clear=function(e){var n=e.color,r=e.depth,i=e.stencil,o=e.framebuffer,a=void 0===o?null:o,s={color:n,depth:r,stencil:i};s.framebuffer=null===a?a:a.get(),t.gl.clear(s)},this.setScissor=function(e){t.gl&&t.gl._gl&&(e.enable&&e.box?(t.gl._gl.enable(gl$1.SCISSOR_TEST),t.gl._gl.scissor(e.box.x,e.box.y,e.box.width,e.box.height)):t.gl._gl.disable(gl$1.SCISSOR_TEST),t.gl._refresh())},this.viewport=function(e){var n=e.x,r=e.y,i=e.width,o=e.height;t.gl&&t.gl._gl&&(t.gl._gl.viewport(n,r,i,o),t.gl._refresh())},this.readPixels=function(e){var n=e.framebuffer,r={x:e.x,y:e.y,width:e.width,height:e.height};return n&&(r.framebuffer=n.get()),t.gl.read(r)},this.getCanvas=function(){return t.$canvas},this.getGLContext=function(){return t.gl._gl},this.destroy=function(){t.gl&&(t.gl.destroy(),t.inited=!1)}}var t;return _createClass(e,[{key:"init",value:(t=_asyncToGenerator(regenerator.mark((function e(t){return regenerator.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.inited){e.next=2;break}return e.abrupt("return");case 2:return this.$canvas=t.canvas,e.next=5,new Promise((function(e,n){regl({canvas:t.canvas,attributes:{alpha:!0,antialias:t.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(t,r){!t&&r||n(t),e(r)}})}));case 5:this.gl=e.sent,this.inited=!0;case 7:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),e}(),World=function(){function e(){_classCallCheck(this,e),this.engine=void 0,this.configService=new ConfigService}return _createClass(e,[{key:"setConfig",value:function(e){this.configService.set(e)}},{key:"setEngine",value:function(e){this.engine=e}},{key:"createEntity",value:function(){return createEntity()}},{key:"createKernel",value:function(e){var t=new Kernel(this.engine,this.configService);return"string"==typeof e?t.setBundle(JSON.parse(e)):t.setBundle(e),t.init(),t}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=new e;return n.setConfig(t),n.setEngine(new WebGLEngine),n}}]),e}();const es$1=Object.freeze(Object.defineProperty({__proto__:null,World:World,Kernel:Kernel},Symbol.toStringTag,{value:"Module"})),require$$2=getAugmentedNamespace(es$1);var gpu={};Object.defineProperty(gpu,"__esModule",{value:!0}),gpu.arrayToTextureData=gpu.attributesToTextureData=gpu.buildTextureDataWithTwoEdgeAttr=gpu.buildTextureData=gpu.proccessToFunc=void 0;var _1=requireUtil(),math_1$1=math,proccessToFunc$1=function(e,t){return e?(0,_1.isNumber)(e)?function(){return e}:e:function(){return t||1}};gpu.proccessToFunc=proccessToFunc$1;var buildTextureData$1=function(e,t){var n=[],r=[],i={},o=0;for(o=0;o<e.length;o++){var a=e[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<t.length;o++){var s=t[o],l=(0,math_1$1.getEdgeTerminal)(s,"source"),c=(0,math_1$1.getEdgeTerminal)(s,"target");isNaN(i[l])||isNaN(i[c])||(r[i[l]].push(i[c]),r[i[c]].push(i[l]))}var u=0;for(o=0;o<e.length;o++){var h=n.length,d=r[o],f=d.length;n[4*o+2]=h,n[4*o+3]=f,u=Math.max(u,f);for(var p=0;p<f;++p){var g=d[p];n.push(+g)}}for(;n.length%4!=0;)n.push(0);return{maxEdgePerVetex:u,array:new Float32Array(n)}};gpu.buildTextureData=buildTextureData$1;var buildTextureDataWithTwoEdgeAttr$1=function(e,t,n,r){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var l=e[s];a[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){var c=t[s],u=(0,math_1$1.getEdgeTerminal)(c,"source"),h=(0,math_1$1.getEdgeTerminal)(c,"target");o[a[u]].push(a[h]),o[a[u]].push(n(c)),o[a[u]].push(r(c)),o[a[u]].push(0),o[a[h]].push(a[u]),o[a[h]].push(n(c)),o[a[h]].push(r(c)),o[a[h]].push(0)}var d=0;for(s=0;s<e.length;s++){var f=i.length,p=o[s],g=p.length;i[4*s+2]=f+1048576*g/4,i[4*s+3]=0,d=Math.max(d,g/4);for(var m=0;m<g;++m){var v=p[m];i.push(+v)}}for(;i.length%4!=0;)i.push(0);return{maxEdgePerVetex:d,array:new Float32Array(i)}};gpu.buildTextureDataWithTwoEdgeAttr=buildTextureDataWithTwoEdgeAttr$1;var attributesToTextureData$1=function(e,t){var n=[],r=e.length,i={};return t.forEach((function(t){e.forEach((function(e,o){if(void 0===i[t[e]]&&(i[t[e]]=Object.keys(i).length),n.push(i[t[e]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}};gpu.attributesToTextureData=attributesToTextureData$1;var arrayToTextureData$1=function(e){for(var t=[],n=e.length,r=e[0].length,i=function(r){e.forEach((function(e,i){if(t.push(e[r]),i===n-1)for(;t.length%4!=0;)t.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(t)};gpu.arrayToTextureData=arrayToTextureData$1;var fruchtermanShader={};Object.defineProperty(fruchtermanShader,"__esModule",{value:!0}),fruchtermanShader.clusterBundle=fruchtermanShader.clusterCode=fruchtermanShader.fruchtermanBundle=fruchtermanShader.fruchtermanCode=void 0,fruchtermanShader.fruchtermanCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass Fruchterman {\n  @in @out\n  u_Data: vec4[];\n  @in\n  u_K: float;\n  @in\n  u_K2: float;\n  \n  @in\n  u_Center: vec2;\n  @in\n  u_Gravity: float;\n  @in\n  u_ClusterGravity: float;\n  @in\n  u_Speed: float;\n  @in\n  u_MaxDisplace: float;\n  @in\n  u_Clustering: float;\n  @in\n  u_AttributeArray: vec4[];\n  @in\n  u_ClusterCenters: vec4[];\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const xDist = currentNode[0] - nextNode[0];\n        const yDist = currentNode[1] - nextNode[1];\n        const dist = (xDist * xDist + yDist * yDist) + 0.01;\n        let param = this.u_K2 / dist;\n        \n        if (dist > 0.0) {\n          dx += param * xDist;\n          dy += param * yDist;\n          if (xDist == 0 && yDist == 0) {\n            const sign = i < j ? 1 : -1;\n            dx += param * sign;\n            dy += param * sign;\n          }\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // \n    let dx = 0, dy = 0;\n    const vx = currentNode[0] - this.u_Center[0];\n    const vy = currentNode[1] - this.u_Center[1];\n    const gf = 0.01 * this.u_K * this.u_Gravity;\n    dx = gf * vx;\n    dy = gf * vy;\n    if (this.u_Clustering == 1) {\n      const clusterIdx = int(nodeAttributes[0]);\n      const center = this.u_ClusterCenters[clusterIdx];\n      const cvx = currentNode[0] - center[0];\n      const cvy = currentNode[1] - center[1];\n      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;\n      const parma = this.u_K * this.u_ClusterGravity / dist;\n      dx += parma * cvx;\n      dy += parma * cvy;\n    }\n    return [dx, dy];\n  }\n  calcAttractive(i: int, currentNode: vec4): vec2 {\n    let dx = 0, dy = 0;\n    const arr_offset = int(floor(currentNode[2] + 0.5));\n    const length = int(floor(currentNode[3] + 0.5));\n    const node_buffer: vec4;\n    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + p;\n      // when arr_idx % 4 == 0 update currentNodedx_buffer\n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)];\n      }\n      const float_j = buf_offset == 0 ? node_buffer[0] :\n                      buf_offset == 1 ? node_buffer[1] :\n                      buf_offset == 2 ? node_buffer[2] :\n                                        node_buffer[3];\n      const nextNode = this.u_Data[int(float_j)];\n      const xDist = currentNode[0] - nextNode[0];\n      const yDist = currentNode[1] - nextNode[1];\n      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;\n      let attractiveF = dist / this.u_K;\n    \n      if (dist > 0.0) {\n        dx -= xDist * attractiveF;\n        dy -= yDist * attractiveF;\n        if (xDist == 0 && yDist == 0) {\n          const sign = i < int(float_j) ? 1 : -1;\n          dx -= sign * attractiveF;\n          dy -= sign * attractiveF;\n        }\n      }\n    }\n    return [dx, dy];\n  }\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    let dx = 0, dy = 0;\n    if (i >= VERTEX_COUNT) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // [gravity, fx, fy, 0]\n    const nodeAttributes = this.u_AttributeArray[i];\n\n    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {\n      // the node is fixed\n      this.u_Data[i] = [\n        nodeAttributes[1],\n        nodeAttributes[2],\n        currentNode[2],\n        currentNode[3]\n      ];\n      return;\n    }\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    dx += repulsive[0];\n    dy += repulsive[1];\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode);\n    dx += attractive[0];\n    dy += attractive[1];\n    // gravity\n    const gravity = this.calcGravity(currentNode, nodeAttributes);\n    dx -= gravity[0];\n    dy -= gravity[1];\n    // speed\n    dx *= this.u_Speed;\n    dy *= this.u_Speed;\n\n    // move\n    const distLength = sqrt(dx * dx + dy * dy);\n    if (distLength > 0.0) {\n      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);\n      this.u_Data[i] = [\n        currentNode[0] + dx / distLength * limitedDist,\n        currentNode[1] + dy / distLength * limitedDist,\n        currentNode[2],\n        currentNode[3]\n      ];\n    }\n  }\n}\n",fruchtermanShader.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',fruchtermanShader.clusterCode="\nimport { globalInvocationID } from 'g-webgpu';\nconst VERTEX_COUNT;\nconst CLUSTER_COUNT;\n@numthreads(1, 1, 1)\nclass CalcCenter {\n  @in\n  u_Data: vec4[];\n  @in\n  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]\n  @in @out\n  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const center = this.u_ClusterCenters[i];\n    let sumx = 0;\n    let sumy = 0;\n    let count = 0;\n    for (let j = 0; j < VERTEX_COUNT; j++) {\n      const attributes = this.u_NodeAttributes[j];\n      const clusterIdx = int(attributes[0]);\n      const vertex = this.u_Data[j];\n      if (clusterIdx == i) {\n        sumx += vertex.x;\n        sumy += vertex.y;\n        count += 1;\n      }\n    }\n    this.u_ClusterCenters[i] = [\n      sumx / count,\n      sumy / count,\n      count,\n      i\n    ];\n  }\n}\n",fruchtermanShader.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var __extends$h=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e11){o(e11)}}function s(e){try{l(r.throw(e))}catch(e11){o(e11)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e11){s=[6,e11],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(fruchterman,"__esModule",{value:!0}),fruchterman.FruchtermanGPULayout=void 0;var base_1$4=base$1,util_1$3=requireUtil(),g_webgpu_1$1=require$$2,gpu_1$1=gpu,fruchtermanShader_1=fruchtermanShader,constants_1$1=constants,FruchtermanGPULayout=function(e){function t(t){var n=e.call(this)||this;return n.maxIteration=1e3,n.gravity=10,n.speed=1,n.clustering=!1,n.clusterField="cluster",n.clusterGravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return __extends$h(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},t.prototype.execute=function(){return __awaiter$1(this,void 0,void 0,(function(){var e,t,n,r,i,o=this;return __generator$1(this,(function(a){switch(a.label){case 0:return(t=(e=this).nodes)&&0!==t.length?(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),n=e.center,1===t.length?(t[0].x=n[0],t[0].y=n[1],e.onLayoutEnd&&e.onLayoutEnd(),[2]):(r={},i={},t.forEach((function(e,t){(0,util_1$3.isNumber)(e.x)||(e.x=Math.random()*o.width),(0,util_1$3.isNumber)(e.y)||(e.y=Math.random()*o.height),r[e.id]=e,i[e.id]=t})),e.nodeMap=r,e.nodeIdxMap=i,[4,e.run()])):(e.onLayoutEnd&&e.onLayoutEnd(),[2]);case 1:return a.sent(),[2]}}))}))},t.prototype.executeWithWorker=function(e,t){return __awaiter$1(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return __generator$1(this,(function(l){switch(l.label){case 0:return r=(n=this).nodes,i=n.center,r&&0!==r.length?1===r.length?(r[0].x=i[0],r[0].y=i[1],[2]):(o={},a={},r.forEach((function(e,t){(0,util_1$3.isNumber)(e.x)||(e.x=Math.random()*s.width),(0,util_1$3.isNumber)(e.y)||(e.y=Math.random()*s.height),o[e.id]=e,a[e.id]=t})),n.nodeMap=o,n.nodeIdxMap=a,[4,n.run(e,t)]):[2];case 1:return l.sent(),[2]}}))}))},t.prototype.run=function(e,t){return __awaiter$1(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x,w,_,C,$,S,E,A=this;return __generator$1(this,(function(M){switch(M.label){case 0:for(r=(n=this).nodes,i=n.edges,o=n.maxIteration,a=n.center,s=n.height*n.width,l=Math.sqrt(s)/10,c=s/(r.length+1),u=Math.sqrt(c),h=n.speed,d=n.clustering,f=(0,gpu_1$1.attributesToTextureData)([n.clusterField],r),p=f.array,g=f.count,r.forEach((function(e,t){var n=0,r=0;(0,util_1$3.isNumber)(e.fx)&&(0,util_1$3.isNumber)(e.fy)&&(n=e.fx||.001,r=e.fy||.001),p[4*t+1]=n,p[4*t+2]=r})),m=r.length,v=(0,gpu_1$1.buildTextureData)(r,i),y=v.maxEdgePerVetex,b=v.array,x=n.workerEnabled,w=x?g_webgpu_1$1.World.create({canvas:e,engineOptions:{supportCompute:!0}}):g_webgpu_1$1.World.create({engineOptions:{supportCompute:!0}}),_=n.onLayoutEnd,C=[],$=0;$<g;$++)C.push(0,0,0,0);return S=w.createKernel(fruchtermanShader_1.fruchtermanBundle).setDispatch([m,1,1]).setBinding({u_Data:b,u_K:u,u_K2:c,u_Gravity:n.gravity,u_ClusterGravity:n.clusterGravity||n.gravity||1,u_Speed:h,u_MaxDisplace:l,u_Clustering:d?1:0,u_Center:a,u_AttributeArray:p,u_ClusterCenters:C,MAX_EDGE_PER_VERTEX:y,VERTEX_COUNT:m}),d&&(E=w.createKernel(fruchtermanShader_1.clusterBundle).setDispatch([g,1,1]).setBinding({u_Data:b,u_NodeAttributes:p,u_ClusterCenters:C,VERTEX_COUNT:m,CLUSTER_COUNT:g})),[4,function(){return __awaiter$1(A,void 0,void 0,(function(){var n,i;return __generator$1(this,(function(a){switch(a.label){case 0:n=0,a.label=1;case 1:return n<o?[4,S.execute()]:[3,6];case 2:return a.sent(),d?(E.setBinding({u_Data:S}),[4,E.execute()]):[3,4];case 3:a.sent(),S.setBinding({u_ClusterCenters:E}),a.label=4;case 4:S.setBinding({u_MaxDisplace:l*=.99}),a.label=5;case 5:return n++,[3,1];case 6:return[4,S.getOutput()];case 7:return i=a.sent(),e?t.postMessage({type:constants_1$1.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:i}):r.forEach((function(e,t){var n=i[4*t],r=i[4*t+1];e.x=n,e.y=r})),_&&_(),[2]}}))}))}()];case 1:return M.sent(),[2]}}))}))},t.prototype.getType=function(){return"fruchterman-gpu"},t}(base_1$4.Base);fruchterman.FruchtermanGPULayout=FruchtermanGPULayout;var gForce={},gForceShader={};Object.defineProperty(gForceShader,"__esModule",{value:!0}),gForceShader.aveMovementBundle=gForceShader.aveMovementCode=gForceShader.gForceBundle=gForceShader.gForceCode=void 0,gForceShader.gForceCode="\nimport { globalInvocationID } from 'g-webgpu';\n\nconst MAX_EDGE_PER_VERTEX;\nconst VERTEX_COUNT;\nconst SHIFT_20 = 1048576;\n\n@numthreads(1, 1, 1)\nclass GGForce {\n  @in @out\n  u_Data: vec4[];\n\n  @in\n  u_damping: float;\n  \n  @in\n  u_maxSpeed: float;\n\n  @in\n  u_minMovement: float;\n\n  @in\n  u_AveMovement: vec4[];\n\n  @in\n  u_coulombDisScale: float;\n\n  @in\n  u_factor: float;\n\n  @in\n  u_NodeAttributeArray1: vec4[];\n\n  @in\n  u_NodeAttributeArray2: vec4[];\n\n  @in\n  u_interval: float;\n\n  unpack_float(packedValue: float): ivec2 {\n    const packedIntValue = int(packedValue);\n    const v0 = packedIntValue / SHIFT_20;\n    return [v0, packedIntValue - v0 * SHIFT_20];\n  }\n\n  calcRepulsive(i: int, currentNode: vec4): vec2 {\n    let ax = 0, ay = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      if (i != j) {\n        const nextNode = this.u_Data[j];\n        const vx = currentNode[0] - nextNode[0];\n        const vy = currentNode[1] - nextNode[1];\n        const dist = sqrt(vx * vx + vy * vy) + 0.01;\n        const n_dist = (dist + 0.1) * this.u_coulombDisScale;\n        const direx = vx / dist;\n        const direy = vy / dist;\n        const attributesi = this.u_NodeAttributeArray1[i];\n        const attributesj = this.u_NodeAttributeArray1[j];\n        const massi = attributesi[0];\n        const nodeStrengthi = attributesi[2];\n        const nodeStrengthj = attributesj[2];\n        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;\n        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);\n        const param = nodeStrength * this.u_factor / (n_dist * n_dist);\n        ax += direx * param;\n        ay += direy * param;\n      }\n    }\n    return [ax, ay];\n  }\n\n  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {\n    // note: attributes2 = [centerX, centerY, gravity, 0]\n\n    const vx = currentNode[0] - attributes2[0];\n    const vy = currentNode[1] - attributes2[1];\n    \n    const ax = vx * attributes2[2];\n    const ay = vy * attributes2[2];\n    \n    return [ax, ay];\n  }\n\n  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {\n    // note: attributes1 = [mass, degree, nodeSterngth, 0]\n\n    const mass = attributes1[0];\n    let ax = 0, ay = 0;\n    // const arr_offset = int(floor(currentNode[2] + 0.5));\n    // const length = int(floor(currentNode[3] + 0.5));\n\n    const compressed = this.unpack_float(currentNode[2]);\n    const length = compressed[0];\n    const arr_offset = compressed[1];\n\n    const node_buffer: vec4;\n    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {\n      if (p >= length) break;\n      const arr_idx = arr_offset + 4 * p; // i  p \n      const buf_offset = arr_idx - arr_idx / 4 * 4;\n      if (p == 0 || buf_offset == 0) {\n        node_buffer = this.u_Data[int(arr_idx / 4)]; // = / 4\n      }\n\n      let float_j: float = node_buffer[0];\n\n      const nextNode = this.u_Data[int(float_j)];\n      const vx = nextNode[0] - currentNode[0];\n      const vy = nextNode[1] - currentNode[1];\n      const dist = sqrt(vx * vx + vy * vy) + 0.01;\n      const direx = vx / dist;\n      const direy = vy / dist;\n      const edgeLength = node_buffer[1];\n      const edgeStrength = node_buffer[2];\n      const diff: float = edgeLength - dist;//edgeLength\n      // const param = diff * this.u_stiffness / mass; //\n      const param = diff * edgeStrength / mass; // \n      ax -= direx * param;\n      ay -= direy * param;\n    }\n    return [ax, ay];\n  }\n\n  @main\n  compute() {\n    const i = globalInvocationID.x;\n    const currentNode = this.u_Data[i];\n    const movement = u_AveMovement[0];\n    let ax = 0, ay = 0;\n\n    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {\n      this.u_Data[i] = currentNode;\n      return;\n    }\n\n    // \n    // [mass, degree, nodeStrength, fx]\n    const nodeAttributes1 = this.u_NodeAttributeArray1[i];\n    // [centerX, centerY, centerGravity, fy]\n    const nodeAttributes2 = this.u_NodeAttributeArray2[i];\n\n    // repulsive\n    const repulsive = this.calcRepulsive(i, currentNode);\n    ax += repulsive[0];\n    ay += repulsive[1];\n\n    // attractive\n    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);\n    ax += attractive[0];\n    ay += attractive[1];\n\n    // gravity\n    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);\n    ax -= gravity[0];\n    ay -= gravity[1];\n\n    // speed\n    const param = this.u_interval * this.u_damping;\n    let vx = ax * param;\n    let vy = ay * param;\n    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;\n    if (vlength > this.u_maxSpeed) {\n      const param2 = this.u_maxSpeed / vlength;\n      vx = param2 * vx;\n      vy = param2 * vy;\n    }\n\n    // move\n    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {\n      this.u_Data[i] = [\n        nodeAttributes1[3],\n        nodeAttributes2[3],\n        currentNode[2],\n        0\n      ];\n    } else {\n      const distx = vx * this.u_interval;\n      const disty = vy * this.u_interval;\n      const distLength = sqrt(distx * distx + disty * disty);\n      this.u_Data[i] = [\n        currentNode[0] + distx,\n        currentNode[1] + disty,\n        currentNode[2],\n        distLength\n      ];\n    }\n    \n    // the avarage move distance\n    // need to share memory\n    \n  }\n}\n",gForceShader.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',gForceShader.aveMovementCode="\nconst VERTEX_COUNT;\n@numthreads(1, 1, 1)\nclass CalcAveMovement {\n  @in\n  u_Data: vec4[];\n  @in\n  u_iter: float;\n  @in @out\n  u_AveMovement: vec4[];\n  @main\n  compute() {\n    let movement = 0;\n    for (let j: int = 0; j < VERTEX_COUNT; j++) {\n      const vertex = this.u_Data[j];\n      movement += vertex[3];\n    }\n    movement = movement / float(VERTEX_COUNT);\n    this.u_AveMovement[0] = [movement, 0, 0, 0];\n  }\n}\n",gForceShader.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var __extends$g=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e11){o(e11)}}function s(e){try{l(r.throw(e))}catch(e11){o(e11)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e11){s=[6,e11],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(gForce,"__esModule",{value:!0}),gForce.GForceGPULayout=void 0;var base_1$3=base$1,util_1$2=requireUtil(),g_webgpu_1=require$$2,gpu_1=gpu,math_1=math,gForceShader_1=gForceShader,constants_1=constants,GForceGPULayout=function(e){function t(t){var n=e.call(this)||this;return n.maxIteration=1e3,n.edgeStrength=200,n.nodeStrength=1e3,n.coulombDisScale=.005,n.damping=.9,n.maxSpeed=1e3,n.minMovement=.5,n.interval=.02,n.factor=1,n.linkDistance=1,n.gravity=10,n.workerEnabled=!1,n.nodes=[],n.edges=[],n.width=300,n.height=300,n.nodeMap={},n.nodeIdxMap={},n.updateCfg(t),n}return __extends$g(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},t.prototype.execute=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,n,r,i;return __generator(this,(function(o){switch(o.label){case 0:return(t=(e=this).nodes)&&0!==t.length?(e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight),e.center||(e.center=[e.width/2,e.height/2]),n=e.center,1===t.length?(t[0].x=n[0],t[0].y=n[1],e.onLayoutEnd&&e.onLayoutEnd(),[2]):(r={},i={},t.forEach((function(t,n){(0,util_1$2.isNumber)(t.x)||(t.x=Math.random()*e.width),(0,util_1$2.isNumber)(t.y)||(t.y=Math.random()*e.height),r[t.id]=t,i[t.id]=n})),e.nodeMap=r,e.nodeIdxMap=i,e.nodeStrength=(0,gpu_1.proccessToFunc)(e.nodeStrength,1),e.edgeStrength=(0,gpu_1.proccessToFunc)(e.edgeStrength,1),[4,e.run()])):(e.onLayoutEnd&&e.onLayoutEnd(),[2]);case 1:return o.sent(),[2]}}))}))},t.prototype.executeWithWorker=function(e,t){var n=this,r=n.nodes,i=n.center;if(r&&0!==r.length){if(1===r.length)return r[0].x=i[0],void(r[0].y=i[1]);var o={},a={};r.forEach((function(e,t){(0,util_1$2.isNumber)(e.x)||(e.x=Math.random()*n.width),(0,util_1$2.isNumber)(e.y)||(e.y=Math.random()*n.height),o[e.id]=e,a[e.id]=t})),n.nodeMap=o,n.nodeIdxMap=a,n.nodeStrength=(0,gpu_1.proccessToFunc)(n.nodeStrength,1),n.edgeStrength=(0,gpu_1.proccessToFunc)(n.edgeStrength,1),n.run(e,t)}},t.prototype.run=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x,w,_,C,$,S,E,A,M=this;return __generator(this,(function(k){switch(k.label){case 0:for(r=(n=this).nodes,i=n.edges,o=n.maxIteration,n.width||"undefined"==typeof window||(n.width=window.innerWidth),n.height||"undefined"==typeof window||(n.height=window.innerHeight),a=r.length,n.linkDistance=(0,gpu_1.proccessToFunc)(n.linkDistance),n.edgeStrength=(0,gpu_1.proccessToFunc)(n.edgeStrength),s=(0,gpu_1.buildTextureDataWithTwoEdgeAttr)(r,i,n.linkDistance,n.edgeStrength),l=s.maxEdgePerVetex,c=s.array,n.degrees=(0,math_1.getDegree)(r.length,n.nodeIdxMap,i).map((function(e){return e.all})),u=[],h=[],d=[],f=[],p=[],g=[],m=[],n.getMass||(n.getMass=function(e){return n.degrees[n.nodeIdxMap[e.id]]||1}),v=n.gravity,y=n.center,r.forEach((function(e,t){u.push(n.getMass(e)),h.push(n.nodeStrength(e)),n.degrees[t]||(n.degrees[t]=0);var r=[y[0],y[1],v];if(n.getCenter){var i=n.getCenter(e,n.degrees[t]);i&&(0,util_1$2.isNumber)(i[0])&&(0,util_1$2.isNumber)(i[1])&&(0,util_1$2.isNumber)(i[2])&&(r=i)}d.push(r[0]),f.push(r[1]),p.push(r[2]),(0,util_1$2.isNumber)(e.fx)&&(0,util_1$2.isNumber)(e.fy)?(g.push(e.fx||.001),m.push(e.fy||.001)):(g.push(0),m.push(0))})),b=(0,gpu_1.arrayToTextureData)([u,n.degrees,h,g]),x=(0,gpu_1.arrayToTextureData)([d,f,p,m]),w=n.workerEnabled,_=w?g_webgpu_1.World.create({canvas:e,engineOptions:{supportCompute:!0}}):g_webgpu_1.World.create({engineOptions:{supportCompute:!0}}),C=n.onLayoutEnd,$=[],c.forEach((function(e){$.push(e)})),S=0;S<4;S++)$.push(0);return E=_.createKernel(gForceShader_1.gForceBundle).setDispatch([a,1,1]).setBinding({u_Data:c,u_damping:n.damping,u_maxSpeed:n.maxSpeed,u_minMovement:n.minMovement,u_coulombDisScale:n.coulombDisScale,u_factor:n.factor,u_NodeAttributeArray1:b,u_NodeAttributeArray2:x,MAX_EDGE_PER_VERTEX:l,VERTEX_COUNT:a,u_AveMovement:$,u_interval:n.interval}),A=_.createKernel(gForceShader_1.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:c,VERTEX_COUNT:a,u_AveMovement:[0,0,0,0]}),[4,function(){return __awaiter(M,void 0,void 0,(function(){var i,a,s;return __generator(this,(function(l){switch(l.label){case 0:i=0,l.label=1;case 1:return i<o?[4,E.execute()]:[3,5];case 2:return l.sent(),A.setBinding({u_Data:E}),[4,A.execute()];case 3:l.sent(),a=Math.max(.02,n.interval-.002*i),E.setBinding({u_interval:a,u_AveMovement:A}),l.label=4;case 4:return i++,[3,1];case 5:return[4,E.getOutput()];case 6:return s=l.sent(),e?t.postMessage({type:constants_1.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:s}):r.forEach((function(e,t){var n=s[4*t],r=s[4*t+1];e.x=n,e.y=r})),C&&C(),[2]}}))}))}()];case 1:return k.sent(),[2]}}))}))},t.prototype.getType=function(){return"gForce-gpu"},t}(base_1$3.Base);gForce.GForceGPULayout=GForceGPULayout;var comboForce={},__extends$f=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(comboForce,"__esModule",{value:!0}),comboForce.ComboForceLayout=void 0;var base_1$2=base$1,util_1$1=requireUtil(),ComboForceLayout=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.maxIteration=100,n.gravity=10,n.comboGravity=10,n.linkDistance=10,n.alpha=1,n.alphaMin=.001,n.alphaDecay=1-Math.pow(n.alphaMin,1/300),n.alphaTarget=0,n.velocityDecay=.6,n.edgeStrength=.6,n.nodeStrength=30,n.preventOverlap=!1,n.preventNodeOverlap=!1,n.preventComboOverlap=!1,n.collideStrength=void 0,n.nodeCollideStrength=.5,n.comboCollideStrength=.5,n.comboSpacing=20,n.comboPadding=10,n.optimizeRangeFactor=1,n.onTick=function(){},n.onLayoutEnd=function(){},n.depthAttractiveForceScale=1,n.depthRepulsiveForceScale=2,n.nodes=[],n.edges=[],n.combos=[],n.comboTrees=[],n.width=300,n.height=300,n.bias=[],n.nodeMap={},n.oriComboMap={},n.indexMap={},n.comboMap={},n.previousLayouted=!1,n.updateCfg(t),n}return __extends$f(t,e),t.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;if(e.comboTree={id:"comboTreeRoot",depth:-1,children:e.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}else e.onLayoutEnd&&e.onLayoutEnd()},t.prototype.run=function(){var e=this,t=e.nodes,n=e.previousLayouted?e.maxIteration/5:e.maxIteration;e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);var r=e.center,i=e.velocityDecay,o=e.comboMap;e.previousLayouted||e.initPos(o);for(var a=function(n){var r=[];t.forEach((function(e,t){r[t]={x:0,y:0}})),e.applyCalculate(r),e.applyComboCenterForce(r),t.forEach((function(e,t){(0,util_1$1.isNumber)(e.x)&&(0,util_1$1.isNumber)(e.y)&&(e.x+=r[t].x*i,e.y+=r[t].y*i)})),e.alpha+=(e.alphaTarget-e.alpha)*e.alphaDecay,e.onTick()},s=0;s<n;s++)a();var l=[0,0];t.forEach((function(e){(0,util_1$1.isNumber)(e.x)&&(0,util_1$1.isNumber)(e.y)&&(l[0]+=e.x,l[1]+=e.y)})),l[0]/=t.length,l[1]/=t.length;var c=[r[0]-l[0],r[1]-l[1]];t.forEach((function(e,t){(0,util_1$1.isNumber)(e.x)&&(0,util_1$1.isNumber)(e.y)&&(e.x+=c[0],e.y+=c[1])})),e.combos.forEach((function(e){var t=o[e.id];t&&t.empty&&(e.x=t.cx||e.x,e.y=t.cy||e.y)})),e.previousLayouted=!0},t.prototype.initVals=function(){var e=this,t=e.edges,n=e.nodes,r=e.combos,i={},o={},a={};n.forEach((function(e,t){o[e.id]=e,a[e.id]=t})),e.nodeMap=o,e.indexMap=a;var s={};r.forEach((function(e){s[e.id]=e})),e.oriComboMap=s,e.comboMap=e.getComboMap();var l=e.preventOverlap;e.preventComboOverlap=e.preventComboOverlap||l,e.preventNodeOverlap=e.preventNodeOverlap||l;var c=e.collideStrength;c&&(e.comboCollideStrength=c,e.nodeCollideStrength=c),e.comboCollideStrength=e.comboCollideStrength?e.comboCollideStrength:0,e.nodeCollideStrength=e.nodeCollideStrength?e.nodeCollideStrength:0;for(var u=0;u<t.length;++u){var h=(0,util_1$1.getEdgeTerminal)(t[u],"source"),d=(0,util_1$1.getEdgeTerminal)(t[u],"target");i[h]?i[h]++:i[h]=1,i[d]?i[d]++:i[d]=1}var f=[];for(u=0;u<t.length;++u){h=(0,util_1$1.getEdgeTerminal)(t[u],"source"),d=(0,util_1$1.getEdgeTerminal)(t[u],"target");f[u]=i[h]/(i[h]+i[d])}this.bias=f;var p,g,m=e.nodeSize,v=e.nodeSpacing;if(g=(0,util_1$1.isNumber)(v)?function(){return v}:(0,util_1$1.isFunction)(v)?v:function(){return 0},this.nodeSpacing=g,m)if((0,util_1$1.isFunction)(m))p=function(e){return m(e)};else if((0,util_1$1.isArray)(m)){var y=(m[0]>m[1]?m[0]:m[1])/2;p=function(e){return y}}else{var b=m/2;p=function(e){return b}}else p=function(e){return e.size?(0,util_1$1.isArray)(e.size)?(e.size[0]>e.size[1]?e.size[0]:e.size[1])/2:(0,util_1$1.isObject)(e.size)?(e.size.width>e.size.height?e.size.width:e.size.height)/2:e.size/2:10};this.nodeSize=p;var x,w=e.comboSpacing;x=(0,util_1$1.isNumber)(w)?function(){return w}:(0,util_1$1.isFunction)(w)?w:function(){return 0},this.comboSpacing=x;var _,C=e.comboPadding;_=(0,util_1$1.isNumber)(C)?function(){return C}:(0,util_1$1.isArray)(C)?function(){return Math.max.apply(null,C)}:(0,util_1$1.isFunction)(C)?C:function(){return 0},this.comboPadding=_;var $,S=this.linkDistance;S||(S=10),$=(0,util_1$1.isNumber)(S)?function(e){return S}:S,this.linkDistance=$;var E,A=this.edgeStrength;A||(A=1),E=(0,util_1$1.isNumber)(A)?function(e){return A}:A,this.edgeStrength=E;var M,k=this.nodeStrength;k||(k=30),M=(0,util_1$1.isNumber)(k)?function(e){return k}:k,this.nodeStrength=M},t.prototype.initPos=function(e){this.nodes.forEach((function(t,n){var r=t.comboId,i=e[r];r&&i?(t.x=i.cx+100/(n+1),t.y=i.cy+100/(n+1)):(t.x=100/(n+1),t.y=100/(n+1))}))},t.prototype.getComboMap=function(){var e=this,t=e.nodeMap,n=e.comboTrees,r=e.oriComboMap,i={};return(n||[]).forEach((function(n){var o=[];(0,util_1$1.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;if(!r[n.id])return!0;if(void 0===i[n.id]){var a={id:n.id,name:n.id,cx:0,cy:0,count:0,depth:e.oriComboMap[n.id].depth||0,children:[]};i[n.id]=a}var s=n.children;s&&s.forEach((function(e){if(!i[e.id]&&!t[e.id])return!0;o.push(e)}));var l=i[n.id];if(l.cx=0,l.cy=0,0===o.length){l.empty=!0;var c=r[n.id];l.cx=c.x,l.cy=c.y}return o.forEach((function(e){if(l.count++,"node"!==e.itemType){var n=i[e.id];return(0,util_1$1.isNumber)(n.cx)&&(l.cx+=n.cx),void((0,util_1$1.isNumber)(n.cy)&&(l.cy+=n.cy))}var r=t[e.id];r&&((0,util_1$1.isNumber)(r.x)&&(l.cx+=r.x),(0,util_1$1.isNumber)(r.y)&&(l.cy+=r.y))})),l.cx/=l.count||1,l.cy/=l.count||1,l.children=o,!0}))})),i},t.prototype.applyComboCenterForce=function(e){var t=this,n=t.gravity,r=t.comboGravity||n,i=this.alpha,o=t.comboTrees,a=t.indexMap,s=t.nodeMap,l=t.comboMap;(o||[]).forEach((function(t){(0,util_1$1.traverseTreeUp)(t,(function(t){if("node"===t.itemType)return!0;if(!l[t.id])return!0;var n=l[t.id],o=(n.depth+1)/10*.5,c=n.cx,u=n.cy;return n.cx=0,n.cy=0,n.children.forEach((function(t){if("node"!==t.itemType){var h=l[t.id];return h&&(0,util_1$1.isNumber)(h.cx)&&(n.cx+=h.cx),void(h&&(0,util_1$1.isNumber)(h.cy)&&(n.cy+=h.cy))}var d=s[t.id],f=d.x-c||.005,p=d.y-u||.005,g=Math.sqrt(f*f+p*p),m=a[d.id],v=r*i/g*o;e[m].x-=f*v,e[m].y-=p*v,(0,util_1$1.isNumber)(d.x)&&(n.cx+=d.x),(0,util_1$1.isNumber)(d.y)&&(n.cy+=d.y)})),n.cx/=n.count||1,n.cy/=n.count||1,!0}))}))},t.prototype.applyCalculate=function(e){var t=this,n=t.comboMap,r=t.nodes,i={};r.forEach((function(e,t){r.forEach((function(n,r){if(!(t<r)){var o=e.x-n.x||.005,a=e.y-n.y||.005,s=o*o+a*a,l=Math.sqrt(s);s<1&&(s=l),i["".concat(e.id,"-").concat(n.id)]={vx:o,vy:a,vl2:s,vl:l},i["".concat(n.id,"-").concat(e.id)]={vl2:s,vl:l,vx:-o,vy:-a}}}))})),t.updateComboSizes(n),t.calRepulsive(e,i),t.calAttractive(e,i),t.preventComboOverlap&&t.comboNonOverlapping(e,n)},t.prototype.updateComboSizes=function(e){var t=this,n=t.comboTrees,r=t.nodeMap,i=t.nodeSize,o=t.comboSpacing,a=t.comboPadding;(n||[]).forEach((function(n){var s=[];(0,util_1$1.traverseTreeUp)(n,(function(n){if("node"===n.itemType)return!0;var l=e[n.id];if(!l)return!1;var c=n.children;c&&c.forEach((function(t){(e[t.id]||r[t.id])&&s.push(t)})),l.minX=1/0,l.minY=1/0,l.maxX=-1/0,l.maxY=-1/0,s.forEach((function(e){if("node"!==e.itemType)return!0;var t=r[e.id];if(!t)return!0;var n=i(t),o=t.x-n,a=t.y-n,s=t.x+n,c=t.y+n;l.minX>o&&(l.minX=o),l.minY>a&&(l.minY=a),l.maxX<s&&(l.maxX=s),l.maxY<c&&(l.maxY=c)}));var u=t.oriComboMap[n.id].size||10;(0,util_1$1.isArray)(u)&&(u=u[0]);var h=Math.max(l.maxX-l.minX,l.maxY-l.minY,u);return l.r=h/2+o(l)/2+a(l),!0}))}))},t.prototype.comboNonOverlapping=function(e,t){var n=this,r=n.comboTree,i=n.comboCollideStrength,o=n.indexMap,a=n.nodeMap;(0,util_1$1.traverseTreeUp)(r,(function(n){if(!t[n.id]&&!a[n.id]&&"comboTreeRoot"!==n.id)return!1;var r=n.children;return r&&r.length>1&&r.forEach((function(n,s){if("node"===n.itemType)return!1;var l=t[n.id];l&&r.forEach((function(r,c){if(s<=c)return!1;if("node"===r.itemType)return!1;var u=t[r.id];if(!u)return!1;var h=l.cx-u.cx||.005,d=l.cy-u.cy||.005,f=h*h+d*d,p=l.r||1,g=u.r||1,m=p+g,v=g*g,y=p*p;if(f<m*m){var b=n.children;if(!b||0===b.length)return!1;var x=r.children;if(!x||0===x.length)return!1;var w=Math.sqrt(f),_=(m-w)/w*i,C=h*_,$=d*_,S=v/(y+v),E=1-S;b.forEach((function(t){if("node"!==t.itemType)return!1;if(a[t.id]){var n=o[t.id];x.forEach((function(t){if("node"!==t.itemType)return!1;if(!a[t.id])return!1;var r=o[t.id];e[n].x+=C*S,e[n].y+=$*S,e[r].x-=C*E,e[r].y-=$*E}))}}))}}))})),!0}))},t.prototype.calRepulsive=function(e,t){var n=this,r=n.nodes,i=n.width*n.optimizeRangeFactor,o=n.nodeStrength,a=n.alpha,s=n.nodeCollideStrength,l=n.preventNodeOverlap,c=n.nodeSize,u=n.nodeSpacing,h=n.depthRepulsiveForceScale,d=n.center;r.forEach((function(f,p){if(f.x&&f.y){if(d){var g=n.gravity,m=f.x-d[0]||.005,v=f.y-d[1]||.005,y=Math.sqrt(m*m+v*v);e[p].x-=m*g*a/y,e[p].y-=v*g*a/y}r.forEach((function(n,r){if(p!==r&&n.x&&n.y){var d=t["".concat(f.id,"-").concat(n.id)],g=d.vl2,m=d.vl;if(!(m>i)){var v=t["".concat(f.id,"-").concat(n.id)],y=v.vx,b=v.vy,x=Math.log(Math.abs(n.depth-f.depth)/10)+1||1;x=x<1?1:x,n.comboId!==f.comboId&&(x+=1);var w=x?Math.pow(h,x):1,_=o(n)*a/g*w;if(e[p].x+=y*_,e[p].y+=b*_,p<r&&l){var C=c(f)+u(f)||1,$=c(n)+u(n)||1,S=C+$;if(g<S*S){var E=(S-m)/m*s,A=$*$,M=A/(C*C+A),k=y*E,T=b*E;e[p].x+=k*M,e[p].y+=T*M,M=1-M,e[r].x-=k*M,e[r].y-=T*M}}}}}))}}))},t.prototype.calAttractive=function(e,t){var n=this,r=n.edges,i=n.linkDistance,o=n.alpha,a=n.edgeStrength,s=n.bias,l=n.depthAttractiveForceScale;r.forEach((function(r,c){var u=(0,util_1$1.getEdgeTerminal)(r,"source"),h=(0,util_1$1.getEdgeTerminal)(r,"target");if(u&&h&&u!==h){var d=n.indexMap[u],f=n.indexMap[h],p=n.nodeMap[u],g=n.nodeMap[h];if(p&&g){var m=p.depth===g.depth?0:Math.log(Math.abs(p.depth-g.depth)/10);p.comboId===g.comboId&&(m/=2);var v=m?Math.pow(l,m):1;if(p.comboId!==g.comboId&&1===v?v=l/2:p.comboId===g.comboId&&(v=2),(0,util_1$1.isNumber)(g.x)&&(0,util_1$1.isNumber)(p.x)&&(0,util_1$1.isNumber)(g.y)&&(0,util_1$1.isNumber)(p.y)){var y=t["".concat(h,"-").concat(u)],b=y.vl,x=y.vx,w=y.vy,_=(b-i(r))/b*o*a(r)*v,C=x*_,$=w*_,S=s[c];e[f].x-=C*S,e[f].y-=$*S,e[d].x+=C*(1-S),e[d].y+=$*(1-S)}}}}))},t.prototype.getType=function(){return"comboForce"},t}(base_1$2.Base);comboForce.ComboForceLayout=ComboForceLayout;var comboCombined={},hasRequiredComboCombined;function requireComboCombined(){if(hasRequiredComboCombined)return comboCombined;hasRequiredComboCombined=1;var e=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),t=commonjsGlobal&&commonjsGlobal.__assign||function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},t.apply(this,arguments)};Object.defineProperty(comboCombined,"__esModule",{value:!0}),comboCombined.ComboCombinedLayout=void 0;var n=constants,r=base$1,i=requireUtil(),o=requireLayout(),a=function(r){function a(e){var t=r.call(this)||this;return t.center=[0,0],t.nodes=[],t.edges=[],t.combos=[],t.comboEdges=[],t.comboPadding=10,t.comboTrees=[],t.updateCfg(e),t}return e(a,r),a.prototype.getDefaultCfg=function(){return{}},a.prototype.execute=function(){var e=this,t=e.nodes,n=e.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=n[0],t[0].y=n[1],void(e.onLayoutEnd&&e.onLayoutEnd());e.initVals(),e.run(),e.onLayoutEnd&&e.onLayoutEnd()}else e.onLayoutEnd&&e.onLayoutEnd()},a.prototype.run=function(){var e,r=this,a=r.nodes,s=r.edges,l=r.combos,c=r.comboEdges,u=r.center,h={};a.forEach((function(e){h[e.id]=e}));var d={};l.forEach((function(e){d[e.id]=e}));var f=r.getInnerGraphs(h),p=[],g=[],m={},v=!0;this.comboTrees.forEach((function(e){var n=f[e.id],r=t(t({},e),{x:n.x||d[e.id].x,y:n.y||d[e.id].y,fx:n.fx||d[e.id].fx,fy:n.fy||d[e.id].fy,mass:n.mass||d[e.id].mass,size:n.size});g.push(r),isNaN(r.x)||0===r.x||isNaN(r.y)||0===r.y?(r.x=100*Math.random(),r.y=100*Math.random()):v=!1,p.push(e.id),(0,i.traverseTreeUp)(e,(function(t){return t.id!==e.id&&(m[t.id]=e.id),!0}))})),a.forEach((function(e){if(!e.comboId||!d[e.comboId]){var n=t({},e);g.push(n),isNaN(n.x)||0===n.x||isNaN(n.y)||0===n.y?(n.x=100*Math.random(),n.y=100*Math.random()):v=!1,p.push(e.id)}}));var y=[];if(s.concat(c).forEach((function(e){var t=m[e.source]||e.source,n=m[e.target]||e.target;t!==n&&p.includes(t)&&p.includes(n)&&y.push({source:t,target:n})})),null==g?void 0:g.length){if(1===g.length)g[0].x=u[0],g[0].y=u[1];else{var b={nodes:g,edges:y},x=this.outerLayout||new o.GForceLayout({gravity:1,factor:2,linkDistance:function(e,t,n){var r,i,o=(((null===(r=t.size)||void 0===r?void 0:r[0])||30)+((null===(i=n.size)||void 0===i?void 0:i[0])||30))/2;return Math.min(1.5*o,700)}}),w=null===(e=x.getType)||void 0===e?void 0:e.call(x);if(x.updateCfg({center:u,kg:5,preventOverlap:!0,animate:!1}),v&&n.FORCE_LAYOUT_TYPE_MAP[w])(g.length<100?new o.MDSLayout:new o.GridLayout).layout(b);x.layout(b)}g.forEach((function(e){var t=f[e.id];if(t)t.visited=!0,t.x=e.x,t.y=e.y,t.nodes.forEach((function(t){t.x+=e.x,t.y+=e.y}));else{var n=h[e.id];n&&(n.x=e.x,n.y=e.y)}}))}for(var _=Object.keys(f),C=function(e){var t=_[e],n=f[t];if(!n)return"continue";n.nodes.forEach((function(e){n.visited||(e.x+=n.x||0,e.y+=n.y||0),h[e.id]&&(h[e.id].x=e.x,h[e.id].y=e.y)})),d[t]&&(d[t].x=n.x,d[t].y=n.y)},$=_.length-1;$>=0;$--)C($);return{nodes:a,edges:s,combos:l,comboEdges:c}},a.prototype.getInnerGraphs=function(e){var n=this,r=n.comboTrees,a=n.nodeSize,s=n.edges,l=n.comboPadding,c=n.spacing,u={},h=this.innerLayout||new o.ConcentricLayout({sortBy:"id"});return h.center=[0,0],h.preventOverlap=!0,h.nodeSpacing=c,(r||[]).forEach((function(n){(0,i.traverseTreeUp)(n,(function(n){var r,o=(null==l?void 0:l(n))||10;if((0,i.isArray)(o)&&(o=Math.max.apply(Math,o)),null===(r=n.children)||void 0===r?void 0:r.length){var c=n.children.map((function(n){if("combo"===n.itemType)return u[n.id];var r=e[n.id]||{};return t(t({},r),n)})),d=c.map((function(e){return e.id})),f={nodes:c,edges:s.filter((function(e){return d.includes(e.source)&&d.includes(e.target)}))},p=1/0;c.forEach((function(e){var t;e.size||(e.size=(null===(t=u[e.id])||void 0===t?void 0:t.size)||(null==a?void 0:a(e))||[30,30]),(0,i.isNumber)(e.size)&&(e.size=[e.size,e.size]),p>e.size[0]&&(p=e.size[0]),p>e.size[1]&&(p=e.size[1])})),h.layout(f);var g=(0,i.findMinMaxNodeXY)(c),m=g.minX,v=g.minY,y=g.maxX,b=g.maxY,x=Math.max(y-m,b-v,p)+2*o;u[n.id]={id:n.id,nodes:c,size:[x,x]}}else if("combo"===n.itemType){var w=o?[2*o,2*o]:[30,30];u[n.id]={id:n.id,nodes:[],size:w}}return!0}))})),u},a.prototype.initVals=function(){var e,t,n=this,r=n.nodeSize,o=n.spacing;if(t=(0,i.isNumber)(o)?function(){return o}:(0,i.isFunction)(o)?o:function(){return 0},this.spacing=t,r)if((0,i.isFunction)(r))e=function(e){var n=r(e),o=t(e);return(0,i.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+o)/2:((n||10)+o)/2};else if((0,i.isArray)(r)){var a=(r[0]>r[1]?r[0]:r[1])/2;e=function(e){return a+t(e)/2}}else{var s=r/2;e=function(e){return s+t(e)/2}}else e=function(e){var n=t(e);return e.size?(0,i.isArray)(e.size)?((e.size[0]>e.size[1]?e.size[0]:e.size[1])+n)/2:(0,i.isObject)(e.size)?((e.size.width>e.size.height?e.size.width:e.size.height)+n)/2:(e.size+n)/2:10+n/2};this.nodeSize=e;var l,c=n.comboPadding;l=(0,i.isNumber)(c)?function(){return c}:(0,i.isArray)(c)?function(){return Math.max.apply(null,c)}:(0,i.isFunction)(c)?c:function(){return 0},this.comboPadding=l},a.prototype.getType=function(){return"comboCombined"},a}(r.Base);return comboCombined.ComboCombinedLayout=a,comboCombined}var forceAtlas2={},body={};Object.defineProperty(body,"__esModule",{value:!0});var Body=function(){function e(e){this.id=e.id||0,this.rx=e.rx,this.ry=e.ry,this.fx=0,this.fy=0,this.mass=e.mass,this.degree=e.degree,this.g=e.g||0}return e.prototype.distanceTo=function(e){var t=this.rx-e.rx,n=this.ry-e.ry;return Math.hypot(t,n)},e.prototype.setPos=function(e,t){this.rx=e,this.ry=t},e.prototype.resetForce=function(){this.fx=0,this.fy=0},e.prototype.addForce=function(e){var t=e.rx-this.rx,n=e.ry-this.ry,r=Math.hypot(t,n);r=r<1e-4?1e-4:r;var i=this.g*(this.degree+1)*(e.degree+1)/r;this.fx+=i*t/r,this.fy+=i*n/r},e.prototype.in=function(e){return e.contains(this.rx,this.ry)},e.prototype.add=function(t){var n=this.mass+t.mass;return new e({rx:(this.rx*this.mass+t.rx*t.mass)/n,ry:(this.ry*this.mass+t.ry*t.mass)/n,mass:n,degree:this.degree+t.degree})},e}();body.default=Body;var quad={};Object.defineProperty(quad,"__esModule",{value:!0});var Quad=function(){function e(e){this.xmid=e.xmid,this.ymid=e.ymid,this.length=e.length,this.massCenter=e.massCenter||[0,0],this.mass=e.mass||1}return e.prototype.getLength=function(){return this.length},e.prototype.contains=function(e,t){var n=this.length/2;return e<=this.xmid+n&&e>=this.xmid-n&&t<=this.ymid+n&&t>=this.ymid-n},e.prototype.NW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.NE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid+this.length/4,length:this.length/2})},e.prototype.SW=function(){return new e({xmid:this.xmid-this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e.prototype.SE=function(){return new e({xmid:this.xmid+this.length/4,ymid:this.ymid-this.length/4,length:this.length/2})},e}();quad.default=Quad;var quadTree={};Object.defineProperty(quadTree,"__esModule",{value:!0});var QuadTree=function(){function e(e){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,null!=e&&(this.quad=e)}return e.prototype.insert=function(t){null!=this.body?this._isExternal()?(this.quad&&(this.NW=new e(this.quad.NW()),this.NE=new e(this.quad.NE()),this.SW=new e(this.quad.SW()),this.SE=new e(this.quad.SE())),this._putBody(this.body),this._putBody(t),this.body=this.body.add(t)):(this.body=this.body.add(t),this._putBody(t)):this.body=t},e.prototype._putBody=function(e){this.quad&&(e.in(this.quad.NW())&&this.NW?this.NW.insert(e):e.in(this.quad.NE())&&this.NE?this.NE.insert(e):e.in(this.quad.SW())&&this.SW?this.SW.insert(e):e.in(this.quad.SE())&&this.SE&&this.SE.insert(e))},e.prototype._isExternal=function(){return null==this.NW&&null==this.NE&&null==this.SW&&null==this.SE},e.prototype.updateForce=function(e){null!=this.body&&e!==this.body&&(this._isExternal()||(this.quad?this.quad.getLength():0)/this.body.distanceTo(e)<this.theta?e.addForce(this.body):(this.NW&&this.NW.updateForce(e),this.NE&&this.NE.updateForce(e),this.SW&&this.SW.updateForce(e),this.SE&&this.SE.updateForce(e)))},e}();quadTree.default=QuadTree;var __extends$e=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__importDefault$3=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(forceAtlas2,"__esModule",{value:!0}),forceAtlas2.ForceAtlas2Layout=void 0;var base_1$1=base$1,util_1=requireUtil(),body_1=__importDefault$3(body),quad_1=__importDefault$3(quad),quadTree_1=__importDefault$3(quadTree),ForceAtlas2Layout=function(e){function t(t){var n=e.call(this)||this;return n.center=[0,0],n.width=300,n.height=300,n.nodes=[],n.edges=[],n.kr=5,n.kg=1,n.mode="normal",n.preventOverlap=!1,n.dissuadeHubs=!1,n.barnesHut=void 0,n.maxIteration=0,n.ks=.1,n.ksmax=10,n.tao=.1,n.onLayoutEnd=function(){},n.prune=void 0,n.updateCfg(t),n}return __extends$e(t,e),t.prototype.getDefaultCfg=function(){return{}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.onLayoutEnd,r=e.prune,i=e.maxIteration;e.width||"undefined"==typeof window||(e.width=window.innerWidth),e.height||"undefined"==typeof window||(e.height=window.innerHeight);for(var o=[],a=t.length,s=0;s<a;s+=1){var l=t[s],c=10,u=10;(0,util_1.isNumber)(l.size)&&(c=l.size,u=l.size),(0,util_1.isArray)(l.size)?(isNaN(l.size[0])||(c=l.size[0]),isNaN(l.size[1])||(u=l.size[1])):(0,util_1.isObject)(l.size)&&(c=l.size.width,u=l.size.height),e.getWidth&&!isNaN(e.getWidth(l))&&(u=e.getWidth(l)),e.getHeight&&!isNaN(e.getHeight(l))&&(c=e.getHeight(l));var h=Math.max(c,u);o.push(h)}void 0===e.barnesHut&&a>250&&(e.barnesHut=!0),void 0===e.prune&&a>100&&(e.prune=!0),0!==this.maxIteration||e.prune?0===this.maxIteration&&r&&(i=100,a<=200&&a>100?i=500:a>200&&(i=950),this.maxIteration=i):(i=250,a<=200&&a>100?i=1e3:a>200&&(i=1200),this.maxIteration=i),e.kr||(e.kr=50,a>100&&a<=500?e.kr=20:a>500&&(e.kr=1)),e.kg||(e.kg=20,a>100&&a<=500?e.kg=10:a>500&&(e.kg=1)),this.nodes=e.updateNodesByForces(o),n()},t.prototype.updateNodesByForces=function(e){for(var t=this,n=t.edges,r=t.maxIteration,i=t.nodes,o=n.filter((function(e){return(0,util_1.getEdgeTerminal)(e,"source")!==(0,util_1.getEdgeTerminal)(e,"target")})),a=i.length,s=o.length,l=[],c={},u={},h=[],d=0;d<a;d+=1)c[i[d].id]=d,l[d]=0,(void 0===i[d].x||isNaN(i[d].x))&&(i[d].x=1e3*Math.random()),(void 0===i[d].y||isNaN(i[d].y))&&(i[d].y=1e3*Math.random()),h.push({x:i[d].x,y:i[d].y});for(d=0;d<s;d+=1){for(var f=void 0,p=void 0,g=0,m=0,v=0;v<a;v+=1){var y=(0,util_1.getEdgeTerminal)(o[d],"source"),b=(0,util_1.getEdgeTerminal)(o[d],"target");i[v].id===y?(f=i[v],g=v):i[v].id===b&&(p=i[v],m=v),u[d]={sourceIdx:g,targetIdx:m}}f&&(l[c[f.id]]+=1),p&&(l[c[p.id]]+=1)}var x=r;if(i=this.iterate(x,c,u,s,l,e),t.prune){for(v=0;v<s;v+=1)l[u[v].sourceIdx]<=1?(i[u[v].sourceIdx].x=i[u[v].targetIdx].x,i[u[v].sourceIdx].y=i[u[v].targetIdx].y):l[u[v].targetIdx]<=1&&(i[u[v].targetIdx].x=i[u[v].sourceIdx].x,i[u[v].targetIdx].y=i[u[v].sourceIdx].y);t.prune=!1,t.barnesHut=!1,x=100,i=this.iterate(x,c,u,s,l,e)}return i},t.prototype.iterate=function(e,t,n,r,i,o){for(var a=this,s=a.nodes,l=a.kr,c=a.preventOverlap,u=a.barnesHut,h=s.length,d=0,f=e,p=[],g=[],m=[],v=0;v<h;v+=1)if(p[2*v]=0,p[2*v+1]=0,u){var y={id:v,rx:s[v].x,ry:s[v].y,mass:1,g:l,degree:i[v]};m[v]=new body_1.default(y)}for(;f>0;){for(v=0;v<h;v+=1)g[2*v]=p[2*v],g[2*v+1]=p[2*v+1],p[2*v]=0,p[2*v+1]=0;p=this.getAttrForces(f,50,r,t,n,i,o,p),p=u&&(c&&f>50||!c)?this.getOptRepGraForces(p,m,i):this.getRepGraForces(f,50,p,100,o,i);var b=this.updatePos(p,g,d,i);s=b.nodes,d=b.sg,f--,a.tick&&a.tick()}return s},t.prototype.getAttrForces=function(e,t,n,r,i,o,a,s){for(var l=this,c=l.nodes,u=l.preventOverlap,h=l.dissuadeHubs,d=l.mode,f=l.prune,p=0;p<n;p+=1){var g=c[i[p].sourceIdx],m=i[p].sourceIdx,v=c[i[p].targetIdx],y=i[p].targetIdx;if(!f||!(o[m]<=1||o[y]<=1)){var b=[v.x-g.x,v.y-g.y],x=Math.hypot(b[0],b[1]);x=x<1e-4?1e-4:x,b[0]=b[0]/x,b[1]=b[1]/x,u&&e<t&&(x=x-a[m]-a[y]);var w=x,_=w;"linlog"===d&&(_=w=Math.log(1+x)),h&&(w=x/o[m],_=x/o[y]),u&&e<t&&x<=0?(w=0,_=0):u&&e<t&&x>0&&(w=x,_=x),s[2*r[g.id]]+=w*b[0],s[2*r[v.id]]-=_*b[0],s[2*r[g.id]+1]+=w*b[1],s[2*r[v.id]+1]-=_*b[1]}}return s},t.prototype.getRepGraForces=function(e,t,n,r,i,o){for(var a=this,s=a.nodes,l=a.preventOverlap,c=a.kr,u=a.kg,h=a.center,d=a.prune,f=s.length,p=0;p<f;p+=1){for(var g=p+1;g<f;g+=1)if(!d||!(o[p]<=1||o[g]<=1)){var m=[s[g].x-s[p].x,s[g].y-s[p].y],v=Math.hypot(m[0],m[1]);v=v<1e-4?1e-4:v,m[0]=m[0]/v,m[1]=m[1]/v,l&&e<t&&(v=v-i[p]-i[g]);var y=c*(o[p]+1)*(o[g]+1)/v;l&&e<t&&v<0?y=r*(o[p]+1)*(o[g]+1):l&&e<t&&0===v?y=0:l&&e<t&&v>0&&(y=c*(o[p]+1)*(o[g]+1)/v),n[2*p]-=y*m[0],n[2*g]+=y*m[0],n[2*p+1]-=y*m[1],n[2*g+1]+=y*m[1]}var b=[s[p].x-h[0],s[p].y-h[1]],x=Math.hypot(b[0],b[1]);b[0]=b[0]/x,b[1]=b[1]/x;var w=u*(o[p]+1);n[2*p]-=w*b[0],n[2*p+1]-=w*b[1]}return n},t.prototype.getOptRepGraForces=function(e,t,n){for(var r=this,i=r.nodes,o=r.kg,a=r.center,s=r.prune,l=i.length,c=9e10,u=-9e10,h=9e10,d=-9e10,f=0;f<l;f+=1)s&&n[f]<=1||(t[f].setPos(i[f].x,i[f].y),i[f].x>=u&&(u=i[f].x),i[f].x<=c&&(c=i[f].x),i[f].y>=d&&(d=i[f].y),i[f].y<=h&&(h=i[f].y));var p={xmid:(u+c)/2,ymid:(d+h)/2,length:Math.max(u-c,d-h),massCenter:a,mass:l},g=new quad_1.default(p),m=new quadTree_1.default(g);for(f=0;f<l;f+=1)s&&n[f]<=1||t[f].in(g)&&m.insert(t[f]);for(f=0;f<l;f+=1)if(!(s&&n[f]<=1)){t[f].resetForce(),m.updateForce(t[f]),e[2*f]-=t[f].fx,e[2*f+1]-=t[f].fy;var v=[i[f].x-a[0],i[f].y-a[1]],y=Math.hypot(v[0],v[1]);y=y<1e-4?1e-4:y,v[0]=v[0]/y,v[1]=v[1]/y;var b=o*(n[f]+1);e[2*f]-=b*v[0],e[2*f+1]-=b*v[1]}return e},t.prototype.updatePos=function(e,t,n,r){for(var i=this,o=i.nodes,a=i.ks,s=i.tao,l=i.prune,c=i.ksmax,u=o.length,h=[],d=[],f=0,p=0,g=0;g<u;g+=1)if(!(l&&r[g]<=1)){var m=[e[2*g]-t[2*g],e[2*g+1]-t[2*g+1]],v=Math.hypot(m[0],m[1]),y=[e[2*g]+t[2*g],e[2*g+1]+t[2*g+1]],b=Math.hypot(y[0],y[1]);h[g]=v,d[g]=b/2,f+=(r[g]+1)*h[g],p+=(r[g]+1)*d[g]}var x=n;n=s*p/f,0!==x&&(n=n>1.5*x?1.5*x:n);for(g=0;g<u;g+=1)if(!(l&&r[g]<=1||(0,util_1.isNumber)(o[g].fx)&&(0,util_1.isNumber)(o[g].fy))){var w=a*n/(1+n*Math.sqrt(h[g])),_=Math.hypot(e[2*g],e[2*g+1]),C=c/(_=_<1e-4?1e-4:_),$=(w=w>C?C:w)*e[2*g],S=w*e[2*g+1];o[g].x+=$,o[g].y+=S}return{nodes:o,sg:n}},t}(base_1$1.Base);forceAtlas2.ForceAtlas2Layout=ForceAtlas2Layout;var er$1={},core={},forceGrid={},grid={},__assign$d=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$d.apply(this,arguments)};Object.defineProperty(grid,"__esModule",{value:!0});var Grid$2=function(){function e(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return e.prototype.init=function(t,n,r){this.cells=[],this.CELL_W=r.CELL_W||e.DEFAULT_CELL_W,this.CELL_H=r.CELL_H||e.DEFAULT_CELL_H,this.columnNum=Math.ceil(t/this.CELL_W),this.rowNum=Math.ceil(n/this.CELL_H),e.MIN_DIST=Math.pow(t,2)+Math.pow(n,2);for(var i=0;i<this.columnNum;i++){for(var o=[],a=0;a<this.rowNum;a++){var s={dx:i,dy:a,x:i*this.CELL_W,y:a*this.CELL_H,occupied:!1};o.push(s)}this.cells.push(o)}},e.prototype.findGridByNodeId=function(e){for(var t,n,r=0;r<this.columnNum;r++)for(var i=0;i<this.rowNum;i++)if(this.cells[r][i].node&&(null===(n=null===(t=this.cells[r][i])||void 0===t?void 0:t.node)||void 0===n?void 0:n.id)===e)return{column:r,row:i};return null},e.prototype.sqdist=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},e.prototype.occupyNearest=function(t){for(var n,r=e.MIN_DIST,i=null,o=0;o<this.columnNum;o++)for(var a=0;a<this.rowNum;a++)!this.cells[o][a].occupied&&(n=this.sqdist(t,this.cells[o][a]))<r&&(r=n,i=this.cells[o][a]);return i&&(i.occupied=!0),i},e.prototype.insertColumn=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++){this.cells[n+this.columnNum]=[];for(var r=0;r<this.rowNum;r++)this.cells[n+this.columnNum][r]={dx:n,dy:r,x:n*this.CELL_W,y:r*this.CELL_H,occupied:!1,node:null}}for(n=this.columnNum-1;n>e;n--)for(r=0;r<this.rowNum;r++)this.cells[n+t][r]=__assign$d(__assign$d({},this.cells[n][r]),{x:(n+t)*this.CELL_W,y:r*this.CELL_H}),this.cells[n][r]={x:n*this.CELL_W,y:r*this.CELL_H,occupied:!0,node:null};for(r=0;r<this.additionColumn.length;r++)this.additionColumn[r]>=e&&(this.additionColumn[r]+=t);for(n=0;n<t;n++)this.additionColumn.push(e+n+1);this.columnNum+=t}},e.prototype.insertRow=function(e,t){if(!(t<=0)){for(var n=0;n<t;n++)for(var r=0;r<this.columnNum;r++)this.cells[r][n+this.rowNum]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(r=0;r<this.columnNum;r++)for(n=this.rowNum-1;n>e;n--)this.cells[r][n+t]=__assign$d(__assign$d({},this.cells[r][n]),{dx:r,dy:n+t,x:r*this.CELL_W,y:(n+t)*this.CELL_H}),this.cells[r][n]={dx:r,dy:n,x:r*this.CELL_W,y:n*this.CELL_H,occupied:!1,node:null};for(n=0;n<this.additionRow.length;n++)this.additionRow[n]>=e&&(this.additionRow[n]+=t);for(r=0;r<t;r++)this.additionRow.push(e+r+1);this.rowNum+=t}},e.prototype.getNodes=function(){for(var e=[],t=0;t<this.columnNum;t++)for(var n=0;n<this.rowNum;n++)this.cells[t][n].node&&e.push(this.cells[t][n]);return e},e.MIN_DIST=50,e.DEFAULT_CELL_W=80,e.DEFAULT_CELL_H=80,e}();grid.default=Grid$2;var __importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(forceGrid,"__esModule",{value:!0});var grid_1=__importDefault$2(grid);function layout$4(e,t){if(!e.nodes||0===e.nodes.length)return e;var n=t.width,r=t.height,i=t.nodeMinGap,o=1e4,a=1e4;e.nodes.forEach((function(e){var t=e.size[0]||50,n=e.size[1]||50;o=Math.min(t,o),a=Math.min(n,a)}));var s=new grid_1.default;s.init(n,r,{CELL_H:a,CELL_W:o}),e.nodes.forEach((function(e){var t=s.occupyNearest(e);t&&(t.node={id:e.id,size:e.size},e.x=t.x,e.y=t.y,e.dx=t.dx,e.dy=t.dy)}));for(var l=0;l<e.nodes.length;l++){var c=e.nodes[l],u=s.findGridByNodeId(c.id);if(!u)throw new Error("can not find node cell");var h=u.column,d=u.row;if(c.size[0]+i>o){for(var f=g=Math.ceil((c.size[0]+i)/o)-1,p=0;p<g;p++){if(!(s.additionColumn.indexOf(h+p+1)>-1)||s.cells[h+p+1][d].node)break;f--}s.insertColumn(h,f)}if(c.size[1]+i>a){var g;for(f=g=Math.ceil((c.size[1]+i)/a)-1,p=0;p<g;p++){if(!(s.additionRow.indexOf(d+p+1)>-1)||s.cells[h][d+p+1].node)break;f--}s.insertRow(d,f)}}for(l=0;l<s.columnNum;l++){var m=function(t){var n=s.cells[l][t];if(n.node){var r=e.nodes.find((function(e){var t;return e.id===(null===(t=null==n?void 0:n.node)||void 0===t?void 0:t.id)}));r&&(r.x=n.x+r.size[0]/2,r.y=n.y+r.size[1]/2)}};for(p=0;p<s.rowNum;p++)m(p)}}forceGrid.default=layout$4;var mysqlWorkbench={};Object.defineProperty(mysqlWorkbench,"__esModule",{value:!0});var graphWidth=1200,graphHeight=800,OVERLAP_QUOT=1e7,MIN_DIST=10,M_PI=3.141592653589793,M_PI_2=1.5707963267948966,PI_38=.375*M_PI,PI_58=.625*M_PI,nodeEdgeMap=new Map,CELL_W=10,CELL_H=10,T=.8,T_MIN=.1,R=.5;function distanceToNode(e,t,n){var r=e.x-e.size[0]/2,i=e.y-e.size[1]/2,o=e.x+e.size[0]/2,a=e.y+e.size[1]/2,s=t.x-t.size[0]/2,l=t.y-t.size[1]/2,c=t.x+t.size[0]/2,u=t.y+t.size[1]/2,h=e.x,d=e.y,f=t.x,p=t.y,g=f-h,m=Math.atan2(g,p-d),v=0,y=0,b=0,x=0;m>M_PI_2?(y=i-u,v=s-o,b=parseFloat(y?(y/Math.cos(m)).toFixed(2):v.toFixed(2)),x=parseFloat(v?(v/Math.sin(m)).toFixed(2):y.toFixed(2))):b=x=0<m&&m<=M_PI_2?(y=l-a)>(v=s-o)?parseFloat(y?(y/Math.cos(m)).toFixed(2):v.toFixed(2)):parseFloat(v?(v/Math.sin(m)).toFixed(2):y.toFixed(2)):m<-M_PI_2?(y=i-u)>(v=-(c-r))?parseFloat(y?(y/Math.cos(m)).toFixed(2):v.toFixed(2)):parseFloat(v?(v/Math.sin(m)).toFixed(2):y.toFixed(2)):(y=l-a)>(v=Math.abs(g)>(o-r)/2?r-c:g)?parseFloat(y?(y/Math.cos(m)).toFixed(2):v.toFixed(2)):parseFloat(v&&0!==m?(v/Math.sin(m)).toFixed(2):y.toFixed(2));var w=parseFloat(m.toFixed(2)),_=n;return n&&(_=PI_38<w&&w<PI_58),{distance:Math.abs(b<x?b:x),isHoriz:_}}function calcNodePair(e,t){var n=(nodeEdgeMap.get(e.id)||[]).find((function(e){return e.source===t.id||e.target===t.id})),r=e.size[0]*e.size[1],i=t.size[0]*t.size[1],o=r>i?t:e,a=r>i?e:t,s=o.x-o.size[0]/2,l=o.y-o.size[1]/2,c=o.x+o.size[0]/2,u=o.y+o.size[1]/2,h=a.x-a.size[0]/2,d=a.y-a.size[1]/2,f=a.x+a.size[0]/2,p=a.y+a.size[1]/2,g=o.x,m=o.y,v=a.x,y=a.y,b=0,x=0;if(c>=h&&f>=s&&u>=d&&p>=l){0===(x=Math.sqrt(Math.pow(v-g,2)+Math.pow(y-m,2)))&&(x=1e-7),b=1*MIN_DIST/x*100+((c<f?c:f)-(s>h?s:h))*((u<p?u:p)-(l>d?l:d)),b*=OVERLAP_QUOT}else{var w=!1,_=distanceToNode(o,a,w);x=_.distance,w=_.isHoriz,x<=MIN_DIST?b+=0!==x?n?MIN_DIST+1*OVERLAP_QUOT/x:MIN_DIST+OVERLAP_QUOT*MIN_DIST/x:OVERLAP_QUOT:(b+=x,n&&(b+=x*x))}return b}function calcEnergy(e){for(var t=0,n=0;n<e.length;n++){var r=e[n];(r.x<0||r.y<0||r.x>graphWidth||r.y>graphHeight)&&(t+=1e12);for(var i=n+1;i<e.length;i++)t+=calcNodePair(r,e[i])}return t}function isCorrectPosition(e,t,n,r){var i=new Map;n.forEach((function(e,t){i.set(e.id,e)}));var o=r.filter((function(t){return t.source===e.id||t.target===e.id}))||[],a=[];o.forEach((function(t){var n=t.source===e.id?t.target:t.source,r=i.get(n);r&&a.push(r)}));for(var s=!0,l=0;l<a.length;l++){var c=a[l],u=180*Math.atan((e.y-c.y)/(c.x-e.y)),h=180*Math.atan((t.y-c.y)/(c.x-t.y)),d=u>70&&u<110,f=h>70&&h<110;if((u<30||u>150)&&!(h<30||h>150)||u*h<0){s=!1;break}if(d&&!f||u*h<0){s=!1;break}if((c.x-e.x)*(c.x-t.x)<0){s=!1;break}if((c.y-e.y)*(c.y-t.y)<0){s=!1;break}}return s}function shuffle(e,t){for(var n=!1,r=1*CELL_W,i=1*CELL_H,o=[r,-r,0,0],a=[0,0,i,-i],s=0;s<e.length;++s)for(var l=e[s],c=calcNodeEnergy(l,e),u=0;u<o.length;u++){if(isCorrectPosition(l,{x:l.x+o[u],y:l.y+a[u]},e,t)){l.x+=o[u],l.y+=a[u];var h=calcNodeEnergy(l,e),d=Math.random();h<c||d<T&&d>T_MIN?(c=h,n=!0):(l.x-=o[u],l.y-=a[u])}}return T>T_MIN&&(T*=R),n?calcEnergy(e):0}function calcNodeEnergy(e,t){var n=0;(e.x<0||e.y<0||e.x+e.size[0]+20>graphWidth||e.y+e.size[1]+20>graphHeight)&&(n+=1e12);for(var r=0;r<t.length;++r)e.id!==t[r].id&&(n+=calcNodePair(e,t[r]));return n}function layout$3(e,t){if(0===e.length)return{nodes:e,edges:t};e.forEach((function(e){var n=t.filter((function(t){return t.source===e.id||t.target===e.id}));nodeEdgeMap.set(e,n)})),e.sort((function(e,t){var n,r;return(null===(n=nodeEdgeMap.get(e.id))||void 0===n?void 0:n.length)-(null===(r=nodeEdgeMap.get(t.id))||void 0===r?void 0:r.length)}));for(var n=calcEnergy(e),r=20,i=1,o=0,a=0;r>0&&!(++a>=50);){var s=shuffle(e,t);0!==s&&(o=s),i=o-n,n=o,0===i?--r:r=20}return e.forEach((function(e){e.x=e.x-e.size[0]/2,e.y=e.y-e.size[1]/2})),{nodes:e,edges:t}}mysqlWorkbench.default=layout$3;var __assign$c=commonjsGlobal&&commonjsGlobal.__assign||function(){return __assign$c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$c.apply(this,arguments)},__createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&__createBinding(t,e,n);return __setModuleDefault(t,e),t},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(core,"__esModule",{value:!0});var d3Force=__importStar(require$$0$2),forceGrid_1=__importDefault$1(forceGrid),mysqlWorkbench_1=__importDefault$1(mysqlWorkbench),dagre_1=dagre$1;function layout$2(e,t){var n=e.nodes,r=e.edges,i=t.width,o=t.height;if(!(null==n?void 0:n.length))return Promise.resolve();var a=[];n.forEach((function(e){if(r.filter((function(t){return t.source===e.id||t.target===e.id})).length>1){var t=__assign$c({},e);delete t.size,a.push(t)}}));var s=[];r.forEach((function(e){var t=a.find((function(t){return t.id===e.source})),n=a.find((function(t){return t.id===e.target}));t&&n&&s.push(e)}));var l=new dagre_1.DagreLayout({type:"dagre",ranksep:t.nodeMinGap,nodesep:t.nodeMinGap}).layout({nodes:a,edges:s}).nodes;n.forEach((function(e){var t=(l||[]).find((function(t){return t.id===e.id}));e.x=(null==t?void 0:t.x)||i/2,e.y=(null==t?void 0:t.y)||o/2}));var c=JSON.parse(JSON.stringify(n)),u=JSON.parse(JSON.stringify(r)),h=d3Force.forceSimulation().nodes(c).force("link",d3Force.forceLink(u).id((function(e){return e.id})).distance((function(e){return s.find((function(t){return t.source===e.source&&t.target===e.target}))?30:20}))).force("charge",d3Force.forceManyBody()).force("center",d3Force.forceCenter(i/2,o/2)).force("x",d3Force.forceX(i/2)).force("y",d3Force.forceY(o/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise((function(e){h.on("end",(function(){n.forEach((function(e){var t=c.find((function(t){return t.id===e.id}));t&&(e.x=t.x,e.y=t.y)}));var a=Math.min.apply(Math,n.map((function(e){return e.x}))),s=Math.max.apply(Math,n.map((function(e){return e.x}))),l=Math.min.apply(Math,n.map((function(e){return e.y}))),u=Math.max.apply(Math,n.map((function(e){return e.y}))),h=i/(s-a),d=o/(u-l);n.forEach((function(e){void 0!==e.x&&h<1&&(e.x=(e.x-a)*h),void 0!==e.y&&d<1&&(e.y=(e.y-l)*d)})),n.forEach((function(e){e.sizeTemp=e.size,e.size=[10,10]})),(0,mysqlWorkbench_1.default)(n,r),n.forEach((function(e){e.size=e.sizeTemp||[],delete e.sizeTemp})),(0,forceGrid_1.default)({nodes:n,edges:r},t),e()}))}))}core.default=layout$2;var __extends$d=commonjsGlobal&&commonjsGlobal.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(er$1,"__esModule",{value:!0}),er$1.ERLayout=void 0;var base_1=base$1,core_1=__importDefault(core),ERLayout=function(e){function t(t){var n=e.call(this)||this;return n.width=300,n.height=300,n.nodeMinGap=50,n.onLayoutEnd=function(){},t&&n.updateCfg(t),n}return __extends$d(t,e),t.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},t.prototype.execute=function(){var e=this,t=e.nodes,n=e.edges;return null==t||t.forEach((function(e){e.size||(e.size=[50,50])})),(0,core_1.default)({nodes:t,edges:n},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then((function(){e.onLayoutEnd&&e.onLayoutEnd()}))},t.prototype.getType=function(){return"er"},t}(base_1.Base);er$1.ERLayout=ERLayout;var layout$1={},hasRequiredLayout$1;function requireLayout$1(){if(hasRequiredLayout$1)return layout$1;hasRequiredLayout$1=1,Object.defineProperty(layout$1,"__esModule",{value:!0}),layout$1.Layouts=layout$1.Layout=void 0;var e=registy,t=grid$1,n=random,r=force2,i=gForce$1,o=force$1,a=circular,s=dagre$1,l=radial$1,c=concentric,u=mds,h=fruchterman$1,d=fruchterman,f=gForce,p=comboForce,g=requireComboCombined(),m=forceAtlas2,v=er$1,y=dagreCompound,b=requireUtil(),x=function(){function t(t){var n=(0,e.getLayoutByName)(t.type);this.layoutInstance=new n(t)}return t.prototype.layout=function(e){return this.layoutInstance.layout(e)},t.prototype.updateCfg=function(e){this.layoutInstance.updateCfg(e)},t.prototype.init=function(e){this.correctLayers(e.nodes),this.layoutInstance.init(e)},t.prototype.correctLayers=function(e){if(null==e?void 0:e.length){var t=1/0,n=[];if(e.forEach((function(e){(0,b.isString)(e.layer)&&(e.layer=parseInt(e.layer,10)),void 0===e.layer||isNaN(e.layer)||(n.push(e),e.layer<t&&(t=e.layer))})),t<=0){var r=Math.abs(t)+1;n.forEach((function(e){return e.layer+=r}))}}},t.prototype.execute=function(){this.layoutInstance.execute()},t.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},t.prototype.destroy=function(){return this.layoutInstance.destroy()},t}();return layout$1.Layout=x,layout$1.Layouts={force:o.ForceLayout,fruchterman:h.FruchtermanLayout,forceAtlas2:m.ForceAtlas2Layout,gForce:i.GForceLayout,force2:r.Force2Layout,dagre:s.DagreLayout,dagreCompound:y.DagreCompoundLayout,circular:a.CircularLayout,radial:l.RadialLayout,concentric:c.ConcentricLayout,grid:t.GridLayout,mds:u.MDSLayout,comboForce:p.ComboForceLayout,comboCombined:g.ComboCombinedLayout,random:n.RandomLayout,"gForce-gpu":f.GForceGPULayout,"fruchterman-gpu":d.FruchtermanGPULayout,er:v.ERLayout},layout$1}var types={},hasRequiredLayout;function requireLayout(){return hasRequiredLayout||(hasRequiredLayout=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.ERLayout=e.ForceAtlas2Layout=e.ComboCombinedLayout=e.ComboForceLayout=e.GForceGPULayout=e.FruchtermanGPULayout=e.FruchtermanLayout=e.MDSLayout=e.ConcentricLayout=e.RadialLayout=e.DagreCompoundLayout=e.DagreLayout=e.CircularLayout=e.ForceLayout=e.Force2Layout=e.GForceLayout=e.RandomLayout=e.GridLayout=e.Layouts=e.Layout=void 0;var r=grid$1;Object.defineProperty(e,"GridLayout",{enumerable:!0,get:function(){return r.GridLayout}});var i=random;Object.defineProperty(e,"RandomLayout",{enumerable:!0,get:function(){return i.RandomLayout}});var o=gForce$1;Object.defineProperty(e,"GForceLayout",{enumerable:!0,get:function(){return o.GForceLayout}});var a=force2;Object.defineProperty(e,"Force2Layout",{enumerable:!0,get:function(){return a.Force2Layout}});var s=force$1;Object.defineProperty(e,"ForceLayout",{enumerable:!0,get:function(){return s.ForceLayout}});var l=circular;Object.defineProperty(e,"CircularLayout",{enumerable:!0,get:function(){return l.CircularLayout}});var c=dagre$1;Object.defineProperty(e,"DagreLayout",{enumerable:!0,get:function(){return c.DagreLayout}});var u=dagreCompound;Object.defineProperty(e,"DagreCompoundLayout",{enumerable:!0,get:function(){return u.DagreCompoundLayout}});var h=radial$1;Object.defineProperty(e,"RadialLayout",{enumerable:!0,get:function(){return h.RadialLayout}});var d=concentric;Object.defineProperty(e,"ConcentricLayout",{enumerable:!0,get:function(){return d.ConcentricLayout}});var f=mds;Object.defineProperty(e,"MDSLayout",{enumerable:!0,get:function(){return f.MDSLayout}});var p=fruchterman$1;Object.defineProperty(e,"FruchtermanLayout",{enumerable:!0,get:function(){return p.FruchtermanLayout}});var g=fruchterman;Object.defineProperty(e,"FruchtermanGPULayout",{enumerable:!0,get:function(){return g.FruchtermanGPULayout}});var m=gForce;Object.defineProperty(e,"GForceGPULayout",{enumerable:!0,get:function(){return m.GForceGPULayout}});var v=comboForce;Object.defineProperty(e,"ComboForceLayout",{enumerable:!0,get:function(){return v.ComboForceLayout}});var y=requireComboCombined();Object.defineProperty(e,"ComboCombinedLayout",{enumerable:!0,get:function(){return y.ComboCombinedLayout}});var b=forceAtlas2;Object.defineProperty(e,"ForceAtlas2Layout",{enumerable:!0,get:function(){return b.ForceAtlas2Layout}});var x=er$1;Object.defineProperty(e,"ERLayout",{enumerable:!0,get:function(){return x.ERLayout}});var w=requireLayout$1();Object.defineProperty(e,"Layout",{enumerable:!0,get:function(){return w.Layout}}),Object.defineProperty(e,"Layouts",{enumerable:!0,get:function(){return w.Layouts}}),n(types,e)}(layout$7)),layout$7}Object.defineProperty(types,"__esModule",{value:!0}),function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.getLayoutByName=e.unRegisterLayout=e.registerLayout=void 0;var r=registy;Object.defineProperty(e,"registerLayout",{enumerable:!0,get:function(){return r.registerLayout}}),Object.defineProperty(e,"unRegisterLayout",{enumerable:!0,get:function(){return r.unRegisterLayout}}),Object.defineProperty(e,"getLayoutByName",{enumerable:!0,get:function(){return r.getLayoutByName}}),n(requireLayout(),e)}(lib);var hierarchy={exports:{}};!function(e,t){!function(t,n){e.exports=n()}("undefined"!=typeof self&&self,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=31)}([function(e,t,n){var r=n(4);t.a=function(e){return Array.isArray?Array.isArray(e):Object(r.a)(e,"Array")}},function(e,t,n){t.a=function(e){return null!==e&&"function"!=typeof e&&isFinite(e.length)}},function(e,t,n){var r=n(0),i=n(13);t.a=function(e,t){if(e)if(Object(r.a)(e))for(var n=0,o=e.length;n<o&&!1!==t(e[n],n);n++);else if(Object(i.a)(e))for(var a in e)if(e.hasOwnProperty(a)&&!1===t(e[a],a))break}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Function")}},function(e,t,n){var r={}.toString;t.a=function(e,t){return r.call(e)==="[object "+t+"]"}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Number")}},function(e,t,n){t.a=function(e){return null==e}},function(e,t,n){var r=n(33).mix;e.exports={assign:r}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"String")}},function(e,t,n){var r=n(15),i=n(4);t.a=function(e){if(!Object(r.a)(e)||!Object(i.a)(e,"Object"))return!1;if(null===Object.getPrototypeOf(e))return!0;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},function(e,t,n){var r=n(6);t.a=function(e){return Object(r.a)(e)?"":e.toString()}},function(e,t,n){var r=n(18),i=function(){function e(e,t){void 0===t&&(t={});this.options=t,this.rootNode=r(e,t)}return e.prototype.execute=function(){throw new Error("please override this method")},e}();e.exports=i},function(e,t,n){var r=n(1);t.a=function(e,t){return!!Object(r.a)(e)&&e.indexOf(t)>-1}},function(e,t,n){t.a=function(e){var t=typeof e;return null!==e&&"object"===t||"function"===t}},function(e,t,n){var r=n(2),i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;var n=[];return Object(r.a)(e,(function(e,r){t(e,r)&&n.push(e)})),n}},function(e,t,n){t.a=function(e){return"object"==typeof e&&null!==e}},function(e,t,n){function r(e,t){for(var n in t)t.hasOwnProperty(n)&&"constructor"!==n&&void 0!==t[n]&&(e[n]=t[n])}t.a=function(e,t,n,i){t&&r(e,t);n&&r(e,n);i&&r(e,i);return e}},function(e,t,n){var r=n(30),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];e.exports=function(e,t,n){var s=t.direction||a;if(t.isHorizontal=function(e){return o.indexOf(e)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(e,t);else if(s===i[1])n(e,t),e.right2left();else if(s===i[2])n(e,t);else if(s===i[3])n(e,t),e.bottom2top();else if(s===i[4]||s===i[5]){var l=r(e,t),c=l.left,u=l.right;n(c,t),n(u,t),t.isHorizontal?c.right2left():c.bottom2top(),u.translate(c.x-u.x,c.y-u.y),e.x=c.x,e.y=u.y;var h=e.getBoundingBox();t.isHorizontal?h.top<0&&e.translate(0,-h.top):h.left<0&&e.translate(-h.left,0)}var d=t.fixedRoot;return void 0===d&&(d=!0),d&&e.translate(-(e.x+e.width/2+e.hgap),-(e.y+e.height/2+e.vgap)),e}},function(e,t,n){var r=n(7),i={getId:function(e){return e.id||e.name},getPreH:function(e){return e.preH||0},getPreV:function(e){return e.preV||0},getHGap:function(e){return e.hgap||18},getVGap:function(e){return e.vgap||18},getChildren:function(e){return e.children},getHeight:function(e){return e.height||36},getWidth:function(e){var t=e.label||" ";return e.width||18*t.split("").length}};function o(e,t){var n=this;if(n.vgap=n.hgap=0,e instanceof o)return e;n.data=e;var r=t.getHGap(e),i=t.getVGap(e);return n.preH=t.getPreH(e),n.preV=t.getPreV(e),n.width=t.getWidth(e),n.height=t.getHeight(e),n.width+=n.preH,n.height+=n.preV,n.id=t.getId(e),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(e,t){var n=this;n.hgap+=e,n.vgap+=t,n.width+=2*e,n.height+=2*t},eachNode:function(e){for(var t,n=[this];t=n.shift();)e(t),n=t.children.concat(n)},DFTraverse:function(e){this.eachNode(e)},BFTraverse:function(e){for(var t,n=[this];t=n.shift();)e(t),n=n.concat(t.children)},getBoundingBox:function(){var e={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.width=Math.max(e.width,t.x+t.width),e.height=Math.max(e.height,t.y+t.height)})),e},translate:function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.eachNode((function(n){n.x+=e,n.y+=t,n.x+=n.preH,n.y+=n.preV}))},right2left:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.x=e.x-2*(e.x-t.left)-e.width})),e.translate(t.width,0)},bottom2top:function(){var e=this,t=e.getBoundingBox();e.eachNode((function(e){e.y=e.y-2*(e.y-t.top)-e.height})),e.translate(0,t.height)}}),e.exports=function(e,t,n){void 0===t&&(t={});var a,s=new o(e,t=r.assign({},i,t)),l=[s];if(!n&&!e.collapsed)for(;a=l.shift();)if(!a.data.collapsed){var c=t.getChildren(a.data),u=c?c.length:0;if(a.children=new Array(u),c&&u)for(var h=0;h<u;h++){var d=new o(c[h],t);a.children[h]=d,l.push(d),d.parent=a,d.depth=a.depth+1}}return s}},function(e,t,n){var r=n(6),i=n(20);t.a=function(e,t){var n=Object(i.a)(t),o=n.length;if(Object(r.a)(e))return!o;for(var a=0;a<o;a+=1){var s=n[a];if(t[s]!==e[s]||!(s in e))return!1}return!0}},function(e,t,n){var r=n(2),i=n(3),o=Object.keys?function(e){return Object.keys(e)}:function(e){var t=[];return Object(r.a)(e,(function(n,r){Object(i.a)(e)&&"prototype"===r||t.push(r)})),t};t.a=o},function(e,t,n){var r=n(1),i=Array.prototype.splice;t.a=function(e,t){if(!Object(r.a)(e))return[];for(var n=e?t.length:0,o=n-1;n--;){var a=void 0,s=t[n];n!==o&&s===a||(a=s,i.call(e,s,1))}return e}},function(e,t,n){var r=n(12),i=n(2);t.a=function(e){var t=[];return Object(i.a)(e,(function(e){Object(r.a)(t,e)||t.push(e)})),t}},function(e,t,n){var r=n(0),i=n(3),o=n(24);t.a=function(e,t){if(!t)return{0:e};if(!Object(i.a)(t)){var n=Object(r.a)(t)?t:t.replace(/\s+/g,"").split("*");t=function(e){for(var t="_",r=0,i=n.length;r<i;r++)t+=e[n[r]]&&e[n[r]].toString();return t}}return Object(o.a)(e,t)}},function(e,t,n){var r=n(2),i=n(0),o=n(3),a=Object.prototype.hasOwnProperty;t.a=function(e,t){if(!t||!Object(i.a)(e))return{};var n,s={},l=Object(o.a)(t)?t:function(e){return e[t]};return Object(r.a)(e,(function(e){n=l(e),a.call(s,n)?s[n].push(e):s[n]=[e]})),s}},function(e,t,n){t.a=function(e,t){return e.hasOwnProperty(t)}},function(e,t,n){var r=n(2),i=n(3),o=Object.values?function(e){return Object.values(e)}:function(e){var t=[];return Object(r.a)(e,(function(n,r){Object(i.a)(e)&&"prototype"===r||t.push(n)})),t};t.a=o},function(e,t,n){var r={}.toString;t.a=function(e){return r.call(e).replace(/^\[object /,"").replace(/]$/,"")}},function(e,t,n){var r=Object.prototype;t.a=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||r)}},function(e,t,n){var r=n(15),i=n(1),o=n(8),a=function(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Object(o.a)(e)||Object(o.a)(t))return!1;if(Object(i.a)(e)||Object(i.a)(t)){if(e.length!==t.length)return!1;for(var n=!0,s=0;s<e.length&&(n=a(e[s],t[s]));s++);return n}if(Object(r.a)(e)||Object(r.a)(t)){var l=Object.keys(e),c=Object.keys(t);if(l.length!==c.length)return!1;for(n=!0,s=0;s<l.length&&(n=a(e[l[s]],t[l[s]]));s++);return n}return!1};t.a=a},function(e,t,n){var r=n(18);e.exports=function(e,t){for(var n=r(e.data,t,!0),i=r(e.data,t,!0),o=e.children.length,a=Math.round(o/2),s=t.getSide||function(e,t){return t<a?"right":"left"},l=0;l<o;l++){var c=e.children[l];"right"===s(c,l)?i.children.push(c):n.children.push(c)}return n.eachNode((function(e){e.isRoot()||(e.side="left")})),i.eachNode((function(e){e.isRoot()||(e.side="right")})),{left:n,right:i}}},function(e,t,n){var r={compactBox:n(32),dendrogram:n(114),indented:n(116),mindmap:n(118)};e.exports=r},function(e,t,n){var r=n(11),i=n(113),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);n.d(t,"contains",(function(){return r.a})),n.d(t,"includes",(function(){return r.a}));var i=n(34);n.d(t,"difference",(function(){return i.a}));var o=n(35);n.d(t,"find",(function(){return o.a}));var a=n(36);n.d(t,"findIndex",(function(){return a.a}));var s=n(37);n.d(t,"firstValue",(function(){return s.a}));var l=n(38);n.d(t,"flatten",(function(){return l.a}));var c=n(39);n.d(t,"flattenDeep",(function(){return c.a}));var u=n(40);n.d(t,"getRange",(function(){return u.a}));var h=n(41);n.d(t,"pull",(function(){return h.a}));var d=n(21);n.d(t,"pullAt",(function(){return d.a}));var f=n(42);n.d(t,"reduce",(function(){return f.a}));var p=n(43);n.d(t,"remove",(function(){return p.a}));var g=n(44);n.d(t,"sortBy",(function(){return g.a}));var m=n(45);n.d(t,"union",(function(){return m.a}));var v=n(22);n.d(t,"uniq",(function(){return v.a}));var y=n(46);n.d(t,"valuesOfKey",(function(){return y.a}));var b=n(47);n.d(t,"head",(function(){return b.a}));var x=n(48);n.d(t,"last",(function(){return x.a}));var w=n(49);n.d(t,"startsWith",(function(){return w.a}));var _=n(50);n.d(t,"endsWith",(function(){return _.a}));var C=n(14);n.d(t,"filter",(function(){return C.a}));var $=n(51);n.d(t,"every",(function(){return $.a}));var S=n(52);n.d(t,"some",(function(){return S.a}));var E=n(53);n.d(t,"group",(function(){return E.a}));var A=n(24);n.d(t,"groupBy",(function(){return A.a}));var M=n(23);n.d(t,"groupToMap",(function(){return M.a}));var k=n(54);n.d(t,"getWrapBehavior",(function(){return k.a}));var T=n(55);n.d(t,"wrapBehavior",(function(){return T.a}));var P=n(56);n.d(t,"number2color",(function(){return P.a}));var O=n(57);n.d(t,"parseRadius",(function(){return O.a}));var N=n(58);n.d(t,"clamp",(function(){return N.a}));var I=n(59);n.d(t,"fixedBase",(function(){return I.a}));var D=n(60);n.d(t,"isDecimal",(function(){return D.a}));var L=n(61);n.d(t,"isEven",(function(){return L.a}));var R=n(62);n.d(t,"isInteger",(function(){return R.a}));var B=n(63);n.d(t,"isNegative",(function(){return B.a}));var j=n(64);n.d(t,"isNumberEqual",(function(){return j.a}));var F=n(65);n.d(t,"isOdd",(function(){return F.a}));var G=n(66);n.d(t,"isPositive",(function(){return G.a}));var V=n(67);n.d(t,"maxBy",(function(){return V.a}));var z=n(68);n.d(t,"minBy",(function(){return z.a}));var H=n(69);n.d(t,"mod",(function(){return H.a}));var U=n(70);n.d(t,"toDegree",(function(){return U.a}));var W=n(71);n.d(t,"toInteger",(function(){return W.a}));var q=n(72);n.d(t,"toRadian",(function(){return q.a}));var Y=n(73);n.d(t,"forIn",(function(){return Y.a}));var X=n(25);n.d(t,"has",(function(){return X.a}));var K=n(74);n.d(t,"hasKey",(function(){return K.a}));var Z=n(75);n.d(t,"hasValue",(function(){return Z.a}));var Q=n(20);n.d(t,"keys",(function(){return Q.a}));var J=n(19);n.d(t,"isMatch",(function(){return J.a}));var ee=n(26);n.d(t,"values",(function(){return ee.a}));var te=n(76);n.d(t,"lowerCase",(function(){return te.a}));var ne=n(77);n.d(t,"lowerFirst",(function(){return ne.a}));var re=n(78);n.d(t,"substitute",(function(){return re.a}));var ie=n(79);n.d(t,"upperCase",(function(){return ie.a}));var oe=n(80);n.d(t,"upperFirst",(function(){return oe.a}));var ae=n(27);n.d(t,"getType",(function(){return ae.a}));var se=n(81);n.d(t,"isArguments",(function(){return se.a}));var le=n(0);n.d(t,"isArray",(function(){return le.a}));var ce=n(1);n.d(t,"isArrayLike",(function(){return ce.a}));var ue=n(82);n.d(t,"isBoolean",(function(){return ue.a}));var he=n(83);n.d(t,"isDate",(function(){return he.a}));var de=n(84);n.d(t,"isError",(function(){return de.a}));var fe=n(3);n.d(t,"isFunction",(function(){return fe.a}));var pe=n(85);n.d(t,"isFinite",(function(){return pe.a}));var ge=n(6);n.d(t,"isNil",(function(){return ge.a}));var me=n(86);n.d(t,"isNull",(function(){return me.a}));var ve=n(5);n.d(t,"isNumber",(function(){return ve.a}));var ye=n(13);n.d(t,"isObject",(function(){return ye.a}));var be=n(15);n.d(t,"isObjectLike",(function(){return be.a}));var xe=n(9);n.d(t,"isPlainObject",(function(){return xe.a}));var we=n(28);n.d(t,"isPrototype",(function(){return we.a}));var _e=n(87);n.d(t,"isRegExp",(function(){return _e.a}));var Ce=n(8);n.d(t,"isString",(function(){return Ce.a}));var $e=n(4);n.d(t,"isType",(function(){return $e.a}));var Se=n(88);n.d(t,"isUndefined",(function(){return Se.a}));var Ee=n(89);n.d(t,"isElement",(function(){return Ee.a}));var Ae=n(90);n.d(t,"requestAnimationFrame",(function(){return Ae.a}));var Me=n(91);n.d(t,"clearAnimationFrame",(function(){return Me.a}));var ke=n(92);n.d(t,"augment",(function(){return ke.a}));var Te=n(93);n.d(t,"clone",(function(){return Te.a}));var Pe=n(94);n.d(t,"debounce",(function(){return Pe.a}));var Oe=n(95);n.d(t,"memoize",(function(){return Oe.a}));var Ne=n(96);n.d(t,"deepMix",(function(){return Ne.a}));var Ie=n(2);n.d(t,"each",(function(){return Ie.a}));var De=n(97);n.d(t,"extend",(function(){return De.a}));var Le=n(98);n.d(t,"indexOf",(function(){return Le.a}));var Re=n(99);n.d(t,"isEmpty",(function(){return Re.a}));var Be=n(29);n.d(t,"isEqual",(function(){return Be.a}));var je=n(100);n.d(t,"isEqualWith",(function(){return je.a}));var Fe=n(101);n.d(t,"map",(function(){return Fe.a}));var Ge=n(102);n.d(t,"mapValues",(function(){return Ge.a}));var Ve=n(16);n.d(t,"mix",(function(){return Ve.a})),n.d(t,"assign",(function(){return Ve.a}));var ze=n(103);n.d(t,"get",(function(){return ze.a}));var He=n(104);n.d(t,"set",(function(){return He.a}));var Ue=n(105);n.d(t,"pick",(function(){return Ue.a}));var We=n(106);n.d(t,"throttle",(function(){return We.a}));var qe=n(107);n.d(t,"toArray",(function(){return qe.a}));var Ye=n(10);n.d(t,"toString",(function(){return Ye.a}));var Xe=n(108);n.d(t,"uniqueId",(function(){return Xe.a}));var Ke=n(109);n.d(t,"noop",(function(){return Ke.a}));var Ze=n(110);n.d(t,"identity",(function(){return Ze.a}));var Qe=n(111);n.d(t,"size",(function(){return Qe.a}));var Je=n(112);n.d(t,"Cache",(function(){return Je.a}))},function(e,t,n){var r=n(14),i=n(12);t.a=function(e,t){return void 0===t&&(t=[]),Object(r.a)(e,(function(e){return!Object(i.a)(t,e)}))}},function(e,t,n){var r=n(3),i=n(19),o=n(0),a=n(9);t.a=function(e,t){if(!Object(o.a)(e))return null;var n;if(Object(r.a)(t)&&(n=t),Object(a.a)(t)&&(n=function(e){return Object(i.a)(e,t)}),n)for(var s=0;s<e.length;s+=1)if(n(e[s]))return e[s];return null}},function(e,t,n){t.a=function(e,t,n){void 0===n&&(n=0);for(var r=n;r<e.length;r++)if(t(e[r],r))return r;return-1}},function(e,t,n){var r=n(6),i=n(0);t.a=function(e,t){for(var n=null,o=0;o<e.length;o++){var a=e[o][t];if(!Object(r.a)(a)){n=Object(i.a)(a)?a[0]:a;break}}return n}},function(e,t,n){var r=n(0);t.a=function(e){if(!Object(r.a)(e))return[];for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);return t}},function(e,t,n){var r=n(0),i=function(e,t){if(void 0===t&&(t=[]),Object(r.a)(e))for(var n=0;n<e.length;n+=1)i(e[n],t);else t.push(e);return t};t.a=i},function(e,t,n){var r=n(0),i=n(14);t.a=function(e){if(!(e=Object(i.a)(e,(function(e){return!isNaN(e)}))).length)return{min:0,max:0};if(Object(r.a)(e[0])){for(var t=[],n=0;n<e.length;n++)t=t.concat(e[n]);e=t}var o=Math.max.apply(null,e);return{min:Math.min.apply(null,e),max:o}}},function(e,t,n){var r=Array.prototype,i=r.splice,o=r.indexOf;t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)for(var a=t[r],s=-1;(s=o.call(e,a))>-1;)i.call(e,s,1);return e}},function(e,t,n){var r=n(2),i=n(0),o=n(9);t.a=function(e,t,n){if(!Object(i.a)(e)&&!Object(o.a)(e))return e;var a=n;return Object(r.a)(e,(function(e,n){a=t(a,e,n)})),a}},function(e,t,n){var r=n(1),i=n(21);t.a=function(e,t){var n=[];if(!Object(r.a)(e))return n;for(var o=-1,a=[],s=e.length;++o<s;){var l=e[o];t(l,o,e)&&(n.push(l),a.push(o))}return Object(i.a)(e,a),n}},function(e,t,n){var r=n(0),i=n(8),o=n(3);t.a=function(e,t){var n;if(Object(o.a)(t))n=function(e,n){return t(e)-t(n)};else{var a=[];Object(i.a)(t)?a.push(t):Object(r.a)(t)&&(a=t),n=function(e,t){for(var n=0;n<a.length;n+=1){var r=a[n];if(e[r]>t[r])return 1;if(e[r]<t[r])return-1}return 0}}return e.sort(n),e}},function(e,t,n){var r=n(22);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(r.a)([].concat.apply([],e))}},function(e,t,n){var r=n(2),i=n(0),o=n(6);t.a=function(e,t){var n=[],a={};return e.forEach((function(e){var s=e[t];Object(o.a)(s)||(Object(i.a)(s)||(s=[s]),Object(r.a)(s,(function(e){a[e]||(n.push(e),a[e]=!0)})))})),n}},function(e,t,n){t.a=function(e){if(Object(r.a)(e))return e[0];return};var r=n(1)},function(e,t,n){t.a=function(e){if(Object(r.a)(e)){return e[e.length-1]}return};var r=n(1)},function(e,t,n){var r=n(0),i=n(8);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(i.a)(e))&&e[0]===t}},function(e,t,n){var r=n(0),i=n(8);t.a=function(e,t){return!(!Object(r.a)(e)&&!Object(i.a)(e))&&e[e.length-1]===t}},function(e,t,n){t.a=function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n))return!1;return!0}},function(e,t,n){t.a=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n))return!0;return!1}},function(e,t,n){var r=n(23);t.a=function(e,t){if(!t)return[e];var n=Object(r.a)(e,t),i=[];for(var o in n)i.push(n[o]);return i}},function(e,t,n){t.a=function(e,t){return e["_wrap_"+t]}},function(e,t,n){t.a=function(e,t){if(e["_wrap_"+t])return e["_wrap_"+t];var n=function(n){e[t](n)};return e["_wrap_"+t]=n,n}},function(e,t,n){var r={};t.a=function(e){var t=r[e];if(!t){for(var n=e.toString(16),i=n.length;i<6;i++)n="0"+n;t="#"+n,r[e]=t}return t}},function(e,t,n){var r=n(0);t.a=function(e){var t=0,n=0,i=0,o=0;return Object(r.a)(e)?1===e.length?t=n=i=o=e[0]:2===e.length?(t=i=e[0],n=o=e[1]):3===e.length?(t=e[0],n=o=e[1],i=e[2]):(t=e[0],n=e[1],i=e[2],o=e[3]):t=n=i=o=e,{r1:t,r2:n,r3:i,r4:o}}},function(e,t,n){t.a=function(e,t,n){return e<t?t:e>n?n:e}},function(e,t,n){t.a=function(e,t){var n=t.toString(),r=n.indexOf(".");if(-1===r)return Math.round(e);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(e.toFixed(i))}},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%1!=0}},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2==0}},function(e,t,n){var r=n(5),i=Number.isInteger?Number.isInteger:function(e){return Object(r.a)(e)&&e%1==0};t.a=i},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&e<0}},function(e,t,n){t.a=function(e,t,n){void 0===n&&(n=1e-5);return Math.abs(e-t)<n}},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&e%2!=0}},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&e>0}},function(e,t,n){var r=n(2),i=n(0),o=n(3);t.a=function(e,t){if(Object(i.a)(e)){var n,a,s=e[0];return n=Object(o.a)(t)?t(e[0]):e[0][t],Object(r.a)(e,(function(e){(a=Object(o.a)(t)?t(e):e[t])>n&&(s=e,n=a)})),s}}},function(e,t,n){var r=n(2),i=n(0),o=n(3);t.a=function(e,t){if(Object(i.a)(e)){var n,a,s=e[0];return n=Object(o.a)(t)?t(e[0]):e[0][t],Object(r.a)(e,(function(e){(a=Object(o.a)(t)?t(e):e[t])<n&&(s=e,n=a)})),s}}},function(e,t,n){t.a=function(e,t){return(e%t+t)%t}},function(e,t,n){var r=180/Math.PI;t.a=function(e){return r*e}},function(e,t,n){t.a=parseInt},function(e,t,n){var r=Math.PI/180;t.a=function(e){return r*e}},function(e,t,n){var r=n(2);t.a=r.a},function(e,t,n){var r=n(25);t.a=r.a},function(e,t,n){var r=n(12),i=n(26);t.a=function(e,t){return Object(r.a)(Object(i.a)(e),t)}},function(e,t,n){var r=n(10);t.a=function(e){return Object(r.a)(e).toLowerCase()}},function(e,t,n){var r=n(10);t.a=function(e){var t=Object(r.a)(e);return t.charAt(0).toLowerCase()+t.substring(1)}},function(e,t,n){t.a=function(e,t){return e&&t?e.replace(/\\?\{([^{}]+)\}/g,(function(e,n){return"\\"===e.charAt(0)?e.slice(1):void 0===t[n]?"":t[n]})):e}},function(e,t,n){var r=n(10);t.a=function(e){return Object(r.a)(e).toUpperCase()}},function(e,t,n){var r=n(10);t.a=function(e){var t=Object(r.a)(e);return t.charAt(0).toUpperCase()+t.substring(1)}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Arguments")}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Boolean")}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Date")}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"Error")}},function(e,t,n){var r=n(5);t.a=function(e){return Object(r.a)(e)&&isFinite(e)}},function(e,t,n){t.a=function(e){return null===e}},function(e,t,n){var r=n(4);t.a=function(e){return Object(r.a)(e,"RegExp")}},function(e,t,n){t.a=function(e){return void 0===e}},function(e,t,n){t.a=function(e){return e instanceof Element||e instanceof HTMLDocument}},function(e,t,n){t.a=function(e){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,16)})(e)}},function(e,t,n){t.a=function(e){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(e)}},function(e,t,n){var r=n(16),i=n(3);t.a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],o=1;o<e.length;o++){var a=e[o];Object(i.a)(a)&&(a=a.prototype),Object(r.a)(n.prototype,a)}}},function(e,t,n){var r=n(0),i=function(e){if("object"!=typeof e||null===e)return e;var t;if(Object(r.a)(e)){t=[];for(var n=0,o=e.length;n<o;n++)"object"==typeof e[n]&&null!=e[n]?t[n]=i(e[n]):t[n]=e[n]}else for(var a in t={},e)"object"==typeof e[a]&&null!=e[a]?t[a]=i(e[a]):t[a]=e[a];return t};t.a=i},function(e,t,n){t.a=function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}},function(e,t,n){var r=n(3);t.a=function(e,t){if(!Object(r.a)(e))throw new TypeError("Expected a function");var n=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=t?t.apply(this,r):r[0],a=n.cache;if(a.has(o))return a.get(o);var s=e.apply(this,r);return a.set(o,s),s};return n.cache=new Map,n}},function(e,t,n){var r=n(0),i=n(9);function o(e,t,n,a){for(var s in n=n||0,a=a||5,t)if(t.hasOwnProperty(s)){var l=t[s];null!==l&&Object(i.a)(l)?(Object(i.a)(e[s])||(e[s]={}),n<a?o(e[s],l,n+1,a):e[s]=t[s]):Object(r.a)(l)?(e[s]=[],e[s]=e[s].concat(l)):void 0!==l&&(e[s]=l)}}t.a=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r+=1)o(e,t[r]);return e}},function(e,t,n){var r=n(16),i=n(3);t.a=function(e,t,n,o){Object(i.a)(t)||(n=t,t=e,e=function(){});var a=Object.create?function(e,t){return Object.create(e,{constructor:{value:t}})}:function(e,t){function n(){}n.prototype=e;var r=new n;return r.constructor=t,r},s=a(t.prototype,e);return e.prototype=Object(r.a)(s,e.prototype),e.superclass=a(t.prototype,t),Object(r.a)(s,n),Object(r.a)(e,o),e}},function(e,t,n){var r=n(1);t.a=function(e,t){if(!Object(r.a)(e))return-1;var n=Array.prototype.indexOf;if(n)return n.call(e,t);for(var i=-1,o=0;o<e.length;o++)if(e[o]===t){i=o;break}return i}},function(e,t,n){var r=n(6),i=n(1),o=n(27),a=n(28),s=Object.prototype.hasOwnProperty;t.a=function(e){if(Object(r.a)(e))return!0;if(Object(i.a)(e))return!e.length;var t=Object(o.a)(e);if("Map"===t||"Set"===t)return!e.size;if(Object(a.a)(e))return!Object.keys(e).length;for(var n in e)if(s.call(e,n))return!1;return!0}},function(e,t,n){var r=n(3),i=n(29);t.a=function(e,t,n){return Object(r.a)(n)?!!n(e,t):Object(i.a)(e,t)}},function(e,t,n){var r=n(2),i=n(1);t.a=function(e,t){if(!Object(i.a)(e))return e;var n=[];return Object(r.a)(e,(function(e,r){n.push(t(e,r))})),n}},function(e,t,n){var r=n(6),i=n(13),o=function(e){return e};t.a=function(e,t){void 0===t&&(t=o);var n={};return Object(i.a)(e)&&!Object(r.a)(e)&&Object.keys(e).forEach((function(r){n[r]=t(e[r],r)})),n}},function(e,t,n){var r=n(8);t.a=function(e,t,n){for(var i=0,o=Object(r.a)(t)?t.split("."):t;e&&i<o.length;)e=e[o[i++]];return void 0===e||i<o.length?n:e}},function(e,t,n){var r=n(13),i=n(8),o=n(5);t.a=function(e,t,n){var a=e,s=Object(i.a)(t)?t.split("."):t;return s.forEach((function(e,t){t<s.length-1?(Object(r.a)(a[e])||(a[e]=Object(o.a)(s[t+1])?[]:{}),a=a[e]):a[e]=n})),e}},function(e,t,n){var r=n(2),i=n(9),o=Object.prototype.hasOwnProperty;t.a=function(e,t){if(null===e||!Object(i.a)(e))return{};var n={};return Object(r.a)(t,(function(t){o.call(e,t)&&(n[t]=e[t])})),n}},function(e,t,n){t.a=function(e,t,n){var r,i,o,a,s=0;n||(n={});var l=function(){s=!1===n.leading?0:Date.now(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var u=t-(c-s);return i=this,o=arguments,u<=0||u>t?(r&&(clearTimeout(r),r=null),s=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(l,u)),a};return c.cancel=function(){clearTimeout(r),s=0,r=i=o=null},c}},function(e,t,n){var r=n(1);t.a=function(e){return Object(r.a)(e)?Array.prototype.slice.call(e):[]}},function(e,t,n){var r={};t.a=function(e){return r[e=e||"g"]?r[e]+=1:r[e]=1,e+r[e]}},function(e,t,n){t.a=function(){}},function(e,t,n){t.a=function(e){return e}},function(e,t,n){t.a=function(e){if(Object(r.a)(e))return 0;if(Object(i.a)(e))return e.length;return Object.keys(e).length};var r=n(6),i=n(1)},function(e,t,n){var r=function(){function e(){this.map={}}return e.prototype.has=function(e){return void 0!==this.map[e]},e.prototype.get=function(e,t){var n=this.map[e];return void 0===n?t:n},e.prototype.set=function(e,t){this.map[e]=t},e.prototype.clear=function(){this.map={}},e.prototype.delete=function(e){delete this.map[e]},e.prototype.size=function(){return Object.keys(this.map).length},e}();t.a=r},function(e,t){function n(e,t,n,r){void 0===r&&(r=[]);var i=this;i.w=e||0,i.h=t||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(e,t,n){n?e.y+=t:e.x+=t,e.children.forEach((function(e){r(e,t,n)}))}function i(e,t){var n=t?e.y:e.x;return e.children.forEach((function(e){n=Math.min(i(e,t),n)})),n}function o(e,t){r(e,-i(e,t),t)}function a(e,t,n){n?t.y=e.x:t.x=e.x,e.c.forEach((function(e,r){a(e,t.children[r],n)}))}function s(e,t,n){void 0===n&&(n=0),t?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach((function(e){s(e,t,n)}))}n.fromNode=function(e,t){if(!e)return null;var r=[];return e.children.forEach((function(e){r.push(n.fromNode(e,t))})),t?new n(e.height,e.width,e.x,r):new n(e.width,e.height,e.y,r)},e.exports=function(e,t){void 0===t&&(t={});var r=t.isHorizontal;function i(e){0===e.cs?(e.el=e,e.er=e,e.msel=e.mser=0):(e.el=e.c[0].el,e.msel=e.c[0].msel,e.er=e.c[e.cs-1].er,e.mser=e.c[e.cs-1].mser)}function l(e,t,n){for(var r=e.c[t-1],i=r.mod,o=e.c[t],a=o.mod;null!==r&&null!==o;){d(r)>n.low&&(n=n.nxt);var s=i+r.prelim+r.w-(a+o.prelim);s>0&&(a+=s,c(e,t,n.index,s));var l=d(r),f=d(o);l<=f&&null!==(r=h(r))&&(i+=r.mod),l>=f&&null!==(o=u(o))&&(a+=o.mod)}!r&&o?function(e,t,n,r){var i=e.c[0].el;i.tl=n;var o=r-n.mod-e.c[0].msel;i.mod+=o,i.prelim-=o,e.c[0].el=e.c[t].el,e.c[0].msel=e.c[t].msel}(e,t,o,a):r&&!o&&function(e,t,n,r){var i=e.c[t].er;i.tr=n;var o=r-n.mod-e.c[t].mser;i.mod+=o,i.prelim-=o,e.c[t].er=e.c[t-1].er,e.c[t].mser=e.c[t-1].mser}(e,t,r,i)}function c(e,t,n,r){e.c[t].mod+=r,e.c[t].msel+=r,e.c[t].mser+=r,function(e,t,n,r){if(n!==t-1){var i=t-n;e.c[n+1].shift+=r/i,e.c[t].shift-=r/i,e.c[t].change-=r-r/i}}(e,t,n,r)}function u(e){return 0===e.cs?e.tl:e.c[0]}function h(e){return 0===e.cs?e.tr:e.c[e.cs-1]}function d(e){return e.y+e.h}function f(e,t,n){for(;null!==n&&e>=n.low;)n=n.nxt;return{low:e,index:t,nxt:n}}s(e,r);var p=n.fromNode(e,r);return function e(t){if(0!==t.cs){e(t.c[0]);for(var n=f(d(t.c[0].el),0,null),r=1;r<t.cs;++r){e(t.c[r]);var o=d(t.c[r].er);l(t,r,n),n=f(o,r,n)}!function(e){e.prelim=(e.c[0].prelim+e.c[0].mod+e.c[e.cs-1].mod+e.c[e.cs-1].prelim+e.c[e.cs-1].w)/2-e.w/2}(t),i(t)}else i(t)}(p),function e(t,n){n+=t.mod,t.x=t.prelim+n,function(e){for(var t=0,n=0,r=0;r<e.cs;r++)n+=(t+=e.c[r].shift)+e.c[r].change,e.c[r].mod+=n}(t);for(var r=0;r<t.cs;r++)e(t.c[r],n)}(p,0),a(p,e,r),o(e,r),e}},function(e,t,n){var r=n(11),i=n(115),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){var e=this;return e.rootNode.width=0,o(e.rootNode,e.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){var r=n(7);function i(e,t){void 0===t&&(t=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=t}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function a(e,t,n){n?(t.x=e.x,t.y=e.y):(t.x=e.y,t.y=e.x),e.children.forEach((function(e,r){a(e,t.children[r],n)}))}e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},o,t);var n,s=0;var l=function e(t){if(!t)return null;t.width=0,t.depth&&t.depth>s&&(s=t.depth);var n=t.children,r=n.length,o=new i(t.height,[]);return n.forEach((function(t,n){var i=e(t);o.children.push(i),0===n&&(o.leftChild=i),n===r-1&&(o.rightChild=i)})),o.originNode=t,o.isLeaf=t.isLeaf(),o}(e);return function e(t){if(t.isLeaf||0===t.children.length)t.drawingDepth=s;else{var n=t.children.map((function(t){return e(t)})),r=Math.min.apply(null,n);t.drawingDepth=r-1}return t.drawingDepth}(l),function e(r){r.x=r.drawingDepth*t.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+t.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=t.subTreeSep)),n=r):(r.children.forEach((function(t){e(t)})),r.y=(r.leftChild.y+r.rightChild.y)/2)}(l),a(l,e,t.isHorizontal),e}},function(e,t,n){var r=n(11),i=n(117),o=n(30),a=n(7),s=["LR","RL","H"],l=s[0],c=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){var e=this.options,t=this.rootNode;e.isHorizontal=!0;var n=e.indent,r=void 0===n?20:n,a=e.dropCap,c=void 0===a||a,u=e.direction||l;if(u&&-1===s.indexOf(u))throw new TypeError("Invalid direction: "+u);if(u===s[0])i(t,r,c);else if(u===s[1])i(t,r,c),t.right2left();else if(u===s[2]){var h=o(t,e),d=h.left,f=h.right;i(d,r,c),d.right2left(),i(f,r,c);var p=d.getBoundingBox();f.translate(p.width,0),t.x=f.x-t.width/2}return t},r}(r),u={};e.exports=function(e,t){return t=a.assign({},u,t),new c(e,t).execute()}},function(e,t){e.exports=function(e,t,n){var r=null;e.eachNode((function(e){!function(e,t,n,r){var i="function"==typeof n?n(e):n*e.depth;if(!r)try{if(e.id===e.parent.children[0].id)return e.x+=i,void(e.y=t?t.y:0)}catch(e11){}e.x+=i,e.y=t?t.y+t.height:0}(e,r,t,n),r=e}))}},function(e,t,n){var r=n(11),i=n(119),o=n(17),a=n(7),s=function(e){var t,n;function r(){return e.apply(this,arguments)||this}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,r.prototype.execute=function(){return o(this.rootNode,this.options,i)},r}(r),l={};e.exports=function(e,t){return t=a.assign({},l,t),new s(e,t).execute()}},function(e,t,n){var r=n(7);function i(e,t){var n=0;return e.children.length?e.children.forEach((function(e){n+=i(e,t)})):n=e.height,e._subTreeSep=t.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}function o(e){var t=e.children,n=t.length;if(n){t.forEach((function(e){o(e)}));var r=t[0],i=t[n-1],a=i.y-r.y+i.height,s=0;if(t.forEach((function(e){s+=e.totalHeight})),a>e.height)e.y=r.y+a/2-e.height/2;else if(1!==t.length||e.height>s){var l=e.y+(e.height-a)/2-r.y;t.forEach((function(e){e.translate(0,l)}))}else e.y=(r.y+r.height/2+i.y+i.height/2)/2-e.height/2}}var a={getSubTreeSep:function(){return 0}};e.exports=function(e,t){void 0===t&&(t={}),t=r.assign({},a,t),e.parent={x:0,width:0,height:0,y:0},e.BFTraverse((function(e){e.x=e.parent.x+e.parent.width})),e.parent=null,i(e,t),e.startY=0,e.y=e.totalHeight/2-e.height/2,e.eachNode((function(e){var t=e.children,n=t.length;if(n){var r=t[0];if(r.startY=e.startY+e._subTreeSep,1===n)r.y=e.y+e.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var o=t[i];o.startY=t[i-1].startY+t[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),o(e)}}])}))}(hierarchy);const Hierarchy=getDefaultExportFromCjs(hierarchy.exports);var traverseTree$1=Util.traverseTree,proccessToFunc=function(e,t){return e?isNumber$1(e)?function(t){return e}:e:function(e){return t||1}},buildTextureData=function(e,t){var n=[],r=[],i={},o=0;for(o=0;o<e.length;o++){var a=e[o];i[a.id]=o,n.push(a.x),n.push(a.y),n.push(0),n.push(0),r.push([])}for(o=0;o<t.length;o++){var s=t[o];r[i[s.source]].push(i[s.target]),r[i[s.target]].push(i[s.source])}var l=0;for(o=0;o<e.length;o++){var c=n.length,u=r[o],h=u.length;n[4*o+2]=c,n[4*o+3]=u.length,l=Math.max(l,u.length);for(var d=0;d<h;++d){var f=u[d];n.push(+f)}}for(;n.length%4!=0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:l}},buildTextureDataWithOneEdgeAttr=function(e,t,n){var r=[],i=[],o={},a=0;for(a=0;a<e.length;a++){var s=e[a];o[s.id]=a,r.push(s.x),r.push(s.y),r.push(0),r.push(0),i.push([])}for(a=0;a<t.length;a++){var l=t[a];i[o[l.source]].push(o[l.target]),i[o[l.source]].push(n(l)),i[o[l.target]].push(o[l.source]),i[o[l.target]].push(n(l))}var c=0;for(a=0;a<e.length;a++){var u=r.length,h=i[a],d=h.length;r[4*a+2]=u,r[4*a+3]=d/2,c=Math.max(c,d/2);for(var f=0;f<d;++f){var p=h[f];r.push(+p)}}for(;r.length%4!=0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},buildTextureDataWithTwoEdgeAttr=function(e,t,n,r){var i=[],o=[],a={},s=0;for(s=0;s<e.length;s++){var l=e[s];a[l.id]=s,i.push(l.x),i.push(l.y),i.push(0),i.push(0),o.push([])}for(s=0;s<t.length;s++){var c=t[s];o[a[c.source]].push(a[c.target]),o[a[c.source]].push(n(c)),o[a[c.source]].push(r(c)),o[a[c.source]].push(0),o[a[c.target]].push(a[c.source]),o[a[c.target]].push(n(c)),o[a[c.target]].push(r(c)),o[a[c.target]].push(0)}var u=0;for(s=0;s<e.length;s++){var h=i.length,d=o[s],f=d.length;i[4*s+2]=h+1048576*f/4,i[4*s+3]=0,u=Math.max(u,f/4);for(var p=0;p<f;++p){var g=d[p];i.push(+g)}}for(;i.length%4!=0;)i.push(0);return{array:new Float32Array(i),maxEdgePerVetex:u}},attributesToTextureData=function(e,t){var n=[],r=e.length,i={};return t.forEach((function(t){e.forEach((function(e,o){if(void 0===i[t[e]]&&(i[t[e]]=Object.keys(i).length),n.push(i[t[e]]),o===r-1)for(;n.length%4!=0;)n.push(0)}))})),{array:new Float32Array(n),count:Object.keys(i).length}},arrayToTextureData=function(e){for(var t=[],n=e.length,r=e[0].length,i=function(r){e.forEach((function(e,i){if(t.push(e[r]),i===n-1)for(;t.length%4!=0;)t.push(0)}))},o=0;o<r;o++)i(o);return new Float32Array(t)},radialLayout$2=function(e,t){var n={x:1/0,y:1/0},r={x:-1/0,y:-1/0},i="x",o="y";t&&["V","TB","BT"].indexOf(t)>=0&&(o="x",i="y");var a=0;traverseTree$1(e,(function(e){return a++,e.x>r.x&&(r.x=e.x),e.x<n.x&&(n.x=e.x),e.y>r.y&&(r.y=e.y),e.y<n.y&&(n.y=e.y),!0}));var s=2*Math.PI/a,l=r[o]-n[o];return 0===l||traverseTree$1(e,(function(t){var r=(t[o]-n[o])/l*(2*Math.PI-s)+s,a=Math.abs("x"===i?t.x-e.x:t.y-e.y);return t.x=a*Math.cos(r),t.y=a*Math.sin(r),!0})),e};const LayoutUtil=Object.freeze(Object.defineProperty({__proto__:null,proccessToFunc:proccessToFunc,buildTextureData:buildTextureData,buildTextureDataWithOneEdgeAttr:buildTextureDataWithOneEdgeAttr,buildTextureDataWithTwoEdgeAttr:buildTextureDataWithTwoEdgeAttr,attributesToTextureData:attributesToTextureData,arrayToTextureData:arrayToTextureData,radialLayout:radialLayout$2},Symbol.toStringTag,{value:"Module"}));var gpuDetector=function e(){return"undefined"==typeof window||"undefined"==typeof document?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e11){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(t){var n=void 0!==(t=t||{}).parent?t.parent:document.body,r=void 0!==t.id?t.id:"oldie",i=e().getWebGLErrorMessage();i.id=r,n.appendChild(i)}}};const GpuUtil=Object.freeze(Object.defineProperty({__proto__:null,gpuDetector:gpuDetector},Symbol.toStringTag,{value:"Module"}));var G6Util=__assign$h(__assign$h(__assign$h(__assign$h({},Util),ColorUtil),LayoutUtil),GpuUtil),radialLayout$1=G6Util.radialLayout,TreeLayout=function(){function e(e){this.type=e.type,this.radial=e.radial,this.config=e}return e.prototype.init=function(e){var t=this;this.data=e,this.radial?this.layoutMethod=function(e){var n=Hierarchy[t.type](e,t.config);return radialLayout$1(n),n}:this.layoutMethod=function(e){return Hierarchy[t.type](e,t.config)}},e.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},e.prototype.layout=function(e){return this.init(e),this.execute()},e}();lib.registerLayout("grid",lib.GridLayout),lib.registerLayout("random",lib.RandomLayout),lib.registerLayout("force",lib.ForceLayout),lib.registerLayout("circular",lib.CircularLayout),lib.registerLayout("dagre",lib.DagreLayout),lib.registerLayout("dagreCompound",lib.DagreCompoundLayout),lib.registerLayout("radial",lib.RadialLayout),lib.registerLayout("concentric",lib.ConcentricLayout),lib.registerLayout("mds",lib.MDSLayout),lib.registerLayout("fruchterman",lib.FruchtermanLayout),lib.registerLayout("fruchterman-gpu",lib.FruchtermanGPULayout),lib.registerLayout("gForce",lib.GForceLayout),lib.registerLayout("force2",lib.Force2Layout),lib.registerLayout("gForce-gpu",lib.GForceGPULayout),lib.registerLayout("comboForce",lib.ComboForceLayout),lib.registerLayout("comboCombined",lib.ComboCombinedLayout),lib.registerLayout("forceAtlas2",lib.ForceAtlas2Layout);var registerLayout=function(e,t){t.isCustomLayout=!0,lib.Layouts[e]=lib.registerLayout(e,t)},WebWorker=function(e,t){var n=e.toString(),r=new Blob(["importScripts('".concat(t,"');(").concat(n,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))},LayoutWorker=function(e){return void 0===e&&(e="https://unpkg.com/@antv/layout@latest/dist/layout.min.js"),new WebWorker((function(){var e="LAYOUT_RUN",t="LAYOUT_END",n="LAYOUT_ERROR",r="GPU_LAYOUT_RUN";layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout),onmessage=function(i){(function(t){var n=t.data.type;return n===e||n===r})(i)&&function(i){var o=this;switch(i.data.type){case e:var a,s=i.data,l=s.nodes,c=s.edges,u=s.layoutCfg,h=(m=void 0===u?{}:u).type;if(!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout ".concat(h," not found")});break}m.onLayoutEnd=function(){o.postMessage({type:t,nodes:l}),null==a||a.destroy()},(a=new d(m)).init({nodes:l,edges:c}),a.execute();break;case r:var d,f=i.data,p=f.nodes,g=(c=f.edges,f.layoutCfg),m=void 0===g?{}:g,v=f.canvas;if(h=m.type,!(d=layout.getLayoutByName(h))){this.postMessage({type:n,message:"layout ".concat(h," not found")});break}if("gpu"!==h.split("-")[1]){this.postMessage({type:n,message:"layout ".concat(h," does not support GPU")});break}var y=new d(m);y.init({nodes:p,edges:c}),y.executeWithWorker(v,this)}}(i)}}),e)},LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var mockRaf=function(e){return setTimeout(e,16)},mockCaf=function(e){return clearTimeout(e)},helper={requestAnimationFrame:function(e){return("undefined"!=typeof window&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||mockRaf)(e)},cancelAnimationFrame:function(e){return("undefined"!=typeof window&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||mockCaf)(e)}},GPU_LAYOUT_NAMES=["fruchterman","gForce"],LAYOUT_PIPES_ADJUST_NAMES=["force","grid","circular"],LayoutController=function(e){function t(t){var n=e.call(this,t)||this;return n.graph=t,n.layoutCfg=t.get("layout")||{},n.layoutType=n.getLayoutType(),n.worker=null,n.workerData={},n.initLayout(),n}return __extends$x(t,e),t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?this.worker=null:this.worker=LayoutWorker(this.layoutCfg.workerScriptURL)),this.worker},t.prototype.stopWorker=function(){var e=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,e.requestId&&(helper.cancelAnimationFrame(e.requestId),e.requestId=null),e.requestId2&&(helper.cancelAnimationFrame(e.requestId2),e.requestId2=null))},t.prototype.execLayoutMethod=function(e,t){var n=this;return new Promise((function(r,i){return __awaiter$2(n,void 0,void 0,(function(){var n,o,a,s,l,c,u,h,d;return __generator$2(this,(function(f){switch(f.label){case 0:if(!(n=this.graph)||n.get("destroyed"))return[2];o=e.type,e.onLayoutEnd=function(){n.emit("aftersublayout",{type:o}),r()},o&&this.isGPU&&this.hasGPUVersion(o)&&(o="".concat(o,"-gpu")),Util.isForce(o)?(a=e.onTick,s=e.animate,l=void 0===s&&("force"===o||"force2"===o),h=function(){a&&a(),(s||l)&&n.refreshPositions()},e.tick=h):"comboForce"!==o&&"comboCombined"!==o||(e.comboTrees=n.get("comboTrees")),!1;try{c=new lib.Layouts[o](e),this.layoutMethods[t]&&this.layoutMethods[t].destroy(),this.layoutMethods[t]=c}catch(e11){i()}return c.enableTick&&(u=e.onTick,h=function(){u&&u(),n.refreshPositions()},c.tick=h),addLayoutOrder(d=this.filterLayoutData(this.data,e),t),c.init(d),n.emit("beforesublayout",{type:o}),[4,c.execute()];case 1:return f.sent(),c.isCustomLayout&&e.onLayoutEnd&&e.onLayoutEnd(),[2]}}))}))}))},t.prototype.updateLayoutMethod=function(e,t){var n=this;return new Promise((function(r,i){return __awaiter$2(n,void 0,void 0,(function(){var n,i,o;return __generator$2(this,(function(a){switch(a.label){case 0:return n=this.graph,i=null==t?void 0:t.type,t.onLayoutEnd=function(){n.emit("aftersublayout",{type:i}),r()},o=this.filterLayoutData(this.data,t),e.init(o),e.updateCfg(t),n.emit("beforesublayout",{type:i}),[4,e.execute()];case 1:return a.sent(),e.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}}))}))}))},t.prototype.layout=function(e){var t,n=this,r=this.graph;if(r&&!r.get("destroyed")){this.data=this.setDataFromGraph();var i=this.data,o=i.nodes,a=i.hiddenNodes;if(!o)return!1;var s=r.get("width"),l=r.get("height"),c={};Object.assign(c,{width:s,height:l,center:[s/2,l/2]},this.layoutCfg),this.layoutCfg=c;var u=c.type,h=!1;null===(t=this.layoutMethods)||void 0===t||t.forEach((function(e){var t;return h=!!(null===(t=e.nodes)||void 0===t?void 0:t.length)||h}));var d=this.destoryLayoutMethods();r.emit("beforelayout"),h&&u&&1===(null==d?void 0:d.length)&&d[0]===u?this.tweakInit():this.initPositions(c.center,o),this.initPositions(c.center,a),u&&"gpu"===u.split("-")[1]&&(u=u.split("-")[0],c.gpuEnabled=!0);var f=!1;c.gpuEnabled&&(f=!0,gpuDetector().webgl||(f=!1)),f&&!this.hasGPUVersion(u)&&(f=!1),this.isGPU=f;var p=c.onLayoutEnd,g=c.layoutEndFormatted,m=c.adjust;if(g||(c.layoutEndFormatted=!0,c.onAllLayoutEnd=function(){return __awaiter$2(n,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return p&&p(o),this.refreshLayout(),m&&c.pipes?[4,this.adjustPipesBox(this.data,m)]:[3,2];case 1:e.sent(),this.refreshLayout(),e.label=2;case 2:return r.emit("afterlayout"),[2]}}))}))}),this.stopWorker(),c.workerEnabled&&this.layoutWithWorker(this.data,e))return!0;var v=Promise.resolve(),y=!1;return c.type?(y=!0,v=v.then((function(){return __awaiter$2(n,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return[4,this.execLayoutMethod(c,0)];case 1:return[2,e.sent()]}}))}))}))):c.pipes&&(y=!0,c.pipes.forEach((function(e,t){v=v.then((function(){return __awaiter$2(n,void 0,void 0,(function(){return __generator$2(this,(function(n){switch(n.label){case 0:return[4,this.execLayoutMethod(e,t)];case 1:return[2,n.sent()]}}))}))}))}))),y?v.then((function(){c.onAllLayoutEnd&&c.onAllLayoutEnd(),e&&e()})).catch((function(e){})):(r.refreshPositions(),null==e||e()),!1}},t.prototype.tweakInit=function(){var e=this.data,t=this.graph,n=e.nodes,r=e.edges;if(null==n?void 0:n.length){var i={};n.forEach((function(e){var t=e.x,n=e.y;isNaN(t)||isNaN(n)||(i[e.id]={x:t,y:n},e.mass=e.mass||2)})),r.forEach((function(e){var t=e.source,n=e.target,r=i[t],o=i[n];!r&&o?i[t]={x:o.x+80*(Math.random()-.5),y:o.y+80*(Math.random()-.5)}:!o&&r&&(i[n]={x:r.x+80*(Math.random()-.5),y:r.y+80*(Math.random()-.5)})}));var o=t.get("width"),a=t.get("height");n.forEach((function(e){var t=i[e.id]||{x:o/2+20*(Math.random()-.5),y:a/2+20*(Math.random()-.5)};e.x=t.x,e.y=t.y}))}},t.prototype.initWithPreset=function(){var e=this.layoutCfg,t=this.data,n=e.preset;return!(!(null==n?void 0:n.type)||!lib.Layouts[null==n?void 0:n.type])&&(new lib.Layouts[null==n?void 0:n.type](n).layout(t),delete e.preset,!0)},t.prototype.layoutWithWorker=function(e,t){var n=this,r=this.layoutCfg,i=this.graph,o=this.getWorker(),a=this.workerData;if(!o)return!1;a.requestId=null,a.requestId2=null,a.currentTick=null,a.currentTickData=null,i.emit("beforelayout");var s=Promise.resolve(),l=!1;if(r.type)l=!0,s=s.then((function(){return n.runWebworker(o,e,r)}));else if(r.pipes){l=!0;for(var c=function(t){s=s.then((function(){return n.runWebworker(o,e,t)}))},u=0,h=r.pipes;u<h.length;u++){c(h[u])}}return l&&s.then((function(){r.onAllLayoutEnd&&r.onAllLayoutEnd(),null==t||t()})).catch((function(e){})),!0},t.prototype.runWebworker=function(e,t,n){var r=this,i=this.isGPU,o=this.filterLayoutData(t,n),a=o.nodes,s=o.edges,l=document.createElement("canvas"),c=i&&"undefined"!=typeof window&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in l,u=filterObject(n,(function(e){return"function"!=typeof e}));if(c){var h=l.transferControlToOffscreen();u.type="".concat(u.type,"-gpu"),e.postMessage({type:LAYOUT_MESSAGE.GPURUN,nodes:a,edges:s,layoutCfg:u,canvas:h},[h])}else e.postMessage({type:LAYOUT_MESSAGE.RUN,nodes:a,edges:s,layoutCfg:u});return new Promise((function(t,i){e.onmessage=function(e){r.handleWorkerMessage(t,i,e,o,n)}}))},t.prototype.handleWorkerMessage=function(e,t,n,r,i){var o=this.graph,a=this.workerData,s=n.data,l=s.type,c=function(){i.onTick&&i.onTick()};switch(l){case LAYOUT_MESSAGE.TICK:a.currentTick=s.currentTick,a.currentTickData=s,a.requestId||(a.requestId=helper.requestAnimationFrame((function(){updateLayoutPosition(r,s),o.refreshPositions(),c(),s.currentTick===s.totalTicks?e():a.currentTick===s.totalTicks&&(a.requestId2=helper.requestAnimationFrame((function(){updateLayoutPosition(r,a.currentTickData),o.refreshPositions(),a.requestId2=null,c(),e()}))),a.requestId=null})));break;case LAYOUT_MESSAGE.END:null==a.currentTick&&(updateLayoutPosition(r,s),e());break;case LAYOUT_MESSAGE.GPUEND:null==a.currentTick&&(updateGPUWorkerLayoutPosition(r,s),e());break;case LAYOUT_MESSAGE.ERROR:default:t()}},t.prototype.updateLayoutCfg=function(e){var t=this,n=this.graph,r=this.layoutMethods;if(n&&!n.get("destroyed")){var i=e.disableTriggerLayout,o=__rest$2(e,["disableTriggerLayout"]),a=mix({},this.layoutCfg,o);if(this.layoutCfg=a,!i)if(null==r?void 0:r.length){if(this.data=this.setDataFromGraph(),this.stopWorker(),!o.workerEnabled||!this.layoutWithWorker(this.data,null)){n.emit("beforelayout");var s=Promise.resolve(),l=!1;1===(null==r?void 0:r.length)?(l=!0,s=s.then((function(){return __awaiter$2(t,void 0,void 0,(function(){return __generator$2(this,(function(e){switch(e.label){case 0:return[4,this.updateLayoutMethod(r[0],a)];case 1:return[2,e.sent()]}}))}))}))):(null==r?void 0:r.length)&&(l=!0,r.forEach((function(e,n){var r=a.pipes[n];s=s.then((function(){return __awaiter$2(t,void 0,void 0,(function(){return __generator$2(this,(function(t){switch(t.label){case 0:return[4,this.updateLayoutMethod(e,r)];case 1:return[2,t.sent()]}}))}))}))}))),l&&s.then((function(){a.onAllLayoutEnd&&a.onAllLayoutEnd()})).catch((function(e){}))}}else this.layout()}},t.prototype.adjustPipesBox=function(e,t){var n=this;return new Promise((function(r){var i=e.nodes;(null==i?void 0:i.length)||r(),LAYOUT_PIPES_ADJUST_NAMES.includes(t)||r();var o={center:n.layoutCfg.center,nodeSize:function(e){return Math.max(e.height,e.width)},preventOverlap:!0,onLayoutEnd:function(){}},a=n.getLayoutBBox(i),s=a.groupNodes,l=a.layoutNodes,c=clone$9(l);o.onLayoutEnd=function(){null==l||l.forEach((function(e,t){var n,r,i,o=e.x-(null===(n=c[t])||void 0===n?void 0:n.x),a=e.y-(null===(r=c[t])||void 0===r?void 0:r.y);null===(i=s[t])||void 0===i||i.forEach((function(e){e.x+=o,e.y+=a}))})),r()},new lib.Layouts[t](o).layout({nodes:l})}))},t.prototype.hasGPUVersion=function(e){return GPU_LAYOUT_NAMES.includes(e)},t.prototype.destroy=function(){this.destoryLayoutMethods();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},t}(LayoutController$1);function updateLayoutPosition(e,t){for(var n=e.nodes,r=t.nodes,i=n.length,o=0;o<i;o++){var a=n[o];a.x=r[o].x,a.y=r[o].y}}function filterObject(e,t){var n={};return e&&"object"===_typeof(e)?(Object.keys(e).forEach((function(r){e.hasOwnProperty(r)&&t(e[r])&&(n[r]=e[r])})),n):e}function updateGPUWorkerLayoutPosition(e,t){for(var n=e.nodes,r=t.vertexEdgeData,i=n.length,o=0;o<i;o++){var a=n[o],s=r[4*o],l=r[4*o+1];a.x=s,a.y=l}}function addLayoutOrder(e,t){var n;(null===(n=null==e?void 0:e.nodes)||void 0===n?void 0:n.length)&&e.nodes.forEach((function(e){e.layoutOrder=t}))}var transform$5=transform$d,SVG$1="svg",Graph=function(e){function t(t){var n=e.call(this,t)||this,r=n.get("defaultNode");return r||n.set("defaultNode",{type:"circle"}),r.type||(r.type="circle",n.set("defaultNode",r)),n.destroyed=!1,n}return __extends$x(t,e),t.prototype.initLayoutController=function(){var e=new LayoutController(this);this.set({layoutController:e})},t.prototype.initEventController=function(){var e=new EventController(this);this.set({eventController:e})},t.prototype.initCanvas=function(){var e=this.get("container");if("string"==typeof e&&(e=document.getElementById(e),this.set("container",e)),!e)throw new Error("invalid container");var t,n=e.clientWidth,r=e.clientHeight,i=this.get("width")||n,o=this.get("height")||r;if(this.get("width")||this.get("height")||(this.set("width",n),this.set("height",r)),this.get("renderer")===SVG$1)t=new Canvas({container:e,width:i,height:o});else{var a={container:e,width:i,height:o},s=this.get("pixelRatio");s&&(a.pixelRatio=s,window.devicePixelRatio=s),t=new Canvas$1(a)}this.set("canvas",t)},t.prototype.initPlugins=function(){var e=this;each(e.get("plugins"),(function(t){!t.destroyed&&t.initPlugin&&t.initPlugin(e)}))},t.prototype.downloadImageWatermark=function(e,t,n,r){return __awaiter$2(this,void 0,void 0,(function(){var i,o,a;return __generator$2(this,(function(s){switch(s.label){case 0:return i=e.style.backgroundImage,o=i.slice(5,i.length-2),(a=new Image).src=o,[4,new Promise((function(e){a.onload=function(){var i=t.createPattern(a,"repeat");t.rect(0,0,n,r),t.fillStyle=i,t.fill(),e("")}}))];case 1:return s.sent(),[2]}}))}))},t.prototype.asyncToDataUrl=function(e,t,n,r,i,o){var a=this,s=document.querySelector(".g6-graph-watermarker"),l=this.get("canvas"),c=l.getRenderer(),u=o||l.get("el"),h="";e||(e="image/png"),setTimeout((function(){return __awaiter$2(a,void 0,void 0,(function(){var o,a,l,d,f,p,g,m,v,y;return __generator$2(this,(function(b){switch(b.label){case 0:return"svg"!==c?[3,1]:(o=u.cloneNode(!0),a=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),(l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",a)).replaceChild(o,l.documentElement),d=(new XMLSerializer).serializeToString(l),h="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(d)),[3,4]);case 1:return f=void 0,p=u.getContext("2d"),g=r||this.get("width"),m=i||this.get("height"),v=void 0,s?[4,this.downloadImageWatermark(s,p,g,m)]:[3,3];case 2:b.sent(),b.label=3;case 3:if(t){y="undefined"!=typeof window?window.devicePixelRatio:1;try{f=p.getImageData(0,0,g*y,m*y),v=p.globalCompositeOperation,p.globalCompositeOperation="destination-over",p.fillStyle=t,p.fillRect(0,0,g,m)}catch(x){}}h=u.toDataURL(e),t&&(p.clearRect(0,0,g,m),p.putImageData(f,0,0),p.globalCompositeOperation=v),b.label=4;case 4:return n&&n(h),[2]}}))}))}),16)},t.prototype.toDataURL=function(e,t){var n=this.get("canvas"),r=n.getRenderer(),i=n.get("el");e||(e="image/png");var o="";if("svg"===r){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),l=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);l.replaceChild(a,l.documentElement);var c=(new XMLSerializer).serializeToString(l);o="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(c))}else{var u=void 0,h=i.getContext("2d"),d=Math.max(this.get("width"),500),f=Math.max(this.get("height"),500),p=void 0;if(t){var g="undefined"!=typeof window&&window.devicePixelRatio||1;try{u=h.getImageData(0,0,d*g,f*g),p=h.globalCompositeOperation,h.globalCompositeOperation="destination-over",h.fillStyle=t,h.fillRect(0,0,d,f)}catch(m){}}o=i.toDataURL(e),t&&(h.clearRect(0,0,d,f),h.putImageData(u,0,0),h.globalCompositeOperation=p)}return o},t.prototype.toFullDataURL=function(e,t,n){var r=this.get("group").getCanvasBBox(),i=r.height,o=r.width,a=this.get("renderer"),s=createDom('<div id="virtual-image"></div>'),l=n?n.backgroundColor:void 0,c=n?n.padding:void 0;c?isNumber$1(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var u=i+c[0]+c[2],h=o+c[1]+c[3],d={container:s,height:u,width:h,quickHit:!0},f="svg"===a?new Canvas(d):new Canvas$1(d),p=this.get("group").clone(),g=clone$9(p.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var m=(r.maxX+r.minX)/2,v=(r.maxY+r.minY)/2;g=transform$5(g,[["t",-m,-v],["t",o/2+c[3],i/2+c[0]]]),p.resetMatrix(),p.setMatrix(g),f.add(p);var y=f.get("el"),b="";t||(t="image/png"),setTimeout((function(){if("svg"===a){var n=y.cloneNode(!0),r=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",r);i.replaceChild(n,i.documentElement);var o=(new XMLSerializer).serializeToString(i);b="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(o))}else{var s=void 0,c=y.getContext("2d"),d=void 0;if(l){var f="undefined"!=typeof window?window.devicePixelRatio:1;try{s=c.getImageData(0,0,h*f,u*f),d=c.globalCompositeOperation,c.globalCompositeOperation="destination-over",c.fillStyle=l,c.fillRect(0,0,h,u)}catch(p){}}b=y.toDataURL(t),l&&(c.clearRect(0,0,h,u),c.putImageData(s,0,0),c.globalCompositeOperation=d)}e&&e(b)}),16)},t.prototype.downloadFullImage=function(e,t,n){var r=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),l=createDom('<div id="virtual-image"></div>'),c=document.querySelector(".g6-graph-watermarker"),u=n?n.backgroundColor:void 0,h=n?n.padding:void 0;h?isNumber$1(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var d=o+h[0]+h[2],f=a+h[1]+h[3];if(c){var p=this.get("graphWaterMarker").cfg||{},g=p.width,m=p.height;d=Math.ceil(d/m)*m,f=Math.ceil(f/g)*g}var v={container:l,height:d,width:f},y="svg"===s?new Canvas(v):new Canvas$1(v),b=this.get("group").clone(),x=clone$9(b.getMatrix());x||(x=[1,0,0,0,1,0,0,0,1]);var w=(i.maxX+i.minX)/2,_=(i.maxY+i.minY)/2;x=transform$5(x,[["t",-w,-_],["t",a/2+h[3],o/2+h[0]]]),b.resetMatrix(),b.setMatrix(x),y.add(b);var C=y.get("el");t||(t="image/png"),this.asyncToDataUrl(t,u,(function(n){var i=document.createElement("a"),o=(e||"graph")+("svg"===s?".svg":".".concat(t.split("/")[1]));r.dataURLToImage(n,s,i,o);var a=document.createEvent("MouseEvents");a.initEvent("click",!1,!1),i.dispatchEvent(a)}),f,d,C)},t.prototype.downloadImage=function(e,t,n){var r=this,i=this;i.stopAnimate();var o=i.get("canvas").getRenderer();t||(t="image/png");var a=(e||"graph")+("svg"===o?".svg":t.split("/")[1]),s=document.createElement("a");i.asyncToDataUrl(t,n,(function(e){r.dataURLToImage(e,o,s,a);var t=document.createEvent("MouseEvents");t.initEvent("click",!1,!1),s.dispatchEvent(t)}))},t.prototype.dataURLToImage=function(e,t,n,r){if(e&&"data:"!==e&&"undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==t){var i=e.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),l=s.length,c=new Uint8Array(l);l--;)c[l]=s.charCodeAt(l);var u=new Blob([c],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(u,r):n.addEventListener("click",(function(){n.download=r,n.href=window.URL.createObjectURL(u)}))}else n.addEventListener("click",(function(){n.download=r,n.href=e}))},t.prototype.addPlugin=function(e){e.destroyed||(this.get("plugins").push(e),e.initPlugin(this))},t.prototype.removePlugin=function(e){var t=this.get("plugins"),n=t.indexOf(e);n>=0&&(e.destroyPlugin(),t.splice(n,1))},t.prototype.setImageWaterMarker=function(e,t){void 0===e&&(e=Global.waterMarkerImage);var n=this.get("container");isString$1(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=deepMix({},Global.imageWaterMarkerConfig,t),o=i.width,a=i.height,s=i.compatible,l=i.image;if(!e){var c=s?n:document.querySelector(".g6-graph-watermarker");return c&&(c.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var u={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(u.pixelRatio=h,window.devicePixelRatio=h),r=new Canvas$1(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=l.rotate,p=l.x,g=l.y;d.rotate(-f*Math.PI/180);var m=new Image;m.crossOrigin="anonymous",m.src=e,m.onload=function(){if(d.drawImage(m,p,g,l.width,l.height),d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var e=document.querySelector(".g6-graph-watermarker");e||((e=document.createElement("div")).className="g6-graph-watermarker"),e.className="g6-graph-watermarker",r.destroyed||(e.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(e))}}},t.prototype.setTextWaterMarker=function(e,t){var n=this.get("container");isString$1(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var r=this.get("graphWaterMarker"),i=deepMix({},Global.textWaterMarkerConfig,t),o=i.width,a=i.height,s=i.compatible,l=i.text;if(!(null==e?void 0:e.length)){var c=s?n:document.querySelector(".g6-graph-watermarker");return c&&(c.style.cssText=void 0),void(r&&r.clear())}if(r)r.clear();else{var u={container:n,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(u.pixelRatio=h,window.devicePixelRatio=h),r=new Canvas$1(u),this.set("graphWaterMarker",r)}r.get("el").style.display="none";var d=r.get("context"),f=l.rotate,p=l.fill,g=l.fontFamily,m=l.fontSize,v=l.baseline,y=l.x,b=l.y,x=l.lineHeight;d.rotate(-f*Math.PI/180),d.font="".concat(m,"px ").concat(g),d.fillStyle=p,d.textBaseline=v;for(var w=isString$1(e)?[e]:e,_=w.length-1;_>=0;_--)d.fillText(w[_],y,b+_*x);if(d.rotate(f*Math.PI/180),s)n.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var C=document.querySelector(".g6-graph-watermarker");C||((C=document.createElement("div")).className="g6-graph-watermarker"),C.style.cssText="background-image: url(".concat(r.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(C)}},t.prototype.destroy=function(){var t,n,r,i;each(this.get("plugins"),(function(e){e.destroyPlugin()}));var o=this.get("tooltips");if(o)for(var a=0;a<o.length;a++){var s=o[a];if(s){var l=s.parentElement;l&&l.removeChild(s)}}null===(t=this.get("eventController"))||void 0===t||t.destroy(),null===(n=this.get("layoutController"))||void 0===n||n.destroy(),null===(r=this.get("graphWaterMarker"))||void 0===r||r.destroy(),null===(i=document.querySelector(".g6-graph-watermarker"))||void 0===i||i.remove(),e.prototype.destroy.call(this)},t}(AbstractGraph),radialLayout=G6Util.radialLayout,traverseTree=G6Util.traverseTree,TreeGraph=function(e){function t(t){var n=e.call(this,t)||this;return n.layoutAnimating=!1,n.set("removeList",[]),n.set("layoutMethod",n.getLayout()),n}return __extends$x(t,e),t.prototype.getLayout=function(){var e=this.get("layout");return e?"function"==typeof e?e:(e.type||(e.type="dendrogram"),e.direction||(e.direction="TB"),e.radial?function(t){var n=Hierarchy[e.type](t,e);return radialLayout(n),n}:function(t){return Hierarchy[e.type](t,e)}):null},t.indexOfChild=function(e,t){var n=-1;return each(e,(function(e,r){if(t===e.id)return n=r,!1})),n},t.prototype.getDefaultCfg=function(){var t=e.prototype.getDefaultCfg.call(this);return t.animate=!0,t},t.prototype.innerAddChild=function(e,t,n){var r=this,i=e.data;i&&(i.x=e.x,i.y=e.y,i.depth=e.depth);var o=r.addItem("node",i,!1);if(t){if(o.set("parent",t),n){var a=t.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=t.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var l=t.get("children");l?l.push(o):t.set("children",[o]),r.addItem("edge",{source:t.get("id"),target:o.get("id"),id:"".concat(t.get("id"),":").concat(o.get("id"))},!1)}return each(e.children||[],(function(e){r.innerAddChild(e,o,n)})),r.emit("afteraddchild",{item:o,parent:t}),o},t.prototype.innerUpdateChild=function(e,n,r){var i=this,o=i.findById(e.id);if(o){each(e.children||[],(function(e){i.innerUpdateChild(e,o,r)}));var a,s,l=o.get("children");if(l)if(l.length>0)for(var c=l.length-1;c>=0;c--){var u=l[c].getModel();-1===t.indexOfChild(e.children||[],u.id)&&(i.innerRemoveChild(u.id,{x:e.x,y:e.y},r),l.splice(c,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var h=o.getModel();r&&o.set("originAttrs",{x:h.x,y:h.y}),o.set("model",Object.assign(h,e.data)),a===e.x&&s===e.y||o.updatePosition({x:e.x,y:e.y})}else i.innerAddChild(e,n,r)},t.prototype.innerRemoveChild=function(e,t,n){var r=this,i=r.findById(e);if(i)if(each(i.get("children"),(function(e){r.innerRemoveChild(e.getModel().id,t,n)})),n){var o=i.getModel();i.set("to",t),i.set("originAttrs",{x:o.x,y:o.y}),r.get("removeList").push(i)}else r.removeItem(i,!1)},t.prototype.changeData=function(e,t){void 0===t&&(t=!0);var n=this;this.getNodes().map((function(e){return n.clearItemStates(e)})),this.getEdges().map((function(e){return n.clearItemStates(e)})),t&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:e||n.get("data")}),e?(n.data(e),n.render(!1)):n.layout(this.get("fitView"))},t.prototype.changeLayout=function(e){this.updateLayout(e)},t.prototype.updateLayout=function(e,t){void 0===t&&(t=!0);var n=this;e&&(t&&this.get("enabledStack")&&this.pushStack("layout",{before:n.get("layout"),after:e}),n.set("layout",e),n.set("layoutMethod",n.getLayout()),n.layout())},t.prototype.refreshLayout=function(e){this.layout(e)},t.prototype.layout=function(e){var t=this,n=t.get("data"),r=t.get("layoutMethod"),i=r?r(n,t.get("layout")):n,o=t.get("animate");(t.emit("beforerefreshlayout",{data:n,layoutData:i}),t.emit("beforelayout"),t.innerUpdateChild(i,void 0,o),e)&&t.get("viewController").fitView();o?t.layoutAnimate(i):(t.refresh(),t.paint()),t.emit("afterrefreshlayout",{data:n,layoutData:i}),t.emit("afterlayout")},t.prototype.addChild=function(e,t,n){void 0===n&&(n=!0);var r=this;r.emit("beforeaddchild",{model:e,parent:t}),isString$1(t)||(t=t.get("id"));var i=r.findDataById(t);i&&(i.children||(i.children=[]),i.children.push(e),r.findById(t).refresh(),r.changeData(void 0,n))},t.prototype.updateChildren=function(e,t,n){void 0===n&&(n=!0);var r=this,i=r.findById(t);t&&i&&(r.findDataById(t).children=e,i.refresh(),r.changeData(void 0,n))},t.prototype.updateChild=function(e,n,r){void 0===r&&(r=!0);var i=this;if(n&&i.findById(n)){var o=i.findDataById(n),a=i.findById(e.id);if(o.children||(o.children=[]),a){var s=t.indexOfChild(o.children,e.id);s>-1&&(o.children[s]=e)}else o.children.push(e);var l=i.findById(n);null==l||l.refresh(),i.changeData(void 0,r)}else i.changeData(e,r)},t.prototype.removeChild=function(e,n){void 0===n&&(n=!0);var r,i=this,o=i.findById(e);if((r=o?null==o?void 0:o.get("parent"):i.getNodes().find((function(t){return!!(t.getModel().children||[]).find((function(t){return t.id===e}))})))&&!r.destroyed){var a=r.get("id"),s=i.findDataById(a),l=s&&s.children||[],c=t.indexOfChild(l,e);l.splice(c,1),r.refresh()}i.changeData(void 0,n)},t.prototype.findDataById=function(e,t){var n=this;if(t||(t=n.get("data")),e===t.id)return t;var r=null;return each(t.children||[],(function(t){return t.id===e?(r=t,!1):!(r=n.findDataById(e,t))&&void 0})),r},t.prototype.layoutAnimate=function(e,t){var n=this,r=this.get("animateCfg");n.emit("beforeanimate",{data:e}),n.getEdges().forEach((function(e){var t=e.get("model");t.sourceAnchor||(t.sourceAnchor=e.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(r){traverseTree(e,(function(i){var o=n.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),t){var l=t(o,r,a,e);o.set("model",Object.assign(s,l))}else s.x=a.x+(i.x-a.x)*r,s.y=a.y+(i.y-a.y)*r}return!0})),each(n.get("removeList"),(function(e){var t=e.getModel(),n=e.get("originAttrs"),i=e.get("to");t.x=n.x+(i.x-n.x)*r,t.y=n.y+(i.y-n.y)*r})),n.refreshPositions()}),{duration:r.duration,easing:r.ease,callback:function(){each(n.getNodes(),(function(e){e.set("originAttrs",null)})),each(n.get("removeList"),(function(e){n.removeItem(e,!1)})),n.set("removeList",[]),r.callback&&r.callback(),n.emit("afteranimate",{data:e})},delay:r.delay})},t.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},t.prototype.isLayoutAnimating=function(){return this.layoutAnimating},t.prototype.render=function(e){void 0===e&&(e=!0);var t=this,n=t.get("data");if(!n||!isObject(n)||!Object.keys(n).length)throw new Error("data must be defined first");t.clear(),e&&this.get("enabledStack")&&this.clearStack(),t.emit("beforerender"),t.layout(this.get("fitView")),t.emit("afterrender")},t.prototype.save=function(){return this.get("data")},t.prototype.data=function(t){e.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},t}(Graph),PluginBase=function(){function e(e){this._cfgs=deepMix(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return e.prototype.getDefaultCfgs=function(){return{}},e.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var n=t.getEvents(),r={};each(n,(function(n,i){var o=wrapBehavior(t,n);r[i]=o,e.on(i,o)})),this._events=r,this.init()},e.prototype.getEvents=function(){return{}},e.prototype.get=function(e){var t;return null===(t=this._cfgs)||void 0===t?void 0:t[e]},e.prototype.set=function(e,t){this._cfgs[e]=t},e.prototype.destroy=function(){},e.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph");each(this._events,(function(t,n){e.off(n,t)})),this._events=null,this._cfgs=null,this.destroyed=!0},e}();const PluginBase$1=PluginBase;var __extends$c=globalThis&&globalThis.__extends||(_extendStatics=function(e,t){return(_extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),_extendStatics,GRID_PNG="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Grid=function(e){function t(t){return e.call(this,t)||this}return __extends$c(t,e),t.prototype.getDefaultCfgs=function(){return{img:GRID_PNG,follow:!0}},t.prototype.init=function(){var e=this.get("graph"),t=e.get("container"),n=e.get("canvas").get("el"),r=this.get("img")||GRID_PNG;r.includes("url(")||(r='url("'.concat(r,'")'));var i=createDom("<div class='g6-grid-container' style=\"position:absolute;overflow:hidden;z-index: -1;\"></div>"),o=createDom("<div\n        class='g6-grid'\n        style='position:absolute;\n        background-image: ".concat(r,";\n        user-select: none\n        '></div>"));this.set("container",i),this.set("gridContainer",o),this.positionInit(),i.appendChild(o),t.insertBefore(i,n)},t.prototype.positionInit=function(){var e=this.get("graph"),t=e.get("minZoom"),n=e.get("width"),r=e.get("height");modifyCSS(this.get("container"),{width:"".concat(n,"px"),height:"".concat(r,"px")});var i=80*n/t,o=80*r/t;modifyCSS(this.get("gridContainer"),{width:"".concat(i,"px"),height:"".concat(o,"px"),left:"-".concat(i/2,"px"),top:"-".concat(o/2,"px")})},t.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},t.prototype.updateGrid=function(e){var t=this.get("gridContainer"),n=e.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var r=this.get("follow");modifyCSS(t,{transform:"matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(r?n[6]:"0",", ").concat(r?n[7]:"0",")")})},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e=this.get("graph").get("container"),t=this.get("container");e.removeChild(t)},t}(PluginBase$1);const Grid$1=Grid;var __extends$b=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&insertCss$1.exports("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var Menu=function(e){function t(t){return e.call(this,t)||this}return __extends$b(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(e){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>1</li>\n            <li>2</li>\n          </ul>\n        "},shouldBegin:function(e){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},t.prototype.init=function(){var e=this.get("className"),t=createDom("<div class=".concat(e||"g6-component-contextmenu","></div>"));modifyCSS(t,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),isString$1(n)&&(n=document.getElementById(n)),n.appendChild(t),this.set("menu",t)},t.prototype.onMenuShow=function(e){var t=this;e.preventDefault();var n=this.get("itemTypes");if(e.item){if(e.item&&e.item.getType&&-1===n.indexOf(e.item.getType()))return void t.onMenuHide()}else if(-1===n.indexOf("canvas"))return void t.onMenuHide();if(this.get("shouldBegin")(e)){var r=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(e,o);isString$1(a)?r.innerHTML=a:r.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var l=function(t){s(t.target,e.item,o)};this.set("handleMenuClickWrapper",l),r.addEventListener("click",l)}var c=o.get("width"),u=o.get("height"),h=r.getBoundingClientRect(),d=this.get("offsetX")||0,f=this.get("offsetY")||0,p=o.getContainer().offsetTop,g=o.getContainer().offsetLeft,m=e.canvasX+g+d,v=e.canvasY+p+f;m+h.width>c&&(m=e.canvasX-h.width-d+g),v+h.height>u&&(v=e.canvasY-h.height-f+p),modifyCSS(r,{top:"".concat(v,"px"),left:"".concat(m,"px"),visibility:"visible"});var y="click"===this.get("trigger"),b=function(e){y?y=!1:t.onMenuHide()};document.body.addEventListener("click",b),this.set("handler",b)}},t.prototype.removeMenuEventListener=function(){var e=this.get("handleMenuClickWrapper"),t=this.get("handler");e&&(this.get("menu").removeEventListener("click",e),this.set("handleMenuClickWrapper",null));t&&document.body.removeEventListener("click",t)},t.prototype.onMenuHide=function(){var e=this.get("menu");e&&modifyCSS(e,{visibility:"hidden"}),this.removeMenuEventListener()},t.prototype.destroy=function(){var e=this.get("menu");if(this.removeMenuEventListener(),e){var t=this.get("container");t||(t=this.get("graph").get("container")),isString$1(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(PluginBase$1);const Menu$1=Menu;var __extends$a=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$b=globalThis&&globalThis.__assign||function(){return __assign$b=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$b.apply(this,arguments)},max$1=Math.max,transform$4=transform$d,DEFAULT_MODE="default",KEYSHAPE_MODE="keyShape",DELEGATE_MODE="delegate",SVG="svg",MiniMap=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdateCanvas=debounce((function(e){var t=n;t.destroyed||t.updateCanvas()}),100,!1),n}return __extends$a(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,n=t.size,r=t.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,a=navigator.userAgent.toLowerCase().indexOf("safari")>-1,s=createDom("\n      <div\n        class=".concat(t.viewportClassName,"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          outline: 2px solid #1980ff;\n          cursor:move'\n        draggable=").concat(!a&&!o,"\n      </div>")),l=0,c=0,u=!1,h=0,d=0,f=0,p=0,g=0,m=0,v=a||o?"mousedown":"dragstart";s.addEventListener(v,(function(i){var o,a;if(i.dataTransfer){var v=new Image;v.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",null===(a=(o=i.dataTransfer).setDragImage)||void 0===a||a.call(o,v,0,0);try{i.dataTransfer.setData("text/html","view-port-minimap")}catch(b){i.dataTransfer.setData("text","view-port-minimap")}}if(t.refresh=!1,i.target===s){var y=s.style;h=parseInt(y.left,10),d=parseInt(y.top,10),f=parseInt(y.width,10),p=parseInt(y.height,10),f>n[0]||p>n[1]||(m=r.getZoom(),g=e.get("ratio"),u=!0,l=i.clientX,c=i.clientY)}}),!1);var y=function(e){if(u&&!isNil(e.clientX)&&!isNil(e.clientY)){var t=l-e.clientX,i=c-e.clientY;(h-t<0||h-t+f>=n[0])&&(t=0),(d-i<0||d-i+p>=n[1])&&(i=0),d-=i,modifyCSS(s,{left:"".concat(h-=t,"px"),top:"".concat(d,"px")}),r.translate(t*m/g,i*m/g),l=e.clientX,c=e.clientY}};a||o||s.addEventListener("drag",y,!1);var b=function(){u=!1,t.refresh=!0},x=a||o?"mouseup":"dragend";s.addEventListener(x,b,!1),i.addEventListener("mouseleave",b),i.addEventListener("mouseup",b),(a||o)&&i.addEventListener("mousemove",y,!1),this.set("viewport",s),i.appendChild(s)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=this.get("totaldx"),n=this.get("totaldy"),r=this.get("graph"),i=this.get("size"),o=r.get("canvas").get("el"),a=r.get("width")||o.scrollWidth||500,s=r.get("height")||o.scrollHeight||500,l=r.getPointByCanvas(0,0),c=r.getPointByCanvas(a,s),u=this.get("viewport");u||this.initViewport();var h=(c.x-l.x)*e,d=(c.y-l.y)*e,f=l.x*e+t,p=l.y*e+n,g=f+h,m=p+d;f<0&&(h+=f,f=0),g>i[0]&&(h-=g-i[0]),p<0&&(d+=p,p=0),m>i[1]&&(d-=m-i[1]),this.set("ratio",e),modifyCSS(u,{left:"".concat(f,"px"),top:"".concat(p,"px"),width:"".concat(h,"px"),height:"".concat(d,"px")})}},t.prototype.updateGraphShapes=function(){var e,t=this._cfgs.graph,n=this.get("canvas"),r=t.get("group");r.destroyed||(n.clear(),this.get("hideEdge")?(e=n.addGroup(),r.get("children").forEach((function(t){t.get("id").includes("-edge")||e.add(t.clone())}))):((e=r.clone()).resetMatrix(),n.add(e)),t.get("renderer")===SVG&&this.updateVisible(e))},t.prototype.updateVisible=function(e){var t=this;if(e.isGroup()||e.get("visible")){var n=e.get("children");if(!n||!n.length)return;n.forEach((function(e){e.get("visible")||e.hide(),t.updateVisible(e)}))}else e.hide()},t.prototype.updateKeyShapes=function(){var e=this,t=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||each(t.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,r)})),each(t.getNodes(),(function(t){e.updateOneNodeKeyShape(t,r)}));var i=t.getCombos();if(i&&i.length){var o=r.find((function(e){return"comboGroup"===e.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){e.destroyed||(each(i,(function(t){e.updateOneComboKeyShape(t,o)})),null==o||o.sort(),null==o||o.toBack(),e.updateCanvas())}),250)}this.clearDestroyedShapes()},t.prototype.updateOneComboKeyShape=function(e,t){if(!this.destroyed){var n=this.get("itemMap")||{},r=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?s=Object.assign(a,s):(r=o,t.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),e.isVisible()?r.show():r.hide(),r.exist=!0;var c=e.getModel().depth;isNaN(c)||r.set("zIndex",c),n[e.get("id")]=r,this.set("itemMap",n)}},t.prototype.updateOneNodeKeyShape=function(e,t){var n=this.get("itemMap")||{},r=n[e.get("id")],i=e.getBBox(),o=e.get("keyShape").clone(),a=o.attr(),s={x:i.centerX,y:i.centerY};r?(s=Object.assign(a,s),r.toFront()):(r=o,t.add(r));var l=r.get("type");"rect"!==l&&"image"!==l||(s.x=i.minX,s.y=i.minY),r.attr(s),e.isVisible()?r.show():r.hide(),r.exist=!0;var c=e.getModel().depth;isNaN(c)||r.set("zIndex",c),n[e.get("id")]=r,this.set("itemMap",n)},t.prototype.updateDelegateShapes=function(){var e=this,t=this._cfgs.graph,n=this.get("canvas"),r=n.get("children")[0]||n.addGroup();this.get("hideEdge")||each(t.getEdges(),(function(t){e.updateOneEdgeKeyShape(t,r)})),each(t.getNodes(),(function(t){e.updateOneNodeDelegateShape(t,r)}));var i=t.getCombos();if(i&&i.length){var o=r.find((function(e){return"comboGroup"===e.get("name")}))||r.addGroup({name:"comboGroup"});setTimeout((function(){e.destroyed||(each(i,(function(t){e.updateOneComboKeyShape(t,o)})),null==o||o.sort(),null==o||o.toBack(),e.updateCanvas())}),250)}this.clearDestroyedShapes()},t.prototype.clearDestroyedShapes=function(){var e=this.get("itemMap")||{},t=Object.keys(e);if(t&&0!==t.length)for(var n=t.length-1;n>=0;n--){var r=e[t[n]],i=r.exist;r.exist=!1,i||(r.remove(),delete e[t[n]])}},t.prototype.updateOneEdgeKeyShape=function(e,t){var n=this.get("itemMap")||{},r=n[e.get("id")];if(r){var i=e.get("keyShape").attr("path");r.attr("path",i)}else r=e.get("keyShape").clone(),t.add(r);e.isVisible()?r.show():r.hide(),r.exist=!0,n[e.get("id")]=r,this.set("itemMap",n)},t.prototype.updateOneNodeDelegateShape=function(e,t){var n=this.get("delegateStyle"),r=this.get("itemMap")||{},i=r[e.get("id")],o=e.getBBox();if(i){var a={x:o.minX,y:o.minY,width:o.width,height:o.height};i.attr(a),i.toFront()}else i=t.addShape("rect",{attrs:__assign$b({x:o.minX,y:o.minY,width:o.width,height:o.height},n),name:"minimap-node-shape"});e.isVisible()?i.show():i.hide(),i.exist=!0,r[e.get("id")]=i,this.set("itemMap",r)},t.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},t.prototype.initContainer=function(){var e=this,t=e.get("graph"),n=e.get("size"),r=e.get("className"),i=e.get("container"),o=createDom("<div class='".concat(r,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));isString$1(i)&&(i=document.getElementById(i)),i?i.appendChild(o):t.get("container").appendChild(o),e.set("container",o);var a,s=createDom('<div class="g6-minimap-container" style="position: relative;"></div>');o.appendChild(s),s.addEventListener("dragenter",(function(e){e.preventDefault()})),s.addEventListener("dragover",(function(e){e.preventDefault()})),a=t.get("renderer")===SVG?new Canvas({container:s,width:n[0],height:n[1]}):new Canvas$1({container:s,width:n[0],height:n[1]}),e.set("canvas",a),e.updateCanvas()},t.prototype.updateCanvas=function(){if(!this.destroyed&&this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("size"),n=this.get("canvas"),r=this.get("type"),i=this.get("padding");if(!n.destroyed){switch(r){case DEFAULT_MODE:this.updateGraphShapes();break;case KEYSHAPE_MODE:this.updateKeyShapes();break;case DELEGATE_MODE:this.updateDelegateShapes()}var o=n.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=e.get("canvas").getCanvasBBox(),l=e.getZoom()||1,c=s.width/l,u=s.height/l;Number.isFinite(a.width)&&(c=max$1(a.width,c),u=max$1(a.height,u)),c+=2*i,u+=2*i;var h=Math.min(t[0]/c,t[1]/u),d=[1,0,0,0,1,0,0,0,1],f=0,p=0;Number.isFinite(a.minX)&&(f=-a.minX),Number.isFinite(a.minY)&&(p=-a.minY);var g=(t[0]-(c-2*i)*h)/2,m=(t[1]-(u-2*i)*h)/2;d=transform$4(d,[["t",f,p],["s",h,h],["t",g,m]]),o.setMatrix(d),this.set("ratio",h),this.set("totaldx",g+f*h),this.set("totaldy",m+p*h),this.set("dx",g),this.set("dy",m),this.updateViewport()}}}}},t.prototype.getCanvas=function(){return this.get("canvas")},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.destroy=function(){var e;null===(e=this.get("canvas"))||void 0===e||e.destroy();var t=this.get("container");(null==t?void 0:t.parentNode)&&t.parentNode.removeChild(t)},t}(PluginBase$1);const Minimap=MiniMap;var __extends$9=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function getEucliDis(e,t,n){var r=e.x-t.x,i=e.y-t.y;return!n||Math.abs(r)>n||Math.abs(i)>n?Math.sqrt(r*r+i*i):n}function getDotProduct(e,t){return e.x*t.x+e.y*t.y}function projectPointToEdge(e,t){var n=(t.source.y-t.target.y)/(t.source.x-t.target.x),r=(n*n*t.source.x+n*(e.y-t.source.y)+e.x)/(n*n+1);return{x:r,y:n*(r-t.source.x)+t.source.y}}var Bundling=function(e){function t(t){return e.call(this,t)||this}return __extends$9(t,e),t.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},t.prototype.init=function(){var e=this.get("graph"),t=this.get("onTick");this.set("tick",(function(){t&&t(),e.refreshPositions()}))},t.prototype.bundling=function(e){var t=this;if(t.set("data",e),!t.isTicking()){var n=e.edges||[],r=e.nodes||[],i={},o=!1;if(r.forEach((function(e){null!==e.x&&null!==!e.y&&void 0!==e.x&&void 0!==!e.y||(o=!0),i[e.id]=e})),o)throw new Error("please layout the graph or assign x and y for nodes first");t.set("nodeIdMap",i);var a=t.get("divisions"),s=t.get("divRate"),l=t.divideEdges(a);t.set("edgePoints",l);var c=t.getEdgeBundles();t.set("edgeBundles",c);for(var u=t.get("cycles"),h=t.get("iterations"),d=t.get("iterRate"),f=t.get("lambda"),p=0;p<u;p++){for(var g=function(e){var r=[];n.forEach((function(e,n){if(e.source!==e.target){var o=i[e.source],s=i[e.target];r[n]=t.getEdgeForces({source:o,target:s},n,a,f);for(var c=0;c<a+1;c++)l[n][c].x+=r[n][c].x,l[n][c].y+=r[n][c].y}}))},m=0;m<h;m++)g();f/=2,a*=s,h*=d,l=t.divideEdges(a),t.set("edgePoints",l)}n.forEach((function(e,t){e.source!==e.target&&(e.type="polyline",e.controlPoints=l[t].slice(1,l[t].length-1))})),t.get("graph").refresh()}},t.prototype.updateBundling=function(e){var t=this,n=e.data;if(n&&t.set("data",n),t.get("ticking")&&t.set("ticking",!1),Object.keys(e).forEach((function(n){t.set(n,e[n])})),e.onTick){var r=this.get("graph");t.set("tick",(function(){e.onTick(),r.refresh()}))}t.bundling(n)},t.prototype.divideEdges=function(e){var t=this,n=t.get("data").edges,r=t.get("nodeIdMap"),i=t.get("edgePoints");return i&&void 0!==i||(i=[]),n.forEach((function(n,o){var a;i[o]&&void 0!==i[o]||(i[o]=[]);var s=r[n.source],l=r[n.target];if(1===e)i[o].push({x:s.x,y:s.y}),i[o].push({x:.5*(s.x+l.x),y:.5*(s.y+l.y)}),i[o].push({x:l.x,y:l.y});else{var c=((null===(a=i[o])||void 0===a?void 0:a.length)?t.getEdgeLength(i[o]):getEucliDis({x:s.x,y:s.y},{x:l.x,y:l.y}))/(e+1),u=c,h=[{x:s.x,y:s.y}];i[o].forEach((function(e,t){if(0!==t){for(var n=getEucliDis(e,i[o][t-1]);n>u;){var r=u/n,a={x:i[o][t-1].x,y:i[o][t-1].y};a.x+=r*(e.x-i[o][t-1].x),a.y+=r*(e.y-i[o][t-1].y),h.push(a),n-=u,u=c}u-=n}})),h.push({x:l.x,y:l.y}),i[o]=h}})),i},t.prototype.getEdgeLength=function(e){var t=0;return e.forEach((function(n,r){0!==r&&(t+=getEucliDis(n,e[r-1]))})),t},t.prototype.getEdgeBundles=function(){var e=this,t=e.get("data").edges||[],n=e.get("bundleThreshold"),r=e.get("nodeIdMap"),i=e.get("edgeBundles");return i||(i=[]),t.forEach((function(e,t){i[t]&&void 0!==i[t]||(i[t]=[])})),t.forEach((function(o,a){var s=r[o.source],l=r[o.target];t.forEach((function(t,o){if(!(o<=a)){var c=r[t.source],u=r[t.target];e.getBundleScore({source:s,target:l},{source:c,target:u})>=n&&(i[a].push(o),i[o].push(a))}}))})),i},t.prototype.getBundleScore=function(e,t){var n=this;return e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.length=getEucliDis({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),t.length=getEucliDis({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),n.getAngleScore(e,t)*n.getScaleScore(e,t)*n.getPositionScore(e,t)*n.getVisibilityScore(e,t)},t.prototype.getAngleScore=function(e,t){return getDotProduct({x:e.vx,y:e.vy},{x:t.vx,y:t.vy})/(e.length*t.length)},t.prototype.getScaleScore=function(e,t){var n=(e.length+t.length)/2;return 2/(n/Math.min(e.length,t.length)+Math.max(e.length,t.length)/n)},t.prototype.getPositionScore=function(e,t){var n=(e.length+t.length)/2;return n/(n+getEucliDis({x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2},{x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2}))},t.prototype.getVisibilityScore=function(e,t){var n=this.getEdgeVisibility(e,t),r=this.getEdgeVisibility(t,e);return n<r?n:r},t.prototype.getEdgeVisibility=function(e,t){var n=projectPointToEdge(t.source,e),r=projectPointToEdge(t.target,e),i={x:(n.x+r.x)/2,y:(n.y+r.y)/2},o={x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2};return Math.max(0,1-2*getEucliDis(i,o)/getEucliDis(n,r))},t.prototype.getEdgeForces=function(e,t,n,r){for(var i=this,o=i.get("edgePoints"),a=i.get("K")/(getEucliDis(e.source,e.target)*(n+1)),s=[{x:0,y:0}],l=1;l<n;l++){var c={x:0,y:0},u=i.getSpringForce({pre:o[t][l-1],cur:o[t][l],next:o[t][l+1]},a),h=i.getElectrostaticForce(l,t);c.x=r*(u.x+h.x),c.y=r*(u.y+h.y),s.push(c)}return s.push({x:0,y:0}),s},t.prototype.getSpringForce=function(e,t){var n=e.pre.x+e.next.x-2*e.cur.x,r=e.pre.y+e.next.y-2*e.cur.y;return{x:n*=t,y:r*=t}},t.prototype.getElectrostaticForce=function(e,t){var n=this,r=n.get("eps"),i=n.get("edgeBundles"),o=n.get("edgePoints"),a=i[t],s={x:0,y:0};return a.forEach((function(n){var i={x:o[n][e].x-o[t][e].x,y:o[n][e].y-o[t][e].y};if(Math.abs(i.x)>r||Math.abs(i.y)>r){var a=1/getEucliDis(o[n][e],o[t][e]);s.x+=i.x*a,s.y+=i.y*a}})),s},t.prototype.isTicking=function(){return this.get("ticking")},t.prototype.getSimulation=function(){return this.get("forceSimulation")},t.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),e.prototype.destroy.call(this)},t}(PluginBase$1);const Bundling$1=Bundling;var __extends$8=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$a=globalThis&&globalThis.__assign||function(){return __assign$a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$a.apply(this,arguments)},DELTA$3=.05,lensDelegateStyle$1={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Fisheye$1=function(e){function t(t){return e.call(this,t)||this}return __extends$8(t,e),t.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:clone$9(lensDelegateStyle$1),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"magnify"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"magnify"}}return e},t.prototype.init=function(){var e=this,t=e.get("r");e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{}),e.set("r2",t*t);var n=e.get("d");e.set("molecularParam",(n+1)*t)},t.prototype.createDelegate=function(e){var t=this,n=this,r=n.get("delegate");r&&!r.destroyed||(n.magnify(e),(r=n.get("delegate")).on("dragstart",(function(e){n.set("delegateCenterDiff",{x:r.attr("x")-e.x,y:r.attr("y")-e.y})})),r.on("drag",(function(e){n.magnify(e)})),"wheel"===this.get("scaleDBy")&&r.on("mousewheel",(function(e){t.scaleDByWheel(e)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(e){n.scaleRByWheel(e)})))},t.prototype.scaleRByWheel=function(e){var t=this;if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var n,r=t.get("graph"),i=t.get("delegate"),o=(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY);n=e.originalEvent.wheelDelta<0?1-DELTA$3:1/(1-DELTA$3);var a=t.get("maxR"),s=t.get("minR"),l=t.get("r");(l>(a||r.get("height"))&&n>1||l<(s||.05*r.get("height"))&&n<1)&&(n=1),l*=n,t.set("r",l),t.set("r2",l*l);var c=t.get("d");t.set("molecularParam",(c+1)*l),t.set("delegateCenterDiff",void 0),t.magnify(e,o)}},t.prototype.scaleRByDrag=function(e){var t=this;if(e){var n,r=t.get("dragPrePos"),i=t.get("graph"),o=i.getPointByClient(e.clientX,e.clientY);n=e.x-r.x<0?1-DELTA$3:1/(1-DELTA$3);var a=t.get("maxR"),s=t.get("minR"),l=t.get("r");(l>(a||i.get("height"))&&n>1||l<(s||.05*i.get("height"))&&n<1)&&(n=1),l*=n,t.set("r",l),t.set("r2",l*l);var c=t.get("d");t.set("molecularParam",(c+1)*l),t.magnify(e,o),t.set("dragPrePos",{x:e.x,y:e.y})}},t.prototype.scaleDByWheel=function(e){var t=this;if(e||e.originalEvent){e.preventDefault&&e.preventDefault();var n=0;n=e.originalEvent.wheelDelta<0?-.1:.1;var r=t.get("d")+n,i=t.get("maxD"),o=t.get("minD");if(r<i&&r>o){t.set("d",r);var a=t.get("r");t.set("molecularParam",(r+1)*a);var s=t.get("delegate"),l=s?{x:s.attr("x"),y:s.attr("y")}:void 0;t.set("delegateCenterDiff",void 0),t.magnify(e,l)}}},t.prototype.scaleDByDrag=function(e){var t=this,n=t.get("dragPrePos"),r=e.x-n.x>0?.1:-.1,i=t.get("d")+r,o=t.get("maxD"),a=t.get("minD");if(i<o&&i>a){t.set("d",i);var s=t.get("r");t.set("molecularParam",(i+1)*s),t.magnify(e)}t.set("dragPrePos",{x:e.x,y:e.y})},t.prototype.magnify=function(e,t){var n=this;n.restoreCache();var r=n.get("graph"),i=n.get("cachedMagnifiedModels"),o=n.get("cachedOriginPositions"),a=n.get("showLabel"),s=n.get("r"),l=n.get("r2"),c=n.get("d"),u=n.get("molecularParam"),h=r.getNodes(),d=h.length,f=t?{x:t.x,y:t.y}:{x:e.x,y:e.y};!n.get("dragging")||"mousemove"!==n.get("trigger")&&"click"!==n.get("trigger")||(f=n.get("cacheCenter"));var p=n.get("delegateCenterDiff");p&&(f.x+=p.x,f.y+=p.y),n.updateDelegate(f,s);for(var g=0;g<d;g++){var m=h[g].getModel(),v=m.x,y=m.y;if(!isNaN(v)&&!isNaN(y)){var b=(v-f.x)*(v-f.x)+(y-f.y)*(y-f.y);if(!isNaN(b)&&b<l&&0!==b){var x=Math.sqrt(b),w=u*x/(c*x+s),_=(v-f.x)/x,C=(y-f.y)/x;if(m.x=_*w+f.x,m.y=C*w+f.y,o[m.id]||(o[m.id]={x:v,y:y,texts:[]}),i.push(m),a&&2*x<s)for(var $=h[g].getContainer().getChildren(),S=$.length,E=0;E<S;E++){var A=$[E];"text"===A.get("type")&&(o[m.id].texts.push({visible:A.get("visible"),shape:A}),A.set("visible",!0))}}}}r.refreshPositions()},t.prototype.restoreCache=function(){for(var e=this,t=e.get("cachedMagnifiedModels"),n=e.get("cachedOriginPositions"),r=t.length,i=0;i<r;i++){var o=t[i],a=n[o.id];o.x=a.x,o.y=a.y;for(var s=a.texts.length,l=0;l<s;l++){var c=a.texts[l];c.shape.set("visible",c.visible)}}e.set("cachedMagnifiedModels",[]),e.set("cachedOriginPositions",{})},t.prototype.updateParams=function(e){var t=this,n=e.r,r=e.d,i=e.trigger,o=e.minD,a=e.maxD,s=e.minR,l=e.maxR,c=e.scaleDBy,u=e.scaleRBy;isNaN(e.r)||(t.set("r",n),t.set("r2",n*n)),isNaN(r)||t.set("d",r),isNaN(a)||t.set("maxD",a),isNaN(o)||t.set("minD",o),isNaN(l)||t.set("maxR",l),isNaN(s)||t.set("minR",s);var h,d=t.get("d"),f=t.get("r");(t.set("molecularParam",(d+1)*f),"mousemove"!==i&&"click"!==i&&"drag"!==i||t.set("trigger",i),"drag"===c||"wheel"===c||"unset"===c)&&(t.set("scaleDBy",c),t.get("delegate").remove(),t.get("delegate").destroy(),(h=t.get("dPercentText"))&&(h.remove(),h.destroy()));"drag"!==u&&"wheel"!==u&&"unset"!==u||(t.set("scaleRBy",u),t.get("delegate").remove(),t.get("delegate").destroy(),(h=t.get("dPercentText"))&&(h.remove(),h.destroy()))},t.prototype.updateDelegate=function(e,t){var n=this,r=this,i=r.get("graph"),o=r.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=r.get("delegateStyle")||lensDelegateStyle$1;o=a.addShape("circle",{attrs:__assign$a({r:t/1.5,x:e.x,y:e.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(e){r.scaleRByWheel(e)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(e){r.set("dragging",!0),r.set("cacheCenter",{x:e.x,y:e.y}),r.set("dragPrePos",{x:e.x,y:e.y})})),o.on("drag",(function(e){r.scaleRByDrag(e)})),o.on("dragend",(function(e){r.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(e){n.scaleDByWheel(e)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(e){r.set("dragging",!0),r.set("cacheCenter",{x:e.x,y:e.y}),r.set("dragPrePos",{x:e.x,y:e.y})})),o.on("drag",(function(e){n.scaleDByDrag(e)})),o.on("dragend",(function(e){r.set("dragging",!1)}))))}else o.attr({x:e.x,y:e.y,r:t/1.5});if(r.get("showDPercent")){var l=Math.round((r.get("d")-r.get("minD"))/(r.get("maxD")-r.get("minD"))*100),c=r.get("dPercentText"),u=e.y+t/1.5+16;if(!c||c.destroyed)c=i.get("group").addShape("text",{attrs:{text:"".concat(l,"%"),x:e.x,y:u,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),r.set("dPercentText",c);else c.attr({text:"".concat(l,"%"),x:e.x,y:u})}r.set("delegate",o)},t.prototype.clear=function(){var e=this.get("graph");this.restoreCache(),e.refreshPositions();var t=this.get("delegate");t&&!t.destroyed&&(t.remove(),t.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(PluginBase$1);const Fisheye$2=Fisheye$1;var __extends$7=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),DELTA$2=.05;"undefined"!=typeof document&&insertCss$1.exports("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var getEventPath=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;){if(t.push(n),"HTML"===n.tagName)return t.push(document,window),t;n=n.parentElement}return t},ToolBar=function(e){function t(t){return e.call(this,t)||this}return __extends$7(t,e),t.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(e){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '},zoomSensitivity:2}},t.prototype.init=function(){var e=this,t=this.get("graph"),n=this.get("getContent")(t),r=n;isString$1(n)&&(r=createDom(n));var i=this.get("className");r.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),isString$1(o)&&(o=document.getElementById(o)),o.appendChild(r),this.set("toolBar",r);var a=this.get("handleClick");r.addEventListener("click",(function(n){var r=getEventPath(n).filter((function(e){return"LI"===e.nodeName}));if(0!==r.length){var i=r[0].getAttribute("code");i&&(a?a(i,t):e.handleDefaultOperator(i))}}));var s=this.get("position");s&&modifyCSS(r,{top:"".concat(s.y,"px"),left:"".concat(s.x,"px")}),this.bindUndoRedo()},t.prototype.bindUndoRedo=function(){var e=this.get("graph"),t=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),r=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');t&&n&&r&&i&&(t.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4"),e.on("stackchange",(function(e){var o=e.undoStack,a=e.redoStack,s=o.length,l=a.length;0===s?(t.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(t.removeAttribute("style"),n.removeAttribute("style")),0===l?(r.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),i.removeAttribute("style"))})))},t.prototype.undo=function(){var e=this.get("graph"),t=e.getUndoStack();if(t&&0!==t.length){var n=t.pop();if(n){var r=n.action;e.pushStack(r,clone$9(n.data),"redo");var i=n.data.before;if("add"===r&&(i=n.data.after),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);delete t.id,e.updateItem(n,t,!1),"combo"===n.getType()&&e.updateCombo(n)}))}));break;case"changedata":e.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=t.itemType;delete t.itemType,e.addItem(n,t,!1)}))}));break;case"add":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.removeItem(t.id,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateComboTree(t.id,t.parentId,!1)}))}));break;case"createCombo":var o=n.data.after.combos,a=o[o.length-1];Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateComboTree(t.id,t.parentId,!1)}))})),e.removeItem(a.id,!1);break;case"uncombo":var s=i.combos[i.combos.length-1],l=i.nodes.concat(i.combos).map((function(e){return e.id})).filter((function(e){return e!==s.id}));e.createCombo(s,l,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1)}}}},t.prototype.redo=function(){var e=this.get("graph"),t=e.getRedoStack();if(t&&0!==t.length){var n=t.pop();if(n){var r=n.action,i=n.data.after;if(e.pushStack(r,clone$9(n.data)),"delete"===r&&(i=n.data.before),!i)return;switch(r){case"visible":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);t.visible?e.showItem(n,!1):e.hideItem(n,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=e.findById(t.id);delete t.id,e.updateItem(n,t,!1),"combo"===n.getType()&&e.updateCombo(n)}))}));break;case"changedata":e.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(t){e.removeItem(t.id,!1)})),i.nodes&&i.nodes.forEach((function(t){e.removeItem(t.id,!1)})),i.combos&&i.combos.forEach((function(t){e.removeItem(t.id,!1)}));break;case"add":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){var n=t.itemType;delete t.itemType,e.addItem(n,t,!1)}))}));break;case"updateComboTree":Object.keys(i).forEach((function(t){var n=i[t];n&&n.forEach((function(t){e.updateComboTree(t.id,t.parentId,!1)}))}));break;case"createCombo":var o=i.combos[i.combos.length-1];e.createCombo(o,o.children.map((function(e){return e.id})),!1);break;case"uncombo":var a=n.data.before.combos,s=a[a.length-1];e.uncombo(s.id,!1);break;case"layout":e.updateLayout(i,void 0,void 0,!1)}}}},t.prototype.zoomOut=function(){var e=this.get("graph"),t=e.getZoom(),n=1/(1-DELTA$2*this.get("zoomSensitivity"));n*t>(this.get("maxZoom")||e.get("maxZoom"))||e.zoomTo(t*n)},t.prototype.zoomIn=function(){var e=this.get("graph"),t=e.getZoom(),n=1-DELTA$2*this.get("zoomSensitivity");n*t<(this.get("minZoom")||e.get("minZoom"))||e.zoomTo(t*n)},t.prototype.realZoom=function(){this.get("graph").zoomTo(1)},t.prototype.autoZoom=function(){this.get("graph").fitView([20,20])},t.prototype.handleDefaultOperator=function(e){switch(e){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom()}},t.prototype.destroy=function(){var e=this.get("toolBar");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),isString$1(t)&&(t=document.getElementById(t)),t.removeChild(e)}var n=this.get("handleClick");n&&e.removeEventListener("click",n)},t}(PluginBase$1);const ToolBar$1=ToolBar;var __extends$6=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();"undefined"!=typeof document&&insertCss$1.exports("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var Tooltip$1=function(e){function t(t){return e.call(this,t)||this}return __extends$6(t,e),t.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(e){return"\n          <h4 class='tooltip-type'>".concat(e.item.getType(),"</h4>\n          <span class='tooltip-id'>ID").concat(e.item.getID(),"</span>\n        ")},shouldBegin:function(e){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},t.prototype.getEvents=function(){return"click"===this.get("trigger")?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},t.prototype.init=function(){var e=this,t=e.get("className")||"g6-component-tooltip",n=createDom("<div class='".concat(t,"'></div>")),r=e.get("container");r||(r=e.get("graph").get("container")),isString$1(r)&&(r=document.getElementById(r)),modifyCSS(n,{position:"absolute",visibility:"hidden",display:"none"}),r.appendChild(n),"click"!==e.get("trigger")&&(n.addEventListener("mouseenter",(function(e){modifyCSS(n,{visibility:"visible",display:"unset"})})),n.addEventListener("mouseleave",(function(t){e.hideTooltip()}))),e.set("tooltip",n)},t.prototype.onClick=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=e.item,r=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),r.emit("tooltipchange",{item:e.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(e),r.emit("tooltipchange",{item:e.item,action:"show"}))}},t.prototype.onMouseEnter=function(e){var t=this.get("itemTypes");if(!e.item||!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=e.item,r=this.get("graph");this.currentTarget=n,this.showTooltip(e),r.emit("tooltipchange",{item:e.item,action:"show"})}},t.prototype.onMouseMove=function(e){var t=this.get("itemTypes");e.item&&e.item.getType&&-1===t.indexOf(e.item.getType())||this.currentTarget&&e.item===this.currentTarget&&this.showTooltip(e)},t.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},t.prototype.clearContainer=function(){var e=this.get("tooltip");e&&(e.innerHTML="")},t.prototype.showTooltip=function(e){if(e.item){var t=this.get("itemTypes");if(!e.item.getType||-1!==t.indexOf(e.item.getType())){var n=this.get("tooltip"),r=this.get("getContent")(e);isString$1(r)?n.innerHTML=r:(this.clearContainer(),n.appendChild(r)),this.updatePosition(e)}}},t.prototype.hideTooltip=function(){var e=this.get("tooltip");e&&modifyCSS(e,{visibility:"hidden",display:"none"})},t.prototype.updatePosition=function(e){var t=this.get("shouldBegin"),n=this.get("tooltip");if(t(e)){var r=this.get("graph"),i=r.get("width"),o=r.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,l=r.getPointByClient(e.clientX,e.clientY),c=this.get("fixToNode"),u=e.item;if(u.getType&&"node"===u.getType()&&c&&isArray$1(c)&&c.length>=2){var h=u.getBBox();l={x:h.minX+h.width*c[0],y:h.minY+h.height*c[1]}}var d=r.getCanvasByPoint(l.x,l.y),f=d.x,p=d.y,g=r.getContainer(),m={x:f+g.offsetLeft+a,y:p+g.offsetTop+s};modifyCSS(n,{visibility:"visible",display:"unset"});var v=n.getBoundingClientRect();f+v.width+a>i&&(m.x-=v.width+a),p+v.height+s>o&&(m.y-=v.height+s),modifyCSS(n,{left:"".concat(m.x,"px"),top:"".concat(m.y,"px")})}else modifyCSS(n,{visibility:"hidden",display:"none"})},t.prototype.hide=function(){this.onMouseLeave()},t.prototype.destroy=function(){var e=this.get("tooltip");if(e){var t=this.get("container");t||(t=this.get("graph").get("container")),isString$1(t)&&(t=document.getElementById(t)),t.removeChild(e)}},t}(PluginBase$1);const Tooltip$2=Tooltip$1;var methodCache={};function getTickMethod(e){return methodCache[e]}function registerTickMethod(e,t){methodCache[e]=t}var Scale=function(){function e(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return e.prototype.translate=function(e){return e},e.prototype.change=function(e){mix(this.__cfg__,e),this.init()},e.prototype.clone=function(){return this.constructor(this.__cfg__)},e.prototype.getTicks=function(){var e=this;return map$3(this.ticks,(function(t,n){return isObject(t)?t:{text:e.getText(t,n),tickValue:t,value:e.scale(t)}}))},e.prototype.getText=function(e,t){var n=this.formatter,r=n?n(e,t):e;return isNil(r)||!isFunction$1(r.toString)?"":r.toString()},e.prototype.getConfig=function(e){return this.__cfg__[e]},e.prototype.init=function(){mix(this,this.__cfg__),this.setDomain(),isEmpty(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},e.prototype.initCfg=function(){},e.prototype.setDomain=function(){},e.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if(isString$1(e)){var n=getTickMethod(e);if(!n)throw new Error("There is no method to to calculate ticks!");t=n(this)}else isFunction$1(e)&&(t=e(this));return t},e.prototype.rangeMin=function(){return this.range[0]},e.prototype.rangeMax=function(){return this.range[1]},e.prototype.calcPercent=function(e,t,n){return isNumber$1(e)?(e-t)/(n-t):NaN},e.prototype.calcValue=function(e,t,n){return t+e*(n-t)},e}(),Category=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return __extends$x(t,e),t.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var e=0;e<this.values.length;e++)this.translateIndexMap.set(this.values[e],e)}},t.prototype.translate=function(e){this.buildIndexMap();var t=this.translateIndexMap.get(e);return void 0===t&&(t=isNumber$1(e)?e:NaN),t},t.prototype.scale=function(e){var t=this.translate(e),n=this.calcPercent(t,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},t.prototype.invert=function(e){var t=this.max-this.min,n=this.calcPercent(e,this.rangeMin(),this.rangeMax()),r=Math.round(t*n)+this.min;return r<this.min||r>this.max?NaN:this.values[r]},t.prototype.getText=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=t;return isNumber$1(t)&&!this.values.includes(t)&&(i=this.values[i]),e.prototype.getText.apply(this,__spreadArrays([i],n))},t.prototype.initCfg=function(){this.tickMethod="cat"},t.prototype.setDomain=function(){if(isNil(this.getConfig("min"))&&(this.min=0),isNil(this.getConfig("max"))){var e=this.values.length;this.max=e>1?e-1:e}this.translateIndexMap&&(this.translateIndexMap=void 0)},t}(Scale),token=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,twoDigitsOptional="\\d\\d?",twoDigits="\\d\\d",threeDigits="\\d{3}",fourDigits="\\d{4}",word="[^\\s]+",literal=/\[([^]*?)\]/gm;function shorten(e,t){for(var n=[],r=0,i=e.length;r<i;r++)n.push(e[r].substr(0,t));return n}var monthUpdate=function(e){return function(t,n){var r=n[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return r>-1?r:null}};function assign(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];for(var a in o)e[a]=o[a]}return e}var dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort=shorten(monthNames,3),dayNamesShort=shorten(dayNames,3),defaultI18n={dayNamesShort:dayNamesShort,dayNames:dayNames,monthNamesShort:monthNamesShort,monthNames:monthNames,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},globalI18n=assign({},defaultI18n),setGlobalDateI18n=function(e){return globalI18n=assign(globalI18n,e)},regexEscape=function(e){return e.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},pad=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},formatFlags={D:function(e){return String(e.getDate())},DD:function(e){return pad(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return pad(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return pad(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return pad(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return pad(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return pad(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return pad(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return pad(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return pad(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return pad(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return pad(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+pad(Math.floor(Math.abs(t)/60),2)+":"+pad(Math.abs(t)%60,2)}},monthParse=function(e){return+e-1},emptyDigits=[null,twoDigitsOptional],emptyWord=[null,word],amPm=["isPm",word,function(e,t){var n=e.toLowerCase();return n===t.amPm[0]?0:n===t.amPm[1]?1:null}],timezoneOffset=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var n=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?n:-n}return 0}],parseFlags={D:["day",twoDigitsOptional],DD:["day",twoDigits],Do:["day",twoDigitsOptional+word,function(e){return parseInt(e,10)}],M:["month",twoDigitsOptional,monthParse],MM:["month",twoDigits,monthParse],YY:["year",twoDigits,function(e){var t=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+e>68?t-1:t)+e)}],h:["hour",twoDigitsOptional,void 0,"isPm"],hh:["hour",twoDigits,void 0,"isPm"],H:["hour",twoDigitsOptional],HH:["hour",twoDigits],m:["minute",twoDigitsOptional],mm:["minute",twoDigits],s:["second",twoDigitsOptional],ss:["second",twoDigits],YYYY:["year",fourDigits],S:["millisecond","\\d",function(e){return 100*+e}],SS:["millisecond",twoDigits,function(e){return 10*+e}],SSS:["millisecond",threeDigits],d:emptyDigits,dd:emptyDigits,ddd:emptyWord,dddd:emptyWord,MMM:["month",word,monthUpdate("monthNamesShort")],MMMM:["month",word,monthUpdate("monthNames")],a:amPm,A:amPm,ZZ:timezoneOffset,Z:timezoneOffset},globalMasks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},setGlobalDateMasks=function(e){return assign(globalMasks,e)},format=function(e,t,n){if(void 0===t&&(t=globalMasks.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");t=globalMasks[t]||t;var r=[];t=t.replace(literal,(function(e,t){return r.push(t),"@@@"}));var i=assign(assign({},globalI18n),n);return(t=t.replace(token,(function(t){return formatFlags[t](e,i)}))).replace(/@@@/g,(function(){return r.shift()}))};function parse(e,t,n){if(void 0===n&&(n={}),"string"!=typeof t)throw new Error("Invalid format in fecha parse");if(t=globalMasks[t]||t,e.length>1e3)return null;var r={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=t.replace(literal,(function(e,t){return o.push(regexEscape(t)),"@@@"})),s={},l={};a=regexEscape(a).replace(token,(function(e){var t=parseFlags[e],n=t[0],r=t[1],o=t[3];if(s[n])throw new Error("Invalid format. "+n+" specified twice in format");return s[n]=!0,o&&(l[o]=!0),i.push(t),"("+r+")"})),Object.keys(l).forEach((function(e){if(!s[e])throw new Error("Invalid format. "+e+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var c=e.match(new RegExp(a,"i"));if(!c)return null;for(var u,h=assign(assign({},globalI18n),n),d=1;d<c.length;d++){var f=i[d-1],p=f[0],g=f[2],m=g?g(c[d],h):+c[d];if(null==m)return null;r[p]=m}if(1===r.isPm&&null!=r.hour&&12!=+r.hour?r.hour=+r.hour+12:0===r.isPm&&12==+r.hour&&(r.hour=0),null==r.timezoneOffset){u=new Date(r.year,r.month,r.day,r.hour,r.minute,r.second,r.millisecond);for(var v=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],y=(d=0,v.length);d<y;d++)if(s[v[d][0]]&&r[v[d][0]]!==u[v[d][1]]())return null}else if(u=new Date(Date.UTC(r.year,r.month,r.day,r.hour,r.minute-r.timezoneOffset,r.second,r.millisecond)),r.month>11||r.month<0||r.day>31||r.day<1||r.hour>23||r.hour<0||r.minute>59||r.minute<0||r.second>59||r.second<0)return null;return u}var fecha={format:format,parse:parse,defaultI18n:defaultI18n,setGlobalDateI18n:setGlobalDateI18n,setGlobalDateMasks:setGlobalDateMasks};const fecha1=Object.freeze(Object.defineProperty({__proto__:null,default:fecha,assign:assign,format:format,parse:parse,defaultI18n:defaultI18n,setGlobalDateI18n:setGlobalDateI18n,setGlobalDateMasks:setGlobalDateMasks},Symbol.toStringTag,{value:"Module"}));function bisector(e){return function(t,n,r,i){for(var o=isNil(r)?0:r,a=isNil(i)?t.length:i;o<a;){var s=o+a>>>1;e(t[s])>n?a=s:o=s+1}return o}}var FORMAT_METHOD="format";function timeFormat(e,t){return(fecha1[FORMAT_METHOD]||fecha[FORMAT_METHOD])(e,t)}function toTimeStamp(e){return isString$1(e)&&(e=e.indexOf("T")>0?new Date(e).getTime():new Date(e.replace(/-/gi,"/")).getTime()),isDate(e)&&(e=e.getTime()),e}var SECOND=1e3,MINUTE=60*SECOND,HOUR=60*MINUTE,DAY=24*HOUR,MONTH=31*DAY,YEAR=365*DAY,intervals=[["HH:mm:ss",SECOND],["HH:mm:ss",10*SECOND],["HH:mm:ss",30*SECOND],["HH:mm",MINUTE],["HH:mm",10*MINUTE],["HH:mm",30*MINUTE],["HH",HOUR],["HH",6*HOUR],["HH",12*HOUR],["YYYY-MM-DD",DAY],["YYYY-MM-DD",4*DAY],["YYYY-WW",7*DAY],["YYYY-MM",MONTH],["YYYY-MM",4*MONTH],["YYYY-MM",6*MONTH],["YYYY",380*DAY]];function getTickInterval(e,t,n){var r=(t-e)/n,i=bisector((function(e){return e[1]}))(intervals,r)-1,o=intervals[i];return i<0?o=intervals[0]:i>=intervals.length&&(o=last(intervals)),o}var TimeCat=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="timeCat",t}return __extends$x(t,e),t.prototype.translate=function(e){e=toTimeStamp(e);var t=this.values.indexOf(e);return-1===t&&(t=isNumber$1(e)&&e<this.values.length?e:NaN),t},t.prototype.getText=function(e,t){var n=this.translate(e);if(n>-1){var r=this.values[n],i=this.formatter;return r=i?i(r,t):timeFormat(r,this.mask)}return e},t.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},t.prototype.setDomain=function(){var t=this.values;each(t,(function(e,n){t[n]=toTimeStamp(e)})),t.sort((function(e,t){return e-t})),e.prototype.setDomain.call(this)},t}(Category),Continuous=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isContinuous=!0,t}return __extends$x(t,e),t.prototype.scale=function(e){if(isNil(e))return NaN;var t=this.rangeMin(),n=this.rangeMax();return this.max===this.min?t:t+this.getScalePercent(e)*(n-t)},t.prototype.init=function(){e.prototype.init.call(this);var t=this.ticks,n=head(t),r=last(t);n<this.min&&(this.min=n),r>this.max&&(this.max=r),isNil(this.minLimit)||(this.min=n),isNil(this.maxLimit)||(this.max=r)},t.prototype.setDomain=function(){var e=getRange(this.values),t=e.min,n=e.max;isNil(this.min)&&(this.min=t),isNil(this.max)&&(this.max=n),this.min>this.max&&(this.min=t,this.max=n)},t.prototype.calculateTicks=function(){var t=this,n=e.prototype.calculateTicks.call(this);return this.nice||(n=filter(n,(function(e){return e>=t.min&&e<=t.max}))),n},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;return(e-n)/(t-n)},t.prototype.getInvertPercent=function(e){return(e-this.rangeMin())/(this.rangeMax()-this.rangeMin())},t}(Scale),Linear=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return __extends$x(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e);return this.min+t*(this.max-this.min)},t.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},t}(Continuous);const Linear$1=Linear;function calBase(e,t){var n=Math.E;return t>=0?Math.pow(n,Math.log(t)/e):-1*Math.pow(n,Math.log(-t)/e)}function log(e,t){return 1===e?1:Math.log(t)/Math.log(e)}function getLogPositiveMin(e,t,n){isNil(n)&&(n=Math.max.apply(null,e));var r=n;return each(e,(function(e){e>0&&e<r&&(r=e)})),r===n&&(r=n/t),r>1&&(r=1),r}var Log=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="log",t}return __extends$x(t,e),t.prototype.invert=function(e){var t,n=this.base,r=log(n,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===e)return 0;var s=1/(r-(t=log(n,a/n)))*o;if(e<s)return e/s*a}else t=log(n,this.min);var l=(e-i)/o*(r-t)+t;return Math.pow(n,l)},t.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},t.prototype.setDomain=function(){e.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===t&&(this.positiveMin=getLogPositiveMin(this.values,this.base,this.max))},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;if(e<=0)return 0;var r=this.base,i=this.positiveMin;return i&&(n=1*i/r),e<i?e/i/(log(r,t)-log(r,n)):(log(r,e)-log(r,n))/(log(r,t)-log(r,n))},t}(Continuous),Pow=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="pow",t}return __extends$x(t,e),t.prototype.invert=function(e){var t=this.getInvertPercent(e),n=this.exponent,r=calBase(n,this.max),i=calBase(n,this.min),o=t*(r-i)+i,a=o>=0?1:-1;return Math.pow(o,n)*a},t.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},t.prototype.getScalePercent=function(e){var t=this.max,n=this.min;if(t===n)return 0;var r=this.exponent;return(calBase(r,e)-calBase(r,n))/(calBase(r,t)-calBase(r,n))},t}(Continuous),Time=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="time",t}return __extends$x(t,e),t.prototype.getText=function(e,t){var n=this.translate(e),r=this.formatter;return r?r(n,t):timeFormat(n,this.mask)},t.prototype.scale=function(t){var n=t;return(isString$1(n)||isDate(n))&&(n=this.translate(n)),e.prototype.scale.call(this,n)},t.prototype.translate=function(e){return toTimeStamp(e)},t.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},t.prototype.setDomain=function(){var e=this.values,t=this.getConfig("min"),n=this.getConfig("max");if(isNil(t)&&isNumber$1(t)||(this.min=this.translate(this.min)),isNil(n)&&isNumber$1(n)||(this.max=this.translate(this.max)),e&&e.length){var r=[],i=1/0,o=i,a=0;each(e,(function(e){var t=toTimeStamp(e);if(isNaN(t))throw new TypeError("Invalid Time: "+e+" in time scale!");i>t?(o=i,i=t):o>t&&(o=t),a<t&&(a=t),r.push(t)})),e.length>1&&(this.minTickInterval=o-i),isNil(t)&&(this.min=i),isNil(n)&&(this.max=a)}},t}(Linear$1),Quantize=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantize",t}return __extends$x(t,e),t.prototype.invert=function(e){var t=this.ticks,n=t.length,r=this.getInvertPercent(e),i=Math.floor(r*(n-1));if(i>=n-1)return last(t);if(i<0)return head(t);var o=t[i],a=i/(n-1);return o+(r-a)/((i+1)/(n-1)-a)*(t[i+1]-o)},t.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},t.prototype.calculateTicks=function(){var t=e.prototype.calculateTicks.call(this);return this.nice||(last(t)!==this.max&&t.push(this.max),head(t)!==this.min&&t.unshift(this.min)),t},t.prototype.getScalePercent=function(e){var t=this.ticks;if(e<head(t))return 0;if(e>last(t))return 1;var n=0;return each(t,(function(t,r){if(!(e>=t))return!1;n=r})),n/(t.length-1)},t}(Continuous),Quantile=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="quantile",t}return __extends$x(t,e),t.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},t}(Quantize),map={};function getClass(e){return map[e]}function registerClass(e,t){if(getClass(e))throw new Error("type '"+e+"' existed.");map[e]=t}var Identity=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return __extends$x(t,e),t.prototype.calculateTicks=function(){return this.values},t.prototype.scale=function(e){return this.values[0]!==e&&isNumber$1(e)?e:this.range[0]},t.prototype.invert=function(e){var t=this.range;return e<t[0]||e>t[1]?NaN:this.values[0]},t}(Scale);function calculateCatTicks(e){var t=e.values,n=e.tickInterval,r=e.tickCount,i=e.showLast;if(isNumber$1(n)){var o=filter(t,(function(e,t){return t%n==0})),a=last(t);return i&&last(o)!==a&&o.push(a),o}var s=t.length,l=e.min,c=e.max;if(isNil(l)&&(l=0),isNil(c)&&(c=t.length-1),!isNumber$1(r)||r>=s)return t.slice(l,c+1);if(r<=0||c<=0)return[];for(var u=1===r?s:Math.floor(s/(r-1)),h=[],d=l,f=0;f<r&&!(d>=c);f++)d=Math.min(l+f*u,c),f===r-1&&i?h.push(t[c]):h.push(t[d]);return h}function d3Linear(e){var t=e.min,n=e.max,r=e.nice,i=e.tickCount,o=new D3Linear;return o.domain([t,n]),r&&o.nice(i),o.ticks(i)}var DEFAULT_COUNT=5,e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2),D3Linear=function(){function e(){this._domain=[0,1]}return e.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},e.prototype.nice=function(e){var t,n;void 0===e&&(e=DEFAULT_COUNT);var r,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],l=this._domain[a];return l<s&&(s=(t=[l,s])[0],l=t[1],o=(n=[a,o])[0],a=n[1]),(r=tickIncrement(s,l,e))>0?r=tickIncrement(s=Math.floor(s/r)*r,l=Math.ceil(l/r)*r,e):r<0&&(r=tickIncrement(s=Math.ceil(s*r)/r,l=Math.floor(l*r)/r,e)),r>0?(i[o]=Math.floor(s/r)*r,i[a]=Math.ceil(l/r)*r,this.domain(i)):r<0&&(i[o]=Math.ceil(s*r)/r,i[a]=Math.floor(l*r)/r,this.domain(i)),this},e.prototype.ticks=function(e){return void 0===e&&(e=DEFAULT_COUNT),d3ArrayTicks(this._domain[0],this._domain[this._domain.length-1],e||DEFAULT_COUNT)},e}();function d3ArrayTicks(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=tickIncrement(e,t,n))||!isFinite(a))return[];if(a>0)for(e=Math.ceil(e/a),t=Math.floor(t/a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(e+s)*a;else for(e=Math.floor(e*a),t=Math.ceil(t*a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(e-s)/a;return r&&o.reverse(),o}function tickIncrement(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=e10?10:o>=e5?5:o>=e2?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=e10?10:o>=e5?5:o>=e2?2:1)}function snapMultiple(e,t,n){return("ceil"===n?Math.ceil(e/t):"floor"===n?Math.floor(e/t):Math.round(e/t))*t}function intervalTicks(e,t,n){var r=snapMultiple(e,n,"floor"),i=snapMultiple(t,n,"ceil");r=fixedBase(r,n),i=fixedBase(i,n);for(var o=[],a=Math.max((i-r)/(Math.pow(2,12)-1),n),s=r;s<=i;s+=a){var l=fixedBase(s,a);o.push(l)}return{min:r,max:i,ticks:o}}function strictLimit(e,t,n){var r,i=e.minLimit,o=e.maxLimit,a=e.min,s=e.max,l=e.tickCount,c=void 0===l?5:l,u=isNil(i)?isNil(t)?a:t:i,h=isNil(o)?isNil(n)?s:n:o;if(u>h&&(h=(r=[u,h])[0],u=r[1]),c<=2)return[u,h];for(var d=(h-u)/(c-1),f=[],p=0;p<c;p++)f.push(u+d*p);return f}function d3LinearTickMethod(e){var t=e.min,n=e.max,r=e.tickInterval,i=e.minLimit,o=e.maxLimit,a=d3Linear(e);return isNil(i)&&isNil(o)?r?intervalTicks(t,n,r).ticks:a:strictLimit(e,head(a),last(a))}function prettyNumber(e){return Math.abs(e)<1e-15?e:parseFloat(e.toFixed(15))}var DEFAULT_Q=[1,5,2,2.5,4,3],eps=100*Number.EPSILON;function mod(e,t){return(e%t+t)%t}function round(e){return Math.round(1e12*e)/1e12}function simplicity(e,t,n,r,i,o){var a=size(t),s=indexOf(t,e),l=0,c=mod(r,o);return(c<eps||o-c<eps)&&r<=0&&i>=0&&(l=1),1-s/(a-1)-n+l}function simplicityMax(e,t,n){var r=size(t);return 1-indexOf(t,e)/(r-1)-n+1}function density(e,t,n,r,i,o){var a=(e-1)/(o-i),s=(t-1)/(Math.max(o,r)-Math.min(n,i));return 2-Math.max(a/s,s/a)}function densityMax(e,t){return e>=t?2-(e-1)/(t-1):1}function coverage(e,t,n,r){var i=t-e;return 1-.5*(Math.pow(t-r,2)+Math.pow(e-n,2))/Math.pow(.1*i,2)}function coverageMax(e,t,n){var r=t-e;if(n>r){var i=(n-r)/2;return 1-Math.pow(i,2)/Math.pow(.1*r,2)}return 1}function legibility(){return 1}function extended(e,t,n,r,i,o){void 0===n&&(n=5),void 0===r&&(r=!0),void 0===i&&(i=DEFAULT_Q),void 0===o&&(o=[.25,.2,.5,.05]);var a=n<0?0:Math.round(n);if(Number.isNaN(e)||Number.isNaN(t)||"number"!=typeof e||"number"!=typeof t||!a)return{min:0,max:0,ticks:[]};if(t-e<1e-15||1===a)return{min:e,max:t,ticks:[e]};if(t-e>1e148){var s=(t-e)/(w=n||5);return{min:e,max:t,ticks:Array(w).fill(null).map((function(t,n){return prettyNumber(e+s*n)}))}}for(var l={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var u=0;u<i.length;u+=1){var h=i[u],d=simplicityMax(h,i,c);if(o[0]*d+o[1]+o[2]+o[3]<l.score){c=1/0;break}for(var f=2;f<1/0;){var p=densityMax(f,a);if(o[0]*d+o[1]+o[2]*p+o[3]<l.score)break;for(var g=(t-e)/(f+1)/c/h,m=Math.ceil(Math.log10(g));m<1/0;){var v=c*h*Math.pow(10,m),y=coverageMax(e,t,v*(f-1));if(o[0]*d+o[1]*y+o[2]*p+o[3]<l.score)break;var b=Math.floor(t/v)*c-(f-1)*c,x=Math.ceil(e/v)*c;if(b<=x)for(var w=x-b,_=0;_<=w;_+=1){var C=(b+_)*(v/c),$=C+v*(f-1),S=v,E=simplicity(h,i,c,C,$,S),A=coverage(e,t,C,$),M=density(f,a,e,t,C,$),k=legibility(),T=o[0]*E+o[1]*A+o[2]*M+o[3]*k;T>l.score&&(!r||C<=e&&$>=t)&&(l.lmin=C,l.lmax=$,l.lstep=S,l.score=T)}m+=1}f+=1}}c+=1}var P=prettyNumber(l.lmax),O=prettyNumber(l.lmin),N=prettyNumber(l.lstep),I=Math.floor(round((P-O)/N))+1,D=new Array(I);D[0]=prettyNumber(O);for(u=1;u<I;u++)D[u]=prettyNumber(D[u-1]+N);return{min:Math.min(e,head(D)),max:Math.max(t,last(D)),ticks:D}}function linear(e){var t=e.min,n=e.max,r=e.tickCount,i=e.nice,o=e.tickInterval,a=e.minLimit,s=e.maxLimit,l=extended(t,n,r,i).ticks;return isNil(a)&&isNil(s)?o?intervalTicks(t,n,o).ticks:l:strictLimit(e,head(l),last(l))}function calculateLogTicks(e){var t,n=e.base,r=e.tickCount,i=e.min,o=e.max,a=e.values,s=log(n,o);if(i>0)t=Math.floor(log(n,i));else{var l=getLogPositiveMin(a,n,o);t=Math.floor(log(n,l))}for(var c=s-t,u=Math.ceil(c/r),h=[],d=t;d<s+u;d+=u)h.push(Math.pow(n,d));return i<=0&&h.unshift(0),h}function pretty(e,t,n){if(void 0===n&&(n=5),e===t)return{max:t,min:e,ticks:[e]};var r=n<0?0:Math.round(n);if(0===r)return{max:t,min:e,ticks:[]};var i=(t-e)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o;2*o-i<1.5*(i-a)&&5*o-i<2.75*(i-(a=2*o))&&10*o-i<1.5*(i-(a=5*o))&&(a=10*o);for(var s=Math.ceil(t/a),l=Math.floor(e/a),c=Math.max(s*a,t),u=Math.min(l*a,e),h=Math.floor((c-u)/a)+1,d=new Array(h),f=0;f<h;f++)d[f]=prettyNumber(u+f*a);return{min:u,max:c,ticks:d}}function calculatePowTicks(e){var t=e.exponent,n=e.tickCount,r=Math.ceil(calBase(t,e.max));return pretty(Math.floor(calBase(t,e.min)),r,n).ticks.map((function(e){var n=e>=0?1:-1;return Math.pow(e,t)*n}))}function quantileSorted(e,t){var n=e.length*t;return 1===t?e[e.length-1]:0===t?e[0]:n%1!=0?e[Math.ceil(n)-1]:e.length%2==0?(e[n-1]+e[n])/2:e[n]}function calculateTicks(e){var t=e.tickCount,n=e.values;if(!n||!n.length)return[];for(var r=n.slice().sort((function(e,t){return e-t})),i=[],o=0;o<t;o++){var a=o/(t-1);i.push(quantileSorted(r,a))}return i}function linearPretty(e){var t=e.min,n=e.max,r=e.tickCount,i=e.tickInterval,o=e.minLimit,a=e.maxLimit,s=pretty(t,n,r).ticks;return isNil(o)&&isNil(a)?i?intervalTicks(t,n,i).ticks:s:strictLimit(e,head(s),last(s))}function calculateTimeTicks(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickInterval,o=e.tickCount;if(i)o=Math.ceil((n-t)/i);else{var a=(n-t)/(i=getTickInterval(t,n,o)[1])/o;a>1&&(i*=Math.ceil(a)),r&&i<r&&(i=r)}i=Math.max(Math.floor((n-t)/(Math.pow(2,12)-1)),i);for(var s=[],l=t;l<n+i;l+=i)s.push(l);return s}function timeCat(e){return calculateCatTicks(__assign$h({showLast:!0},e))}function getYear(e){return new Date(e).getFullYear()}function createYear(e){return new Date(e,0,1).getTime()}function getMonth(e){return new Date(e).getMonth()}function diffMonth(e,t){var n=getYear(e),r=getYear(t),i=getMonth(e);return 12*(r-n)+(getMonth(t)-i)%12}function creatMonth(e,t){return new Date(e,t,1).getTime()}function diffDay(e,t){return Math.ceil((t-e)/DAY)}function diffHour(e,t){return Math.ceil((t-e)/HOUR)}function diffMinus(e,t){return Math.ceil((t-e)/6e4)}function timePretty(e){var t=e.min,n=e.max,r=e.minTickInterval,i=e.tickCount,o=e.tickInterval,a=[];o||(o=(n-t)/i,r&&o<r&&(o=r)),o=Math.max(Math.floor((n-t)/(Math.pow(2,12)-1)),o);var s=getYear(t);if(o>YEAR)for(var l=getYear(n),c=Math.ceil(o/YEAR),u=s;u<=l+c;u+=c)a.push(createYear(u));else if(o>MONTH){var h=Math.ceil(o/MONTH),d=getMonth(t),f=diffMonth(t,n);for(u=0;u<=f+h;u+=h)a.push(creatMonth(s,u+d))}else if(o>DAY){var p=(b=new Date(t)).getFullYear(),g=b.getMonth(),m=b.getDate(),v=Math.ceil(o/DAY),y=diffDay(t,n);for(u=0;u<y+v;u+=v)a.push(new Date(p,g,m+u).getTime())}else if(o>HOUR){p=(b=new Date(t)).getFullYear(),g=b.getMonth(),v=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/HOUR),_=diffHour(t,n);for(u=0;u<=_+w;u+=w)a.push(new Date(p,g,v,x+u).getTime())}else if(o>MINUTE){var C=diffMinus(t,n),$=Math.ceil(o/MINUTE);for(u=0;u<=C+$;u+=$)a.push(t+u*MINUTE)}else{var S=o;S<SECOND&&(S=SECOND);var E=Math.floor(t/SECOND)*SECOND,A=Math.ceil((n-t)/SECOND),M=Math.ceil(S/SECOND);for(u=0;u<A+M;u+=M)a.push(E+u*SECOND)}return a.length,a}registerTickMethod("cat",calculateCatTicks),registerTickMethod("time-cat",timeCat),registerTickMethod("wilkinson-extended",linear),registerTickMethod("r-pretty",linearPretty),registerTickMethod("time",calculateTimeTicks),registerTickMethod("time-pretty",timePretty),registerTickMethod("log",calculateLogTicks),registerTickMethod("pow",calculatePowTicks),registerTickMethod("quantile",calculateTicks),registerTickMethod("d3-linear",d3LinearTickMethod),registerClass("cat",Category),registerClass("category",Category),registerClass("identity",Identity),registerClass("linear",Linear$1),registerClass("log",Log),registerClass("pow",Pow),registerClass("time",Time),registerClass("timeCat",TimeCat),registerClass("quantize",Quantize),registerClass("quantile",Quantile);var __spreadArray=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function pointsToPath(e){return map$3(e,(function(e,t){return[0===t?"M":"L",e[0],e[1]]}))}function getLinePath(e){return pointsToPath(e)}function getSmoothLinePath(e){if(e.length<=2)return getLinePath(e);var t=[];each(e,(function(e){isEqual$1(e,t.slice(t.length-2))||t.push(e[0],e[1])}));var n=catmullRom2Bezier(t,!1),r=head(e),i=r[0],o=r[1];return n.unshift(["M",i,o]),n}function dataToPath(e,t,n,r){void 0===r&&(r=!0);var i=new Linear$1({values:e}),o=new Category({values:map$3(e,(function(e,t){return t}))}),a=map$3(e,(function(e,r){return[o.scale(r)*t,n-i.scale(e)*n]}));return r?getSmoothLinePath(a):getLinePath(a)}function dataToRectPath(e,t,n,r){void 0===r&&(r=5);for(var i=new Linear$1({values:e}),o=new Category({values:map$3(e,(function(e,t){return t}))}),a=map$3(e,(function(e,r){return[o.scale(r)*t,n-i.scale(e)*n]})),s=[],l=0;l<a.length;l++){var c=a[l],u=getRectPoints({x:c[0],y:c[1],y0:n,size:r});s.push.apply(s,u)}return getRectPath(s)}function getAreaLineY(e,t){var n=new Linear$1({values:e}),r=Math.max(0,n.min);return t-n.scale(r)*t}function linePathToAreaPath(e,t,n,r){var i=__spreadArray([],e,!0),o=getAreaLineY(r,n);return i.push(["L",t,o]),i.push(["L",0,o]),i.push(["Z"]),i}function getRectPoints(e){var t,n,r,i,o=e.x,a=e.y,s=e.y0,l=e.size;isArray$1(a)?(t=a[0],n=a[1]):(t=s,n=a),isArray$1(o)?(r=o[0],i=o[1]):(r=o-l/2,i=o+l/2);var c=[{x:r,y:t},{x:r,y:n}];return c.push({x:i,y:n},{x:i,y:t}),c}function getRectPath(e,t){void 0===t&&(t=!0);var n=[],r=e[0];n.push(["M",r.x,r.y]);for(var i=1,o=e.length;i<o;i++)n.push(["L",e[i].x,e[i].y]);return t&&(n.push(["L",r.x,r.y]),n.push(["z"])),n}var __assign$9=globalThis&&globalThis.__assign||function(){return __assign$9=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$9.apply(this,arguments)},LINE_STYLE={stroke:"#C5C5C5",strokeOpacity:.85},AREA_STYLE={fill:"#CACED4",opacity:.85},Trend=function(){function e(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.width,a=void 0===o?200:o,s=e.height,l=void 0===s?26:s,c=e.smooth,u=void 0===c||c,h=e.isArea,d=void 0!==h&&h,f=e.data,p=void 0===f?[]:f,g=e.lineStyle,m=e.areaStyle,v=e.group,y=e.interval,b=void 0===y?null:y;this.group=v,this.x=n,this.y=i,this.width=a,this.height=l,this.data=p,this.smooth=u,this.isArea=d,this.lineStyle=Object.assign({},LINE_STYLE,g),this.areaStyle=Object.assign({},AREA_STYLE,m),this.intervalConfig=b,this.renderLine()}return e.prototype.renderLine=function(){var e=this,t=e.x,n=e.y,r=e.width,i=e.height;e.barWidth;var o=e.data,a=e.smooth,s=e.isArea,l=e.lineStyle,c=e.areaStyle,u=this.group.addGroup({name:"trend-group"});if(o){var h=dataToPath(o,r,i,a);if(u.addShape("path",{attrs:__assign$9({path:h},l),name:"trend-line"}),s){var d=linePathToAreaPath(h,r,i,o);u.addShape("path",{attrs:__assign$9({path:d},c),name:"trend-area"})}}this.intervalConfig&&u.addShape("path",{attrs:__assign$9({path:dataToRectPath(this.intervalConfig.data,r,i,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),u.move(t,n)},e.prototype.destory=function(){this.group.destroy()},e}();const Trend$1=Trend;var __assign$8=globalThis&&globalThis.__assign||function(){return __assign$8=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$8.apply(this,arguments)},DEFAULT_STYLE={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},SIMPLE_DEFAULT_STYLE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Handler=function(){function e(e){var t=e.group,n=e.name,r=e.type,i=e.x,o=void 0===i?0:i,a=e.y,s=void 0===a?0:a,l=e.width,c=void 0===l?2:l,u=e.height,h=void 0===u?24:u,d=e.style,f=void 0===d?{}:d;this.group=t,this.name=n,this.handleType=r,this.x=o,this.y=s,this.width=c,this.height=h,"trend"===r?this.style=__assign$8(__assign$8({},DEFAULT_STYLE),f):"simple"===r&&(this.style=__assign$8(__assign$8({},SIMPLE_DEFAULT_STYLE),f)),this.renderHandle()}return e.prototype.setX=function(e){this.setXY(e,void 0)},e.prototype.setY=function(e){this.setXY(void 0,e)},e.prototype.setXY=function(e,t){isNumber$1(e)&&(this.x=e),isNumber$1(t)&&(this.y=t),this.updateXY()},e.prototype.renderHandle=function(){var e=this,t=e.width,n=e.height,r=e.style,i=e.name,o=r.fill,a=r.stroke,s=r.radius,l=r.opacity,c=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:n,fill:o,stroke:a,radius:s,opacity:l,cursor:c},name:"".concat(i,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:c,lineAppendWidth:12},name:"".concat(i,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:c},name:"".concat(i,"-handler")})):"simple"===this.handleType&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:n/2,r:2*t,fill:o,stroke:a,radius:s,opacity:l,cursor:c,lineWidth:2},name:"".concat(i,"-handler")})),this.updateXY(),"trend"===this.handleType?this.bindTrendEvents():"simple"===this.handleType&&this.bindSimpleEvents()},e.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),(function(){var t=e.style.highLightFill;e.topCircle.attr("fill",t)})),this.handleGroup.on("".concat(t,"-handler:mouseleave"),(function(){var t=e.style.fill;e.topCircle.attr("fill",t)}))},e.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),(function(){var t=e.style.highLightFill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)})),this.handleGroup.on("".concat(t,"-handler:mouseleave"),(function(){var t=e.style.fill;e.verticalLine.attr("fill",t),e.topCircle.attr("fill",t),e.bottomCircle.attr("fill",t)}))},e.prototype.show=function(){this.handleGroup.show()},e.prototype.hide=function(){this.handleGroup.hide()},e.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},e}();const Handler$1=Handler;var TIMELINE_START="timebarstartplay",TIMELINE_END="timebarendplay",VALUE_CHANGE="valuechange",TIMEBAR_CONFIG_CHANGE="timebarConfigChanged",PLAY_PAUSE_BTN="playPauseBtn",NEXT_STEP_BTN="nextStepBtn",PRE_STEP_BTN="preStepBtn",__assign$7=globalThis&&globalThis.__assign||function(){return __assign$7=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$7.apply(this,arguments)},Button=function(){function e(e){this.config=deepMix({},e),this.init()}return e.prototype.update=function(e){this.config=deepMix({},this.config,e),this.updateElement(),this.renderMarker()},e.prototype.init=function(){this.initElement(),this.renderMarker()},e.prototype.initElement=function(){var e=this.config,t=e.group,n=e.style,r=n.scale,i=void 0===r?1:r,o=n.offsetX,a=void 0===o?0:o,s=n.offsetY,l=void 0===s?0:s,c=this.config.x+a,u=this.config.y+l,h=t.addGroup({name:PLAY_PAUSE_BTN});this.startMarkerGroup=h.addGroup({name:PLAY_PAUSE_BTN}),this.circle=t.addShape("circle",{attrs:__assign$7({x:c,y:u,r:this.config.r*i},n),name:PLAY_PAUSE_BTN}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,u,i),fill:n.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=h.addGroup({name:PLAY_PAUSE_BTN});var d=.25*this.config.r*i,f=.5*this.config.r*Math.sqrt(3)*i;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*i,y:u-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*i,y:u-f/2,width:d,height:f,fill:n.stroke||"#aaa",lineWidth:0}})},e.prototype.updateElement=function(){var e=this.config.style,t=e.scale,n=void 0===t?1:t,r=e.offsetX,i=void 0===r?0:r,o=e.offsetY,a=void 0===o?0:o,s=this.config.x+i,l=this.config.y+a;this.circle.attr("x",s),this.circle.attr("y",l),this.circle.attr("r",this.config.r*n),this.startMarker.attr("path",this.getStartMarkerPath(s,l,n));var c=.25*this.config.r*n,u=.5*this.config.r*Math.sqrt(3)*n;this.pauseLeftMarker.attr("x",s-.375*this.config.r*n),this.pauseLeftMarker.attr("y",l-u/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",u),this.pauseRightMarker.attr("x",s+1/8*this.config.r*n),this.pauseRightMarker.attr("y",l-u/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",u)},e.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},e.prototype.getStartMarkerPath=function(e,t,n){var r=.5*this.config.r*Math.sqrt(3)*n;return[["M",e-r/Math.sqrt(3)/2,t-r/2],["L",e+r/Math.sqrt(3),t],["L",e-r/Math.sqrt(3)/2,t+r/2]]},e}();const Button$1=Button;var __assign$6=globalThis&&globalThis.__assign||function(){return __assign$6=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$6.apply(this,arguments)},transform$3=transform$d,DEFAULT_RECT_FILL="#aaa",DEFAULT_RECT_STROKE="green",DEFAULT_PLAYBTN_STYLE={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},DEFAULT_PREBTN_STYLE={fill:"#fff"},DEFAULT_NEXTBTN_STYLE={fill:"green"},DEFAULT_SPEED_CONTROLLER_STYLE={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},DEFAULT_TIMETYPE_CONTROLLER_STYLE={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},DEFAULT_CONTROLLER_CONFIG={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:DEFAULT_SPEED_CONTROLLER_STYLE,timeTypeControllerStyle:DEFAULT_TIMETYPE_CONTROLLER_STYLE},SPEED_CONTROLLER_OFFSET=110,TOGGLE_MODEL_OFFSET=50,TIME_TYPE={SINGLE:"single",RANGE:"range"},ControllerBtn=function(){function e(e){this.controllerCfg=deepMix({},DEFAULT_CONTROLLER_CONFIG,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||TIME_TYPE.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return e.prototype.init=function(){this.renderPlayButton()},e.prototype.getNextMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e+n,t],["L",e,t+n],["Z",e,t-n],["M",e,t],["L",e-n,t-n],["L",e-n,t+n],["Z"]]},e.prototype.getPreMarkerPath=function(e,t,n){return[["M",e,t-n],["L",e-n,t],["L",e,t+n],["L",e,t-n],["M",e,t],["L",e+n,t-n],["L",e+n,t+n],["Z"]]},e.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,n=e.height,r=e.x,i=e.y,o=e.hideTimeTypeController,a=e.fill,s=void 0===a?DEFAULT_RECT_FILL:a,l=e.stroke,c=void 0===l?DEFAULT_RECT_STROKE:l,u=e.containerStyle,h=void 0===u?{}:u,d=__assign$6(__assign$6({},DEFAULT_PLAYBTN_STYLE),e.playBtnStyle||{}),f=__assign$6(__assign$6({},DEFAULT_PREBTN_STYLE),e.preBtnStyle||{}),p=__assign$6(__assign$6({},DEFAULT_NEXTBTN_STYLE),e.nextBtnStyle||{}),g=n/2-5,m=i+10,v=this.controllerGroup.addShape("rect",{attrs:__assign$6({x:r,y:m,width:t,height:n,stroke:c,fill:s},h),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:m,r:g}):this.playButton=new Button$1({group:this.controllerGroup,x:t/2,y:m+g+5,r:g,isPlay:this.isPlay,style:d});var y=f.offsetX||0,b=f.offsetY||0,x=(f.scale||1)*g;this.controllerGroup.addShape("path",{attrs:__assign$6({path:this.getPreMarkerPath(t/2-5*g+y,m+g+5+b,.5*x)},f),name:PRE_STEP_BTN});var w=p.offsetX||0,_=p.offsetY||0,C=(p.scale||1)*g;this.controllerGroup.addShape("path",{attrs:__assign$6({path:this.getNextMarkerPath(t/2+5*g+w,m+g+5+_,.5*C)},p),name:NEXT_STEP_BTN}),v.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var $=this.controllerCfg.scale,S=void 0===$?1:$,E=this.controllerGroup.getCanvasBBox(),A=(E.maxX+E.minX)/2,M=(E.maxY+E.minY)/2,k=transform$3([1,0,0,0,1,0,0,0,1],[["t",-A,-M],["s",S,S],["t",A,M]]);this.controllerGroup.setMatrix(k)},e.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,n=e.width,r=e.hideTimeTypeController,i=__assign$6(__assign$6({},DEFAULT_SPEED_CONTROLLER_STYLE),this.controllerCfg.speedControllerStyle||{}),o=i.scroller,a=void 0===o?{}:o,s=i.text,l=void 0===s?{}:s,c=i.pointer,u=void 0===c?{}:c,h=i.scale,d=void 0===h?1:h,f=i.offsetX,p=void 0===f?0:f,g=i.offsetY,m=void 0===g?0:g,v=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=v;var y=5;this.speedAxisY=[19,22,26,32,39];for(var b=0;b<5;b++){var x=t+this.speedAxisY[b],w=n-(r?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET);v.addShape("line",{attrs:__assign$6({x1:w,x2:w+15,y1:x,y2:x},a),speed:y,name:"speed-rect"}),this.speedAxisY[b]=x,y-=1}this.speedText=v.addShape("text",{attrs:__assign$6({x:n-(r?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},l),name:"speed-text"}),this.speedPoint=v.addShape("path",{attrs:__assign$6({path:this.getPointerPath(n-(r?TOGGLE_MODEL_OFFSET:SPEED_CONTROLLER_OFFSET),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},u),name:"speed-pointer"});var _=this.speedGroup.getCanvasBBox(),C=(_.maxX+_.minX)/2,$=(_.maxY+_.minY)/2,S=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];S=transform$3(S,[["t",-C,-$],["s",d,d],["t",C+p*d,$+m*d]]),this.speedGroup.setMatrix(S)},e.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},e.prototype.renderToggleTime=function(){var e,t,n=this.controllerCfg,r=n.width,i=n.defaultTimeType,o=__assign$6(__assign$6({},DEFAULT_TIMETYPE_CONTROLLER_STYLE),this.controllerCfg.timeTypeControllerStyle||{}),a=o.scale,s=void 0===a?1:a,l=o.offsetX,c=void 0===l?0:l,u=o.offsetY,h=void 0===u?0:u,d=o.box,f=void 0===d?{}:d,p=o.check,g=void 0===p?{}:p,m=o.text,v=void 0===m?{}:m;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var y=i===TIME_TYPE.SINGLE;this.toggleGroup.addShape("rect",{attrs:__assign$6({x:r-TOGGLE_MODEL_OFFSET,y:this.speedAxisY[0]+3.5},f),isChecked:y,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:__assign$6({path:[["M",r-TOGGLE_MODEL_OFFSET+3,this.speedAxisY[1]+6],["L",r-TOGGLE_MODEL_OFFSET+7,this.speedAxisY[1]+10],["L",r-TOGGLE_MODEL_OFFSET+12,this.speedAxisY[1]+4]]},g),capture:!1,name:"check-icon"}),y||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:__assign$6({text:y?(null===(e=this.controllerCfg)||void 0===e?void 0:e.timeRangeControllerText)||"":(null===(t=this.controllerCfg)||void 0===t?void 0:t.timePointControllerText)||"",x:r-TOGGLE_MODEL_OFFSET+15,y:this.speedAxisY[0]+4,fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},v),name:"checked-text"});var b=this.toggleGroup.getCanvasBBox(),x=(b.maxX+b.minX)/2,w=(b.maxY+b.minY)/2,_=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];_=transform$3(_,[["t",-x,-w],["s",s,s],["t",x+c*s,w+h*s]]),this.toggleGroup.setMatrix(_)},e.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",(function(t){var n=t.target.attr("y1"),r=e.speedPoint.attr("matrix"),i=e.speedAxisY.indexOf(r[7]||0),o=e.speedAxisY.indexOf(n),a=e.speedAxisY[o]-e.speedAxisY[i];r=transform$3(r,[["t",0,a]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(TIMEBAR_CONFIG_CHANGE,{speed:e.currentSpeed,type:e.currentType})})),this.speedGroup.on("mousewheel",(function(t){t.preventDefault();var n=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],r=n[7],i=e.speedAxisY.indexOf(r);if(-1===i){var o=1/0;e.speedAxisY.forEach((function(e,t){var n=Math.abs(e-r);o>n&&(o=n,i=t)}))}i=t.originalEvent.deltaY>0?Math.max(0,i-1):Math.min(e.speedAxisY.length-1,i+1);var a=e.speedAxisY[i]-r;n=transform$3(n,[["t",0,a]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-i,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(TIMEBAR_CONFIG_CHANGE,{speed:e.currentSpeed,type:e.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(t){var n,r,i=t.target.get("isChecked");i?(e.checkedIcon.hide(),e.checkedText.attr("text",(null===(r=e.controllerCfg)||void 0===r?void 0:r.timePointControllerText)||""),e.currentType=TIME_TYPE.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",(null===(n=e.controllerCfg)||void 0===n?void 0:n.timeRangeControllerText)||""),e.currentType=TIME_TYPE.SINGLE),t.target.set("isChecked",!i),e.group.emit(TIMEBAR_CONFIG_CHANGE,{type:e.currentType,speed:e.currentSpeed})}))},e.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},e}();const ControllerBtn$1=ControllerBtn;var __assign$5=globalThis&&globalThis.__assign||function(){return __assign$5=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$5.apply(this,arguments)},transform$2=transform$d,BACKGROUND_STYLE={fill:"#416180",opacity:.05},SIMPLE_BACKGROUND_STYLE={fill:"#416180",opacity:.15,radius:5},FOREGROUND_STYLE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},DEFAULT_HANDLER_WIDTH=2,HANDLER_STYLE={width:DEFAULT_HANDLER_WIDTH,height:24},TEXT_STYLE={textBaseline:"middle",fill:"#000",opacity:.45},TICK_LABEL_STYLE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},TICK_LINE_STYLE={lineWidth:1,stroke:"#ccc"},TrendTimeBar=function(){function e(e){var t=this;this.prevX=0,this.onMouseDown=function(e){return function(n){t.currentHandler=e;var r=n.originalEvent;r.stopPropagation(),r.preventDefault(),t.prevX=get$1(r,"touches.0.pageX",r.pageX);var i=t.canvas.get("container");i.addEventListener("mousemove",t.onMouseMove),i.addEventListener("mouseup",t.onMouseUp),i.addEventListener("mouseleave",t.onMouseUp),i.addEventListener("touchmove",t.onMouseMove),i.addEventListener("touchend",t.onMouseUp),i.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(e){e.stopPropagation(),e.preventDefault();var n=get$1(e,"touches.0.pageX",e.pageX),r=n-t.prevX,i=t.adjustOffsetRange(r/t.width);t.updateStartEnd(i),t.updateUI(),t.prevX=n},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var e=t.canvas.get("container");e&&(e.removeEventListener("mousemove",t.onMouseMove),e.removeEventListener("mouseup",t.onMouseUp),e.removeEventListener("mouseleave",t.onMouseUp),e.removeEventListener("touchmove",t.onMouseMove),e.removeEventListener("touchend",t.onMouseUp),e.removeEventListener("touchcancel",t.onMouseUp))};var n=e.x,r=void 0===n?0:n,i=e.y,o=void 0===i?0:i,a=e.width,s=void 0===a?100:a,l=e.height,c=e.padding,u=void 0===c?10:c,h=e.trendCfg,d=e.controllerCfg,f=void 0===d?{speed:1}:d,p=e.backgroundStyle,g=void 0===p?{}:p,m=e.foregroundStyle,v=void 0===m?{}:m,y=e.handlerStyle,b=void 0===y?{}:y,x=e.textStyle,w=void 0===x?{}:x,_=e.start,C=void 0===_?0:_,$=e.end,S=void 0===$?1:$,E=e.minText,A=void 0===E?"":E,M=e.maxText,k=void 0===M?"":M,T=e.group,P=e.graph,O=e.canvas,N=e.tick,I=void 0===N?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(e){return e},ticks:[]}:N,D=e.type;this.graph=P,this.canvas=O,this.group=T,this.timeBarType=D,this.x=r,this.y=o,this.width=s,this.height=l,this.padding=u,this.ticks=I.ticks,this.trendCfg=h,this.controllerCfg=f,this.currentSpeed=f.speed||1,this.tickLabelFormatter=I.tickLabelFormatter,"trend"===D?this.backgroundStyle=__assign$5(__assign$5({},BACKGROUND_STYLE),g):"simple"===D&&(this.backgroundStyle=__assign$5(__assign$5({},SIMPLE_BACKGROUND_STYLE),g)),this.foregroundStyle=__assign$5(__assign$5({},FOREGROUND_STYLE),v),this.handlerStyle=__assign$5(__assign$5({},HANDLER_STYLE),b),this.textStyle=__assign$5(__assign$5({},TEXT_STYLE),w),this.tickLabelStyle=__assign$5(__assign$5({},TICK_LABEL_STYLE),I.tickLabelStyle),this.tickLineStyle=__assign$5(__assign$5({},TICK_LINE_STYLE),I.tickLineStyle),this.currentMode=f.defaultTimeType||TIME_TYPE.RANGE,this.start=C,this.end=S,this.minText=A,this.maxText=k,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return e.prototype.update=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.minText,a=e.maxText,s=e.start,l=e.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(l,0)),mix(this,{x:t,y:n,width:r,height:i,minText:o,maxText:a}),this.updateUI()},e.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},e.prototype.renderSlider=function(){var e=this,t=this,n=t.width,r=t.height,i=t.timeBarType;if("trend"===i&&size(get$1(this.trendCfg,"data"))){var o=new Trend$1(__assign$5(__assign$5({x:this.x,y:this.y,width:n,height:r},this.trendCfg),{group:this.group}));this.trendComponent=o}var a=this.group.addGroup({name:"slider-group"});a.addShape("rect",{attrs:__assign$5({x:0,y:0,width:n,height:r},this.backgroundStyle),name:"background"});var s=this.group.addGroup();"trend"===i?(this.minTextShape=s.addShape("text",{attrs:__assign$5({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:__assign$5({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=s.addShape("text",{attrs:__assign$5({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=s.addShape("text",{attrs:__assign$5({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:__assign$5({x:0,y:this.y,height:r},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",(function(e){e.target.attr("cursor","grabbing")})),this.foregroundShape.on("mouseup",(function(t){t.target.attr("cursor",e.foregroundStyle.cursor||"grab")}));var l=get$1(this.handlerStyle,"width",2),c=get$1(this.handlerStyle,"height",24),u=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Handler$1({name:"minHandlerShape",group:u,type:i,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Handler$1({name:"maxHandlerShape",group:h,type:i,x:this.x,y:this.y,width:l,height:c,style:this.handlerStyle});var d=this.ticks,f=n/(d.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(e){e.destroy()}));var p=-1/0,g=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=d.map((function(t,n){var i;e.tickPosList.push(e.x+n*f),e.tickLabelFormatter?(i=e.tickLabelFormatter(t),!isString$1(i)&&i&&(i=t.date)):i=t.date;var o=e.x+n*f,a=e.y+r+5,s=e.group.addShape("text",{attrs:__assign$5({x:o,y:a,text:i,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if(isNumber$1(g)&&n!==d.length-1){var l=transform$2([1,0,0,0,1,0,0,0,1],[["t",-o,-a],["r",g],["t",o-5,a+2]]);s.attr({textAlign:"left",matrix:l})}0===n?s.attr({textAlign:"left"}):n!==d.length-1&&s.attr({textAlign:"right"});var c=e.group.addShape("line",{attrs:__assign$5({x1:e.x+n*f,y1:e.y+r+2,x2:e.x+n*f,y2:e.y+r+6},e.tickLineStyle),name:"tick-line"});c.toBack();var u=s.getBBox();return u.minX>p?(s.show(),c.show(),p=u.minX+u.width+10):(s.hide(),c.hide()),s})),this.controllerBtnGroup=new ControllerBtn$1(__assign$5({group:this.group,x:this.x,y:this.y+r+25,width:n,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),a.move(this.x,this.y),this.bindEvents(),this.currentMode===TIME_TYPE.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},e.prototype.bindEvents=function(){var e=this,t=this.group.find((function(e){return"minHandlerShape"===e.get("name")}));t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var n=this.group.find((function(e){return"maxHandlerShape"===e.get("name")}));n&&(n.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),n.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(PLAY_PAUSE_BTN,":click"),(function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()})),this.group.on("".concat(NEXT_STEP_BTN,":click"),(function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()})),this.group.on("".concat(PRE_STEP_BTN,":click"),(function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()})),this.group.on(TIMEBAR_CONFIG_CHANGE,(function(t){var n=t.type,r=t.speed;e.currentSpeed=r,e.currentMode=n,n===TIME_TYPE.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):n===TIME_TYPE.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())}))},e.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},e.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:var t=0-this.start,n=1-this.start;return Math.min(n,Math.max(t,e));case this.maxHandlerShape:t=0-this.end,n=1-this.end;return Math.min(n,Math.max(t,e));case this.foregroundShape:t=0-this.start,n=1-this.end;return Math.min(n,Math.max(t,e));default:return 0}},e.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],n=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler)return this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):null==t?void 0:t.date,void(this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):null==n?void 0:n.date);switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(n):n.date}},e.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,n=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",n-t);var r=get$1(this.handlerStyle,"width",DEFAULT_HANDLER_WIDTH);this.setText(this.minText,this.maxText);var i=this.dodgeText([t,n]),o=i[0],a=i[1];this.minHandlerShape.setX(t-r/2),each(o,(function(t,n){return e.minTextShape.attr(n,t)})),this.maxHandlerShape.setX(n-r/2),each(a,(function(t,n){return e.maxTextShape.attr(n,t)})),this.currentMode===TIME_TYPE.RANGE?this.graph.emit(VALUE_CHANGE,{value:[this.start,this.end].sort()}):this.currentMode===TIME_TYPE.SINGLE&&this.graph.emit(VALUE_CHANGE,{value:[this.end,this.end]})},e.prototype.dodgeText=function(e){var t,n,r=get$1(this.handlerStyle,"width",DEFAULT_HANDLER_WIDTH),i=this.minTextShape,o=this.maxTextShape,a=e[0],s=e[1],l=!1;a>s&&(a=(t=[s,a])[0],s=t[1],i=(n=[o,i])[0],o=n[1],l=!0);var c=i.getBBox(),u=o.getBBox(),h=null,d=null;return"trend"===this.timeBarType?(h=a-c.width<this.x+2?{x:a+r/2+2,textAlign:"left"}:{x:a-r/2-2,textAlign:"right"},d=s+u.width>this.x+this.width?{x:s-r/2-2,textAlign:"right"}:{x:s+r/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(h=i.attr("x")>c.width?{x:a,textAlign:"center"}:{x:a,textAlign:"left"},d=o.attr("x")>this.width-u.width?{x:s,textAlign:"right"}:{x:s,textAlign:"center"}),l?[d,h]:[h,d]},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var t=e,n=t.ticks,r=t.width,i=e.currentSpeed,o=r/n.length/(1e3*(10-i)/60),a=e.adjustOffsetRange(o/e.width);e.updateStartEnd(a),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())})):void 0},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(TIMELINE_END,null))},e.prototype.destory=function(){this.graph.off(VALUE_CHANGE,(function(){}));var e=this.group,t=e.find((function(e){return"minHandlerShape"===e.get("name")}));t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var n=e.find((function(e){return"maxHandlerShape"===e.get("name")}));n&&(n.off("maxHandlerShape-handler:mousedown"),n.off("maxHandlerShape-handler:touchstart"),n.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(PLAY_PAUSE_BTN,":click")),e.off("".concat(NEXT_STEP_BTN,":click")),e.off("".concat(PRE_STEP_BTN,":click")),e.off(TIMEBAR_CONFIG_CHANGE),e.destroy(),this.trendComponent&&this.trendComponent.destory()},e}();const TrendTimeBar$1=TrendTimeBar;var TimeBarTooltip=function(){function e(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.container,a=e.text,s=e.padding,l=void 0===s?[4,4,4,4]:s,c=e.className,u=void 0===c?"g6-component-timebar-tooltip":c,h=e.backgroundColor,d=void 0===h?"#000":h,f=e.textColor,p=void 0===f?"#fff":f,g=e.opacity,m=void 0===g?.8:g,v=e.fontSize,y=void 0===v?12:v;this.container=o,this.className=u,this.backgroundColor=d,this.textColor=p,this.x=n,this.y=i,this.text=a,this.padding=l,this.opacity=m,this.fontSize=y,this.render()}return e.prototype.render=function(){var e=this,t=e.className;e.x,e.y;var n=e.backgroundColor,r=e.textColor,i=e.text,o=e.padding,a=e.opacity,s=e.fontSize,l=e.container,c=createDom("<div class='".concat(t,"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: ").concat(a,'"></div>'));isString$1(l)&&(l=document.getElementById(l)),l.appendChild(c),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,modifyCSS(c,{visibility:"hidden",top:0,left:0});var u=createDom("\n      <div style='position: absolute; white-space:nowrap; background-color: ".concat(n,"; font-size: ").concat(s,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(r,"; padding: ").concat(o[0],"px ").concat(o[1],"px ").concat(o[2],"px ").concat(o[3],"px'></div>"));u.innerHTML=i,c.appendChild(u),e.backgroundDOM=u;var h=createDom("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(n,"'></div>"));c.appendChild(h),e.arrowDOM=h,e.container=c},e.prototype.show=function(e){var t=this,n=e.text,r=e.x;e.y,e.clientX,e.clientY,t.backgroundDOM.innerHTML=n;var i=t.backgroundDOM.offsetWidth,o=t.backgroundDOM.offsetHeight,a=t.arrowDOM.offsetWidth,s=t.arrowDOM.offsetHeight;modifyCSS(t.container,{top:"".concat(-o-s,"px"),left:"".concat(r,"px"),visibility:"visible"}),modifyCSS(t.backgroundDOM,{marginLeft:"".concat(-i/2,"px")}),modifyCSS(t.arrowDOM,{marginLeft:"".concat(-a/2,"px"),top:"".concat(o,"px")});var l=r-i/2,c=r+i/2;l<0?modifyCSS(t.backgroundDOM,{marginLeft:"".concat(-i/2-l,"px")}):c>t.parentWidth&&modifyCSS(t.backgroundDOM,{marginLeft:"".concat(-i/2-c+t.parentWidth+12,"px")})},e.prototype.hide=function(){modifyCSS(this.container,{top:0,left:0,visibility:"hidden"})},e}();const TimeBarTooltip$1=TimeBarTooltip;var __assign$4=globalThis&&globalThis.__assign||function(){return __assign$4=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$4.apply(this,arguments)},transform$1=transform$d,DEFAULT_SELECTEDTICK_STYLE={fill:"#5B8FF9"},DEFAULT_UNSELECTEDTICK_STYLE={fill:"#e6e8e9"},TimeBarSlice=function(){function e(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,n=e.canvas,r=e.group,i=e.width,o=e.height,a=e.padding,s=e.data,l=e.start,c=e.end,u=e.x,h=void 0===u?0:u,d=e.y,f=void 0===d?0:d,p=e.tickLabelFormatter,g=e.selectedTickStyle,m=void 0===g?DEFAULT_SELECTEDTICK_STYLE:g,v=e.unselectedTickStyle,y=void 0===v?DEFAULT_UNSELECTEDTICK_STYLE:v,b=e.tooltipBackgroundColor,x=e.tooltipFomatter,w=e.tickLabelStyle,_=e.controllerCfg,C=void 0===_?{speed:1}:_;this.graph=t,this.group=r,this.sliceGroup=r.addGroup({name:"slice-group"}),this.canvas=n,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=l,this.end=c,this.tickLabelFormatter=p,this.tickLabelStyle=w||{},this.selectedTickStyle=m,this.unselectedTickStyle=y,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.x=h,this.y=f,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.fontFamily="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return e.prototype.renderSlices=function(){var e=this,t=this,n=t.width,r=t.height,i=t.padding,o=t.data,a=t.start,s=t.end,l=t.tickLabelFormatter,c=t.selectedTickStyle,u=t.unselectedTickStyle,h=t.tickLabelStyle,d=n-2*i,f=r-(3*i+4+10)-2*i,p=o.length,g=(d-2*(p-1))/p;this.tickWidth=g;var m=this.sliceGroup,v=[],y=[],b=Math.round(p*a),x=Math.round(p*s);this.startTickRectId=b,this.endTickRectId=x;var w=h.rotate;delete h.rotate,o.forEach((function(t,r){var o=r>=b&&r<=x?c:u,a=m.addShape("rect",{attrs:__assign$4({x:i+r*(g+2),y:i,width:g,height:f},o),draggable:!0,name:"tick-rect-".concat(r)}),s=m.addShape("rect",{attrs:{x:i+r*g+2*(2*r-1)/2,y:i,width:0===r||r===p-1?g+1:g+2,height:f,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(r)});s.toFront();var d,_=a.getBBox(),C=(_.minX+_.maxX)/2;if(v.push({rect:a,pickRect:s,value:t.date,x:C,y:_.minY}),l?(d=l(t),!isString$1(d)&&d&&(d=t.date)):r%Math.round(p/10)==0&&(d=t.date),d){y.push(d);var $=_.maxY+2*i;m.addShape("line",{attrs:{stroke:"#BFBFBF",x1:C,y1:$,x2:C,y2:$+4},name:"tick-line"});var S=$+4+i,E=m.addShape("text",{attrs:__assign$4({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:C,y:S,textAlign:"center",text:d,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},h),capture:!1,name:"tick-label"}),A=E.getBBox();if(A.maxX>n?E.attr("textAlign","right"):A.minX<0&&E.attr("textAlign","left"),isNumber$1(w)&&10!==y.length){var M=transform$1([1,0,0,0,1,0,0,0,1],[["t",-C,-S],["r",w],["t",C-5,S+2]]);E.attr({textAlign:"left",matrix:M})}1===y.length?E.attr({textAlign:"left"}):10===y.length&&E.attr({textAlign:"right"})}})),this.tickRects=v;var _=this.group;this.currentSpeed=1,this.controllerBtnGroup=new ControllerBtn$1(__assign$4({group:_,x:this.x,y:this.y+r+5,width:n,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},e.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",(function(t){var n=t.target;if("rect"===n.get("type")&&n.get("name")){var r=parseInt(n.get("name").split("-")[2],10);if(!isNaN(r)){var i=e.tickRects,o=e.unselectedTickStyle;i.forEach((function(e){e.rect.attr(o)}));var a=e.selectedTickStyle;i[r].rect.attr(a),e.startTickRectId=r,e.endTickRectId=r;var s=r/i.length;e.graph.emit(VALUE_CHANGE,{value:[s,s]})}}})),t.on("dragstart",(function(t){var n=e.tickRects,r=e.unselectedTickStyle;n.forEach((function(e){e.rect.attr(r)}));var i=t.target,o=parseInt(i.get("name").split("-")[2],10),a=e.selectedTickStyle;n[o].rect.attr(a),e.startTickRectId=o;var s=o/n.length;e.graph.emit(VALUE_CHANGE,{value:[s,s]}),e.dragging=!0})),t.on("dragover",(function(t){if(e.dragging&&"rect"===t.target.get("type")){for(var n=parseInt(t.target.get("name").split("-")[2],10),r=e.startTickRectId,i=e.tickRects,o=e.selectedTickStyle,a=e.unselectedTickStyle,s=0;s<i.length;s++){var l=s>=r&&s<=n?o:a;i[s].rect.attr(l)}var c=i.length;e.endTickRectId=n;var u=r/c,h=n/c;e.graph.emit(VALUE_CHANGE,{value:[u,h]})}})),t.on("drop",(function(t){if(e.dragging&&(e.dragging=!1,"rect"===t.target.get("type"))){var n=e.startTickRectId,r=parseInt(t.target.get("name").split("-")[2],10);if(!(r<n)){var i=e.selectedTickStyle,o=e.tickRects;o[r].rect.attr(i),e.endTickRectId=r;var a=o.length,s=n/a,l=r/a;e.graph.emit(VALUE_CHANGE,{value:[s,l]})}}}));var n=this,r=n.tooltipBackgroundColor,i=n.tooltipFomatter,o=n.canvas,a=new TimeBarTooltip$1({container:o.get("container"),backgroundColor:r}),s=this.tickRects;s.forEach((function(e){var t=e.pickRect;t.on("mouseenter",(function(e){var t=e.target;if("rect"===t.get("type")){var n=parseInt(t.get("name").split("-")[2],10),r=o.getClientByPoint(s[n].x,s[n].y);a.show({x:s[n].x,y:s[n].y,clientX:r.x,clientY:r.y,text:i?i(s[n].value):s[n].value})}})),t.on("mouseleave",(function(e){a.hide()}))}));var l=this.group;l.on("".concat(PLAY_PAUSE_BTN,":click"),(function(){e.isPlay=!e.isPlay,e.changePlayStatus()})),l.on("".concat(NEXT_STEP_BTN,":click"),(function(){e.updateStartEnd(1)})),l.on("".concat(PRE_STEP_BTN,":click"),(function(){e.updateStartEnd(-1)})),l.on(TIMEBAR_CONFIG_CHANGE,(function(t){t.type;var n=t.speed;e.currentSpeed=n}))},e.prototype.changePlayStatus=function(e){void 0===e&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(TIMELINE_START,null)):this.playHandler&&("undefined"!=typeof window&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(TIMELINE_END,null))},e.prototype.startPlay=function(){var e=this;return"undefined"!=typeof window?window.requestAnimationFrame((function(){var t=e.currentSpeed;e.frameCount%(60/t)==0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())})):void 0},e.prototype.updateStartEnd=function(e){var t=this,n=this.tickRects,r=n.length,i=this.unselectedTickStyle,o=this.selectedTickStyle,a=t.endTickRectId;if(e>0?t.endTickRectId++:(n[t.endTickRectId].rect.attr(i),t.endTickRectId--),a!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var s=t.startTickRectId;s<=t.endTickRectId-1;s++)n[s].rect.attr(i);t.startTickRectId=t.endTickRectId}if(n[t.endTickRectId]){n[t.endTickRectId].rect.attr(o);var l=t.startTickRectId/r,c=t.endTickRectId/r;this.graph.emit(VALUE_CHANGE,{value:[l,c]})}},e.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach((function(e){var t=e.pickRect;t.off("mouseenter"),t.off("mouseleave")})),this.tickRects.length=0,e.off("".concat(PLAY_PAUSE_BTN,":click")),e.off("".concat(NEXT_STEP_BTN,":click")),e.off("".concat(PRE_STEP_BTN,":click")),e.off(TIMEBAR_CONFIG_CHANGE),this.sliceGroup.destroy()},e}();const TimeBarSlice$1=TimeBarSlice;var __extends$5=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$3.apply(this,arguments)},__rest$1=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},DEFAULT_SIMPLE_HEIGHT=4,DEFAULT_TREND_HEIGHT=26,TimeBar$1=function(e){function t(t){var n=e.call(this,t)||this;return n.afterrenderListener=function(e){return n.filterData({})},n.valueChangeListener=throttle((function(e){return n.filterData(e)}),200,{trailing:!0,leading:!0}),n.changeData=function(e){var t=n.get("graph");n.cacheGraphData=t.get("data"),n.filterData({})},n}return __extends$5(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{}}},t.prototype.initContainer=function(){var e,t,n=this.get("graph"),r=this._cfgs,i=r.width,o=r.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),l=this.get("graph").get("container");s?(isString$1(s)&&(s=document.getElementById(s)),e=s):modifyCSS(e=createDom("<div class='".concat(a,"'></div>")),{position:"relative"}),l.appendChild(e),this.set("timeBarContainer",e),t="SVG"===n.get("renderer")?new Canvas({container:e,width:i,height:o}):new Canvas$1({container:e,width:i,height:o}),this.get("containerCSS")&&modifyCSS(e,this.get("containerCSS")),this.set("canvas",t)},t.prototype.init=function(){this.initContainer();var e=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",e),this.renderTrend(),this.initEvent();var t="undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",t)},t.prototype.play=function(){this.togglePlay(!0)},t.prototype.pause=function(){this.togglePlay(!1)},t.prototype.togglePlay=function(e){var t=this.get("timebar");t&&(t.isPlay=!!e,t.changePlayStatus())},t.prototype.renderTrend=function(){var e=this,t=this._cfgs,n=t.width,r=t.x,i=t.y,o=t.padding,a=t.type,s=t.trend,l=t.slider,c=t.controllerCfg,u=t.textStyle,h=t.tick,d=t.backgroundStyle,f=t.foregroundStyle,p=s.data,g=__rest$1(s,["data"]),m=n-2*o,v="trend"===a?DEFAULT_TREND_HEIGHT:DEFAULT_SIMPLE_HEIGHT,y=this.get("graph"),b=this.get("timeBarGroup"),x=this.get("canvas"),w=null;if("trend"===a||"simple"===a){var _=this.get("getValue");w=new TrendTimeBar$1(__assign$3(__assign$3({graph:y,canvas:x,group:b,type:a,x:r+o,y:"trend"===a?i+o:i+o+15,width:m,height:v,padding:o,backgroundStyle:d,foregroundStyle:f,trendCfg:__assign$3(__assign$3({},g),{data:p.map((function(e){return(null==_?void 0:_(e))||e.value}))})},l),{tick:{ticks:p,tickLabelFormatter:h.tickLabelFormatter,tickLabelStyle:h.tickLabelStyle,tickLineStyle:h.tickLineStyle},handlerStyle:__assign$3(__assign$3({},l.handlerStyle),{height:l.height||v}),controllerCfg:c,textStyle:u}))}else"tick"===a&&(w=new TimeBarSlice$1(__assign$3({graph:y,canvas:x,group:b,x:r+o,y:i+o,width:n,height:42,padding:2,controllerCfg:c},h)));var C=function t(){var n=e.get("timebar");n.draggingHandler=!1,n.isPlay&&(n.isPlay=!1,n.currentHandler=n.maxHandlerShape,n.changePlayStatus()),document.removeEventListener("mouseup",t)};x.on("mousedown",(function(e){"maxHandlerShape-handler"!==e.target.get("name")&&"minHandlerShape-handler"!==e.target.get("name")&&e.target!==w.foregroundShape||document.addEventListener("mouseup",C)})),this.set("timebar",w)},t.prototype.filterData=function(e){var t,n=e.value;if(!n){n=[];var r=this._cfgs.type;r&&"trend"!==r&&"simple"!==r?"tick"===r&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end):(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end)}var i=null,o=this._cfgs.type;if("trend"===o||"simple"===o?i=this._cfgs.trend.data:"tick"===o&&(i=this._cfgs.tick.data),i&&0!==i.length){var a=this.get("rangeChange"),s=this.get("graph"),l=Math.round(i.length*n[0]),c=Math.round(i.length*n[1]);c=c>=i.length?i.length-1:c,l=l>=i.length?i.length-1:l;var u=null===(t=this._cfgs.tick)||void 0===t?void 0:t.tickLabelFormatter,h=u?u(i[l]):i[l].date,d=u?u(i[c]):i[c].date;if("tick"!==o)this.get("timebar").setText(h,d);if(a)a(s,h,d);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=s.get("data"));var f=this.get("filterItemTypes"),p=this.get("changeData"),g=this.get("getDate"),m=this.get("shouldIgnore"),v=i[l].date,y=i[c].date;if(p||void 0===p){var b=this.cacheGraphData.nodes,x=this.cacheGraphData.edges,w={},_={};s.getNodes().forEach((function(e){return w[e.getID()]=!0})),s.getEdges().forEach((function(e){return _[e.getID()]=!0})),f.includes("node")&&(b.forEach((function(e){var t=+((null==g?void 0:g(e))||e.date),n=t>=v&&t<=y||(null==m?void 0:m("node",e,{min:v,max:y})),r=w[e.id];r&&!n?(s.removeItem(e.id),w[e.id]=!1):!r&&n&&(s.addItem("node",e),w[e.id]=!0)})),null==x||x.forEach((function(e){var t=w[e.source]&&w[e.target]||(null==m?void 0:m("edge",e,{min:v,max:y})),n=!!s.findById(e.id);n&&!t?(s.removeItem(e.id),_[e.id]=!1):!n&&t?(s.addItem("edge",e),_[e.id]=!0):n||(_[e.id]=!1)}))),(this.get("filterEdge")||f.includes("edge"))&&(null==x||x.filter((function(e){var t=+((null==g?void 0:g(e))||e.date),n=t>=v&&t<=y||(null==m?void 0:m("edge",e,{min:v,max:y})),r=w[e.source]&&w[e.target],i=n&&r,o=_[e.id];o&&!i?(_[e.id]=!1,s.removeItem(e.id)):!o&&i&&(_[e.id]=!0,s.addItem("edge",e))})))}else f.includes("node")&&s.getNodes().forEach((function(e){var t=e.getModel();if(!(null==m?void 0:m("node",t,{min:v,max:y}))){var n=+((null==g?void 0:g(t))||t.date);n<v||n>y?s.hideItem(e):s.showItem(e)}})),(this.get("filterEdge")||f.includes("edge"))&&s.getEdges().forEach((function(e){var t=e.getModel();if(!(null==m?void 0:m("edge",t,{min:i[l].date,max:i[c].date}))){var n=+((null==g?void 0:g(t))||t.date);if(n<i[l].date||n>i[c].date)s.hideItem(e);else{var r=e.getSource().isVisible(),o=e.getTarget().isVisible();r&&o&&s.showItem(e)}}}))}}},t.prototype.initEvent=function(){var e=this.get("graph");e.on("afterchangedata",this.changeData),e.on("afterrender",this.afterrenderListener),e.on(VALUE_CHANGE,this.valueChangeListener)},t.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(VALUE_CHANGE,this.valueChangeListener);var n=this.get("timebar");n&&n.destory&&n.destory(),e.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var i=this.get("container");i||(i=this.get("graph").get("container")),isString$1(i)&&(i=document.getElementById(i)),i.removeChild(r)}},t}(PluginBase$1);const TimeBar$2=TimeBar$1;var __extends$4=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),applyMatrix=Util.applyMatrix;function getImgNaturalDimension(e,t){var n,r;if(e.naturalWidth)n=e.naturalWidth,r=e.naturalHeight;else{var i=new Image;i.src=e.src,i.onload=function(){t&&t(i.width,i.height)}}return[n,r]}var ImageMiniMap=function(e){function t(t){return e.call(this,t)||this}return __extends$4(t,e),t.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},t.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},t.prototype.disableRefresh=function(){this.set("refresh",!1)},t.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},t.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},t.prototype.initViewport=function(){var e=this,t=this._cfgs,n=t.graph;if(!this.destroyed){var r=this.get("container");isString$1(r)&&(r=document.getElementById(r));var i=createDom("<div class=".concat(t.viewportClassName,"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff;\n        cursor:move'\n      </div>")),o=0,a=0,s=!1,l=0,c=0,u=0,h=0,d=0,f=0;r.addEventListener("mousedown",(function(r){if(t.refresh=!1,r.target===i){var l=i.style;u=parseInt(l.width,10),h=parseInt(l.height,10);var c=e.get("width"),p=e.get("height");u>c||h>p||(f=n.getZoom(),d=e.get("ratio"),s=!0,o=r.clientX,a=r.clientY)}}),!1),r.addEventListener("mousemove",(function(t){if(s&&!isNil(t.clientX)&&!isNil(t.clientY)){var r=e.get("width"),p=e.get("height"),g=i.style;l=parseInt(g.left,10),c=parseInt(g.top,10),u=parseInt(g.width,10),h=parseInt(g.height,10);var m=o-t.clientX,v=a-t.clientY;l-m<0?m=l:l-m+u>=r&&(m=0),c-v<0?v=c:c-v+h>=p&&(v=0),c-=v,modifyCSS(i,{left:"".concat(l-=m,"px"),top:"".concat(c,"px")}),n.translate(m*f/d,v*f/d),o=t.clientX,a=t.clientY}}),!1),r.addEventListener("mouseleave",(function(){s=!1,t.refresh=!0}),!1),r.addEventListener("mouseup",(function(){s=!1,t.refresh=!0}),!1),this.set("viewport",i),r.appendChild(i)}},t.prototype.updateViewport=function(){if(!this.destroyed){var e=this.get("ratio"),t=this.get("width"),n=this.get("height"),r=this.get("graph"),i=r.get("width"),o=i/r.get("height"),a=r.getGroup(),s=a.getCanvasBBox(),l=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],c=[s.maxX-s.minX,s.maxY-s.minY],u={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(u.width=c[0],u.height=u.width/o):(u.height=c[1],u.width=u.height*o),u.minX=l[0]-u.width/2,u.minY=l[1]-u.height/2;var h=a.getMatrix();h||(h=[1,0,0,0,1,0,0,0,1]);var d=invert$4([1,0,0,0,1,0,0,0,1],h),f=applyMatrix({x:u.minX,y:u.minY},d),p=r.getCanvasByPoint(f.x,f.y),g=this.get("viewport");g||this.initViewport();var m=i/u.width,v=m*t,y=m*n,b=t*-p.x/u.width,x=n*-p.y/u.height,w=b+v,_=x+y;b<0&&(v+=b,b=0),w>t&&(v-=w-t),x<0&&(y+=x,x=0),_>n&&(y-=_-n),this.set("ratio",e),modifyCSS(g,{left:"".concat(b,"px"),top:"".concat(x,"px"),width:"".concat(v,"px"),height:"".concat(y,"px")})}},t.prototype.init=function(){this.initContainer()},t.prototype.initContainer=function(){var e=this,t=e.get("graph"),n=t.get("width"),r=t.get("height")/n,i=e.get("className"),o=e.get("container"),a=e.get("width"),s=e.get("height");a||s||(a=200),a?(s=r*a,e.set("height",s)):(a=1/r*s,e.set("width",a));var l=createDom("<div class='".concat(i,"' style='width: ").concat(a,"px; height: ").concat(s,"px; overflow: hidden; position: relative;'></div>"));isString$1(o)&&(o=document.getElementById(o)),o?o.appendChild(l):t.get("container").appendChild(l),e.set("container",l);var c=createDom('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(c);var u=createDom('<span style="display: table-cell; vertical-align: middle; "></span>');c.appendChild(u),e.set("containerDOM",c),e.set("containerSpan",u);var h=createDom('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));e.set("imgDOM",h),e.updateImgSize(),u.appendChild(h),e.updateCanvas()},t.prototype.updateImgSize=function(){var e=this,t=e.get("imgDOM"),n=e.get("width"),r=e.get("height");t.onload=function(){var e=getImgNaturalDimension(t);e[0]>e[1]?t.width=n:t.height=r}},t.prototype.updateCanvas=function(){if(this.get("refresh")){var e=this.get("graph");if(!e.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var t=this.get("width")/e.get("canvas").getCanvasBBox().width;this.set("ratio",t),this.updateViewport()}}},t.prototype.getViewport=function(){return this.get("viewport")},t.prototype.getContainer=function(){return this.get("container")},t.prototype.updateGraphImg=function(e){var t=this;t.get("imgDOM").remove(),t.set("graphImg",e);var n=createDom('<img alt="" src="'.concat(e,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));t.set("imgDOM",n),n.src=e,t.updateImgSize(),t.get("containerSpan").appendChild(n),t.updateCanvas()},t.prototype.destroy=function(){var e=this.get("container");e.parentNode.removeChild(e)},t}(PluginBase$1);const ImageMinimap$1=ImageMiniMap;var __extends$3=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$2=globalThis&&globalThis.__assign||function(){return __assign$2=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$2.apply(this,arguments)},distance$1=Util.distance,DELTA$1=.05,lensDelegateStyle={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},EdgeFilterLens$1=function(e){function t(t){return e.call(this,t)||this}return __extends$3(t,e),t.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:clone$9(lensDelegateStyle),showLabel:"edge",scaleRBy:"wheel"}},t.prototype.getEvents=function(){var e;switch(this.get("trigger")){case"click":e={click:"filter"};break;case"drag":e={click:"createDelegate"};break;default:e={mousemove:"filter"}}return e},t.prototype.init=function(){var e=this,t=e.get("showLabel"),n="node"===t||"both"===t,r="edge"===t||"both"===t;e.set("showNodeLabel",n),e.set("showEdgeLabel",r),e.get("shouldShow")||e.set("shouldShow",(function(){return!0}))},t.prototype.createDelegate=function(e){var t=this,n=t.get("delegate");n&&!n.destroyed||(t.filter(e),(n=t.get("delegate")).on("dragstart",(function(e){})),n.on("drag",(function(e){t.filter(e)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(e){t.scaleRByWheel(e)})))},t.prototype.scaleRByWheel=function(e){var t=this;if(e&&e.originalEvent){e.preventDefault&&e.preventDefault();var n,r=t.get("graph"),i=t.get("delegate");(i?{x:i.attr("x"),y:i.attr("y")}:void 0)||r.getPointByClient(e.clientX,e.clientY),n=e.originalEvent.wheelDelta<0?1-DELTA$1:1/(1-DELTA$1);var o=t.get("maxR"),a=t.get("minR"),s=t.get("r");(s>(o||r.get("height"))&&n>1||s<(a||.05*r.get("height"))&&n<1)&&(n=1),s*=n,t.set("r",s),t.filter(e)}},t.prototype.filter=function(e){var t=this,n=t.get("graph"),r=n.getNodes(),i={},o=t.get("r"),a=t.get("type"),s={x:e.x,y:e.y};t.updateDelegate(s,o);var l=t.get("shouldShow"),c=t.get("vShapes");c&&c.forEach((function(e){e.remove(),e.destroy()})),c=[],r.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y;distance$1({x:n,y:r},s)<o&&(i[t.id]=e)}));var u=n.getEdges(),h=[];u.forEach((function(e){var t=e.getModel(),n=t.source,r=t.target;l(t)&&("only-source"===a||"one"===a?i[n]&&!i[r]&&h.push(e):"only-target"===a||"one"===a?i[r]&&!i[n]&&h.push(e):"both"===a&&i[n]&&i[r]&&h.push(e))}));var d=t.get("showNodeLabel"),f=t.get("showEdgelabel"),p=n.get("group");h.forEach((function(e){e.get("group").get("children").forEach((function(e){var t=e.get("type"),n=p.addShape(t,{attrs:e.attr()});c.push(n),d&&"text"===t&&n.set("visible",!0)}))})),Object.keys(i).forEach((function(e){var t=i[e].get("group").clone();if(p.add(t),c.push(t),f)for(var n=t.get("children"),r=0;r<n.length;r++){var o=n[r];"text"===o.get("type")&&o.set("visible",!0)}})),t.set("vShapes",c)},t.prototype.updateParams=function(e){var t=this,n=e.r,r=e.trigger,i=e.minR,o=e.maxR,a=e.scaleRBy,s=e.showLabel,l=e.shouldShow;if(isNaN(e.r)||t.set("r",n),isNaN(o)||t.set("maxR",o),isNaN(i)||t.set("minR",i),"mousemove"!==r&&"click"!==r||t.set("trigger",r),"wheel"===a||"unset"===a){t.set("scaleRBy",a),t.get("delegate").remove(),t.get("delegate").destroy();var c=t.get("dPercentText");c&&(c.remove(),c.destroy())}"node"!==s&&"both"!==s||t.set("showNodeLabel",!0),"edge"!==s&&"both"!==s||t.set("showEdgeLabel",!0),l&&t.set("shouldShow",l)},t.prototype.updateDelegate=function(e,t){var n=this,r=n.get("graph"),i=n.get("delegate");if(!i||i.destroyed){var o=r.get("group"),a=n.get("delegateStyle")||lensDelegateStyle;i=o.addShape("circle",{attrs:__assign$2({r:t,x:e.x,y:e.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(e){n.scaleRByWheel(e)}))}else i.attr({x:e.x,y:e.y,r:t});n.set("delegate",i)},t.prototype.clear=function(){var e=this,t=e.get("vShapes");t&&t.forEach((function(e){e.remove(),e.destroy()})),t=[],e.set("vShapes",t);var n=e.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},t.prototype.destroy=function(){this.clear()},t}(PluginBase$1);const EdgeFilterLens$2=EdgeFilterLens$1;var __extends$2=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),pointLineDistance=Util.pointLineDistance,alignLineStyle={stroke:"#FA8C16",lineWidth:1},SnapLine$1=function(e){function t(t){return e.call(this,t)||this}return __extends$2(t,e),t.prototype.getDefaultCfgs=function(){return{line:alignLineStyle,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},t.prototype.init=function(){},t.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},t.prototype.onDragStart=function(){this.initBoxLine()},t.prototype.onDrag=function(e){var t=e.item,n=(t.get("delegateShape")||t).getBBox(),r=t.getModel(),i=r.x-n.x,o=r.y-n.y;this.show({x:n.minX+i,y:n.minY+o},{width:n.width,height:n.height})},t.prototype.onDragEnd=function(){this.destory()},t.prototype.initBoxLine=function(){var e=this._cfgs,t=e.horizontalLines,n=e.verticalLines,r=e.itemAlignType;this.get("graph").getNodes().forEach((function(e){var i=e.getBBox(),o=e.get("id");!0===r||"horizontal"===r?(t["".concat(o,"tltr")]=[i.minX,i.minY,i.maxX,i.minY,e],t["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,e],t["".concat(o,"blbr")]=[i.minX,i.maxY,i.maxX,i.maxY,e]):"center"===r&&(t["".concat(o,"lcrc")]=[i.minX,i.centerY,i.maxX,i.centerY,e]),!0===r||"vertical"===r?(n["".concat(o,"tlbl")]=[i.minX,i.minY,i.minX,i.maxY,e],n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,e],n["".concat(o,"trbr")]=[i.maxX,i.minY,i.maxX,i.maxY,e]):"center"===r&&(n["".concat(o,"tcbc")]=[i.centerX,i.minY,i.centerX,i.maxY,e])}))},t.prototype.show=function(e,t){var n=mix({},e);return this.itemAlign(e,t,n),e},t.prototype.itemAlign=function(e,t,n){var r=this,i=this._cfgs,o=i.horizontalLines,a=i.verticalLines,s=i.tolerance,l={x:n.x+t.width/2,y:n.y},c={x:n.x+t.width/2,y:n.y+t.height/2},u={x:n.x+t.width/2,y:n.y+t.height},h={x:n.x,y:n.y+t.height/2},d={x:n.x+t.width,y:n.y+t.height/2},f=[],p=[],g=null;if(this.clearAlignLine(),each(o,(function(e){e[4].isVisible&&(f.push(r.getLineDisObject(e,l)),f.push(r.getLineDisObject(e,c)),f.push(r.getLineDisObject(e,u)))})),each(a,(function(e){e[4].isVisible&&(p.push(r.getLineDisObject(e,h)),p.push(r.getLineDisObject(e,c)),p.push(r.getLineDisObject(e,d)))})),f.sort((function(e,t){return e.dis-t.dis})),p.sort((function(e,t){return e.dis-t.dis})),0!==f.length&&f[0].dis<s){e.y=f[0].line[1]-f[0].point.y+n.y,g={type:"item",horizontals:[f[0]]};for(var m=1;m<3;m++)f[0].dis===f[m].dis&&g.horizontals.push(f[m])}if(0!==p.length&&p[0].dis<s){e.x=p[0].line[0]-p[0].point.x+n.x,g?g.verticals=[p[0]]:g={type:"item",verticals:[p[0]]};for(m=1;m<3;m++)p[0].dis===p[m].dis&&g.verticals.push(p[m])}g&&(g.bbox=t,this.addAlignLine(g))},t.prototype.addAlignLine=function(e){var t=e.bbox,n=e.type,r=e.horizontals,i=e.verticals,o=this._cfgs,a=o.line,s=o.alignLines,l=this.get("graph").get("group");"item"===n&&(r&&each(r,(function(e){var n,r,i=e.line,o=e.point,c=(i[0]+i[2])/2;o.x<c?(n=o.x-t.width/2,r=Math.max(i[0],i[2])):(n=o.x+t.width/2,r=Math.min(i[0],i[2]));var u=mix({x1:n,y1:i[1],x2:r,y2:i[1]},a),h=l.addShape("line",{attrs:u,capture:!1});s.push(h)})),i&&each(i,(function(e){var n,r,i=e.line,o=e.point,c=(i[1]+i[3])/2;o.y<c?(n=o.y-t.height/2,r=Math.max(i[1],i[3])):(n=o.y+t.height/2,r=Math.min(i[1],i[3]));var u=mix({x1:i[0],y1:n,x2:i[0],y2:r},a),h=l.addShape("line",{attrs:u,capture:!1});s.push(h)})))},t.prototype.getLineDisObject=function(e,t){return{line:e,point:t,dis:pointLineDistance(e,t)}},t.prototype.getContainer=function(){return this.get("container")},t.prototype.clearAlignLine=function(){var e=this._cfgs.alignLines;each(e,(function(e){e.remove()})),e.length=0},t.prototype.destory=function(){var e=this._cfgs,t=e.horizontalLines,n=e.verticalLines;this.get("graph").getNodes().forEach((function(e){var r=e.get("id");delete t["".concat(r,"tltr")],delete t["".concat(r,"lcrc")],delete t["".concat(r,"blbr")],delete n["".concat(r,"tlbl")],delete n["".concat(r,"tcbc")],delete n["".concat(r,"trbr")]})),this.clearAlignLine()},t}(PluginBase$1);const SnapLine$2=SnapLine$1;var __extends$1=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign$1.apply(this,arguments)},ALLOW_EVENTS$9=["click","mouseenter"],Legend=function(e){function t(t){return e.call(this,t)||this}return __extends$1(t,e),t.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},t.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var e=this.get("filter")||{};e.multiple&&"mouseenter"===e.trigger&&this.set("multiple",!1);var t=this.get("align");if(!t){var n=this.get("position").split("-");n.includes("left")&&(t="left"),t=n.includes("right")?"right":"center",this.set("align",t)}var r=this.get("graph").get("container"),i=createDom("<div class='g6-legend-container' style=\"position: absolute;\"></div>");r.appendChild(i),this.set("container",i);var o=this.render();modifyCSS(i,this.getContainerPos(o)),this.bindEvents()},t.prototype.getContainerPos=function(e){void 0===e&&(e=[0,0]);var t=this.get("graph"),n=this.get("offsetX"),r=this.get("offsetY"),i=this.get("margin"),o=this.get("position").split("-"),a={top:0,right:1,bottom:2,left:3},s={left:(t.getWidth()-e[0])/2+0,top:(t.getHeight()-e[1])/2+0};return o.forEach((function(n){var r=i[a[n]],o=n;switch(n){case"top":case"left":r+=0;break;case"bottom":r=t.getHeight()-e[1]-r+0,o="top";break;default:r=t.getWidth()-e[0]-r+0,o="left"}s[o]=r})),s.top+=r+t.getContainer().offsetTop,s.left+=n+t.getContainer().offsetLeft,Object.keys(s).forEach((function(e){s[e]="".concat(s[e],"px")})),s},t.prototype.bindEvents=function(){var e=this,t=e.get("filter");if(t&&t.enable){var n=t.trigger||"click";ALLOW_EVENTS$9.includes(n)||(n="click");var r=e.get("legendCanvas");"mouseenter"===n?(r.on("node-container:mouseenter",(function(t){return e.filterData(t)})),r.on("node-container:mouseleave",(function(t){e.clearFilter(),e.clearActiveLegend()}))):(r.on("node-container:click",(function(t){return e.filterData(t)})),r.on("click",(function(t){t.target&&t.target.isCanvas&&t.target.isCanvas()&&(e.clearFilter(),e.clearActiveLegend())})))}},t.prototype.changeData=function(e){this.set("data",e);var t=this.render();modifyCSS(this.get("container"),this.getContainerPos(t))},t.prototype.activateLegend=function(e){var t=this.get("filter");(null==t?void 0:t.multiple)||this.clearActiveLegend();var n=e.get("parent");n.get("active")?(n.set("active",!1),this.findLegendItemsByState("active").length&&n.set("inactive",!0)):(n.set("inactive",!1),n.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach((function(e){e.set("inactive",!0)})):this.clearActiveLegend();var r=(null==t?void 0:t.legendStateStyles)||{},i=(null==r?void 0:r.inactive)||{opacity:.5,"text-shape":{opacity:.5}},o=i["text-shape"]||{};this.findLegendItemsByState("inactive").forEach((function(e){var t=e.get("children"),n=t[0],r=t[1];n.attr(__assign$1(__assign$1({},n.get("oriAttrs")),i)),r.attr(__assign$1(__assign$1({},r.get("oriAttrs")),o))}));var a=(null==r?void 0:r.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},s=a["text-shape"]||{};this.findLegendItemsByState("active").forEach((function(e){var t=e.get("children"),n=t[0],r=t[1];n.attr(__assign$1(__assign$1({},n.get("oriAttrs")),a)),r.attr(__assign$1(__assign$1({},r.get("oriAttrs")),s))}))},t.prototype.findLegendItemsByState=function(e,t,n){void 0===t&&(t="all"),void 0===n&&(n=!0);var r=this.get("legendCanvas").find((function(e){return"root"===e.get("name")})),i=r.find((function(e){return"node-group"===e.get("name")})),o=r.find((function(e){return"edge-group"===e.get("name")}));return"node"===t?i.get("children").filter((function(t){return!!t.get(e)===n})):"edge"===t?o.get("children").filter((function(t){return!!t.get(e)===n})):i.get("children").filter((function(t){return!!t.get(e)===n})).concat(o.get("children").filter((function(t){return!!t.get(e)===n})))},t.prototype.clearActiveLegend=function(){var e=this.get("legendCanvas").find((function(e){return"root"===e.get("name")})),t=[e.find((function(e){return"node-group"===e.get("name")})),e.find((function(e){return"edge-group"===e.get("name")}))];t.forEach((function(e){e.get("children").forEach((function(e){e.set("active",!1),e.set("inactive",!1);var t=e.get("children"),n=t[0],r=t[1];n.attr(n.get("oriAttrs")),r.attr(r.get("oriAttrs"))}))}))},t.prototype.filterData=function(e){var t=this.get("filter"),n=null==t?void 0:t.filterFunctions;if(t&&n){var r=this.get("legendCanvas"),i=this.get("graph"),o=t.graphActiveState||"active",a=t.graphInactiveState||"inactive",s=t.multiple;this.clearFilter(),s||this.clearActiveLegend(),this.activateLegend(e.target);var l=r.find((function(e){return"root"===e.get("name")})),c=l.find((function(e){return"node-group"===e.get("name")})),u=l.find((function(e){return"edge-group"===e.get("name")})),h=c.get("children").filter((function(e){return e.get("active")})),d=u.get("children").filter((function(e){return e.get("active")})),f=0,p=["getNodes","getEdges"];p.forEach((function(e){i[e]().forEach((function(t){var r=!1;("getNodes"===e?h:d).forEach((function(e){var i=n[e.get("id")];r=r||i(t.getModel())})),r?(i.setItemState(t,a,!1),i.setItemState(t,o,!0),f++):(i.setItemState(t,o,!1),i.setItemState(t,a,!0))}))})),f||p.forEach((function(e){i[e]().forEach((function(e){i.clearItemStates(e,[a])}))}))}},t.prototype.clearFilter=function(){var e=this.get("graph"),t=this.get("filter");if(t){var n=t.graphActiveState||"active",r=t.graphInactiveState||"inactive";e.getNodes().forEach((function(t){e.clearItemStates(t,[n,r])})),e.getEdges().forEach((function(t){e.clearItemStates(t,[n,r])}))}},t.prototype.render=function(){var e=this;this.processData();var t=this.get("legendCanvas");t?t.clear():t=new Canvas$1({container:this.get("container"),width:200,height:200});var n=t.addGroup({name:"root"}),r=n.addGroup({name:"node-group"}),i=n.addGroup({name:"edge-group"});this.set("legendCanvas",t);var o=this.get("itemsData"),a=[r,i];["nodes","edges"].forEach((function(t,n){o[t].forEach((function(r){var i,o,s=a[n].addGroup({id:r.id,name:"node-container"}),l=r.type,c=e.getShapeSize(r),u=c.width,h=c.height,d=c.r,f=e.getStyle(t.substr(0,4),r);switch(r.type){case"circle":default:o={r:d,x:0,y:0};break;case"rect":o={width:u,height:h,x:-u/2,y:-h/2};break;case"ellipse":o={rx:u,ry:h,x:0,y:0},l="ellipse";break;case"line":o={x1:-u/2,y1:0,x2:u/2,y2:0},l="line";break;case"quadratic":o={path:[["M",-u/2,0],["Q",0,u/2,u/2,0]]},l="path";break;case"cubic":o={path:[["M",-u/2,0],["C",-u/6,u/2,u/6,-u/2,u/2,0]]},l="path";break;case"diamond":o={path:[["M",0,-h],["L",u,0],["L",0,h],["L",-u,0],["Z"]]},l="path";break;case"triangle":o={path:[["M",-u,h],["L",0,-h],["L",u,h],["Z"]]},l="path";break;case"star":o={path:Util.getStarPath(3*d,1.2*d)},l="path"}var p=s.addShape(l,{attrs:__assign$1(__assign$1({},o),f),name:"".concat(r.type,"-node-keyShape"),oriAttrs:__assign$1({opacity:1},f)});if(r.label){var g=p.getBBox(),m=(null===(i=r.labelCfg)||void 0===i?void 0:i.style)||{},v=__assign$1({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},m);s.addShape("text",{attrs:__assign$1({x:g.maxX+4,y:0,text:r.label},v),className:"legend-label",name:"".concat(r.type,"-node-text"),oriAttrs:v})}}))}));var s,l=this.get("padding"),c=n.find((function(e){return"title-container"===e.get("name")})),u={height:0,maxY:0,width:0};if(this.get("title")){c||(c=n.addGroup({name:"title-container"}));var h={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:l[0]},d=this.get("titleConfig")||{},f=Object.assign(h,d.style||{});s=c.addShape("text",{attrs:__assign$1({text:this.get("title")},f)}),u=c.getCanvasBBox(),c.setMatrix([1,0,0,0,1,0,d.offsetX,d.offsetY,1])}this.layoutItems();var p=n.getCanvasBBox(),g=r.getCanvasBBox(),m=g.minX<0?Math.abs(g.minX)+l[3]:l[3],v=u.maxY<g.minY?Math.abs(u.maxY-g.minY)+l[0]:u.maxY+l[0],y=[1,0,0,0,1,0,m,v,1];r.setMatrix(y);var b=[(p=n.getCanvasBBox()).minX+p.width+l[1],p.minY+p.height+l[2]];if(s){d=__assign$1({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));u=c.getCanvasBBox();var x=c.getMatrix()||[1,0,0,0,1,0,0,0,1];"center"===d.position?x[6]=b[0]/2+d.offsetX:"right"===d.position?(x[6]=b[0]-l[3]+d.offsetX,s.attr({textAlign:"right"})):(x[6]=l[3]+d.offsetX,s.attr({textAlign:"left"})),c.setMatrix(x),u=c.getCanvasBBox(),y=[1,0,0,0,1,0,m=g.minX<0?Math.abs(g.minX)+l[3]:l[3],v=g.minY<u.maxY?Math.abs(u.maxY-g.minY)+l[0]:u.maxY+l[0],1],r.setMatrix(y);var w=[1,0,0,0,1,0,m,v,1];"vertical"===this.get("layout")?w[6]+=g.maxX+this.get("horiSep"):w[7]+=g.maxY+this.get("vertiSep"),i.setMatrix(w)}else{g=r.getCanvasBBox();var _=[1,0,0,0,1,0,0,0,1];"vertical"===this.get("layout")?_[6]+=y[6]+g.maxX+this.get("horiSep"):_[7]+=y[7]+g.maxY+this.get("vertiSep"),i.setMatrix(_)}p=n.getCanvasBBox(),g=r.getCanvasBBox(),y=r.getMatrix()||[1,0,0,0,1,0,0,0,1];var C=i.getMatrix()||[1,0,0,0,1,0,0,0,1],$=i.getCanvasBBox();b=[Math.max(g.width+y[6],$.width+C[6])+l[1],Math.max(g.height+y[7],$.height+C[7])+l[2]],t.changeSize(b[0],b[1]);var S=this.get("containerStyle"),E=n.getMatrix()||[1,0,0,0,1,0,0,0,1],A=Util.invertMatrix({x:0,y:0},E);return n.addShape("rect",{attrs:__assign$1({x:A.x+(S.lineWidth||1),y:A.y+(S.lineWidth||1),width:b[0]-2*(S.lineWidth||1),height:b[1]-2*(S.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},S),name:"legend-back-rect",capture:!1}).toBack(),b},t.prototype.layoutItems=function(){var e=this.get("legendCanvas"),t=this.get("horiSep"),n=this.get("vertiSep"),r=this.get("layout"),i=this.get("align"),o=[0,0],a=e.find((function(e){return"root"===e.get("name")})),s=a.find((function(e){return"node-group"===e.get("name")})),l=a.find((function(e){return"edge-group"===e.get("name")})),c={min:0,max:-1/0};s.get("children").forEach((function(e,i){0===i&&(c.min=o[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),l=a.getBBox(),u=l.width,h=(l.height,0),d=0;"vertical"===r?(h=o[1],d=o[0]+u/2,o[0]=d+s.height+n,s.maxX):(h=o[0]+u/2,d=o[1],o[0]=h+s.width+t,s.maxY),o[0]>c.max&&(c.max=o[0]),e.setMatrix([1,0,0,0,1,0,h,d,1])}));var u=c.max-c.min,h={min:0,max:-1/0},d=s.getCanvasBBox();o[0]=0,o[1]="vertical"===r?d.maxX+t:d.maxY+n,l.get("children").forEach((function(e,i){0===i&&(h.min=o[0]);var a=e.get("children")[0],s=e.getCanvasBBox(),l=a.getBBox(),c=l.width,u=l.height,d=0,f=0;"vertical"===r?(d=o[1],f=o[0],o[0]=f+s.height+n,e.setMatrix([1,0,0,0,1,0,0,f+u/2,1])):(d=o[0],f=o[1],o[0]=d+s.width+t,e.setMatrix([1,0,0,0,1,0,d+c/2,0,1])),o[0]>h.max&&(h.max=o[0])}));var f=h.max-h.min;if(i&&""!==i&&"left"!==i){var p=u-f,g="center"===i?Math.abs(p)/2:Math.abs(p);(p<0?s:l).get("children").forEach((function(e){var t=e.getMatrix()||[1,0,0,0,1,0,0,0,1];"vertical"===r?t[7]+=g:t[6]+=g,e.setMatrix(t)}))}},t.prototype.processData=function(){var e=this.get("data"),t={nodes:[],edges:[]};e.nodes&&(e.nodes.sort((function(e,t){return e.order-t.order})),e.nodes.forEach((function(e){var n,r,i,o,a,s=e.size||[(null===(n=e.style)||void 0===n?void 0:n.width)||(null===(r=e.style)||void 0===r?void 0:r.r)||8,(null===(i=e.style)||void 0===i?void 0:i.height)||(null===(o=e.style)||void 0===o?void 0:o.r)||8],l=(null===(a=e.labelCfg)||void 0===a?void 0:a.style)||{};t.nodes.push({id:e.id||uniqueId$3(),type:e.type||"circle",style:__assign$1({},e.style),order:e.order,label:e.label,itemType:"node",size:s,labelCfg:{position:"right",style:__assign$1({fontFamily:"Arial"},l)}})}))),e.edges&&(e.edges.sort((function(e,t){return e.order-t.order})),e.edges.forEach((function(e){var n,r,i=e.type||"line";"cubic-horizontal"===e.type&&(i="cubic");var o=(null===(n=e.labelCfg)||void 0===n?void 0:n.style)||{},a=e.size||[(null===(r=e.style)||void 0===r?void 0:r.width)||8,1];t.edges.push({id:e.id||uniqueId$3(),type:i,size:a,style:__assign$1({lineWidth:isArray$1(a)?a[1]:1},e.style),order:e.order,label:e.label,itemType:"edge",labelCfg:{position:"right",style:__assign$1({fontFamily:"Arial"},o)}})}))),this.set("itemsData",t)},t.prototype.getContainer=function(){return this.get("container")},t.prototype.formatArray=function(e){var t=this.get(e);if(isNumber$1(t))this.set(e,[t,t,t,t]);else if(isArray$1(t))switch(t.length){case 0:this.set(e,[0,0,0,0]);break;case 1:this.set(e,[t[0],t[0],t[0],t[0]]);break;case 2:this.set(e,[t[0],t[1],t[0],t[1]]);break;case 3:this.set(e,[t[0],t[1],t[2],t[1]])}return this.get(e)},t.prototype.getShapeSize=function(e){var t,n,r;return e.size&&(isArray$1(e.size)?(t=e.size[0],n=e.size[1]||e.size[0],r=e.size[0]/2):isNumber$1(e.size)&&(t=e.size,n=e.size,r=e.size/2)),e.style&&(e.style.width&&(t=e.style.width),e.style.height&&(n=e.style.height),e.style.r&&(r=e.style.r)),r||(r=5),t||(t=r),n||(n=r),{width:t,height:n,r:r}},t.prototype.getStyle=function(e,t){return __assign$1(__assign$1({},"node"===e?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1}),t.style||{})},t.prototype.destroy=function(){var e=this.get("legendCanvas");null==e||e.destroy();var t=this.get("graph").get("container"),n=this.get("container");t.removeChild(n)},t}(PluginBase$1);const Legend$1=Legend;var __extends=globalThis&&globalThis.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},__assign.apply(this,arguments)},__rest=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};"undefined"!=typeof document&&insertCss$1.exports("\n  .g6-annotation-container {\n    background-color: rgba(255, 255, 255, 0.3);\n    padding: 8px;\n  }\n  .g6-annotation-wrapper {\n    background-color: #fff;\n    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);\n  }\n  .g6-annotation-header-wapper {\n    height: fit-content;\n    width: 100%;\n    background-color: #5B8FF9;\n    display: inline-flex;\n    cursor: move;\n  }\n  .g6-annotation-title {\n    margin: 4px 40px 4px 8px;\n    cursor: text;\n    min-width: 32px;\n  }\n  .g6-annotation-collapse {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-expand {\n    margin: 4px;\n    cursor: pointer;\n  }\n  .g6-annotation-close {\n    margin: 4px 8px 4px 0;\n    cursor: pointer;\n  }\n  .g6-annotation-content {\n    padding: 8px;\n    width: fit-content;\n    cursor: text;\n    word-break: break-all;\n    min-width: 32px;\n  }\n  .g6-annotation-title-input-wrapper {\n    margin: 4px 40px 4px 8px;\n  }\n  .g6-annotation-content-input {\n    height: 100%;\n    word-break: break-all;\n  }\n  .g6-annotation-content-input-wrapper {\n    margin: 8px;\n    height: 100%;\n  }\n");var CANVAS_ANNOTATION_ID="canvas-annotation",Annotation$1=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},t.prototype.getEvents=function(){var e={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};if("click"===this.get("trigger"))e=__assign(__assign({},e),{"node:click":"showAnnotation","edge:click":"showAnnotation"});return e},t.prototype.getDOMContent=function(e){if(!this.destroyed){var t=e.collapsed,n=e.maxWidth,r=e.title,i=void 0===r?"":r,o=e.content,a=void 0===o?"":o,s=e.borderRadius,l=void 0===s?5:s,c=t?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",u=t?"":" <p class='g6-annotation-content'>".concat(a,"</p>"),h=t?"".concat(l,"px"):"".concat(l,"px ").concat(l,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(l,"px; max-width: ").concat(n,'px">\n        <div\n          class="g6-annotation-header-wapper"\n          style="border-radius: ').concat(h,";\"\n        >\n          <h4 class='g6-annotation-title'>").concat(i,"</h4>\n          ").concat(c,"\n          ").concat("<p class='g6-annotation-close'>x</p>","\n        </div>\n        ").concat(u,"\n      </div>")}},t.prototype.init=function(){var e=this;if(!e.destroyed){var t=e.get("graph").getContainer(),n=e.get("container");this.get("containerCfg")?(n=this.createContainer(),t.appendChild(n)):n=t,this.set("container",n);var r=t.getBoundingClientRect(),i=new Canvas$1({container:t,width:r.right-r.left,height:r.bottom-r.top});modifyCSS(i.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",debounce((function(){return e.resizeCanvas(e)}),100));var o=i.addGroup({id:"annotation-link-group"});e.set("linkGroup",o),e.set("canvas",i),e.get("getTitle")||e.set("getTitle",(function(e){var t,n=(null===(t=null==e?void 0:e.getModel)||void 0===t?void 0:t.call(e))||{},r=n.label,i=n.id;return r||i||"-"})),e.get("getContent")||e.set("getContent",(function(e){var t,n;if(!e)return"-";var r=(null===(t=e.getModel)||void 0===t?void 0:t.call(e))||{},i=r.label,o=r.id,a=null===(n=e.getType)||void 0===n?void 0:n.call(e),s=a?"".concat(a,": "):"";return"".concat(s).concat(i||o||"")}));var a=e.get("defaultData");a&&this.readData(a)}},t.prototype.createContainer=function(){var e=this;if(!this.destroyed){var t=this.get("containerCfg"),n=this.get("graph"),r=n.getContainer(),i=r.getBoundingClientRect(),o=i.left,a=i.right,s=i.top,l=i.bottom-s,c=a-o,u=t.position,h=void 0===u?"top":u,d=t.offsetX,f=void 0===d?0:d,p=t.offsetY,g=void 0===p?0:p,m=__rest(t,["position","offsetX","offsetY"]),v=t.height,y=void 0===v?"fit-content":v,b=t.width,x=void 0===b?n.getWidth():b;"100%"===y&&(y=l),"100%"===x&&(x=c);var w="unset",_="unset",C={};switch(h){case"right":w="".concat(l,"px"),(C={top:0,right:0}).right+=o+f,C.top+=s+g;break;case"bottom":_="".concat(c,"px"),(C={bottom:0,left:0}).left+=o+f,C.bottom+=s+g;break;case"top":_="".concat(c,"px");case"left":w="".concat(l,"px");default:(C={top:0,left:0}).left+=o+f,C.top+=s+g}Object.keys(C).forEach((function(e){C[e]="".concat(C[e],"px")}));var $=createDom("<div class='".concat(t.className," g6-annotation-container'></div>"));return modifyCSS($,__assign(__assign({position:"absolute",display:"top"===h||"bottom"===h?"inline-flex":"unset",width:isNumber$1(x)?"".concat(x,"px"):x,height:isNumber$1(y)?"".concat(y,"px"):y,maxHeight:w,maxWidth:_,overflow:"scroll"},C),m)),r.appendChild($),$.addEventListener("scroll",(function(t){e.updateLinks()})),$}},t.prototype.resizeCanvas=function(e){clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout((function(){if(e&&!e.destroyed){var t=e.get("container").getBoundingClientRect(),n=t.right-t.left,r=t.bottom-t.top;e.get("canvas").changeSize(n,r),e.updateOutsideCards(e)}}),250)},t.prototype.updateOutsideCards=function(e){var t=e||this,n=t.get("cardInfoMap")||{},r=t.get("graph"),i=r.getPointByCanvas(0,0),o=r.getPointByCanvas(r.getWidth(),r.getHeight()),a=r.getClientByPoint(i.x,i.y),s=a.x,l=a.y,c=r.getClientByPoint(o.x,o.y),u=c.x,h=c.y;Object.values(n).forEach((function(e){var t=e.card;if(t){var n=t.style,r=px2Num(n.left),i=px2Num(n.top),o=t.getBoundingClientRect(),a=o.width,c=o.height,d=r,f=i;r+a>u-s&&(d=u-s-a),r<0&&(d=0),i+c>h-l&&(f=h-l-c),i<0&&(f=0),modifyCSS(t,{left:"".concat(d,"px"),top:"".concat(f,"px")})}})),t.updateLinks()},t.prototype.showAnnotation=function(e){if(!this.destroyed){var t=e.item;this.toggleAnnotation(t)}},t.prototype.hideCards=function(){var e=this;if(!e.destroyed){var t=e.get("cardInfoMap")||{};Object.keys(t).forEach((function(t){e.hideCard(t)}))}},t.prototype.toggleAnnotation=function(e,t){var n,r;void 0===t&&(t={});var i=this;if(!i.destroyed){var o=i.get("cardInfoMap")||{},a=i.get("graph"),s=i.get("container"),l=i.get("containerCfg"),c=Object.assign({},i.get("cardCfg")||{},t),u=c.minHeight,h=c.minWidth,d=c.width,f=c.height,p=c.collapsed,g=void 0!==p&&p,m=c.x,v=c.y,y=c.title,b=c.content,x=c.maxTitleLength,w=c.defaultBegin,_=__rest(c,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),C=i.get("linkGroup"),$=this.get("rows")||[[]],S=null===(n=e.isCanvas)||void 0===n?void 0:n.call(e),E=S?CANVAS_ANNOTATION_ID:e.getID(),A=o[E]||{},M=A.card,k=A.link,T=A.x,P=A.y,O=A.title,N=A.content,I=this.get("getTitle"),D=this.get("getContent"),L=this.get("getContentPlaceholder")||function(){return""},R=this.get("getTitlePlaceHolder")||function(){return""},B=L(e),j=R(e),F=createDom(this.getDOMContent(__assign({itemId:E,collapsed:g,title:(null===(r=O||y||(null==I?void 0:I(e)))||void 0===r?void 0:r.substr(0,x))||j,content:N||b||(null==D?void 0:D(e))||B},_))),G=isNumber$1(u)?"".concat(u,"px"):u;modifyCSS(F,{minHeight:g?"unset":G,minWidth:isNumber$1(h)?"".concat(h,"px"):h,height:f,width:d});var V,z=!!M;if(z?(null==k||k.remove(!0),s.replaceChild(F,M)):s.appendChild(F),!l){if(V=s.getBoundingClientRect()||{},void 0!==m&&void 0!==v)T=m,P=v;else if(!z&&!S){var H=V.top,U=w||{},W=U.left,q=U.right,Y=void 0===q?16:q,X=U.top,K=void 0===X?8:X,Z=U.bottom,Q=Y,J=K;isNaN(W)||(Q=s.scrollWidth-W),isNaN(Z)||(J=s.scrollHeight-Z);var ee=isNumber$1(h)?h:100;T=s.scrollWidth-F.scrollWidth-($.length-1)*ee-Q;var te=$[$.length-1],ne=(te[te.length-1]||{}).bbox;P=(null==ne?void 0:ne.bottom)-H||J}modifyCSS(F,{position:"absolute",left:"".concat(T,"px"),top:"".concat(P,"px"),cusor:l?"unset":"move"})}this.bindListener(F,E);var re=F.getBoundingClientRect();if(!S){var ie=getPathItem2Card(e,re,a,this.get("canvas")),oe=this.get("linkStyle");k=C.addShape("path",{attrs:__assign({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:ie},oe)})}if(o[E]=__assign(__assign({},o[E]||{}),{id:E,collapsed:g,card:F,link:k,x:T,y:P,cardBBox:re,content:N||b,title:O||y,contentPlaceholder:B,titlePlaceholder:j,isCanvas:S}),i.set("cardInfoMap",o),l)this.updateCardPositionsInConatainer(),this.updateLinks();else{var ae=!isNaN(m)&&!isNaN(v);if(!z&&!S&&!ae){var se=V.bottom,le=void 0===se?0:se;H=V.top;$[$.length-1].push({id:E,bbox:re}),re.top>le-H-re.height-16&&$.push([]),this.set("rows",$)}}this.updateCardSize(E);var ce=this.get("onAnnotationChange");null==ce||ce(o[E],z?"update":"create")}},t.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var e=this.get("cardInfoMap");if(e){var t=this.get("container"),n=this.get("containerCfg").position,r=t.getBoundingClientRect().width,i=getComputedStyle(t),o=px2Num(i.paddingLeft)+px2Num(i.paddingRight);r-=o,Object.values(e).forEach((function(e){var t=e.card,i=t.getBoundingClientRect().width;switch(n){case"right":modifyCSS(t,{marginLeft:r?"".concat(r-i,"px"):"0px"});break;case"top":case"bottom":modifyCSS(t,{marginLeft:"8px"})}}))}}},t.prototype.handleExpandCollapseCard=function(e){if(!this.destroyed){var t=this.get("graph"),n=this.get("cardInfoMap");if(n){var r=n[e].collapsed,i=t.findById(e);if(i)"hide"!==this.get("cardCfg").collapseType||r?this.toggleAnnotation(i,{collapsed:!r}):this.hideCard(e),n[e]=__assign(__assign({},n[e]),{collapsed:!r})}}},t.prototype.hideCard=function(e){if(!this.destroyed){var t=this.get("cardInfoMap");if(t&&t[e]){var n=t[e],r=n.card,i=n.link;modifyCSS(r,{display:"none"}),null==i||i.hide(),this.get("onAnnotationChange")(t[e],"hide")}}},t.prototype.removeCard=function(e){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=t[e],r=n.card,i=n.link;this.get("container").removeChild(r),null==i||i.remove(!0),delete t[e],this.get("onAnnotationChange")(n,"remove")}}},t.prototype.bindListener=function(e,t){var n=this;if(!this.destroyed){e.addEventListener("mousemove",(function(e){var r;if("g6-annotation-collapse"===e.target.className?r="collapse":"g6-annotation-expand"===e.target.className?r="expand":"g6-annotation-close"===e.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseEnterIcon;(void 0===i?function(){}:i)(e,t,r)}})),e.addEventListener("mouseout",(function(e){var r;if("g6-annotation-collapse"===e.target.className?r="collapse":"g6-annotation-expand"===e.target.className?r="expand":"g6-annotation-close"===e.target.className&&(r="close"),r){var i=n.get("cardCfg").onMouseLeaveIcon;(void 0===i?function(){}:i)(e,t,r)}})),e.addEventListener("mouseenter",(function(e){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(t);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!0)}var s=r[t].link;if(s){var l=n.get("linkHighlightStyle")||{};s.attr(l)}}})),e.addEventListener("mouseleave",(function(e){var r=n.get("cardInfoMap");if(r){var i=n.get("graph"),o=i.findById(t);if(o){var a=n.get("itemHighlightState");i.setItemState(o,a,!1)}var s=r[t].link;if(s){var l=n.get("linkHighlightStyle")||{};Object.keys(l).forEach((function(e){s.attr(e,void 0),s.attr(e,void 0)}));var c=n.get("linkStyle");s.attr(c)}}})),e.addEventListener("click",(function(e){var r=(n.get("cardCfg")||{}).onClickIcon;if("g6-annotation-collapse"===e.target.className||"g6-annotation-expand"===e.target.className)"hide"===n.get("cardCfg").collapseType?n.hideCard(t):n.handleExpandCollapseCard(t),null==r||r(e,t,"g6-annotation-collapse"===e.target.className?"collapse":"expand");else if("g6-annotation-close"===e.target.className){"remove"===n.get("cardCfg").closeType?n.removeCard(t):n.hideCard(t),null==r||r(e,t,"close")}})),this.get("editable")&&e.addEventListener("dblclick",(function(e){var r=n.get("cardInfoMap"),i=(n.get("cardCfg")||{}).maxTitleLength,o=void 0===i?20:i;if(r){var a=e.target,s=a.className;if("g6-annotation-title"===s||"g6-annotation-content"===s){var l="g6-annotation-title"===s?a.getBoundingClientRect():a.parentNode.getBoundingClientRect(),c=l.width,u=l.height,h=getComputedStyle(a),d=createDom("<".concat("g6-annotation-title"===s?"input":"textarea",' class="').concat(s,'-input" type="textarea" style="width:').concat(c,"px; height: ").concat(u,'px; min-width: 16px;"/>')),f=createDom('<div class="'.concat(s,'-input-wrapper" style="width: ').concat(c,"px; height: ").concat(u,"px; min-width: 16px; margin-right: ").concat(h.marginRight,'" />'));f.appendChild(d),a.parentNode.replaceChild(f,a);var p=r[t],g=p.contentPlaceholder,m=p.titlePlaceholder,v=p.content,y=p.title,b=v;"g6-annotation-title"===s?(d.name="title",d.maxLength=o,b=y):d.name="content",b?(d.innerHTML=a.innerHTML,d.value=a.innerHTML):d.placeholder="g6-annotation-title"===s?m:g,d.focus(),d.addEventListener("blur",(function(e){d.value&&(a.innerHTML=d.value,p[d.name||"title"]=d.value),f.parentNode.replaceChild(a,f),n.updateCardSize(t);var r=n.get("onAnnotationChange");null==r||r(p,"update")}))}}}));var r=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];e.draggable=!0,e.addEventListener("dragstart",(function(t){var i=t.target.className;if(!r.includes(i)){var o=e.style;n.set("dragging",{card:e,x:t.clientX,y:t.clientY,left:px2Num(o.left),top:px2Num(o.top)})}})),e.addEventListener("drag",(function(e){e.preventDefault();var r=n.get("cardInfoMap");if(r){var i=e.clientX,o=e.clientY,a=n.get("dragging");if(!isNaN(i)&&!isNaN(o)&&a){var s=a.x,l=a.y,c=a.left,u=a.top,h=a.card,d=i-s,f=o-l;c+=d,u+=f;var p=n.get("graph"),g=p.getPointByCanvas(0,0),m=p.getPointByCanvas(p.getWidth(),p.getHeight()),v=p.getClientByPoint(g.x,g.y),y=v.x,b=v.y,x=p.getClientByPoint(m.x,m.y),w=x.x,_=x.y,C=h.getBoundingClientRect();(c>w-y-(C.right-C.left)&&d>0||c<0&&d<0)&&(c-=d),(u>_-b-(C.bottom-C.top)&&f>0||u<0&&f<0)&&(u-=f),modifyCSS(h,{left:"".concat(c,"px"),top:"".concat(u,"px"),visibility:"hidden"}),s=i,l=o;var $=(r[t]||{}).link;if($){var S=p.findById(t);$.attr("path",getPathItem2Card(S,C,p,n.get("canvas")))}n.set("dragging",{x:s,y:l,left:c,top:u,card:h})}}}));e.addEventListener("dragend",(function(e){var r=n.get("cardInfoMap");if(r){var i=n.get("dragging");if(i){var o=i.left,a=i.top,s=i.card;r[t].x=o,r[t].y=a,modifyCSS(s,{visibility:"visible"}),n.set("dragging",!1);var l=n.get("rows");null==l||l.forEach((function(e){for(var n=e.length-1;n>=0;n--)e[n].id===t&&e.splice(n,1)}));var c=n.get("onAnnotationChange");null==c||c(r[t],"update")}}}))}},t.prototype.updateCardSize=function(e){var t=this.get("cardInfoMap");if(t){var n=t[e].card,r=n.getBoundingClientRect().width,i=n.getElementsByClassName("g6-annotation-title")[0];if(i){var o=getComputedStyle(i),a=px2Num(o.marginLeft),s=i.getBoundingClientRect().width;modifyCSS(i,{marginRight:"".concat(r-a-24-16-s,"px")})}}},t.prototype.updateLink=function(e){var t=e.item;if(t){var n=this.get("cardInfoMap");if(n){var r=this.get("canvas"),i=this.get("graph"),o=n[t.getID()]||{},a=o.link,s=o.card;if(a){var l=getPathItem2Card(t,s.getBoundingClientRect(),i,r);a.attr("path",l)}}}},t.prototype.updateLinks=function(){var e=this;if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var n=this.get("graph");Object.values(t).forEach((function(t){var r=t.id,i=n.findById(r);e.updateLink({item:i})}))}}},t.prototype.onGraphDataChange=function(){var e=this,t=this.get("cardInfoMap");if(t){var n=this.get("graph");Object.values(t).forEach((function(t){var r=t.id,i=t.card,o=t.isCanvas;if(i&&!o&&"none"!==i.style.display){var a=n.findById(r);a&&a.isVisible()?e.toggleAnnotation(a):e.hideCard(r)}}))}},t.prototype.onGraphItemVisibilityChange=function(e){var t=e.item,n=e.visible;if(t&&!t.destroyed){var r=this.get("cardInfoMap");if(r){var i=t.getID();r[i]&&(n||this.hideCard(i))}}},t.prototype.saveData=function(e){void 0===e&&(e=!1);var t=this.get("cardInfoMap");if(t){var n=this.get("graph"),r=this.get("getTitle"),i=this.get("getContent"),o=[];return Object.values(t).forEach((function(t){var a=t.title,s=t.content,l=t.x,c=t.y,u=t.id,h=t.collapsed,d=t.card;if(!d||"none"!==d.style.display||e){var f=n.findById(u)||n.get("canvas");o.push({id:u,x:l,y:c,collapsed:h,title:a||(null==r?void 0:r(f)),content:s||(null==i?void 0:i(f)),visible:d&&"none"!==d.style.display})}})),o}},t.prototype.readData=function(e){var t=this,n=this.get("graph");e.forEach((function(e){var r=e.id,i=e.x,o=e.y,a=e.title,s=e.content,l=e.collapsed,c=e.visible,u=n.findById(r);if(u||r!==CANVAS_ANNOTATION_ID||(u=n.get("canvas")),!u){var h=t.get("cardInfoMap")||{};return h[r]=e,void t.set("cardInfoMap",h)}t.toggleAnnotation(u,{x:i,y:o,title:a,content:s,collapsed:l}),c||t.hideCard(r)}))},t.prototype.clear=function(){var e=this.get("cardInfoMap");if(e){var t=this.get("container");Object.values(e).forEach((function(e){var n=e.card,r=e.link;t.removeChild(n),null==r||r.remove(!0)})),this.set("cardInfoMap",{})}},t.prototype.destroy=function(){var e;this.clear(),null===(e=this.get("canvas"))||void 0===e||e.destroy();var t=this.get("graph");t&&!t.destroyed&&(this.get("containerCfg")&&t.getContainer().removeChild(this.get("container")),this.destroyed=!0)},t}(PluginBase$1);const Annotation$2=Annotation$1;var getPath=function(e,t){var n,r,i=1/0;Object.keys(e).forEach((function(o){var a=e[o];Object.keys(t).forEach((function(e){var o=t[e],s=a.x-o.x,l=a.y-o.y,c=s*s+l*l;i>c&&(i=c,n=a,r=o)}))}));var o=Util.getControlPoint(n,r,.5,20);return[["M",n.x,n.y],["Q",o.x,o.y,r.x,r.y]]},getPathItem2Card=function(e,t,n,r){var i,o;if("edge"===e.getType())o=[e.getKeyShape().getPoint(.5)];else{var a=null===(i=e.getKeyShape)||void 0===i?void 0:i.call(e).getBBox(),s=a.minX,l=a.minY,c=a.maxX,u=a.maxY,h=e.getModel(),d=h.x,f=h.y;o={left:{x:s+=d,y:((l+=f)+(u+=f))/2},right:{x:c+=d,y:(l+u)/2},top:{x:(s+c)/2,y:l},bottom:{x:(s+c)/2,y:u}}}Object.keys(o).forEach((function(e){var t=o[e],i=t.x,a=t.y,s=n.getClientByPoint(i,a);o[e]=r.getPointByClient(s.x,s.y)}));var p=t.top,g=void 0===p?0:p,m=t.left,v=void 0===m?0:m,y=t.right,b=void 0===y?0:y,x=t.bottom,w=void 0===x?0:x,_={left:r.getPointByClient(v,(g+w)/2),right:r.getPointByClient(b,(g+w)/2),top:r.getPointByClient((v+b)/2,g),bottom:r.getPointByClient((v+b)/2,w)};return getPath(o,_)},px2Num=function(e){return Number(e.replace(/\s+|px/gi,""))||0},Plugin={PluginBase:PluginBase$1,Menu:Menu$1,Grid:Grid$1,Minimap:Minimap,Bundling:Bundling$1,ToolBar:ToolBar$1,Tooltip:Tooltip$2,Fisheye:Fisheye$2,TimeBar:TimeBar$2,ImageMinimap:ImageMinimap$1,EdgeFilterLens:EdgeFilterLens$2,SnapLine:SnapLine$2,Legend:Legend$1,Annotation:Annotation$2};const Plugin$1=Plugin;registerNode("circle",{options:{size:BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=deepMix({},r,e.icon),a="".concat(this.type,"-keyShape"),s=t.addShape("circle",{attrs:i,className:a,name:a,draggable:!0});t.shapeMap[a]=s;var l=o.width,c=o.height,u=o.show,h=o.text;if(u){var d="".concat(this.type,"-icon");t.shapeMap[d]=h?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:d,name:d,draggable:!0}):t.addShape("image",{attrs:__assign$h({x:-l/2,y:-c/2},o),className:d,name:d,draggable:!0})}return this.drawLinkPoints(e,t),s},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints;if(n){var r=n||{},i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,c=r.r,u=__rest$2(r,["top","left","right","bottom","size","r"]),h=this.getSize(e)[0]/2;if(o){var d="link-point-left";t.shapeMap[d]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:-h,y:0,r:l/2||c||5}),className:d,name:d,isAnchorPoint:!0})}if(a){var f="link-point-right";t.shapeMap[f]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:h,y:0,r:l/2||c||5}),className:f,name:f,isAnchorPoint:!0})}if(i){var p="link-point-top";t.shapeMap[p]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:-h,r:l/2||c||5}),className:p,name:p,isAnchorPoint:!0})}if(s){var g="link-point-bottom";t.shapeMap[g]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:h,r:l/2||c||5}),className:g,name:g,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,n={stroke:e.color},r=deepMix({},t,n),i=this.getSize(e)[0]/2;return __assign$h({x:0,y:0,r:i},r)},update:function(e,t,n){var r=t.getContainer(),i=this.getSize(e),o=__assign$h({},e.style);void 0===e.style.stroke&&e.color&&(o.stroke=e.color),void 0!==e.style.r||isNaN(i[0])||(o.r=i[0]/2),this.updateShape(e,t,o,!0,n),this.updateLinkPoints(e,r)}},"single-node"),registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e),r=t.addShape("rect",{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=r,this.drawLinkPoints(e,t),r},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,c=r.r,u=__rest$2(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:-f/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:f/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getSize(e),r=t.width||n[0],i=t.height||n[1];return __assign$h({x:-r/2,y:-i/2,width:r,height:i},t)},update:function(e,t,n){var r=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),a=t.get("keyShape");e.size||(o[0]=a.attr("width")||i.width,o[1]=a.attr("height")||i.height);var s={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},l=mix({},i,a.attr(),s);l=mix(l,e.style),this.updateShape(e,t,l,!1,n),this.updateLinkPoints(e,r)}},"single-node"),registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var a=r.width,s=r.height,l=r.show,c=r.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:__assign$h({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,c=r.r,u=__rest$2(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0]/2,f=h[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:-d,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:d,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:-f,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:f,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getSize(e),r=n[0]/2,i=n[1]/2;return __assign$h({x:0,y:0,rx:r,ry:i},t)},update:function(e,t,n){var r=t.getContainer(),i=this.getOptions({}).style,o=this.getSize(e),a={stroke:e.color,rx:o[0]/2,ry:o[1]/2},s=mix({},i,t.get("keyShape").attr(),a);s=mix(s,e.style),this.updateShape(e,t,s,!0,n),this.updateLinkPoints(e,r)}},"single-node"),registerNode("diamond",{options:{size:[80,80],style:{stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,l=r.show,c=r.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:__assign$h({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,c=r.r,u=__rest$2(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:-f/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:f/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),n=t[0],r=t[1];return[["M",0,-r/2],["L",n/2,0],["L",0,r/2],["L",-n/2,0],["Z"]]},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getPath(e);return __assign$h({path:n},t)},update:function(e,t,n){var r=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=mix({},i,t.get("keyShape").attr(),a);s=mix(s,e.style),this.updateShape(e,t,s,!0,n),this.updateLinkPoints(e,r)}},"single-node"),registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var n=this.mergeStyle||this.getOptions(e),r=n.icon,i=void 0===r?{}:r,o=n.direction,a=this.getShapeStyle(e),s=e.direction||o,l=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=i.width,u=i.height,h=i.show,d=i.offset,f=i.text;if(h)if(f)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var p=-c/2,g=-u/2;"up"!==s&&"down"!==s||(g+=d),"left"!==s&&"right"!==s||(p+=d),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:__assign$h({x:p,y:g},i),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),l},drawLinkPoints:function(e,t){var n=this.mergeStyle||this.getOptions(e),r=n.linkPoints,i=void 0===r?{}:r,o=n.direction,a=e.direction||o,s=i.top,l=i.left,c=i.right,u=i.bottom,h=i.size,d=i.r,f=__rest$2(i,["top","left","right","bottom","size","r"]),p=this.getSize(e)[0];if(l){var g=null,m=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?g=[-v,m]:"down"===a?g=[-v,-m]:"left"===a&&(g=[-v,v-m]),g&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},f),{x:g[0],y:g[1],r:h/2||d||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var y=null;m=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?y=[v,m]:"down"===a?y=[v,-m]:"right"===a&&(y=[v,v-m]),y&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},f),{x:y[0],y:y[1],r:h/2||d||5}),className:"link-point-right",name:"link-point-right"}))}if(s){var b=null;m=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"up"===a?b=[v-m,-m]:"left"===a?b=[v,-m]:"right"===a&&(b=[-v,-m]),b&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},f),{x:b[0],y:b[1],r:h/2||d||5}),className:"link-point-top",name:"link-point-top"}))}if(u){var x=null;m=p*Math.sin(1/3*Math.PI),v=p*Math.sin(1/3*Math.PI);"down"===a?x=[-v+m,m]:"left"===a?x=[v,m]:"right"===a&&(x=[-v,m]),x&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},f),{x:x[0],y:x[1],r:h/2||d||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,n=e.direction||t,r=this.getSize(e)[0],i=r*Math.sin(1/3*Math.PI),o=r*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===n?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===n?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===n&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getPath(e);return __assign$h({path:n},t)},update:function(e,t,n){var r=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=mix({},i,t.get("keyShape").attr(),a);s=mix(s,e.style),this.updateShape(e,t,s,!0,n),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var n=this.getOptions({}),r=n.linkPoints,i=n.direction,o=e.direction||i,a=t.shapeMap["link-point-left"]||t.find((function(e){return"link-point-left"===e.get("className")})),s=t.shapeMap["link-point-right"]||t.find((function(e){return"link-point-right"===e.get("className")})),l=t.shapeMap["link-point-top"]||t.find((function(e){return"link-point-top"===e.get("className")})),c=t.shapeMap["link-point-bottom"]||t.find((function(e){return"link-point-bottom"===e.get("className")})),u=r,h=a||s||l||c;h&&(u=h.attr());var d=mix({},u,e.linkPoints),f=d.fill,p=d.stroke,g=d.lineWidth,m=d.size/2;m||(m=d.r);var v=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},y=v.left,b=v.right,x=v.top,w=v.bottom,_=this.getSize(e)[0],C={r:m,fill:f,stroke:p,lineWidth:g},$=null,S=_*Math.sin(1/3*Math.PI),E=_*Math.sin(1/3*Math.PI);"up"===o?$=[-E,S]:"down"===o?$=[-E,-S]:"left"===o&&($=[-E,E-S]),$&&(a?y||void 0===y?a.attr(__assign$h(__assign$h({},C),{x:$[0],y:$[1]})):(a.remove(),delete t.shapeMap["link-point-left"]):y&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},C),{x:$[0],y:$[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var A=null;"up"===o?A=[E,S]:"down"===o?A=[E,-S]:"right"===o&&(A=[E,E-S]),A&&(s?b||void 0===b?s.attr(__assign$h(__assign$h({},C),{x:A[0],y:A[1]})):(s.remove(),delete t.shapeMap["link-point-right"]):b&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},C),{x:A[0],y:A[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var M=null;"up"===o?M=[E-S,-S]:"left"===o?M=[E,-S]:"right"===o&&(M=[-E,-S]),M&&(l?x||void 0===x?l.attr(__assign$h(__assign$h({},C),{x:M[0],y:M[1]})):(l.remove(),delete t.shapeMap["link-point-top"]):x&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},C),{x:M[0],y:M[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var k=null;"down"===o?k=[-E+S,S]:"left"===o?k=[E,S]:"right"===o&&(k=[-E,S]),k&&(c?w||void 0===w?c.attr(__assign$h(__assign$h({},C),{x:k[0],y:k[1]})):(c.remove(),delete t.shapeMap["link-point-bottom"]):w&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},C),{x:k[0],y:k[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:BaseGlobal.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:BaseGlobal.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:BaseGlobal.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).preRect,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=this.getSize(e),a=o[0],s=o[1],l=t.addShape("rect",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=l;var c=r.show,u=__rest$2(r,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:__assign$h({x:-a/2,y:-s/2,height:s},u),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),l},drawLogoIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).logoIcon,r=void 0===n?{}:n,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,c=r.offset,u=r.text,h=__rest$2(r,["width","height","x","y","offset","text"]);t.shapeMap["rect-logo-icon"]=u?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.addShape("image",{attrs:__assign$h(__assign$h({},h),{x:s||-i/2+o+c,y:l||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).stateIcon,r=void 0===n?{}:n,i=this.getSize(e)[0];if(r.show){var o=r.width,a=r.height,s=r.x,l=r.y,c=r.offset,u=r.text,h=__rest$2(r,["width","height","x","y","offset","text"]);t.shapeMap["rect-state-icon"]=u?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},h),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.addShape("image",{attrs:__assign$h(__assign$h({},h),{x:s||i/2-o+c,y:l||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.bottom,l=r.size,c=r.r,u=__rest$2(r,["top","left","right","bottom","size","r"]),h=this.getSize(e),d=h[0],f=h[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:-d/2,y:0,r:l/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:d/2,y:0,r:l/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),i&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:-f/2,r:l/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},u),{x:0,y:f/2,r:l/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var n=this.getOptions(e),r=n.labelCfg,i=void 0===r?{}:r,o=n.logoIcon,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,c=this.getSize(e)[0],u=null,h=a.show,d=a.width,f=-c/2+i.offset;h&&(f=-c/2+d+i.offset);var p=i.style,g=l.style,m=l.paddingTop;return isString$1(e.description)?(u=t.addShape("text",{attrs:__assign$h(__assign$h({},p),{x:f,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=u,t.shapeMap["rect-description"]=t.addShape("text",{attrs:__assign$h(__assign$h({},g),{x:f,y:17+(m||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(u=t.addShape("text",{attrs:__assign$h(__assign$h({},p),{x:f,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=u),u},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getSize(e),r=t.width||n[0],i=t.height||n[1];return __assign$h({x:-r/2,y:-i/2,width:r,height:i},t)},update:function(e,t){var n=this.mergeStyle||this.getOptions(e),r=n.style,i=void 0===r?{}:r,o=n.labelCfg,a=void 0===o?{}:o,s=n.descriptionCfg,l=void 0===s?{}:s,c=this.getSize(e),u=c[0],h=c[1];t.get("keyShape").attr(__assign$h(__assign$h({},i),{x:-u/2,y:-h/2,width:u,height:h}));var d=t.getContainer(),f=d.shapeMap["rect-logo-icon"]||d.find((function(e){return"rect-logo-icon"===e.get("className")})),p=mix({},f?f.attr():{},e.logoIcon),g=p.width;void 0===g&&(g=this.options.logoIcon.width);var m=e.logoIcon?e.logoIcon.show:void 0,v=a.offset,y=-u/2+g+v;m||void 0===m||(y=-u/2+v);var b=d.shapeMap["node-label"]||d.find((function(e){return"node-label"===e.get("className")})),x=d.shapeMap["rect-description"]||d.find((function(e){return"rect-description"===e.get("className")}));if(e.label)if(b){var w=e.labelCfg?e.labelCfg.style:{},_=mix({},b.attr(),w);e.label&&(_.text=e.label),_.x=y,isString$1(e.description)&&(_.y=-5),x&&(x.resetMatrix(),x.attr({x:y})),b.resetMatrix(),b.attr(_)}else d.shapeMap["node-label"]=d.addShape("text",{attrs:__assign$h(__assign$h({},a.style),{x:y,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});if(isString$1(e.description)){var C=l.paddingTop;if(x){w=e.descriptionCfg?e.descriptionCfg.style:{};var $=mix({},x.attr(),w);isString$1(e.description)&&($.text=e.description),$.x=y,x.resetMatrix(),x.attr(__assign$h(__assign$h({},$),{y:17+(C||0)}))}else d.shapeMap["rect-description"]=d.addShape("text",{attrs:__assign$h(__assign$h({},l.style),{x:y,y:17+(C||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})}var S=d.shapeMap["pre-rect"]||d.find((function(e){return"pre-rect"===e.get("className")}));if(S&&!S.destroyed){var E=mix({},S.attr(),e.preRect);S.attr(__assign$h(__assign$h({},E),{x:-u/2,y:-h/2,height:h}))}if(f&&!f.destroyed)if(m||void 0===m){var A=p.width,M=p.height,k=p.x,T=p.y,P=p.offset,O=__rest$2(p,["width","height","x","y","offset"]);f.attr(__assign$h(__assign$h({},O),{x:k||-u/2+A+P,y:T||-M/2,width:A,height:M}))}else f.remove(),delete d.shapeMap["pre-rect"];else m&&this.drawLogoIcon(e,d);var N=d.shapeMap["rect-state-icon"]||d.find((function(e){return"rect-state-icon"===e.get("className")})),I=mix({},N?N.attr():{},e.stateIcon);if(N){I.show||void 0===I.show||(N.remove(),delete d.shapeMap["rect-state-icon"]);var D=I.width,L=(M=I.height,k=I.x,T=I.y,I.offset),R=__rest$2(I,["width","height","x","y","offset"]);N.attr(__assign$h(__assign$h({},R),{x:k||u/2-D+L,y:T||-M/2,width:D,height:M}))}else I.show&&this.drawStateIcon(e,d);this.updateLinkPoints(e,d)},getOptions:function(e,t){return"move"===t?e:deepMix({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),registerNode("star",{options:{size:60,style:{stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=t.addShape("path",{attrs:i,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var a=r.width,s=r.height,l=r.show,c=r.text;return l&&(t.shapeMap["".concat(this.type,"-icon")]=c?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:__assign$h({x:-a/2,y:-s/2},r),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).linkPoints,r=void 0===n?{}:n,i=r.top,o=r.left,a=r.right,s=r.leftBottom,l=r.rightBottom,c=r.size,u=r.r,h=__rest$2(r,["top","left","right","leftBottom","rightBottom","size","r"]),d=this.getSize(e)[0];if(a){var f=Math.cos(.1*Math.PI)*d,p=Math.sin(.1*Math.PI)*d;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},h),{x:f,y:-p,r:c/2||u||5}),className:"link-point-right",name:"link-point-right"})}if(i){f=Math.cos(.5*Math.PI)*d,p=Math.sin(.5*Math.PI)*d;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},h),{x:f,y:-p,r:c/2||u||5}),className:"link-point-top",name:"link-point-top"})}if(o){f=Math.cos(.9*Math.PI)*d,p=Math.sin(.9*Math.PI)*d;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},h),{x:f,y:-p,r:c/2||u||5}),className:"link-point-left",name:"link-point-left"})}if(s){f=Math.cos(1.3*Math.PI)*d,p=Math.sin(1.3*Math.PI)*d;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},h),{x:f,y:-p,r:c/2||u||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(l){f=Math.cos(1.7*Math.PI)*d,p=Math.sin(1.7*Math.PI)*d;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},h),{x:f,y:-p,r:c/2||u||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e)[0],n=3*t/8,r=e.innerR||n;return Util.getStarPath(t,r)},getShapeStyle:function(e){var t=mix({},(this.mergeStyle||this.getOptions(e)).style,{stroke:e.color}),n=this.getPath(e);return __assign$h({path:n},t)},update:function(e,t,n){var r=t.getContainer(),i=this.getOptions({}).style,o=this.getPath(e),a={stroke:e.color,path:o},s=mix({},i,t.get("keyShape").attr(),a);s=mix(s,e.style),this.updateShape(e,t,s,!0,n),this.updateLinkPoints(e,r)},updateLinkPoints:function(e,t){var n=this.getOptions({}).linkPoints,r=t.shapeMap["link-point-left"]||t.find((function(e){return"link-point-left"===e.get("className")})),i=t.shapeMap["link-point-right"]||t.find((function(e){return"link-point-right"===e.get("className")})),o=t.shapeMap["link-point-top"]||t.find((function(e){return"link-point-top"===e.get("className")})),a=t.shapeMap["link-point-left-bottom"]||t.find((function(e){return"link-point-left-bottom"===e.get("className")})),s=t.shapeMap["link-point-left-bottom"]||t.find((function(e){return"link-point-right-bottom"===e.get("className")})),l=n,c=r||i||o||a||s;c&&(l=c.attr());var u=mix({},l,e.linkPoints),h=u.fill,d=u.stroke,f=u.lineWidth,p=u.size/2;p||(p=u.r);var g=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},m=g.left,v=g.right,y=g.top,b=g.leftBottom,x=g.rightBottom,w=this.getSize(e)[0],_={r:p,fill:h,stroke:d,lineWidth:f},C=Math.cos(.1*Math.PI)*w,$=Math.sin(.1*Math.PI)*w;i?v||void 0===v?i.attr(__assign$h(__assign$h({},_),{x:C,y:-$})):(i.remove(),delete t.shapeMap["link-point-right"]):v&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},_),{x:C,y:-$}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),C=Math.cos(.5*Math.PI)*w,$=Math.sin(.5*Math.PI)*w,o?y||void 0===y?o.attr(__assign$h(__assign$h({},_),{x:C,y:-$})):(o.remove(),delete t.shapeMap["link-point-top"]):y&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},_),{x:C,y:-$}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),C=Math.cos(.9*Math.PI)*w,$=Math.sin(.9*Math.PI)*w,r?m||void 0===m?r.attr(__assign$h(__assign$h({},_),{x:C,y:-$})):(r.remove(),delete t.shapeMap["link-point-left"]):m&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},_),{x:C,y:-$}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),C=Math.cos(1.3*Math.PI)*w,$=Math.sin(1.3*Math.PI)*w,a?b||void 0===b?a.attr(__assign$h(__assign$h({},_),{x:C,y:-$})):(a.remove(),delete t.shapeMap["link-point-left-bottom"]):b&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},_),{x:C,y:-$}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),C=Math.cos(1.7*Math.PI)*w,$=Math.sin(1.7*Math.PI)*w,s?x||void 0===x?s.attr(__assign$h(__assign$h({},_),{x:C,y:-$})):(s.remove(),delete t.shapeMap["link-point-right-bottom"]):x&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:__assign$h(__assign$h({},_),{x:C,y:-$}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var defaultSubjectColors=Util.defaultSubjectColors,FAN_NAME_PREFIX="fan-shape-";registerNode("donut",{options:{size:BaseGlobal.defaultNode.size,style:{x:0,y:0,stroke:BaseGlobal.defaultNode.style.stroke,fill:BaseGlobal.defaultNode.style.fill,lineWidth:BaseGlobal.defaultNode.style.lineWidth},labelCfg:{style:{fill:BaseGlobal.nodeLabel.style.fill,fontSize:BaseGlobal.nodeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:BaseGlobal.defaultNode.linkPoints.size,lineWidth:BaseGlobal.defaultNode.linkPoints.lineWidth,fill:BaseGlobal.defaultNode.linkPoints.fill,stroke:BaseGlobal.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:__assign$h({},BaseGlobal.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var n=(this.mergeStyle||this.getOptions(e)).icon,r=void 0===n?{}:n,i=this.getShapeStyle(e),o=deepMix({},r,e.icon),a=t.addShape("circle",{attrs:i,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=a;var s=o.width,l=o.height,c=o.show,u=o.text;return c&&(t.shapeMap["".concat(this.type,"-icon")]=u?t.addShape("text",{attrs:__assign$h({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.addShape("image",{attrs:__assign$h({x:-s/2,y:-l/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),drawFans(e,t,a),this.drawLinkPoints(e,t),a},updateShape:function(e,t,n,r,i){var o=t.get("keyShape");o.attr(__assign$h({},n)),updateFans(e,t,o),this.updateLabel(e,t,i),r&&this.updateIcon(e,t)}},"circle");var drawFans=function(e,t,n){var r=e.donutAttrs,i=void 0===r?{}:r,o=e.donutColorMap,a=void 0===o?{}:o,s=Object.keys(i).length;if(i&&s>1){var l=getDonutConfig(i,a),c=l.configs,u=l.totalValue;if(u){var h=getDonutSize(n),d=h.lineWidth,f=h.arcR,p=[f,0],g=0;if(1===s)return void drawFan(t,{arcR:f,arcBegin:p,beginAngle:g,config:c[0],fanIndex:0,lineWidth:d,totalValue:u,drawWhole:!0});for(var m=0;m<c.length;m++){var v=drawFan(t,{arcR:f,arcBegin:p,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:u});if(v.shouldEnd)return;p=v.arcBegin,g=v.beginAngle}}}},drawFan=function(e,t){var n,r,i,o=t.arcR,a=t.arcBegin,s=t.beginAngle,l=t.config,c=t.fanIndex,u=t.lineWidth,h=t.totalValue,d=t.drawWhole,f=void 0!==d&&d,p=t.updateShape,g=void 0===p?void 0:p,m=l.value/h;if(m<.001)return{beginAngle:s,arcBegin:a,shape:void 0,shouldEnd:!1};if(f||m>.999)n=[o,1e-4],i=!0;else{var v=m*Math.PI*2;r=s+v,n=[o*Math.cos(r),-o*Math.sin(r)],i=v>Math.PI?1:0}var y={path:[["M",a[0],a[1]],["A",o,o,0,i,0,n[0],n[1]],["L",n[0],n[1]]],stroke:l.color||(null==g?void 0:g.attr("stroke"))||defaultSubjectColors[c%defaultSubjectColors.length],lineWidth:u};return g?g.attr(y):e.shapeMap["".concat(FAN_NAME_PREFIX).concat(c)]=e.addShape("path",{attrs:y,name:"".concat(FAN_NAME_PREFIX).concat(c),draggable:!0}),{beginAngle:r,arcBegin:n,shape:e.shapeMap["".concat(FAN_NAME_PREFIX).concat(c)],shouldEnd:f||m>.999}},updateFans=function(e,t,n){var r=e.donutAttrs,i=e.donutColorMap,o=void 0===i?{}:i,a={},s=t.getContainer();if(r){var l=getDonutConfig(r,o),c=l.configs,u=l.totalValue;if(u)for(var h=getDonutSize(n),d=h.lineWidth,f=h.arcR,p=[f,0],g=0,m=0;m<c.length;m++){var v="".concat(FAN_NAME_PREFIX).concat(m),y=drawFan(s,{arcR:f,arcBegin:p,beginAngle:g,config:c[m],fanIndex:m,lineWidth:d,totalValue:u,drawWhole:1===c.length,updateShape:s.shapeMap[v]});if(y.shape&&(a[v]=!0),y.shouldEnd)break;p=y.arcBegin,g=y.beginAngle}}Object.keys(s.shapeMap).filter((function(e){return e.includes(FAN_NAME_PREFIX)})).forEach((function(e){a[e]||(s.shapeMap[e].remove(!0),delete s.shapeMap[e])}))},getDonutConfig=function(e,t){var n=0,r=[];return Object.keys(e).forEach((function(i){var o=+e[i];isNaN(o)||(r.push({key:i,value:o,color:t[i]}),n+=o)})),{totalValue:n,configs:r}},getDonutSize=function(e){var t=e.attr("r"),n=.6*t;return{lineWidth:t-n,arcR:(t+n)/2}},getBBoxFromPoint=function(e){var t=e.x,n=e.y;return{x:t,y:n,centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}},getBBoxFromPoints=function(e){void 0===e&&(e=[]);var t=[],n=[];e.forEach((function(e){t.push(e.x),n.push(e.y)}));var r=Math.min.apply(Math,t),i=Math.max.apply(Math,t),o=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:r,minY:o,height:a-o,width:i-r}},filterConnectPoints=function(e){for(var t=[],n={},r=e.length-1;r>=0;r--){var i=e[r];i.id="".concat(i.x,"|||").concat(i.y),n[i.id]||(n[i.id]=i,t.push(i))}return t},simplifyPolyline=function(e){return filterConnectPoints(e)},getExpandedBBox=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},isHorizontalPort=function(e,t){var n=Math.abs(e.x-t.centerX),r=Math.abs(e.y-t.centerY);return 0===n&&0===r?0:n/t.width>r/t.height},getExpandedBBoxPoint=function(e,t,n){var r=isHorizontalPort(t,e);if(0===r){var i=e.centerX,o=e.centerY;return n.y<t.y?o=e.minY:n.x>t.x?i=e.maxX:n.x<t.x?i=e.minX:n.x===t.x&&(o=e.maxY),{x:i,y:o}}return r?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},mergeBBox=function(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),i=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(n+i)/2,centerY:(r+o)/2,minX:n,minY:r,maxX:i,maxY:o,height:o-r,width:i-n}},getPointsFromBBox=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},isPointOutsideBBox=function(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY},getBBoxXCrossPoints=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},getBBoxYCrossPoints=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},getBBoxCrossPointsByPoint=function(e,t){return getBBoxXCrossPoints(e,t.x).concat(getBBoxYCrossPoints(e,t.y))},distance=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},_costByPoints=function(e,t){var n=0;return t.forEach((function(t){t&&(e.x===t.x&&(n+=-2),e.y===t.y&&(n+=-2))})),n},heuristicCostEstimate=function(e,t,n,r,i){return distance(e,t)+distance(e,n)+_costByPoints(e,[t,n,r,i])},reconstructPath=function e(t,n,r,i,o){void 0===o&&(o=0),t.unshift(n[i]),r[i]&&r[i]!==i&&o<=100&&e(t,n,r,r[i],o+1)},isSegmentsIntersected=function(e,t,n,r){var i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,l=n.x-t.x,c=n.y-t.y,u=r.x-t.x,h=r.y-t.y;return(i*s-o*a)*(l*h-c*u)<=0&&(i*c-o*l)*(a*h-s*u)<=0},isSegmentCrossingBBox=function(e,t,n){if(n.width||n.height){var r=getPointsFromBBox(n),i=r[0],o=r[1],a=r[2],s=r[3];return isSegmentsIntersected(e,t,i,o)||isSegmentsIntersected(e,t,i,s)||isSegmentsIntersected(e,t,o,a)||isSegmentsIntersected(e,t,a,s)}return!1},getNeighborPoints=function(e,t,n,r){var i=[];return e.forEach((function(e){if(e!==t&&(e.x===t.x||e.y===t.y)){if(isSegmentCrossingBBox(e,t,n)||isSegmentCrossingBBox(e,t,r))return;i.push(e)}})),filterConnectPoints(i)},pathFinder$1=function(e,t,n,r,i,o,a){var s,l=[],c=((s={})[t.id]=t,s),u={},h={},d={};h[t.id]=0,d[t.id]=heuristicCostEstimate(t,n,t);var f=new SortedArray;f.add({id:t.id,value:d[t.id]});var p,g={};for(e.forEach((function(e){g[e.id]=e}));Object.keys(c).length;){var m=f.minId(!1);if(!m)break;if((p=c[m])===n){var v=[];return reconstructPath(v,g,u,n.id),v}delete c[p.id],f.remove(p.id),l.push(p);var y=getNeighborPoints(e,p,r,i);y.forEach((function(e){if(-1===l.indexOf(e)){var r=e.id;c[r]||(c[r]=e);var i=d[p.id]+distance(p,e);h[r]&&i>=h[r]||(u[r]=p.id,h[r]=i,d[r]=h[r]+heuristicCostEstimate(e,n,t,o,a)),f.add({id:r,value:d[r]})}}))}return[t,n]},isBending=function(e,t,n){return!(e.x===t.x&&t.x===n.x||e.y===t.y&&t.y===n.y)},getBorderRadiusPoints=function(e,t,n,r){var i=distance(e,t),o=distance(n,t);return i<r&&(r=i),o<r&&(r=o),[{x:t.x-r/i*(t.x-e.x),y:t.y-r/i*(t.y-e.y)},{x:t.x-r/o*(t.x-n.x),y:t.y-r/o*(t.y-n.y)}]},getPathWithBorderRadiusByPolyline=function(e,t){var n=[],r=e[0];return n.push("M".concat(r.x," ").concat(r.y)),e.forEach((function(r,i){var o=e[i+1],a=e[i+2];if(o&&a)if(isBending(r,o,a)){var s=getBorderRadiusPoints(r,o,a,t),l=s[0],c=s[1];n.push("L".concat(l.x," ").concat(l.y)),n.push("Q".concat(o.x," ").concat(o.y," ").concat(c.x," ").concat(c.y)),n.push("L".concat(c.x," ").concat(c.y))}else n.push("L".concat(o.x," ").concat(o.y));else o&&n.push("L".concat(o.x," ").concat(o.y))})),n.join("")},getPolylinePoints=function(e,t,n,r,i){var o,a;if(n&&n.getType())if("combo"===n.getType()){var s=n.getKeyShape().getBBox();if(s){var l=n.getModel(),c=l.x,u=l.y;(o={x:c,y:u,width:s.width,height:s.height,minX:s.minX+c,maxX:s.maxX+c,minY:s.minY+u,maxY:s.maxY+u}).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=getBBoxFromPoint(e)}else o=n&&n.getBBox();else o=getBBoxFromPoint(e);if(r&&r.getType())if("combo"===r.getType()){var h=r.getKeyShape().getBBox();if(h){var d=r.getModel(),f=d.x,p=d.y;(a={x:f,y:p,width:h.width,height:h.height,minX:h.minX+f,maxX:h.maxX+f,minY:h.minY+p,maxY:h.maxY+p}).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=getBBoxFromPoint(t)}else a=r&&r.getBBox();else a=getBBoxFromPoint(t);var g=getExpandedBBox(o,i),m=getExpandedBBox(a,i),v=getExpandedBBoxPoint(g,e,t),y=getExpandedBBoxPoint(m,t,e),b=getBBoxFromPoints([v,y]),x=mergeBBox(g,b),w=mergeBBox(m,b),_=[];_=_.concat(getPointsFromBBox(x)).concat(getPointsFromBBox(w));var C={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[b,x,w].forEach((function(e){_=_.concat(getBBoxCrossPointsByPoint(e,C).filter((function(e){return isPointOutsideBBox(e,g)&&isPointOutsideBBox(e,m)})))})),[{x:v.x,y:y.y},{x:y.x,y:v.y}].forEach((function(e){isPointOutsideBBox(e,g)&&isPointOutsideBBox(e,m)&&_.push(e)})),_.unshift(v),_.push(y),_=filterConnectPoints(_);var $=pathFinder$1(_,v,y,o,a,e,t);return $.unshift(e),$.push(t),simplifyPolyline($)},removeRedundantPoint=function(e){if(!(null==e?void 0:e.length))return e;for(var t=e[e.length-1],n={x:t.x,y:t.y},r=[t],i=[t],o=e.length-2;o>=0;o--){var a,s=e[o];if(s.x===n.x?r.push(s):(r=[s],n.x=s.x),s.y===n.y?i.push(s):(i=[s],n.y=s.y),r.length>2)(a=e.indexOf(r[1]))>-1&&e.splice(a,1);else if(i.length>2)(a=e.indexOf(i[1]))>-1&&e.splice(a,1)}return e},SortedArray=function(){function e(){this.arr=[],this.map={},this.arr=[],this.map={}}return e.prototype._innerAdd=function(e,t){for(var n=[0,t-1];n[1]-n[0]>1;){var r=Math.floor((n[0]+n[1])/2);if(this.arr[r].value>e.value)n[1]=r;else{if(!(this.arr[r].value<e.value))return this.arr.splice(r,0,e),void(this.map[e.id]=!0);n[0]=r}}this.arr.splice(n[1],0,e),this.map[e.id]=!0},e.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;return t?this.arr[t-1].value<e.value?(this.arr.push(e),void(this.map[e.id]=!0)):void this._innerAdd(e,t):(this.arr.push(e),void(this.map[e.id]=!0))},e.prototype.remove=function(e){this.map[e]&&delete this.map[e]},e.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},e.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},e.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},e}(),manhattanDist=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},simplePolyline=function(e,t,n,r,i){return simplifyPolyline(getPolylinePoints(e,t,n,r,i.offset))},defaultCfg={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:manhattanDist,fallbackRoute:simplePolyline},pos2GridIx=function(e,t){var n=Math.round(Math.abs(e/t));return n<0?0:(e<0?-1:1)*n},getObstacleMap=function(e,t,n){var r={};return e.forEach((function(e){if(e)for(var i=getExpandedBBox(e.getBBox(),n),o=pos2GridIx(i.minX,t);o<=pos2GridIx(i.maxX,t);o+=1)for(var a=pos2GridIx(i.minY,t);a<=pos2GridIx(i.maxY,t);a+=1)r["".concat(o,"|||").concat(a)]=!0})),r},getDirectionAngle=function(e,t){var n=t.x-e.x,r=t.y-e.y;return n||r?Math.atan2(r,n):0},getAngleDiff=function(e,t){var n=Math.abs(e-t);return n>Math.PI?2*Math.PI-n:n},estimateCost=function(e,t,n){for(var r=1/0,i=0,o=t.length;i<o;i++){var a=n(e,t[i]);a<r&&(r=a)}return r},getBoxPoints=function(e,t,n,r,i){var o=[];if(!n)return[e];var a=i.directions,s=i.offset,l=n.getBBox(),c=t.x>l.minX&&t.x<l.maxX&&t.y>l.minY&&t.y<l.maxY,u=getExpandedBBox(l,s);for(var h in u)u[h]=pos2GridIx(u[h],i.gridSize);if(c){for(var d=0,f=a;d<f.length;d++){var p=f[d],g=[[{x:u.minX,y:u.minY},{x:u.maxX,y:u.minY}],[{x:u.minX,y:u.minY},{x:u.minX,y:u.maxY}],[{x:u.maxX,y:u.minY},{x:u.maxX,y:u.maxY}],[{x:u.minX,y:u.maxY},{x:u.maxX,y:u.maxY}]];for(h=0;h<4;h++){var m=g[h],v=Util.getLineIntersect(e,{x:e.x+p.stepX*u.width,y:e.y+p.stepY*u.height},m[0],m[1]);v&&!isSegmentCrossingBBox(e,v,l)&&(v.id="".concat(v.x,"|||").concat(v.y),o.push(v))}}return o}var y=getExpandedBBoxPoint(u,e,r);return y.id="".concat(y.x,"|||").concat(y.y),[y]},getDirectionChange=function(e,t,n,r){var i=getDirectionAngle(e,t),o=n[e.id];if(!o){var a=getDirectionAngle(r,e);return getAngleDiff(a,i)}var s=getDirectionAngle({x:o.x,y:o.y},e);return getAngleDiff(s,i)},getControlPoints=function(e,t,n,r,i,o,a){var s=[r],l=r,c=e.id,u=e.x,h=e.y,d={x:u,y:h,id:c};getDirectionChange(d,o,t,n)&&(l={x:o.x===r.x?r.x:d.x*a,y:o.y===r.y?r.y:d.y*a},s.unshift(l));for(var f=t[c];f&&f.id!==c;){var p={x:u,y:h,id:c},g={x:f.x,y:f.y,id:f.id};getDirectionChange(g,p,t,n)&&(l={x:g.x===p.x?l.x:g.x*a,y:g.y===p.y?l.y:g.y*a},s.unshift(l)),u=g.x,h=g.y,f=t[c=g.id]}return s[0].x=u===n.x?i.x:l.x,s[0].y=h===n.y?i.y:l.y,s.unshift(i),s},pathFinder=function(e,t,n,r,i){if(isNaN(e.x)||isNaN(t.x))return[];var o=deepMix(defaultCfg,i);o.obstacles=o.obstacles||[];var a=o.penalties,s=o.gridSize,l=getObstacleMap(o.obstacles.concat([n,r]),s,o.offset),c={x:pos2GridIx(e.x,s),y:pos2GridIx(e.y,s)},u={x:pos2GridIx(t.x,s),y:pos2GridIx(t.y,s)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(u.x,"|||").concat(u.y);var h=getBoxPoints(c,e,n,u,o),d=getBoxPoints(u,t,r,c,o);h.forEach((function(e){delete l[e.id]})),d.forEach((function(e){delete l[e.id]}));for(var f={},p={},g={},m={},v={},y=new SortedArray,b=0;b<h.length;b++){var x=h[b];f[x.id]=x,m[x.id]=0,v[x.id]=estimateCost(x,d,o.distFunc),y.add({id:x.id,value:v[x.id]})}var w,_,C,$,S,E,A=o.maximumLoops,M=1/0,k={};for(d.forEach((function(e){k["".concat(e.x,"|||").concat(e.y)]=!0})),Object.keys(f).forEach((function(e){var t=f[e].id;v[t]<=M&&(M=v[t],w=f[t])}));Object.keys(f).length>0&&A>0;){var T=y.minId((A+1)%30==0);if(!T)break;if(w=f[T],k["".concat(w.x,"|||").concat(w.y)])return getControlPoints(w,g,c,t,e,u,s);delete f[w.id],y.remove(w.id),p[w.id]=!0;for(b=0;b<o.directions.length;b++){_=o.directions[b];var P="".concat(Math.round(w.x)+_.stepX,"|||").concat(Math.round(w.y)+_.stepY);if(C={x:w.x+_.stepX,y:w.y+_.stepY,id:P},!p[P]&&!((E=getDirectionChange(w,C,g,c))>o.maxAllowedDirectionChange||l[P])){f[P]||(f[P]=C);var O=a[E];$=o.distFunc(w,C)+(isNaN(O)?s:O),S=m[w.id]+$;var N=m[P];N&&S>=N||(g[P]=w,m[P]=S,v[P]=S+estimateCost(C,d,o.distFunc),y.add({id:P,value:v[P]}))}}A-=1}return o.fallbackRoute(e,t,n,r,o)};registerEdge("polyline",{options:{color:BaseGlobal.defaultEdge.color,size:BaseGlobal.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:BaseGlobal.defaultEdge.style.stroke,lineAppendWidth:BaseGlobal.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:BaseGlobal.edgeLabel.style.fill,fontSize:BaseGlobal.edgeLabel.style.fontSize,fontFamily:BaseGlobal.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:__assign$h({},BaseGlobal.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var n=this.getShapeStyle(e);0===n.radius&&delete n.radius;var r=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:n});return t.shapeMap["edge-shape"]=r,r},getShapeStyle:function(e){var t=mix({},this.options.style,{stroke:e.color},e.style);e=this.getPathPoints(e),this.radius=t.radius,this.offset=t.offset;var n=e.startPoint,r=e.endPoint,i=this.getControlPoints(e),o=[n];i&&(o=o.concat(i)),o.push(r);var a=e.sourceNode,s=e.targetNode,l=t.radius,c=mix({},this.options.routeCfg,e.routeCfg);c.offset=t.offset;var u=this.getPath(o,a,s,l,c);return(isArray$1(u)&&u.length<=1||isString$1(u)&&-1===u.indexOf("L"))&&(u="M0 0, L0 0"),(isNaN(n.x)||isNaN(n.y)||isNaN(r.x)||isNaN(r.y))&&(u="M0 0, L0 0"),mix({},BaseGlobal.defaultEdge.style,t,{lineWidth:e.size,path:u})},updateShapeStyle:function(e,t){var n=t.getContainer();if(t.isVisible()){var r={stroke:e.color},i=n.shapeMap["edge-shape"]||n.find((function(e){return"edge-shape"===e.get("className")}))||t.getKeyShape(),o=e.size,a=(e=this.getPathPoints(e)).startPoint,s=e.endPoint,l=this.getControlPoints(e),c=[a];l&&(c=c.concat(l)),c.push(s);var u=i.attr(),h=mix({},r,u,e.style),d=e.sourceNode,f=e.targetNode,p=h.radius,g=mix({},this.options.routeCfg,e.routeCfg);g.offset=h.offset;var m=this.getPath(c,d,f,p,g);(isArray$1(m)&&m.length<=1||isString$1(m)&&-1===m.indexOf("L"))&&(m="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(m="M0 0, L0 0"),u.endArrow&&!1===h.endArrow&&(e.style.endArrow={path:""}),u.startArrow&&!1===h.startArrow&&(e.style.startArrow={path:""});var v=mix(r,i.attr(),{lineWidth:o,path:m},e.style);i&&i.attr(v)}},getPath:function(e,t,n,r,i){var o=i.offset,a=i.obstacles,s=i.simple;if(!o||e.length>2){if(r)return getPathWithBorderRadiusByPolyline(e,r);var l=[];return each(e,(function(e,t){0===t?l.push(["M",e.x,e.y]):l.push(["L",e.x,e.y])})),l}!1===s||(null==a?void 0:a.length)||(s=!0);var c=s?getPolylinePoints(e[e.length-1],e[0],n,t,o):pathFinder(e[0],e[e.length-1],t,n,i);return c&&c.length?r?getPathWithBorderRadiusByPolyline(c,r):(c=removeRedundantPoint(c),Util.pointsToPolygon(c)):"M0 0, L0 0"}},"single-edge");var cloneEvent=G6Util.cloneEvent,isNaN$1=G6Util.isNaN,abs$1=Math.abs,DRAG_OFFSET=10,ALLOW_EVENTS$8=["shift","ctrl","alt","control"];const DragCanvas={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,n=+e.clientX,r=+e.clientY;if(!isNaN$1(n)&&!isNaN$1(r)){var i=n-t.x,o=r-t.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:n,y:r};var a=this.graph.get("width"),s=this.graph.get("height"),l=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,u=this.scalableRange;c<1&&c>-1&&(c*=a,u*=s),(l.minX<=a+c&&l.minX+i>a+c||l.maxX+c>=0&&l.maxX+c+i<0)&&(i=0),(l.minY<=s+u&&l.minY+o>s+u||l.maxY+u>=0&&l.maxY+u+o<0)&&(o=0),this.graph.translate(i,o)}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];n&&r||(e.preventDefault(),this.mousedown=!0,this.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,n=e.originalEvent;if((!n||"touchstart"===e.name||0===n.button)&&("touchstart"===e.name||"undefined"==typeof window||!window.event||window.event.buttons||window.event.button)&&this.shouldBegin(e,this)&&!t.keydown){var r=e.target,i=r&&r.isCanvas&&r.isCanvas();if(this.allowDragOnItem||i){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var o=this.graph,a=o.getEdges(),s=0,l=a.length;s<l;s++){var c=a[s].get("group").get("children");c&&c.forEach((function(e){e.set("ori-visibility",e.get("ori-visibility")||e.get("visible")),e.hide()}))}for(var u=o.getNodes(),h=0,d=u.length;h<d;h++)for(var f=0,p=u[h].getContainer().get("children");f<p.length;f++){var g=p[f];g.get("isKeyShape")||(g.set("ori-visibility",g.get("ori-visibility")||g.get("visible")),g.hide())}}if("undefined"!=typeof window){var m=this;this.handleDOMContextMenu=function(e){return m.onMouseUp(e)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onTouchMove:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];n&&r?this.onMouseUp(e):(e.preventDefault(),this.onDrag(e))},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown){var n=e.target,r=n&&n.isCanvas&&n.isCanvas();if((this.allowDragOnItem||r)&&(e=cloneEvent(e),this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(abs$1(this.origin.x-e.clientX)+abs$1(this.origin.y-e.clientY)<DRAG_OFFSET)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}}},onMouseUp:function(e){var t,n;this.mousedown=!1,this.dragstart=!1;var r=this.graph;if(!this.keydown){var i=r.getZoom(),o=r.get("modeController"),a=null===(n=null===(t=null==o?void 0:o.modes[o.mode])||void 0===t?void 0:t.filter((function(e){return"zoom-canvas"===e.type})))||void 0===n?void 0:n[0],s=a?a.optimizeZoom||.1:0;if(this.enableOptimize){for(var l=r.getEdges(),c=0,u=l.length;c<u;c++){var h=l[c].get("group").get("children");h&&h.forEach((function(e){var t=e.get("ori-visibility");e.set("ori-visibility",void 0),t&&e.show()}))}if(i>s)for(var d=r.getNodes(),f=0,p=d.length;f<p;f++)for(var g=0,m=d[f].getContainer().get("children");g<m.length;g++){var v=m[g];if(!v.get("isKeyShape")){var y=v.get("ori-visibility");v.set("ori-visibility",void 0),y&&v.show()}}}this.dragging?(e=cloneEvent(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,r.emit("canvas:dragend",e),this.endDrag(),"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=e.key;t&&(ALLOW_EVENTS$8.indexOf(t.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},DragNode={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd"}},validationCombo:function(e){return!(!this.origin||!e||e.destroyed)&&"combo"===e.getType()},onTouchStart:function(e){if(e.item){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(e11){}this.mousedown={item:e.item,target:e.target},this.dragstart=!0,this.onDragStart(e)}},onTouchMove:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return void this.onDragEnd(e);e.preventDefault()}catch(i){}this.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target}},onDragMove:function(e){var t,n;"node"===(null===(n=null===(t=e.item)||void 0===t?void 0:t.getType)||void 0===n?void 0:n.call(t))?this.mousedown&&(this.dragstart?this.onDrag(__assign$h(__assign$h({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e))):this.onDragEnd()},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,this.shouldBegin(__assign$h(__assign$h({},e),this.mousedown),this)){var n=this.mousedown,r=n.item,i=n.target;if(r&&!r.destroyed&&!r.hasLocked()){if(r.getContainer().set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(r),i)if(i.get("isAnchorPoint"))return;var o=this.graph;this.targets=[],this.targetCombo=null;var a=o.findAllByState("node",this.selectedState),s=r.get("id");if(0===a.filter((function(e){var t=e.get("id");return s===t})).length?this.targets.push(r):a.length>1?a.forEach((function(e){e.hasLocked()||t.targets.push(e)})):this.targets.push(r),this.graph.get("enabledStack")&&this.enableStack){var l=[];this.targets.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y,i=t.id;l.push({x:n,y:r,id:i})})),this.set("beforeDragNodes",l)}if(this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(e){e.getEdges().forEach((function(e){e.isVisible()&&(t.hidenEdge[e.getID()]=!0,e.hide())}))})),this.origin={x:e.x,y:e.y},this.point={},this.originPoint={},"undefined"!=typeof window){var c=this;this.handleDOMContextMenu=function(){return c.onDragEnd()},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}}},onDrag:function(e){var t=this;this.mousedown&&this.origin&&this.shouldUpdate(e,this)&&(this.get("enableDelegate")?this.updateDelegate(e):this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge")}):this.targets.map((function(n){t.update(n,e)})))},onDragEnd:function(e){var t,n=this;if(this.mousedown=!1,this.dragstart=!1,this.origin){null===(t=this.cachedCaptureItems)||void 0===t||t.forEach((function(e){e.getContainer().set("capture",!0)})),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach((function(e){e.getEdges().forEach((function(e){n.hidenEdge[e.getID()]&&e.show(),e.refresh()}))})),this.hidenEdge={};var r=this.graph;if(r.get("enabledStack")&&this.enableStack){var i={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach((function(e){i.before.nodes.push(e)})),this.targets.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y,o=t.id;i.after.nodes.push({x:n,y:r,id:o})})),r.pushStack("update",clone$9(i))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null,"undefined"!=typeof window&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&this.validationCombo(t)){var n=this.graph;if(this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)n.updateCombos();else{var r=t.getModel();this.targets.map((function(e){e.getModel().comboId!==r.id&&n.updateComboTree(e,r.id)})),n.updateCombo(t)}n.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),this.targets&&0!==this.targets.length&&this.currentShouldEnd&&(this.onlyChangeComboSize?t.updateCombos():this.targets.map((function(e){e.getModel().comboId&&t.updateComboTree(e)})))},onDropNode:function(e){if(this.targets&&0!==this.targets.length){var t=this,n=e.item,r=t.graph,i=n.getModel().comboId,o=i?r.findById(i):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){if(this.onlyChangeComboSize)r.updateCombos();else if(i){var a=r.findById(i);t.comboActiveState&&r.setItemState(a,t.comboActiveState,!1),this.targets.map((function(e){var t=e.getModel();i!==t.comboId&&r.updateComboTree(e,i)})),r.updateCombo(a)}else this.targets.map((function(e){e.getModel().comboId&&r.updateComboTree(e)}));r.emit("dragnodeend",{items:this.targets,targetItem:n})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var n=this.graph;this.comboActiveState&&n.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var n=this;this.targets&&0!==this.targets.length&&(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),updateFunc:this.update}):t||this.targets.map((function(t){return n.update(t,e)})):this.targets.map((function(r){return n.update(r,e,t)})))},update:function(e,t,n){var r=this.origin,i=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:i.x||0,y:i.y||0});var a=t.x-r.x+this.point[o].x,s=t.y-r.y+this.point[o].y;n&&(a+=r.x-t.x,s+=r.y-t.y);var l={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(e,l,!1):e.updatePosition(l)},debounceUpdate:debounce((function(e){var t=e.targets,n=e.graph,r=e.point,i=e.origin,o=e.evt,a=e.updateEdge;e.updateFunc,t.map((function(e){var t=e.get("model"),s=e.get("id");r[s]||(r[s]={x:t.x||0,y:t.y||0});var l={x:o.x-i.x+r[s].x,y:o.y-i.y+r[s].y};a?n.updateItem(e,l,!1):e.updatePosition(l)}))}),50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var n=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:n,y:r})}else{var i=t.get("group"),o=deepMix({},Global.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),s=a.x,l=a.y,c=a.width,u=a.height,h=a.minX,d=a.minY;this.originPoint={x:s,y:l,width:c,height:u,minX:h,minY:d},this.delegateRect=i.addShape("rect",{attrs:__assign$h({width:c,height:u,x:s,y:l},o),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;0===t.length&&t.push(e.item);for(var n=1/0,r=-1/0,i=1/0,o=-1/0,a=0;a<t.length;a++){var s=t[a].getBBox(),l=s.minX,c=s.minY,u=s.maxX,h=s.maxY;l<n&&(n=l),c<i&&(i=c),u>r&&(r=u),h>o&&(o=h)}return{x:Math.floor(n),y:Math.floor(i),width:Math.ceil(r)-Math.floor(n),height:Math.ceil(o)-Math.floor(i),minX:n,minY:i}}},ActivateRelations={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(i){}this.setAllItemStates(e)},clearOnTouchStart:function(e){try{var t=e.originalEvent.touches,n=t[0],r=t[1];if(n&&r)return;e.preventDefault()}catch(i){}this.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout((function(){t.throttleClearActiveState(e,t)}),50)},throttleSetAllItemStates:throttle((function(e,t){var n=e.item,r=t.graph;if(r&&!r.destroyed&&(t.item=n,t.shouldUpdate(e.item,{event:e,action:"activate"},t))){for(var i=t.activeState,o=t.inactiveState,a=r.getNodes(),s=r.getCombos(),l=r.getEdges(),c=r.get("vedges"),u=a.length,h=s.length,d=l.length,f=c.length,p=t.inactiveItems||{},g=t.activeItems||{},m=0;m<u;m++){var v=a[m],y=v.getID(),b=v.hasState("selected");t.resetSelected&&b&&r.setItemState(v,"selected",!1),g[y]&&(r.setItemState(v,i,!1),delete g[y]),o&&!p[y]&&(r.setItemState(v,o,!0),p[y]=v)}for(m=0;m<h;m++){var x=s[m],w=x.getID();b=x.hasState("selected");t.resetSelected&&b&&r.setItemState(x,"selected",!1),g[w]&&(r.setItemState(x,i,!1),delete g[w]),o&&!p[w]&&(r.setItemState(x,o,!0),p[w]=x)}for(m=0;m<d;m++){g[A=(E=l[m]).getID()]&&(r.setItemState(E,i,!1),delete g[A]),o&&!p[A]&&(r.setItemState(E,o,!0),p[A]=E)}for(m=0;m<f;m++){var _=c[m],C=_.getID();g[C]&&(r.setItemState(_,i,!1),delete g[C]),o&&!p[C]&&(r.setItemState(_,o,!0),p[C]=_)}o&&(r.setItemState(n,o,!1),delete p[n.getID()]),g[n.getID()]||(r.setItemState(n,i,!0),g[n.getID()]=n);var $=n.getEdges(),S=$.length;for(m=0;m<S;m++){var E,A=(E=$[m]).getID(),M=void 0,k=(M=E.getSource()===n?E.getTarget():E.getSource()).getID();o&&p[k]&&(r.setItemState(M,o,!1),delete p[k]),g[k]||(r.setItemState(M,i,!0),g[k]=M),p[A]&&(r.setItemState(E,o,!1),delete p[A]),g[A]||(r.setItemState(E,i,!0),g[A]=E),E.toFront()}t.activeItems=g,t.inactiveItems=p,r.emit("afteractivaterelations",{item:e.item,action:"activate"})}}),50,{trailing:!0,leading:!0}),throttleClearActiveState:throttle((function(e,t){var n=t.get("graph");if(n&&!n.destroyed&&t.shouldUpdate(e.item,{event:e,action:"deactivate"},t)){var r=t.activeState,i=t.inactiveState,o=t.activeItems||{},a=t.inactiveItems||{};Object.values(o).forEach((function(e){n.clearItemStates(e,r)})),Object.values(a).forEach((function(e){n.clearItemStates(e,i)})),t.activeItems={},t.inactiveItems={},n.emit("afteractivaterelations",{item:e.item||t.get("item"),action:"deactivate"})}}),50,{trailing:!0,leading:!0})};var min=Math.min,max=Math.max,abs=Math.abs,DEFAULT_TRIGGER$6="shift",ALLOW_EVENTS$7=["drag","shift","ctrl","alt","control"];const BrushSelect={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:DEFAULT_TRIGGER$6,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return ALLOW_EVENTS$7.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER$6),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,n=this.brush;t||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),n||(n=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},n.attr({width:0,height:0}),n.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(e)},onMouseUp:function(e){this.graph,(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this.graph,t=this.selectedState,n=e.findAllByState("node",t),r=e.findAllByState("edge",t),i=e.findAllByState("combo",t);n.forEach((function(n){return e.setItemState(n,t,!1)})),r.forEach((function(n){return e.setItemState(n,t,!1)})),i.forEach((function(n){return e.setItemState(n,t,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,n,r,i){var o=e.getBBox();return o.centerX>=t&&o.centerX<=n&&o.centerY>=r&&o.centerY<=i},getSelectedNodes:function(e){var t=this,n=this,r=n.graph,i=n.originPoint,o=n.shouldUpdate,a=n.isBBoxCenterInRect,s=this.selectedState,l={x:e.x,y:e.y},c=r.getPointByCanvas(i.x,i.y),u=min(l.x,c.x),h=max(l.x,c.x),d=min(l.y,c.y),f=max(l.y,c.y),p=[],g=[];r.getNodes().forEach((function(e){if(e.isVisible()&&a(e,u,h,d,f)&&o(e,"select",t)){p.push(e);var n=e.getModel();g.push(n.id),r.setItemState(e,s,!0)}}));var m=[];this.includeEdges&&p.forEach((function(e){e.getOutEdges().forEach((function(e){if(e.isVisible()){var n=e.getModel(),i=n.source,a=n.target;g.includes(i)&&g.includes(a)&&o(e,"select",t)&&(m.push(e),r.setItemState(e,t.selectedState,!0))}}))}));var v=[];this.includeCombos&&r.getCombos().forEach((function(e){if(e.isVisible()&&a(e,u,h,d,f)&&o(e,"select",t)){v.push(e);var n=e.getModel();g.push(n.id),r.setItemState(e,s,!0)}})),this.selectedEdges=m,this.selectedNodes=p,this.selectedCombos=v,this.onSelect&&this.onSelect(p,m,v),r.emit("nodeselectchange",{selectedItems:{nodes:p,edges:m,combos:v},select:!0})},createBrush:function(){var e=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=e,this.delegate=e,e},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:abs(e.canvasX-t.x),height:abs(e.canvasY-t.y),x:min(e.canvasX,t.x),y:min(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),r=t.toLowerCase();this.keydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}};var DEFAULT_TRIGGER$5="shift",ALLOW_EVENTS$6=["shift","ctrl","alt","control"];const ClickSelect={getDefaultCfg:function(){return{multiple:!0,trigger:DEFAULT_TRIGGER$5,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return ALLOW_EVENTS$6.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=DEFAULT_TRIGGER$5),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,n=e.item;if(n&&!n.destroyed){var r=n.getType(),i=t.graph,o=t.keydown,a=t.multiple,s=t.shouldUpdate;if((0,t.shouldBegin)(e,t)){if(!o||!a)each(i.findAllByState("node",t.selectedState).concat(i.findAllByState("edge",t.selectedState)).concat(i.findAllByState("combo",t.selectedState)),(function(e){e!==n&&i.setItemState(e,t.selectedState,!1)}));if(function(){switch(r){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}())if(n.hasState(t.selectedState)){s(e,t)&&i.setItemState(n,t.selectedState,!1);l=i.findAllByState("node",t.selectedState),c=i.findAllByState("edge",t.selectedState),u=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,edges:c,combos:u},select:!1})}else{s(e,t)&&i.setItemState(n,t.selectedState,!0);l=i.findAllByState("node",t.selectedState),c=i.findAllByState("edge",t.selectedState),u=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{target:n,selectedItems:{nodes:l,edges:c,combos:u},select:!0})}else{var l=i.findAllByState("node",t.selectedState),c=i.findAllByState("edge",t.selectedState),u=i.findAllByState("combo",t.selectedState);i.emit("nodeselectchange",{selectedItems:{nodes:l,edges:c,combos:u},select:!1})}}}},onCanvasClick:function(e){var t=this,n=this.graph;(0,this.shouldBegin)(e,this)&&(each(n.findAllByState("node",this.selectedState),(function(e){n.setItemState(e,t.selectedState,!1)})),each(n.findAllByState("edge",this.selectedState),(function(e){n.setItemState(e,t.selectedState,!1)})),each(n.findAllByState("combo",this.selectedState),(function(e){n.setItemState(e,t.selectedState,!1)})),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1}))},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()||"control"===t.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}};var transform=transform$d,DELTA=.05;const ZoomCanvas={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,n=t[0],r=t[1];e.preventDefault(),r&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:n.pageX,pageY:n.pageY},this.moveable=!0,r&&(this.endPoint={pageX:r.pageX,pageY:r.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,n=t[0],r=t[1];if(r){this.endPoint||(this.endPoint={pageX:r.pageX,pageY:r.pageY});var i=function(e,t){return Math.hypot(t.x-e.x,t.y-e.y)},o=i({x:n.pageX,y:n.pageY},{x:r.pageX,y:r.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var l=this.get("animate"),c=this.get("animateCfg"),u=this.graph.get("canvas").getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(a,{x:u.x,y:u.y},l,c),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,n=this.graph,r=this.fixSelectedItems;if((!this.shouldBegin||this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var i=n.get("canvas").getPointByClient(e.clientX,e.clientY),o=this.get("sensitivity"),a=n.getZoom(),s=a;s=a*(e.wheelDelta<0?1-DELTA*o:1/(1-DELTA*o));var l=this.get("minZoom")||n.get("minZoom"),c=this.get("maxZoom")||n.get("maxZoom");if(s>c?s=c:s<l&&(s=l),this.get("enableOptimize")){var u=this.get("optimizeZoom"),h=this.get("optimized"),d=n.getNodes(),f=n.getEdges(),p=d.length,g=f.length;if(!h){for(var m=0;m<p;m++){if(!(E=d[m]).destroyed)for(var v=(Y=E.get("group").get("children")).length,y=0;y<v;y++){(L=Y[y]).destoryed||L.get("isKeyShape")||(L.set("ori-visibility",L.get("ori-visibility")||L.get("visible")),L.hide())}}for(var b=0;b<g;b++)for(v=(Y=(q=f[b]).get("group").get("children")).length,y=0;y<v;y++){(L=Y[y]).set("ori-visibility",L.get("ori-visibility")||L.get("visible")),L.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var x=setTimeout((function(){var e=n.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var r=0;r<p;r++){var i=d[r],o=(c=i.get("group").get("children")).length;if(e<u){var a=(m=i.getKeyShape()).get("ori-visibility");m.set("ori-visibility",void 0),a&&m.show()}else for(var s=0;s<o;s++){a=(v=c[s]).get("ori-visibility");v.set("ori-visibility",void 0),!v.get("visible")&&a&&a&&v.show()}}for(var l=0;l<g;l++){var c,h=f[l];o=(c=h.get("group").get("children")).length;if(e<u){var m;a=(m=h.getKeyShape()).get("ori-visibility");m.set("ori-visibility",void 0),a&&m.show()}else for(s=0;s<o;s++){var v;if(!(v=c[s]).get("visible")){a=v.get("ori-visibility");v.set("ori-visibility",void 0),a&&v.show()}}}}}),100);this.set("timeout",x)}if(a<=1){var w=void 0,_=void 0;if(r.fixAll||r.fixLineWidth||r.fixLabel){w=n.findAllByState("node",r.fixState),_=n.findAllByState("edge",r.fixState);for(var C=a/s,$=w.length,S=0;S<$;S++){var E,A=(E=w[S]).getContainer(),M=E.getModel(),k=E.getOriginStyle(),T=E.getStateStyle(r.fixState),P=E.get("shapeFactory").getShape(M.type).getStateStyle(r.fixState,E)[r.fixState];if(r.fixAll){if(s<=1){var O=clone$9(A.getMatrix());O||(O=[1,0,0,0,1,0,0,0,1]);var N=E.getModel(),I=N.x,D=N.y;O=transform(O,[["t",-I,-D],["s",C,C],["t",I,D]]),A.setMatrix(O)}}else for(v=(Y=A.get("children")).length,y=0;y<v;y++){var L=Y[y],R=void 0,B=void 0;if(r.fixLabel)if("text"===L.get("type")){R=L.attr("fontSize")||12;var j=T[L.get("name")],F=P[L.get("name")],G=j?j.fontSize:12,V=F?F.fontSize:12,z=G||V||12;if(s<=1&&L.attr("fontSize",z/s),B)break}if(r.fixLineWidth&&L.get("isKeyShape")){B=L.attr("lineWidth")||0;var H=T.lineWidth||P.lineWidth||k.lineWidth||0;if(s<=1&&L.attr("lineWidth",H/s),R)break}}}for(var U=_.length,W=0;W<U;W++){var q,Y=(A=(q=_[W]).getContainer()).get("children");for(M=q.getModel(),T=q.getStateStyle(r.fixState),P=q.get("shapeFactory").getShape(M.type).getStateStyle(r.fixState,q)[r.fixState],v=Y.length,y=0;y<v;y++){L=Y[y],R=void 0,B=void 0;if(r.fixLabel||r.fixAll)if("text"===L.get("type")){R=L.attr("fontSize")||12;j=T[L.get("name")],F=P[L.get("name")],G=j?j.fontSize:12,V=F?F.fontSize:12,z=G||V||12;if(s<=1&&L.attr("fontSize",z/s),B)break}if((r.fixLineWidth||r.fixAll)&&L.get("isKeyShape")){B=L.attr("lineWidth")||0;H=T.lineWidth||P.lineWidth||1;if(s<=1&&L.attr("lineWidth",H/s),R)break}}}}}var X=this.get("animate"),K=this.get("animateCfg");n.zoomTo(s,{x:i.x,y:i.y},X,K),n.emit("wheelzoom",e)}}},base={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){this.shouldUpdate(e,this)?this.currentTarget&&e.item===this.currentTarget&&this.updatePosition(e):this.hideTooltip()},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(e.item&&!e.item.destroyed){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var n=this.formatText(e.item.get("model"),e);t.innerHTML=n,modifyCSS(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){modifyCSS(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),n=this,r=n.width,i=n.height,o=n.container,a=n.graph;if(t(e,this)){var s=a.getPointByClient(e.clientX,e.clientY),l=a.getCanvasByPoint(s.x,s.y),c=l.x,u=l.y,h=o.getBoundingClientRect();c>r/2?c-=h.width:c+=this.offset,u>i/2?u-=h.height:u+=this.offset;var d="".concat(c,"px"),f="".concat(u,"px");modifyCSS(this.container,{left:d,top:f,visibility:"visible"})}else modifyCSS(o,{visibility:"hidden"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var n=createDom('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(n),modifyCSS(n,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=n,this.graph.get("tooltips").push(n),n}},Tooltip=__assign$h({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(e){return e.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},base),EdgeTooltip=__assign$h({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(e){return"source: ".concat(e.source," target: ").concat(e.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},base);var DEFAULT_TRIGGER$4="click",ALLOW_EVENTS$5=["click","dblclick"];const CollapseExpand={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$4,onChange:function(){}}},getEvents:function(){var e,t;return t=ALLOW_EVENTS$5.includes(this.trigger)?this.trigger:DEFAULT_TRIGGER$4,(e={})["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=e.item;if(t){var n=this.graph.findDataById(t.get("id"));if(n){var r=n.children;if(r&&0!==r.length){var i=!n.collapsed;this.shouldBegin(e,i,this)&&(n.collapsed=i,t.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:e.item,collapsed:i}),this.shouldUpdate(e,i,this)&&(this.onChange(t,i,this),this.graph.layout()))}}}}};var calculationItemsBBox=G6Util.calculationItemsBBox,traverseCombo=function e(t,n){if(!1!==n(t)&&t){var r=t.get("combos");if(0===r.length)return!1;each(r,(function(t){e(t,n)}))}};const DragCombo={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;return!(!t||t.destroyed)&&(!!this.shouldUpdate(e,this)&&"combo"===t.getType())},onDragStart:function(e){var t=this,n=this.graph,r=e.item;if(this.currentShouldEnd=!0,this.validationCombo(e)){this.targets=[];var i=n.findAllByState("combo",this.selectedState),o=r.get("id");0===i.filter((function(e){var t=e.get("id");return o===t})).length?this.targets.push(r):this.targets=i;var a=[];this.targets.forEach((function(e){var t=e.getModel(),n=t.x,r=t.y,i=t.id;a.push({x:n,y:r,id:i})})),this.set("beforeDragItems",a),this.activeState&&this.targets.map((function(e){var r=e.getModel();if(r.parentId){var i=n.findById(r.parentId);i&&n.setItemState(i,t.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:e.x,y:e.y},this.currentItemChildCombos=[],traverseCombo(r,(function(e){if(e.destroyed)return!1;var n=e.getModel();return t.currentItemChildCombos.push(n.id),!0}))}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var n=this.graph,r=e.item,i=r.getModel(),o=n.getCombos(),a=r.getBBox(),s=a.centerX,l=a.centerY,c=a.width;o.filter((function(e){var n=e.getModel();return i.parentId,n.id!==i.id&&!t.currentItemChildCombos.includes(n.id)})).map((function(e){var r=e.getBBox(),i=r.centerX,o=r.centerY,a=r.width,u=s-i,h=l-o,d=2*Math.sqrt(u*u+h*h);c+a-d>.8*c?n.setItemState(e,t.activeState,!0):n.setItemState(e,t.activeState,!1)}))}each(this.targets,(function(n){t.updateCombo(n,e)}))}},updatePositions:function(e,t){var n=this;(this.enableDelegate||t)&&each(this.targets,(function(r){n.updateCombo(r,e,t)}))},onDrop:function(e){var t=this,n=e.item;if(this.currentShouldEnd=this.shouldEnd(e,n,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd&&n&&this.targets&&!n.destroyed){var r=this.graph,i=n.getModel();this.targets.map((function(e){e.getModel().parentId!==i.id?(t.activeState&&r.setItemState(n,t.activeState,!1),t.onlyChangeComboSize?r.updateCombo(e):r.updateComboTree(e,i.id,!1)):r.updateCombo(n)})),this.end(n,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(this.targets&&0!==this.targets.length){var n=this.graph,r=e.item.getModel().comboId,i=r?n.findById(r):void 0;if(this.currentShouldEnd=this.shouldEnd(e,i,this),this.updatePositions(e,!this.currentShouldEnd),this.currentShouldEnd){var o;if(r){if(this.activeState){var a=n.findById(r);n.setItemState(a,this.activeState,!1)}this.targets.map((function(e){t.onlyChangeComboSize?n.updateCombo(e):r!==e.getID()&&(o=n.findById(r),r!==e.getModel().parentId&&n.updateComboTree(e,r,!1))}))}else this.targets.map((function(e){t.onlyChangeComboSize?n.updateCombo(e):e.getModel().comboId&&n.updateComboTree(e,void 0,!1)}));this.endComparison=!0,this.end(o,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,n=this.graph;this.activeState&&n.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(this.targets&&0!==this.targets.length){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var n=this.getParentCombo(t.getModel().parentId),r=this.graph;n&&this.activeState&&r.setItemState(n,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var n=this;if(this.origin){var r=this.graph;if(this.delegateShape)r.get("delegateGroup").clear(),this.delegateShape=null;if(e&&this.activeState&&r.setItemState(e,this.activeState,!1),!e){var i=r.get("enabledStack")&&this.enableStack,o={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map((function(e){if(n.onlyChangeComboSize){r.updateCombo(e);var t=e.getModel(),a=t.x,s=t.y,l=t.id;o.after.combos.push({x:a,y:s,id:l}),r.pushStack("update",o)}else r.updateComboTree(e,void 0,i)}))}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,n){var r=this;(void 0===n&&(n={}),!1!==t(e,n))&&(e&&(each(e.get("combos"),(function(e){r.traverse(e,t,n)})),each(e.get("nodes"),(function(e){r.traverse(e,t,n)}))))},updateCombo:function(e,t,n){this.updateSingleItem(e,t,n);var r={};this.traverse(e,(function(e,t){return!e.destroyed&&(e.getEdges().forEach((function(e){return t[e.getID()]=e})),!0)}),r),Object.values(r).forEach((function(e){return e.refresh()}))},updateSingleItem:function(e,t,n){var r=this.origin,i=this.graph,o=e.getModel(),a=e.get("id");this.point[a]||(this.point[a]={x:o.x,y:o.y});var s=t.x-r.x+this.point[a].x,l=t.y-r.y+this.point[a].y;n&&(s+=r.x-t.x,l+=r.y-t.y),i.updateItem(e,{x:s,y:l},!1)},getParentCombo:function(e){var t=this.graph;if(e){var n=t.findById(e);if(n)return n}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var n=e.x-this.origin.x+this.originPoint.minX,r=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:n,y:r})}else{var i=t.get("delegateGroup"),o=null,a=(o=this.targets.length>1?calculationItemsBBox(this.targets):this.targets[0].getBBox()).x,s=o.y,l=o.width,c=o.height,u=o.minX,h=o.minY;this.originPoint={x:a,y:s,width:l,height:c,minX:u,minY:h};var d=__assign$h(__assign$h({},Global.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:__assign$h({width:o.width,height:o.height,x:o.x,y:o.y},d),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}}};var DEFAULT_TRIGGER$3="dblclick",ALLOW_EVENTS$4=["click","dblclick"];const CollapseExpandCombo={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$3,relayout:!0}},getEvents:function(){var e,t;return t=ALLOW_EVENTS$4.includes(this.trigger)?this.trigger:DEFAULT_TRIGGER$3,(e={})["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,n=this.graph,r=this.relayout;if(t&&!t.destroyed&&"combo"===t.getType()){var i=t.getModel().id;i&&(n.collapseExpandCombo(i),r&&n.get("layout")?n.layout():n.refreshPositions())}}};var isPolygonsIntersect=G6Util.isPolygonsIntersect,pathToPoints=G6Util.pathToPoints,DEFAULT_TRIGGER$2="shift",ALLOW_EVENTS$3=["drag","shift","ctrl","alt","control"],isItemIntersecPolygon=function(e,t){var n,r=e.getKeyShape();if("path"===e.get("type"))n=pathToPoints(r.attr("path"));else{var i=r.getCanvasBBox();n=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return isPolygonsIntersect(t,n)};const LassoSelect={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:DEFAULT_TRIGGER$2,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return ALLOW_EVENTS$3.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER$2),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso;e.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:e.x,y:e.y}),this.updateLasso(e))},onDragEnd:function(e){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach((function(e,n){0===n?t.push(["M",e.x,e.y]):t.push(["L",e.x,e.y])})),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){void 0===e&&(e="canvas:click");var t=this,n=t.graph,r=t.selectedState,i=t.shouldDeselect,o=n.findAllByState("node",r),a=n.findAllByState("edge",r);i&&!i({action:e,nodes:o,edges:a})||(o.forEach((function(e){return n.setItemState(e,r,!1)})),a.forEach((function(e){return n.setItemState(e,r,!1)}))),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this.graph,n=this.shouldUpdate,r=this.points.map((function(e){return[t.getCanvasByPoint(e.x,e.y).x,t.getCanvasByPoint(e.x,e.y).y]})),i=this.selectedState,o=[],a=[];t.getNodes().forEach((function(s){if(s.isVisible()&&isItemIntersecPolygon(s,r)&&n(s,"select",e)){o.push(s);var l=s.getModel();a.push(l.id),t.setItemState(s,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(r){r.getOutEdges().forEach((function(r){if(r.isVisible()){var i=r.getModel(),o=i.source,l=i.target;a.includes(o)&&a.includes(l)&&n(r,"select",e)&&(s.push(r),t.setItemState(r,e.selectedState,!0))}}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),t.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var e=this.graph.get("delegateGroup").addShape("path",{attrs:__assign$h({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=e,this.delegate=e,this.points=[],e},updateLasso:function(e){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}};var DEFAULT_TRIGGER$1="click",ALLOW_EVENTS$2=["click","drag"],DEFAULT_KEY=void 0,ALLOW_KEYS=["shift","ctrl","control","alt","meta",void 0];const CreateEdge={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER$1,key:DEFAULT_KEY,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e,t=this;return ALLOW_EVENTS$2.indexOf(t.trigger.toLowerCase())>-1||(t.trigger=DEFAULT_TRIGGER$1),t.key&&-1===ALLOW_KEYS.indexOf(t.key.toLowerCase())&&(t.trigger=DEFAULT_KEY),"drag"===t.trigger?e={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===t.trigger&&(e={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),t.key&&(e.keydown="onKeyDown",e.keyup="onKeyUp"),e},onDragEnd:function(e){var t=this;if(!t.key||t.keydown){var n=e.item;n&&n.getID()!==t.source&&"node"===n.getType()||t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!t.key||t.keydown){var n=e.item,r=t.graph,i=n.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var a=void 0;a=o&&isFunction$1(o)?o({source:t.source,target:i.id},t):t.edgeConfig;var s=__assign$h({target:i.id},a);if(t.source===i.id&&(s.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(t.edge,s,!1),r.get("enabledStack")){var l=__assign$h(__assign$h({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[l],r.pushStack("add",{before:{},after:c})}r.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;a=void 0;a=o&&isFunction$1(o)?o({source:i.id,target:i.id},t):t.edgeConfig,t.edge=r.addItem("edge",__assign$h({source:i.id,target:i.id},a),!1),t.source=i.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!t.key||t.keydown){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var n={x:e.x,y:e.y};t.graph.findById(t.source)?t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:n},!1):t.addingEdge=!1}},cancelCreating:function(e){var t,n,r=this;if(!r.key||r.keydown){var i=r.graph,o=e.item;return r.addingEdge&&(r.edge===o||(null===(n=null===(t=e.target)||void 0===t?void 0:t.isCanvas)||void 0===n?void 0:n.call(t)))?(r.edge&&!r.edge.destroyed&&i.removeItem(r.edge,!1),r.edge=null,void(r.addingEdge=!1)):void 0}},onKeyDown:function(e){var t=this,n=e.key;n&&(n.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}};var DEFAULT_TRIGGER="ctrl",ALLOW_EVENTS$1=["shift","ctrl","alt","control"],DEFAULT_COMBINED_KEY="1";const ShortcutsCall={getDefaultCfg:function(){return{trigger:DEFAULT_TRIGGER,combinedKey:DEFAULT_COMBINED_KEY,functionName:"fitView",functionParams:[]}},getEvents:function(){return ALLOW_EVENTS$1.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=DEFAULT_TRIGGER),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var n=this.trigger.toLowerCase(),r=t.toLowerCase();this.triggerKeydown||(this.triggerKeydown=r===n||"control"===r&&"ctrl"===n||"ctrl"===r&&"control"===n);var i=this.graph;if(!i[this.functionName])return{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(r===o||"control"===r&&"ctrl"===o||"ctrl"===r&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}};var ALLOW_EVENTS=["shift","ctrl","alt","control","meta"];const ScrollCanvas={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return this.zoomKey&&-1!==ALLOW_EVENTS.indexOf(this.zoomKey)||(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this,n=e.target,r=n&&n.isCanvas&&n.isCanvas();if(this.allowDragOnItem||r){var i=this.graph,o=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];if(o.includes("control")&&o.push("ctrl"),o.some((function(t){return e["".concat(t,"Key")]}))){var a=i.get("canvas").getPointByClient(e.clientX,e.clientY),s=i.getZoom();e.wheelDelta>0?s+=.05*s:s-=.05*s,i.zoomTo(s,{x:a.x,y:a.y})}else{var l=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=125*-e.wheelDelta/3);var u=this.graph.get("width"),h=this.graph.get("height"),d=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,p=this.scalableRange;f<1&&f>-1&&(f*=u,p*=h);var g=d.minX,m=d.maxX,v=d.minY,y=d.maxY;l>0?m<-f?l=0:m-l<-f&&(l=m+f):l<0&&(g>u+f?l=0:g-l>u+f&&(l=g-(u+f))),c>0?y<-p?c=0:y-c<-p&&(c=y+p):c<0&&(v>h+p?c=0:v-c>h+p&&(c=v-(h+p))),"x"===this.get("direction")?c=0:"y"===this.get("direction")&&(l=0),i.translate(-l,-c)}if(e.preventDefault(),this.get("enableOptimize")){var b=this.get("optimizeZoom"),x=this.get("optimized"),w=i.getNodes(),_=i.getEdges(),C=w.length,$=_.length;if(!x){for(var S=0;S<C;S++){var E=w[S];if(!E.destroyed)for(var A=(T=E.get("group").get("children")).length,M=0;M<A;M++){(P=T[M]).destoryed||P.get("isKeyShape")||(P.set("ori-visibility",P.get("ori-visibility")||P.get("visible")),P.hide())}}for(var k=0;k<$;k++){var T;for(A=(T=_[k].get("group").get("children")).length,M=0;M<A;M++){var P;(P=T[M]).set("ori-visibility",P.get("ori-visibility")||P.get("visible")),P.hide()}}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var O=setTimeout((function(){var e=i.getZoom();if(t.get("optimized")){t.set("optimized",!1);for(var n=0;n<C;n++){var r=w[n],o=(c=r.get("group").get("children")).length;if(e<b)(s=(u=r.getKeyShape()).get("ori-visibility"))&&u.show();else for(var a=0;a<o;a++){var s=(d=c[a]).get("ori-visibility");!d.get("visible")&&s&&s&&d.show()}}for(var l=0;l<$;l++){var c,u,h=_[l];o=(c=h.get("group").get("children")).length;if(e<b)(s=(u=h.getKeyShape()).get("ori-visibility"))&&u.show();else for(a=0;a<o;a++){var d;if(!(d=c[a]).get("visible"))(s=d.get("ori-visibility"))&&d.show()}}}}),100);this.set("timeout",O)}}}};var behaviors={"drag-canvas":DragCanvas,"zoom-canvas":ZoomCanvas,"drag-node":DragNode,"activate-relations":ActivateRelations,"brush-select":BrushSelect,"click-select":ClickSelect,"lasso-select":LassoSelect,tooltip:Tooltip,"edge-tooltip":EdgeTooltip,"collapse-expand":CollapseExpand,"drag-combo":DragCombo,"collapse-expand-combo":CollapseExpandCombo,"create-edge":CreateEdge,"shortcuts-call":ShortcutsCall,"scroll-canvas":ScrollCanvas};each(behaviors,(function(e,t){registerBehavior(t,e)}));var Algorithm=__assign$h(__assign$h({},AlgorithmSync),AlgorithmAsync);Plugin$1.Grid,Plugin$1.Minimap,Plugin$1.Bundling,Plugin$1.Menu;var Fisheye=Plugin$1.Fisheye;Plugin$1.ToolBar,Plugin$1.Tooltip;var TimeBar=Plugin$1.TimeBar,ImageMinimap=Plugin$1.ImageMinimap,EdgeFilterLens=Plugin$1.EdgeFilterLens,SnapLine=Plugin$1.SnapLine;Plugin$1.Legend;var Annotation=Plugin$1.Annotation;const G6={version:Global.version,Graph:Graph,TreeGraph:TreeGraph,Util:G6Util,Layout:lib.Layouts,TreeLayout:TreeLayout,registerLayout:registerLayout,Global:Global,registerBehavior:registerBehavior,registerCombo:registerCombo,registerEdge:registerEdge,registerNode:registerNode,Minimap:Plugin$1.Minimap,Grid:Plugin$1.Grid,Bundling:Plugin$1.Bundling,Menu:Plugin$1.Menu,ToolBar:Plugin$1.ToolBar,Tooltip:Plugin$1.Tooltip,Legend:Plugin$1.Legend,TimeBar:TimeBar,SnapLine:SnapLine,Fisheye:Fisheye,ImageMinimap:ImageMinimap,EdgeFilterLens:EdgeFilterLens,Annotation:Annotation,Algorithm:Algorithm,Arrow:Arrow$1,Marker:Marker$4,Shape:Shape$2};function eageoption(){const e=[4,2,1,2];G6.registerEdge("line-dash",{afterDraw(t,n){const r=n.get("children")[0];let i=0;r.animate((()=>{i++,i>9&&(i=0);return{lineDash:e,lineDashOffset:-i}}),{repeat:!0,duration:3e3})}},"cubic")}function nodeOption(){G6.registerNode("dom-node",{draw:(e,t)=>{const n="object"==typeof e.label?e.label[0]:e.label,r="rgba(255,255,255,0.5)"==e.border?"":"box-shadow:0px 0px 4px rgba(243,154,26,0.7);";let i=13*length;return t.addShape("dom",{attrs:{width:100,height:30,html:`\n          <div class='dom-node' style="background-color: rgba(0,0,0,0); border: 1px solid ${e.border};${r} ; width: 100px; height: 30px;display:flex;">\n            <p class="tree"  style="padding:auto; color: #FFF;width: ${i}px; line-height:30px;height:30px;text-overflow: ellipsis;width: 100%;\n            white-space: nowrap;\n            overflow: hidden; ">${n}</p>\n          </div>\n            `}})}})}G6.version="4.8.2";const data$1={nodes:[{id:"node1",label:"",border:"rgba(255,255,255,0.5)"},{id:"node2",label:"",border:"rgba(255,255,255,0.5)"}],edges:[{source:"node1",target:"node2"}]};function createTree(e,t){eageoption(),nodeOption();const n=new G6.Graph({container:"task-tree",width:e,height:t,fitCenter:!0,fitView:!0,renderer:"svg",layout:{type:"dagre",ranksepFunc:e=>""===e.label||""===e.label?50:13},defaultNode:{type:"dom-node",style:{stroke:"#72CC4A"}},defaultEdge:{type:"line-dash"},modes:{default:[{offset:0}]}});return n.data(data$1),n.render(),n.on("afterrender",(()=>{[...document.getElementsByClassName("tree")].forEach((e=>{e.onclick=e=>{events.emit("printMessage",e)}}));n.getNodes().length>1||(n.zoomTo(2),n.fitCenter())})),n}let returnData={};const data={nodes:[{id:"node1",label:"",border:"rgba(255,255,255,0.5)"},{id:"node2",label:"",border:"rgba(255,255,255,0.5)"}],edges:[{source:"node1",target:"node2"}]};function handelData(d){if(returnData={nodes:[{id:"task_type",label:d.task_type,border:"rgba(243,154,26,0.7)"}],edges:[]},""==d.task_type)return data;if(""==d.task_elements||"{}"==d.task_elements)return returnData;const ele=d.task_elements,reg=/u'/g,str=ele.replace(reg,"'"),obj=eval("("+str+")");return createTreeData(obj,"task_type"),returnData}function createTreeData(e,t){Object.keys(e).forEach((n=>{"[object Object]"===Object.prototype.toString.call(e[n])?(returnData.nodes.push({id:n,label:n,border:"rgba(243,154,26,0.7)"}),returnData.edges.push({source:t,target:n}),createTreeData(e[n],n)):(returnData.nodes.push({id:n,label:e[n],border:"rgba(243,154,26,0.7)"}),returnData.edges.push({source:t,target:n}))}))}const reg=/u'/g,re=/'/g;function handelStr(e){const t=e.replace(reg,"'").replace(re,'"'),n=JSON.parse(t);let r="";return n.forEach((e=>{r+=`:${e[0]}, :${e[1]}, :${e[2]}, :${e[3]};`})),r}const _hoisted_1$1=createBaseVNode("div",{id:"container",style:{height:"500px"}},null,-1),_sfc_main$2=defineComponent({__name:"index",setup(e){register$1({shape:"custom-vue-node",width:1e3,height:1e3,component:node,data:{node:80}});const t=getTeleport();function n(e){let t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)>255?t+=2:t++;return e.length==t}const r={fontSize:40,fill:"#fff",refX:100,refY:40},i={body:{strokeWidth:1,stroke:"#bde4f9",fill:"rgba(0,0,0,0)",left:1e5},text:{fontSize:30,fill:"#fff",refX:20,refY:40,textAnchor:"Start"}},{msg:o}=useMQTT("ws://10.5.24.28:8083/mqtt");let a="null";const s=30,l=1300,c=2450,u=1035;let h={},d={};function f(e){const{labels:t,x:r,y:i}=e,o=e.width||600;t.forEach(((t,s)=>{a.addNode({id:t+e.title,x:n(t)?r+.5*o:r,y:i+80*Math.floor(s/2),width:n(t)?1.5*o:.5*o,height:50,label:n(t)?"":t+":",shape:"html",html(){const r=document.createElement("div");r.style.width=(n(t)?1.5*o:.5*o)+"px",r.style.height="50px";const i=document.createElement("p");return i.innerText=n(t)?"":"",i.id=t+e.title,i.style.lineHeight="50px",i.style.whiteSpace="nowrap",i.className="node_text",r.className="node_wape",r.style.display="flex",r.style.justifyContent="center",r.append(i),r},attrs:{body:n(t)?{strokeWidth:1,stroke:"#bde4f9",fill:"rgba(0,0,0,0)",left:1e5}:{},text:{fontSize:30,fill:"#fff"}}})}))}function p(e,t,n=[]){const r=0==n.length?{name:"er",args:{offset:"center"}}:null;return a.addEdge({shape:"edge",source:e,target:t,vertices:n,router:r,attrs:{line:{stroke:"#ffffff",strokeWidth:5,strokeDasharray:5,targetMarker:{name:"classic",strokeWidth:1},style:{animation:"ant-line 30s infinite linear"}}},connector:"rounded"})}return onMounted((()=>{a=new Graph$5({interacting:{nodeMovable:!1,edgeMovable:!1},container:document.getElementById("container"),width:3840,height:2160});const{childNode4:e}=function(){a.addNode({x:s,y:s,width:l,height:2100,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width=l+"px",e.style.height="2100px",e.style.backgroundImage="linear-gradient(to bottom, rgba(68,84,118,0.9),transparent)",e.style.display="flex",e.style.boxSizing="border-box",e.style.boxShadow="0px 0px 4px #bde4f9",e},attrs:{text:r}});const e=a.addNode({x:50,y:110,width:1260,height:319,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="1260px",e.style.height="339px",e},attrs:i});f({labels:["","user_input","","error_info","","text_correct"],x:70,y:180,title:"error_correction_data"});const t=a.addNode({x:50,y:469,width:1260,height:226,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="1260px",e.style.height="226px",e},attrs:i}),o=a.addNode({x:50,y:735,width:1260,height:339,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="1260px",e.style.height="339px",e},attrs:i}),c=a.addNode({x:50,y:1114,width:1260,height:638,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="1260px",e.style.height="678px",e},attrs:i}),u=a.addNode({x:50,y:1792,width:1260,height:319,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="1260px",e.style.height="319px",e},attrs:i});var h,d;return f({labels:["","question","","abstract_question"],x:70,y:532,title:"abstract_data"}),f({labels:["","lastResponse","","user_input","","text_result"],x:70,y:811,title:"textual_reference_resolution_data"}),f({labels:["","user_input",""],x:70,y:1190,title:"visual_reference_resolution_data"}),a.addNode({id:"answervisual_reference_resolution_data",x:370,y:1270,width:900,height:370,shape:"html",html(){const e=document.createElement("div");e.style.width="900px",e.style.height="370px";const t=document.createElement("img");return t.id="imagevisual_reference_resolution_data",e.className="node_wape",e.append(t),e},attrs:{body:{strokeWidth:1,stroke:"#bde4f9",fill:"rgba(0,0,0,0)",left:1e5},text:{fontSize:30,fill:"#fff"}}}),f({labels:["","resolved"],x:70,y:1667,title:"visual_reference_resolution_data"}),f({labels:["","user_input"],x:70,y:1868,title:"intent_classification_data"}),h=70,d=1941,[{name:"",label:["label1","label2","label3","label4"]},{name:"",label:["PROB_1","PROB_2","PROB_3","PROB_4"]}].forEach(((e,t)=>{const r=n(e.name);a.addNode({id:e.name+"intent_classification_data",x:h,y:d+80*t,width:300,height:50,label:r?"":e.name+":",shape:"html",html(){const t=document.createElement("div");t.style.width="300px";const r=document.createElement("p");return r.innerText=n(e.name)?"":"",r.id=e+"intent_classification_data",r.className="node_text",r.style.whiteSpace="nowrap",r.style.lineHeight="50px",t.style.display="flex",t.style.justifyContent="center",t.className="node_wape",t.append(r),t},attrs:{body:{strokeWidth:r?1:0,stroke:"#bde4f9",fill:"rgba(0,0,0,0)",left:1e5},text:{fontSize:30,fill:"#fff"}}}),e.label.forEach(((e,n)=>{a.addNode({id:e+"intent_classification_data",x:h+300+225*n,y:d+80*t,width:225,height:50,shape:"html",html(){const t=document.createElement("div");t.style.width="225px";const n=document.createElement("p");return n.innerText="",n.id=e+"intent_classification_data",n.className="node_text",n.style.whiteSpace="nowrap",n.style.lineHeight="50px",t.style.display="flex",t.style.justifyContent="center",t.className="node_wape",t.append(n),t},attrs:{body:{strokeWidth:1,stroke:"#bde4f9",fill:"rgba(0,0,0,0)",left:1e5},text:{fontSize:30,fill:"#fff"}}})}))})),p(e,t),p(t,o),p(o,c),p(c,u),{childNode4:u}}(),{childNode5:t,childNode6:o}=function(){a.addNode({x:1360,y:s,width:c,height:u,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width=c+"px",e.style.height=u+"px",e.style.backgroundImage="linear-gradient(to bottom, rgba(36,30,62,0.9),transparent)",e.style.boxSizing="border-box",e.style.boxShadow="0px 0px 4px #bde4f9",e},attrs:{text:r}}).toBack();const e=a.addNode({x:1560,y:226,width:925,height:565,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="925px",e.style.height="565px",e},attrs:i}),t=a.addNode({x:2685,y:339,width:925,height:339,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width="925px",e.style.height="339px",e},attrs:i});return f({labels:["","command"],x:1580,y:296,width:432.5,title:"task_identification_data"}),a.addNode({x:1580,y:386,width:885,height:379,label:"",shape:"html",html(){const e=document.createElement("div");return e.id="task-tree",e.style.width="885px",e.style.height="379px",e},attrs:i}),f({labels:["","user_input","","ambigutity","","response"],x:2705,y:419,width:432.5,title:"multiple_rounds_of_dialogue_data"}),{childNode5:e,childNode6:t}}(),{node3:g}=function(){const e=a.addNode({x:1360,y:1095,width:c,height:1035,label:"",shape:"html",html(){const e=document.createElement("div");return e.style.width=c+"px",e.style.height="1035px",e.style.backgroundImage="linear-gradient(to bottom, rgba(214,123,23,0.6),transparent)",e.style.display="flex",e.style.boxSizing="border-box",e.style.boxShadow="0px 0px 4px #bde4f9",e},attrs:{text:r}});return h=a.addNode({shape:"custom-vue-node",x:1360,y:1095}),{node3:e,vueNode:h}}();p(e,t,[{x:1335,y:1920},{x:1335,y:510}]),p(t,o),p(e,g,[{x:1335,y:1920},{x:1335,y:1550}]),p(g,o),d=createTree(885,379),insertCss$1.exports("\n    @keyframes ant-line {\n      to {\n          stroke-dashoffset: -1000\n      }\n    }\n    .node_wape{\n       overflow: hidden;\n    }\n    .node_wape p{\n      line-height:height;\n      color: #ffffff;\n      font-size: 30px;\n      overflow: hidden;\n      text-overflow:ellipsis;\n       white-space: nowrap\n    }\n    .node_wape img{\n        width: 100%;\n        height: 100%;\n      }\n  ")})),watchEffect((()=>{!function(e){e&&Object.keys(e).forEach((t=>{Object.keys(e[t]).forEach((n=>{const r=document.getElementById(n+t),i=a.getCellById(n+t);if("task_identification_data"==t&&""!==e[t]&&d&&d.read(handelData(e[t])),r){if("visual_reference_resolution_data"==t&&"image"==n){if(r)if(e[t][n].indexOf("data:image/png;base64,")>0)r.setAttribute("src",e[t][n]);else{const i="data:image/png;base64,"+e[t][n];r.setAttribute("src",i)}}else if("error_info"==n&&"[]"!=e[t][n])r.innerText=handelStr(e[t][n]);else if("resolved"===n&&""!=e[t][n]){const i=/u'/g,o=/'/g,a=e[t][n].replace(i,"'").replace(o,'"'),s=JSON.parse(a),l=Object.keys(s).map((e=>{var t;return null==(t=s[e])?void 0:t.grounded}));r.innerText=l.flat().join(",")}else r.innerText=e[t][n];""==e[t][n]||"[]"==e[t][n]?(i&&i.setAttrs({body:{stroke:"rgba(255,255,255,0.5)",strokeWidth:4,filter:{name:"highlight",args:{color:"rgba(255,255,255,0.5)",width:4,blur:10,opacity:.6}}}}),r.innerText=""):i.setAttrs({body:{stroke:"rgba(243,154,26,0.7)",strokeWidth:4,filter:{name:"highlight",args:{color:"rgba(243,154,26,0.7)",width:4,blur:10,opacity:.6}}}})}h.setData({node:{name:t,value:e}})}))}))}(o.value)})),(e,n)=>{const r=resolveComponent("Legend");return openBlock(),createElementBlock(Fragment,null,[_hoisted_1$1,createVNode(unref(t)),createVNode(r)],64)}}}),index_vue_vue_type_style_index_0_lang="",_imports_0=""+new URL("home.e72a5471.jpg",import.meta.url).href,TabBar_vue_vue_type_style_index_0_scoped_85e1891e_lang="",_withScopeId=e=>(pushScopeId("data-v-85e1891e"),e=e(),popScopeId(),e),_hoisted_1={class:"menu"},_hoisted_2=_withScopeId((()=>createBaseVNode("img",{src:_imports_0,alt:""},null,-1))),_hoisted_3=_withScopeId((()=>createBaseVNode("p",null,"",-1))),_hoisted_4=[_hoisted_2,_hoisted_3],_sfc_main$1={__name:"TabBar",setup(e){let t=ref$1(),n=ref$1(),r=ref$1(!1);const i=()=>{"top_bar"===n.value.className?(n.value.className="top_bar top_bar_alive",t.value.className="menu_box menu_alive",r.value=!0):(n.value.className="top_bar",t.value.className="menu_box",r.value=!1)};return(e,o)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",null,[createBaseVNode("div",{class:"top_bar",ref_key:"tbRef",ref:n,onClick:i},null,512),createBaseVNode("div",{ref_key:"menuRef",ref:t,class:"menu_box"},[withDirectives(createBaseVNode("ul",_hoisted_1,[createBaseVNode("li",{onClick:o[0]||(o[0]=e=>{return t="http://flow.test.jsfw666.com/",void(window.location.href=t);var t})},_hoisted_4)],512),[[vShow,unref(r)]])],512)]),withDirectives(createBaseVNode("div",{class:"backGround",onClick:i},null,512),[[vShow,unref(r)]])],64))}},TabBar=_export_sfc(_sfc_main$1,[["__scopeId","data-v-85e1891e"]]),_sfc_main={__name:"App",setup:e=>(e,t)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$2),createVNode(TabBar)],64))},style="";var Rn;const kt=typeof window<"u",Wi=e=>"string"==typeof e,Jt=()=>{};function yn(e){return"function"==typeof e?e():unref(e)}function zi(e,t){return function(...n){e((()=>t.apply(this,n)),{fn:t,thisArg:this,args:n})}}function qi(e,t={}){let n,r;return i=>{const o=yn(e),a=yn(t.maxWait);if(n&&clearTimeout(n),o<=0||void 0!==a&&a<=0)return r&&(clearTimeout(r),r=null),i();a&&!r&&(r=setTimeout((()=>{n&&clearTimeout(n),r=null,i()}),a)),n=setTimeout((()=>{r&&clearTimeout(r),r=null,i()}),o)}}function Ii(e){return e}function Hi(e){return!!getCurrentScope()&&(onScopeDispose(e),!0)}function Vi(e,t=200,n={}){return zi(qi(t,n),e)}function Ui(e){var t;const n=yn(e);return null!=(t=null==n?void 0:n.$el)?t:n}kt&&(null==(Rn=null==window?void 0:window.navigator)?void 0:Rn.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const Qi=kt?window:void 0;function Xi(...e){let t,n,r,i;if(Wi(e[0])?([n,r,i]=e,t=Qi):[t,n,r,i]=e,!t)return Jt;let o=Jt;const a=watch((()=>Ui(t)),(e=>{o(),e&&(e.addEventListener(n,r,i),o=()=>{e.removeEventListener(n,r,i),o=Jt})}),{immediate:!0,flush:"post"}),s=()=>{a(),o()};return Hi(s),s}const bn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn="__vueuse_ssr_handlers__";var Tn;bn[xn]=bn[xn]||{},bn[xn],function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"}(Tn||(Tn={}));var Yi=Object.defineProperty,Mn=Object.getOwnPropertySymbols,Ki=Object.prototype.hasOwnProperty,Ji=Object.prototype.propertyIsEnumerable,Dn=(e,t,n)=>t in e?Yi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zi=(e,t)=>{for(var n in t||(t={}))Ki.call(t,n)&&Dn(e,n,t[n]);if(Mn)for(var n of Mn(t))Ji.call(t,n)&&Dn(e,n,t[n]);return e};const eo={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};function _t(e,t){return 1===arguments.length?parseInt((Math.random()*e+1).toString(),10):parseInt((Math.random()*(t-e+1)+e).toString(),10)}function to(e,t){const n=new(0,window.MutationObserver)(t);return n.observe(e,{attributes:!0,attributeFilter:["style"],attributeOldValue:!0}),n}function zt(e,t){const n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]);return Math.sqrt(n*n+r*r)}function nt(e,t,n,r){return[e+Math.cos(r)*n,t+Math.sin(r)*n]}function ro(e){return e.filter((e=>"number"==typeof e))}function no(e){return(e=ro(e)).reduce(((e,t)=>e+t),0)}function ao(e,t){const n=Math.abs(e.x-t.x),r=Math.abs(e.y-t.y);return Math.sqrt(n*n+r*r)}function Fn(e){const t=new Array(e.length-1).fill(0).map(((t,n)=>[e[n],e[n+1]])).map((e=>ao(e[0],e[1])));return no(t)}function io(e){return`${e.x},${e.y}`}function Bn(e){return e.map(io).join(" ")}function Ve(e){return(e?"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx":"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx").replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function xe(e,t){for(const n in t)e[n]&&"object"==typeof e[n]?xe(e[n],t[n]):"object"!=typeof t[n]?e[n]=t[n]:e[n]=_e(t[n],!0);return e}function _e(e,t){if(!e)return e;const{parse:n,stringify:r}=JSON;if(!t)return n(r(e));const i=Array.isArray(e)?[]:{};if(e&&"object"==typeof e)for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(e[o]&&"object"==typeof e[o]?i[o]=_e(e[o],!0):i[o]=e[o]);return i}Zi({linear:Ii},eo);const be=(e,t,n)=>{const r=ref$1(0),i=ref$1(0);let o,a=null,s=null;const l=(n=!0)=>new Promise((o=>{nextTick((()=>{s=e.value,r.value=e.value?e.value.clientWidth:0,i.value=e.value?e.value.clientHeight:0,e.value&&(!r.value||i.value),"function"==typeof t&&n&&t(),o(!0)}))})),c=async()=>{await l(!1),o=Vi(l,200),a=to(s,o),Xi(window,"resize",o),"function"==typeof n&&n()};return onMounted((()=>{c()})),onUnmounted((()=>{!a||(a.disconnect(),a.takeRecords(),a=null)})),{width:r,height:i,initWH:l}},oo=["width","height"],lo=["d","fill"],so=["fill","x","y"],uo=["xlink:href","width","height","x","y"],co=["fill","x","y"],fo={__name:"index",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=ref$1(null),{width:r,height:i}=be(n,(function(){a()}),(function(){a()})),o=reactive({defaultConfig:{data:[],img:[],fontSize:12,imgSideLength:30,columnColor:"rgba(0, 194, 255, 0.4)",textColor:"#fff",showValue:!1},mergedConfig:null,column:[]});function a(){o.mergedConfig=xe(_e(o.defaultConfig,!0),t.config||{}),function(){let{data:e}=o.mergedConfig;e=_e(e,!0),e.sort((({value:e},{value:t})=>e>t?-1:e<t?1:0));const t=e[0]?e[0].value:10;e=e.map((e=>({...e,percent:e.value/t}))),o.mergedConfig.data=e}(),function(){const{imgSideLength:e,fontSize:t,data:n}=o.mergedConfig,a=n.length,s=r.value/(a+1),l=i.value-e-t-5,c=i.value-t-5;o.column=n.map(((e,n)=>{const{percent:r}=e,i=s*(n+1),o=s*n,a=c-l*r,u=l*r*.6+a,h=`\n          M${o}, ${c}\n          Q${i}, ${u} ${i},${a}\n          M${i},${a}\n          Q${i}, ${u} ${s*(n+2)},${c}\n          L${o}, ${c}\n          Z\n        `,d=(c+a)/2+t/2;return{...e,d:h,x:i,y:a,textY:d}}))}()}return watch((()=>t.config),(()=>{a()}),{deep:!0}),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"conicalColumnChart",ref:n,class:"dv-conical-column-chart"},[(openBlock(),createElementBlock("svg",{width:unref(r),height:unref(i)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.column,((e,t)=>(openBlock(),createElementBlock("g",{key:t},[createBaseVNode("path",{d:e.d,fill:o.mergedConfig.columnColor},null,8,lo),createBaseVNode("text",{style:normalizeStyle(`fontSize:${o.mergedConfig.fontSize}px`),fill:o.mergedConfig.textColor,x:e.x,y:unref(i)-4},toDisplayString(e.name),13,so),o.mergedConfig.img.length?(openBlock(),createElementBlock("image",{key:0,"xlink:href":o.mergedConfig.img[t%o.mergedConfig.img.length],width:o.mergedConfig.imgSideLength,height:o.mergedConfig.imgSideLength,x:e.x-o.mergedConfig.imgSideLength/2,y:e.y-o.mergedConfig.imgSideLength},null,8,uo)):createCommentVNode("",!0),o.mergedConfig.showValue?(openBlock(),createElementBlock("text",{key:1,style:normalizeStyle(`fontSize:${o.mergedConfig.fontSize}px`),fill:o.mergedConfig.textColor,x:e.x,y:e.textY},toDisplayString(e.value),13,co)):createCommentVNode("",!0)])))),128))],8,oo))],512))}},Zt={install(e){e.component("DvConicalColumnChart",fo)}},ho=["id"],vo=["offset","stop-color"],po=["id","x2"],go=["offset","stop-color"],mo=["x","y","rx","ry","stroke-width","stroke","width","height"],yo=["stroke-width","stroke-dasharray","stroke","points"],bo=["stroke","fill","x","y"],xo={__name:"index",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=Ve(),r=ref$1(null),i=reactive({gradientId1:`percent-pond-gradientId1-${n}`,gradientId2:`percent-pond-gradientId2-${n}`,width:0,height:0,defaultConfig:{value:0,colors:["#3DE7C9","#00BAFF"],borderWidth:3,borderGap:3,lineDash:[5,1],textColor:"#fff",borderRadius:5,localGradient:!1,formatter:"{value}%"},mergedConfig:null}),o=computed((()=>{if(!i.mergedConfig)return 0;const{borderWidth:e}=i.mergedConfig;return i.width-e})),a=computed((()=>{if(!i.mergedConfig)return 0;const{borderWidth:e}=i.mergedConfig;return i.height-e})),s=computed((()=>{const e=i.height/2;if(!i.mergedConfig)return`0, ${e} 0, ${e}`;const{borderWidth:t,borderGap:n,value:r}=i.mergedConfig;return`\n        ${t+n}, ${e}\n        ${t+n+(i.width-2*(t+n))/100*r}, ${e+.001}\n      `})),l=computed((()=>{if(!i.mergedConfig)return 0;const{borderWidth:e,borderGap:t}=i.mergedConfig;return i.height-2*(e+t)})),c=computed((()=>{if(!i.mergedConfig)return[];const{colors:e}=i.mergedConfig,t=100/(e.length-1);return e.map(((e,n)=>[t*n,e]))})),u=computed((()=>i.mergedConfig&&i.mergedConfig.localGradient?i.gradientId1:i.gradientId2)),h=computed((()=>{if(!i.mergedConfig)return"100%";const{value:e}=i.mergedConfig;return 200-e+"%"})),d=computed((()=>{if(!i.mergedConfig)return"";const{value:e,formatter:t}=i.mergedConfig;return t.replace("{value}",e)}));function f(){i.mergedConfig=xe(_e(i.defaultConfig,!0),t.config||{})}return watch((()=>t.config),(()=>{f()}),{deep:!0}),onMounted((()=>{!async function(){await async function(){await nextTick();const{clientWidth:e,clientHeight:t}=r.value;i.width=e,i.height=t}(),t.config&&f()}()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"percentPond",ref:r,class:"dv-percent-pond"},[(openBlock(),createElementBlock("svg",null,[createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:i.gradientId1,x1:"0%",y1:"0%",x2:"100%",y2:"0%"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),(e=>(openBlock(),createElementBlock("stop",{key:e[0],offset:`${e[0]}%`,"stop-color":e[1]},null,8,vo)))),128))],8,ho),createBaseVNode("linearGradient",{id:i.gradientId2,x1:"0%",y1:"0%",x2:unref(h),y2:"0%"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(c),(e=>(openBlock(),createElementBlock("stop",{key:e[0],offset:`${e[0]}%`,"stop-color":e[1]},null,8,go)))),128))],8,po)]),createBaseVNode("rect",{x:i.mergedConfig?i.mergedConfig.borderWidth/2:"0",y:i.mergedConfig?i.mergedConfig.borderWidth/2:"0",rx:i.mergedConfig?i.mergedConfig.borderRadius:"0",ry:i.mergedConfig?i.mergedConfig.borderRadius:"0",fill:"transparent","stroke-width":i.mergedConfig?i.mergedConfig.borderWidth:"0",stroke:`url(#${i.gradientId1})`,width:unref(o)>0?unref(o):0,height:unref(a)>0?unref(a):0},null,8,mo),createBaseVNode("polyline",{"stroke-width":unref(l),"stroke-dasharray":i.mergedConfig?i.mergedConfig.lineDash.join(","):"0",stroke:`url(#${unref(u)})`,points:unref(s)},null,8,yo),createBaseVNode("text",{stroke:i.mergedConfig?i.mergedConfig.textColor:"#fff",fill:i.mergedConfig?i.mergedConfig.textColor:"#fff",x:i.width/2,y:i.height/2},toDisplayString(unref(d)),9,bo)]))],512))}},er={install(e){e.component("DvPercentPond",xo)}};function ii(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vt={},Pe={exports:{}};!function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports}(Pe);var tr={},rr={exports:{}},Nn;function Ue(){return Nn||(Nn=1,function(e){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}(rr)),rr.exports}var nr={exports:{}},ar={exports:{}},ir={exports:{}},jn,En;function oi(){return jn||(jn=1,function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports}(ir)),ir.exports}function Co(){return En||(En=1,function(e){var t=oi();e.exports=function(e){if(Array.isArray(e))return t(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(ar)),ar.exports}var or={exports:{}},Wn;function _o(){return Wn||(Wn=1,function(e){e.exports=function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports}(or)),or.exports}var lr={exports:{}},zn;function li(){return zn||(zn=1,function(e){var t=oi();e.exports=function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}},e.exports.__esModule=!0,e.exports.default=e.exports}(lr)),lr.exports}var sr={exports:{}},qn,In;function $o(){return qn||(qn=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(sr)),sr.exports}function Me(){return In||(In=1,function(e){var t=Co(),n=_o(),r=li(),i=$o();e.exports=function(e){return t(e)||n(e)||r(e)||i()},e.exports.__esModule=!0,e.exports.default=e.exports}(nr)),nr.exports}var ur={exports:{}},Hn;function At(){return Hn||(Hn=1,function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}(ur)),ur.exports}var cr={},fr={},Vn,Un;function Po(){return Vn||(Vn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=new Map([["transparent","rgba(0,0,0,0)"],["black","#000000"],["silver","#C0C0C0"],["gray","#808080"],["white","#FFFFFF"],["maroon","#800000"],["red","#FF0000"],["purple","#800080"],["fuchsia","#FF00FF"],["green","#008000"],["lime","#00FF00"],["olive","#808000"],["yellow","#FFFF00"],["navy","#000080"],["blue","#0000FF"],["teal","#008080"],["aqua","#00FFFF"],["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["blanchedalmond","#ffebcd"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["oldlace","#fdf5e6"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["whitesmoke","#f5f5f5"],["yellowgreen","#9acd32"]]);e.default=t}(fr)),fr}function it(){return Un||(Un=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.getRgbValue=l,e.getRgbaValue=c,e.getOpacity=u,e.toRgb=h,e.toHex=d,e.getColorFromRgbValue=f,e.darken=p,e.lighten=g,e.fade=m,e.default=void 0;var n=t(Me()),r=t(Po()),i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/,o=/^(rgb|rgba|RGB|RGBA)/,a=/^(rgba|RGBA)/;function s(e){var t=i.test(e),n=o.test(e);return t||n?e:(e=function(e){return!!e&&(!!r.default.has(e)&&r.default.get(e))}(e))||!1}function l(e){if(!e)return!1;if(!(e=s(e)))return!1;var t=i.test(e),n=o.test(e),r=e.toLowerCase();return t?function(e){return e=e.replace("#",""),3===e.length&&(e=Array.from(e).map((function(e){return e+e})).join("")),e=e.split(""),new Array(3).fill(0).map((function(t,n){return parseInt("0x".concat(e[2*n]).concat(e[2*n+1]))}))}(r):n?function(e){return e.replace(/rgb\(|rgba\(|\)/g,"").split(",").slice(0,3).map((function(e){return parseInt(e)}))}(r):void 0}function c(e){if(!e)return!1;var t=l(e);return!!t&&(t.push(u(e)),t)}function u(e){return!!e&&(!!(e=s(e))&&(a.test(e)?(e=e.toLowerCase(),Number(e.split(",").slice(-1)[0].replace(/[)|\s]/g,""))):1))}function h(e,t){if(!e)return!1;var n=l(e);return!!n&&("number"==typeof t?"rgba("+n.join(",")+",".concat(t,")"):"rgb("+n.join(",")+")")}function d(e){return!!e&&(i.test(e)?e:!!(e=l(e))&&"#"+e.map((function(e){return Number(e).toString(16)})).map((function(e){return"0"===e?"00":e})).join(""))}function f(e){if(!e)return!1;var t=e.length;if(3!==t&&4!==t)return!1;var n=3===t?"rgb(":"rgba(";return n+=e.join(",")+")"}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;var n=c(e);return!!n&&f(n=n.map((function(e,n){return 3===n?e:e-Math.ceil(2.55*t)})).map((function(e){return e<0?0:e})))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return!1;var n=c(e);return!!n&&f(n=n.map((function(e,n){return 3===n?e:e+Math.ceil(2.55*t)})).map((function(e){return e>255?255:e})))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!e)return!1;var r=l(e);if(!r)return!1;var i=[].concat((0,n.default)(r),[t/100]);return f(i)}var v={fade:m,toHex:d,toRgb:h,darken:p,lighten:g,getOpacity:u,getRgbValue:l,getRgbaValue:c,getColorFromRgbValue:f};e.default=v}(cr)),cr}var dr={},hr={},vr={exports:{}},pr={exports:{}},Qn;function wo(){return Qn||(Qn=1,function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports}(pr)),pr.exports}var gr={exports:{}},Xn;function ko(){return Xn||(Xn=1,function(e){e.exports=function(e,t){var n=null==e?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{!a&&null!=n.return&&n.return()}finally{if(s)throw i}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports}(gr)),gr.exports}var mr={exports:{}},Yn,Kn,Jn;function Ao(){return Yn||(Yn=1,function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}(mr)),mr.exports}function Ne(){return Kn||(Kn=1,function(e){var t=wo(),n=ko(),r=li(),i=Ao();e.exports=function(e,o){return t(e)||n(e,o)||r(e,o)||i()},e.exports.__esModule=!0,e.exports.default=e.exports}(vr)),vr.exports}function So(){return Jn||(Jn=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.bezierCurveToPolyline=p,e.getBezierCurveLength=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return!1;if(!(e instanceof Array))return!1;if("number"!=typeof t)return!1;var n=l(e,t),r=n.segmentPoints,i=h([r])[0],o=u(i);return o},e.default=void 0;var n=t(Ne()),r=t(Me()),i=Math.sqrt,o=Math.pow,a=Math.ceil,s=Math.abs;function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=e.length-1,i=e[0],o=e[n][2],a=e.slice(1),s=a.map((function(e,t){var n=0===t?i:a[t-1][2];return c.apply(void 0,[n].concat((0,r.default)(e)))})),l=new Array(n).fill(50),u=d(s,l),h=f(u,s,a,t);return h.segmentPoints.push(o),h}function c(e,t,n,r){return function(i){var a=1-i,s=o(a,3),l=o(a,2),c=o(i,3),u=o(i,2);return[e[0]*s+3*t[0]*i*l+3*n[0]*u*a+r[0]*c,e[1]*s+3*t[1]*i*l+3*n[1]*u*a+r[1]*c]}}function u(e){return e.reduce((function(e,t){return e+t}),0)}function h(e){return e.map((function(e,t){return new Array(e.length-1).fill(0).map((function(t,r){return function(e,t){var r=(0,n.default)(e,2),a=r[0],s=r[1],l=(0,n.default)(t,2),c=l[0],u=l[1];return i(o(a-c,2)+o(s-u,2))}(e[r],e[r+1])}))}))}function d(e,t){return e.map((function(e,n){var r=1/t[n];return new Array(t[n]).fill("").map((function(t,n){return e(n*r)}))}))}function f(e,t,n,r){var i=4,o=1,l=function(){var l=e.reduce((function(e,t){return e+t.length}),0);e.forEach((function(e,t){return e.push(n[t][2])}));var c=h(e),f=c.reduce((function(e,t){return e+t.length}),0),p=c.map((function(e){return u(e)})),g=u(p),m=g/f,v=function(e,t){return e.map((function(e){return e.map((function(e){return s(e-t)}))})).map((function(e){return u(e)})).reduce((function(e,t){return e+t}),0)}(c,m);if(v<=r)return"break";l=a(m/r*l*1.1);var y=p.map((function(e){return a(e/g*l)}));e=d(t,y),l=e.reduce((function(e,t){return e+t.length}),0);var b=JSON.parse(JSON.stringify(e));b.forEach((function(e,t){return e.push(n[t][2])})),f=(c=h(b)).reduce((function(e,t){return e+t.length}),0),p=c.map((function(e){return u(e)})),g=u(p),m=g/f;var x=1/l/10;t.forEach((function(t,n){for(var r=y[n],o=new Array(r).fill("").map((function(e,t){return t/y[n]})),a=0;a<i;a++)for(var s=h([e[n]])[0].map((function(e){return e-m})),l=0,c=0;c<r;c++){if(0===c)return;l+=s[c-1],o[c]-=x*l,o[c]>1&&(o[c]=1),o[c]<0&&(o[c]=0),e[n][c]=t(o[c])}})),i*=4,o++};do{if("break"===l())break}while(i<=1025);return{segmentPoints:e=e.reduce((function(e,t){return e.concat(t)}),[]),cycles:o,rounds:i}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;if(!e)return!1;if(!(e instanceof Array))return!1;if("number"!=typeof t)return!1;var n=l(e,t),r=n.segmentPoints;return r}var g=p;e.default=g}(hr)),hr}var yr={},Zn,ea;function Lo(){return Zn||(Zn=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ne()),r=t(Me());function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.25,o=e.length;if(!(o<3||t>=o)){var a=t-1;a<0&&(a=n?o+a:0);var s=t+1;s>=o&&(s=n?s-o:o-1);var l=t+2;l>=o&&(l=n?l-o:o-1);var c=e[a],u=e[t],h=e[s],d=e[l];return[[u[0]+r*(h[0]-c[0]),u[1]+r*(h[1]-c[1])],[h[0]-i*(d[0]-u[0]),h[1]-i*(d[1]-u[1])]]}}function o(e,t){var n=e[0],r=e.slice(-1)[0];return e.push([a(r[1],r[2]),a(n[0],t),t]),e}function a(e,t){var r=(0,n.default)(e,2),i=r[0],o=r[1],a=(0,n.default)(t,2),s=a[0],l=a[1];return[s+(s-i),l+(l-o)]}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.25,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25;if(!(e instanceof Array))return!1;if(e.length<=2)return!1;var s=e[0],l=e.length-1,c=new Array(l).fill(0).map((function(o,s){return[].concat((0,r.default)(i(e,s,t,n,a)),[e[s+1]])}));return t&&o(c,s),c.unshift(e[0]),c};e.default=s}(yr)),yr}function wn(){return ea||(ea=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"bezierCurveToPolyline",{enumerable:!0,get:function(){return n.bezierCurveToPolyline}}),Object.defineProperty(e,"getBezierCurveLength",{enumerable:!0,get:function(){return n.getBezierCurveLength}}),Object.defineProperty(e,"polylineToBezierCurve",{enumerable:!0,get:function(){return r.default}}),e.default=void 0;var n=So(),r=t(Lo()),i={bezierCurveToPolyline:n.bezierCurveToPolyline,getBezierCurveLength:n.getBezierCurveLength,polylineToBezierCurve:r.default};e.default=i}(dr)),dr}var br={},xr={exports:{}},ta,ra;function ze(){return ta||(ta=1,function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(xr)),xr.exports}function Fe(){return ra||(ra=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.deepClone=d,e.eliminateBlur=f,e.checkPointIsInCircle=p,e.getTwoPointDistance=g,e.checkPointIsInPolygon=m,e.checkPointIsInSector=v,e.checkPointIsNearPolyline=b,e.checkPointIsInRect=function(e,t,n,i,o){var a=(0,r.default)(e,2),s=a[0],l=a[1];return!(s<t||l<n||s>t+i||l>n+o)},e.getRotatePointPos=x,e.getScalePointPos=w,e.getTranslatePointPos=_,e.getDistanceBetweenPointAndLine=C,e.getCircleRadianPoint=$,e.getRegularPolygonPoints=S,e.default=void 0;var n=t(Me()),r=t(Ne()),i=t(ze()),o=Math.abs,a=Math.sqrt,s=Math.sin,l=Math.cos,c=Math.max,u=Math.min,h=Math.PI;function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return e;var n=JSON.parse,r=JSON.stringify;if(!t)return n(r(e));var o=e instanceof Array?[]:{};if(e&&"object"===(0,i.default)(e))for(var a in e)e.hasOwnProperty(a)&&(e[a]&&"object"===(0,i.default)(e[a])?o[a]=d(e[a],!0):o[a]=e[a]);return o}function f(e){return e.map((function(e){var t=(0,r.default)(e,2),n=t[0],i=t[1];return[parseInt(n)+.5,parseInt(i)+.5]}))}function p(e,t,n,r){return g(e,[t,n])<=r}function g(e,t){var n=(0,r.default)(e,2),i=n[0],s=n[1],l=(0,r.default)(t,2),c=l[0],u=l[1],h=o(i-c),d=o(s-u);return a(h*h+d*d)}function m(e,t){for(var n=0,i=(0,r.default)(e,2),o=i[0],a=i[1],s=t.length,l=1,h=t[0];l<=s;l++){var d=t[l%s];if(o>u(h[0],d[0])&&o<=c(h[0],d[0])&&a<=c(h[1],d[1])&&h[0]!==d[0]){var f=(o-h[0])*(d[1]-h[1])/(d[0]-h[0])+h[1];(h[1]===d[1]||a<=f)&&n++}h=d}return n%2==1}function v(e,t,n,i,o,a,s){if(!e||g(e,[t,n])>i)return!1;if(!s){var l=d([a,o]),c=(0,r.default)(l,2);o=c[0],a=c[1]}var u=o>a;if(u){var f=[a,o];o=f[0],a=f[1]}var p=a-o;if(p>=2*h)return!0;var m=(0,r.default)(e,2),v=m[0],b=m[1],x=$(t,n,i,o),w=(0,r.default)(x,2),_=w[0],C=w[1],S=$(t,n,i,a),E=(0,r.default)(S,2),A=[v-t,b-n],M=[_-t,C-n],k=[E[0]-t,E[1]-n],T=p>h;if(T){var P=d([k,M]),O=(0,r.default)(P,2);M=O[0],k=O[1]}var N=y(M,A)&&!y(k,A);return T&&(N=!N),u&&(N=!N),N}function y(e,t){var n=(0,r.default)(e,2),i=n[0],o=n[1],a=(0,r.default)(t,2);return-o*a[0]+i*a[1]>0}function b(e,t,i){var o=i/2,a=t.map((function(e){var t=(0,r.default)(e,2);return[t[0],t[1]-o]})),s=t.map((function(e){var t=(0,r.default)(e,2);return[t[0],t[1]+o]}));return m(e,[].concat((0,n.default)(a),(0,n.default)(s.reverse())))}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];if(!t)return!1;if(e%360==0)return t;var i=(0,r.default)(t,2),o=i[0],a=i[1],c=(0,r.default)(n,2),u=c[0],d=c[1];return[(o-u)*l(e*=h/180)-(a-d)*s(e)+u,(o-u)*s(e)+(a-d)*l(e)+d]}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1,1],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];if(!t)return!1;if(1===e)return t;var i=(0,r.default)(t,2),o=i[0],a=i[1],s=(0,r.default)(n,2),l=s[0],c=s[1],u=(0,r.default)(e,2),h=u[0],d=u[1],f=o-l,p=a-c;return[f*h+l,p*d+c]}function _(e,t){if(!e||!t)return!1;var n=(0,r.default)(t,2),i=n[0],o=n[1],a=(0,r.default)(e,2);return[i+a[0],o+a[1]]}function C(e,t,n){if(!e||!t||!n)return!1;var i=(0,r.default)(e,2),s=i[0],l=i[1],c=(0,r.default)(t,2),u=c[0],h=c[1],d=(0,r.default)(n,2),f=d[0],p=d[1],g=p-h,m=u-f;return o(g*s+m*l+(h*(f-u)-u*(p-h)))/a(g*g+m*m)}function $(e,t,n,r){return[e+l(r)*n,t+s(r)*n]}function S(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-.5*h,o=2*h/r,a=new Array(r).fill("").map((function(e,t){return t*o+i}));return a.map((function(r){return $(e,t,n,r)}))}var E={deepClone:d,eliminateBlur:f,checkPointIsInCircle:p,checkPointIsInPolygon:m,checkPointIsInSector:v,checkPointIsNearPolyline:b,getTwoPointDistance:g,getRotatePointPos:x,getScalePointPos:w,getTranslatePointPos:_,getCircleRadianPoint:$,getRegularPolygonPoints:S,getDistanceBetweenPointAndLine:C};e.default=E}(br)),br}var Cr={},_r={},na,aa;function Oo(){return na||(na=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.drawPolylinePath=r,e.drawBezierCurvePath=i,e.default=void 0;var n=t(Me());function r(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e||t.length<2)return!1;r&&e.beginPath(),t.forEach((function(t,r){return t&&(0===r?e.moveTo.apply(e,(0,n.default)(t)):e.lineTo.apply(e,(0,n.default)(t)))})),i&&e.closePath()}function i(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e||!t)return!1;i&&e.beginPath(),r&&e.moveTo.apply(e,(0,n.default)(r)),t.forEach((function(t){return t&&e.bezierCurveTo.apply(e,(0,n.default)(t[0]).concat((0,n.default)(t[1]),(0,n.default)(t[2])))})),o&&e.closePath()}var o={drawPolylinePath:r,drawBezierCurvePath:i};e.default=o}(_r)),_r}function kn(){return aa||(aa=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.extendNewGraph=function(e,t){if(!e||!t)return;if(!t.shape)return;if(!t.validator)return;if(!t.draw)return;x.set(e,t)},e.default=e.text=e.bezierCurve=e.smoothline=e.polyline=e.regPolygon=e.sector=e.arc=e.ring=e.rect=e.ellipse=e.circle=void 0;var n=t(Me()),r=t(Ne()),i=t(wn()),o=Fe(),a=Oo(),s=i.default.polylineToBezierCurve,l=i.default.bezierCurveToPolyline,c={shape:{rx:0,ry:0,r:0},validator:function(e){var t=e.shape,n=t.rx,r=t.ry,i=t.r;return"number"==typeof n&&"number"==typeof r&&"number"==typeof i},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.r;n.arc(i,o,a>0?a:.01,0,2*Math.PI),n.fill(),n.stroke(),n.closePath()},hoverCheck:function(e,t){var n=t.shape,r=n.rx,i=n.ry,a=n.r;return(0,o.checkPointIsInCircle)(e,r,i,a)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape;this.attr("shape",{rx:i.rx+n,ry:i.ry+r})}};e.circle=c;var u={shape:{rx:0,ry:0,hr:0,vr:0},validator:function(e){var t=e.shape,n=t.rx,r=t.ry,i=t.hr,o=t.vr;return"number"==typeof n&&"number"==typeof r&&"number"==typeof i&&"number"==typeof o},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.hr,s=r.vr;n.ellipse(i,o,a>0?a:.01,s>0?s:.01,0,0,2*Math.PI),n.fill(),n.stroke(),n.closePath()},hoverCheck:function(e,t){var n=t.shape,r=n.rx,i=n.ry,a=n.hr,s=n.vr,l=Math.max(a,s),c=Math.min(a,s),u=Math.sqrt(l*l-c*c),h=[r-u,i],d=[r+u,i];return(0,o.getTwoPointDistance)(e,h)+(0,o.getTwoPointDistance)(e,d)<=2*l},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape;this.attr("shape",{rx:i.rx+n,ry:i.ry+r})}};e.ellipse=u;var h={shape:{x:0,y:0,w:0,h:0},validator:function(e){var t=e.shape,n=t.x,r=t.y,i=t.w,o=t.h;return"number"==typeof n&&"number"==typeof r&&"number"==typeof i&&"number"==typeof o},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.x,o=r.y,a=r.w,s=r.h;n.rect(i,o,a,s),n.fill(),n.stroke(),n.closePath()},hoverCheck:function(e,t){var n=t.shape,r=n.x,i=n.y,a=n.w,s=n.h;return(0,o.checkPointIsInRect)(e,r,i,a,s)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.x,o=n.y,a=n.w,s=n.h;r.graphCenter=[i+a/2,o+s/2]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape;this.attr("shape",{x:i.x+n,y:i.y+r})}};e.rect=h;var d={shape:{rx:0,ry:0,r:0},validator:function(e){var t=e.shape,n=t.rx,r=t.ry,i=t.r;return"number"==typeof n&&"number"==typeof r&&"number"==typeof i},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.r;n.arc(i,o,a>0?a:.01,0,2*Math.PI),n.stroke(),n.closePath()},hoverCheck:function(e,t){var n=t.shape,r=t.style,i=n.rx,a=n.ry,s=n.r,l=r.lineWidth/2,c=s-l,u=s+l,h=(0,o.getTwoPointDistance)(e,[i,a]);return h>=c&&h<=u},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape;this.attr("shape",{rx:i.rx+n,ry:i.ry+r})}};e.ring=d;var f={shape:{rx:0,ry:0,r:0,startAngle:0,endAngle:0,clockWise:!0},validator:function(e){var t=e.shape;return!["rx","ry","r","startAngle","endAngle"].find((function(e){return"number"!=typeof t[e]}))},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.r,s=r.startAngle,l=r.endAngle,c=r.clockWise;n.arc(i,o,a>0?a:.001,s,l,!c),n.stroke(),n.closePath()},hoverCheck:function(e,t){var n=t.shape,r=t.style,i=n.rx,a=n.ry,s=n.r,l=n.startAngle,c=n.endAngle,u=n.clockWise,h=r.lineWidth/2,d=s-h,f=s+h;return!(0,o.checkPointIsInSector)(e,i,a,d,l,c,u)&&(0,o.checkPointIsInSector)(e,i,a,f,l,c,u)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape;this.attr("shape",{rx:i.rx+n,ry:i.ry+r})}};e.arc=f;var p={shape:{rx:0,ry:0,r:0,startAngle:0,endAngle:0,clockWise:!0},validator:function(e){var t=e.shape;return!["rx","ry","r","startAngle","endAngle"].find((function(e){return"number"!=typeof t[e]}))},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.r,s=r.startAngle,l=r.endAngle,c=r.clockWise;n.arc(i,o,a>0?a:.01,s,l,!c),n.lineTo(i,o),n.closePath(),n.stroke(),n.fill()},hoverCheck:function(e,t){var n=t.shape,r=n.rx,i=n.ry,a=n.r,s=n.startAngle,l=n.endAngle,c=n.clockWise;return(0,o.checkPointIsInSector)(e,r,i,a,s,l,c)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,r=e.movementY,i=t.shape,o=i.rx,a=i.ry;this.attr("shape",{rx:o+n,ry:a+r})}};e.sector=p;var g={shape:{rx:0,ry:0,r:0,side:0},validator:function(e){var t=e.shape,n=t.side;return!["rx","ry","r","side"].find((function(e){return"number"!=typeof t[e]}))&&!(n<3)},draw:function(e,t){var n=e.ctx,r=t.shape,i=t.cache;n.beginPath();var s=r.rx,l=r.ry,c=r.r,u=r.side;if(!i.points||i.rx!==s||i.ry!==l||i.r!==c||i.side!==u){var h=(0,o.getRegularPolygonPoints)(s,l,c,u);Object.assign(i,{points:h,rx:s,ry:l,r:c,side:u})}var d=i.points;(0,a.drawPolylinePath)(n,d),n.closePath(),n.stroke(),n.fill()},hoverCheck:function(e,t){var n=t.cache.points;return(0,o.checkPointIsInPolygon)(e,n)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.rx,o=n.ry;r.graphCenter=[i,o]},move:function(e,t){var n=e.movementX,i=e.movementY,o=t.shape,a=t.cache,s=o.rx,l=o.ry;a.rx+=n,a.ry+=i,this.attr("shape",{rx:s+n,ry:l+i}),a.points=a.points.map((function(e){var t=(0,r.default)(e,2),o=t[0],a=t[1];return[o+n,a+i]}))}};e.regPolygon=g;var m={shape:{points:[],close:!1},validator:function(e){return e.shape.points instanceof Array},draw:function(e,t){var n=e.ctx,r=t.shape,i=t.style.lineWidth;n.beginPath();var s=r.points,l=r.close;1===i&&(s=(0,o.eliminateBlur)(s)),(0,a.drawPolylinePath)(n,s),l&&(n.closePath(),n.fill()),n.stroke()},hoverCheck:function(e,t){var n=t.shape,r=t.style,i=n.points,a=n.close,s=r.lineWidth;return a?(0,o.checkPointIsInPolygon)(e,i):(0,o.checkPointIsNearPolyline)(e,i,s)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.points;r.graphCenter=i[0]},move:function(e,t){var n=e.movementX,i=e.movementY,o=t.shape.points.map((function(e){var t=(0,r.default)(e,2),o=t[0],a=t[1];return[o+n,a+i]}));this.attr("shape",{points:o})}};e.polyline=m;var v={shape:{points:[],close:!1},validator:function(e){return e.shape.points instanceof Array},draw:function(e,t){var n=e.ctx,r=t.shape,i=t.cache,c=r.points,u=r.close;if(!i.points||i.points.toString()!==c.toString()){var h=s(c,u),d=l(h);Object.assign(i,{points:(0,o.deepClone)(c,!0),bezierCurve:h,hoverPoints:d})}var f=i.bezierCurve;n.beginPath(),(0,a.drawBezierCurvePath)(n,f.slice(1),f[0]),u&&(n.closePath(),n.fill()),n.stroke()},hoverCheck:function(e,t){var n=t.cache,r=t.shape,i=t.style,a=n.hoverPoints,s=r.close,l=i.lineWidth;return s?(0,o.checkPointIsInPolygon)(e,a):(0,o.checkPointIsNearPolyline)(e,a,l)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.points;r.graphCenter=i[0]},move:function(e,t){var i=e.movementX,o=e.movementY,a=t.shape,s=t.cache,l=a.points.map((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return[n+i,a+o]}));s.points=l;var c=(0,r.default)(s.bezierCurve[0],2),u=c[0],h=c[1],d=s.bezierCurve.slice(1);s.bezierCurve=[[u+i,h+o]].concat((0,n.default)(d.map((function(e){return e.map((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return[n+i,a+o]}))})))),s.hoverPoints=s.hoverPoints.map((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return[n+i,a+o]})),this.attr("shape",{points:l})}};e.smoothline=v;var y={shape:{points:[],close:!1},validator:function(e){return e.shape.points instanceof Array},draw:function(e,t){var n=e.ctx,r=t.shape,i=t.cache,s=r.points,c=r.close;if(!i.points||i.points.toString()!==s.toString()){var u=l(s,20);Object.assign(i,{points:(0,o.deepClone)(s,!0),hoverPoints:u})}n.beginPath(),(0,a.drawBezierCurvePath)(n,s.slice(1),s[0]),c&&(n.closePath(),n.fill()),n.stroke()},hoverCheck:function(e,t){var n=t.cache,r=t.shape,i=t.style,a=n.hoverPoints,s=r.close,l=i.lineWidth;return s?(0,o.checkPointIsInPolygon)(e,a):(0,o.checkPointIsNearPolyline)(e,a,l)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.points;r.graphCenter=i[0]},move:function(e,t){var i=e.movementX,o=e.movementY,a=t.shape,s=t.cache,l=a.points,c=(0,r.default)(l[0],2),u=c[0],h=c[1],d=l.slice(1),f=[[u+i,h+o]].concat((0,n.default)(d.map((function(e){return e.map((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return[n+i,a+o]}))}))));s.points=f,s.hoverPoints=s.hoverPoints.map((function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];return[n+i,a+o]})),this.attr("shape",{points:f})}};e.bezierCurve=y;var b={shape:{content:"",position:[],maxWidth:void 0,rowGap:0},validator:function(e){var t=e.shape,n=t.content,r=t.position,i=t.rowGap;return"string"==typeof n&&(r instanceof Array&&"number"==typeof i)},draw:function(e,t){var i=e.ctx,o=t.shape,a=o.content,s=o.position,l=o.maxWidth,c=o.rowGap,u=i.textBaseline,h=i.font,d=parseInt(h.replace(/\D/g,"")),f=s,p=(0,r.default)(f,2),g=p[0],m=p[1],v=(a=a.split("\n")).length,y=d+c,b=v*y-c,x=0;"middle"===u&&(x=b/2,m+=d/2),"bottom"===u&&(x=b,m+=d),s=new Array(v).fill(0).map((function(e,t){return[g,m+t*y-x]})),i.beginPath(),a.forEach((function(e,t){i.fillText.apply(i,[e].concat((0,n.default)(s[t]),[l])),i.strokeText.apply(i,[e].concat((0,n.default)(s[t]),[l]))})),i.closePath()},hoverCheck:function(e,t){return t.shape,t.style,!1},setGraphCenter:function(e,t){var r=t.shape,i=t.style,o=r.position;i.graphCenter=(0,n.default)(o)},move:function(e,t){var n=e.movementX,i=e.movementY,o=t.shape,a=(0,r.default)(o.position,2),s=a[0],l=a[1];this.attr("shape",{position:[s+n,l+i]})}};e.text=b;var x=new Map([["circle",c],["ellipse",u],["rect",h],["ring",d],["arc",f],["sector",p],["regPolygon",g],["polyline",m],["smoothline",v],["bezierCurve",y],["text",b]]),w=x;e.default=w}(Cr)),Cr}var $r={},Pr={exports:{}},wr={exports:{}},ia,oa;function Go(){return ia||(ia=1,function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch{l=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),a=new M(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var l=u(e,t,n);if("normal"===l.type){if(r=n.done?p:d,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=p,n.method="throw",n.arg=l.arg)}}}(e,n,a),o}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(r){return{type:"throw",arg:r}}}e.wrap=c;var h="suspendedStart",d="suspendedYield",f="executing",p="completed",g={};function m(){}function v(){}function y(){}var b={};l(b,o,(function(){return this}));var x=Object.getPrototypeOf,w=x&&x(x(k([])));w&&w!==n&&r.call(w,o)&&(b=w);var _=y.prototype=m.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function $(e,t){function n(i,o,a,s){var l=u(e[i],e,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(l.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function S(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var i=u(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,g;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function A(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function k(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:T}}function T(){return{value:t,done:!0}}return v.prototype=y,l(_,"constructor",y),l(y,"constructor",v),v.displayName=l(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},C($.prototype),l($.prototype,a,(function(){return this})),e.AsyncIterator=$,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new $(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(_),l(_,s,"Generator"),l(_,o,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=k,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return s.type="throw",s.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(wr.exports);try{regeneratorRuntime=t}catch{"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}}()),wr.exports}function Ro(){return oa||(oa=1,Pr.exports=Go()),Pr.exports}var kr={exports:{}},la;function To(){return la||(la=1,function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,l,"next",e)}function l(e){t(a,i,o,s,l,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}(kr)),kr.exports}var Ar={},sa;function Mo(){return sa||(sa=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Me()),r=t(At()),i=it(),o=Fe(),a=function e(t){(0,r.default)(this,e),this.colorProcessor(t);Object.assign(this,{fill:[0,0,0,1],stroke:[0,0,0,0],opacity:1,lineCap:null,lineJoin:null,lineDash:null,lineDashOffset:null,shadowBlur:0,shadowColor:[0,0,0,0],shadowOffsetX:0,shadowOffsetY:0,lineWidth:0,graphCenter:null,scale:null,rotate:null,translate:null,hoverCursor:"pointer",fontStyle:"normal",fontVarient:"normal",fontWeight:"normal",fontSize:10,fontFamily:"Arial",textAlign:"center",textBaseline:"middle",gradientColor:null,gradientType:"linear",gradientParams:null,gradientWith:"stroke",gradientStops:"auto",colors:null},t)};e.default=a,a.prototype.colorProcessor=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?i.getColorFromRgbValue:i.getRgbaValue,r=["fill","stroke","shadowColor"],o=Object.keys(e),a=o.filter((function(e){return r.find((function(t){return t===e}))}));a.forEach((function(t){return e[t]=n(e[t])}));var s=e.gradientColor,l=e.colors;if(s&&(e.gradientColor=s.map((function(e){return n(e)}))),l){var c=Object.keys(l);c.forEach((function(e){return l[e]=n(l[e])}))}},a.prototype.initStyle=function(e){(function(e,t){e.save();var r=t.graphCenter,i=t.rotate,o=t.scale,a=t.translate;r instanceof Array&&(e.translate.apply(e,(0,n.default)(r)),i&&e.rotate(i*Math.PI/180),o instanceof Array&&e.scale.apply(e,(0,n.default)(o)),a&&e.translate.apply(e,(0,n.default)(a)),e.translate(-r[0],-r[1]))})(e,this),function(e,t){var r=t.fill,o=t.stroke,a=t.shadowColor,l=t.opacity;s.forEach((function(n){(n||"number"==typeof n)&&(e[n]=t[n])})),r=(0,n.default)(r),o=(0,n.default)(o),a=(0,n.default)(a),r[3]*=l,o[3]*=l,a[3]*=l,e.fillStyle=(0,i.getColorFromRgbValue)(r),e.strokeStyle=(0,i.getColorFromRgbValue)(o),e.shadowColor=(0,i.getColorFromRgbValue)(a);var c=t.lineDash,u=t.shadowBlur;c&&(c=c.map((function(e){return e>=0?e:0})),e.setLineDash(c)),"number"==typeof u&&(e.shadowBlur=u>0?u:.001);var h=t.fontStyle,d=t.fontVarient,f=t.fontWeight,p=t.fontSize,g=t.fontFamily;e.font=h+" "+d+" "+f+" "+p+"px "+g}(e,this),function(e,t){if(function(e){var t=e.gradientColor,n=e.gradientParams,r=e.gradientType,i=e.gradientWith,o=e.gradientStops;if(!t||!n)return!1;if(1===t.length)return!1;if("linear"!==r&&"radial"!==r)return!1;var a=n.length;return!("linear"===r&&4!==a||"radial"===r&&6!==a)&&(("fill"===i||"stroke"===i)&&("auto"===o||o instanceof Array))}(t)){var r=t.gradientColor,o=t.gradientParams,a=t.gradientType,s=t.gradientWith,l=t.gradientStops,c=t.opacity;r=(r=r.map((function(e){var t=e[3]*c,r=(0,n.default)(e);return r[3]=t,r}))).map((function(e){return(0,i.getColorFromRgbValue)(e)})),"auto"===l&&(l=function(e){var t=1/(e.length-1);return e.map((function(e,n){return t*n}))}(r));var u=e["create".concat(a.slice(0,1).toUpperCase()+a.slice(1),"Gradient")].apply(e,(0,n.default)(o));l.forEach((function(e,t){return u.addColorStop(e,r[t])})),e["".concat(s,"Style")]=u}}(e,this)};var s=["lineCap","lineJoin","lineDashOffset","shadowOffsetX","shadowOffsetY","lineWidth","textAlign","textBaseline"];a.prototype.restoreTransform=function(e){e.restore()},a.prototype.update=function(e){this.colorProcessor(e),Object.assign(this,e)},a.prototype.getStyle=function(){var e=(0,o.deepClone)(this,!0);return this.colorProcessor(e,!0),e}}(Ar)),Ar}var Sr={},Lr={},ua,ca,fa,da;function Do(){return ua||(ua=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.easeInOutBounce=e.easeOutBounce=e.easeInBounce=e.easeInOutElastic=e.easeOutElastic=e.easeInElastic=e.easeInOutBack=e.easeOutBack=e.easeInBack=e.easeInOutQuint=e.easeOutQuint=e.easeInQuint=e.easeInOutQuart=e.easeOutQuart=e.easeInQuart=e.easeInOutCubic=e.easeOutCubic=e.easeInCubic=e.easeInOutQuad=e.easeOutQuad=e.easeInQuad=e.easeInOutSine=e.easeOutSine=e.easeInSine=e.linear=void 0;var t=[[[0,1],"",[.33,.67]],[[1,0],[.67,.33]]];e.linear=t;var n=[[[0,1]],[[.538,.564],[.169,.912],[.88,.196]],[[1,0]]];e.easeInSine=n;var r=[[[0,1]],[[.444,.448],[.169,.736],[.718,.16]],[[1,0]]];e.easeOutSine=r;var i=[[[0,1]],[[.5,.5],[.2,1],[.8,0]],[[1,0]]];e.easeInOutSine=i;var o=[[[0,1]],[[.55,.584],[.231,.904],[.868,.264]],[[1,0]]];e.easeInQuad=o;var a=[[[0,1]],[[.413,.428],[.065,.816],[.76,.04]],[[1,0]]];e.easeOutQuad=a;var s=[[[0,1]],[[.5,.5],[.3,.9],[.7,.1]],[[1,0]]];e.easeInOutQuad=s;var l=[[[0,1]],[[.679,.688],[.366,.992],[.992,.384]],[[1,0]]];e.easeInCubic=l;var c=[[[0,1]],[[.321,.312],[.008,.616],[.634,.008]],[[1,0]]];e.easeOutCubic=c;var u=[[[0,1]],[[.5,.5],[.3,1],[.7,0]],[[1,0]]];e.easeInOutCubic=u;var h=[[[0,1]],[[.812,.74],[.611,.988],[1.013,.492]],[[1,0]]];e.easeInQuart=h;var d=[[[0,1]],[[.152,.244],[.001,.448],[.285,-.02]],[[1,0]]];e.easeOutQuart=d;var f=[[[0,1]],[[.5,.5],[.4,1],[.6,0]],[[1,0]]];e.easeInOutQuart=f;var p=[[[0,1]],[[.857,.856],[.714,1],[1,.712]],[[1,0]]];e.easeInQuint=p;var g=[[[0,1]],[[.108,.2],[.001,.4],[.214,-.012]],[[1,0]]];e.easeOutQuint=g;var m=[[[0,1]],[[.5,.5],[.5,1],[.5,0]],[[1,0]]];e.easeInOutQuint=m;var v=[[[0,1]],[[.667,.896],[.38,1.184],[.955,.616]],[[1,0]]];e.easeInBack=v;var y=[[[0,1]],[[.335,.028],[.061,.22],[.631,-.18]],[[1,0]]];e.easeOutBack=y;var b=[[[0,1]],[[.5,.5],[.4,1.4],[.6,-.4]],[[1,0]]];e.easeInOutBack=b;var x=[[[0,1]],[[.474,.964],[.382,.988],[.557,.952]],[[.619,1.076],[.565,1.088],[.669,1.08]],[[.77,.916],[.712,.924],[.847,.904]],[[.911,1.304],[.872,1.316],[.961,1.34]],[[1,0]]];e.easeInElastic=x;var w=[[[0,1]],[[.073,-.32],[.034,-.328],[.104,-.344]],[[.191,.092],[.11,.06],[.256,.08]],[[.31,-.076],[.26,-.068],[.357,-.076]],[[.432,.032],[.362,.028],[.683,-.004]],[[1,0]]];e.easeOutElastic=w;var _=[[[0,1]],[[.21,.94],[.167,.884],[.252,.98]],[[.299,1.104],[.256,1.092],[.347,1.108]],[[.5,.496],[.451,.672],[.548,.324]],[[.696,-.108],[.652,-.112],[.741,-.124]],[[.805,.064],[.756,.012],[.866,.096]],[[1,0]]];e.easeInOutElastic=_;var C=[[[0,1]],[[.148,1],[.075,.868],[.193,.848]],[[.326,1],[.276,.836],[.405,.712]],[[.6,1],[.511,.708],[.671,.348]],[[1,0]]];e.easeInBounce=C;var $=[[[0,1]],[[.357,.004],[.27,.592],[.376,.252]],[[.604,-.004],[.548,.312],[.669,.184]],[[.82,0],[.749,.184],[.905,.132]],[[1,0]]];e.easeOutBounce=$;var S=[[[0,1]],[[.102,1],[.05,.864],[.117,.86]],[[.216,.996],[.208,.844],[.227,.808]],[[.347,.996],[.343,.8],[.48,.292]],[[.635,.004],[.511,.676],[.656,.208]],[[.787,0],[.76,.2],[.795,.144]],[[.905,-.004],[.899,.164],[.944,.144]],[[1,0]]];e.easeInOutBounce=S;var E=new Map([["linear",t],["easeInSine",n],["easeOutSine",r],["easeInOutSine",i],["easeInQuad",o],["easeOutQuad",a],["easeInOutQuad",s],["easeInCubic",l],["easeOutCubic",c],["easeInOutCubic",u],["easeInQuart",h],["easeOutQuart",d],["easeInOutQuart",f],["easeInQuint",p],["easeOutQuint",g],["easeInOutQuint",m],["easeInBack",v],["easeOutBack",y],["easeInOutBack",b],["easeInElastic",x],["easeOutElastic",w],["easeInOutElastic",_],["easeInBounce",C],["easeOutBounce",$],["easeInOutBounce",S]]);e.default=E}(Lr)),Lr}function Fo(){return ca||(ca=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.transition=o,e.injectNewCurve=function(e,t){if(!e||!t)return;i.default.set(e,t)},e.default=void 0;var n=t(Ne()),r=t(ze()),i=t(Do());function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!a.apply(void 0,arguments))return!1;try{var o=s(e),u=l(o,r);return i&&"number"!=typeof n?h(t,n,u):c(t,n,u)}catch{return[n]}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;if(!e||!1===t||!1===n||!o)return!1;if((0,r.default)(t)!==(0,r.default)(n))return!1;var a=(0,r.default)(n);return!("string"===a||"boolean"===a||!e.length)&&(i.default.has(e),!0)}function s(e){return i.default.has(e)?i.default.get(e):e instanceof Array?e:i.default.get("linear")}function l(e,t){var r=1/(t-1),i=new Array(t).fill(0).map((function(e,t){return t*r})).map((function(t){return function(e,t){var r=function(e,t){var n=e.length-1,r="",i="";e.findIndex((function(o,a){if(a!==n){r=o,i=e[a+1];var s=r[0][0],l=i[0][0];return t>=s&&t<l}}));var o=r[0],a=r[2]||r[0],s=i[1]||i[0],l=i[0];return[o,a,s,l]}(e,t),i=function(e,t){var n=e[0][0],r=e[3][0],i=r-n,o=t-n;return o/i}(r,t);return function(e,t){var r=(0,n.default)(e,4),i=(0,n.default)(r[0],2),o=i[1],a=(0,n.default)(r[1],2),s=a[1],l=(0,n.default)(r[2],2),c=l[1],u=(0,n.default)(r[3],2),h=u[1],d=Math.pow,f=1-t,p=o*d(f,3),g=3*s*t*d(f,2),m=3*c*d(t,2)*f,v=h*d(t,3);return 1-(p+g+m+v)}(r,i)}(e,t)}));return i}function c(e,t,n){var r="object";return"number"==typeof e&&(r="number"),e instanceof Array&&(r="array"),"number"===r?function(e,t,n){var r=t-e;return n.map((function(t){return e+r*t}))}(e,t,n):"array"===r?u(e,t,n):"object"===r?function(e,t,n){var r=Object.keys(t),i=r.map((function(t){return e[t]})),o=r.map((function(e){return t[e]})),a=u(i,o,n);return a.map((function(e){var t={};return e.forEach((function(e,n){return t[r[n]]=e})),t}))}(e,t,n):n.map((function(e){return t}))}function u(e,t,n){var r=t.map((function(t,n){return"number"==typeof t&&t-e[n]}));return n.map((function(n){return r.map((function(r,i){return!1===r?t[i]:e[i]+r*n}))}))}function h(e,t,n){var i=c(e,t,n),o=function(o){var a=e[o],s=t[o];if("object"!==(0,r.default)(s))return"continue";var l=h(a,s,n);i.forEach((function(e,t){return e[o]=l[t]}))};for(var a in t)o(a);return i}var d=o;e.default=d}(Sr)),Sr}function Bo(){return fa||(fa=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ro()),r=t(To()),i=t(ze()),o=t(Me()),a=t(At()),s=t(Mo()),l=t(Fo()),c=Fe(),u=function e(t,n){(0,a.default)(this,e);var r={visible:!0,drag:!1,hover:!1,index:1,animationDelay:0,animationFrame:30,animationCurve:"linear",animationPause:!1,hoverRect:null,mouseEnter:null,mouseOuter:null,click:null};(n=(0,c.deepClone)(n,!0)).shape||(n.shape={}),n.style||(n.style={});var i=Object.assign({},t.shape,n.shape);Object.assign(r,n,{status:"static",animationRoot:[],animationKeys:[],animationFrameState:[],cache:{}}),Object.assign(this,t,r),this.shape=i,this.style=new s.default(n.style),this.addedProcessor()};function h(e){return new Promise((function(t){setTimeout(t,e)}))}e.default=u,u.prototype.addedProcessor=function(){"function"==typeof this.setGraphCenter&&this.setGraphCenter(null,this),"function"==typeof this.added&&this.added(this)},u.prototype.drawProcessor=function(e,t){var n=e.ctx;t.style.initStyle(n),"function"==typeof this.beforeDraw&&this.beforeDraw(this,e),t.draw(e,t),"function"==typeof this.drawed&&this.drawed(this,e),t.style.restoreTransform(n)},u.prototype.hoverCheckProcessor=function(e,t){var n=t.hoverRect,r=t.style,i=t.hoverCheck,a=r.graphCenter,s=r.rotate,l=r.scale,u=r.translate;return a&&(s&&(e=(0,c.getRotatePointPos)(-s,e,a)),l&&(e=(0,c.getScalePointPos)(l.map((function(e){return 1/e})),e,a)),u&&(e=(0,c.getTranslatePointPos)(u.map((function(e){return-1*e})),e))),n?c.checkPointIsInRect.apply(void 0,[e].concat((0,o.default)(n))):i(e,this)},u.prototype.moveProcessor=function(e){this.move(e,this),"function"==typeof this.beforeMove&&this.beforeMove(e,this),"function"==typeof this.setGraphCenter&&this.setGraphCenter(e,this),"function"==typeof this.moved&&this.moved(e,this)},u.prototype.attr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(!e||void 0===t)return!1;var n="object"===(0,i.default)(this[e]);n&&(t=(0,c.deepClone)(t,!0));var r=this.render;"style"===e?this.style.update(t):n?Object.assign(this[e],t):this[e]=t,"index"===e&&r.sortGraphsByIndex(),r.drawAllGraph()},u.prototype.animation=function(){var e=(0,r.default)(n.default.mark((function e(t,i){var o,a,s,u,d,f,p,g,m,v=arguments;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=v.length>2&&void 0!==v[2]&&v[2],"shape"===t||"style"===t){e.next=4;break}return e.abrupt("return");case 4:if(i=(0,c.deepClone)(i,!0),"style"===t&&this.style.colorProcessor(i),a=this[t],s=Object.keys(i),u={},s.forEach((function(e){return u[e]=a[e]})),d=this.animationFrame,f=this.animationCurve,p=this.animationDelay,g=(0,l.default)(f,u,i,d,!0),this.animationRoot.push(a),this.animationKeys.push(s),this.animationFrameState.push(g),!o){e.next=17;break}return e.abrupt("return");case 17:if(!(p>0)){e.next=20;break}return e.next=20,h(p);case 20:return m=this.render,e.abrupt("return",new Promise(function(){var e=(0,r.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.launchAnimation();case 2:t();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),u.prototype.turnNextAnimationFrame=function(e){var t=this.animationDelay,n=this.animationRoot,r=this.animationKeys,i=this.animationFrameState;this.animationPause||Date.now()-e<t||(n.forEach((function(e,t){r[t].forEach((function(n){e[n]=i[t][0][n]}))})),i.forEach((function(e,t){e.shift();var i=0===e.length;i&&(n[t]=null),i&&(r[t]=null)})),this.animationFrameState=i.filter((function(e){return e.length})),this.animationRoot=n.filter((function(e){return e})),this.animationKeys=r.filter((function(e){return e})))},u.prototype.animationEnd=function(){var e=this.animationFrameState,t=this.animationKeys,n=this.animationRoot,r=this.render;return n.forEach((function(n,r){var i=t[r],o=e[r].pop();i.forEach((function(e){return n[e]=o[e]}))})),this.animationFrameState=[],this.animationKeys=[],this.animationRoot=[],r.drawAllGraph()},u.prototype.pauseAnimation=function(){this.attr("animationPause",!0)},u.prototype.playAnimation=function(){var e=this.render;return this.attr("animationPause",!1),new Promise(function(){var t=(0,r.default)(n.default.mark((function t(r){return n.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.launchAnimation();case 2:r();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},u.prototype.delProcessor=function(e){var t=this,n=e.graphs,r=n.findIndex((function(e){return e===t}));-1!==r&&("function"==typeof this.beforeDelete&&this.beforeDelete(this),n.splice(r,1,null),"function"==typeof this.deleted&&this.deleted(this))}}($r)),$r}function No(){return da||(da=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(Ue()),r=t(Me()),i=t(At()),o=t(it()),a=t(wn()),s=Fe(),l=t(kn()),c=t(Bo());function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var h=function e(t){if((0,i.default)(this,e),t){var n=t.getContext("2d"),r=t.clientWidth,s=t.clientHeight,l=[r,s];t.setAttribute("width",r),t.setAttribute("height",s),this.ctx=n,this.area=l,this.animationStatus=!1,this.graphs=[],this.color=o.default,this.bezierCurve=a.default,t.addEventListener("mousedown",f.bind(this)),t.addEventListener("mousemove",p.bind(this)),t.addEventListener("mouseup",g.bind(this))}};function d(e,t){var n=this.graphs;!function(e){return e.find((function(e){return!e.animationPause&&e.animationFrameState.length}))}(n)?e():(n.forEach((function(e){return e.turnNextAnimationFrame(t)})),this.drawAllGraph(),requestAnimationFrame(d.bind(this,e,t)))}function f(e){var t=this.graphs.find((function(e){return"hover"===e.status}));!t||(t.status="active")}function p(e){var t=[e.offsetX,e.offsetY],n=this.graphs,r=n.find((function(e){return"active"===e.status||"drag"===e.status}));if(r){if(!r.drag)return;if("function"!=typeof r.move)return;return r.moveProcessor(e),void(r.status="drag")}var i=n.find((function(e){return"hover"===e.status})),o=n.filter((function(e){return e.hover&&("function"==typeof e.hoverCheck||e.hoverRect)})).find((function(e){return e.hoverCheckProcessor(t,e)}));document.body.style.cursor=o?o.style.hoverCursor:"default";var a=!1,s=!1;if(i&&(a="function"==typeof i.mouseOuter),o&&(s="function"==typeof o.mouseEnter),o||i){if(!o&&i)return a&&i.mouseOuter(e,i),void(i.status="static");if(!o||o!==i){if(o&&!i)return s&&o.mouseEnter(e,o),void(o.status="hover");o&&i&&o!==i&&(a&&i.mouseOuter(e,i),i.status="static",s&&o.mouseEnter(e,o),o.status="hover")}}}function g(e){var t=this.graphs,n=t.find((function(e){return"active"===e.status})),r=t.find((function(e){return"drag"===e.status}));n&&"function"==typeof n.click&&n.click(e,n),t.forEach((function(e){return e&&(e.status="static")})),n&&(n.status="hover"),r&&(r.status="hover")}e.default=h,h.prototype.clearArea=function(){var e,t=this.area;(e=this.ctx).clearRect.apply(e,[0,0].concat((0,r.default)(t)))},h.prototype.add=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;if(t){var n=l.default.get(t);if(n){var r=new c.default(n,e);return r.validator(r)?(r.render=this,this.graphs.push(r),this.sortGraphsByIndex(),this.drawAllGraph(),r):void 0}}},h.prototype.sortGraphsByIndex=function(){this.graphs.sort((function(e,t){return e.index>t.index?1:e.index===t.index?0:e.index<t.index?-1:void 0}))},h.prototype.delGraph=function(e){"function"==typeof e.delProcessor&&(e.delProcessor(this),this.graphs=this.graphs.filter((function(e){return e})),this.drawAllGraph())},h.prototype.delAllGraph=function(){var e=this;this.graphs.forEach((function(t){return t.delProcessor(e)})),this.graphs=this.graphs.filter((function(e){return e})),this.drawAllGraph()},h.prototype.drawAllGraph=function(){var e=this;this.clearArea(),this.graphs.filter((function(e){return e&&e.visible})).forEach((function(t){return t.drawProcessor(e,t)}))},h.prototype.launchAnimation=function(){var e=this;if(!this.animationStatus)return this.animationStatus=!0,new Promise((function(t){d.call(e,(function(){e.animationStatus=!1,t()}),Date.now())}))},h.prototype.clone=function(e){var t=e.style.getStyle(),r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{style:t});return delete r.render,r=(0,s.deepClone)(r,!0),this.add(r)}}(tr)),tr}!function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"CRender",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"extendNewGraph",{enumerable:!0,get:function(){return r.extendNewGraph}}),e.default=void 0;var n=t(No()),r=kn(),i=n.default;e.default=i}(Vt);const si=ii(Vt),jo={class:"dv-water-pond-level"},Eo={key:0},Wo=["id"],zo=["offset","stop-color"],qo=["stroke","fill","x","y"],Io=["cx","cy","rx","ry","stroke"],Ho=["rx","ry","width","height","stroke"],Vo={__name:"index",props:{config:Object,default:()=>({})},setup(e){const t=e,n=Ve(),r=ref$1(null),i=reactive({gradientId:`water-level-pond-${n}`,defaultConfig:{data:[],shape:"rect",waveNum:3,waveHeight:40,waveOpacity:.4,colors:["#3DE7C9","#00BAFF"],formatter:"{value}%"},mergedConfig:{},renderer:null,svgBorderGradient:[],details:"",waves:[],animation:!1}),o=computed((()=>{const{shape:e}=i.mergedConfig;return"round"===e?"50%":"rect"===e?"0":"roundRect"===e?"10px":"0"})),a=computed((()=>{const{shape:e}=i.mergedConfig;return e||"rect"}));function s(){i.mergedConfig=xe(_e(i.defaultConfig,!0),t.config),function(){const{colors:e}=i.mergedConfig,t=100/(e.length-1);i.svgBorderGradient=e.map(((e,n)=>[t*n,e]))}(),function(){const{data:e,formatter:t}=i.mergedConfig;if(!e.length)return void(i.details="");const n=Math.max(...e);i.details=t.replace("{value}",n)}(),function(){const e=function(){const{waveNum:e,waveHeight:t,data:n}=i.mergedConfig,[r,o]=i.renderer.area,a=4*e+4,s=r/e/2;return n.map((e=>{let n=new Array(a).fill(0).map(((n,i)=>{const a=(1-e/100)*o;return[r-s*i,i%2==0?a:a-t]}));return n=n.map((e=>function([e,t],[n,r]){return[e+n,t+r]}(e,[2*s,0]))),{points:n}}))}(),t=function(){const e=i.renderer.area[1];return{gradientColor:i.mergedConfig.colors,gradientType:"linear",gradientParams:[0,0,0,e],gradientWith:"fill",opacity:i.mergedConfig.waveOpacity,translate:[0,0]}}();i.waves=e.map((e=>i.renderer.add({name:"smoothline",animationFrame:300,shape:e,style:t,drawed:l})))}(),c()}function l({shape:{points:e}},{ctx:t,area:n}){const r=e[0],i=e.slice(-1)[0],o=n[1];t.lineTo(i[0],o),t.lineTo(r[0],o),t.closePath(),t.fill()}async function c(e=1){if(i.animation)return;i.animation=!0;const t=i.renderer.area[0];i.waves.forEach((e=>{e.attr("style",{translate:[0,0]}),e.animation("style",{translate:[t,0]},!0)})),await i.renderer.launchAnimation(),i.animation=!1,i.renderer.graphs.length&&c(e+1)}return watch((()=>t.config),(()=>{i.renderer.delAllGraph(),i.waves=[],setTimeout(s,0)}),{deep:!0}),onMounted((()=>{i.renderer=new si(r.value),t.config&&s()})),onBeforeUnmount((()=>{i.renderer.delAllGraph(),i.waves=[]})),(e,t)=>(openBlock(),createElementBlock("div",jo,[i.renderer?(openBlock(),createElementBlock("svg",Eo,[createBaseVNode("defs",null,[createBaseVNode("linearGradient",{id:i.gradientId,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.svgBorderGradient,(e=>(openBlock(),createElementBlock("stop",{key:e[0],offset:e[0],"stop-color":e[1]},null,8,zo)))),128))],8,Wo)]),i.renderer?(openBlock(),createElementBlock("text",{key:0,stroke:`url(#${i.gradientId})`,fill:`url(#${i.gradientId})`,x:i.renderer.area[0]/2+8,y:i.renderer.area[1]/2+8},toDisplayString(i.details),9,qo)):createCommentVNode("",!0),unref(a)&&"round"!==unref(a)?(openBlock(),createElementBlock("rect",{key:2,x:"2",y:"2",rx:"roundRect"===unref(a)?10:0,ry:"roundRect"===unref(a)?10:0,width:i.renderer.area[0]+12,height:i.renderer.area[1]+12,stroke:`url(#${i.gradientId})`},null,8,Ho)):(openBlock(),createElementBlock("ellipse",{key:1,cx:i.renderer.area[0]/2+8,cy:i.renderer.area[1]/2+8,rx:i.renderer.area[0]/2+5,ry:i.renderer.area[1]/2+5,stroke:`url(#${i.gradientId})`},null,8,Io))])):createCommentVNode("",!0),createBaseVNode("canvas",{ref_key:"waterPondLevel",ref:r,style:normalizeStyle(`border-radius: ${unref(o)};`)},null,4)]))}},Or={install(e){e.component("DvWaterLevelPond",Vo)}},Uo=(e,t)=>{const n=e.__vccOpts||e;for(const[r,i]of t)n[r]=i;return n},Qo={},Xo={class:"dv-loading"},Yo=createStaticVNode('<svg width="50px" height="50px"><circle cx="25" cy="25" r="20" fill="transparent" stroke-width="3" stroke-dasharray="31.415, 31.415" stroke="#02bcfe" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" values="0, 25 25;360, 25 25" dur="1.5s" repeatCount="indefinite"></animateTransform><animate attributeName="stroke" values="#02bcfe;#3be6cb;#02bcfe" dur="3s" repeatCount="indefinite"></animate></circle><circle cx="25" cy="25" r="10" fill="transparent" stroke-width="3" stroke-dasharray="15.7, 15.7" stroke="#3be6cb" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" values="360, 25 25;0, 25 25" dur="1.5s" repeatCount="indefinite"></animateTransform><animate attributeName="stroke" values="#3be6cb;#02bcfe;#3be6cb" dur="3s" repeatCount="indefinite"></animate></circle></svg>',1),Ko={class:"loading-tip"};function Jo(e,t){return openBlock(),createElementBlock("div",Xo,[Yo,createBaseVNode("div",Ko,[renderSlot(e.$slots,"default")])])}const Zo=Uo(Qo,[["render",Jo]]),Gr={install(e){e.component("DvLoading",Zo)}},el=["width","height"],tl=["id"],rl=createBaseVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1),nl=createBaseVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1),al=[rl,nl],il=["id"],ol=createBaseVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"0"},null,-1),ll=createBaseVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"1"},null,-1),sl=[ol,ll],ul=["id","cx","cy"],cl=["values","dur"],fl=["dur"],dl=["id"],hl=["xlink:href","fill"],vl=["xlink:href","fill","mask"],pl=["xlink:href","width","height","x","y"],gl=["fill","x","y"],ml=["id","d"],yl=["xlink:href","stroke-width","stroke"],bl=["id"],xl=["r","fill"],Cl=["dur","path"],_l=["xlink:href","stroke-width","stroke","mask"],$l=["from","to","dur"],Pl={__name:"index",props:{config:{type:Object,default:()=>({})},dev:{type:Boolean,default:!1}},setup(e){const t=e,n=Ve(),r=ref$1(null),{width:i,height:o}=be(r,(function(){l()}),(function(){l()})),a=reactive({unique:Math.random(),flylineGradientId:`flyline-gradient-id-${n}`,haloGradientId:`halo-gradient-id-${n}`,defaultConfig:{points:[],lines:[],halo:{show:!1,duration:[20,30],color:"#fb7293",radius:120},text:{show:!1,offset:[0,15],color:"#ffdb5c",fontSize:12},icon:{show:!1,src:"",width:15,height:15},line:{width:1,color:"#ffde93",orbitColor:"rgba(103, 224, 227, .2)",duration:[20,30],radius:100},bgImgSrc:"",k:-.5,curvature:5,relative:!0},flylines:[],flylineLengths:[],flylinePoints:[],mergedConfig:null});let s;async function l(){(function(){const e=xe(_e(a.defaultConfig,!0),t.config||{}),{points:n,lines:r,halo:i,text:o,icon:s,line:l}=e;e.points=n.map((e=>(e.halo=xe(_e(i,!0),e.halo||{}),e.text=xe(_e(o,!0),e.text||{}),e.icon=xe(_e(s,!0),e.icon||{}),e))),e.lines=r.map((e=>xe(_e(l,!0),e))),a.mergedConfig=e})(),function(){const{relative:e,points:t}=a.mergedConfig;a.flylinePoints=t.map(((t,n)=>{const{coordinate:[r,a],halo:s,icon:l,text:c}=t;e&&(t.coordinate=[r*i.value,a*o.value]),t.halo.time=_t(...s.duration)/10;const{width:u,height:h}=l;t.icon.x=t.coordinate[0]-u/2,t.icon.y=t.coordinate[1]-h/2;const[d,f]=c.offset;return t.text.x=t.coordinate[0]+d,t.text.y=t.coordinate[1]+f,t.key=`${t.coordinate.toString()}${n}`,t}))}(),function(){const{points:e,lines:t}=a.mergedConfig;a.flylines=t.map((t=>{const{source:n,target:r,duration:i}=t,o=function(e,t){const n=function([e,t],[n,r]){const{curvature:i,k:o}=a.mergedConfig,[s,l]=[(e+n)/2,(t+r)/2],u=zt([e,t],[n,r])/i,h=u/2;let[d,f]=[s,l];do{d+=h,f=c(o,[s,l],d)[1]}while(zt([s,l],[d,f])<u);return[d,f]}(e,t);return[e,n,t]}(e.find((({name:e})=>e===n)).coordinate,e.find((({name:e})=>e===r)).coordinate).map((e=>e.map((e=>parseFloat(e.toFixed(10)))))),s=`M${o[0].toString()} Q${o[1].toString()} ${o[2].toString()}`,l=`path${o.toString()}`,u=_t(...i)/10;return{...t,path:o,key:l,d:s,time:u}}))}(),await async function(){await nextTick(),a.flylineLengths=a.flylines.map((({key:e})=>s.proxy.$refs[e][0].getTotalLength()))}()}function c(e,[t,n],r){return[r,n-e*t+e*r]}function u({offsetX:e,offsetY:n}){if(!t.dev)return;(e/i.value).toFixed(2),(n/o.value).toFixed(2)}return onMounted((()=>{s=getCurrentInstance()})),watch((()=>t.config),(()=>{l()}),{deep:!0}),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"flylineChartEnhanced",ref:r,class:"dv-flyline-chart-enhanced",style:normalizeStyle(`background-image: url(${a.mergedConfig?a.mergedConfig.bgImgSrc:""})`),onClick:u},[a.flylines.length?(openBlock(),createElementBlock("svg",{key:0,width:unref(i),height:unref(o)},[createBaseVNode("defs",null,[createBaseVNode("radialGradient",{id:a.flylineGradientId,cx:"50%",cy:"50%",r:"50%"},al,8,tl),createBaseVNode("radialGradient",{id:a.haloGradientId,cx:"50%",cy:"50%",r:"50%"},sl,8,il)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.flylinePoints,(e=>(openBlock(),createElementBlock("g",{key:e.key+Math.random()},[createBaseVNode("defs",null,[e.halo.show?(openBlock(),createElementBlock("circle",{key:0,id:`halo${a.unique}${e.key}`,cx:e.coordinate[0],cy:e.coordinate[1]},[createBaseVNode("animate",{attributeName:"r",values:`1;${e.halo.radius}`,dur:`${e.halo.time}s`,repeatCount:"indefinite"},null,8,cl),createBaseVNode("animate",{attributeName:"opacity",values:"1;0",dur:`${e.halo.time}s`,repeatCount:"indefinite"},null,8,fl)],8,ul)):createCommentVNode("",!0)]),createBaseVNode("mask",{id:`mask${a.unique}${e.key}`},[e.halo.show?(openBlock(),createElementBlock("use",{key:0,"xlink:href":`#halo${a.unique}${e.key}`,fill:`url(#${a.haloGradientId})`},null,8,hl)):createCommentVNode("",!0)],8,dl),e.halo.show?(openBlock(),createElementBlock("use",{key:0,"xlink:href":`#halo${a.unique}${e.key}`,fill:e.halo.color,mask:`url(#mask${a.unique}${e.key})`},null,8,vl)):createCommentVNode("",!0),e.icon.show?(openBlock(),createElementBlock("image",{key:1,"xlink:href":e.icon.src,width:e.icon.width,height:e.icon.height,x:e.icon.x,y:e.icon.y},null,8,pl)):createCommentVNode("",!0),e.text.show?(openBlock(),createElementBlock("text",{key:2,style:normalizeStyle(`fontSize:${e.text.fontSize}px;color:${e.text.color}`),fill:e.text.color,x:e.text.x,y:e.text.y},toDisplayString(e.name),13,gl)):createCommentVNode("",!0)])))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.flylines,((e,t)=>(openBlock(),createElementBlock("g",{key:e.key+Math.random()},[createBaseVNode("defs",null,[createBaseVNode("path",{id:e.key,ref_for:!0,ref:e.key,d:e.d,fill:"transparent"},null,8,ml)]),createBaseVNode("use",{"xlink:href":`#${e.key}`,"stroke-width":e.width,stroke:e.orbitColor},null,8,yl),createBaseVNode("mask",{id:`mask${a.unique}${e.key}`},[createBaseVNode("circle",{cx:"0",cy:"0",r:e.radius,fill:`url(#${a.flylineGradientId})`},[createBaseVNode("animateMotion",{dur:e.time,path:e.d,rotate:"auto",repeatCount:"indefinite"},null,8,Cl)],8,xl)],8,bl),a.flylineLengths[t]?(openBlock(),createElementBlock("use",{key:0,"xlink:href":`#${e.key}`,"stroke-width":e.width,stroke:e.color,mask:`url(#mask${a.unique}${e.key})`},[createBaseVNode("animate",{attributeName:"stroke-dasharray",from:`0, ${a.flylineLengths[t]}`,to:`${a.flylineLengths[t]}, 0`,dur:e.time,repeatCount:"indefinite"},null,8,$l)],8,_l)):createCommentVNode("",!0)])))),128))],8,el)):createCommentVNode("",!0)],4))}},Rr={install(e){e.component("DvFlylineChartEnhanced",Pl)}},wl=["width","height"],kl=["id"],Al=createBaseVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null,-1),Sl=createBaseVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null,-1),Ll=[Al,Sl],Ol=["id"],Gl=createBaseVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"0"},null,-1),Rl=createBaseVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"1"},null,-1),Tl=[Gl,Rl],Ml=["id","cx","cy"],Dl=["values","dur"],Fl=["dur"],Bl=["xlink:href","width","height","x","y"],Nl=["id"],jl=["xlink:href","fill"],El=["xlink:href","fill","mask"],Wl=["id","d"],zl=["xlink:href","stroke-width","stroke"],ql=["xlink:href","stroke-width","stroke","mask"],Il=["from","to","dur"],Hl=["id"],Vl=["r","fill"],Ul=["dur","path"],Ql=["xlink:href","width","height","x","y"],Xl=["fill","x","y"],Yl={__name:"index",props:{config:{type:Object,default:()=>({})},dev:{type:Boolean,default:!1}},setup(e){const t=e,n=Ve(),r=ref$1(null),{width:i,height:o}=be(r,(function(){l()}),(function(){l()})),a=reactive({unique:Math.random(),maskId:`flyline-mask-id-${n}`,maskCircleId:`mask-circle-id-${n}`,gradientId:`gradient-id-${n}`,gradient2Id:`gradient2-id-${n}`,defaultConfig:{centerPoint:[0,0],points:[],lineWidth:1,orbitColor:"rgba(103, 224, 227, .2)",flylineColor:"#ffde93",k:-.5,curvature:5,flylineRadius:100,duration:[20,30],relative:!0,bgImgUrl:"",text:{offset:[0,15],color:"#ffdb5c",fontSize:12},halo:{show:!0,duration:30,color:"#fb7293",radius:120},centerPointImg:{width:40,height:40,url:""},pointsImg:{width:15,height:15,url:""}},mergedConfig:null,paths:[],lengths:[],times:[],texts:[]});let s;async function l(){(function(){const e=xe(_e(a.defaultConfig,!0),t.config||{}),{points:n}=e;e.points=n.map((e=>e instanceof Array?{position:e,text:""}:e)),a.mergedConfig=e})(),function(){let{centerPoint:e,points:t}=a.mergedConfig;const{relative:n}=a.mergedConfig;t=t.map((({position:e})=>e)),n&&(e=[i.value*e[0],o.value*e[1]],t=t.map((([e,t])=>[i.value*e,o.value*t]))),a.paths=t.map((t=>function(e,t){const n=function([e,t],[n,r]){const{curvature:i,k:o}=a.mergedConfig,[s,l]=[(e+n)/2,(t+r)/2],u=zt([e,t],[n,r])/i,h=u/2;let[d,f]=[s,l];do{d+=h,f=c(o,[s,l],d)[1]}while(zt([s,l],[d,f])<u);return[d,f]}(e,t);return[t,n,e]}(e,t)))}(),await async function(){await nextTick(),a.lengths=a.paths.map(((e,t)=>s.proxy.$refs[`path${t}`][0].getTotalLength()))}(),function(){const{duration:e,points:t}=a.mergedConfig;a.times=t.map((t=>_t(...e)/10))}(),function(){const{points:e}=a.mergedConfig;a.texts=e.map((({text:e})=>e))}()}function c(e,[t,n],r){return[r,n-e*t+e*r]}function u({offsetX:e,offsetY:n}){if(!t.dev)return;(e/i.value).toFixed(2),(n/o.value).toFixed(2)}return onMounted((()=>{s=getCurrentInstance()})),watch((()=>t.config),(()=>{l()}),{deep:!0}),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"flylineChart",ref:r,class:"dv-flyline-chart",style:normalizeStyle(`background-image: url(${a.mergedConfig?a.mergedConfig.bgImgUrl:""})`),onClick:u},[a.mergedConfig?(openBlock(),createElementBlock("svg",{key:0,width:unref(i),height:unref(o)},[createBaseVNode("defs",null,[createBaseVNode("radialGradient",{id:a.gradientId,cx:"50%",cy:"50%",r:"50%"},Ll,8,kl),createBaseVNode("radialGradient",{id:a.gradient2Id,cx:"50%",cy:"50%",r:"50%"},Tl,8,Ol),a.paths[0]?(openBlock(),createElementBlock("circle",{key:0,id:`circle${a.paths[0].toString()}`,cx:a.paths[0][2][0],cy:a.paths[0][2][1]},[createBaseVNode("animate",{attributeName:"r",values:`1;${a.mergedConfig.halo.radius}`,dur:a.mergedConfig.halo.duration/10+"s",repeatCount:"indefinite"},null,8,Dl),createBaseVNode("animate",{attributeName:"opacity",values:"1;0",dur:a.mergedConfig.halo.duration/10+"s",repeatCount:"indefinite"},null,8,Fl)],8,Ml)):createCommentVNode("",!0)]),a.paths[0]?(openBlock(),createElementBlock("image",{key:0,"xlink:href":a.mergedConfig.centerPointImg.url,width:a.mergedConfig.centerPointImg.width,height:a.mergedConfig.centerPointImg.height,x:a.paths[0][2][0]-a.mergedConfig.centerPointImg.width/2,y:a.paths[0][2][1]-a.mergedConfig.centerPointImg.height/2},null,8,Bl)):createCommentVNode("",!0),createBaseVNode("mask",{id:`maskhalo${a.paths[0].toString()}`},[a.paths[0]?(openBlock(),createElementBlock("use",{key:0,"xlink:href":`#circle${a.paths[0].toString()}`,fill:`url(#${a.gradient2Id})`},null,8,jl)):createCommentVNode("",!0)],8,Nl),a.paths[0]&&a.mergedConfig.halo.show?(openBlock(),createElementBlock("use",{key:1,"xlink:href":`#circle${a.paths[0].toString()}`,fill:a.mergedConfig.halo.color,mask:`url(#maskhalo${a.paths[0].toString()})`},null,8,El)):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.paths,((e,t)=>(openBlock(),createElementBlock("g",{key:t},[createBaseVNode("defs",null,[createBaseVNode("path",{id:`path${e.toString()}`,ref_for:!0,ref:`path${t}`,d:`M${e[0].toString()} Q${e[1].toString()} ${e[2].toString()}`,fill:"transparent"},null,8,Wl)]),createBaseVNode("use",{"xlink:href":`#path${e.toString()}`,"stroke-width":a.mergedConfig.lineWidth,stroke:a.mergedConfig.orbitColor},null,8,zl),a.lengths[t]?(openBlock(),createElementBlock("use",{key:0,"xlink:href":`#path${e.toString()}`,"stroke-width":a.mergedConfig.lineWidth,stroke:a.mergedConfig.flylineColor,mask:`url(#mask${a.unique}${e.toString()})`},[createBaseVNode("animate",{attributeName:"stroke-dasharray",from:`0, ${a.lengths[t]}`,to:`${a.lengths[t]}, 0`,dur:a.times[t]||0,repeatCount:"indefinite"},null,8,Il)],8,ql)):createCommentVNode("",!0),createBaseVNode("mask",{id:`mask${a.unique}${e.toString()}`},[createBaseVNode("circle",{cx:"0",cy:"0",r:a.mergedConfig.flylineRadius,fill:`url(#${a.gradientId})`},[createBaseVNode("animateMotion",{dur:a.times[t]||0,path:`M${e[0].toString()} Q${e[1].toString()} ${e[2].toString()}`,rotate:"auto",repeatCount:"indefinite"},null,8,Ul)],8,Vl)],8,Hl),createBaseVNode("image",{"xlink:href":a.mergedConfig.pointsImg.url,width:a.mergedConfig.pointsImg.width,height:a.mergedConfig.pointsImg.height,x:e[0][0]-a.mergedConfig.pointsImg.width/2,y:e[0][1]-a.mergedConfig.pointsImg.height/2},null,8,Ql),createBaseVNode("text",{style:normalizeStyle(`fontSize:${a.mergedConfig.text.fontSize}px;`),fill:a.mergedConfig.text.color,x:e[0][0]+a.mergedConfig.text.offset[0],y:e[0][1]+a.mergedConfig.text.offset[1]},toDisplayString(a.texts[t]),13,Xl)])))),128))],8,wl)):createCommentVNode("",!0)],4))}},Tr={install(e){e.component("DvFlylineChart",Yl)}},Kl={class:"ranking-info"},Jl={class:"rank"},Zl=["innerHTML"],es={class:"ranking-value"},ts={class:"ranking-column"},rs=createBaseVNode("div",{class:"shine"},null,-1),ns=[rs],as={__name:"index",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=ref$1(null),{width:r,height:i}=be(n,(function(){!o.mergedConfig||s(!0)}),(function(){a()})),o=reactive({defaultConfig:{data:[],rowNum:5,waitTime:2e3,carousel:"single",unit:"",sort:!0,valueFormatter:null},mergedConfig:null,rowsData:[],rows:[],heights:[],avgHeight:0,animationIndex:0,animationHandler:"",updater:0});function a(){o.mergedConfig=xe(_e(o.defaultConfig,!0),t.config||{}),function(){let{data:e}=o.mergedConfig;const{rowNum:t,sort:n}=o.mergedConfig;n&&e.sort((({value:e},{value:t})=>e>t?-1:e<t?1:0));const r=e.map((({value:e})=>e)),i=Math.min(...r)||0,a=Math.abs(i),s=(Math.max(...r)||0)+a;e=e.map(((e,t)=>({...e,ranking:t+1,percent:(e.value+a)/s*100})));const l=e.length;l>t&&l<2*t&&(e=[...e,...e]),e=e.map(((e,t)=>({...e,scroll:t}))),o.rowsData=e,o.rows=e}(),s(),l(!0)}function s(e=!1){const{rowNum:t,data:n}=o.mergedConfig,r=i.value/t;o.avgHeight=r,e||(o.heights=new Array(n.length).fill(r))}async function l(e=!1){const{waitTime:t,carousel:n,rowNum:r}=o.mergedConfig,i=o.rowsData.length;if(r>=i)return;const{updater:a}=o;if(e&&(await new Promise((e=>setTimeout(e,t))),a!==o.updater))return;const s="single"===n?1:r,c=o.rowsData.slice(o.animationIndex);if(c.push(...o.rowsData.slice(0,o.animationIndex)),o.rows=c.slice(0,r+1),o.heights=new Array(i).fill(o.avgHeight),await new Promise((e=>setTimeout(e,300))),a!==o.updater)return;o.heights.splice(0,s,...new Array(s).fill(0)),o.animationIndex+=s;const u=o.animationIndex-i;u>=0&&(o.animationIndex=u),o.animationHandler=setTimeout(l,t-300)}function c(){o.updater=(o.updater+1)%999999,o.animationHandler&&clearTimeout(o.animationHandler)}return watch((()=>t.config),(()=>{c(),a()}),{deep:!0}),onUnmounted((()=>{c()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"scrollRankingBoard",ref:n,class:"dv-scroll-ranking-board"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(o.rows,((e,t)=>(openBlock(),createElementBlock("div",{key:e.toString()+e.scroll,class:"row-item",style:normalizeStyle(`height: ${o.heights[t]}px;`)},[createBaseVNode("div",Kl,[createBaseVNode("div",Jl," No."+toDisplayString(e.ranking),1),createBaseVNode("div",{class:"info-name",innerHTML:e.name},null,8,Zl),createBaseVNode("div",es,toDisplayString(o.mergedConfig.valueFormatter?o.mergedConfig.valueFormatter(e):e.value+o.mergedConfig.unit),1)]),createBaseVNode("div",ts,[createBaseVNode("div",{class:"inside-column",style:normalizeStyle(`width: ${e.percent}%;`)},ns,4)])],4)))),128))],512))}},Mr={install(e){e.component("DvScrollRankingBoard",as)}},is=["align","innerHTML"],os=["align","onClick","onMouseenter","innerHTML"],ls={__name:"index",props:{config:{type:Object,default:()=>({})}},emits:["mouseover","click"],setup(e,{expose:t,emit:n}){const r=e,i=ref$1(null),{width:o,height:a}=be(i,(function(){!s.mergedConfig||(h(),d())}),(function(){c()})),s=reactive({defaultConfig:{header:[],data:[],rowNum:5,headerBGC:"#00BAFF",oddRowBGC:"#003B51",evenRowBGC:"#0A2732",waitTime:2e3,headerHeight:35,columnWidth:[],align:[],index:!1,indexHeader:"#",carousel:"single",hoverPause:!0},mergedConfig:null,header:[],rowsData:[],rows:[],widths:[],heights:[],avgHeight:0,aligns:[],animationIndex:0,animationHandler:"",updater:0,needCalc:!1});function l(e,t,r,i,o){if(e){const{ceils:e,rowIndex:t}=i;n("mouseover",{row:e,ceil:o,rowIndex:t,columnIndex:r})}!s.mergedConfig.hoverPause||(e?p():f(!0))}function c(){s.mergedConfig=xe(_e(s.defaultConfig,!0),r.config||{}),function(){let{header:e}=s.mergedConfig;const{index:t,indexHeader:n}=s.mergedConfig;if(!e.length)return void(e=[]);e=[...e],t&&e.unshift(n),s.header=e}(),u(),h(),d(),function(){const e=s.header.length,t=new Array(e).fill("left"),{align:n}=s.mergedConfig;s.aligns=xe(t,n)}(),f(!0)}function u(){let{data:e}=s.mergedConfig;const{index:t,headerBGC:n,rowNum:r}=s.mergedConfig;t&&(e=e.map(((e,t)=>{e=[...e];const r=`<span class="index" style="background-color: ${n};">${t+1}</span>`;return e.unshift(r),e}))),e=e.map(((e,t)=>({ceils:e,rowIndex:t})));const i=e.length;i>r&&i<2*r&&(e=[...e,...e]),e=e.map(((e,t)=>({...e,scroll:t}))),s.rowsData=e,s.rows=e}function h(){const{columnWidth:e,header:t}=s.mergedConfig,n=e.reduce(((e,t)=>e+t),0);let r=0;s.rowsData[0]?r=s.rowsData[0].ceils.length:t.length&&(r=t.length);const i=(o.value-n)/(r-e.length),a=new Array(r).fill(i);s.widths=xe(a,e)}function d(e=!1){const{headerHeight:t,rowNum:n,data:r}=s.mergedConfig;let i=a.value;s.header.length&&(i-=t);const o=i/n;s.avgHeight=o,e||(s.heights=new Array(r.length).fill(o))}async function f(e=!1){s.needCalc&&(u(),d(),s.needCalc=!1);const{waitTime:t,carousel:n,rowNum:r}=s.mergedConfig,{updater:i}=s,o=s.rowsData.length;if(r>=o||(e&&await new Promise((e=>setTimeout(e,t))),i!==s.updater))return;const a="single"===n?1:r,l=s.rowsData.slice(s.animationIndex);if(l.push(...s.rowsData.slice(0,s.animationIndex)),s.rows=l.slice(0,"page"===n?2*r:r+1),s.heights=new Array(o).fill(s.avgHeight),await new Promise((e=>setTimeout(e,300))),i!==s.updater)return;s.heights.splice(0,a,...new Array(a).fill(0)),s.animationIndex+=a;const c=s.animationIndex-o;c>=0&&(s.animationIndex=c),s.animationHandler=setTimeout(f,t-300)}function p(){s.updater=(s.updater+1)%999999,s.animationHandler&&clearTimeout(s.animationHandler)}return watch((()=>r.config),(e=>{p(),c()}),{deep:!0}),onUnmounted((()=>{p()})),t({updateRows:function(e,t){s.mergedConfig={...s.mergedConfig,data:[...e]},s.needCalc=!0,"number"==typeof t&&(s.animationIndex=t),s.animationHandler||f(!0)}}),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"scrollBoard",ref:i,class:"dv-scroll-board"},[s.header.length&&s.mergedConfig?(openBlock(),createElementBlock("div",{key:0,class:"header",style:normalizeStyle(`background-color: ${s.mergedConfig.headerBGC};`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.header,((e,t)=>(openBlock(),createElementBlock("div",{key:`${e}${t}`,class:"header-item",style:normalizeStyle(`\n          height: ${s.mergedConfig.headerHeight}px;\n          line-height: ${s.mergedConfig.headerHeight}px;\n          width: ${s.widths[t]}px;\n        `),align:s.aligns[t],innerHTML:e},null,12,is)))),128))],4)):createCommentVNode("",!0),s.mergedConfig?(openBlock(),createElementBlock("div",{key:1,class:"rows",style:normalizeStyle(`height: ${unref(a)-(s.header.length?s.mergedConfig.headerHeight:0)}px;`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(s.rows,((e,r)=>(openBlock(),createElementBlock("div",{key:`${e.toString()}${e.scroll}`,class:"row-item",style:normalizeStyle(`\n          height: ${s.heights[r]}px;\n          line-height: ${s.heights[r]}px;\n          background-color: ${s.mergedConfig[e.rowIndex%2==0?"evenRowBGC":"oddRowBGC"]};\n        `)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.ceils,((i,o)=>(openBlock(),createElementBlock("div",{key:`${i}${r}${o}`,class:"ceil",style:normalizeStyle(`width: ${s.widths[o]}px;`),align:s.aligns[o],onClick:t=>function(e,t,r,i){const{ceils:o,rowIndex:a}=r;n("click",{row:o,ceil:i,rowIndex:a,columnIndex:t})}(0,o,e,i),onMouseenter:t=>l(!0,0,o,e,i),onMouseleave:t[0]||(t[0]=e=>l(!1)),innerHTML:i},null,44,os)))),128))],4)))),128))],4)):createCommentVNode("",!0)],512))}},Dr={install(e){e.component("DvScrollBoard",ls)}};var ui={},Fr={},je={},ha;function qe(){if(ha)return je;ha=1;var e=Pe.exports;Object.defineProperty(je,"__esModule",{value:!0}),je.filterNonNumber=i,je.deepMerge=o,je.mulAdd=a,je.mergeSameStackData=function(e,n){var r=e.stack;if(!r)return(0,t.default)(e.data);var i=n.filter((function(e){return e.stack===r})),o=i.findIndex((function(t){return t.data===e.data})),s=i.splice(0,o+1).map((function(e){return e.data})),l=s[0].length;return new Array(l).fill(0).map((function(e,t){return a(s.map((function(e){return e[t]})))}))},je.getTwoPointDistance=s,je.getLinearGradientColor=function(e,n,r,i){if(e&&n&&r&&i.length){var o=i;"string"==typeof o&&(o=[i,i]);var a=e.createLinearGradient.apply(e,(0,t.default)(n).concat((0,t.default)(r))),s=1/(o.length-1);return o.forEach((function(e,t){return a.addColorStop(s*t,e)})),a}},je.getPolylineLength=function(e){return a(new Array(e.length-1).fill(0).map((function(t,n){return[e[n],e[n+1]]})).map((function(e){return s.apply(void 0,(0,t.default)(e))})))},je.getPointToLineDistance=function(e,t,n){var r=s(e,t),i=s(e,n),o=s(t,n);return.5*Math.sqrt((r+i+o)*(r+i-o)*(r+o-i)*(i+o-r))/o},je.initNeedSeries=function(e,t,n){return(e=(e=e.filter((function(e){return e.type===n}))).map((function(e){return o((0,r.deepClone)(t,!0),e)}))).filter((function(e){return e.show}))},je.radianToAngle=function(e){return e/Math.PI*180};var t=e(Me()),n=e(ze()),r=Fe();function i(e){return e.filter((function(e){return"number"==typeof e}))}function o(e,t){for(var i in t)e[i]&&"object"===(0,n.default)(e[i])?o(e[i],t[i]):"object"!==(0,n.default)(t[i])?e[i]=t[i]:e[i]=(0,r.deepClone)(t[i],!0);return e}function a(e){return(e=i(e)).reduce((function(e,t){return e+t}),0)}function s(e,t){var n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]);return Math.sqrt(n*n+r*r)}return je}var ci=Pe.exports,ss=ci(Ue()),va=ci(Me()),Ut=Vt,us=kn(),$t=Fe(),cs=it(),fs=qe();function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,ss.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ds={shape:{rx:0,ry:0,ir:0,or:0,startAngle:0,endAngle:0,clockWise:!0},validator:function(e){var t=e.shape;return!["rx","ry","ir","or","startAngle","endAngle"].find((function(e){return"number"!=typeof t[e]}))},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.rx,o=r.ry,a=r.ir,s=r.or,l=r.startAngle,c=r.endAngle,u=r.clockWise;i=parseInt(i)+.5,o=parseInt(o)+.5,n.arc(i,o,a>0?a:0,l,c,!u);var h=(0,$t.getCircleRadianPoint)(i,o,s,c).map((function(e){return parseInt(e)+.5})),d=(0,$t.getCircleRadianPoint)(i,o,a,l).map((function(e){return parseInt(e)+.5}));n.lineTo.apply(n,(0,va.default)(h)),n.arc(i,o,s>0?s:0,c,l,u),n.lineTo.apply(n,(0,va.default)(d)),n.closePath(),n.stroke(),n.fill()}},hs={shape:{rx:0,ry:0,r:0,startAngle:0,endAngle:0,gradientStartAngle:null,gradientEndAngle:null},validator:function(e){var t=e.shape;return!["rx","ry","r","startAngle","endAngle"].find((function(e){return"number"!=typeof t[e]}))},draw:function(e,t){var n=e.ctx,r=t.shape,i=t.style.gradient;1===(i=i.map((function(e){return(0,cs.getColorFromRgbValue)(e)}))).length&&(i=[i[0],i[0]]);var o=i.length-1,a=r.gradientStartAngle,s=r.gradientEndAngle,l=r.startAngle,c=r.endAngle,u=r.r,h=r.rx,d=r.ry;null===a&&(a=l),null===s&&(s=c);var f=(s-a)/o;f===2*Math.PI&&(f=2*Math.PI-.001);for(var p=0;p<o;p++){n.beginPath();var g=(0,$t.getCircleRadianPoint)(h,d,u,l+f*p),m=(0,$t.getCircleRadianPoint)(h,d,u,l+f*(p+1)),v=(0,fs.getLinearGradientColor)(n,g,m,[i[p],i[p+1]]),y=l+f*p,b=l+f*(p+1),x=!1;if(b>c&&(b=c,x=!0),n.arc(h,d,u,y,b),n.strokeStyle=v,n.stroke(),x)break}}},vs={shape:{number:[],content:"",position:[0,0],toFixed:0,rowGap:0,formatter:null},validator:function(e){var t=e.shape,n=t.number,r=t.content,i=t.position;return n instanceof Array&&"string"==typeof r&&i instanceof Array},draw:function(e,t){var n=e.ctx,r=t.shape,i=r.number,o=r.content,a=r.toFixed,s=r.rowGap,l=r.formatter,c=o.split("{nt}"),u="";c.forEach((function(e,t){var n=i[t];"number"!=typeof n&&(n=""),"number"==typeof n&&(n=n.toFixed(a),"function"==typeof l&&(n=l(n))),u+=e+(n||"")})),us.text.draw({ctx:n},{shape:ga(ga({},r),{},{content:u,rowGap:s})})}},ps={shape:{x:0,y:0,w:0,h:0},validator:function(e){var t=e.shape,n=t.x,r=t.y,i=t.w,o=t.h;return"number"==typeof n&&"number"==typeof r&&"number"==typeof i&&"number"==typeof o},draw:function(e,t){var n=e.ctx,r=t.shape;n.beginPath();var i=r.x,o=r.y,a=r.w,s=r.h/2;n.strokeStyle=n.fillStyle,n.moveTo(i,o+s),n.lineTo(i+a,o+s),n.lineWidth=1,n.stroke(),n.beginPath();var l=s-10;l<=0&&(l=3),n.arc(i+a/2,o+s,l,0,2*Math.PI),n.lineWidth=5,n.stroke(),n.fillStyle="#fff",n.fill()},hoverCheck:function(e,t){var n=t.shape,r=n.x,i=n.y,o=n.w,a=n.h;return(0,$t.checkPointIsInRect)(e,r,i,o,a)},setGraphCenter:function(e,t){var n=t.shape,r=t.style,i=n.x,o=n.y,a=n.w,s=n.h;r.graphCenter=[i+a/2,o+s/2]}};(0,Ut.extendNewGraph)("pie",ds),(0,Ut.extendNewGraph)("agArc",hs),(0,Ut.extendNewGraph)("numberText",vs),(0,Ut.extendNewGraph)("lineIcon",ps);var Br={},Gt={},Nr={},ut={},ma;function gs(){if(ma)return ut;ma=1,Object.defineProperty(ut,"__esModule",{value:!0}),ut.colorConfig=void 0;return ut.colorConfig=["#37a2da","#32c5e9","#67e0e3","#9fe6b8","#ffdb5c","#ff9f7f","#fb7293","#e062ae","#e690d1","#e7bcf3","#9d96f5","#8378ea","#96bfff"],ut}var ct={},ya;function ms(){if(ya)return ct;ya=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.gridConfig=void 0;return ct.gridConfig={left:"10%",right:"10%",top:60,bottom:60,style:{fill:"rgba(0, 0, 0, 0)"},rLevel:-30,animationCurve:"easeOutCubic",animationFrame:30},ct}var et={},ba;function ys(){if(ba)return et;ba=1,Object.defineProperty(et,"__esModule",{value:!0}),et.yAxisConfig=et.xAxisConfig=void 0;et.xAxisConfig={name:"",show:!0,position:"bottom",nameGap:15,nameLocation:"end",nameTextStyle:{fill:"#333",fontSize:10},min:"20%",max:"20%",interval:null,minInterval:null,maxInterval:null,boundaryGap:null,splitNumber:5,axisLine:{show:!0,style:{stroke:"#333",lineWidth:1}},axisTick:{show:!0,style:{stroke:"#333",lineWidth:1}},axisLabel:{show:!0,formatter:null,style:{fill:"#333",fontSize:10,rotate:0}},splitLine:{show:!1,style:{stroke:"#d4d4d4",lineWidth:1}},rLevel:-20,animationCurve:"easeOutCubic",animationFrame:50};return et.yAxisConfig={name:"",show:!0,position:"left",nameGap:15,nameLocation:"end",nameTextStyle:{fill:"#333",fontSize:10},min:"20%",max:"20%",interval:null,minInterval:null,maxInterval:null,boundaryGap:null,splitNumber:5,axisLine:{show:!0,style:{stroke:"#333",lineWidth:1}},axisTick:{show:!0,style:{stroke:"#333",lineWidth:1}},axisLabel:{show:!0,formatter:null,style:{fill:"#333",fontSize:10,rotate:0}},splitLine:{show:!0,style:{stroke:"#d4d4d4",lineWidth:1}},rLevel:-20,animationCurve:"easeOutCubic",animationFrame:50},et}var ft={},xa;function bs(){if(xa)return ft;xa=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.titleConfig=void 0;return ft.titleConfig={show:!0,text:"",offset:[0,-20],style:{fill:"#333",fontSize:17,fontWeight:"bold",textAlign:"center",textBaseline:"bottom"},rLevel:20,animationCurve:"easeOutCubic",animationFrame:50},ft}var dt={},Ca;function xs(){if(Ca)return dt;Ca=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.lineConfig=void 0;return dt.lineConfig={show:!0,name:"",stack:"",smooth:!1,xAxisIndex:0,yAxisIndex:0,data:[],lineStyle:{lineWidth:1},linePoint:{show:!0,radius:2,style:{fill:"#fff",lineWidth:1}},lineArea:{show:!1,gradient:[],style:{opacity:.5}},label:{show:!1,position:"top",offset:[0,-10],formatter:null,style:{fontSize:10}},rLevel:10,animationCurve:"easeOutCubic",animationFrame:50},dt}var ht={},_a;function Cs(){if(_a)return ht;_a=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.barConfig=void 0;return ht.barConfig={show:!0,name:"",stack:"",shapeType:"normal",echelonOffset:10,barWidth:"auto",barGap:"30%",barCategoryGap:"20%",xAxisIndex:0,yAxisIndex:0,data:[],backgroundBar:{show:!1,width:"auto",style:{fill:"rgba(200, 200, 200, .4)"}},label:{show:!1,position:"top",offset:[0,-10],formatter:null,style:{fontSize:10}},gradient:{color:[],local:!0},barStyle:{},independentColor:!1,independentColors:[],rLevel:0,animationCurve:"easeOutCubic",animationFrame:50},ht}var vt={},$a;function fi(){if($a)return vt;$a=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.pieConfig=void 0;var e={show:!0,name:"",radius:"50%",center:["50%","50%"],startAngle:-Math.PI/2,roseType:!1,roseSort:!0,roseIncrement:"auto",data:[],insideLabel:{show:!1,formatter:"{percent}%",style:{fontSize:10,fill:"#fff",textAlign:"center",textBaseline:"middle"}},outsideLabel:{show:!0,formatter:"{name}",style:{fontSize:11},labelLineBendGap:"20%",labelLineEndLength:50,labelLineStyle:{lineWidth:1}},pieStyle:{},percentToFixed:0,rLevel:10,animationDelayGap:60,animationCurve:"easeOutCubic",startAnimationCurve:"easeOutBack",animationFrame:50};return vt.pieConfig=e,vt}var pt={},Pa;function _s(){if(Pa)return pt;Pa=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.radarAxisConfig=void 0;var e={show:!0,center:["50%","50%"],radius:"65%",startAngle:-Math.PI/2,splitNum:5,polygon:!1,axisLabel:{show:!0,labelGap:15,color:[],style:{fill:"#333"}},axisLine:{show:!0,color:[],style:{stroke:"#999",lineWidth:1}},splitLine:{show:!0,color:[],style:{stroke:"#d4d4d4",lineWidth:1}},splitArea:{show:!1,color:["#f5f5f5","#e6e6e6"],style:{}},rLevel:-10,animationCurve:"easeOutCubic",animationFrane:50};return pt.radarAxisConfig=e,pt}var gt={},wa;function $s(){if(wa)return gt;wa=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.radarConfig=void 0;return gt.radarConfig={show:!0,name:"",data:[],radarStyle:{lineWidth:1},point:{show:!0,radius:2,style:{fill:"#fff"}},label:{show:!0,offset:[0,0],labelGap:5,formatter:null,style:{fontSize:10}},rLevel:10,animationCurve:"easeOutCubic",animationFrane:50},gt}var mt={},ka;function di(){if(ka)return mt;ka=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.gaugeConfig=void 0;var e={show:!0,name:"",radius:"60%",center:["50%","50%"],startAngle:-Math.PI/4*5,endAngle:Math.PI/4,min:0,max:100,splitNum:5,arcLineWidth:15,data:[],dataItemStyle:{},axisTick:{show:!0,tickLength:6,style:{stroke:"#999",lineWidth:1}},axisLabel:{show:!0,data:[],formatter:null,labelGap:5,style:{}},pointer:{show:!0,valueIndex:0,style:{scale:[1,1],fill:"#fb7293"}},details:{show:!1,formatter:null,offset:[0,0],valueToFixed:0,position:"center",style:{fontSize:20,fontWeight:"bold",textAlign:"center",textBaseline:"middle"}},backgroundArc:{show:!0,style:{stroke:"#e0e0e0"}},rLevel:10,animationCurve:"easeOutCubic",animationFrame:50};return mt.gaugeConfig=e,mt}var yt={},Aa,Sa,La;function Ps(){if(Aa)return yt;Aa=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.legendConfig=void 0;return yt.legendConfig={show:!0,orient:"horizontal",left:"auto",right:"auto",top:"auto",bottom:"auto",itemGap:10,iconWidth:25,iconHeight:10,selectAble:!0,data:[],textStyle:{fontFamily:"Arial",fontSize:13,fill:"#000"},iconStyle:{},textUnselectedStyle:{fontFamily:"Arial",fontSize:13,fill:"#999"},iconUnselectedStyle:{fill:"#999"},rLevel:20,animationCurve:"easeOutCubic",animationFrame:50},yt}function Qe(){return Sa||(Sa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.changeDefaultConfig=function(e,t){if(!f["".concat(e,"Config")])return;(0,d.deepMerge)(f["".concat(e,"Config")],t)},Object.defineProperty(e,"colorConfig",{enumerable:!0,get:function(){return t.colorConfig}}),Object.defineProperty(e,"gridConfig",{enumerable:!0,get:function(){return n.gridConfig}}),Object.defineProperty(e,"xAxisConfig",{enumerable:!0,get:function(){return r.xAxisConfig}}),Object.defineProperty(e,"yAxisConfig",{enumerable:!0,get:function(){return r.yAxisConfig}}),Object.defineProperty(e,"titleConfig",{enumerable:!0,get:function(){return i.titleConfig}}),Object.defineProperty(e,"lineConfig",{enumerable:!0,get:function(){return o.lineConfig}}),Object.defineProperty(e,"barConfig",{enumerable:!0,get:function(){return a.barConfig}}),Object.defineProperty(e,"pieConfig",{enumerable:!0,get:function(){return s.pieConfig}}),Object.defineProperty(e,"radarAxisConfig",{enumerable:!0,get:function(){return l.radarAxisConfig}}),Object.defineProperty(e,"radarConfig",{enumerable:!0,get:function(){return c.radarConfig}}),Object.defineProperty(e,"gaugeConfig",{enumerable:!0,get:function(){return u.gaugeConfig}}),Object.defineProperty(e,"legendConfig",{enumerable:!0,get:function(){return h.legendConfig}}),e.keys=void 0;var t=gs(),n=ms(),r=ys(),i=bs(),o=xs(),a=Cs(),s=fi(),l=_s(),c=$s(),u=di(),h=Ps(),d=qe(),f={colorConfig:t.colorConfig,gridConfig:n.gridConfig,xAxisConfig:r.xAxisConfig,yAxisConfig:r.yAxisConfig,titleConfig:i.titleConfig,lineConfig:o.lineConfig,barConfig:a.barConfig,pieConfig:s.pieConfig,radarAxisConfig:l.radarAxisConfig,radarConfig:c.radarConfig,gaugeConfig:u.gaugeConfig,legendConfig:h.legendConfig};e.keys=["color","title","legend","xAxis","yAxis","grid","radarAxis","line","bar","pie","radar","gauge"]}(Nr)),Nr}function ws(){if(La)return Gt;La=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.mergeColor=function(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=(0,t.deepClone)(e.colorConfig,!0),a=i.color,s=i.series;if(s||(s=[]),a||(a=[]),i.color=a=(0,n.deepMerge)(o,a),s.length){var l=a.length;s.forEach((function(e,t){e.color||(e.color=a[t%l])}));var c=s.filter((function(e){return"pie"===e.type}));c.forEach((function(e){return e.data.forEach((function(e,t){return e.color=a[t%l]}))}));var u=s.filter((function(e){return"gauge"===e.type}));u.forEach((function(e){return e.data.forEach((function(e,t){return e.color=a[t%l]}))}));var h=s.filter((function(e){var t=e.type,n=e.independentColor;return"bar"===t&&n}));h.forEach((function(e){e.independentColors||(e.independentColors=a)}))}};var e=Qe(),t=Fe(),n=qe();return Gt}var Rt={},at={},Oa,Ga;function Xe(){if(Oa)return at;Oa=1;var e=Pe.exports;Object.defineProperty(at,"__esModule",{value:!0}),at.doUpdate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.chart,n=e.series,r=e.key,o=e.getGraphConfig,a=e.getStartGraphConfig,s=e.beforeChange,l=e.beforeUpdate,c=e.afterAddGraph;t[r]?t[r].update(n):t[r]=new i({chart:t,key:r,getGraphConfig:o,getStartGraphConfig:a,beforeChange:s,beforeUpdate:l,afterAddGraph:c},n)},at.Updater=void 0;var t=e(Me()),n=e(ze()),r=e(At()),i=function e(t,n){(0,r.default)(this,e);var i=t.chart,o=t.key;"function"==typeof t.getGraphConfig&&(i[o]||(this.graphs=i[o]=[]),Object.assign(this,t),this.update(n))};function o(e,t){Object.keys(t).forEach((function(n){"shape"===n||"style"===n?e.animation(n,t[n],!0):e[n]=t[n]}))}return at.Updater=i,i.prototype.update=function(e){var r=this,i=this.graphs,a=this.beforeUpdate;if(function(e,t){var n=e.graphs,r=e.chart.render,i=n.length,o=t.length;if(i>o){n.splice(o).forEach((function(e){return e.forEach((function(e){return r.delGraph(e)}))}))}}(this,e),e.length){var s=(0,n.default)(a);e.forEach((function(e,n){"function"===s&&a(i,e,n,r);var l=i[n];l?function(e,n,r,i){var a=i.getGraphConfig,s=i.chart.render,l=i.beforeChange,c=a(n,i);(function(e,n,r){var i=e.length,o=n.length;if(o>i){var a=e.slice(-1)[0],s=new Array(o-i).fill(0).map((function(e){return r.clone(a)}));e.push.apply(e,(0,t.default)(s))}else if(o<i){e.splice(o).forEach((function(e){return r.delGraph(e)}))}})(e,c,s),e.forEach((function(e,t){var n=c[t];"function"==typeof l&&l(e,n),o(e,n)}))}(l,e,0,r):function(e,t,n,r){var i=r.getGraphConfig,a=r.getStartGraphConfig,s=r.chart,l=s.render,c=null;"function"==typeof a&&(c=a(t,r));var u=i(t,r);if(u.length){c?(e[n]=c.map((function(e){return l.add(e)})),e[n].forEach((function(e,t){o(e,u[t])}))):e[n]=u.map((function(e){return l.add(e)}));var h=r.afterAddGraph;"function"==typeof h&&h(e[n])}}(i,e,n,r)}))}},at}function ks(){if(Ga)return Rt;Ga=1;var e=Pe.exports;Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.title=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=[];t.title&&(s[0]=(0,o.deepMerge)((0,r.deepClone)(i.titleConfig,!0),t.title)),(0,n.doUpdate)({chart:e,series:s,key:"title",getGraphConfig:a})};var t=e(Ne()),n=Xe(),r=Fe(),i=Qe(),o=qe();function a(e,n){var r=i.titleConfig.animationCurve,o=i.titleConfig.animationFrame,a=i.titleConfig.rLevel,s=function(e,n){var r=e.offset,i=e.text,o=n.chart.gridArea,a=o.x,s=o.y,l=o.w,c=(0,t.default)(r,2),u=c[0],h=c[1];return{content:i,position:[a+l/2+u,s+h]}}(e,n),l=function(e){var t=e.style;return t}(e);return[{name:"text",index:a,visible:e.show,animationCurve:r,animationFrame:o,shape:s,style:l}]}return Rt}var Tt={},Ra;function As(){if(Ra)return Tt;Ra=1;var e=Pe.exports;Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.grid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.grid;n=(0,a.deepMerge)((0,i.deepClone)(o.gridConfig,!0),n||{}),(0,r.doUpdate)({chart:e,series:[n],key:"grid",getGraphConfig:l})};var t=e(Ne()),n=e(Ue()),r=Xe(),i=Fe(),o=Qe(),a=qe();function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,r){var i=e.animationCurve,o=e.animationFrame,a=e.rLevel,l=function(e,n){var r=(0,t.default)(n.chart.render.area,2),i=r[0],o=r[1],a=c(e.left,i),s=c(e.right,i),l=c(e.top,o),u=c(e.bottom,o),h=i-a-s,d=o-l-u;return{x:a,y:l,w:h,h:d}}(e,r),u=function(e){var t=e.style;return t}(e);return r.chart.gridArea=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l),[{name:"rect",index:a,animationCurve:i,animationFrame:o,shape:l,style:u}]}function c(e,t){return"number"==typeof e?e:"string"!=typeof e?0:t*parseInt(e)/100}return Tt}var Mt={},Ta;function Ss(){if(Ta)return Mt;Ta=1;var e=Pe.exports;Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.axis=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.xAxis,r=t.yAxis,i=t.series,a=[];n&&r&&i&&(a=S(a=$(a=C(a=_(a=w(a=v(a=m(a=(a=g(a=p(n,r))).filter((function(e){return e.show}))),i)),e))),e)),(0,o.doUpdate)({chart:e,series:a,key:"axisLine",getGraphConfig:E}),(0,o.doUpdate)({chart:e,series:a,key:"axisTick",getGraphConfig:k}),(0,o.doUpdate)({chart:e,series:a,key:"axisLabel",getGraphConfig:T}),(0,o.doUpdate)({chart:e,series:a,key:"axisName",getGraphConfig:O}),(0,o.doUpdate)({chart:e,series:a,key:"splitLine",getGraphConfig:D}),e.axisData=a};var t=e(ze()),n=e(Ne()),r=e(Ue()),i=e(Me()),o=Xe(),a=Qe(),s=qe(),l=Fe();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h={xAxisConfig:a.xAxisConfig,yAxisConfig:a.yAxisConfig},d=Math.abs,f=Math.pow;function p(e,t){var n,r,o=[],a=[];e instanceof Array?(n=o).push.apply(n,(0,i.default)(e)):o.push(e);t instanceof Array?(r=a).push.apply(r,(0,i.default)(t)):a.push(t);return o.splice(2),a.splice(2),o=o.map((function(e,t){return u(u({},e),{},{index:t,axis:"x"})})),a=a.map((function(e,t){return u(u({},e),{},{index:t,axis:"y"})})),[].concat((0,i.default)(o),(0,i.default)(a))}function g(e){var t=e.filter((function(e){return"x"===e.axis})),n=e.filter((function(e){return"y"===e.axis}));return t=t.map((function(e){return(0,s.deepMerge)((0,l.deepClone)(a.xAxisConfig),e)})),n=n.map((function(e){return(0,s.deepMerge)((0,l.deepClone)(a.yAxisConfig),e)})),[].concat((0,i.default)(t),(0,i.default)(n))}function m(e){var t=e.filter((function(e){return"value"===e.data})),n=e.filter((function(e){return"value"!==e.data}));return t.forEach((function(e){"boolean"!=typeof e.boundaryGap&&(e.boundaryGap=!1)})),n.forEach((function(e){"boolean"!=typeof e.boundaryGap&&(e.boundaryGap=!0)})),[].concat((0,i.default)(t),(0,i.default)(n))}function v(e,r){var o=e.filter((function(e){return"value"===e.data})),a=e.filter((function(e){return e.data instanceof Array}));return o=function(e,r){return e.map((function(e){var o=function(e,t){if(t=t.filter((function(e){var t=e.show,n=e.type;return!(!1===t||"pie"===n)})),0===t.length)return[0,0];var n=e.index,r=e.axis;t=function(e){var t=(0,l.deepClone)(e,!0);return e.forEach((function(n,r){var i=(0,s.mergeSameStackData)(n,e);t[r].data=i})),t}(t);var o=r+"Axis",a=t.filter((function(e){return e[o]===n}));return a.length||(a=t),function(e){if(e){var t=Math.min.apply(Math,(0,i.default)(e.map((function(e){var t=e.data;return Math.min.apply(Math,(0,i.default)((0,s.filterNonNumber)(t)))})))),n=Math.max.apply(Math,(0,i.default)(e.map((function(e){var t=e.data;return Math.max.apply(Math,(0,i.default)((0,s.filterNonNumber)(t)))}))));return[t,n]}}(a)}(e,r),a=function(e,r){var i=e.min,o=e.max,a=e.axis,s=(0,n.default)(r,2),l=s[0],c=s[1],u=(0,t.default)(i),f=(0,t.default)(o);if(b(i)||(i=h[a+"AxisConfig"].min,u="string"),b(o)||(o=h[a+"AxisConfig"].max,f="string"),"string"===u){var p=y(i=parseInt(l-d(l*parseFloat(i)/100)));i=parseFloat((i/p-.1).toFixed(1))*p}if("string"===f){var g=y(o=parseInt(c+d(c*parseFloat(o)/100)));o=parseFloat((o/g+.1).toFixed(1))*g}return[i,o]}(e,o),c=(0,n.default)(a,2),f=c[0],p=c[1],g=function(e,t,n){var r=n.interval,i=n.minInterval,o=n.maxInterval,a=n.splitNumber,s=n.axis,l=h[s+"AxisConfig"];if("number"!=typeof r&&(r=l.interval),"number"!=typeof i&&(i=l.minInterval),"number"!=typeof o&&(o=l.maxInterval),"number"!=typeof a&&(a=l.splitNumber),"number"==typeof r)return r;var c=parseInt((t-e)/(a-1));return c.toString().length>1&&(c=parseInt(c.toString().replace(/\d$/,"0"))),0===c&&(c=1),"number"==typeof i&&c<i?i:"number"==typeof o&&c>o?o:c}(f,p,e),m=e.axisLabel.formatter,v=[];return v=f<0&&p>0?function(e,t,n){var r=[],o=[],a=0,s=0;do{r.push(a-=n)}while(a>e);do{o.push(s+=n)}while(s<t);return[].concat((0,i.default)(r.reverse()),[0],(0,i.default)(o))}(f,p,g):function(e,t,n){var r=[e],i=e;do{r.push(i+=n)}while(i<t);return r}(f,p,g),v=v.map((function(e){return parseFloat(e.toFixed(2))})),u(u({},e),{},{maxValue:v.slice(-1)[0],minValue:v[0],label:x(v,m)})}))}(o,r),a=function(e){return e.map((function(e){var t=e.data,n=e.axisLabel.formatter;return u(u({},e),{},{label:x(t,n)})}))}(a),[].concat((0,i.default)(o),(0,i.default)(a))}function y(e){var t=d(e).toString(),n=t.length,r=t.replace(/0*$/g,"").indexOf("0"),i=n-1;return-1!==r&&(i-=r),f(10,i)}function b(e){var n=(0,t.default)(e);return"string"===n&&/^\d+%$/.test(e)||"number"===n}function x(e,t){return t&&("string"==typeof t&&(e=e.map((function(e){return t.replace("{value}",e)}))),"function"==typeof t&&(e=e.map((function(e,n){return t({value:e,index:n})})))),e}function w(e){var t=e.filter((function(e){return"x"===e.axis})),n=e.filter((function(e){return"y"===e.axis}));return t[0]&&!t[0].position&&(t[0].position=a.xAxisConfig.position),t[1]&&!t[1].position&&(t[1].position="bottom"===t[0].position?"top":"bottom"),n[0]&&!n[0].position&&(n[0].position=a.yAxisConfig.position),n[1]&&!n[1].position&&(n[1].position="left"===n[0].position?"right":"left"),[].concat((0,i.default)(t),(0,i.default)(n))}function _(e,t){var n=t.gridArea,r=n.x,i=n.y,o=n.w,a=n.h;return e=e.map((function(e){var t=e.position,n=[];return"left"===t?n=[[r,i],[r,i+a]].reverse():"right"===t?n=[[r+o,i],[r+o,i+a]].reverse():"top"===t?n=[[r,i],[r+o,i]]:"bottom"===t&&(n=[[r,i+a],[r+o,i+a]]),u(u({},e),{},{linePosition:n})}))}function C(e,t){return e.map((function(e){var t=e.axis,r=e.linePosition,i=e.position,o=e.label,a=e.boundaryGap;"boolean"!=typeof a&&(a=h[t+"AxisConfig"].boundaryGap);var s=o.length,c=(0,n.default)(r,2),d=(0,n.default)(c[0],2),f=d[0],p=d[1],g=(0,n.default)(c[1],2),m=g[0],v=g[1],y=("x"===t?m-f:v-p)/(a?s:s-1),b=new Array(s).fill(0).map((function(e,n){return"x"===t?[f+y*(a?n+.5:n),p]:[f,p+y*(a?n+.5:n)]})),x=function(e,t,r,i,o){var a="x"===e?1:0,s=5;"x"===e&&"top"===r&&(s=-5),"y"===e&&"left"===r&&(s=-5);var c=i.map((function(e){var t=(0,l.deepClone)(e);return t[a]+=s,[(0,l.deepClone)(e),t]}));return t&&(a="x"===e?0:1,s=o/2,c.forEach((function(e){var t=(0,n.default)(e,2),r=t[0],i=t[1];r[a]+=s,i[a]+=s}))),c}(t,a,i,b,y);return u(u({},e),{},{tickPosition:b,tickLinePosition:x,tickGap:y})}))}function $(e,t){return e.map((function(e){var t=e.nameGap,r=e.nameLocation,o=e.position,a=e.linePosition,s=(0,n.default)(a,2),l=s[0],c=s[1],h=(0,i.default)(l);"end"===r&&(h=(0,i.default)(c)),"center"===r&&(h[0]=(l[0]+c[0])/2,h[1]=(l[1]+c[1])/2);var d=0;"top"===o&&"center"===r&&(d=1),"bottom"===o&&"center"===r&&(d=1),"left"===o&&"center"!==r&&(d=1),"right"===o&&"center"!==r&&(d=1);var f=t;return"top"===o&&"end"!==r&&(f*=-1),"left"===o&&"start"!==r&&(f*=-1),"bottom"===o&&"start"===r&&(f*=-1),"right"===o&&"end"===r&&(f*=-1),h[d]+=f,u(u({},e),{},{namePosition:h})}))}function S(e,t){var r=t.gridArea,o=r.w,a=r.h;return e.map((function(e){var t=e.tickLinePosition,r=e.position,s=e.boundaryGap,l=0,c=o;("top"===r||"bottom"===r)&&(l=1),("top"===r||"bottom"===r)&&(c=a),("right"===r||"bottom"===r)&&(c*=-1);var h=t.map((function(e){var t=(0,n.default)(e,1)[0],r=(0,i.default)(t);return r[l]+=c,[(0,i.default)(t),r]}));return s||h.shift(),u(u({},e),{},{splitLinePosition:h})}))}function E(e){var t=e.animationCurve,n=e.animationFrame;return[{name:"polyline",index:e.rLevel,visible:e.axisLine.show,animationCurve:t,animationFrame:n,shape:A(e),style:M(e)}]}function A(e){return{points:e.linePosition}}function M(e){return e.axisLine.style}function k(e){var t=e.animationCurve,n=e.animationFrame,r=e.rLevel,i=function(e){var t=e.tickLinePosition;return t.map((function(e){return{points:e}}))}(e),o=function(e){return e.axisTick.style}(e);return i.map((function(i){return{name:"polyline",index:r,visible:e.axisTick.show,animationCurve:t,animationFrame:n,shape:i,style:o}}))}function T(e){var t=e.animationCurve,n=e.animationFrame,r=e.rLevel,i=function(e){var t=e.label,n=e.tickPosition,r=e.position;return n.map((function(e,n){return{position:P(e,r),content:t[n].toString()}}))}(e),o=function(e,t){var n=e.position,r=e.axisLabel.style,i=function(e){if("left"===e)return{textAlign:"right",textBaseline:"middle"};if("right"===e)return{textAlign:"left",textBaseline:"middle"};if("top"===e)return{textAlign:"center",textBaseline:"bottom"};if("bottom"===e)return{textAlign:"center",textBaseline:"top"}}(n);r=(0,s.deepMerge)(i,r);var o=t.map((function(e){var t=e.position;return u(u({},r),{},{graphCenter:t})}));return o}(e,i);return i.map((function(i,a){return{name:"text",index:r,visible:e.axisLabel.show,animationCurve:t,animationFrame:n,shape:i,style:o[a],setGraphCenter:function(){}}}))}function P(e,t){var n=0,r=10;return("top"===t||"bottom"===t)&&(n=1),("top"===t||"left"===t)&&(r=-10),(e=(0,l.deepClone)(e))[n]+=r,e}function O(e){var t=e.animationCurve,n=e.animationFrame;return[{name:"text",index:e.rLevel,animationCurve:t,animationFrame:n,shape:N(e),style:I(e)}]}function N(e){return{content:e.name,position:e.namePosition}}function I(e){var t=e.nameLocation,n=e.position,r=e.nameTextStyle,i=function(e,t){if("top"===e&&"start"===t||"bottom"===e&&"start"===t||"left"===e&&"center"===t)return{textAlign:"right",textBaseline:"middle"};if("top"===e&&"end"===t||"bottom"===e&&"end"===t||"right"===e&&"center"===t)return{textAlign:"left",textBaseline:"middle"};if("top"===e&&"center"===t||"left"===e&&"end"===t||"right"===e&&"end"===t)return{textAlign:"center",textBaseline:"bottom"};if("bottom"===e&&"center"===t||"left"===e&&"start"===t||"right"===e&&"start"===t)return{textAlign:"center",textBaseline:"top"}}(n,t);return(0,s.deepMerge)(i,r)}function D(e){var t=e.animationCurve,n=e.animationFrame,r=e.rLevel,i=function(e){var t=e.splitLinePosition;return t.map((function(e){return{points:e}}))}(e),o=function(e){return e.splitLine.style}(e);return i.map((function(i){return{name:"polyline",index:r,visible:e.splitLine.show,animationCurve:t,animationFrame:n,shape:i,style:o}}))}return Mt}var Dt={},Ma;function Ls(){if(Ma)return Dt;Ma=1;var e=Pe.exports;Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.line=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.xAxis,r=t.yAxis,i=t.series,s=[];n&&r&&i&&(s=f(s=(0,l.initNeedSeries)(i,a.lineConfig,"line"),e)),(0,o.doUpdate)({chart:e,series:s,key:"lineArea",getGraphConfig:p,getStartGraphConfig:y,beforeUpdate:b,beforeChange:x}),(0,o.doUpdate)({chart:e,series:s,key:"line",getGraphConfig:w,getStartGraphConfig:$,beforeUpdate:b,beforeChange:x}),(0,o.doUpdate)({chart:e,series:s,key:"linePoint",getGraphConfig:S,getStartGraphConfig:E}),(0,o.doUpdate)({chart:e,series:s,key:"lineLabel",getGraphConfig:A})};var t=e(ze()),n=e(Ne()),r=e(Me()),i=e(Ue()),o=Xe(),a=Qe(),s=e(wn()),l=qe();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=s.default.polylineToBezierCurve,d=s.default.getBezierCurveLength;function f(e,t){var n=t.axisData;return e.map((function(t){var r=(0,l.mergeSameStackData)(t,e);r=function(e,t){var n=e.data;return t.map((function(e,t){return"number"==typeof n[t]?e:null}))}(t,r);var i=function(e,t){var n=e.xAxisIndex,r=e.yAxisIndex,i=t.find((function(e){var t=e.axis,r=e.index;return"x"===t&&r===n})),o=t.find((function(e){var t=e.axis,n=e.index;return"y"===t&&n===r}));return[i,o]}(t,n),o=function(e,t){var n=t.findIndex((function(e){return"value"===e.data})),r=t[n],i=t[1-n],o=r.linePosition,a=r.axis,s=i.tickPosition,l=s.length,c="x"===a?0:1,u=o[0][c],h=o[1][c],d=h-u,f=r.maxValue,p=r.minValue,g=f-p,m=new Array(l).fill(0).map((function(t,n){var r=e[n];if("number"!=typeof r)return null;var i=(r-p)/g;return 0===g&&(i=0),i*d+u}));return m.map((function(e,t){if(t>=l||"number"!=typeof e)return null;var n=[e,s[t][1-c]];return 0===c||n.reverse(),n}))}(r,i),a=function(e){var t=e.find((function(e){return"value"===e.data})),n=t.axis,r=t.linePosition,i=t.minValue,o=t.maxValue,a="x"===n?0:1,s=r[0][a];if(i<0&&o>0){var l=o-i,c=Math.abs(r[0][a]-r[1][a]),u=Math.abs(i)/l*c;"y"===n&&(u*=-1),s+=u}return{changeIndex:a,changeValue:s}}(i);return u(u({},t),{},{linePosition:o.filter((function(e){return e})),lineFillBottomPos:a})}))}function p(e){var t=e.animationCurve,n=e.animationFrame,r=e.lineFillBottomPos,i=e.rLevel;return[{name:_(e),index:i,animationCurve:t,animationFrame:n,visible:e.lineArea.show,lineFillBottomPos:r,shape:g(e),style:m(e),drawed:v}]}function g(e){return{points:e.linePosition}}function m(e){var t=e.lineArea,n=e.color,i=t.gradient,o=t.style,a=[o.fill||n],s=(0,l.deepMerge)(a,i);1===s.length&&s.push(s[0]);var c=function(e){var t=e.lineFillBottomPos,n=e.linePosition,i=t.changeIndex,o=t.changeValue,a=n.map((function(e){return e[i]})),s=Math.max.apply(Math,(0,r.default)(a)),l=Math.min.apply(Math,(0,r.default)(a)),c=s;return 1===i&&(c=l),1===i?[0,c,0,o]:[c,0,o,0]}(e);return o=u(u({},o),{},{stroke:"rgba(0, 0, 0, 0)"}),(0,l.deepMerge)({gradientColor:s,gradientParams:c,gradientType:"linear",gradientWith:"fill"},o)}function v(e,t){var n=e.lineFillBottomPos,i=e.shape,o=t.ctx,a=i.points,s=n.changeIndex,l=n.changeValue,c=(0,r.default)(a[a.length-1]),u=(0,r.default)(a[0]);c[s]=l,u[s]=l,o.lineTo.apply(o,(0,r.default)(c)),o.lineTo.apply(o,(0,r.default)(u)),o.closePath(),o.fill()}function y(e){var t=p(e)[0],n=u({},t.style);return n.opacity=0,t.style=n,[t]}function b(e,t,n,r){var i=e[n];if(i){var o=_(t),a=r.chart.render;!(o!==i[0].name)||(i.forEach((function(e){return a.delGraph(e)})),e[n]=null)}}function x(e,t){var n=t.shape.points,i=e.shape.points,o=i.length,a=n.length;if(a>o){var s=i.slice(-1)[0],l=new Array(a-o).fill(0).map((function(e){return(0,r.default)(s)}));i.push.apply(i,(0,r.default)(l))}else a<o&&i.splice(a)}function w(e){var t=e.animationCurve,n=e.animationFrame,r=e.rLevel;return[{name:_(e),index:r+1,animationCurve:t,animationFrame:n,shape:g(e),style:C(e)}]}function _(e){return e.smooth?"smoothline":"polyline"}function C(e){var t=e.lineStyle,n=e.color,r=e.smooth,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)return(0,l.getPolylineLength)(e);var n=h(e);return d(n)}(e.linePosition,r);return(0,l.deepMerge)({stroke:n,lineDash:[i,0]},t)}function $(e){var t=e.lineStyle.lineDash,n=w(e)[0],i=n.style.lineDash;return i=t?[0,0]:(0,r.default)(i).reverse(),n.style.lineDash=i,[n]}function S(e){var t=e.animationCurve,r=e.animationFrame,i=e.rLevel,o=function(e){var t=e.linePosition,r=e.linePoint.radius;return t.map((function(e){var t=(0,n.default)(e,2),i=t[0],o=t[1];return{r:r,rx:i,ry:o}}))}(e),a=function(e){var t=e.color,n=e.linePoint.style;return(0,l.deepMerge)({stroke:t},n)}(e);return o.map((function(n){return{name:"circle",index:i+2,visible:e.linePoint.show,animationCurve:t,animationFrame:r,shape:n,style:a}}))}function E(e){var t=S(e);return t.forEach((function(e){e.shape.r=.1})),t}function A(e){var i=e.animationCurve,o=e.animationFrame,a=e.rLevel,s=function(e){var i=function(e){var n=e.data,r=e.label.formatter;if(n=n.filter((function(e){return"number"==typeof e})).map((function(e){return e.toString()})),!r)return n;var i=(0,t.default)(r);return"string"===i?n.map((function(e){return r.replace("{value}",e)})):"function"===i?n.map((function(e,t){return r({value:e,index:t})})):n}(e),o=function(e){var t=e.linePosition,i=e.lineFillBottomPos,o=e.label,a=o.position,s=o.offset,l=i.changeIndex,c=i.changeValue;return t.map((function(e){if("bottom"===a&&((e=(0,r.default)(e))[l]=c),"center"===a){var t=(0,r.default)(e);t[l]=c,e=function(e,t){var r=(0,n.default)(e,2),i=r[0],o=r[1],a=(0,n.default)(t,2),s=a[0],l=a[1];return[(i+s)/2,(o+l)/2]}(e,t)}return function(e,t){var r=(0,n.default)(e,2),i=r[0],o=r[1],a=(0,n.default)(t,2),s=a[0],l=a[1];return[i+s,o+l]}(e,s)}))}(e);return i.map((function(e,t){return{content:e,position:o[t]}}))}(e),c=function(e){var t=e.color,n=e.label.style;return(0,l.deepMerge)({fill:t},n)}(e);return s.map((function(t,n){return{name:"text",index:a+3,visible:e.label.show,animationCurve:i,animationFrame:o,shape:t,style:c}}))}return Dt}var Ft={},Da;function Os(){if(Da)return Ft;Da=1;var e=Pe.exports;Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.bar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.xAxis,r=t.yAxis,i=t.series,s=[];n&&r&&i&&(s=f(s=d(s=h(s=(0,l.initNeedSeries)(i,a.barConfig,"bar"),e)))),(0,o.doUpdate)({chart:e,series:s.slice(-1),key:"backgroundBar",getGraphConfig:g}),s.reverse(),(0,o.doUpdate)({chart:e,series:s,key:"bar",getGraphConfig:m,getStartGraphConfig:x,beforeUpdate:w}),(0,o.doUpdate)({chart:e,series:s,key:"barLabel",getGraphConfig:_})};var t=e(ze()),n=e(Ue()),r=e(Ne()),i=e(Me()),o=Xe(),a=Qe(),s=Fe(),l=qe();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){var n=t.axisData;return e.forEach((function(e){var t=e.xAxisIndex,r=e.yAxisIndex;"number"!=typeof t&&(t=0),"number"!=typeof r&&(r=0);var i=[n.find((function(e){var n=e.axis,r=e.index;return"".concat(n).concat(r)==="x".concat(t)})),n.find((function(e){var t=e.axis,n=e.index;return"".concat(t).concat(n)==="y".concat(r)}))],o=i.findIndex((function(e){return"value"===e.data}));e.valueAxis=i[o],e.labelAxis=i[1-o]})),e}function d(e,t){var n=function(e){var t=e.map((function(e){var t=e.labelAxis;return t.axis+t.index}));return t=(0,i.default)(new Set(t)),t.map((function(t){return e.filter((function(e){var n=e.labelAxis;return n.axis+n.index===t}))}))}(e);return n.forEach((function(e){(function(e){var t=function(e){var t=[];return e.forEach((function(e){var n=e.stack;n&&t.push(n)})),(0,i.default)(new Set(t))}(e);t=t.map((function(e){return{stack:e,index:-1}}));var n=0;e.forEach((function(e){var r=e.stack;if(r){var i=t.find((function(e){return e.stack===r}));-1===i.index&&(i.index=n,n++),e.barIndex=i.index}else e.barIndex=n,n++}))})(e),function(e){var t=(0,i.default)(new Set(e.map((function(e){return e.barIndex})))).length;e.forEach((function(e){return e.barNum=t}))}(e),function(e){var t=e.slice(-1)[0],n=t.barCategoryGap,r=t.labelAxis.tickGap,i=0;i="number"==typeof n?n:(1-parseInt(n)/100)*r,e.forEach((function(e){return e.barCategoryWidth=i}))}(e),function(e){var t=e.slice(-1)[0],n=t.barCategoryWidth,i=t.barWidth,o=t.barGap,a=t.barNum,s=[];"number"==typeof i||"auto"!==i?s=function(e,t,n){var r=0,i=0;return r="number"==typeof t?t:parseInt(t)/100*e,i="number"==typeof n?n:parseInt(n)/100*r,[r,i]}(n,i,o):"auto"===i&&(s=function(e,t,n,r){var i=0,o=0,a=e/r;if("number"==typeof n)o=n,i=a-o;else{var s=10+parseInt(n)/10;0===s?o=-(i=2*a):o=a-(i=a/s*10)}return[i,o]}(n,0,o,a));var l=s,c=(0,r.default)(l,2),u=c[0],h=c[1];e.forEach((function(e){e.barWidth=u,e.barGap=h}))}(e),function(e){var t=e.slice(-1)[0],n=t.barGap,r=t.barWidth,i=t.barNum,o=(n+r)*i-n;e.forEach((function(e){return e.barAllWidthAndGap=o}))}(e)})),e}function f(e,t){return e=function(e){return e.map((function(t){var n=(0,l.mergeSameStackData)(t,e);n=function(e,t){var n=e.data;return t.map((function(e,t){return"number"==typeof n[t]?e:null})).filter((function(e){return null!==e}))}(t,n);var r=t.valueAxis,i=r.axis,o=r.minValue,a=r.maxValue,s=r.linePosition,c=p(o,a,o<0?0:o,s,i),h=n.map((function(e){return p(o,a,e,s,i)})).map((function(e){return[c,e]}));return u(u({},t),{},{barValueAxisPos:h})}))}(e),e=function(e){return e.map((function(e){var t=e.labelAxis,n=e.barAllWidthAndGap,r=e.barGap,i=e.barWidth,o=e.barIndex,a=t.tickGap,s=t.tickPosition,l="x"===t.axis?0:1,c=s.map((function(e,t){return s[t][l]-a/2+(a-n)/2+(o+.5)*i+o*r}));return u(u({},e),{},{barLabelAxisPos:c})}))}(e),e=function(e){return e.map((function(e){var t=e.barLabelAxisPos;return e.data.forEach((function(e,n){"number"!=typeof e&&(t[n]=null)})),u(u({},e),{},{barLabelAxisPos:t.filter((function(e){return null!==e}))})}))}(e),e=function(e){return e.forEach((function(e){var t=e.data,n=e.barLabelAxisPos,r=e.barValueAxisPos,i=t.filter((function(e){return"number"==typeof e})).length;n.length>i&&(n.splice(i),r.splice(i))})),e}(e),e}function p(e,t,n,r,i){if("number"!=typeof n)return null;var o=t-e,a="x"===i?0:1,s=(n-e)/o;return 0===o&&(s=0),s*(r[1][a]-r[0][a])+r[0][a]}function g(e){var t=e.animationCurve,n=e.animationFrame,r=e.rLevel,i=function(e){var t=e.labelAxis,n=e.valueAxis,r=t.tickPosition,i=n.axis,o=n.linePosition,a=function(e){var t=e.barAllWidthAndGap,n=e.barCategoryWidth,r=e.backgroundBar,i=r.width;return"number"==typeof i?i:"auto"===i?t:parseInt(i)/100*n}(e),s=a/2,l="x"===i?0:1,c=r.map((function(e){return e[1-l]})),u=[o[0][l],o[1][l]],h=u[0],d=u[1];return c.map((function(e){return"x"===i?{x:h,y:e-s,w:d-h,h:a}:{x:e-s,y:d,w:a,h:h-d}}))}(e),o=function(e){return e.backgroundBar.style}(e);return i.map((function(i){return{name:"rect",index:r,visible:e.backgroundBar.show,animationCurve:t,animationFrame:n,shape:i,style:o}}))}function m(e){var t=e.barLabelAxisPos,n=e.animationCurve,r=e.animationFrame,i=e.rLevel,o=v(e);return t.map((function(t,a){return{name:o,index:i,animationCurve:n,animationFrame:r,shape:y(e,a),style:b(e,a)}}))}function v(e){var t=e.shapeType;return"leftEchelon"===t||"rightEchelon"===t?"polyline":"rect"}function y(e,t){var n=e.shapeType;return"leftEchelon"===n?function(e,t){var n=e.barValueAxisPos,i=e.barLabelAxisPos,o=e.barWidth,a=e.echelonOffset,s=(0,r.default)(n[t],2),l=s[0],c=s[1],u=i[t],h=o/2,d=e.valueAxis.axis,f=[];return"x"===d?(f[0]=[c,u-h],f[1]=[c,u+h],f[2]=[l,u+h],f[3]=[l+a,u-h],c-l<a&&f.splice(3,1)):(f[0]=[u-h,c],f[1]=[u+h,c],f[2]=[u+h,l],f[3]=[u-h,l-a],l-c<a&&f.splice(3,1)),{points:f,close:!0}}(e,t):"rightEchelon"===n?function(e,t){var n=e.barValueAxisPos,i=e.barLabelAxisPos,o=e.barWidth,a=e.echelonOffset,s=(0,r.default)(n[t],2),l=s[0],c=s[1],u=i[t],h=o/2,d=e.valueAxis.axis,f=[];return"x"===d?(f[0]=[c,u+h],f[1]=[c,u-h],f[2]=[l,u-h],f[3]=[l+a,u+h],c-l<a&&f.splice(2,1)):(f[0]=[u+h,c],f[1]=[u-h,c],f[2]=[u-h,l],f[3]=[u+h,l-a],l-c<a&&f.splice(2,1)),{points:f,close:!0}}(e,t):function(e,t){var n=e.barValueAxisPos,i=e.barLabelAxisPos,o=e.barWidth,a=(0,r.default)(n[t],2),s=a[0],l=a[1],c=i[t],u=e.valueAxis.axis,h={};return"x"===u?(h.x=s,h.y=c-o/2,h.w=l-s,h.h=o):(h.x=c-o/2,h.y=l,h.w=o,h.h=s-l),h}(e,t)}function b(e,t){var n=e.barStyle,i=e.gradient,o=e.color,a=e.independentColor,s=e.independentColors,c=[n.fill||o],u=(0,l.deepMerge)(c,i.color);if(a){var h=s[t%s.length];u=h instanceof Array?h:[h]}1===u.length&&u.push(u[0]);var d=function(e,t){var n=e.barValueAxisPos,i=e.barLabelAxisPos,o=e.data,a=e.valueAxis,s=a.linePosition,l=a.axis,c=(0,r.default)(n[t],2),u=c[0],h=c[1],d=i[t],f=o[t],p=(0,r.default)(s,2),g=p[0],m=p[1],v="x"===l?0:1,y=h;return e.gradient.local||(y=f<0?g[v]:m[v]),"y"===l?[d,y,d,u]:[y,d,u,d]}(e,t);return(0,l.deepMerge)({gradientColor:u,gradientParams:d,gradientType:"linear",gradientWith:"fill"},n)}function x(e){var t=m(e),n=e.shapeType;return t.forEach((function(t){var r=t.shape;r="leftEchelon"===n?function(e,t){var n=t.valueAxis.axis;e=(0,s.deepClone)(e);var r=e,i=r.points,o="x"===n?0:1,a=i[2][o];return i.forEach((function(e){return e[o]=a})),e}(r,e):"rightEchelon"===n?function(e,t){var n=t.valueAxis.axis;e=(0,s.deepClone)(e);var r=e,i=r.points,o="x"===n?0:1,a=i[2][o];return i.forEach((function(e){return e[o]=a})),e}(r,e):function(e,t){var n=t.valueAxis.axis,r=e.x,i=e.y,o=e.w,a=e.h;return"x"===n?o=0:(i+=a,a=0),{x:r,y:i,w:o,h:a}}(r,e),t.shape=r})),t}function w(e,t,n,r){var i=r.chart.render,o=v(t);e[n]&&e[n][0].name!==o&&(e[n].forEach((function(e){return i.delGraph(e)})),e[n]=null)}function _(e){var n=e.animationCurve,i=e.animationFrame,o=e.rLevel,a=function(e){var n=function(e){var n=e.data,r=e.label,i=r.formatter;if(n=n.filter((function(e){return"number"==typeof e})).map((function(e){return e.toString()})),!i)return n;var o=(0,t.default)(i);return"string"===o?n.map((function(e){return i.replace("{value}",e)})):"function"===o?n.map((function(e,t){return i({value:e,index:t})})):n}(e),i=function(e){var t=e.label,n=e.barValueAxisPos,i=e.barLabelAxisPos,o=t.position,a=t.offset,s=e.valueAxis.axis;return n.map((function(e,t){var n=(0,r.default)(e,2),l=n[0],c=n[1],u=i[t],h=[c,u];return"bottom"===o&&(h=[l,u]),"center"===o&&(h=[(l+c)/2,u]),"y"===s&&h.reverse(),function(e,t){var n=(0,r.default)(e,2),i=n[0],o=n[1],a=(0,r.default)(t,2),s=a[0],l=a[1];return[i+s,o+l]}(h,a)}))}(e);return i.map((function(e,t){return{position:e,content:n[t]}}))}(e),s=function(e){var t=e.color,n=e.label.style,r=e.gradient.color;return r.length&&(t=r[0]),n=(0,l.deepMerge)({fill:t},n),n}(e);return a.map((function(t){return{name:"text",index:o,visible:e.label.show,animationCurve:n,animationFrame:i,shape:t,style:s}}))}return Ft}var Bt={},Fa;function Gs(){if(Fa)return Bt;Fa=1;var e=Pe.exports;Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.pie=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.series;n||(n=[]);var r=(0,l.initNeedSeries)(n,a.pieConfig,"pie");r=b(r=y(r=v(r=m(r=p(r=f(r=h(r=u(r,e),e))))))),(0,o.doUpdate)({chart:e,series:r,key:"pie",getGraphConfig:$,getStartGraphConfig:S,beforeChange:E}),(0,o.doUpdate)({chart:e,series:r,key:"pieInsideLabel",getGraphConfig:k}),(0,o.doUpdate)({chart:e,series:r,key:"pieOutsideLabelLine",getGraphConfig:O,getStartGraphConfig:N}),(0,o.doUpdate)({chart:e,series:r,key:"pieOutsideLabel",getGraphConfig:L,getStartGraphConfig:R})};var t=e(Ue()),n=e(ze()),r=e(Ne()),i=e(Me()),o=Xe(),a=fi(),s=Fe(),l=qe();function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t){var n=t.render.area;return e.forEach((function(e){var t=e.center;t=t.map((function(e,t){return"number"==typeof e?e:parseInt(e)/100*n[t]})),e.center=t})),e}function h(e,t){var n=Math.min.apply(Math,(0,i.default)(t.render.area))/2;return e.forEach((function(e){var t=e.radius,r=e.data;t=d(t,n),r.forEach((function(e){var r=e.radius;r||(r=t),r=d(r,n),e.radius=r})),e.radius=t})),e}function d(e,t){return e instanceof Array||(e=[0,e]),e=e.map((function(e){return"number"==typeof e?e:parseInt(e)/100*t}))}function f(e,t){return e.filter((function(e){return e.roseType})).forEach((function(e){var t=e.radius,n=e.data,r=e.roseSort,o=function(e){var t=e.radius,n=e.roseIncrement;if("number"==typeof n)return n;if("auto"===n){var r=e.data,o=r.reduce((function(e,t){var n=t.radius;return[].concat((0,i.default)(e),(0,i.default)(n))}),[]),a=Math.min.apply(Math,(0,i.default)(o));return.6*(Math.max.apply(Math,(0,i.default)(o))-a)/(r.length-1||1)}return parseInt(n)/100*t[1]}(e),a=(0,i.default)(n);n=function(e){return e.sort((function(e,t){var n=e.value,r=t.value;return n===r?0:n>r?-1:n<r?1:void 0}))}(n),n.forEach((function(e,n){e.radius[1]=t[1]-o*n})),r?n.reverse():e.data=a,e.roseIncrement=o})),e}function p(e){return e.forEach((function(e){var t=e.data,n=e.percentToFixed,r=function(e){return(0,l.mulAdd)(e.map((function(e){return e.value})))}(t);t.forEach((function(e){var t=e.value;e.percent=t/r*100,e.percentForLabel=g(t/r*100,n)}));var i=(0,l.mulAdd)(t.slice(0,-1).map((function(e){return e.percent})));t.slice(-1)[0].percent=100-i,t.slice(-1)[0].percentForLabel=g(100-i,n)})),e}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.toString(),r=n.split("."),i=r[1]||"0",o=i.slice(0,t);return r[1]=o,parseFloat(r.join("."))}function m(e){return e.forEach((function(e){var t=e.startAngle,n=e.data;n.forEach((function(e,i){var o=function(e,t){var n=2*Math.PI,r=e.slice(0,t+1),i=(0,l.mulAdd)(r.map((function(e){return e.percent}))),o=e[t].percent,a=i-o;return[n*a/100,n*i/100]}(n,i),a=(0,r.default)(o,2),s=a[0],c=a[1];e.startAngle=t+s,e.endAngle=t+c}))})),e}function v(e){return e.forEach((function(e){e.data.forEach((function(t){t.insideLabelPos=function(e,t){var n=e.center,o=t.startAngle,a=t.endAngle,l=(0,r.default)(t.radius,2),c=l[0],u=l[1],h=(c+u)/2,d=(o+a)/2;return s.getCircleRadianPoint.apply(void 0,(0,i.default)(n).concat([h,d]))}(e,t)}))})),e}function y(e){return e.forEach((function(e){var t=e.data,n=e.center;t.forEach((function(e){var t=e.startAngle,r=e.endAngle,o=e.radius,a=(t+r)/2,l=s.getCircleRadianPoint.apply(void 0,(0,i.default)(n).concat([o[1],a]));e.edgeCenterPos=l}))})),e}function b(e){return e.forEach((function(e){var t=w(e),n=w(e,!1);t=_(t),n=_(n),C(t,e),C(n,e,!1)})),e}function x(e){var t=e.outsideLabel.labelLineBendGap,n=function(e){var t=e.data,n=t.map((function(e){var t=(0,r.default)(e.radius,2);return t[0],t[1]}));return Math.max.apply(Math,(0,i.default)(n))}(e);return"number"!=typeof t&&(t=parseInt(t)/100*n),t+n}function w(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.data,r=e.center,i=r[0];return n.filter((function(e){var n=e.edgeCenterPos[0];return t?n<=i:n>i}))}function _(e){return e.sort((function(e,t){var n=(0,r.default)(e.edgeCenterPos,2);n[0];var i=n[1],o=(0,r.default)(t.edgeCenterPos,2);o[0];var a=o[1];return i>a?1:i<a?-1:i===a?0:void 0})),e}function C(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.center,o=t.outsideLabel,a=x(t);e.forEach((function(e){var t=e.edgeCenterPos,c=e.startAngle,u=e.endAngle,h=o.labelLineEndLength,d=(c+u)/2,f=s.getCircleRadianPoint.apply(void 0,(0,i.default)(r).concat([a,d])),p=(0,i.default)(f);p[0]+=h*(n?-1:1),e.labelLine=[t,f,p],e.labelLineLength=(0,l.getPolylineLength)(e.labelLine),e.align={textAlign:"left",textBaseline:"middle"},n&&(e.align.textAlign="right")}))}function $(e){var t=e.data,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"pie",index:i,animationCurve:n,animationFrame:r,shape:A(e,o),style:M(e,o)}}))}function S(e){var t=e.animationDelayGap,n=e.startAnimationCurve,r=$(e);return r.forEach((function(e,r){e.animationCurve=n,e.animationDelay=r*t,e.shape.or=e.shape.ir})),r}function E(e){e.animationDelay=0}function A(e,t){var n=e.center,r=e.data[t],i=r.radius;return{startAngle:r.startAngle,endAngle:r.endAngle,ir:i[0],or:i[1],rx:n[0],ry:n[1]}}function M(e,t){var n=e.pieStyle,r=e.data[t].color;return(0,l.deepMerge)({fill:r},n)}function k(e){var t=e.animationCurve,n=e.animationFrame,r=e.data,i=e.rLevel;return r.map((function(r,o){return{name:"text",index:i,visible:e.insideLabel.show,animationCurve:t,animationFrame:n,shape:T(e,o),style:P(e)}}))}function T(e,t){var r=e.insideLabel,i=e.data,o=r.formatter,a=i[t],s=(0,n.default)(o),l="";return"string"===s&&(l=(l=(l=o.replace("{name}",a.name)).replace("{percent}",a.percentForLabel)).replace("{value}",a.value)),"function"===s&&(l=o(a)),{content:l,position:a.insideLabelPos}}function P(e,t){return e.insideLabel.style}function O(e){var t=e.animationCurve,n=e.animationFrame,r=e.data,i=e.rLevel;return r.map((function(r,o){return{name:"polyline",index:i,visible:e.outsideLabel.show,animationCurve:t,animationFrame:n,shape:I(e,o),style:D(e,o)}}))}function N(e){var t=e.data,n=O(e);return n.forEach((function(e,n){e.style.lineDash=[0,t[n].labelLineLength]})),n}function I(e,t){return{points:e.data[t].labelLine}}function D(e,t){var n=e.outsideLabel,r=e.data,i=n.labelLineStyle,o=r[t].color;return(0,l.deepMerge)({stroke:o,lineDash:[r[t].labelLineLength,0]},i)}function L(e){var t=e.animationCurve,n=e.animationFrame,r=e.data,i=e.rLevel;return r.map((function(r,o){return{name:"text",index:i,visible:e.outsideLabel.show,animationCurve:t,animationFrame:n,shape:B(e,o),style:j(e,o)}}))}function R(e){var t=e.data,n=L(e);return n.forEach((function(e,n){e.shape.position=t[n].labelLine[1]})),n}function B(e,t){var r=e.outsideLabel,i=e.data,o=r.formatter,a=i[t],s=a.labelLine,l=a.name,c=a.percentForLabel,u=a.value,h=(0,n.default)(o),d="";return"string"===h&&(d=(d=(d=o.replace("{name}",l)).replace("{percent}",c)).replace("{value}",u)),"function"===h&&(d=o(i[t])),{content:d,position:s[2]}}function j(e,n){var r=e.outsideLabel,i=e.data[n],o=i.color,a=i.align,s=r.style;return(0,l.deepMerge)(function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,t.default)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({fill:o},a),s)}return Bt}var Nt={},Ba;function Rs(){if(Ba)return Nt;Ba=1;var e=Pe.exports;Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.radarAxis=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.radar,r=[];n&&(r=[r=g(r=p(r=f(r=d(r=h(r=u(n),e),e))))]);var o=r;r.length&&!r[0].show&&(o=[]),(0,i.doUpdate)({chart:e,series:o,key:"radarAxisSplitArea",getGraphConfig:m,beforeUpdate:b,beforeChange:x}),(0,i.doUpdate)({chart:e,series:o,key:"radarAxisSplitLine",getGraphConfig:w,beforeUpdate:$,beforeChange:S}),(0,i.doUpdate)({chart:e,series:o,key:"radarAxisLine",getGraphConfig:E}),(0,i.doUpdate)({chart:e,series:o,key:"radarAxisLable",getGraphConfig:k}),e.radarAxis=r[0]};var t=e(Ne()),n=e(Ue()),r=e(Me()),i=Xe(),o=Qe(),a=Fe(),s=qe();function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){return(0,s.deepMerge)((0,a.deepClone)(o.radarAxisConfig),e)}function h(e,t){var n=t.render.area,r=e.center;return e.centerPos=r.map((function(e,t){return"number"==typeof e?e:parseInt(e)/100*n[t]})),e}function d(e,t){var n=t.render.area,i=e.splitNum,o=e.radius,a=Math.min.apply(Math,(0,r.default)(n))/2;"number"!=typeof o&&(o=parseInt(o)/100*a);var s=o/i;return e.ringRadius=new Array(i).fill(0).map((function(e,t){return s*(t+1)})),e.radius=o,e}function f(e){var t=e.indicator,n=e.centerPos,i=e.radius,o=e.startAngle,s=2*Math.PI,l=t.length,c=s/l,u=new Array(l).fill(0).map((function(e,t){return c*t+o}));return e.axisLineAngles=u,e.axisLinePosition=u.map((function(e){return a.getCircleRadianPoint.apply(void 0,(0,r.default)(n).concat([i,e]))})),e}function p(e){var t=e.ringRadius,n=t[0]/2;return e.areaRadius=t.map((function(e){return e-n})),e}function g(e){var t=e.axisLineAngles,n=e.centerPos,i=e.radius,o=e.axisLabel;return i+=o.labelGap,e.axisLabelPosition=t.map((function(e){return a.getCircleRadianPoint.apply(void 0,(0,r.default)(n).concat([i,e]))})),e}function m(e){var t=e.areaRadius,n=e.polygon,r=e.animationCurve,i=e.animationFrame,o=e.rLevel,a=n?"regPolygon":"ring";return t.map((function(t,n){return{name:a,index:o,visible:e.splitArea.show,animationCurve:r,animationFrame:i,shape:v(e,n),style:y(e,n)}}))}function v(e,t){var n=e.polygon,r=e.areaRadius,i=e.indicator,o=e.centerPos,a=i.length,s={rx:o[0],ry:o[1],r:r[t]};return n&&(s.side=a),s}function y(e,t){var n=e.splitArea,i=e.ringRadius,o=e.axisLineAngles,l=e.polygon,u=e.centerPos,h=n.color,d=n.style;d=c({fill:"rgba(0, 0, 0, 0)"},d);var f=i[0]-0;if(l){var p=a.getCircleRadianPoint.apply(void 0,(0,r.default)(u).concat([i[0],o[0]])),g=a.getCircleRadianPoint.apply(void 0,(0,r.default)(u).concat([i[0],o[1]]));f=(0,s.getPointToLineDistance)(u,p,g)}if(d=(0,s.deepMerge)((0,a.deepClone)(d,!0),{lineWidth:f}),!h.length)return d;var m=h.length;return(0,s.deepMerge)(d,{stroke:h[t%m]})}function b(e,t,n,r){var i=e[n];if(i){var o=r.chart.render;!((t.polygon?"regPolygon":"ring")!==i[0].name)||(i.forEach((function(e){return o.delGraph(e)})),e[n]=null)}}function x(e,t){var n=t.shape.side;"number"==typeof n&&(e.shape.side=n)}function w(e){var t=e.ringRadius,n=e.polygon,r=e.animationCurve,i=e.animationFrame,o=e.rLevel,a=n?"regPolygon":"ring";return t.map((function(t,n){return{name:a,index:o,animationCurve:r,animationFrame:i,visible:e.splitLine.show,shape:_(e,n),style:C(e,n)}}))}function _(e,t){var n=e.ringRadius,r=e.centerPos,i=e.indicator,o=e.polygon,a={rx:r[0],ry:r[1],r:n[t]},s=i.length;return o&&(a.side=s),a}function C(e,t){var n=e.splitLine,r=n.color,i=n.style;if(i=c({fill:"rgba(0, 0, 0, 0)"},i),!r.length)return i;var o=r.length;return(0,s.deepMerge)(i,{stroke:r[t%o]})}function $(e,t,n,r){var i=e[n];if(i){var o=r.chart.render;!((t.polygon?"regPolygon":"ring")!==i[0].name)||(i.forEach((function(e){return o.delGraph(e)})),e[n]=null)}}function S(e,t){var n=t.shape.side;"number"==typeof n&&(e.shape.side=n)}function E(e){var t=e.axisLinePosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"polyline",index:i,visible:e.axisLine.show,animationCurve:n,animationFrame:r,shape:A(e,o),style:M(e,o)}}))}function A(e,t){return{points:[e.centerPos,e.axisLinePosition[t]]}}function M(e,t){var n=e.axisLine,r=n.color,i=n.style;if(!r.length)return i;var o=r.length;return(0,s.deepMerge)(i,{stroke:r[t%o]})}function k(e){var t=e.axisLabelPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"text",index:i,visible:e.axisLabel.show,animationCurve:n,animationFrame:r,shape:T(e,o),style:P(e,o)}}))}function T(e,t){var n=e.axisLabelPosition;return{content:e.indicator[t].name,position:n[t]}}function P(e,n){var r=e.axisLabel,i=(0,t.default)(e.centerPos,2),o=i[0],a=i[1],l=e.axisLabelPosition,c=r.color,u=r.style,h=(0,t.default)(l[n],2),d=h[0]>o?"left":"right",f=h[1]>a?"top":"bottom";if(u=(0,s.deepMerge)({textAlign:d,textBaseline:f},u),!c.length)return u;var p=c.length;return(0,s.deepMerge)(u,{fill:c[n%p]})}return Nt}var jt={},Na;function Ts(){if(Na)return jt;Na=1;var e=Pe.exports;Object.defineProperty(jt,"__esModule",{value:!0}),jt.radar=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.series;n||(n=[]);var r=(0,c.initNeedSeries)(n,a.radarConfig,"radar");r=f(r=d(r=h(r,e),e),e),(0,o.doUpdate)({chart:e,series:r,key:"radar",getGraphConfig:p,getStartGraphConfig:g,beforeChange:y}),(0,o.doUpdate)({chart:e,series:r,key:"radarPoint",getGraphConfig:b,getStartGraphConfig:x}),(0,o.doUpdate)({chart:e,series:r,key:"radarLabel",getGraphConfig:C})};var t=e(Ue()),n=e(ze()),r=e(Ne()),i=e(Me()),o=Xe(),a=Qe(),s=Fe(),l=it(),c=qe();function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t){var n=t.radarAxis;if(!n)return[];var r=n.indicator,o=n.axisLineAngles,a=n.radius,l=n.centerPos;return e.forEach((function(e){var t=e.data;e.dataRadius=[],e.radarPosition=r.map((function(n,r){var c=n.max,u=n.min,h=t[r];"number"!=typeof c&&(c=h),"number"!=typeof u&&(u=0),"number"!=typeof h&&(h=u);var d=(h-u)/(c-u)*a;return e.dataRadius[r]=d,s.getCircleRadianPoint.apply(void 0,(0,i.default)(l).concat([d,o[r]]))}))})),e}function d(e,t){var n=t.radarAxis;if(!n)return[];var r=n.centerPos,o=n.axisLineAngles;return e.forEach((function(e){var t=e.dataRadius,n=e.label.labelGap;e.labelPosition=t.map((function(e,t){return s.getCircleRadianPoint.apply(void 0,(0,i.default)(r).concat([e+n,o[t]]))}))})),e}function f(e,t){var n=t.radarAxis;if(!n)return[];var i=(0,r.default)(n.centerPos,2),o=i[0],a=i[1];return e.forEach((function(e){var t=e.labelPosition.map((function(e){var t=(0,r.default)(e,2),n=t[0],i=t[1];return{textAlign:n>o?"left":"right",textBaseline:i>a?"top":"bottom"}}));e.labelAlign=t})),e}function p(e){var t=e.animationCurve,n=e.animationFrame;return[{name:"polyline",index:e.rLevel,animationCurve:t,animationFrame:n,shape:m(e),style:v(e)}]}function g(e,t){var n=t.chart.radarAxis.centerPos,r=p(e)[0],o=r.shape.points.length,a=new Array(o).fill(0).map((function(e){return(0,i.default)(n)}));return r.shape.points=a,[r]}function m(e){return{points:e.radarPosition,close:!0}}function v(e){var t=e.radarStyle,n=e.color,r=(0,l.getRgbaValue)(n);r[3]=.5;var i={stroke:n,fill:(0,l.getColorFromRgbValue)(r)};return(0,c.deepMerge)(i,t)}function y(e,t){var n=t.shape,r=e.shape.points,o=r.length,a=n.points.length;if(a>o){var s=r.slice(-1)[0],l=new Array(a-o).fill(0).map((function(e){return(0,i.default)(s)}));r.push.apply(r,(0,i.default)(l))}else a<o&&r.splice(a)}function b(e){var t=e.radarPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"circle",index:i,animationCurve:n,animationFrame:r,visible:e.point.show,shape:w(e,o),style:_(e)}}))}function x(e){var t=b(e);return t.forEach((function(e){return e.shape.r=.01})),t}function w(e,t){var n=e.radarPosition,r=e.point.radius,i=n[t];return{rx:i[0],ry:i[1],r:r}}function _(e,t){var n=e.point,r=e.color,i=n.style;return(0,c.deepMerge)({stroke:r},i)}function C(e){var t=e.labelPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"text",index:i,visible:e.label.show,animationCurve:n,animationFrame:r,shape:$(e,o),style:S(e,o)}}))}function $(e,t){var i=e.labelPosition,o=e.label,a=e.data,s=o.offset,l=o.formatter,c=function(e,t){var n=(0,r.default)(e,2),i=n[0],o=n[1],a=(0,r.default)(t,2),s=a[0],l=a[1];return[i+s,o+l]}(i[t],s),u=a[t]?a[t].toString():"0",h=(0,n.default)(l);return"string"===h&&(u=l.replace("{value}",u)),"function"===h&&(u=l(u)),{content:u,position:c}}function S(e,n){var r=e.label,i=e.color,o=e.labelAlign,a=r.style,s=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){(0,t.default)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({fill:i},o[n]);return(0,c.deepMerge)(s,a)}return jt}var Et={},ja;function Ms(){if(ja)return Et;ja=1;var e=Pe.exports;Object.defineProperty(Et,"__esModule",{value:!0}),Et.gauge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.series;n||(n=[]);var r=(0,l.initNeedSeries)(n,a.gaugeConfig,"gauge");r=w(r=x(r=b(r=y(r=v(r=m(r=g(r=p(r=f(r=d(r,e),e),e)))))))),(0,o.doUpdate)({chart:e,series:r,key:"gaugeAxisTick",getGraphConfig:_}),(0,o.doUpdate)({chart:e,series:r,key:"gaugeAxisLabel",getGraphConfig:S}),(0,o.doUpdate)({chart:e,series:r,key:"gaugeBackgroundArc",getGraphConfig:M,getStartGraphConfig:P}),(0,o.doUpdate)({chart:e,series:r,key:"gaugeArc",getGraphConfig:O,getStartGraphConfig:D,beforeChange:L}),(0,o.doUpdate)({chart:e,series:r,key:"gaugePointer",getGraphConfig:R,getStartGraphConfig:G}),(0,o.doUpdate)({chart:e,series:r,key:"gaugeDetails",getGraphConfig:V})};var t=e(Ue()),n=e(ze()),r=e(Ne()),i=e(Me()),o=Xe(),a=di(),s=Fe(),l=qe(),c=it();function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?u(Object(r),!0).forEach((function(n){(0,t.default)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t){var n=t.render.area;return e.forEach((function(e){var t=e.center;t=t.map((function(e,t){return"number"==typeof e?e:parseInt(e)/100*n[t]})),e.center=t})),e}function f(e,t){var n=t.render.area,r=Math.min.apply(Math,(0,i.default)(n))/2;return e.forEach((function(e){var t=e.radius;"number"!=typeof t&&(t=parseInt(t)/100*r),e.radius=t})),e}function p(e,t){var n=t.render.area,r=Math.min.apply(Math,(0,i.default)(n))/2;return e.forEach((function(e){var t=e.radius,n=e.data,i=e.arcLineWidth;n.forEach((function(e){var n=e.radius,o=e.lineWidth;n||(n=t),"number"!=typeof n&&(n=parseInt(n)/100*r),e.radius=n,o||(o=i),e.lineWidth=o}))})),e}function g(e,t){return e.forEach((function(e){var t=e.startAngle,n=e.endAngle,r=e.data,i=e.min,o=e.max,a=n-t,s=o-i;r.forEach((function(e){var n=e.value,r=Math.abs((n-i)/s*a);e.startAngle=t,e.endAngle=t+r}))})),e}function m(e,t){return e.forEach((function(e){e.data.forEach((function(e){var t=e.color,n=e.gradient;(!n||!n.length)&&(n=t),n instanceof Array||(n=[n]),e.gradient=n}))})),e}function v(e,t){return e.forEach((function(e){var t=e.startAngle,n=e.endAngle,r=e.splitNum,o=e.center,a=e.radius,l=e.arcLineWidth,c=e.axisTick,u=c.tickLength,h=c.style.lineWidth,d=n-t,f=a-l/2,p=f-u,g=d/(r-1),m=2*Math.PI*a*d/(2*Math.PI),v=Math.ceil(h/2)/m*d;e.tickAngles=[],e.tickInnerRadius=[],e.tickPosition=new Array(r).fill(0).map((function(n,a){var l=t+g*a;return 0===a&&(l+=v),a===r-1&&(l-=v),e.tickAngles[a]=l,e.tickInnerRadius[a]=p,[s.getCircleRadianPoint.apply(void 0,(0,i.default)(o).concat([f,l])),s.getCircleRadianPoint.apply(void 0,(0,i.default)(o).concat([p,l]))]}))})),e}function y(e,t){return e.forEach((function(e){var t=e.center,n=e.tickInnerRadius,o=e.tickAngles,a=e.axisLabel.labelGap,l=o.map((function(e,r){return s.getCircleRadianPoint.apply(void 0,(0,i.default)(t).concat([n[r]-a,o[r]]))})),c=l.map((function(e){var n=(0,r.default)(e,2),i=n[0],o=n[1];return{textAlign:i>t[0]?"right":"left",textBaseline:o>t[1]?"bottom":"top"}}));e.labelPosition=l,e.labelAlign=c})),e}function b(e,t){return e.forEach((function(e){var t=e.axisLabel,r=e.min,i=e.max,o=e.splitNum,a=t.data,s=t.formatter,c=(i-r)/(o-1),u=new Array(o).fill(0).map((function(e,t){return parseInt(r+c*t)})),h=(0,n.default)(s);a=(0,l.deepMerge)(u,a).map((function(e,t){var n=e;return"string"===h&&(n=s.replace("{value}",e)),"function"===h&&(n=s({value:e,index:t})),n})),t.data=a})),e}function x(e,t){return e.forEach((function(e){var t=e.data,n=e.details,o=e.center,a=n.position,l=n.offset,c=t.map((function(e){var t=e.startAngle,n=e.endAngle,c=e.radius,u=null;return"center"===a?u=o:"start"===a?u=s.getCircleRadianPoint.apply(void 0,(0,i.default)(o).concat([c,t])):"end"===a&&(u=s.getCircleRadianPoint.apply(void 0,(0,i.default)(o).concat([c,n]))),function(e,t){var n=(0,r.default)(e,2),i=n[0],o=n[1],a=(0,r.default)(t,2),s=a[0],l=a[1];return[i+s,o+l]}(u,l)}));e.detailsPosition=c})),e}function w(e,t){return e.forEach((function(e){var t=e.data,r=e.details.formatter,i=(0,n.default)(r),o=t.map((function(e){var t=e.value;return"string"===i&&(t=(t=r.replace("{value}","{nt}")).replace("{name}",e.name)),"function"===i&&(t=r(e)),t.toString()}));e.detailsContent=o})),e}function _(e){var t=e.tickPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"polyline",index:i,visible:e.axisTick.show,animationCurve:n,animationFrame:r,shape:C(e,o),style:$(e)}}))}function C(e,t){return{points:e.tickPosition[t]}}function $(e,t){return e.axisTick.style}function S(e){var t=e.labelPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"text",index:i,visible:e.axisLabel.show,animationCurve:n,animationFrame:r,shape:E(e,o),style:A(e,o)}}))}function E(e,t){var n=e.labelPosition;return{content:e.axisLabel.data[t].toString(),position:n[t]}}function A(e,t){var n=e.labelAlign,r=e.axisLabel.style;return(0,l.deepMerge)(h({},n[t]),r)}function M(e){var t=e.animationCurve,n=e.animationFrame;return[{name:"arc",index:e.rLevel,visible:e.backgroundArc.show,animationCurve:t,animationFrame:n,shape:k(e),style:T(e)}]}function k(e){var t=e.startAngle,n=e.endAngle,r=e.center,i=e.radius;return{rx:r[0],ry:r[1],r:i,startAngle:t,endAngle:n}}function T(e){var t=e.backgroundArc,n=e.arcLineWidth,r=t.style;return(0,l.deepMerge)({lineWidth:n},r)}function P(e){var t=M(e)[0],n=h({},t.shape);return n.endAngle=t.shape.startAngle,t.shape=n,[t]}function O(e){var t=e.data,n=e.animationCurve,r=e.animationFrame,i=e.rLevel;return t.map((function(t,o){return{name:"agArc",index:i,animationCurve:n,animationFrame:r,shape:N(e,o),style:I(e,o)}}))}function N(e,t){var n=e.data,r=e.center,i=e.endAngle,o=n[t],a=o.radius,s=o.startAngle,l=o.endAngle;return o.localGradient&&(i=l),{rx:r[0],ry:r[1],r:a,startAngle:s,endAngle:l,gradientEndAngle:i}}function I(e,t){var n=e.data,r=e.dataItemStyle,i=n[t],o=i.lineWidth,a=i.gradient;return a=a.map((function(e){return(0,c.getRgbaValue)(e)})),(0,l.deepMerge)({lineWidth:o,gradient:a},r)}function D(e){var t=O(e);return t.map((function(e){var t=h({},e.shape);t.endAngle=e.shape.startAngle,e.shape=t})),t}function L(e,t){var n=e.style.gradient,r=n.length,o=t.style.gradient.length;if(r>o)n.splice(o);else{var a=n.slice(-1)[0];n.push.apply(n,(0,i.default)(new Array(o-r).fill(0).map((function(e){return(0,i.default)(a)}))))}}function R(e){var t=e.animationCurve,n=e.animationFrame,r=e.center;return[{name:"polyline",index:e.rLevel,visible:e.pointer.show,animationCurve:t,animationFrame:n,shape:B(e),style:j(e),setGraphCenter:function(e,t){t.style.graphCenter=r}}]}function B(e){return{points:F(e.center),close:!0}}function j(e){var t=e.startAngle,n=e.endAngle,r=e.min,i=e.max,o=e.data,a=e.pointer,s=e.center,c=a.valueIndex,u=a.style,h=((o[c]?o[c].value:0)-r)/(i-r)*(n-t)+t+Math.PI/2;return(0,l.deepMerge)({rotate:(0,l.radianToAngle)(h),scale:[1,1],graphCenter:s},u)}function F(e){var t=(0,r.default)(e,2),n=t[0],i=t[1];return[[n,i-40],[n+5,i],[n,i+10],[n-5,i]]}function G(e){var t=e.startAngle,n=R(e)[0];return n.style.rotate=(0,l.radianToAngle)(t+Math.PI/2),[n]}function V(e){var t=e.detailsPosition,n=e.animationCurve,r=e.animationFrame,i=e.rLevel,o=e.details.show;return t.map((function(t,a){return{name:"numberText",index:i,visible:o,animationCurve:n,animationFrame:r,shape:z(e,a),style:H(e,a)}}))}function z(e,t){var n=e.detailsPosition,r=e.detailsContent,i=e.data,o=e.details,a=n[t],s=r[t];return{number:[i[t].value],content:s,position:a,toFixed:o.valueToFixed}}function H(e,t){var n=e.details,r=e.data,i=n.style,o=r[t].color;return(0,l.deepMerge)({fill:o},i)}return Et}var Wt={},Ea,Wa,za;function Ds(){if(Ea)return Wt;Ea=1;var e=Pe.exports;Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.legend=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.legend;n=n?[n=h(n=u(n=c(n=l(n=(0,s.deepMerge)((0,o.deepClone)(a.legendConfig,!0),n)),t,e),e),e)]:[],(0,i.doUpdate)({chart:e,series:n,key:"legendIcon",getGraphConfig:p}),(0,i.doUpdate)({chart:e,series:n,key:"legendText",getGraphConfig:v})};var t=e(Ue()),n=e(Ne()),r=e(ze()),i=Xe(),o=Fe(),a=Qe(),s=qe();function l(e){var t=e.data;return e.data=t.map((function(e){var t=(0,r.default)(e);return"string"===t?{name:e}:"object"===t?e:{name:""}})),e}function c(e,t,n){var r=t.series,i=n.legendStatus,o=e.data.filter((function(e){var t=e.name,n=r.find((function(e){var n=e.name;return t===n}));return!!n&&(e.color||(e.color=n.color),e.icon||(e.icon=n.type),e)}));return(!i||i.length!==e.data.length)&&(i=new Array(e.data.length).fill(!0)),o.forEach((function(e,t){return e.status=i[t]})),e.data=o,n.legendStatus=i,e}function u(e,t){var n=t.render.ctx,r=e.data,i=e.textStyle,o=e.textUnselectedStyle;return r.forEach((function(e){var t=e.status,r=e.name;e.textWidth=function(e,t,n){return e.font=function(e){var t=e.fontFamily,n=e.fontSize;return"".concat(n,"px ").concat(t)}(n),e.measureText(t).width}(n,r,t?i:o)})),e}function h(e,t){return"vertical"===e.orient?function(e,t){var r=function(e,t){var n=e.left,r=e.right,i=t.render.area[0],o=[n,r].findIndex((function(e){return"auto"!==e}));if(-1===o)return[!0,i-10];var a=[n,r][o];return"number"!=typeof a&&(a=parseInt(a)/100*i),[Boolean(o),a]}(e,t),i=(0,n.default)(r,2),o=i[0],a=i[1],s=function(e,t){var n=e.iconHeight,r=e.itemGap,i=e.data,o=e.top,a=e.bottom,s=t.render.area[1],l=i.length,c=l*n+(l-1)*r,u=[o,a].findIndex((function(e){return"auto"!==e}));if(-1===u)return(s-c)/2;var h=[o,a][u];return"number"!=typeof h&&(h=parseInt(h)/100*s),1===u&&(h=s-h-c),h}(e,t);!function(e,t){var n=e.data,r=e.iconWidth,i=e.iconHeight,o=e.itemGap,a=i/2;n.forEach((function(e,n){var s=e.textWidth,l=(i+o)*n+a,c=t?0-r:0,u=t?c-5-s:r+5;e.iconPosition=[c,l],e.textPosition=[u,l]}))}(e,o);var l={textAlign:"left",textBaseline:"middle"};e.data.forEach((function(e){var t=e.textPosition,n=e.iconPosition;e.textPosition=f(t,[a,s]),e.iconPosition=f(n,[a,s]),e.align=l}))}(e,t):function(e,t){var n=e.iconHeight,r=e.itemGap,i=function(e,t){var n=e.data,r=e.iconWidth,i=t.render.area[0],o=0,a=[[]];return n.forEach((function(t,n){var s=d(o,n,e);s+r+5+t.textWidth>=i&&(s=d(o=n,n,e),a.push([])),t.iconPosition=[s,0],t.textPosition=[s+r+5,0],a.slice(-1)[0].push(t)})),a}(e,t),o=i.map((function(n){return function(e,t,n){var r=t.left,i=t.right,o=t.iconWidth,a=t.itemGap,l=n.render.area[0],c=e.length,u=(0,s.mulAdd)(e.map((function(e){return e.textWidth})))+c*(5+o)+(c-1)*a,h=[r,i].findIndex((function(e){return"auto"!==e}));return-1===h?(l-u)/2:0===h?"number"==typeof r?r:parseInt(r)/100*l:("number"!=typeof i&&(i=parseInt(i)/100*l),l-(u+i))}(n,e,t)})),a=function(e,t){var n=e.top,r=e.bottom,i=e.iconHeight,o=t.render.area[1],a=[n,r].findIndex((function(e){return"auto"!==e})),s=i/2;if(-1===a){var l=t.gridArea;return l.y+l.h+45-s}return 0===a?"number"==typeof n?n-s:parseInt(n)/100*o-s:("number"!=typeof r&&(r=parseInt(r)/100*o),o-r-s)}(e,t),l={textAlign:"left",textBaseline:"middle"};i.forEach((function(e,t){return e.forEach((function(e){var i=e.iconPosition,s=e.textPosition,c=o[t],u=a+t*(r+n);e.iconPosition=f(i,[c,u]),e.textPosition=f(s,[c,u]),e.align=l}))}))}(e,t),e}function d(e,t,n){var r=n.data,i=n.iconWidth,o=n.itemGap,a=r.slice(e,t);return(0,s.mulAdd)(a.map((function(e){return e.textWidth})))+(t-e)*(o+5+i)}function f(e,t){var r=(0,n.default)(e,2),i=r[0],o=r[1],a=(0,n.default)(t,2);return[i+a[0],o+a[1]]}function p(e,n){var r=e.data,i=e.selectAble,o=e.animationCurve,a=e.animationFrame,s=e.rLevel;return r.map((function(r,l){return(0,t.default)({name:"line"===r.icon?"lineIcon":"rect",index:s,visible:e.show,hover:i,click:i,animationCurve:o,animationFrame:a,shape:g(e,l),style:m(e,l)},"click",w(e,l,n))}))}function g(e,t){var r=e.data,i=e.iconWidth,o=e.iconHeight,a=(0,n.default)(r[t].iconPosition,2);return{x:a[0],y:a[1]-o/2,w:i,h:o}}function m(e,t){var n=e.data,r=e.iconStyle,i=e.iconUnselectedStyle,o=n[t],a=o.status,l=o.color,c=a?r:i;return(0,s.deepMerge)({fill:l},c)}function v(e,t){var n=e.data,r=e.selectAble,i=e.animationCurve,o=e.animationFrame,a=e.rLevel;return n.map((function(n,s){return{name:"text",index:a,visible:e.show,hover:r,animationCurve:i,animationFrame:o,hoverRect:x(e,s),shape:y(e,s),style:b(e,s),click:w(e,s,t)}}))}function y(e,t){var n=e.data[t],r=n.textPosition;return{content:n.name,position:r}}function b(e,t){var n=e.textStyle,r=e.textUnselectedStyle,i=e.data[t],a=i.status,l=i.align,c=a?n:r;return(0,s.deepMerge)((0,o.deepClone)(c,!0),l)}function x(e,t){var r=e.textStyle,i=e.textUnselectedStyle,o=e.data[t],a=o.status,s=(0,n.default)(o.textPosition,2),l=s[0],c=s[1],u=o.textWidth,h=(a?r:i).fontSize;return[l,c-h/2,u,h]}function w(e,t,n){var r=e.data[t].name;return function(){var e=n.chart,i=e.legendStatus,o=e.option,a=!i[t];o.series.find((function(e){return e.name===r})).show=a,i[t]=a,n.chart.setOption(o)}}return Wt}function Fs(){return Wa||(Wa=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"mergeColor",{enumerable:!0,get:function(){return t.mergeColor}}),Object.defineProperty(e,"title",{enumerable:!0,get:function(){return n.title}}),Object.defineProperty(e,"grid",{enumerable:!0,get:function(){return r.grid}}),Object.defineProperty(e,"axis",{enumerable:!0,get:function(){return i.axis}}),Object.defineProperty(e,"line",{enumerable:!0,get:function(){return o.line}}),Object.defineProperty(e,"bar",{enumerable:!0,get:function(){return a.bar}}),Object.defineProperty(e,"pie",{enumerable:!0,get:function(){return s.pie}}),Object.defineProperty(e,"radarAxis",{enumerable:!0,get:function(){return l.radarAxis}}),Object.defineProperty(e,"radar",{enumerable:!0,get:function(){return c.radar}}),Object.defineProperty(e,"gauge",{enumerable:!0,get:function(){return u.gauge}}),Object.defineProperty(e,"legend",{enumerable:!0,get:function(){return h.legend}});var t=ws(),n=ks(),r=As(),i=Ss(),o=Ls(),a=Os(),s=Gs(),l=Rs(),c=Ts(),u=Ms(),h=Ds()}(Br)),Br}function Bs(){return za||(za=1,function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=t(ze()),r=t(At()),i=t(Vt),o=Fe(),a=Fs(),s=function e(t){if((0,r.default)(this,e),!t)return!1;var n=t.clientWidth,o=t.clientHeight,a=document.createElement("canvas");a.setAttribute("width",n),a.setAttribute("height",o),t.appendChild(a);var s={container:t,canvas:a,render:new i.default(a),option:null};Object.assign(this,s)};e.default=s,s.prototype.setOption=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"object"!==(0,n.default)(e))return!1;t&&this.render.graphs.forEach((function(e){return e.animationEnd()}));var r=(0,o.deepClone)(e,!0);(0,a.mergeColor)(this,r),(0,a.grid)(this,r),(0,a.axis)(this,r),(0,a.radarAxis)(this,r),(0,a.title)(this,r),(0,a.bar)(this,r),(0,a.line)(this,r),(0,a.pie)(this,r),(0,a.radar)(this,r),(0,a.gauge)(this,r),(0,a.legend)(this,r),this.option=e,this.render.launchAnimation()},s.prototype.resize=function(){var e=this.container,t=this.canvas,n=this.render,r=this.option,i=e.clientWidth,o=e.clientHeight;t.setAttribute("width",i),t.setAttribute("height",o),n.area=[i,o],this.setOption(r)}}(Fr)),Fr}!function(e){var t=Pe.exports;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"changeDefaultConfig",{enumerable:!0,get:function(){return r.changeDefaultConfig}}),e.default=void 0;var n=t(Bs()),r=Qe(),i=n.default;e.default=i}(ui);const hi=ii(ui),Ns={__name:"index",props:{option:{type:Object,default:()=>({})}},setup(e){const t=e,n=ref$1(null),r=ref$1(null);let i=reactive({});return be(r,(function(){!i||i.resize()}),(function(){i=new hi(r.value),t.option&&i.setOption(t.option)})),watch((()=>t.option),(()=>{!i||i.setOption(t.option,!0)}),{deep:!0}),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"chartsContainerRef",ref:n,class:"dv-charts-container"},[createBaseVNode("div",{ref_key:"chartRef",ref:r,class:"charts-canvas-container"},null,512)],512))}},jr={install(e){e.component("DvCharts",Ns)}},js={class:"dv-capsule-chart"},Es={class:"label-column"},Ws=createBaseVNode("div",null,"",-1),zs={class:"capsule-container"},qs={key:0,class:"capsule-item-value"},Is={class:"unit-label"},Hs={key:0,class:"unit-text"},Vs={__name:"index",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=reactive({defaultConfig:{data:[],colors:["#37a2da","#32c5e9","#67e0e3","#9fe6b8","#ffdb5c","#ff9f7f","#fb7293"],unit:"",showValue:!1},mergedConfig:null,capsuleLength:[],capsuleValue:[],labelData:[],labelDataLength:[]});function r(){n.mergedConfig=xe(_e(n.defaultConfig,!0),t.config||{}),function(){const{data:e}=n.mergedConfig;if(!e.length)return;const t=e.map((({value:e})=>e)),r=Math.max(...t);n.capsuleValue=t,n.capsuleLength=t.map((e=>r?e/r:0));const i=r/5,o=Array.from(new Set(new Array(6).fill(0).map(((e,t)=>Math.ceil(t*i)))));n.labelData=o,n.labelDataLength=Array.from(o).map((e=>r?e/r:0))}()}return watch((()=>t.config),(()=>{r()}),{deep:!0}),onMounted((()=>{r()})),(e,t)=>(openBlock(),createElementBlock("div",js,[n.mergedConfig?(openBlock(),createElementBlock(Fragment,{key:0},[createBaseVNode("div",Es,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.mergedConfig.data,(e=>(openBlock(),createElementBlock("div",{key:e.name},toDisplayString(e.name),1)))),128)),Ws]),createBaseVNode("div",zs,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.capsuleLength,((e,t)=>(openBlock(),createElementBlock("div",{key:t,class:"capsule-item"},[createBaseVNode("div",{class:"capsule-item-column",style:normalizeStyle(`width: ${100*e}%; background-color: ${n.mergedConfig.colors[t%n.mergedConfig.colors.length]};`)},[n.mergedConfig.showValue?(openBlock(),createElementBlock("div",qs,toDisplayString(n.capsuleValue[t]),1)):createCommentVNode("",!0)],4)])))),128)),createBaseVNode("div",Is,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.labelData,((e,t)=>(openBlock(),createElementBlock("div",{key:e+t},toDisplayString(e),1)))),128))])]),n.mergedConfig.unit?(openBlock(),createElementBlock("div",Hs,toDisplayString(n.mergedConfig.unit),1)):createCommentVNode("",!0)],64)):createCommentVNode("",!0)]))}},Er={install(e){e.component("DvCapsuleChart",Vs)}},Us={class:"dv-digital-flop"},vi={__name:"index",props:{config:{type:Object,default:()=>{}}},setup(e){const t=e,n=ref$1(null),r=reactive({renderer:null,defaultConfig:{number:[],content:"",toFixed:0,textAlign:"center",rowGap:0,style:{fontSize:30,fill:"#3de7c9"},formatter:void 0,animationCurve:"easeOutCubic",animationFrame:50},mergedConfig:null,graph:null});function i(){r.mergedConfig=xe(_e(r.defaultConfig,!0),t.config||{})}function o(){const{number:e,content:t,toFixed:n,textAlign:i,rowGap:o,formatter:a}=r.mergedConfig,[s,l]=r.renderer.area,c=[s/2,l/2];return"left"===i&&(c[0]=0),"right"===i&&(c[0]=s),{number:e,content:t,toFixed:n,position:c,rowGap:o,formatter:a}}function a(){const{style:e,textAlign:t}=r.mergedConfig;return xe(e,{textAlign:t,textBaseline:"middle"})}return watch((()=>t.config),(e=>{!function(){if(r.graph.animationEnd(),i(),!r.graph)return;const{animationCurve:e,animationFrame:t}=r.mergedConfig,n=o(),s=a();(function(e,t){const n=e.shape.number.length,r=t.number.length;n!==r&&(e.shape.number=t.number)})(r.graph,n),r.graph.animationCurve=e,r.graph.animationFrame=t,r.graph.animation("style",s,!0),r.graph.animation("shape",n)}()}),{deep:!0}),onMounted((()=>{r.renderer=new si(n.value),i(),function(){const e=o(),t=a();r.graph=r.renderer.add({name:"numberText",animationCurve:r.mergedConfig.animationCurve,animationFrame:r.mergedConfig.animationFrame,shape:e,style:t})}()})),(e,t)=>(openBlock(),createElementBlock("div",Us,[createBaseVNode("canvas",{ref_key:"digitalFlop",ref:n},null,512)]))}},Qs={class:"dv-active-ring-chart"},Xs={class:"active-ring-info"},Ys={__name:"index",props:{config:{type:Object,default:()=>({})}},setup(e){const t=e,n=ref$1(null),r=reactive({defaultConfig:{radius:"50%",activeRadius:"55%",data:[{name:"",value:0}],lineWidth:20,activeTimeGap:3e3,color:[],digitalFlopStyle:{fontSize:25,fill:"#fff"},digitalFlopToFixed:0,digitalFlopUnit:"",animationCurve:"easeOutCubic",animationFrame:50,showOriginValue:!1},mergedConfig:null,chart:null,activeIndex:0,animationHandler:""}),i=computed((()=>{if(!r.mergedConfig)return{};const{digitalFlopStyle:e,digitalFlopToFixed:t,data:n,showOriginValue:i,digitalFlopUnit:o}=r.mergedConfig,a=n.map((({value:e})=>e));let s;if(i)s=a[r.activeIndex];else{const e=a.reduce(((e,t)=>e+t),0);s=parseFloat(a[r.activeIndex]/e*100)||0}return{content:i?`{nt}${o}`:`{nt}${o||"%"}`,number:[s],style:e,toFixed:t}})),o=computed((()=>r.mergedConfig?r.mergedConfig.data[r.activeIndex].name:"")),a=computed((()=>r.mergedConfig?`font-size: ${r.mergedConfig.digitalFlopStyle.fontSize}px;`:""));function s(){r.mergedConfig=xe(_e(r.defaultConfig,!0),t.config||{})}function l(){const e=c();r.chart.setOption(e,!0),h()}function c(){const e=u();return r.mergedConfig.data.forEach((t=>{t.radius=e})),{series:[{type:"pie",...r.mergedConfig,outsideLabel:{show:!1}}],color:r.mergedConfig.color}}function u(e=!1){const{radius:t,activeRadius:n,lineWidth:i}=r.mergedConfig,o=Math.min(...r.chart.render.area)/2,a=i/2;let s=e?n:t;"number"!=typeof s&&(s=parseInt(s)/100*o);return[s-a,s+a]}function h(){const e=u(),t=u(!0),n=c(),{data:i}=n.series[0];i.forEach(((n,i)=>{i===r.activeIndex?n.radius=t:n.radius=e})),r.chart.setOption(n,!0);const{activeTimeGap:o}=n.series[0];r.animationHandler=setTimeout((e=>{r.activeIndex+=1,r.activeIndex>=i.length&&(r.activeIndex=0),h()}),o)}return watch((()=>t.config),(()=>{clearTimeout(r.animationHandler),r.activeIndex=0,s(),l()}),{deep:!0}),onMounted((()=>{r.chart=new hi(n.value),s(),l()})),onUnmounted((()=>{clearTimeout(r.animationHandler)})),(e,t)=>(openBlock(),createElementBlock("div",Qs,[createBaseVNode("div",{ref_key:"activeRingChart",ref:n,class:"active-ring-chart-container"},null,512),createBaseVNode("div",Xs,[createVNode(vi,{config:unref(i)},null,8,["config"]),createBaseVNode("div",{class:"active-ring-name",style:normalizeStyle(unref(a))},toDisplayString(unref(o)),5)])]))}},Wr={install(e){e.component("DvActiveRingChart",Ys)}},zr={install(e){e.component("DvDigitalFlop",vi)}},Ks=defineComponent({__name:"index",setup(e){const t=ref$1(null),n=reactive({allWidth:0,scale:0,datavRoot:"",ready:!1}),r=()=>{const e=document.body.clientWidth;t.value&&(t.value.style.transform=`scale(${e/n.allWidth})`)};return be(t,(()=>{r()}),(()=>{(()=>{const{width:e,height:r}=screen;n.allWidth=e,t.value&&(t.value.style.width=`${e}px`,t.value.style.height=`${r}px`)})(),r(),n.ready=!0})),(e,r)=>(openBlock(),createElementBlock("div",{id:"dv-full-screen-container",ref_key:"fullScreenContainer",ref:t},[n.ready?renderSlot(e.$slots,"default",{key:0}):createCommentVNode("",!0)],512))}}),qr={install(e){e.component("DvFullScreenContainer",Ks)}},Js=["width","height"],Zs=["fill","x","y","width","height"],eu=["values","begin"],tu=["fill","x","y","width","height"],ru=["values"],nu=["values"],au=["values"],iu=["values"],ou=["fill","x","y","height"],lu=createBaseVNode("animate",{attributeName:"width",values:"0;40;0",dur:"2s",repeatCount:"indefinite"},null,-1),su=["values"],uu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=ref$1(null),r=reactive([200,50]),i=ref$1(4),o=ref$1(20),a=ref$1(2.5),s=ref$1(a.value/2),l=reactive(["#fff","#0de7c2"]),c=reactive({mergedColor:[],rects:[],points:[],svgScale:[1,1]}),{width:u,height:h}=be(n,(()=>{d()}),(()=>{d()})),d=()=>{(()=>{const[e,t]=r,n=e/(o.value+1),a=t/(i.value+1),s=new Array(i.value).fill(0).map(((e,t)=>new Array(o.value).fill(0).map(((e,r)=>[n*(r+1),a*(t+1)]))));c.points=s.reduce(((e,t)=>[...e,...t]),[])})(),(()=>{const e=c.points[2*o.value-1],t=c.points[2*o.value-3];c.rects=[e,t]})(),(()=>{const[e,t]=r;c.svgScale=[u.value/e,h.value/t]})()},f=()=>{c.mergedColor=xe(_e(l,!0),t.color||[])};return watch((()=>t.color),(()=>{f()})),onMounted((()=>{f()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"dvDecoration1",ref:n,class:"dv-decoration-1"},[(openBlock(),createElementBlock("svg",{width:`${r[0]}px`,height:`${r[1]}px`,style:normalizeStyle(`transform:scale(${c.svgScale[0]}, ${c.svgScale[1]});`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(c.points,(e=>(openBlock(),createElementBlock(Fragment,{key:e},[Math.random()>.6?(openBlock(),createElementBlock("rect",{key:0,fill:c.mergedColor[0],x:e[0]-s.value,y:e[1]-s.value,width:a.value,height:a.value},[Math.random()>.6?(openBlock(),createElementBlock("animate",{key:0,attributeName:"fill",values:`${c.mergedColor[0]};transparent`,dur:"1s",begin:2*Math.random(),repeatCount:"indefinite"},null,8,eu)):createCommentVNode("",!0)],8,Zs)):createCommentVNode("",!0)],64)))),128)),c.rects[0]?(openBlock(),createElementBlock("rect",{key:0,fill:c.mergedColor[1],x:c.rects[0][0]-a.value,y:c.rects[0][1]-a.value,width:2*a.value,height:2*a.value},[createBaseVNode("animate",{attributeName:"width",values:"0;"+2*a.value,dur:"2s",repeatCount:"indefinite"},null,8,ru),createBaseVNode("animate",{attributeName:"height",values:"0;"+2*a.value,dur:"2s",repeatCount:"indefinite"},null,8,nu),createBaseVNode("animate",{attributeName:"x",values:`${c.rects[0][0]};${c.rects[0][0]-a.value}`,dur:"2s",repeatCount:"indefinite"},null,8,au),createBaseVNode("animate",{attributeName:"y",values:`${c.rects[0][1]};${c.rects[0][1]-a.value}`,dur:"2s",repeatCount:"indefinite"},null,8,iu)],8,tu)):createCommentVNode("",!0),c.rects[1]?(openBlock(),createElementBlock("rect",{key:1,fill:c.mergedColor[1],x:c.rects[1][0]-40,y:c.rects[1][1]-a.value,width:40,height:2*a.value},[lu,createBaseVNode("animate",{attributeName:"x",values:`${c.rects[1][0]};${c.rects[1][0]-40};${c.rects[1][0]}`,dur:"2s",repeatCount:"indefinite"},null,8,su)],8,ou)):createCommentVNode("",!0)],12,Js))],512))}}),Ir={install(e){e.component("DvDecoration1",uu)}},cu=["width","height"],fu=["x","y","width","height","fill"],du=["attributeName","to","dur"],hu=["x","y","fill"],vu=["attributeName","to","dur"],pu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]},reverse:{type:Boolean,default:!1},dur:{type:Number,default:6}},setup(e){const t=e,n=ref$1(null),r=reactive({x:0,y:0,w:0,h:0,defaultColor:["#3faacb","#fff"],mergedColor:[]}),i=()=>{r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])},{width:o,height:a}=be(n,(()=>{s()}),(()=>{s()})),s=()=>{t.reverse?(r.w=1,r.h=a.value,r.x=o.value/2,r.y=0):(r.w=o.value,r.h=1,r.x=0,r.y=a.value/2)};return watch((()=>t.color),(()=>{i()})),watch((()=>t.reverse),(()=>{s()})),onMounted((()=>{i()})),(t,i)=>(openBlock(),createElementBlock("div",{ref_key:"decoration2",ref:n,class:"dv-decoration-2"},[(openBlock(),createElementBlock("svg",{width:`${unref(o)}px`,height:`${unref(a)}px`},[createBaseVNode("rect",{x:r.x,y:r.y,width:r.w,height:r.h,fill:r.mergedColor[0]},[createBaseVNode("animate",{attributeName:e.reverse?"height":"width",from:"0",to:e.reverse?unref(a):unref(o),dur:`${e.dur}s`,calcMode:"spline",keyTimes:"0;1",keySplines:".42,0,.58,1",repeatCount:"indefinite"},null,8,du)],8,fu),createBaseVNode("rect",{x:r.x,y:r.y,width:"1",height:"1",fill:r.mergedColor[1]},[createBaseVNode("animate",{attributeName:e.reverse?"y":"x",from:"0",to:e.reverse?unref(a):unref(o),dur:`${e.dur}s`,calcMode:"spline",keyTimes:"0;1",keySplines:"0.42,0,0.58,1",repeatCount:"indefinite"},null,8,vu)],8,hu)],8,cu))],512))}}),Hr={install(e){e.component("DvDecoration2",pu)}},gu=["width","height"],mu=["fill","x","y"],yu=["values","dur","begin"],bu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=ref$1(null),r=reactive({svgWH:[300,35],svgScale:[1,1],rowNum:2,rowPoints:25,pointSideLength:7,halfPointSideLength:3.5,points:[],defaultColor:["#7acaec","transparent"],mergedColor:[]}),i=()=>{(()=>{const[e,t]=r.svgWH,n=e/(r.rowPoints+1),i=t/(r.rowNum+1),o=new Array(r.rowNum).fill(0).map(((e,t)=>new Array(r.rowPoints).fill(0).map(((e,r)=>[n*(r+1),i*(t+1)]))));r.points=o.reduce(((e,t)=>[...e,...t]),[])})(),s()},{width:o,height:a}=be(n,(()=>{i()}),(()=>{i()})),s=()=>{const[e,t]=r.svgWH;r.svgScale=[o.value/e,a.value/t]},l=()=>{r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])};return watch((()=>t.color),(()=>{l()})),onMounted((()=>{l()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"decoration3",ref:n,class:"dv-decoration-3"},[(openBlock(),createElementBlock("svg",{width:`${r.svgWH[0]}px`,height:`${r.svgWH[1]}px`,style:normalizeStyle(`transform:scale(${r.svgScale[0]},${r.svgScale[1]});`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.points,(e=>(openBlock(),createElementBlock("rect",{key:e,fill:r.mergedColor[0],x:e[0]-r.halfPointSideLength,y:e[1]-r.halfPointSideLength,width:7,height:7},[Math.random()>.6?(openBlock(),createElementBlock("animate",{key:0,attributeName:"fill",values:`${r.mergedColor.join(";")}`,dur:Math.random()+1+"s",begin:2*Math.random(),repeatCount:"indefinite"},null,8,yu)):createCommentVNode("",!0)],8,mu)))),128))],12,gu))],512))}}),Vr={install(e){e.component("DvDecoration3",bu)}},xu=["width","height"],Cu=["stroke","points"],_u=["stroke","points"],$u=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]},reverse:{type:Boolean,default:!1},dur:{type:Number,default:3}},setup(e){const t=e,n=ref$1(null),r=reactive({defaultColor:["rgba(255, 255, 255, 0.3)","rgba(255, 255, 255, 0.3)"],mergedColor:[]}),i=()=>{r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])},{width:o,height:a}=be(n);return watch((()=>t.color),(()=>{i()})),onMounted((()=>{i()})),(t,i)=>(openBlock(),createElementBlock("div",{ref_key:"decoration3",ref:n,class:"dv-decoration-4"},[createBaseVNode("div",{class:normalizeClass("container "+(e.reverse?"reverse":"normal")),style:normalizeStyle(e.reverse?`width:${unref(o)}px;height:5px;animation-duration:${e.dur}s`:`width:5px;height:${unref(a)}px;animation-duration:${e.dur}s`)},[(openBlock(),createElementBlock("svg",{width:e.reverse?unref(o):5,height:e.reverse?5:unref(a)},[createBaseVNode("polyline",{stroke:r.mergedColor[0],points:e.reverse?`0, 2.5 ${unref(o)}, 2.5`:`2.5, 0 2.5, ${unref(a)}`},null,8,Cu),createBaseVNode("polyline",{class:"bold-line",stroke:r.mergedColor[1],"stroke-width":"3","stroke-dasharray":"20, 80","stroke-dashoffset":"-30",points:e.reverse?`0, 2.5 ${unref(o)}, 2.5`:`2.5, 0 2.5, ${unref(a)}`},null,8,_u)],8,xu))],6)],512))}}),Ur={install(e){e.component("DvDecoration4",$u)}},Pu=["width","height"],wu=["stroke","points"],ku=["from","to","dur"],Au=["stroke","points"],Su=["from","to","dur"],Lu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:1.2}},setup(e){const t=e,n=ref$1(null),r=reactive({line1Points:"",line2Points:"",line1Length:0,line2Length:0,defaultColor:["#3f96a5","#3f96a5"],mergedColor:[]}),{width:i,height:o}=be(n,(()=>{a()}),(()=>{a()})),a=()=>{const e=[{x:0,y:.2*o.value},{x:.18*i.value,y:.2*o.value},{x:.2*i.value,y:.4*o.value},{x:.25*i.value,y:.4*o.value},{x:.27*i.value,y:.6*o.value},{x:.72*i.value,y:.6*o.value},{x:.75*i.value,y:.4*o.value},{x:.8*i.value,y:.4*o.value},{x:.82*i.value,y:.2*o.value},{x:i.value,y:.2*o.value}],t=[{x:.3*i.value,y:.8*o.value},{x:.7*i.value,y:.8*o.value}],n=Fn(e),a=Fn(t);r.line1Points=Bn(e),r.line2Points=Bn(t),r.line1Length=n,r.line2Length=a},s=()=>{r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])};return watch((()=>t.color),(()=>{s()})),onMounted((()=>{s()})),(t,a)=>(openBlock(),createElementBlock("div",{ref_key:"decoration5",ref:n,class:"dv-decoration-5"},[(openBlock(),createElementBlock("svg",{width:unref(i),height:unref(o)},[createBaseVNode("polyline",{fill:"transparent",stroke:r.mergedColor[0],"stroke-width":"3",points:r.line1Points},[createBaseVNode("animate",{attributeName:"stroke-dasharray",attributeType:"XML",from:`0, ${r.line1Length/2}, 0, ${r.line1Length/2}`,to:`0, 0, ${r.line1Length}, 0`,dur:`${e.dur}s`,begin:"0s",calcMode:"spline",keyTimes:"0;1",keySplines:"0.4,1,0.49,0.98",repeatCount:"indefinite"},null,8,ku)],8,wu),createBaseVNode("polyline",{fill:"transparent",stroke:r.mergedColor[1],"stroke-width":"2",points:r.line2Points},[createBaseVNode("animate",{attributeName:"stroke-dasharray",attributeType:"XML",from:`0, ${r.line2Length/2}, 0, ${r.line2Length/2}`,to:`0, 0, ${r.line2Length}, 0`,dur:`${e.dur}s`,begin:"0s",calcMode:"spline",keyTimes:"0;1",keySplines:".4,1,.49,.98",repeatCount:"indefinite"},null,8,Su)],8,Au)],8,Pu))],512))}}),Qr={install(e){e.component("DvDecoration5",Lu)}},Ou=["width","height"],Gu=["fill","x","y","height"],Ru=["values","dur"],Tu=["values","dur"],Mu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=ref$1(null),r=reactive({svgWH:[300,35],svgScale:[1,1],rowNum:1,rowPoints:40,rectWidth:7,halfRectWidth:3.5,points:[],heights:[],minHeights:[],randoms:[],defaultColor:["#7acaec","#7acaec"],mergedColor:[]});watch((()=>t.color),(()=>{s()})),onMounted((()=>{s()}));const{width:i,height:o}=be(n,(function(){a()}),(function(){a()}));function a(){(function(){const[e,t]=r.svgWH,n=e/(r.rowPoints+1),i=t/(r.rowNum+1),o=new Array(r.rowNum).fill(0).map(((e,t)=>new Array(r.rowPoints).fill(0).map(((e,r)=>[n*(r+1),i*(t+1)]))));r.points=o.reduce(((e,t)=>[...e,...t]),[]);const a=r.heights=new Array(r.rowNum*r.rowPoints).fill(0).map((e=>Math.random()>.8?_t(.7*t,t):_t(.2*t,.5*t)));r.minHeights=new Array(r.rowNum*r.rowPoints).fill(0).map(((e,t)=>a[t]*Math.random())),r.randoms=new Array(r.rowNum*r.rowPoints).fill(0).map((e=>Math.random()+1.5))})(),function(){const[e,t]=r.svgWH;r.svgScale=[i.value/e,o.value/t]}()}function s(){r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])}return(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"decoration6",ref:n,class:"dv-decoration-6"},[(openBlock(),createElementBlock("svg",{width:`${r.svgWH[0]}px`,height:`${r.svgWH[1]}px`,style:normalizeStyle(`transform:scale(${r.svgScale[0]},${r.svgScale[1]});`)},[(openBlock(!0),createElementBlock(Fragment,null,renderList(r.points,((e,t)=>(openBlock(),createElementBlock("rect",{key:t,fill:r.mergedColor[Math.random()>.5?0:1],x:e[0]-r.halfRectWidth,y:e[1]-r.heights[t]/2,width:7,height:r.heights[t]},[createBaseVNode("animate",{attributeName:"y",values:`${e[1]-r.minHeights[t]/2};${e[1]-r.heights[t]/2};${e[1]-r.minHeights[t]/2}`,dur:`${r.randoms[t]}s`,keyTimes:"0;0.5;1",calcMode:"spline",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1",begin:"0s",repeatCount:"indefinite"},null,8,Ru),createBaseVNode("animate",{attributeName:"height",values:`${r.minHeights[t]};${r.heights[t]};${r.minHeights[t]}`,dur:`${r.randoms[t]}s`,keyTimes:"0;0.5;1",calcMode:"spline",keySplines:"0.42,0,0.58,1;0.42,0,0.58,1",begin:"0s",repeatCount:"indefinite"},null,8,Tu)],8,Gu)))),128))],12,Ou))],512))}}),Xr={install(e){e.component("DvDecoration6",Mu)}},Du={class:"dv-decoration-7"},Fu={width:"21px",height:"20px"},Bu=["stroke"],Nu=["stroke"],ju={width:"21px",height:"20px"},Eu=["stroke"],Wu=["stroke"],zu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=reactive({defaultColor:["#1dc1f5","#1dc1f5"],mergedColor:[]});function r(){n.mergedColor=xe(_e(n.defaultColor,!0),t.color||[])}return watch((()=>t.color),(()=>{r()})),onMounted((()=>{r()})),(e,t)=>(openBlock(),createElementBlock("div",Du,[(openBlock(),createElementBlock("svg",Fu,[createBaseVNode("polyline",{"stroke-width":"4",fill:"transparent",stroke:n.mergedColor[0],points:"10, 0 19, 10 10, 20"},null,8,Bu),createBaseVNode("polyline",{"stroke-width":"2",fill:"transparent",stroke:n.mergedColor[1],points:"2, 0 11, 10 2, 20"},null,8,Nu)])),renderSlot(e.$slots,"default"),(openBlock(),createElementBlock("svg",ju,[createBaseVNode("polyline",{"stroke-width":"4",fill:"transparent",stroke:n.mergedColor[0],points:"11, 0 2, 10 11, 20"},null,8,Eu),createBaseVNode("polyline",{"stroke-width":"2",fill:"transparent",stroke:n.mergedColor[1],points:"19, 0 10, 10 19, 20"},null,8,Wu)]))]))}}),Yr={install(e){e.component("DvDecoration7",zu)}},qu=["width","height"],Iu=["stroke","points"],Hu=["stroke","points"],Vu=["stroke","points"],Uu=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]},reverse:{type:Boolean,default:!1}},setup(e){const t=e,n=ref$1(null),r=reactive({defaultColor:["#3f96a5","#3f96a5"],mergedColor:[]});watch((()=>t.color),(()=>{s()})),onMounted((()=>{s()}));const{width:i,height:o}=be(n);function a(e){return t.reverse?i.value-e:e}function s(){r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])}return(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"decoration8",ref:n,class:"dv-decoration-8"},[(openBlock(),createElementBlock("svg",{width:unref(i),height:unref(o)},[createBaseVNode("polyline",{stroke:r.mergedColor[0],"stroke-width":"2",fill:"transparent",points:`${a(0)}, 0 ${a(30)}, ${unref(o)/2}`},null,8,Iu),createBaseVNode("polyline",{stroke:r.mergedColor[0],"stroke-width":"2",fill:"transparent",points:`${a(20)}, 0 ${a(50)}, ${unref(o)/2} ${a(unref(i))}, ${unref(o)/2}`},null,8,Hu),createBaseVNode("polyline",{stroke:r.mergedColor[1],fill:"transparent","stroke-width":"3",points:`${a(0)}, ${unref(o)-3}, ${a(200)}, ${unref(o)-3}`},null,8,Vu)],8,qu))],512))}}),Kr={install(e){e.component("DvDecoration8",Uu)}};var Be=it();const Qu=["width","height"],Xu=["id"],Yu=["stroke"],Ku=["dur"],Ju=["stroke"],Zu=["dur"],ec=["stroke"],tc=["xlink:href","stroke","fill"],rc=["dur","begin"],nc=["stroke"],ac={__name:"index",props:{color:{type:Array,default:()=>[]},dur:{type:Number,default:3}},setup(e){const t=e,n=Ve(),r=ref$1(null),i=reactive({polygonId:`decoration-9-polygon-${n}`,svgWH:[100,100],svgScale:[1,1],defaultColor:["rgba(3, 166, 224, 0.8)","rgba(3, 166, 224, 0.5)"],mergedColor:[]});watch((()=>t.color),(()=>{l()})),onMounted((()=>{l()}));const{width:o,height:a}=be(r,(function(){s()}),(function(){s()}));function s(){const[e,t]=i.svgWH;i.svgScale=[o.value/e,a.value/t]}function l(){i.mergedColor=xe(_e(i.defaultColor,!0),t.color||[])}return(t,n)=>(openBlock(),createElementBlock("div",{ref_key:"decoration9",ref:r,class:"dv-decoration-9"},[(openBlock(),createElementBlock("svg",{width:`${i.svgWH[0]}px`,height:`${i.svgWH[1]}px`,style:normalizeStyle(`transform:scale(${i.svgScale[0]},${i.svgScale[1]});`)},[createBaseVNode("defs",null,[createBaseVNode("polygon",{id:i.polygonId,points:"15, 46.5, 21, 47.5, 21, 52.5, 15, 53.5"},null,8,Xu)]),createBaseVNode("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:i.mergedColor[1],"stroke-width":"10","stroke-dasharray":"80, 100, 30, 100"},[createBaseVNode("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${e.dur}s`,repeatCount:"indefinite"},null,8,Ku)],8,Yu),createBaseVNode("circle",{cx:"50",cy:"50",r:"45",fill:"transparent",stroke:i.mergedColor[0],"stroke-width":"6","stroke-dasharray":"50, 66, 100, 66"},[createBaseVNode("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;-360 50 50",dur:`${e.dur}s`,repeatCount:"indefinite"},null,8,Zu)],8,Ju),createBaseVNode("circle",{cx:"50",cy:"50",r:"38",fill:"transparent",stroke:unref(Be.fade)(i.mergedColor[1]||i.defaultColor[1],30),"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,ec),(openBlock(!0),createElementBlock(Fragment,null,renderList(new Array(20).fill(0),((t,n)=>(openBlock(),createElementBlock("use",{key:n,"xlink:href":`#${i.polygonId}`,stroke:i.mergedColor[1],fill:Math.random()>.4?"transparent":i.mergedColor[0]},[createBaseVNode("animateTransform",{attributeName:"transform",type:"rotate",values:"0 50 50;360 50 50",dur:`${e.dur}s`,begin:n*e.dur/20+"s",repeatCount:"indefinite"},null,8,rc)],8,tc)))),128)),createBaseVNode("circle",{cx:"50",cy:"50",r:"26",fill:"transparent",stroke:unref(Be.fade)(i.mergedColor[1]||i.defaultColor[1],30),"stroke-width":"1","stroke-dasharray":"5, 1"},null,8,nc)],12,Qu)),renderSlot(t.$slots,"default")],512))}},Jr={install(e){e.component("DvDecoration9",ac)}},ic=["width","height"],oc=["stroke","points"],lc=["stroke","points","stroke-dasharray"],sc=["id","values","begin"],uc=["values","begin"],cc=["stroke","points","stroke-dasharray"],fc=["id","values","begin"],dc=["values","begin"],hc=["stroke","points","stroke-dasharray"],vc=["id","values","begin"],pc=["values","begin"],gc=["cy","fill"],mc=["id","values","begin"],yc=["cx","cy","fill"],bc=["id","values","begin"],xc=["values","begin"],Cc=["cx","cy","fill"],_c=["id","values","begin"],$c=["values","begin"],Pc=["cx","cy","fill"],wc=["id","values","begin"],kc=["values","begin"],Ac=defineComponent({__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=Ve(),r=ref$1(null),i=reactive({animationId1:`d10ani1${n}`,animationId2:`d10ani2${n}`,animationId3:`d10ani3${n}`,animationId4:`d10ani4${n}`,animationId5:`d10ani5${n}`,animationId6:`d10ani6${n}`,animationId7:`d10ani7${n}`,defaultColor:["#00c2ff","rgba(0, 194, 255, 0.3)"],mergedColor:[]}),{width:o,height:a}=be(r);function s(){i.mergedColor=xe(_e(i.defaultColor,!0),t.color||[])}return watch((()=>t.color),(()=>{s()})),onMounted((()=>{s()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"decoration10",ref:r,class:"dv-decoration-10"},[(openBlock(),createElementBlock("svg",{width:unref(o),height:unref(a)},[createBaseVNode("polyline",{stroke:i.mergedColor[1],"stroke-width":"2",points:`0, ${unref(a)/2} ${unref(o)}, ${unref(a)/2}`},null,8,oc),createBaseVNode("polyline",{stroke:i.mergedColor[0],"stroke-width":"2",points:`5, ${unref(a)/2} ${.2*unref(o)-3}, ${unref(a)/2}`,"stroke-dasharray":"0, "+.2*unref(o),fill:"freeze"},[createBaseVNode("animate",{id:i.animationId2,attributeName:"stroke-dasharray",values:`0, ${.2*unref(o)};${.2*unref(o)}, 0;`,dur:"3s",begin:`${i.animationId1}.end`,fill:"freeze"},null,8,sc),createBaseVNode("animate",{attributeName:"stroke-dasharray",values:`${.2*unref(o)}, 0;0, ${.2*unref(o)}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,uc)],8,lc),createBaseVNode("polyline",{stroke:i.mergedColor[0],"stroke-width":"2",points:`${.2*unref(o)+3}, ${unref(a)/2} ${.8*unref(o)-3}, ${unref(a)/2}`,"stroke-dasharray":"0, "+.6*unref(o)},[createBaseVNode("animate",{id:i.animationId4,attributeName:"stroke-dasharray",values:`0, ${.6*unref(o)};${.6*unref(o)}, 0`,dur:"3s",begin:`${i.animationId3}.end + 1s`,fill:"freeze"},null,8,fc),createBaseVNode("animate",{attributeName:"stroke-dasharray",values:`${.6*unref(o)}, 0;0, ${.6*unref(o)}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,dc)],8,cc),createBaseVNode("polyline",{stroke:i.mergedColor[0],"stroke-width":"2",points:`${.8*unref(o)+3}, ${unref(a)/2} ${unref(o)-5}, ${unref(a)/2}`,"stroke-dasharray":"0, "+.2*unref(o)},[createBaseVNode("animate",{id:i.animationId6,attributeName:"stroke-dasharray",values:`0, ${.2*unref(o)};${.2*unref(o)}, 0`,dur:"3s",begin:`${i.animationId5}.end + 1s`,fill:"freeze"},null,8,vc),createBaseVNode("animate",{attributeName:"stroke-dasharray",values:`${.2*unref(o)}, 0;0, ${.3*unref(o)}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,pc)],8,hc),createBaseVNode("circle",{cx:"2",cy:unref(a)/2,r:"2",fill:i.mergedColor[1]},[createBaseVNode("animate",{id:i.animationId1,attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[0]}`,begin:`0s;${i.animationId7}.end`,dur:"0.3s",fill:"freeze"},null,8,mc)],8,gc),createBaseVNode("circle",{cx:.2*unref(o),cy:unref(a)/2,r:"2",fill:i.mergedColor[1]},[createBaseVNode("animate",{id:i.animationId3,attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[0]}`,begin:`${i.animationId2}.end`,dur:"0.3s",fill:"freeze"},null,8,bc),createBaseVNode("animate",{attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[1]}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,xc)],8,yc),createBaseVNode("circle",{cx:.8*unref(o),cy:unref(a)/2,r:"2",fill:i.mergedColor[1]},[createBaseVNode("animate",{id:i.animationId5,attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[0]}`,begin:`${i.animationId4}.end`,dur:"0.3s",fill:"freeze"},null,8,_c),createBaseVNode("animate",{attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[1]}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,$c)],8,Cc),createBaseVNode("circle",{cx:unref(o)-2,cy:unref(a)/2,r:"2",fill:i.mergedColor[1]},[createBaseVNode("animate",{id:i.animationId7,attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[0]}`,begin:`${i.animationId6}.end`,dur:"0.3s",fill:"freeze"},null,8,wc),createBaseVNode("animate",{attributeName:"fill",values:`${i.mergedColor[1]};${i.mergedColor[1]}`,dur:"0.01s",begin:`${i.animationId7}.end`,fill:"freeze"},null,8,kc)],8,Pc)],8,ic))],512))}}),Zr={install(e){e.component("DvDecoration10",Ac)}},Sc=["width","height"],Lc=["fill","stroke"],Oc=["fill","stroke","points"],Gc=["fill","stroke","points"],Rc=["fill","stroke","points"],Tc=["fill","stroke","points"],Mc=["stroke","points"],Dc=["stroke","points"],Fc={class:"decoration-content"},Bc={__name:"index",props:{color:{type:Array,default:()=>[]}},setup(e){const t=e,n=ref$1(null),r=reactive({defaultColor:["#1a98fc","#2cf7fe"],mergedColor:[]}),{width:i,height:o}=be(n);function a(){r.mergedColor=xe(_e(r.defaultColor,!0),t.color||[])}return watch((()=>t.color),(()=>{a()})),onMounted((()=>{a()})),(e,t)=>(openBlock(),createElementBlock("div",{ref_key:"decoration11",ref:n,class:"dv-decoration-11"},[(openBlock(),createElementBlock("svg",{width:unref(i),height:unref(o)},[createBaseVNode("polygon",{fill:unref(Be.fade)(r.mergedColor[1]||r.defaultColor[1],10),stroke:r.mergedColor[1],points:"20 10, 25 4, 55 4 60 10"},null,8,Lc),createBaseVNode("polygon",{fill:unref(Be.fade)(r.mergedColor[1]||r.defaultColor[1],10),stroke:r.mergedColor[1],points:`20 ${unref(o)-10}, 25 ${unref(o)-4}, 55 ${unref(o)-4} 60 ${unref(o)-10}`},null,8,Oc),createBaseVNode("polygon",{fill:unref(Be.fade)(r.mergedColor[1]||r.defaultColor[1],10),stroke:r.mergedColor[1],points:`${unref(i)-20} 10, ${unref(i)-25} 4, ${unref(i)-55} 4 ${unref(i)-60} 10`},null,8,Gc),createBaseVNode("polygon",{fill:unref(Be.fade)(r.mergedColor[1]||r.defaultColor[1],10),stroke:r.mergedColor[1],points:`${unref(i)-20} ${unref(o)-10}, ${unref(i)-25} ${unref(o)-4}, ${unref(i)-55} ${unref(o)-4} ${unref(i)-60} ${unref(o)-10}`},null,8,Rc),createBaseVNode("polygon",{fill:unref(Be.fade)(r.mergedColor[0]||r.defaultColor[0],20),stroke:r.mergedColor[0],points:`\n          20 10, 5 ${unref(o)/2} 20 ${unref(o)-10}\n          ${unref(i)-20} ${unref(o)-10} ${unref(i)-5} ${unref(o)/2} ${unref(i)-20} 10\n        `},null,8,Tc),createBaseVNode("polyline",{fill:"transparent",stroke:unref(Be.fade)(r.mergedColor[0]||r.defaultColor[0],70),points:`25 18, 15 ${unref(o)/2} 25 ${unref(o)-18}`},null,8,Mc),createBaseVNode("polyline",{fill:"transparent",stroke:unref(Be.fade)(r.mergedColor[0]||r.defaultColor[0],70),points:`${unref(i)-25} 18, ${unref(i)-15} ${unref(o)/2} ${unref(i)-25} ${unref(o)-18}`},null,8,Dc)],8,Sc)),createBaseVNode("div",Fc,[renderSlot(e.$slots,"default")])],512))}},en={install(e){e.component("DvDecoration11",Bc)}},Nc=["width","height"],jc=["id"],Ec=["stroke","stroke-width","d"],Wc=["id"],zc=createBaseVNode("stop",{offset:"0%","stop-color":"transparent","stop-opacity":"1"},null,-1),qc=["stop-color"],Ic=["r","cx","cy","stroke","stroke-width"],Hc=["cx","cy","fill"],Vc=["values","dur"],Uc=["dur"],Qc=["cx","cy","fill"],Xc={key:0},Yc=["points","stroke","stroke-width"],Kc=["d","stroke"],Jc=["xlink:href"],Zc=["values","dur"],ef={class:"decoration-content"},tf={__name:"index",props:{color:{type:Array,default:()=>[]},scanDur:{type:Number,default:3},haloDur:{type:Number,default:2}},setup(e){const t=e,n=Ve(),r=ref$1(null),{width:i,height:o}=be(r,(()=>{}),(function(){c(),function(){const e=-Math.PI/2,t=a.sectorAngle/a.segment,n=i.value/4;let r=nt(s.value,l.value,n,e);a.pathD=new Array(a.segment).fill("").map(((i,o)=>{const a=nt(s.value,l.value,n,e-(o+1)*t).map((e=>parseFloat(e.toFixed(5)))),c=`M${r.join(",")} A${n}, ${n} 0 0 0 ${a.join(",")}`;return r=a,c}))}(),u(),function(){const e=(i.value/2-a.ringWidth/2)/a.ringNum;a.circleR=new Array(a.ringNum).fill(0).map(((t,n)=>e*(n+1)))}(),function(){const e=Math.PI/6,t=i.value/2;a.splitLinePoints=new Array(6).fill("").map(((n,r)=>{const i=e*(r+1),o=i+Math.PI,a=nt(s.value,l.value,t,i),c=nt(s.value,l.value,t,o);return`${a.join(",")} ${c.join(",")}`}))}(),function(){const e=Math.PI/6,t=i.value/2-1;a.arcD=new Array(4).fill("").map(((n,r)=>{const i=e*(3*r+1),o=i+e,a=nt(s.value,l.value,t,i),c=nt(s.value,l.value,t,o);return`M${a.join(",")} A${s.value}, ${l.value} 0 0 1 ${c.join(",")}`}))}()})),a=reactive({gId:`decoration-12-g-${n}`,gradientId:`decoration-12-gradient-${n}`,defaultColor:["#2783ce","#2cf7fe"],mergedColor:[],pathD:[],pathColor:[],circleR:[],splitLinePoints:[],arcD:[],segment:30,sectorAngle:Math.PI/3,ringNum:3,ringWidth:1,showSplitLine:!0}),s=computed((()=>i.value/2)),l=computed((()=>o.value/2));function c(){a.mergedColor=xe(_e(a.defaultColor,!0),t.color||[])}function u(){const e=100/(a.segment-1);a.pathColor=new Array(a.segment).fill(a.mergedColor[0]).map(((t,n)=>Be.fade(a.mergedColor[0],100-n*e)))}return watch((()=>t.color),(()=>{c(),u()})),(t,n)=>(openBlock(),createElementBlock("div",{ref_key:"decoration12",ref:r,class:"dv-decoration-12"},[(openBlock(),createElementBlock("svg",{width:unref(i),height:unref(o)},[createBaseVNode("defs",null,[createBaseVNode("g",{id:a.gId},[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.pathD,((e,t)=>(openBlock(),createElementBlock("path",{key:e,stroke:a.pathColor[t],"stroke-width":unref(i)/2,fill:"transparent",d:e},null,8,Ec)))),128))],8,jc),createBaseVNode("radialGradient",{id:a.gradientId,cx:"50%",cy:"50%",r:"50%"},[zc,createBaseVNode("stop",{offset:"100%","stop-color":unref(Be.fade)(a.mergedColor[1]||a.defaultColor[1],30),"stop-opacity":"1"},null,8,qc)],8,Wc)]),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.circleR,(e=>(openBlock(),createElementBlock("circle",{key:e,r:e,cx:unref(s),cy:unref(l),stroke:a.mergedColor[1],"stroke-width":.8,fill:"transparent"},null,8,Ic)))),128)),createBaseVNode("circle",{r:"1",cx:unref(s),cy:unref(l),stroke:"transparent",fill:`url(#${a.gradientId})`},[createBaseVNode("animate",{attributeName:"r",values:"1;"+unref(i)/2,dur:`${e.haloDur}s`,repeatCount:"indefinite"},null,8,Vc),createBaseVNode("animate",{attributeName:"opacity",values:"1;0",dur:`${e.haloDur}s`,repeatCount:"indefinite"},null,8,Uc)],8,Hc),createBaseVNode("circle",{r:"2",cx:unref(s),cy:unref(l),fill:a.mergedColor[1]},null,8,Qc),a.showSplitLine?(openBlock(),createElementBlock("g",Xc,[(openBlock(!0),createElementBlock(Fragment,null,renderList(a.splitLinePoints,(e=>(openBlock(),createElementBlock("polyline",{key:e,points:e,stroke:a.mergedColor[1],"stroke-width":.5,opacity:"50"},null,8,Yc)))),128))])):createCommentVNode("",!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.arcD,(e=>(openBlock(),createElementBlock("path",{key:e,d:e,stroke:a.mergedColor[1],"stroke-width":"2.3",fill:"transparent"},null,8,Kc)))),128)),createBaseVNode("use",{"xlink:href":`#${a.gId}`},[createBaseVNode("animateTransform",{attributeName:"transform",type:"rotate",values:`0, ${unref(s)} ${unref(l)};360, ${unref(s)} ${unref(l)}`,dur:`${e.scanDur}s`,repeatCount:"indefinite"},null,8,Zc)],8,Jc)],8,Nc)),createBaseVNode("div",ef,[renderSlot(t.$slots,"default")])],512))}},tn={install(e){e.component("DvDecoration12",tf)}},Ie={color:{type:Array,default:()=>[]},backgroundColor:{type:String,default:"transparent"}};var rf="object"==typeof global&&global&&global.Object===Object&&global;const pi=rf;var nf="object"==typeof self&&self&&self.Object===Object&&self,af=pi||nf||Function("return this")();const ot=af;var of=ot.Symbol;const qt=of;var gi=Object.prototype,lf=gi.hasOwnProperty,sf=gi.toString,bt=qt?qt.toStringTag:void 0;function uf(e){var t=lf.call(e,bt),n=e[bt];try{e[bt]=void 0;var r=!0}catch{}var i=sf.call(e);return r&&(t?e[bt]=n:delete e[bt]),i}var cf=Object.prototype,ff=cf.toString;function df(e){return ff.call(e)}var hf="[object Null]",vf="[object Undefined]",qa=qt?qt.toStringTag:void 0;function Qt(e){return null==e?void 0===e?vf:hf:qa&&qa in Object(e)?uf(e):df(e)}function St(e){return null!=e&&"object"==typeof e}var pf=Array.isArray;const Cn=pf;function rt(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function mi(e){return e}var gf="[object AsyncFunction]",mf="[object Function]",yf="[object GeneratorFunction]",bf="[object Proxy]";function An(e){if(!rt(e))return!1;var t=Qt(e);return t==mf||t==yf||t==gf||t==bf}var xf=ot["__core-js_shared__"];const rn=xf;var Ia=function(){var e=/[^.]+$/.exec(rn&&rn.keys&&rn.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Cf(e){return!!Ia&&Ia in e}var _f=Function.prototype,$f=_f.toString;function Pf(e){if(null!=e){try{return $f.call(e)}catch{}try{return e+""}catch{}}return""}var wf=/[\\^$.*+?()[\]{}|]/g,kf=/^\[object .+?Constructor\]$/,Af=Function.prototype,Sf=Object.prototype,Lf=Af.toString,Of=Sf.hasOwnProperty,Gf=RegExp("^"+Lf.call(Of).replace(wf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rf(e){return!(!rt(e)||Cf(e))&&(An(e)?Gf:kf).test(Pf(e))}function Tf(e,t){return null==e?void 0:e[t]}function Sn(e,t){var n=Tf(e,t);return Rf(n)?n:void 0}var Ha=Object.create,Mf=function(){function e(){}return function(t){if(!rt(t))return{};if(Ha)return Ha(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Df=Mf;function Ff(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Bf(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Nf=800,jf=16,Ef=Date.now;function Wf(e){var t=0,n=0;return function(){var r=Ef(),i=jf-(r-n);if(n=r,i>0){if(++t>=Nf)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function zf(e){return function(){return e}}var qf=function(){try{var e=Sn(Object,"defineProperty");return e({},"",{}),e}catch{}}();const It=qf;var If=It?function(e,t){return It(e,"toString",{configurable:!0,enumerable:!1,value:zf(t),writable:!0})}:mi;const Hf=If;var Vf=Wf(Hf);const Uf=Vf;var Qf=9007199254740991,Xf=/^(?:0|[1-9]\d*)$/;function yi(e,t){var n=typeof e;return!!(t=null==t?Qf:t)&&("number"==n||"symbol"!=n&&Xf.test(e))&&e>-1&&e%1==0&&e<t}function Ln(e,t,n){"__proto__"==t&&It?It(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xt(e,t){return e===t||e!=e&&t!=t}var Yf=Object.prototype,Kf=Yf.hasOwnProperty;function Jf(e,t,n){var r=e[t];(!Kf.call(e,t)||!Xt(r,n)||void 0===n&&!(t in e))&&Ln(e,t,n)}function Zf(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?Ln(n,s,l):Jf(n,s,l)}return n}var Va=Math.max;function ed(e,t,n){return t=Va(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Va(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),Ff(e,this,s)}}function td(e,t){return Uf(ed(e,t,mi),e+"")}var rd=9007199254740991;function bi(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=rd}function On(e){return null!=e&&bi(e.length)&&!An(e)}function nd(e,t,n){if(!rt(n))return!1;var r=typeof t;return!!("number"==r?On(n)&&yi(t,n.length):"string"==r&&t in n)&&Xt(n[t],e)}function ad(e){return td((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&nd(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))}var id=Object.prototype;function xi(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||id)}function od(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ld="[object Arguments]";function Ua(e){return St(e)&&Qt(e)==ld}var Ci=Object.prototype,sd=Ci.hasOwnProperty,ud=Ci.propertyIsEnumerable,cd=Ua(function(){return arguments}())?Ua:function(e){return St(e)&&sd.call(e,"callee")&&!ud.call(e,"callee")};const _n=cd;function fd(){return!1}var _i="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qa=_i&&"object"==typeof module&&module&&!module.nodeType&&module,dd=Qa&&Qa.exports===_i,Xa=dd?ot.Buffer:void 0,hd=Xa?Xa.isBuffer:void 0,vd=hd||fd;const $i=vd;var pd="[object Arguments]",gd="[object Array]",md="[object Boolean]",yd="[object Date]",bd="[object Error]",xd="[object Function]",Cd="[object Map]",_d="[object Number]",$d="[object Object]",Pd="[object RegExp]",wd="[object Set]",kd="[object String]",Ad="[object WeakMap]",Sd="[object ArrayBuffer]",Ld="[object DataView]",Od="[object Float32Array]",Gd="[object Float64Array]",Rd="[object Int8Array]",Td="[object Int16Array]",Md="[object Int32Array]",Dd="[object Uint8Array]",Fd="[object Uint8ClampedArray]",Bd="[object Uint16Array]",Nd="[object Uint32Array]",we={};function jd(e){return St(e)&&bi(e.length)&&!!we[Qt(e)]}function Ed(e){return function(t){return e(t)}}we[Od]=we[Gd]=we[Rd]=we[Td]=we[Md]=we[Dd]=we[Fd]=we[Bd]=we[Nd]=!0,we[pd]=we[gd]=we[Sd]=we[md]=we[Ld]=we[yd]=we[bd]=we[xd]=we[Cd]=we[_d]=we[$d]=we[Pd]=we[wd]=we[kd]=we[Ad]=!1;var Pi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ct=Pi&&"object"==typeof module&&module&&!module.nodeType&&module,Wd=Ct&&Ct.exports===Pi,nn=Wd&&pi.process,zd=function(){try{return Ct&&Ct.require&&Ct.require("util").types||nn&&nn.binding&&nn.binding("util")}catch{}}();const Ya=zd;var Ka=Ya&&Ya.isTypedArray,qd=Ka?Ed(Ka):jd;const wi=qd;var Id=Object.prototype,Hd=Id.hasOwnProperty;function Vd(e,t){var n=Cn(e),r=!n&&_n(e),i=!n&&!r&&$i(e),o=!n&&!r&&!i&&wi(e),a=n||r||i||o,s=a?od(e.length,String):[],l=s.length;for(var c in e)(t||Hd.call(e,c))&&(!a||!("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||yi(c,l)))&&s.push(c);return s}function Ud(e,t){return function(n){return e(t(n))}}function Qd(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}var Xd=Object.prototype,Yd=Xd.hasOwnProperty;function Kd(e){if(!rt(e))return Qd(e);var t=xi(e),n=[];for(var r in e)"constructor"==r&&(t||!Yd.call(e,r))||n.push(r);return n}function ki(e){return On(e)?Vd(e,!0):Kd(e)}var Jd=Sn(Object,"create");const Pt=Jd;function Zd(){this.__data__=Pt?Pt(null):{},this.size=0}function eh(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var th="__lodash_hash_undefined__",rh=Object.prototype,nh=rh.hasOwnProperty;function ah(e){var t=this.__data__;if(Pt){var n=t[e];return n===th?void 0:n}return nh.call(t,e)?t[e]:void 0}var ih=Object.prototype,oh=ih.hasOwnProperty;function lh(e){var t=this.__data__;return Pt?void 0!==t[e]:oh.call(t,e)}var sh="__lodash_hash_undefined__";function uh(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Pt&&void 0===t?sh:t,this}function tt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ch(){this.__data__=[],this.size=0}function Yt(e,t){for(var n=e.length;n--;)if(Xt(e[n][0],t))return n;return-1}tt.prototype.clear=Zd,tt.prototype.delete=eh,tt.prototype.get=ah,tt.prototype.has=lh,tt.prototype.set=uh;var fh=Array.prototype,dh=fh.splice;function hh(e){var t=this.__data__,n=Yt(t,e);return!(n<0)&&(n==t.length-1?t.pop():dh.call(t,n,1),--this.size,!0)}function vh(e){var t=this.__data__,n=Yt(t,e);return n<0?void 0:t[n][1]}function ph(e){return Yt(this.__data__,e)>-1}function gh(e,t){var n=this.__data__,r=Yt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function Ye(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ye.prototype.clear=ch,Ye.prototype.delete=hh,Ye.prototype.get=vh,Ye.prototype.has=ph,Ye.prototype.set=gh;var mh=Sn(ot,"Map");const Ai=mh;function yh(){this.size=0,this.__data__={hash:new tt,map:new(Ai||Ye),string:new tt}}function bh(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function Kt(e,t){var n=e.__data__;return bh(t)?n["string"==typeof t?"string":"hash"]:n.map}function xh(e){var t=Kt(this,e).delete(e);return this.size-=t?1:0,t}function Ch(e){return Kt(this,e).get(e)}function _h(e){return Kt(this,e).has(e)}function $h(e,t){var n=Kt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function lt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}lt.prototype.clear=yh,lt.prototype.delete=xh,lt.prototype.get=Ch,lt.prototype.has=_h,lt.prototype.set=$h;var Ph=Ud(Object.getPrototypeOf,Object);const Si=Ph;var wh="[object Object]",kh=Function.prototype,Ah=Object.prototype,Li=kh.toString,Sh=Ah.hasOwnProperty,Lh=Li.call(Object);function Oh(e){if(!St(e)||Qt(e)!=wh)return!1;var t=Si(e);if(null===t)return!0;var n=Sh.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&Li.call(n)==Lh}function Gh(){this.__data__=new Ye,this.size=0}function Rh(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Th(e){return this.__data__.get(e)}function Mh(e){return this.__data__.has(e)}var Dh=200;function Fh(e,t){var n=this.__data__;if(n instanceof Ye){var r=n.__data__;if(!Ai||r.length<Dh-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new lt(r)}return n.set(e,t),this.size=n.size,this}function st(e){var t=this.__data__=new Ye(e);this.size=t.size}st.prototype.clear=Gh,st.prototype.delete=Rh,st.prototype.get=Th,st.prototype.has=Mh,st.prototype.set=Fh;var Oi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ja=Oi&&"object"==typeof module&&module&&!module.nodeType&&module,Bh=Ja&&Ja.exports===Oi,Za=Bh?ot.Buffer:void 0,ei=Za?Za.allocUnsafe:void 0;function Nh(e,t){if(t)return e.slice();var n=e.length,r=ei?ei(n):new e.constructor(n);return e.copy(r),r}var jh=ot.Uint8Array;const ti=jh;function Eh(e){var t=new e.constructor(e.byteLength);return new ti(t).set(new ti(e)),t}function Wh(e,t){var n=t?Eh(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function zh(e){return"function"!=typeof e.constructor||xi(e)?{}:Df(Si(e))}function qh(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}var Ih=qh();const Hh=Ih;function $n(e,t,n){(void 0!==n&&!Xt(e[t],n)||void 0===n&&!(t in e))&&Ln(e,t,n)}function Vh(e){return St(e)&&On(e)}function Pn(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Uh(e){return Zf(e,ki(e))}function Qh(e,t,n,r,i,o,a){var s=Pn(e,n),l=Pn(t,n),c=a.get(l);if(c)$n(e,n,c);else{var u=o?o(s,l,n+"",e,t,a):void 0,h=void 0===u;if(h){var d=Cn(l),f=!d&&$i(l),p=!d&&!f&&wi(l);u=l,d||f||p?Cn(s)?u=s:Vh(s)?u=Bf(s):f?(h=!1,u=Nh(l,!0)):p?(h=!1,u=Wh(l,!0)):u=[]:Oh(l)||_n(l)?(u=s,_n(s)?u=Uh(s):(!rt(s)||An(s))&&(u=zh(l))):h=!1}h&&(a.set(l,u),i(u,l,r,o,a),a.delete(l)),$n(e,n,u)}}function Gi(e,t,n,r,i){e!==t&&Hh(t,(function(o,a){if(i||(i=new st),rt(o))Qh(e,t,a,n,Gi,r,i);else{var s=r?r(Pn(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),$n(e,a,s)}}),ki)}var Xh=ad((function(e,t,n){Gi(e,t,n)}));const ri=Xh;function He(e,t){let n=ri(e,t.value);const r=watchEffect((()=>{n=ri(e,t.value)}));return onUnmounted((()=>{r()})),n}const Yh=["left-top","right-top","left-bottom","right-bottom"],Kh=["#4fd2dd","#235fa7"],Jh=defineComponent({props:Ie,setup(e){const t=ref$1(null),n=He(Kh,toRef(e,"color")),{width:r,height:i,initWH:o}=be(t);return{width:r,height:i,initWH:o,mergedColor:n,borderBox1:t}},render(){const{backgroundColor:e,width:t,height:n,mergedColor:r,$slots:i}=this;return createVNode("div",{ref:"borderBox1",class:"dv-border-box-1"},[createVNode("svg",{class:"dv-border",width:t,height:n},[createVNode("polygon",{fill:e,points:`10, 27 10, ${n-27} 13, ${n-24} 13, ${n-21} 24, ${n-11}\n      38, ${n-11} 41, ${n-8} 73, ${n-8} 75, ${n-10} 81, ${n-10}\n      85, ${n-6} ${t-85}, ${n-6} ${t-81}, ${n-10} ${t-75}, ${n-10}\n      ${t-73}, ${n-8} ${t-41}, ${n-8} ${t-38}, ${n-11}\n      ${t-10}, ${n-27} ${t-10}, 27 ${t-13}, 25 ${t-13}, 21\n      ${t-24}, 11 ${t-38}, 11 ${t-41}, 8 ${t-73}, 8 ${t-75}, 10\n      ${t-81}, 10 ${t-85}, 6 85, 6 81, 10 75, 10 73, 8 41, 8 38, 11 24, 11 13, 21 13, 24`},null)]),Yh.map((e=>createVNode("svg",{key:e,width:"150px",height:"150px",class:`${e} dv-border`},[createVNode("polygon",{fill:r[0],points:"6,66 6,18 12,12 18,12 24,6 27,6 30,9 36,9 39,6 84,6 81,9 75,9 73.2,7 40.8,7 37.8,10.2 24,10.2 12,21 12,24 9,27 9,51 7.8,54 7.8,63"},[createVNode("animate",{attributeName:"fill",values:`${r[0]};${r[1]};${r[0]}`,dur:"0.5s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{fill:r[1],points:"27.599999999999998,4.8 38.4,4.8 35.4,7.8 30.599999999999998,7.8"},[createVNode("animate",{attributeName:"fill",values:`${r[1]};${r[0]};${r[1]}`,dur:"0.5s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{fill:r[0],points:"9,54 9,63 7.199999999999999,66 7.199999999999999,75 7.8,78 7.8,110 8.4,110 8.4,66 9.6,66 9.6,54"},[createVNode("animate",{attributeName:"fill",values:`${r[0]};${r[1]};transparent`,dur:"1s",begin:"0s",repeatCount:"indefinite"},null)])]))),createVNode("div",{class:"border-box-content"},[renderSlot(i,"default")])])}}),an={install(e){e.component("DvBorderBox1",Jh)}},Zh=["#fff","rgba(255, 255, 255, 0.6)"],ev=defineComponent({props:Ie,setup(e){const t=ref$1(null),n=He(Zh,toRef(e,"color")),{width:r,height:i,initWH:o}=be(t);return{width:r,height:i,initWH:o,mergedColor:n,borderBox2:t}},render(){const{$slots:e,backgroundColor:t,width:n,height:r,mergedColor:i}=this;return createVNode("div",{ref:"borderBox2",class:"dv-border-box-2"},[createVNode("svg",{class:"dv-border-svg-container",width:n,height:r},[createVNode("polygon",{fill:t,points:`\n        7, 7 ${n-7}, 7 ${n-7}, ${r-7} 7, ${r-7}\n      `},null),createVNode("polyline",{stroke:i[0],points:`2, 2 ${n-2} ,2 ${n-2}, ${r-2} 2, ${r-2} 2, 2`},null),createVNode("polyline",{stroke:i[1],points:`6, 6 ${n-6}, 6 ${n-6}, ${r-6} 6, ${r-6} 6, 6`},null),createVNode("circle",{fill:i[0],cx:"11",cy:"11",r:"1"},null),createVNode("circle",{fill:i[0],cx:n-11,cy:"11",r:"1"},null),createVNode("circle",{fill:i[0],cx:n-11,cy:r-11,r:"1"},null),createVNode("circle",{fill:i[0],cx:"11",cy:r-11,r:"1"},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),on={install(e){e.component("DvBorderBox2",ev)}},tv=["#2862b7","#2862b7"],rv=defineComponent({props:Ie,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,mergedColor:He(tv,toRef(e,"color")),initWH:i,borderBox3:t}},render(){const{$slots:e,width:t,height:n,backgroundColor:r,mergedColor:i}=this;return createVNode("div",{ref:"borderBox3",class:"dv-border-box-3"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("polygon",{fill:r,points:`\n              23, 23 ${t-24}, 23 ${t-24}, ${n-24} 23, ${n-24}\n            `},null),createVNode("polyline",{class:"dv-bb3-line1",stroke:i[0],points:`4, 4 ${t-22} ,4 ${t-22}, ${n-22} 4, ${n-22} 4, 4`},null),createVNode("polyline",{class:"dv-bb3-line2",stroke:i[1],points:`10, 10 ${t-16}, 10 ${t-16}, ${n-16} 10, ${n-16} 10, 10`},null),createVNode("polyline",{class:"dv-bb3-line2",stroke:i[1],points:`16, 16 ${t-10}, 16 ${t-10}, ${n-10} 16, ${n-10} 16, 16`},null),createVNode("polyline",{class:"dv-bb3-line2",stroke:i[1],points:`22, 22 ${t-4}, 22 ${t-4}, ${n-4} 22, ${n-4} 22, 22`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),ln={install(e){e.component("DvBorderBox3",rv)}},nv={...Ie,reverse:{type:Boolean,default:!1}},av=["red","rgba(0,0,255,0.8)"],iv=defineComponent({props:nv,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,initWH:i,mergedColor:He(av,toRef(e,"color")),borderBox4:t}},render(){const{$slots:e,backgroundColor:t,reverse:n,width:r,height:i,mergedColor:o}=this;return createVNode("div",{ref:"borderBox4",class:"dv-border-box-4"},[createVNode("svg",{class:`dv-border-svg-container ${n&&"dv-reverse"}`,width:r,height:i},[createVNode("polygon",{fill:t,points:`\n        ${r-15}, 22 170, 22 150, 7 40, 7 28, 21 32, 24\n        16, 42 16, ${i-32} 41, ${i-7} ${r-15}, ${i-7}\n      `},null),createVNode("polyline",{class:"dv-bb4-line-1",stroke:o[0],points:`145, ${i-5} 40, ${i-5} 10, ${i-35}\n          10, 40 40, 5 150, 5 170, 20 ${r-15}, 20`},null),createVNode("polyline",{stroke:o[1],class:"dv-bb4-line-2",points:`245, ${i-1} 36, ${i-1} 14, ${i-23}\n          14, ${i-100}`},null),createVNode("polyline",{class:"dv-bb4-line-3",stroke:o[0],points:`7, ${i-40} 7, ${i-75}`},null),createVNode("polyline",{class:"dv-bb4-line-4",stroke:o[0],points:"28, 24 13, 41 13, 64"},null),createVNode("polyline",{class:"dv-bb4-line-5",stroke:o[0],points:"5, 45 5, 140"},null),createVNode("polyline",{class:"dv-bb4-line-6",stroke:o[1],points:"14, 75 14, 180"},null),createVNode("polyline",{class:"dv-bb4-line-7",stroke:o[1],points:"55, 11 147, 11 167, 26 250, 26"},null),createVNode("polyline",{class:"dv-bb4-line-8",stroke:o[1],points:"158, 5 173, 16"},null),createVNode("polyline",{class:"dv-bb4-line-9",stroke:o[0],points:`200, 17 ${r-10}, 17`},null),createVNode("polyline",{class:"dv-bb4-line-10",stroke:o[1],points:`385, 17 ${r-10}, 17`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),sn={install(e){e.component("DvBorderBox4",iv)}},ov={...Ie,reverse:{type:Boolean,default:!1}},lv=["rgba(255, 255, 255, 0.35)","rgba(255, 255, 255, 0.20)"],sv=defineComponent({props:ov,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,initWH:i,mergedColor:He(lv,toRef(e,"color")),borderBox5:t}},render(){const{$slots:e,width:t,height:n,mergedColor:r,backgroundColor:i,reverse:o}=this;return createVNode("div",{ref:"borderBox5",class:"dv-border-box-5"},[createVNode("svg",{class:`dv-border-svg-container  ${o&&"dv-reverse"}`,width:t,height:n},[createVNode("polygon",{fill:i,points:`\n            10, 22 ${t-22}, 22 ${t-22}, ${n-86} ${t-84}, ${n-24} 10, ${n-24}\n          `},null),createVNode("polyline",{class:"dv-bb5-line-1",stroke:r[0],points:`8, 5 ${t-5}, 5 ${t-5}, ${n-100}\n          ${t-100}, ${n-5} 8, ${n-5} 8, 5`},null),createVNode("polyline",{class:"dv-bb5-line-2",stroke:r[1],points:`3, 5 ${t-20}, 5 ${t-20}, ${n-60}\n          ${t-74}, ${n-5} 3, ${n-5} 3, 5`},null),createVNode("polyline",{class:"dv-bb5-line-3",stroke:r[1],points:`50, 13 ${t-35}, 13`},null),createVNode("polyline",{class:"dv-bb5-line-4",stroke:r[1],points:`15, 20 ${t-35}, 20`},null),createVNode("polyline",{class:"dv-bb5-line-5",stroke:r[1],points:`15, ${n-20} ${t-110}, ${n-20}`},null),createVNode("polyline",{class:"dv-bb5-line-6",stroke:r[1],points:`15, ${n-13} ${t-110}, ${n-13}`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),un={install(e){e.component("DvBorderBox5",sv)}},uv=["rgba(255, 255, 255, 0.35)","gray"],cv=defineComponent({props:Ie,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,initWH:i,mergedColor:He(uv,toRef(e,"color")),borderBox6:t}},render(){const{$slots:e,width:t,height:n,mergedColor:r,backgroundColor:i}=this;return createVNode("div",{ref:"borderBox6",class:"dv-border-box-6"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("polygon",{fill:i,points:`\n            9, 7 ${t-9}, 7 ${t-9}, ${n-7} 9, ${n-7}\n            `},null),createVNode("circle",{fill:r[1],cx:"5",cy:"5",r:"2"},null),createVNode("circle",{fill:r[1],cx:t-5,cy:"5",r:"2"},null),createVNode("circle",{fill:r[1],cx:t-5,cy:n-5,r:"2"},null),createVNode("circle",{fill:r[1],cx:"5",cy:n-5,r:"2"},null),createVNode("polyline",{stroke:r[0],points:`10, 4 ${t-10}, 4`},null),createVNode("polyline",{stroke:r[0],points:`10, ${n-4} ${t-10}, ${n-4}`},null),createVNode("polyline",{stroke:r[0],points:"5, 70 5, "+(n-70)},null),createVNode("polyline",{stroke:r[0],points:`${t-5}, 70 ${t-5}, ${n-70}`},null),createVNode("polyline",{stroke:r[0],points:"3, 10, 3, 50"},null),createVNode("polyline",{stroke:r[0],points:"7, 30 7, 80"},null),createVNode("polyline",{stroke:r[0],points:`${t-3}, 10 ${t-3}, 50`},null),createVNode("polyline",{stroke:r[0],points:`${t-7}, 30 ${t-7}, 80`},null),createVNode("polyline",{stroke:r[0],points:`3, ${n-10} 3, ${n-50}`},null),createVNode("polyline",{stroke:r[0],points:`7, ${n-30} 7, ${n-80}`},null),createVNode("polyline",{stroke:r[0],points:`${t-3}, ${n-10} ${t-3}, ${n-50}`},null),createVNode("polyline",{stroke:r[0],points:`${t-7}, ${n-30} ${t-7}, ${n-80}`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),cn={install(e){e.component("DvBorderBox6",cv)}},fv=["rgba(128,128,128,0.3)","rgba(128,128,128,0.5)"],dv=defineComponent({props:Ie,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,initWH:i,mergedColor:He(fv,toRef(e,"color")),borderBox7:t}},render(){const{$slots:e,width:t,height:n,mergedColor:r,backgroundColor:i}=this;return createVNode("div",{ref:"borderBox7",class:"dv-border-box-7",style:`box-shadow: inset 0 0 40px ${r[0]}; border: 1px solid ${r[0]}; background-color: ${i}`},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("polyline",{class:"dv-bb7-line-width-2",stroke:r[0],points:"0, 25 0, 0 25, 0"},null),createVNode("polyline",{class:"dv-bb7-line-width-2",stroke:r[0],points:`${t-25}, 0 ${t}, 0 ${t}, 25`},null),createVNode("polyline",{class:"dv-bb7-line-width-2",stroke:r[0],points:`${t-25}, ${n} ${t}, ${n} ${t}, ${n-25}`},null),createVNode("polyline",{class:"dv-bb7-line-width-2",stroke:r[0],points:`0, ${n-25} 0, ${n} 25, ${n}`},null),createVNode("polyline",{class:"dv-bb7-line-width-5",stroke:r[1],points:"0, 10 0, 0 10, 0"},null),createVNode("polyline",{class:"dv-bb7-line-width-5",stroke:r[1],points:`${t-10}, 0 ${t}, 0 ${t}, 10`},null),createVNode("polyline",{class:"dv-bb7-line-width-5",stroke:r[1],points:`${t-10}, ${n} ${t}, ${n} ${t}, ${n-10}`},null),createVNode("polyline",{class:"dv-bb7-line-width-5",stroke:r[1],points:`0, ${n-10} 0, ${n} 10, ${n}`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),fn={install(e){e.component("DvBorderBox7",dv)}},hv={...Ie,reverse:{type:Boolean,default:!1},dur:{type:Number,default:3}},vv=["#235fa7","#4fd2dd"],pv=defineComponent({props:hv,setup(e){const t=Ve(),n=ref$1(null),r=reactive({path:`border-box-8-path-${t}`,gradient:`border-box-8-gradient-${t}`,mask:`border-box-8-mask-${t}`}),{width:i,height:o,initWH:a}=be(n),s=computed((()=>2*(i.value+o.value-5))),l=computed((()=>e.reverse?`M 2.5, 2.5 L 2.5, ${o.value-2.5} L ${i.value-2.5}, ${o.value-2.5} L ${i.value-2.5}, 2.5 L 2.5, 2.5`:`M2.5, 2.5 L${i.value-2.5}, 2.5 L${i.value-2.5}, ${o.value-2.5} L2.5, ${o.value-2.5} L2.5, 2.5`)),c=He(vv,toRef(e,"color"));return{width:i,height:o,initWH:a,state:r,mergedColor:c,pathD:l,length:s,borderBox8:n}},render(){const{$slots:e,width:t,height:n,state:r,mergedColor:i,pathD:o,length:a,backgroundColor:s,dur:l}=this;return createVNode("div",{ref:"borderBox8",class:"dv-border-box-8"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("defs",null,[createVNode("path",{id:r.path,d:o,fill:"transparent"},null),createVNode("radialGradient",{id:r.gradient,cx:"50%",cy:"50%",r:"50%"},[createVNode("stop",{offset:"0%","stop-color":"#fff","stop-opacity":"1"},null),createVNode("stop",{offset:"100%","stop-color":"#fff","stop-opacity":"0"},null)]),createVNode("mask",{id:r.mask},[createVNode("circle",{cx:"0",cy:"0",r:"150",fill:`url(#${r.gradient})`},[h$1("animateMotion",{dur:`${l}s`,path:o,rotate:"auto",repeatCount:"indefinite"})])])]),createVNode("polygon",{fill:s,points:`5, 5 ${t-5}, 5 ${t-5} ${n-5} 5, ${n-5}`},null),createVNode("use",{stroke:i[0],"stroke-width":"1","xlink:href":`#${r.path}`},null),createVNode("use",{stroke:i[1],"stroke-width":"3","xlink:href":`#${r.path}`,mask:`url(#${r.mask})`},[createVNode("animate",{attributeName:"stroke-dasharray",from:`0, ${a}`,to:`${a}, 0`,dur:`${l}s`,repeatCount:"indefinite"},null)])]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),dn={install(e){e.component("DvBorderBox8",pv)}},gv=["#11eefd","#0078d2"],mv=defineComponent({props:Ie,setup(e){const t=Ve(),n=ref$1(null),{width:r,height:i,initWH:o}=be(n);return{width:r,height:i,initWH:o,state:reactive({gradientId:`border-box-9-gradient-${t}`,maskId:`border-box-9-mask-${t}`}),mergedColor:He(gv,toRef(e,"color")),borderBox9:n}},render(){const{$slots:e,width:t,height:n,state:r,mergedColor:i,backgroundColor:o}=this;return createVNode("div",{ref:"borderBox9",class:"dv-border-box-9"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("defs",null,[createVNode("linearGradient",{id:r.gradientId,x1:"0%",y1:"0%",x2:"100%",y2:"100%"},[createVNode("animate",{attributeName:"x1",values:"0%;100%;0%",dur:"10s",begin:"0s",repeatCount:"indefinite"},null),createVNode("animate",{attributeName:"x2",values:"100%;0%;100%",dur:"10s",begin:"0s",repeatCount:"indefinite"},null),createVNode("stop",{offset:"0%","stop-color":i[0]},[createVNode("animate",{attributeName:"stop-color",values:`${i[0]};${i[1]};${i[0]}`,dur:"10s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("stop",{offset:"100%","stop-color":i[1]},[createVNode("animate",{attributeName:"stop-color",values:`${i[1]};${i[0]};${i[1]}`,dur:"10s",begin:"0s",repeatCount:"indefinite"},null)])]),createVNode("mask",{id:r.maskId},[createVNode("polyline",{stroke:"#fff","stroke-width":"3",fill:"transparent",points:`8, ${.4*n} 8, 3, ${.4*t+7}, 3`},null),createVNode("polyline",{fill:"#fff",points:`8, ${.15*n} 8, 3, ${.1*t+7}, 3\n              ${.1*t}, 8 14, 8 14, ${.15*n-7}\n            `},null),createVNode("polyline",{stroke:"#fff","stroke-width":"3",fill:"transparent",points:`${.5*t}, 3 ${t-3}, 3, ${t-3}, ${.25*n}`},null),createVNode("polyline",{fill:"#fff",points:`\n              ${.52*t}, 3 ${.58*t}, 3\n              ${.58*t-7}, 9 ${.52*t+7}, 9\n            `},null),createVNode("polyline",{fill:"#fff",points:`\n              ${.9*t}, 3 ${t-3}, 3 ${t-3}, ${.1*n}\n              ${t-9}, ${.1*n-7} ${t-9}, 9 ${.9*t+7}, 9\n            `},null),createVNode("polyline",{stroke:"#fff","stroke-width":"3",fill:"transparent",points:`8, ${.5*n} 8, ${n-3} ${.3*t+7}, ${n-3}`},null),createVNode("polyline",{fill:"#fff",points:`\n              8, ${.55*n} 8, ${.7*n}\n              2, ${.7*n-7} 2, ${.55*n+7}\n            `},null),createVNode("polyline",{stroke:"#fff","stroke-width":"3",fill:"transparent",points:`${.35*t}, ${n-3} ${t-3}, ${n-3} ${t-3}, ${.35*n}`},null),createVNode("polyline",{fill:"#fff",points:`\n              ${.92*t}, ${n-3} ${t-3}, ${n-3} ${t-3}, ${.8*n}\n              ${t-9}, ${.8*n+7} ${t-9}, ${n-9} ${.92*t+7}, ${n-9}\n            `},null)])]),createVNode("polygon",{fill:o,points:`\n              15, 9 ${.1*t+1}, 9 ${.1*t+4}, 6 ${.52*t+2}, 6\n              ${.52*t+6}, 10 ${.58*t-7}, 10 ${.58*t-2}, 6\n              ${.9*t+2}, 6 ${.9*t+6}, 10 ${t-10}, 10 ${t-10}, ${.1*n-6}\n              ${t-6}, ${.1*n-1} ${t-6}, ${.8*n+1} ${t-10}, ${.8*n+6}\n              ${t-10}, ${n-10} ${.92*t+7}, ${n-10}  ${.92*t+2}, ${n-6}\n              11, ${n-6} 11, ${.15*n-2} 15, ${.15*n-7}\n            `},null),createVNode("rect",{x:"0",y:"0",width:t,height:n,fill:`url(#${r.gradientId})`,mask:`url(#${r.maskId})`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),hn={install(e){e.component("DvBorderBox9",mv)}},yv=["left-top","right-top","left-bottom","right-bottom"],bv=["#1d48c4","#d3e1f8"],xv=defineComponent({props:Ie,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,initWH:i,mergedColor:He(bv,toRef(e,"color")),borderBox10:t}},render(){const{$slots:e,width:t,height:n,mergedColor:r,backgroundColor:i}=this;return createVNode("div",{ref:"borderBox10",class:"dv-border-box-10",style:`box-shadow: inset 0 0 25px 3px ${r[0]}`},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("polygon",{fill:i,points:`\n              4, 0 ${t-4}, 0 ${t}, 4 ${t}, ${n-4} ${t-4}, ${n}\n              4, ${n} 0, ${n-4} 0, 4\n            `},null)]),yv.map((e=>createVNode("svg",{width:"150px",height:"150px",class:`${e} dv-border-svg-container`},[createVNode("polygon",{fill:r[1],points:"40, 0 5, 0 0, 5 0, 16 3, 19 3, 7 7, 3 35, 3"},null)]))),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),vn={install(e){e.component("DvBorderBox10",xv)}},Cv={...Ie,title:{type:String,default:""},titleWidth:{type:Number,default:250}},ni=["#8aaafb","#1f33a2"],_v=defineComponent({props:Cv,setup(e){const t=Ve(),n=ref$1(null),{width:r,height:i,initWH:o}=be(n);return{width:r,height:i,initWH:o,filterId:ref$1(`border-box-11-filterId-${t}`),mergedColor:He(ni,toRef(e,"color")),borderBox11:n}},render(){const{$slots:e,width:t,height:n,filterId:r,mergedColor:i,backgroundColor:o,title:a,titleWidth:s}=this;return createVNode("div",{ref:"borderBox11",class:"dv-border-box-11"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("defs",null,[createVNode("filter",{id:r,height:"150%",width:"150%",x:"-25%",y:"-25%"},[createVNode("feMorphology",{operator:"dilate",radius:"2",in:"SourceAlpha",result:"thicken"},null),createVNode("feGaussianBlur",{in:"thicken",stdDeviation:"3",result:"blurred"},null),createVNode("feFlood",{"flood-color":i[1],result:"glowColor"},null),createVNode("feComposite",{in:"glowColor",in2:"blurred",operator:"in",result:"softGlowColored"},null),createVNode("feMerge",null,[createVNode("feMergeNode",{in:"softGlowColored"},null),createVNode("feMergeNode",{in:"SourceGraphic"},null)])])]),createVNode("polygon",{fill:o,points:`\n        20, 32 ${.5*t-s/2}, 32 ${.5*t-s/2+20}, 53\n        ${.5*t+s/2-20}, 53 ${.5*t+s/2}, 32\n        ${t-20}, 32 ${t-8}, 48 ${t-8}, ${n-25} ${t-20}, ${n-8}\n        20, ${n-8} 8, ${n-25} 8, 50\n      `},null),createVNode("polyline",{stroke:i[0],filter:`url(#${r})`,points:`\n          ${(t-s)/2}, 30\n          20, 30 7, 50 7, ${50+(n-167)/2}\n          13, ${55+(n-167)/2} 13, ${135+(n-167)/2}\n          7, ${140+(n-167)/2} 7, ${n-27}\n          20, ${n-7} ${t-20}, ${n-7} ${t-7}, ${n-27}\n          ${t-7}, ${140+(n-167)/2} ${t-13}, ${135+(n-167)/2}\n          ${t-13}, ${55+(n-167)/2} ${t-7}, ${50+(n-167)/2}\n          ${t-7}, 50 ${t-20}, 30 ${(t+s)/2}, 30\n          ${(t+s)/2-20}, 7 ${(t-s)/2+20}, 7\n          ${(t-s)/2}, 30 ${(t-s)/2+20}, 52\n          ${(t+s)/2-20}, 52 ${(t+s)/2}, 30\n        `},null),createVNode("polygon",{stroke:i[0],fill:"transparent",points:`\n          ${(t+s)/2-5}, 30 ${(t+s)/2-21}, 11\n          ${(t+s)/2-27}, 11 ${(t+s)/2-8}, 34\n        `},null),createVNode("polygon",{stroke:i[0],fill:"transparent",points:`\n          ${(t-s)/2+5}, 30 ${(t-s)/2+22}, 49\n          ${(t-s)/2+28}, 49 ${(t-s)/2+8}, 26\n        `},null),createVNode("polygon",{stroke:i[0],fill:Be.fade(i[1]||ni[1],30),filter:`url(#${r})`,points:`\n          ${(t+s)/2-11}, 37 ${(t+s)/2-32}, 11\n          ${(t-s)/2+23}, 11 ${(t-s)/2+11}, 23\n          ${(t-s)/2+33}, 49 ${(t+s)/2-22}, 49\n        `},null),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"1",points:`\n          ${(t-s)/2-10}, 37 ${(t-s)/2-31}, 37\n          ${(t-s)/2-25}, 46 ${(t-s)/2-4}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"0.7",points:`\n          ${(t-s)/2-40}, 37 ${(t-s)/2-61}, 37\n          ${(t-s)/2-55}, 46 ${(t-s)/2-34}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"0.7;0.4;0.7",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"0.5",points:`\n          ${(t-s)/2-70}, 37 ${(t-s)/2-91}, 37\n          ${(t-s)/2-85}, 46 ${(t-s)/2-64}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"0.5;0.2;0.5",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"1",points:`\n          ${(t+s)/2+30}, 37 ${(t+s)/2+9}, 37\n          ${(t+s)/2+3}, 46 ${(t+s)/2+24}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"1;0.7;1",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"0.7",points:`\n          ${(t+s)/2+60}, 37 ${(t+s)/2+39}, 37\n          ${(t+s)/2+33}, 46 ${(t+s)/2+54}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"0.7;0.4;0.7",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("polygon",{filter:`url(#${r})`,fill:i[0],opacity:"0.5",points:`\n          ${(t+s)/2+90}, 37 ${(t+s)/2+69}, 37\n          ${(t+s)/2+63}, 46 ${(t+s)/2+84}, 46\n        `},[createVNode("animate",{attributeName:"opacity",values:"0.5;0.2;0.5",dur:"2s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("text",{class:"dv-border-box-11-title",x:""+t/2,y:"32",fill:"#fff","font-size":"18","text-anchor":"middle","dominant-baseline":"middle"},[a]),createVNode("polygon",{fill:i[0],filter:`url(#${r})`,points:`\n          7, ${53+(n-167)/2} 11, ${57+(n-167)/2}\n          11, ${133+(n-167)/2} 7, ${137+(n-167)/2}\n        `},null),createVNode("polygon",{fill:i[0],filter:`url(#${r})`,points:`\n          ${t-7}, ${53+(n-167)/2} ${t-11}, ${57+(n-167)/2}\n          ${t-11}, ${133+(n-167)/2} ${t-7}, ${137+(n-167)/2}\n        `},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),pn={install(e){e.component("DvBorderBox11",_v)}},xt=["#2e6099","#7ce7fd"],$v=defineComponent({props:Ie,setup(e){const t=Ve(),n=ref$1(null),{width:r,height:i,initWH:o}=be(n);return{width:r,height:i,filterId:ref$1(`borderr-box-12-filterId-${t}`),mergedColor:He(xt,toRef(e,"color")),initWH:o,borderBox12:n}},render(){const{$slots:e,width:t,height:n,filterId:r,mergedColor:i,backgroundColor:o}=this;return createVNode("div",{ref:"borderBox12",class:"dv-border-box-12"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("defs",null,[createVNode("filter",{id:r,height:"150%",width:"150%",x:"-25%",y:"-25%"},[createVNode("feMorphology",{operator:"dilate",radius:"1",in:"SourceAlpha",result:"thicken"},null),createVNode("feGaussianBlur",{in:"thicken",stdDeviation:"2",result:"blurred"},null),createVNode("feFlood",{"flood-color":Be.fade(i[1]||xt[1],70),result:"glowColor"},[createVNode("animate",{attributeName:"flood-color",values:`\n                ${Be.fade(i[1]||xt[1],70)};\n                ${Be.fade(i[1]||xt[1],30)};\n                ${Be.fade(i[1]||xt[1],70)};\n              `,dur:"3s",begin:"0s",repeatCount:"indefinite"},null)]),createVNode("feComposite",{in:"glowColor",in2:"blurred",operator:"in",result:"softGlowColored"},null),createVNode("feMerge",null,[createVNode("feMergeNode",{in:"softGlowColored"},null),createVNode("feMergeNode",{in:"SourceGraphic"},null)])])]),t&&n&&createVNode("path",{fill:o,"stroke-width":"2",stroke:i[0],d:`\n          M15 5 L ${t-15} 5 Q ${t-5} 5, ${t-5} 15\n          L ${t-5} ${n-15} Q ${t-5} ${n-5}, ${t-15} ${n-5}\n          L 15, ${n-5} Q 5 ${n-5} 5 ${n-15} L 5 15\n          Q 5 5 15 5\n        `},null),createVNode("path",{"stroke-width":"2",fill:"transparent","stroke-linecap":"round",filter:`url(#${r})`,stroke:i[1],d:"M 20 5 L 15 5 Q 5 5 5 15 L 5 20"},null),createVNode("path",{"stroke-width":"2",fill:"transparent","stroke-linecap":"round",filter:`url(#${r})`,stroke:i[1],d:`M ${t-20} 5 L ${t-15} 5 Q ${t-5} 5 ${t-5} 15 L ${t-5} 20`},null),createVNode("path",{"stroke-width":"2",fill:"transparent","stroke-linecap":"round",filter:`url(#${r})`,stroke:i[1],d:`\n          M ${t-20} ${n-5} L ${t-15} ${n-5}\n          Q ${t-5} ${n-5} ${t-5} ${n-15}\n          L ${t-5} ${n-20}\n          `},null),createVNode("path",{"stroke-width":"2",fill:"transparent","stroke-linecap":"round",filter:`url(#${r})`,stroke:i[1],d:`\n          M 20 ${n-5} L 15 ${n-5}\n          Q 5 ${n-5} 5 ${n-15}\n          L 5 ${n-20}\n          `},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),gn={install(e){e.component("DvBorderBox12",$v)}},Pv=["#6586ec","#2cf7fe"],wv=defineComponent({props:Ie,setup(e){const t=ref$1(null),{width:n,height:r,initWH:i}=be(t);return{width:n,height:r,mergedColor:He(Pv,toRef(e,"color")),initWH:i,borderBox13:t}},render(){const{$slots:e,width:t,height:n,mergedColor:r,backgroundColor:i}=this;return createVNode("div",{ref:"borderBox13",class:"dv-border-box-13"},[createVNode("svg",{class:"dv-border-svg-container",width:t,height:n},[createVNode("path",{fill:i,stroke:r[0],d:`\n          M 5 20 L 5 10 L 12 3  L 60 3 L 68 10\n          L ${t-20} 10 L ${t-5} 25\n          L ${t-5} ${n-5} L 20 ${n-5}\n          L 5 ${n-20} L 5 20\n        `},null),createVNode("path",{fill:"transparent","stroke-width":"3","stroke-linecap":"round","stroke-dasharray":"10, 5",stroke:r[0],d:"M 16 9 L 61 9"},null),createVNode("path",{fill:"transparent",stroke:r[1],d:"M 5 20 L 5 10 L 12 3  L 60 3 L 68 10"},null),createVNode("path",{fill:"transparent",stroke:r[1],d:`M ${t-5} ${n-30} L ${t-5} ${n-5} L ${t-30} ${n-5}`},null)]),createVNode("div",{class:"border-box-content"},[renderSlot(e,"default")])])}}),mn={install(e){e.component("DvBorderBox13",wv)}},Sv={install(e){var t,n,r,i,o,a,s,l,c,u,h,d,f,p,g,m,v,y,b,x,w,_,C,$,S,E,A,M,k,T,P,O,N,I,D,L,R,B;null==(t=Zt.install)||t.call(Zt,e),null==(n=er.install)||n.call(er,e),null==(r=Or.install)||r.call(Or,e),null==(i=Gr.install)||i.call(Gr,e),null==(o=Rr.install)||o.call(Rr,e),null==(a=Tr.install)||a.call(Tr,e),null==(s=Mr.install)||s.call(Mr,e),null==(l=Dr.install)||l.call(Dr,e),null==(c=jr.install)||c.call(jr,e),null==(u=Er.install)||u.call(Er,e),null==(h=Wr.install)||h.call(Wr,e),null==(d=zr.install)||d.call(zr,e),null==(f=qr.install)||f.call(qr,e),null==(p=Ir.install)||p.call(Ir,e),null==(g=Hr.install)||g.call(Hr,e),null==(m=Vr.install)||m.call(Vr,e),null==(v=Ur.install)||v.call(Ur,e),null==(y=Qr.install)||y.call(Qr,e),null==(b=Xr.install)||b.call(Xr,e),null==(x=Yr.install)||x.call(Yr,e),null==(w=Kr.install)||w.call(Kr,e),null==(_=Jr.install)||_.call(Jr,e),null==(C=Zr.install)||C.call(Zr,e),null==($=en.install)||$.call(en,e),null==(S=tn.install)||S.call(tn,e),null==(E=an.install)||E.call(an,e),null==(A=on.install)||A.call(on,e),null==(M=ln.install)||M.call(ln,e),null==(k=sn.install)||k.call(sn,e),null==(T=un.install)||T.call(un,e),null==(P=cn.install)||P.call(cn,e),null==(O=fn.install)||O.call(fn,e),null==(N=dn.install)||N.call(dn,e),null==(I=hn.install)||I.call(hn,e),null==(D=vn.install)||D.call(vn,e),null==(L=pn.install)||L.call(pn,e),null==(R=gn.install)||R.call(gn,e),null==(B=mn.install)||B.call(mn,e)}},app=createApp(_sfc_main);app.use(Sv),app.mount("#app");
